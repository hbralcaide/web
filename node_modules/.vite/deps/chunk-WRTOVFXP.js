import {
  $4,
  $B,
  $Pe,
  $a,
  $f,
  $g,
  A1e,
  A5,
  AM,
  Awe,
  C1e,
  C5,
  Cf,
  Ci,
  Co,
  Cwe,
  D1e,
  D_e,
  Dg,
  E1e,
  EV,
  Ewe,
  Ex,
  F0e,
  F1e,
  FM,
  GV,
  Gn,
  H5,
  HS,
  Hu,
  I1e,
  I5,
  IV,
  Ig,
  Iwe,
  J4,
  JB,
  JC,
  K4,
  Ka,
  L1e,
  Lu,
  Lwe,
  M1e,
  M5,
  MM,
  Mi,
  Mwe,
  NV,
  O1e,
  OV,
  Ox,
  P1e,
  Pt,
  Pwe,
  R1e,
  Rm,
  Ru,
  S1e,
  S5,
  Sr,
  Swe,
  T1e,
  T5,
  Twe,
  U5,
  UV,
  VV,
  Vt,
  WB,
  WC,
  XM,
  Xa,
  Xg,
  Y_e,
  ZM,
  ZS,
  Zn,
  Zu,
  Zve,
  _1e,
  _we,
  aM,
  aN,
  a_e,
  ax,
  b1e,
  b_e,
  bwe,
  c_e,
  cm,
  d0e,
  d1e,
  dm,
  external_exports,
  f_e,
  fm,
  g0e,
  g1e,
  h_e,
  hm,
  i5,
  iC,
  jC,
  jS,
  jV,
  jn,
  k0e,
  k1e,
  k5,
  l5,
  l_e,
  lr,
  lx,
  m0e,
  mC,
  n5,
  nI,
  nM,
  nx,
  oC,
  oe,
  ox,
  p_e,
  qC,
  qM,
  r5,
  rM,
  rN,
  r_e,
  rz,
  s5,
  sC,
  sN,
  s_e,
  sx,
  t5,
  tI,
  tM,
  tN,
  u_e,
  um,
  ur,
  ux,
  v1e,
  vwe,
  w1e,
  wwe,
  x0e,
  x1e,
  x_e,
  xe as xe2,
  xve,
  xwe,
  y0e,
  y1e,
  zV,
  zod_default
} from "./chunk-4WA6YUVK.js";
import {
  M
} from "./chunk-QAS2ACFW.js";
import {
  $i,
  $n,
  Ae,
  C,
  Cr,
  Cs,
  Ee,
  El,
  Gr,
  Ho,
  Ie,
  Jo,
  Jr,
  Jt,
  Ju,
  Kn,
  Le,
  Ls,
  Mn,
  Nt,
  Nu,
  Pe,
  Sl,
  Te,
  Vo,
  Wl,
  Ye,
  Yo,
  Zr,
  _l,
  _s,
  an,
  at,
  bn,
  cn,
  de,
  ed,
  ge,
  il,
  ju,
  ke,
  ki,
  kr,
  kt,
  ln,
  nd,
  nn,
  ol,
  pa,
  ps,
  rl,
  si,
  sl,
  sn,
  td,
  tl,
  ul,
  ve,
  wl,
  xe,
  xl,
  yc,
  yd,
  ys
} from "./chunk-X36R2MTZ.js";
import {
  q,
  r,
  s,
  t,
  u,
  v,
  w,
  x
} from "./chunk-J7CDIHLL.js";

// node_modules/@mappedin/mappedin-js/lib/esm/chunk-3PM6GKGK.js
var BT = q((U3, G3) => {
  $i();
  (function(e6, r6) {
    typeof U3 == "object" && typeof G3 < "u" ? G3.exports = r6() : typeof define == "function" && define.amd ? define(r6) : (e6 = e6 || self, e6.TinyQueue = r6());
  })(U3, function() {
    "use strict";
    var e6 = function(n, o) {
      if (n === void 0 && (n = []), o === void 0 && (o = r6), this.data = n, this.length = this.data.length, this.compare = o, this.length > 0) for (var i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);
    };
    e6.prototype.push = function(n) {
      this.data.push(n), this.length++, this._up(this.length - 1);
    }, e6.prototype.pop = function() {
      if (this.length !== 0) {
        var n = this.data[0], o = this.data.pop();
        return this.length--, this.length > 0 && (this.data[0] = o, this._down(0)), n;
      }
    }, e6.prototype.peek = function() {
      return this.data[0];
    }, e6.prototype._up = function(n) {
      for (var o = this, i = o.data, s6 = o.compare, u6 = i[n]; n > 0; ) {
        var l = n - 1 >> 1, c = i[l];
        if (s6(u6, c) >= 0) break;
        i[n] = c, n = l;
      }
      i[n] = u6;
    }, e6.prototype._down = function(n) {
      for (var o = this, i = o.data, s6 = o.compare, u6 = this.length >> 1, l = i[n]; n < u6; ) {
        var c = (n << 1) + 1, d = i[c], f = c + 1;
        if (f < this.length && s6(i[f], d) < 0 && (c = f, d = i[f]), s6(d, l) >= 0) break;
        i[n] = d, n = c;
      }
      i[n] = l;
    };
    function r6(t6, n) {
      return t6 < n ? -1 : t6 > n ? 1 : 0;
    }
    return e6;
  });
});
var kT = q((Z1e, z3) => {
  "use strict";
  $i();
  var Ty = BT();
  Ty.default && (Ty = Ty.default);
  z3.exports = PT;
  z3.exports.default = PT;
  function PT(e6, r6, t6) {
    r6 = r6 || 1;
    for (var n, o, i, s6, u6 = 0; u6 < e6[0].length; u6++) {
      var l = e6[0][u6];
      (!u6 || l[0] < n) && (n = l[0]), (!u6 || l[1] < o) && (o = l[1]), (!u6 || l[0] > i) && (i = l[0]), (!u6 || l[1] > s6) && (s6 = l[1]);
    }
    var c = i - n, d = s6 - o, f = Math.min(c, d), h = f / 2;
    if (f === 0) {
      var b = [n, o];
      return b.distance = 0, b;
    }
    for (var I = new Ty(void 0, aU), E = n; E < i; E += f) for (var v6 = o; v6 < s6; v6 += f) I.push(new nu(E + h, v6 + h, h, e6));
    var x6 = uU(e6), D = new nu(n + c / 2, o + d / 2, 0, e6);
    D.d > x6.d && (x6 = D);
    for (var w6 = I.length; I.length; ) {
      var S = I.pop();
      S.d > x6.d && (x6 = S, t6 && console.log("found best %d after %d probes", Math.round(1e4 * S.d) / 1e4, w6)), !(S.max - x6.d <= r6) && (h = S.h / 2, I.push(new nu(S.x - h, S.y - h, h, e6)), I.push(new nu(S.x + h, S.y - h, h, e6)), I.push(new nu(S.x - h, S.y + h, h, e6)), I.push(new nu(S.x + h, S.y + h, h, e6)), w6 += 4);
    }
    t6 && (console.log("num probes: " + w6), console.log("best distance: " + x6.d));
    var F = [x6.x, x6.y];
    return F.distance = x6.d, F;
  }
  function aU(e6, r6) {
    return r6.max - e6.max;
  }
  function nu(e6, r6, t6, n) {
    this.x = e6, this.y = r6, this.h = t6, this.d = sU(e6, r6, n), this.max = this.d + this.h * Math.SQRT2;
  }
  function sU(e6, r6, t6) {
    for (var n = false, o = 1 / 0, i = 0; i < t6.length; i++) for (var s6 = t6[i], u6 = 0, l = s6.length, c = l - 1; u6 < l; c = u6++) {
      var d = s6[u6], f = s6[c];
      d[1] > r6 != f[1] > r6 && e6 < (f[0] - d[0]) * (r6 - d[1]) / (f[1] - d[1]) + d[0] && (n = !n), o = Math.min(o, lU(e6, r6, d, f));
    }
    return o === 0 ? 0 : (n ? 1 : -1) * Math.sqrt(o);
  }
  function uU(e6) {
    for (var r6 = 0, t6 = 0, n = 0, o = e6[0], i = 0, s6 = o.length, u6 = s6 - 1; i < s6; u6 = i++) {
      var l = o[i], c = o[u6], d = l[0] * c[1] - c[0] * l[1];
      t6 += (l[0] + c[0]) * d, n += (l[1] + c[1]) * d, r6 += d * 3;
    }
    return r6 === 0 ? new nu(o[0][0], o[0][1], 0, e6) : new nu(t6 / r6, n / r6, 0, e6);
  }
  function lU(e6, r6, t6, n) {
    var o = t6[0], i = t6[1], s6 = n[0] - o, u6 = n[1] - i;
    if (s6 !== 0 || u6 !== 0) {
      var l = ((e6 - o) * s6 + (r6 - i) * u6) / (s6 * s6 + u6 * u6);
      l > 1 ? (o = n[0], i = n[1]) : l > 0 && (o += s6 * l, i += u6 * l);
    }
    return s6 = e6 - o, u6 = r6 - i, s6 * s6 + u6 * u6;
  }
});
var dw = q((sx2, ux2) => {
  $i();
  (function(e6, r6) {
    typeof sx2 == "object" && typeof ux2 < "u" ? ux2.exports = r6() : typeof define == "function" && define.amd ? define(r6) : (e6 = e6 || self).RBush = r6();
  })(sx2, function() {
    "use strict";
    function e6(v6, x6, D, w6, S) {
      (function F(P, L, N, $, W) {
        for (; $ > N; ) {
          if ($ - N > 600) {
            var V = $ - N + 1, q4 = L - N + 1, se = Math.log(V), ue = 0.5 * Math.exp(2 * se / 3), ce = 0.5 * Math.sqrt(se * ue * (V - ue) / V) * (q4 - V / 2 < 0 ? -1 : 1), de2 = Math.max(N, Math.floor(L - q4 * ue / V + ce)), Ee2 = Math.min($, Math.floor(L + (V - q4) * ue / V + ce));
            F(P, L, de2, Ee2, W);
          }
          var he = P[L], ne = N, Ce = $;
          for (r6(P, N, L), W(P[$], he) > 0 && r6(P, N, $); ne < Ce; ) {
            for (r6(P, ne, Ce), ne++, Ce--; W(P[ne], he) < 0; ) ne++;
            for (; W(P[Ce], he) > 0; ) Ce--;
          }
          W(P[N], he) === 0 ? r6(P, N, Ce) : r6(P, ++Ce, $), Ce <= L && (N = Ce + 1), L <= Ce && ($ = Ce - 1);
        }
      })(v6, x6, D || 0, w6 || v6.length - 1, S || t6);
    }
    function r6(v6, x6, D) {
      var w6 = v6[x6];
      v6[x6] = v6[D], v6[D] = w6;
    }
    function t6(v6, x6) {
      return v6 < x6 ? -1 : v6 > x6 ? 1 : 0;
    }
    var n = function(v6) {
      v6 === void 0 && (v6 = 9), this._maxEntries = Math.max(4, v6), this._minEntries = Math.max(2, Math.ceil(0.4 * this._maxEntries)), this.clear();
    };
    function o(v6, x6, D) {
      if (!D) return x6.indexOf(v6);
      for (var w6 = 0; w6 < x6.length; w6++) if (D(v6, x6[w6])) return w6;
      return -1;
    }
    function i(v6, x6) {
      s6(v6, 0, v6.children.length, x6, v6);
    }
    function s6(v6, x6, D, w6, S) {
      S || (S = I(null)), S.minX = 1 / 0, S.minY = 1 / 0, S.maxX = -1 / 0, S.maxY = -1 / 0;
      for (var F = x6; F < D; F++) {
        var P = v6.children[F];
        u6(S, v6.leaf ? w6(P) : P);
      }
      return S;
    }
    function u6(v6, x6) {
      return v6.minX = Math.min(v6.minX, x6.minX), v6.minY = Math.min(v6.minY, x6.minY), v6.maxX = Math.max(v6.maxX, x6.maxX), v6.maxY = Math.max(v6.maxY, x6.maxY), v6;
    }
    function l(v6, x6) {
      return v6.minX - x6.minX;
    }
    function c(v6, x6) {
      return v6.minY - x6.minY;
    }
    function d(v6) {
      return (v6.maxX - v6.minX) * (v6.maxY - v6.minY);
    }
    function f(v6) {
      return v6.maxX - v6.minX + (v6.maxY - v6.minY);
    }
    function h(v6, x6) {
      return v6.minX <= x6.minX && v6.minY <= x6.minY && x6.maxX <= v6.maxX && x6.maxY <= v6.maxY;
    }
    function b(v6, x6) {
      return x6.minX <= v6.maxX && x6.minY <= v6.maxY && x6.maxX >= v6.minX && x6.maxY >= v6.minY;
    }
    function I(v6) {
      return { children: v6, height: 1, leaf: true, minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 };
    }
    function E(v6, x6, D, w6, S) {
      for (var F = [x6, D]; F.length; ) if (!((D = F.pop()) - (x6 = F.pop()) <= w6)) {
        var P = x6 + Math.ceil((D - x6) / w6 / 2) * w6;
        e6(v6, P, x6, D, S), F.push(x6, P, P, D);
      }
    }
    return n.prototype.all = function() {
      return this._all(this.data, []);
    }, n.prototype.search = function(v6) {
      var x6 = this.data, D = [];
      if (!b(v6, x6)) return D;
      for (var w6 = this.toBBox, S = []; x6; ) {
        for (var F = 0; F < x6.children.length; F++) {
          var P = x6.children[F], L = x6.leaf ? w6(P) : P;
          b(v6, L) && (x6.leaf ? D.push(P) : h(v6, L) ? this._all(P, D) : S.push(P));
        }
        x6 = S.pop();
      }
      return D;
    }, n.prototype.collides = function(v6) {
      var x6 = this.data;
      if (!b(v6, x6)) return false;
      for (var D = []; x6; ) {
        for (var w6 = 0; w6 < x6.children.length; w6++) {
          var S = x6.children[w6], F = x6.leaf ? this.toBBox(S) : S;
          if (b(v6, F)) {
            if (x6.leaf || h(v6, F)) return true;
            D.push(S);
          }
        }
        x6 = D.pop();
      }
      return false;
    }, n.prototype.load = function(v6) {
      if (!v6 || !v6.length) return this;
      if (v6.length < this._minEntries) {
        for (var x6 = 0; x6 < v6.length; x6++) this.insert(v6[x6]);
        return this;
      }
      var D = this._build(v6.slice(), 0, v6.length - 1, 0);
      if (this.data.children.length) if (this.data.height === D.height) this._splitRoot(this.data, D);
      else {
        if (this.data.height < D.height) {
          var w6 = this.data;
          this.data = D, D = w6;
        }
        this._insert(D, this.data.height - D.height - 1, true);
      }
      else this.data = D;
      return this;
    }, n.prototype.insert = function(v6) {
      return v6 && this._insert(v6, this.data.height - 1), this;
    }, n.prototype.clear = function() {
      return this.data = I([]), this;
    }, n.prototype.remove = function(v6, x6) {
      if (!v6) return this;
      for (var D, w6, S, F = this.data, P = this.toBBox(v6), L = [], N = []; F || L.length; ) {
        if (F || (F = L.pop(), w6 = L[L.length - 1], D = N.pop(), S = true), F.leaf) {
          var $ = o(v6, F.children, x6);
          if ($ !== -1) return F.children.splice($, 1), L.push(F), this._condense(L), this;
        }
        S || F.leaf || !h(F, P) ? w6 ? (D++, F = w6.children[D], S = false) : F = null : (L.push(F), N.push(D), D = 0, w6 = F, F = F.children[0]);
      }
      return this;
    }, n.prototype.toBBox = function(v6) {
      return v6;
    }, n.prototype.compareMinX = function(v6, x6) {
      return v6.minX - x6.minX;
    }, n.prototype.compareMinY = function(v6, x6) {
      return v6.minY - x6.minY;
    }, n.prototype.toJSON = function() {
      return this.data;
    }, n.prototype.fromJSON = function(v6) {
      return this.data = v6, this;
    }, n.prototype._all = function(v6, x6) {
      for (var D = []; v6; ) v6.leaf ? x6.push.apply(x6, v6.children) : D.push.apply(D, v6.children), v6 = D.pop();
      return x6;
    }, n.prototype._build = function(v6, x6, D, w6) {
      var S, F = D - x6 + 1, P = this._maxEntries;
      if (F <= P) return i(S = I(v6.slice(x6, D + 1)), this.toBBox), S;
      w6 || (w6 = Math.ceil(Math.log(F) / Math.log(P)), P = Math.ceil(F / Math.pow(P, w6 - 1))), (S = I([])).leaf = false, S.height = w6;
      var L = Math.ceil(F / P), N = L * Math.ceil(Math.sqrt(P));
      E(v6, x6, D, N, this.compareMinX);
      for (var $ = x6; $ <= D; $ += N) {
        var W = Math.min($ + N - 1, D);
        E(v6, $, W, L, this.compareMinY);
        for (var V = $; V <= W; V += L) {
          var q4 = Math.min(V + L - 1, W);
          S.children.push(this._build(v6, V, q4, w6 - 1));
        }
      }
      return i(S, this.toBBox), S;
    }, n.prototype._chooseSubtree = function(v6, x6, D, w6) {
      for (; w6.push(x6), !x6.leaf && w6.length - 1 !== D; ) {
        for (var S = 1 / 0, F = 1 / 0, P = void 0, L = 0; L < x6.children.length; L++) {
          var N = x6.children[L], $ = d(N), W = (V = v6, q4 = N, (Math.max(q4.maxX, V.maxX) - Math.min(q4.minX, V.minX)) * (Math.max(q4.maxY, V.maxY) - Math.min(q4.minY, V.minY)) - $);
          W < F ? (F = W, S = $ < S ? $ : S, P = N) : W === F && $ < S && (S = $, P = N);
        }
        x6 = P || x6.children[0];
      }
      var V, q4;
      return x6;
    }, n.prototype._insert = function(v6, x6, D) {
      var w6 = D ? v6 : this.toBBox(v6), S = [], F = this._chooseSubtree(w6, this.data, x6, S);
      for (F.children.push(v6), u6(F, w6); x6 >= 0 && S[x6].children.length > this._maxEntries; ) this._split(S, x6), x6--;
      this._adjustParentBBoxes(w6, S, x6);
    }, n.prototype._split = function(v6, x6) {
      var D = v6[x6], w6 = D.children.length, S = this._minEntries;
      this._chooseSplitAxis(D, S, w6);
      var F = this._chooseSplitIndex(D, S, w6), P = I(D.children.splice(F, D.children.length - F));
      P.height = D.height, P.leaf = D.leaf, i(D, this.toBBox), i(P, this.toBBox), x6 ? v6[x6 - 1].children.push(P) : this._splitRoot(D, P);
    }, n.prototype._splitRoot = function(v6, x6) {
      this.data = I([v6, x6]), this.data.height = v6.height + 1, this.data.leaf = false, i(this.data, this.toBBox);
    }, n.prototype._chooseSplitIndex = function(v6, x6, D) {
      for (var w6, S, F, P, L, N, $, W = 1 / 0, V = 1 / 0, q4 = x6; q4 <= D - x6; q4++) {
        var se = s6(v6, 0, q4, this.toBBox), ue = s6(v6, q4, D, this.toBBox), ce = (S = se, F = ue, P = void 0, L = void 0, N = void 0, $ = void 0, P = Math.max(S.minX, F.minX), L = Math.max(S.minY, F.minY), N = Math.min(S.maxX, F.maxX), $ = Math.min(S.maxY, F.maxY), Math.max(0, N - P) * Math.max(0, $ - L)), de2 = d(se) + d(ue);
        ce < W ? (W = ce, w6 = q4, V = de2 < V ? de2 : V) : ce === W && de2 < V && (V = de2, w6 = q4);
      }
      return w6 || D - x6;
    }, n.prototype._chooseSplitAxis = function(v6, x6, D) {
      var w6 = v6.leaf ? this.compareMinX : l, S = v6.leaf ? this.compareMinY : c;
      this._allDistMargin(v6, x6, D, w6) < this._allDistMargin(v6, x6, D, S) && v6.children.sort(w6);
    }, n.prototype._allDistMargin = function(v6, x6, D, w6) {
      v6.children.sort(w6);
      for (var S = this.toBBox, F = s6(v6, 0, x6, S), P = s6(v6, D - x6, D, S), L = f(F) + f(P), N = x6; N < D - x6; N++) {
        var $ = v6.children[N];
        u6(F, v6.leaf ? S($) : $), L += f(F);
      }
      for (var W = D - x6 - 1; W >= x6; W--) {
        var V = v6.children[W];
        u6(P, v6.leaf ? S(V) : V), L += f(P);
      }
      return L;
    }, n.prototype._adjustParentBBoxes = function(v6, x6, D) {
      for (var w6 = D; w6 >= 0; w6--) u6(x6[w6], v6);
    }, n.prototype._condense = function(v6) {
      for (var x6 = v6.length - 1, D = void 0; x6 >= 0; x6--) v6[x6].children.length === 0 ? x6 > 0 ? (D = v6[x6 - 1].children).splice(D.indexOf(v6[x6]), 1) : this.clear() : i(v6[x6], this.toBBox);
    }, n;
  });
});
var mx = q((De) => {
  "use strict";
  $i();
  Object.defineProperty(De, "__esModule", { value: true });
  De.earthRadius = 63710088e-1;
  De.factors = { centimeters: De.earthRadius * 100, centimetres: De.earthRadius * 100, degrees: De.earthRadius / 111325, feet: De.earthRadius * 3.28084, inches: De.earthRadius * 39.37, kilometers: De.earthRadius / 1e3, kilometres: De.earthRadius / 1e3, meters: De.earthRadius, metres: De.earthRadius, miles: De.earthRadius / 1609.344, millimeters: De.earthRadius * 1e3, millimetres: De.earthRadius * 1e3, nauticalmiles: De.earthRadius / 1852, radians: 1, yards: De.earthRadius * 1.0936 };
  De.unitsFactors = { centimeters: 100, centimetres: 100, degrees: 1 / 111325, feet: 3.28084, inches: 39.37, kilometers: 1 / 1e3, kilometres: 1 / 1e3, meters: 1, metres: 1, miles: 1 / 1609.344, millimeters: 1e3, millimetres: 1e3, nauticalmiles: 1 / 1852, radians: 1 / De.earthRadius, yards: 1.0936133 };
  De.areaFactors = { acres: 247105e-9, centimeters: 1e4, centimetres: 1e4, feet: 10.763910417, hectares: 1e-4, inches: 1550.003100006, kilometers: 1e-6, kilometres: 1e-6, meters: 1, metres: 1, miles: 386e-9, millimeters: 1e6, millimetres: 1e6, yards: 1.195990046 };
  function au(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    var n = { type: "Feature" };
    return (t6.id === 0 || t6.id) && (n.id = t6.id), t6.bbox && (n.bbox = t6.bbox), n.properties = r6 || {}, n.geometry = e6, n;
  }
  De.feature = au;
  function hG(e6, r6, t6) {
    switch (t6 === void 0 && (t6 = {}), e6) {
      case "Point":
        return lx2(r6).geometry;
      case "LineString":
        return px(r6).geometry;
      case "Polygon":
        return cx(r6).geometry;
      case "MultiPoint":
        return fw(r6).geometry;
      case "MultiLineString":
        return mw(r6).geometry;
      case "MultiPolygon":
        return hw(r6).geometry;
      default:
        throw new Error(e6 + " is invalid");
    }
  }
  De.geometry = hG;
  function lx2(e6, r6, t6) {
    if (t6 === void 0 && (t6 = {}), !e6) throw new Error("coordinates is required");
    if (!Array.isArray(e6)) throw new Error("coordinates must be an Array");
    if (e6.length < 2) throw new Error("coordinates must be at least 2 numbers long");
    if (!Py(e6[0]) || !Py(e6[1])) throw new Error("coordinates must contain numbers");
    var n = { type: "Point", coordinates: e6 };
    return au(n, r6, t6);
  }
  De.point = lx2;
  function gG(e6, r6, t6) {
    return t6 === void 0 && (t6 = {}), ky(e6.map(function(n) {
      return lx2(n, r6);
    }), t6);
  }
  De.points = gG;
  function cx(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    for (var n = 0, o = e6; n < o.length; n++) {
      var i = o[n];
      if (i.length < 4) throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");
      for (var s6 = 0; s6 < i[i.length - 1].length; s6++) if (i[i.length - 1][s6] !== i[0][s6]) throw new Error("First and last Position are not equivalent.");
    }
    var u6 = { type: "Polygon", coordinates: e6 };
    return au(u6, r6, t6);
  }
  De.polygon = cx;
  function yG(e6, r6, t6) {
    return t6 === void 0 && (t6 = {}), ky(e6.map(function(n) {
      return cx(n, r6);
    }), t6);
  }
  De.polygons = yG;
  function px(e6, r6, t6) {
    if (t6 === void 0 && (t6 = {}), e6.length < 2) throw new Error("coordinates must be an array of two or more positions");
    var n = { type: "LineString", coordinates: e6 };
    return au(n, r6, t6);
  }
  De.lineString = px;
  function bG(e6, r6, t6) {
    return t6 === void 0 && (t6 = {}), ky(e6.map(function(n) {
      return px(n, r6);
    }), t6);
  }
  De.lineStrings = bG;
  function ky(e6, r6) {
    r6 === void 0 && (r6 = {});
    var t6 = { type: "FeatureCollection" };
    return r6.id && (t6.id = r6.id), r6.bbox && (t6.bbox = r6.bbox), t6.features = e6, t6;
  }
  De.featureCollection = ky;
  function mw(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    var n = { type: "MultiLineString", coordinates: e6 };
    return au(n, r6, t6);
  }
  De.multiLineString = mw;
  function fw(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    var n = { type: "MultiPoint", coordinates: e6 };
    return au(n, r6, t6);
  }
  De.multiPoint = fw;
  function hw(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    var n = { type: "MultiPolygon", coordinates: e6 };
    return au(n, r6, t6);
  }
  De.multiPolygon = hw;
  function vG(e6, r6, t6) {
    t6 === void 0 && (t6 = {});
    var n = { type: "GeometryCollection", geometries: e6 };
    return au(n, r6, t6);
  }
  De.geometryCollection = vG;
  function xG(e6, r6) {
    if (r6 === void 0 && (r6 = 0), r6 && !(r6 >= 0)) throw new Error("precision must be a positive number");
    var t6 = Math.pow(10, r6 || 0);
    return Math.round(e6 * t6) / t6;
  }
  De.round = xG;
  function gw(e6, r6) {
    r6 === void 0 && (r6 = "kilometers");
    var t6 = De.factors[r6];
    if (!t6) throw new Error(r6 + " units is invalid");
    return e6 * t6;
  }
  De.radiansToLength = gw;
  function dx(e6, r6) {
    r6 === void 0 && (r6 = "kilometers");
    var t6 = De.factors[r6];
    if (!t6) throw new Error(r6 + " units is invalid");
    return e6 / t6;
  }
  De.lengthToRadians = dx;
  function IG(e6, r6) {
    return yw(dx(e6, r6));
  }
  De.lengthToDegrees = IG;
  function EG(e6) {
    var r6 = e6 % 360;
    return r6 < 0 && (r6 += 360), r6;
  }
  De.bearingToAzimuth = EG;
  function yw(e6) {
    var r6 = e6 % (2 * Math.PI);
    return r6 * 180 / Math.PI;
  }
  De.radiansToDegrees = yw;
  function CG(e6) {
    var r6 = e6 % 360;
    return r6 * Math.PI / 180;
  }
  De.degreesToRadians = CG;
  function SG(e6, r6, t6) {
    if (r6 === void 0 && (r6 = "kilometers"), t6 === void 0 && (t6 = "kilometers"), !(e6 >= 0)) throw new Error("length must be a positive number");
    return gw(dx(e6, r6), t6);
  }
  De.convertLength = SG;
  function DG(e6, r6, t6) {
    if (r6 === void 0 && (r6 = "meters"), t6 === void 0 && (t6 = "kilometers"), !(e6 >= 0)) throw new Error("area must be a positive number");
    var n = De.areaFactors[r6];
    if (!n) throw new Error("invalid original units");
    var o = De.areaFactors[t6];
    if (!o) throw new Error("invalid final units");
    return e6 / n * o;
  }
  De.convertArea = DG;
  function Py(e6) {
    return !isNaN(e6) && e6 !== null && !Array.isArray(e6);
  }
  De.isNumber = Py;
  function TG(e6) {
    return !!e6 && e6.constructor === Object;
  }
  De.isObject = TG;
  function wG(e6) {
    if (!e6) throw new Error("bbox is required");
    if (!Array.isArray(e6)) throw new Error("bbox must be an Array");
    if (e6.length !== 4 && e6.length !== 6) throw new Error("bbox must be an Array of 4 or 6 numbers");
    e6.forEach(function(r6) {
      if (!Py(r6)) throw new Error("bbox must only contain numbers");
    });
  }
  De.validateBBox = wG;
  function FG(e6) {
    if (!e6) throw new Error("id is required");
    if (["string", "number"].indexOf(typeof e6) === -1) throw new Error("id must be a number or a string");
  }
  De.validateId = FG;
});
var hx = q((Ir) => {
  "use strict";
  $i();
  Object.defineProperty(Ir, "__esModule", { value: true });
  var cn2 = mx();
  function ff(e6, r6, t6) {
    if (e6 !== null) for (var n, o, i, s6, u6, l, c, d = 0, f = 0, h, b = e6.type, I = b === "FeatureCollection", E = b === "Feature", v6 = I ? e6.features.length : 1, x6 = 0; x6 < v6; x6++) {
      c = I ? e6.features[x6].geometry : E ? e6.geometry : e6, h = c ? c.type === "GeometryCollection" : false, u6 = h ? c.geometries.length : 1;
      for (var D = 0; D < u6; D++) {
        var w6 = 0, S = 0;
        if (s6 = h ? c.geometries[D] : c, s6 !== null) {
          l = s6.coordinates;
          var F = s6.type;
          switch (d = t6 && (F === "Polygon" || F === "MultiPolygon") ? 1 : 0, F) {
            case null:
              break;
            case "Point":
              if (r6(l, f, x6, w6, S) === false) return false;
              f++, w6++;
              break;
            case "LineString":
            case "MultiPoint":
              for (n = 0; n < l.length; n++) {
                if (r6(l[n], f, x6, w6, S) === false) return false;
                f++, F === "MultiPoint" && w6++;
              }
              F === "LineString" && w6++;
              break;
            case "Polygon":
            case "MultiLineString":
              for (n = 0; n < l.length; n++) {
                for (o = 0; o < l[n].length - d; o++) {
                  if (r6(l[n][o], f, x6, w6, S) === false) return false;
                  f++;
                }
                F === "MultiLineString" && w6++, F === "Polygon" && S++;
              }
              F === "Polygon" && w6++;
              break;
            case "MultiPolygon":
              for (n = 0; n < l.length; n++) {
                for (S = 0, o = 0; o < l[n].length; o++) {
                  for (i = 0; i < l[n][o].length - d; i++) {
                    if (r6(l[n][o][i], f, x6, w6, S) === false) return false;
                    f++;
                  }
                  S++;
                }
                w6++;
              }
              break;
            case "GeometryCollection":
              for (n = 0; n < s6.geometries.length; n++) if (ff(s6.geometries[n], r6, t6) === false) return false;
              break;
            default:
              throw new Error("Unknown Geometry Type");
          }
        }
      }
    }
  }
  function MG(e6, r6, t6, n) {
    var o = t6;
    return ff(e6, function(i, s6, u6, l, c) {
      s6 === 0 && t6 === void 0 ? o = i : o = r6(o, i, s6, u6, l, c);
    }, n), o;
  }
  function bw(e6, r6) {
    var t6;
    switch (e6.type) {
      case "FeatureCollection":
        for (t6 = 0; t6 < e6.features.length && r6(e6.features[t6].properties, t6) !== false; t6++) ;
        break;
      case "Feature":
        r6(e6.properties, 0);
        break;
    }
  }
  function AG(e6, r6, t6) {
    var n = t6;
    return bw(e6, function(o, i) {
      i === 0 && t6 === void 0 ? n = o : n = r6(n, o, i);
    }), n;
  }
  function vw(e6, r6) {
    if (e6.type === "Feature") r6(e6, 0);
    else if (e6.type === "FeatureCollection") for (var t6 = 0; t6 < e6.features.length && r6(e6.features[t6], t6) !== false; t6++) ;
  }
  function OG(e6, r6, t6) {
    var n = t6;
    return vw(e6, function(o, i) {
      i === 0 && t6 === void 0 ? n = o : n = r6(n, o, i);
    }), n;
  }
  function BG(e6) {
    var r6 = [];
    return ff(e6, function(t6) {
      r6.push(t6);
    }), r6;
  }
  function fx(e6, r6) {
    var t6, n, o, i, s6, u6, l, c, d, f, h = 0, b = e6.type === "FeatureCollection", I = e6.type === "Feature", E = b ? e6.features.length : 1;
    for (t6 = 0; t6 < E; t6++) {
      for (u6 = b ? e6.features[t6].geometry : I ? e6.geometry : e6, c = b ? e6.features[t6].properties : I ? e6.properties : {}, d = b ? e6.features[t6].bbox : I ? e6.bbox : void 0, f = b ? e6.features[t6].id : I ? e6.id : void 0, l = u6 ? u6.type === "GeometryCollection" : false, s6 = l ? u6.geometries.length : 1, o = 0; o < s6; o++) {
        if (i = l ? u6.geometries[o] : u6, i === null) {
          if (r6(null, h, c, d, f) === false) return false;
          continue;
        }
        switch (i.type) {
          case "Point":
          case "LineString":
          case "MultiPoint":
          case "Polygon":
          case "MultiLineString":
          case "MultiPolygon": {
            if (r6(i, h, c, d, f) === false) return false;
            break;
          }
          case "GeometryCollection": {
            for (n = 0; n < i.geometries.length; n++) if (r6(i.geometries[n], h, c, d, f) === false) return false;
            break;
          }
          default:
            throw new Error("Unknown Geometry Type");
        }
      }
      h++;
    }
  }
  function PG(e6, r6, t6) {
    var n = t6;
    return fx(e6, function(o, i, s6, u6, l) {
      i === 0 && t6 === void 0 ? n = o : n = r6(n, o, i, s6, u6, l);
    }), n;
  }
  function _y(e6, r6) {
    fx(e6, function(t6, n, o, i, s6) {
      var u6 = t6 === null ? null : t6.type;
      switch (u6) {
        case null:
        case "Point":
        case "LineString":
        case "Polygon":
          return r6(cn2.feature(t6, o, { bbox: i, id: s6 }), n, 0) === false ? false : void 0;
      }
      var l;
      switch (u6) {
        case "MultiPoint":
          l = "Point";
          break;
        case "MultiLineString":
          l = "LineString";
          break;
        case "MultiPolygon":
          l = "Polygon";
          break;
      }
      for (var c = 0; c < t6.coordinates.length; c++) {
        var d = t6.coordinates[c], f = { type: l, coordinates: d };
        if (r6(cn2.feature(f, o), n, c) === false) return false;
      }
    });
  }
  function kG(e6, r6, t6) {
    var n = t6;
    return _y(e6, function(o, i, s6) {
      i === 0 && s6 === 0 && t6 === void 0 ? n = o : n = r6(n, o, i, s6);
    }), n;
  }
  function xw(e6, r6) {
    _y(e6, function(t6, n, o) {
      var i = 0;
      if (t6.geometry) {
        var s6 = t6.geometry.type;
        if (!(s6 === "Point" || s6 === "MultiPoint")) {
          var u6, l = 0, c = 0, d = 0;
          if (ff(t6, function(f, h, b, I, E) {
            if (u6 === void 0 || n > l || I > c || E > d) {
              u6 = f, l = n, c = I, d = E, i = 0;
              return;
            }
            var v6 = cn2.lineString([u6, f], t6.properties);
            if (r6(v6, n, o, E, i) === false) return false;
            i++, u6 = f;
          }) === false) return false;
        }
      }
    });
  }
  function _G(e6, r6, t6) {
    var n = t6, o = false;
    return xw(e6, function(i, s6, u6, l, c) {
      o === false && t6 === void 0 ? n = i : n = r6(n, i, s6, u6, l, c), o = true;
    }), n;
  }
  function Iw(e6, r6) {
    if (!e6) throw new Error("geojson is required");
    _y(e6, function(t6, n, o) {
      if (t6.geometry !== null) {
        var i = t6.geometry.type, s6 = t6.geometry.coordinates;
        switch (i) {
          case "LineString":
            if (r6(t6, n, o, 0, 0) === false) return false;
            break;
          case "Polygon":
            for (var u6 = 0; u6 < s6.length; u6++) if (r6(cn2.lineString(s6[u6], t6.properties), n, o, u6) === false) return false;
            break;
        }
      }
    });
  }
  function LG(e6, r6, t6) {
    var n = t6;
    return Iw(e6, function(o, i, s6, u6) {
      i === 0 && t6 === void 0 ? n = o : n = r6(n, o, i, s6, u6);
    }), n;
  }
  function RG(e6, r6) {
    if (r6 = r6 || {}, !cn2.isObject(r6)) throw new Error("options is invalid");
    var t6 = r6.featureIndex || 0, n = r6.multiFeatureIndex || 0, o = r6.geometryIndex || 0, i = r6.segmentIndex || 0, s6 = r6.properties, u6;
    switch (e6.type) {
      case "FeatureCollection":
        t6 < 0 && (t6 = e6.features.length + t6), s6 = s6 || e6.features[t6].properties, u6 = e6.features[t6].geometry;
        break;
      case "Feature":
        s6 = s6 || e6.properties, u6 = e6.geometry;
        break;
      case "Point":
      case "MultiPoint":
        return null;
      case "LineString":
      case "Polygon":
      case "MultiLineString":
      case "MultiPolygon":
        u6 = e6;
        break;
      default:
        throw new Error("geojson is invalid");
    }
    if (u6 === null) return null;
    var l = u6.coordinates;
    switch (u6.type) {
      case "Point":
      case "MultiPoint":
        return null;
      case "LineString":
        return i < 0 && (i = l.length + i - 1), cn2.lineString([l[i], l[i + 1]], s6, r6);
      case "Polygon":
        return o < 0 && (o = l.length + o), i < 0 && (i = l[o].length + i - 1), cn2.lineString([l[o][i], l[o][i + 1]], s6, r6);
      case "MultiLineString":
        return n < 0 && (n = l.length + n), i < 0 && (i = l[n].length + i - 1), cn2.lineString([l[n][i], l[n][i + 1]], s6, r6);
      case "MultiPolygon":
        return n < 0 && (n = l.length + n), o < 0 && (o = l[n].length + o), i < 0 && (i = l[n][o].length - i - 1), cn2.lineString([l[n][o][i], l[n][o][i + 1]], s6, r6);
    }
    throw new Error("geojson is invalid");
  }
  function NG(e6, r6) {
    if (r6 = r6 || {}, !cn2.isObject(r6)) throw new Error("options is invalid");
    var t6 = r6.featureIndex || 0, n = r6.multiFeatureIndex || 0, o = r6.geometryIndex || 0, i = r6.coordIndex || 0, s6 = r6.properties, u6;
    switch (e6.type) {
      case "FeatureCollection":
        t6 < 0 && (t6 = e6.features.length + t6), s6 = s6 || e6.features[t6].properties, u6 = e6.features[t6].geometry;
        break;
      case "Feature":
        s6 = s6 || e6.properties, u6 = e6.geometry;
        break;
      case "Point":
      case "MultiPoint":
        return null;
      case "LineString":
      case "Polygon":
      case "MultiLineString":
      case "MultiPolygon":
        u6 = e6;
        break;
      default:
        throw new Error("geojson is invalid");
    }
    if (u6 === null) return null;
    var l = u6.coordinates;
    switch (u6.type) {
      case "Point":
        return cn2.point(l, s6, r6);
      case "MultiPoint":
        return n < 0 && (n = l.length + n), cn2.point(l[n], s6, r6);
      case "LineString":
        return i < 0 && (i = l.length + i), cn2.point(l[i], s6, r6);
      case "Polygon":
        return o < 0 && (o = l.length + o), i < 0 && (i = l[o].length + i), cn2.point(l[o][i], s6, r6);
      case "MultiLineString":
        return n < 0 && (n = l.length + n), i < 0 && (i = l[n].length + i), cn2.point(l[n][i], s6, r6);
      case "MultiPolygon":
        return n < 0 && (n = l.length + n), o < 0 && (o = l[n].length + o), i < 0 && (i = l[n][o].length - i), cn2.point(l[n][o][i], s6, r6);
    }
    throw new Error("geojson is invalid");
  }
  Ir.coordAll = BG;
  Ir.coordEach = ff;
  Ir.coordReduce = MG;
  Ir.featureEach = vw;
  Ir.featureReduce = OG;
  Ir.findPoint = NG;
  Ir.findSegment = RG;
  Ir.flattenEach = _y;
  Ir.flattenReduce = kG;
  Ir.geomEach = fx;
  Ir.geomReduce = PG;
  Ir.lineEach = Iw;
  Ir.lineReduce = LG;
  Ir.propEach = bw;
  Ir.propReduce = AG;
  Ir.segmentEach = xw;
  Ir.segmentReduce = _G;
});
var Ew = q((yx) => {
  "use strict";
  $i();
  Object.defineProperty(yx, "__esModule", { value: true });
  var $G = hx();
  function gx(e6) {
    var r6 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
    return $G.coordEach(e6, function(t6) {
      r6[0] > t6[0] && (r6[0] = t6[0]), r6[1] > t6[1] && (r6[1] = t6[1]), r6[2] < t6[0] && (r6[2] = t6[0]), r6[3] < t6[1] && (r6[3] = t6[1]);
    }), r6;
  }
  gx.default = gx;
  yx.default = gx;
});
var ww = q((Cve, bx) => {
  $i();
  var ca = dw(), Sw = mx(), Dw = hx(), Mp = Ew().default, jG = Dw.featureEach, Ive = Dw.coordEach, Eve = Sw.polygon, Cw = Sw.featureCollection;
  function Tw(e6) {
    var r6 = new ca(e6);
    return r6.insert = function(t6) {
      if (t6.type !== "Feature") throw new Error("invalid feature");
      return t6.bbox = t6.bbox ? t6.bbox : Mp(t6), ca.prototype.insert.call(this, t6);
    }, r6.load = function(t6) {
      var n = [];
      return Array.isArray(t6) ? t6.forEach(function(o) {
        if (o.type !== "Feature") throw new Error("invalid features");
        o.bbox = o.bbox ? o.bbox : Mp(o), n.push(o);
      }) : jG(t6, function(o) {
        if (o.type !== "Feature") throw new Error("invalid features");
        o.bbox = o.bbox ? o.bbox : Mp(o), n.push(o);
      }), ca.prototype.load.call(this, n);
    }, r6.remove = function(t6, n) {
      if (t6.type !== "Feature") throw new Error("invalid feature");
      return t6.bbox = t6.bbox ? t6.bbox : Mp(t6), ca.prototype.remove.call(this, t6, n);
    }, r6.clear = function() {
      return ca.prototype.clear.call(this);
    }, r6.search = function(t6) {
      var n = ca.prototype.search.call(this, this.toBBox(t6));
      return Cw(n);
    }, r6.collides = function(t6) {
      return ca.prototype.collides.call(this, this.toBBox(t6));
    }, r6.all = function() {
      var t6 = ca.prototype.all.call(this);
      return Cw(t6);
    }, r6.toJSON = function() {
      return ca.prototype.toJSON.call(this);
    }, r6.fromJSON = function(t6) {
      return ca.prototype.fromJSON.call(this, t6);
    }, r6.toBBox = function(t6) {
      var n;
      if (t6.bbox) n = t6.bbox;
      else if (Array.isArray(t6) && t6.length === 4) n = t6;
      else if (Array.isArray(t6) && t6.length === 6) n = [t6[0], t6[1], t6[3], t6[4]];
      else if (t6.type === "Feature") n = Mp(t6);
      else if (t6.type === "FeatureCollection") n = Mp(t6);
      else throw new Error("invalid geojson");
      return { minX: n[0], minY: n[1], maxX: n[2], maxY: n[3] };
    }, r6;
  }
  bx.exports = Tw;
  bx.exports.default = Tw;
});
$i();
$i();
$i();
$i();
$i();
$i();
var ym = (e6) => e6 != null;
var c8 = (function() {
  let r6 = globalThis.fetch;
  return { fetch(...t6) {
    if (!ym(r6)) throw new Error("fetch is not available in your environment. Pass your own function into `setFetchFn` (node-fetch, etc)");
    return r6?.(...t6);
  }, setFetch(t6) {
    r6 = t6;
  } };
})();
var ME = c8.fetch;
var kE = ["websdk", "web", "webv2", "kiosk-v2", "mobile", "iossdk", "androidsdk", "reactnativesdk", "gen7", "bespoke", "reactsdk"];
var AE = kE[0];
var _E = "https://api-gateway.mappedin.com/track-analytics/a/";
var LE = "deny-watchposition";
var RE = "load-mapview";
var NE = "load-mapdata";
var $E = "change-language";
var jE = "query-directions";
var Xi;
var vo;
var $a2;
var Mb;
var Vh;
var Bc = class {
  constructor() {
    v(this, $a2);
    v(this, Xi, Object.freeze({}));
    v(this, vo);
    t(this, "oneTimeEventsSent", /* @__PURE__ */ new Set());
    t(this, "sendGetDirectionsEvent", k5((r6, t6, n) => {
      let o = { start: r6, end: t6, type: "location_to_location" };
      return n !== void 0 && (o.accessible = n), this.sendAnalyticEvent(jE, o);
    }, 2500));
    w(this, vo, x(this, $a2, Vh).call(this, u(this, Xi)));
  }
  init(r6) {
    this.reset(), this.updateStateWithOptions(r6);
  }
  reset() {
    w(this, Xi, {}), w(this, vo, x(this, $a2, Vh).call(this, {})), this.oneTimeEventsSent.clear();
  }
  updateStateWithOptions(r6) {
    return w(this, Xi, Object.freeze(Object.assign({}, u(this, Xi), r6))), w(this, vo, x(this, $a2, Vh).call(this, r6)), x(this, $a2, Mb).call(this, u(this, vo)), u(this, vo);
  }
  updateState(r6) {
    let t6 = { ...r6 };
    t6.mapId && (t6.analyticsBaseUrl = Fb({ ...u(this, vo), mapId: t6.mapId })), t6.context && (t6.context = PE(t6.context)), t6.baseUri && (t6.analyticsBaseUrl = Fb({ baseUri: t6.baseUri, mapId: u(this, vo).mapId })), Object.assign(u(this, vo), t6), this.handleStateUpdate(r6), x(this, $a2, Mb).call(this, t6);
  }
  handleStateUpdate(r6) {
    r6.userPosition?.floorLevel ? this.sendBlueDotEvents("found-floor") : r6.userPosition && this.sendBlueDotEvents("found-position");
  }
  get authReady() {
    let { key: r6, secret: t6, accessToken: n } = this.getState();
    return !!(r6 && t6) || !!n;
  }
  getState() {
    return u(this, vo);
  }
  getContext() {
    return this.getState().context || u(this, Xi).context || AE;
  }
  getSessionId() {
    return this.getState().sessionId || u(this, Xi).sessionId || BE();
  }
  getDeviceId() {
    return this.getState().deviceId || u(this, Xi).deviceId || OE();
  }
  sendAnalyticEvent(r6, t6 = {}) {
    let n = this.getState(), o = p8(n.analyticsBaseUrl, r6), i = { "mi-context": this.getContext(), "mi-session": this.getSessionId(), "mi-device": this.getDeviceId() };
    if (n.logEvents && Pt.log("Analytics.track", o, i), !n.sendEvents) return Promise.resolve();
    if (!this.authReady) return Pt.warn("Auth needs to be ready to send analytics.");
    let s6 = { ...t6, g: n.geolocationMode, sdk_version: n.version };
    return n.userPosition && Object.assign(s6, n.userPosition), i["Content-Type"] = "application/json", n.accessToken ? i.Authorization = `Bearer ${n.accessToken}` : n.noAuth || n.secret && n.key && (i["x-mappedin-key"] = btoa(n.key), i["x-mappedin-secret"] = btoa(n.secret)), ME(o, { method: "POST", mode: "cors", headers: i, body: JSON.stringify(s6) });
  }
  capture(r6, t6) {
    if (m8.includes(r6)) return Pt.warn(`${r6} event is sent internally.`), Promise.resolve();
    let n = d8.includes(r6) ? r6.slice(1) : r6;
    return this.sendAnalyticEvent(n, t6);
  }
  sendGetMapDataEvent(r6) {
    return this.sendAnalyticEvent(NE, r6);
  }
  sendChangeLanguageEvent(r6) {
    return this.sendAnalyticEvent($E, r6);
  }
  sendWatchPositionDenied() {
    return this.sendAnalyticEvent(LE);
  }
  sendMapViewLoadedEvent({ firstRenderDuration: r6, dimension: t6, collisionWorkerDisabled: n, outdoorsWorkerDisabled: o }) {
    return this.sendAnalyticEvent(RE, { type: "3d", firstRenderDuration: r6, width: t6.width, height: t6.height, devicePixelRatio: globalThis.devicePixelRatio || 1, collisionWorkerDisabled: n, outdoorsWorkerDisabled: o });
  }
  sendBlueDotEvents(r6) {
    if (!((r6 === "found-floor" || r6 === "found-position") && this.oneTimeEventsSent.has(r6))) return this.oneTimeEventsSent.add(r6), this.sendAnalyticEvent(r6);
  }
};
Xi = /* @__PURE__ */ new WeakMap(), vo = /* @__PURE__ */ new WeakMap(), $a2 = /* @__PURE__ */ new WeakSet(), Mb = function(r6) {
  r6.sessionId && Rm.getInstance().saveSessionData("id", r6.sessionId), r6.deviceId && Rm.getInstance().saveLocalData("deviceId", r6.deviceId);
}, Vh = function(r6) {
  let t6 = r6.baseUri ?? _E;
  return { baseUri: t6, analyticsBaseUrl: Fb({ ...r6, baseUri: t6 }), version: yc?.env?.npm_package_version || "v6", deviceId: r6.deviceId || OE(), accessToken: r6.accessToken, mapId: r6.mapId, sessionId: r6.sessionId || BE(), platformString: r6.platformString || "", context: PE(r6.context) || AE, geolocationMode: false, sendEvents: r6.sendEvents ?? true, logEvents: r6.logEvents ?? false, noAuth: r6.noAuth || false, key: r6.key, secret: r6.secret };
};
function Fb({ mapId: e6, baseUri: r6 = _E }) {
  return `${r6}${e6}/`;
}
function OE() {
  return Rm.getInstance().loadLocalData("deviceId");
}
function BE() {
  return Rm.getInstance().loadSessionData("id");
}
function p8(e6, r6) {
  return e6 + r6;
}
function PE(e6) {
  return kE.find((r6) => r6 === e6);
}
var d8 = ["$select-location", "$select-category", "$query-suggest", "$query-search"];
var m8 = [RE, NE, jE, LE, $E];
var LZ = new Bc();
var xo;
var bm = class {
  constructor(r6) {
    v(this, xo);
    t(this, "capture");
    t(this, "updateState");
    w(this, xo, r6), this.capture = u(this, xo).capture.bind(u(this, xo)), this.updateState = u(this, xo).updateState.bind(u(this, xo));
  }
  getState() {
    let { sessionId: r6, deviceId: t6, ...n } = u(this, xo).getState();
    return n;
  }
  getContext() {
    return u(this, xo).getContext();
  }
  getSessionId() {
    return u(this, xo).getSessionId();
  }
  getDeviceId() {
    return u(this, xo).getDeviceId();
  }
};
xo = /* @__PURE__ */ new WeakMap();
$i();
$i();
var xm;
var Im;
var Em;
var vm = class {
  constructor(r6, t6, { enabled: n = false } = {}) {
    v(this, xm);
    t(this, "searchInstance");
    v(this, Im);
    v(this, Em);
    t(this, "enabled", false);
    w(this, xm, r6), w(this, Im, t6), w(this, Em, () => {
      this.searchInstance?.then((o) => o.populate());
    }), n && this.enable();
  }
  async query(r6, t6 = {}) {
    if (this.enabled || await this.enable(), !this.searchInstance) return Pt.error("Search should be enabled by now"), { places: [], enterpriseLocations: [], enterpriseCategories: [] };
    try {
      return await (await this.searchInstance).search(r6, t6);
    } catch (n) {
      return Pt.error("Search.query failed due to", n), { places: [], enterpriseLocations: [], enterpriseCategories: [] };
    }
  }
  async suggest(r6, t6 = {}) {
    if (this.enabled || await this.enable(), !this.searchInstance) return Pt.error("Search should be enabled by now"), [];
    try {
      return await (await this.searchInstance).suggest(r6, t6);
    } catch (n) {
      return Pt.error("Search.suggest failed due to", n), [];
    }
  }
  async enable() {
    this.enabled || (this.enabled = true, this.searchInstance || (this.searchInstance = import("./internal-WJZVXVL6-OOCFA5YE.js").then(({ InternalSearch: r6 }) => new r6(u(this, xm)))), u(this, Im).on("language-change", u(this, Em)), await this.searchInstance);
  }
};
xm = /* @__PURE__ */ new WeakMap(), Im = /* @__PURE__ */ new WeakMap(), Em = /* @__PURE__ */ new WeakMap();
var UE = /* @__PURE__ */ new WeakMap();
var Hu2;
var Nt2;
var Ab = class {
  constructor(r6, { search: t6 } = {}) {
    v(this, Hu2);
    v(this, Nt2);
    t(this, "Analytics");
    t(this, "Search");
    t(this, "Query");
    t(this, "internal");
    t(this, "on", (r8, t10) => {
      u(this, Hu2).on(r8, t10);
    });
    t(this, "off", (r8, t10) => {
      u(this, Hu2).off(r8, t10);
    });
    t(this, "__LEGACY_GET_DIRECTIONS_SYNC", (r8, t10, n) => u(this, Nt2).__LEGACY_GET_DIRECTIONS_SYNC(r8, t10, n));
    t(this, "getDirections", (r8, t10, n) => u(this, Nt2).getDirections(r8, t10, n));
    t(this, "__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC", (r8, t10, n) => u(this, Nt2).__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC(r8, t10, n));
    t(this, "getDirectionsMultiDestination", (r8, t10, n) => u(this, Nt2).getDirectionsMultiDestination(r8, t10, n));
    w(this, Hu2, new Ka()), w(this, Nt2, r6), UE.set(this, r6), this.Analytics = new bm(r6.Analytics), this.Query = r6.Query, this.internal = r6, this.Search = new vm(this, r6, { enabled: t6?.enabled }), u(this, Nt2).on("language-change", (n) => {
      u(this, Hu2).publish("language-change", n);
    });
  }
  getEnv() {
    return u(this, Nt2).getEnv();
  }
  getAccessToken() {
    return u(this, Nt2).tokenManager?.getAccessToken().token;
  }
  get mapName() {
    return u(this, Nt2).mapName;
  }
  get mapId() {
    return u(this, Nt2).getMapDataOptions?.mapId;
  }
  get mapCenter() {
    return u(this, Nt2).mapCenter;
  }
  get organizationId() {
    return u(this, Nt2).organizationId;
  }
  get outdoorViewToken() {
    return u(this, Nt2).outdoorViewToken;
  }
  getByType(r6) {
    return u(this, Nt2).getByType(r6);
  }
  getById(r6, t6) {
    return u(this, Nt2).getById(r6, t6);
  }
  getByExternalId(r6, t6) {
    return u(this, Nt2).getByExternalId(r6, t6);
  }
  getGeoJSON(r6) {
    return r6.geoJSON;
  }
  async changeLanguage(r6) {
    return u(this, Nt2).changeLanguage(r6);
  }
  get currentLanguage() {
    return u(this, Nt2).currentLanguage;
  }
  get naturalBearing() {
    return u(this, Nt2).naturalBearing ?? 0;
  }
  getDistance(r6, t6) {
    return u(this, Nt2).getDistance(r6, t6);
  }
  toBinaryBundle({ downloadLanguagePacks: r6 = true } = {}) {
    return u(this, Nt2).toBinaryBundle({ downloadLanguagePacks: r6 });
  }
  toJSONBundle({ downloadLanguagePacks: r6 = true } = {}) {
    return u(this, Nt2).toJSONBundle({ downloadLanguagePacks: r6 });
  }
};
Hu2 = /* @__PURE__ */ new WeakMap(), Nt2 = /* @__PURE__ */ new WeakMap();
var Cm = Ab;
function Sm(e6) {
  let r6 = UE.get(e6);
  if (!r6) throw new Error("MapDataInternal not found");
  return r6;
}
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
$i();
var Hh = { accessible: "accessible", outdoors: "outdoors", public: "public" };
$i();
$i();
$i();
$i();
$i();
$i();
var Ye2 = {};
r(Ye2, { HasPropertyKey: () => f8, IsArray: () => rn, IsAsyncIterator: () => Ob, IsBigInt: () => Dm, IsBoolean: () => Hs, IsDate: () => Zu2, IsFunction: () => Bb, IsIterator: () => Pb, IsNull: () => kb, IsNumber: () => ti, IsObject: () => Et, IsRegExp: () => Tm, IsString: () => Bt, IsSymbol: () => _b, IsUint8Array: () => ja, IsUndefined: () => Zt });
$i();
function f8(e6, r6) {
  return r6 in e6;
}
function Ob(e6) {
  return Et(e6) && !rn(e6) && !ja(e6) && Symbol.asyncIterator in e6;
}
function rn(e6) {
  return Array.isArray(e6);
}
function Dm(e6) {
  return typeof e6 == "bigint";
}
function Hs(e6) {
  return typeof e6 == "boolean";
}
function Zu2(e6) {
  return e6 instanceof globalThis.Date;
}
function Bb(e6) {
  return typeof e6 == "function";
}
function Pb(e6) {
  return Et(e6) && !rn(e6) && !ja(e6) && Symbol.iterator in e6;
}
function kb(e6) {
  return e6 === null;
}
function ti(e6) {
  return typeof e6 == "number";
}
function Et(e6) {
  return typeof e6 == "object" && e6 !== null;
}
function Tm(e6) {
  return e6 instanceof globalThis.RegExp;
}
function Bt(e6) {
  return typeof e6 == "string";
}
function _b(e6) {
  return typeof e6 == "symbol";
}
function ja(e6) {
  return e6 instanceof globalThis.Uint8Array;
}
function Zt(e6) {
  return e6 === void 0;
}
function h8(e6) {
  return e6.map((r6) => Zh(r6));
}
function g8(e6) {
  return new Date(e6.getTime());
}
function y8(e6) {
  return new Uint8Array(e6);
}
function b8(e6) {
  return new RegExp(e6.source, e6.flags);
}
function v8(e6) {
  let r6 = {};
  for (let t6 of Object.getOwnPropertyNames(e6)) r6[t6] = Zh(e6[t6]);
  for (let t6 of Object.getOwnPropertySymbols(e6)) r6[t6] = Zh(e6[t6]);
  return r6;
}
function Zh(e6) {
  return rn(e6) ? h8(e6) : Zu2(e6) ? g8(e6) : ja(e6) ? y8(e6) : Tm(e6) ? b8(e6) : Et(e6) ? v8(e6) : e6;
}
function $t(e6) {
  return Zh(e6);
}
function GE(e6) {
  return e6.map((r6) => wm(r6));
}
function wm(e6, r6) {
  return r6 === void 0 ? $t(e6) : $t({ ...r6, ...e6 });
}
$i();
$i();
$i();
function Wh(e6) {
  return Be(e6) && Symbol.asyncIterator in e6;
}
function Xh(e6) {
  return Be(e6) && Symbol.iterator in e6;
}
function Lb(e6) {
  return Be(e6) && (Object.getPrototypeOf(e6) === Object.prototype || Object.getPrototypeOf(e6) === null);
}
function Jh(e6) {
  return e6 instanceof Promise;
}
function mn(e6) {
  return e6 instanceof Date && Number.isFinite(e6.getTime());
}
function zE(e6) {
  return e6 instanceof globalThis.Map;
}
function VE(e6) {
  return e6 instanceof globalThis.Set;
}
function Io(e6) {
  return ArrayBuffer.isView(e6);
}
function Pc(e6) {
  return e6 instanceof globalThis.Uint8Array;
}
function Te2(e6, r6) {
  return r6 in e6;
}
function Be(e6) {
  return e6 !== null && typeof e6 == "object";
}
function Me(e6) {
  return Array.isArray(e6) && !ArrayBuffer.isView(e6);
}
function Wt(e6) {
  return e6 === void 0;
}
function Ua(e6) {
  return e6 === null;
}
function Ji(e6) {
  return typeof e6 == "boolean";
}
function ye(e6) {
  return typeof e6 == "number";
}
function Yh(e6) {
  return Number.isInteger(e6);
}
function Gr2(e6) {
  return typeof e6 == "bigint";
}
function He(e6) {
  return typeof e6 == "string";
}
function Zs(e6) {
  return typeof e6 == "function";
}
function Ga(e6) {
  return typeof e6 == "symbol";
}
function zr(e6) {
  return Gr2(e6) || Ji(e6) || Ua(e6) || ye(e6) || He(e6) || Ga(e6) || Wt(e6);
}
var mt;
(function(e6) {
  e6.InstanceMode = "default", e6.ExactOptionalPropertyTypes = false, e6.AllowArrayObject = false, e6.AllowNaN = false, e6.AllowNullVoid = false;
  function r6(s6, u6) {
    return e6.ExactOptionalPropertyTypes ? u6 in s6 : s6[u6] !== void 0;
  }
  e6.IsExactOptionalProperty = r6;
  function t6(s6) {
    let u6 = Be(s6);
    return e6.AllowArrayObject ? u6 : u6 && !Me(s6);
  }
  e6.IsObjectLike = t6;
  function n(s6) {
    return t6(s6) && !(s6 instanceof Date) && !(s6 instanceof Uint8Array);
  }
  e6.IsRecordLike = n;
  function o(s6) {
    return e6.AllowNaN ? ye(s6) : Number.isFinite(s6);
  }
  e6.IsNumberLike = o;
  function i(s6) {
    let u6 = Wt(s6);
    return e6.AllowNullVoid ? u6 || s6 === null : u6;
  }
  e6.IsVoidLike = i;
})(mt || (mt = {}));
$i();
function x8(e6) {
  return globalThis.Object.freeze(e6).map((r6) => Fm(r6));
}
function I8(e6) {
  let r6 = {};
  for (let t6 of Object.getOwnPropertyNames(e6)) r6[t6] = Fm(e6[t6]);
  for (let t6 of Object.getOwnPropertySymbols(e6)) r6[t6] = Fm(e6[t6]);
  return globalThis.Object.freeze(r6);
}
function Fm(e6) {
  return rn(e6) ? x8(e6) : Zu2(e6) ? e6 : ja(e6) ? e6 : Tm(e6) ? e6 : Et(e6) ? I8(e6) : e6;
}
function H(e6, r6) {
  let t6 = r6 !== void 0 ? { ...r6, ...e6 } : e6;
  switch (mt.InstanceMode) {
    case "freeze":
      return Fm(t6);
    case "clone":
      return $t(t6);
    default:
      return t6;
  }
}
$i();
var Se = class extends Error {
  constructor(r6) {
    super(r6);
  }
};
$i();
$i();
$i();
var jt = Symbol.for("TypeBox.Transform");
var za = Symbol.for("TypeBox.Readonly");
var fn = Symbol.for("TypeBox.Optional");
var Eo = Symbol.for("TypeBox.Hint");
var j = Symbol.for("TypeBox.Kind");
function HE(e6) {
  return Et(e6) && e6[za] === "Readonly";
}
function Yi(e6) {
  return Et(e6) && e6[fn] === "Optional";
}
function Rb(e6) {
  return Ke(e6, "Any");
}
function Va(e6) {
  return Ke(e6, "Array");
}
function Mm(e6) {
  return Ke(e6, "AsyncIterator");
}
function Nb(e6) {
  return Ke(e6, "BigInt");
}
function $b(e6) {
  return Ke(e6, "Boolean");
}
function Am(e6) {
  return Ke(e6, "Constructor");
}
function E8(e6) {
  return Ke(e6, "Date");
}
function Om(e6) {
  return Ke(e6, "Function");
}
function Wu(e6) {
  return Ke(e6, "Integer");
}
function ur2(e6) {
  return Ke(e6, "Intersect");
}
function Bm(e6) {
  return Ke(e6, "Iterator");
}
function Ke(e6, r6) {
  return Et(e6) && j in e6 && e6[j] === r6;
}
function Ha(e6) {
  return Ke(e6, "Literal");
}
function Jn(e6) {
  return Ke(e6, "MappedKey");
}
function Ut(e6) {
  return Ke(e6, "MappedResult");
}
function Ws(e6) {
  return Ke(e6, "Never");
}
function C8(e6) {
  return Ke(e6, "Not");
}
function S8(e6) {
  return Ke(e6, "Null");
}
function Xu(e6) {
  return Ke(e6, "Number");
}
function vr(e6) {
  return Ke(e6, "Object");
}
function Ju2(e6) {
  return Ke(e6, "Promise");
}
function jb(e6) {
  return Ke(e6, "Record");
}
function Ub(e6) {
  return Ke(e6, "Ref");
}
function Gb(e6) {
  return Ke(e6, "RegExp");
}
function Pm(e6) {
  return Ke(e6, "String");
}
function D8(e6) {
  return Ke(e6, "Symbol");
}
function Yn(e6) {
  return Ke(e6, "TemplateLiteral");
}
function T8(e6) {
  return Ke(e6, "This");
}
function kc(e6) {
  return Et(e6) && jt in e6;
}
function ri(e6) {
  return Ke(e6, "Tuple");
}
function w8(e6) {
  return Ke(e6, "Undefined");
}
function st(e6) {
  return Ke(e6, "Union");
}
function F8(e6) {
  return Ke(e6, "Uint8Array");
}
function M8(e6) {
  return Ke(e6, "Unknown");
}
function A8(e6) {
  return Ke(e6, "Unsafe");
}
function O8(e6) {
  return Ke(e6, "Void");
}
function Xs(e6) {
  return Et(e6) && j in e6 && Bt(e6[j]);
}
function ni(e6) {
  return Rb(e6) || Va(e6) || $b(e6) || Nb(e6) || Mm(e6) || Am(e6) || E8(e6) || Om(e6) || Wu(e6) || ur2(e6) || Bm(e6) || Ha(e6) || Jn(e6) || Ut(e6) || Ws(e6) || C8(e6) || S8(e6) || Xu(e6) || vr(e6) || Ju2(e6) || jb(e6) || Ub(e6) || Gb(e6) || Pm(e6) || D8(e6) || Yn(e6) || T8(e6) || ri(e6) || w8(e6) || st(e6) || F8(e6) || M8(e6) || A8(e6) || O8(e6) || Xs(e6);
}
var M2 = {};
r(M2, { IsAny: () => JE, IsArray: () => YE, IsAsyncIterator: () => KE, IsBigInt: () => qE, IsBoolean: () => QE, IsConstructor: () => eC, IsDate: () => tC, IsFunction: () => rC, IsInteger: () => nC, IsIntersect: () => oC2, IsIterator: () => iC2, IsKind: () => MC, IsKindOf: () => We, IsLiteral: () => _m, IsLiteralBoolean: () => N8, IsLiteralNumber: () => sC2, IsLiteralString: () => aC, IsLiteralValue: () => uC, IsMappedKey: () => lC, IsMappedResult: () => cC, IsNever: () => pC, IsNot: () => dC, IsNull: () => mC2, IsNumber: () => fC, IsObject: () => hC, IsOptional: () => R8, IsPromise: () => gC, IsProperties: () => Zb, IsReadonly: () => L8, IsRecord: () => yC, IsRecursive: () => $8, IsRef: () => bC, IsRegExp: () => vC, IsSchema: () => Ze, IsString: () => xC, IsSymbol: () => IC, IsTemplateLiteral: () => EC, IsThis: () => CC, IsTransform: () => Pt2, IsTuple: () => SC, IsUint8Array: () => DC, IsUndefined: () => _c, IsUnion: () => Wb, IsUnionLiteral: () => j8, IsUnknown: () => TC, IsUnsafe: () => wC, IsVoid: () => FC, TypeGuardUnknownTypeError: () => zb });
$i();
var zb = class extends Se {
};
var P8 = ["Any", "Array", "AsyncIterator", "BigInt", "Boolean", "Constructor", "Date", "Enum", "Function", "Integer", "Intersect", "Iterator", "Literal", "MappedKey", "MappedResult", "Not", "Null", "Number", "Object", "Promise", "Record", "Ref", "RegExp", "String", "Symbol", "TemplateLiteral", "This", "Tuple", "Undefined", "Union", "Uint8Array", "Unknown", "Void"];
function ZE(e6) {
  try {
    return new RegExp(e6), true;
  } catch {
    return false;
  }
}
function Vb(e6) {
  if (!Bt(e6)) return false;
  for (let r6 = 0; r6 < e6.length; r6++) {
    let t6 = e6.charCodeAt(r6);
    if (t6 >= 7 && t6 <= 13 || t6 === 27 || t6 === 127) return false;
  }
  return true;
}
function WE(e6) {
  return Hb(e6) || Ze(e6);
}
function km(e6) {
  return Zt(e6) || Dm(e6);
}
function Ft(e6) {
  return Zt(e6) || ti(e6);
}
function Hb(e6) {
  return Zt(e6) || Hs(e6);
}
function ht(e6) {
  return Zt(e6) || Bt(e6);
}
function k8(e6) {
  return Zt(e6) || Bt(e6) && Vb(e6) && ZE(e6);
}
function _8(e6) {
  return Zt(e6) || Bt(e6) && Vb(e6);
}
function XE(e6) {
  return Zt(e6) || Ze(e6);
}
function L8(e6) {
  return Et(e6) && e6[za] === "Readonly";
}
function R8(e6) {
  return Et(e6) && e6[fn] === "Optional";
}
function JE(e6) {
  return We(e6, "Any") && ht(e6.$id);
}
function YE(e6) {
  return We(e6, "Array") && e6.type === "array" && ht(e6.$id) && Ze(e6.items) && Ft(e6.minItems) && Ft(e6.maxItems) && Hb(e6.uniqueItems) && XE(e6.contains) && Ft(e6.minContains) && Ft(e6.maxContains);
}
function KE(e6) {
  return We(e6, "AsyncIterator") && e6.type === "AsyncIterator" && ht(e6.$id) && Ze(e6.items);
}
function qE(e6) {
  return We(e6, "BigInt") && e6.type === "bigint" && ht(e6.$id) && km(e6.exclusiveMaximum) && km(e6.exclusiveMinimum) && km(e6.maximum) && km(e6.minimum) && km(e6.multipleOf);
}
function QE(e6) {
  return We(e6, "Boolean") && e6.type === "boolean" && ht(e6.$id);
}
function eC(e6) {
  return We(e6, "Constructor") && e6.type === "Constructor" && ht(e6.$id) && rn(e6.parameters) && e6.parameters.every((r6) => Ze(r6)) && Ze(e6.returns);
}
function tC(e6) {
  return We(e6, "Date") && e6.type === "Date" && ht(e6.$id) && Ft(e6.exclusiveMaximumTimestamp) && Ft(e6.exclusiveMinimumTimestamp) && Ft(e6.maximumTimestamp) && Ft(e6.minimumTimestamp) && Ft(e6.multipleOfTimestamp);
}
function rC(e6) {
  return We(e6, "Function") && e6.type === "Function" && ht(e6.$id) && rn(e6.parameters) && e6.parameters.every((r6) => Ze(r6)) && Ze(e6.returns);
}
function nC(e6) {
  return We(e6, "Integer") && e6.type === "integer" && ht(e6.$id) && Ft(e6.exclusiveMaximum) && Ft(e6.exclusiveMinimum) && Ft(e6.maximum) && Ft(e6.minimum) && Ft(e6.multipleOf);
}
function Zb(e6) {
  return Et(e6) && Object.entries(e6).every(([r6, t6]) => Vb(r6) && Ze(t6));
}
function oC2(e6) {
  return We(e6, "Intersect") && !(Bt(e6.type) && e6.type !== "object") && rn(e6.allOf) && e6.allOf.every((r6) => Ze(r6) && !Pt2(r6)) && ht(e6.type) && (Hb(e6.unevaluatedProperties) || XE(e6.unevaluatedProperties)) && ht(e6.$id);
}
function iC2(e6) {
  return We(e6, "Iterator") && e6.type === "Iterator" && ht(e6.$id) && Ze(e6.items);
}
function We(e6, r6) {
  return Et(e6) && j in e6 && e6[j] === r6;
}
function aC(e6) {
  return _m(e6) && Bt(e6.const);
}
function sC2(e6) {
  return _m(e6) && ti(e6.const);
}
function N8(e6) {
  return _m(e6) && Hs(e6.const);
}
function _m(e6) {
  return We(e6, "Literal") && ht(e6.$id) && uC(e6.const);
}
function uC(e6) {
  return Hs(e6) || ti(e6) || Bt(e6);
}
function lC(e6) {
  return We(e6, "MappedKey") && rn(e6.keys) && e6.keys.every((r6) => ti(r6) || Bt(r6));
}
function cC(e6) {
  return We(e6, "MappedResult") && Zb(e6.properties);
}
function pC(e6) {
  return We(e6, "Never") && Et(e6.not) && Object.getOwnPropertyNames(e6.not).length === 0;
}
function dC(e6) {
  return We(e6, "Not") && Ze(e6.not);
}
function mC2(e6) {
  return We(e6, "Null") && e6.type === "null" && ht(e6.$id);
}
function fC(e6) {
  return We(e6, "Number") && e6.type === "number" && ht(e6.$id) && Ft(e6.exclusiveMaximum) && Ft(e6.exclusiveMinimum) && Ft(e6.maximum) && Ft(e6.minimum) && Ft(e6.multipleOf);
}
function hC(e6) {
  return We(e6, "Object") && e6.type === "object" && ht(e6.$id) && Zb(e6.properties) && WE(e6.additionalProperties) && Ft(e6.minProperties) && Ft(e6.maxProperties);
}
function gC(e6) {
  return We(e6, "Promise") && e6.type === "Promise" && ht(e6.$id) && Ze(e6.item);
}
function yC(e6) {
  return We(e6, "Record") && e6.type === "object" && ht(e6.$id) && WE(e6.additionalProperties) && Et(e6.patternProperties) && ((r6) => {
    let t6 = Object.getOwnPropertyNames(r6.patternProperties);
    return t6.length === 1 && ZE(t6[0]) && Et(r6.patternProperties) && Ze(r6.patternProperties[t6[0]]);
  })(e6);
}
function $8(e6) {
  return Et(e6) && Eo in e6 && e6[Eo] === "Recursive";
}
function bC(e6) {
  return We(e6, "Ref") && ht(e6.$id) && Bt(e6.$ref);
}
function vC(e6) {
  return We(e6, "RegExp") && ht(e6.$id) && Bt(e6.source) && Bt(e6.flags) && Ft(e6.maxLength) && Ft(e6.minLength);
}
function xC(e6) {
  return We(e6, "String") && e6.type === "string" && ht(e6.$id) && Ft(e6.minLength) && Ft(e6.maxLength) && k8(e6.pattern) && _8(e6.format);
}
function IC(e6) {
  return We(e6, "Symbol") && e6.type === "symbol" && ht(e6.$id);
}
function EC(e6) {
  return We(e6, "TemplateLiteral") && e6.type === "string" && Bt(e6.pattern) && e6.pattern[0] === "^" && e6.pattern[e6.pattern.length - 1] === "$";
}
function CC(e6) {
  return We(e6, "This") && ht(e6.$id) && Bt(e6.$ref);
}
function Pt2(e6) {
  return Et(e6) && jt in e6;
}
function SC(e6) {
  return We(e6, "Tuple") && e6.type === "array" && ht(e6.$id) && ti(e6.minItems) && ti(e6.maxItems) && e6.minItems === e6.maxItems && (Zt(e6.items) && Zt(e6.additionalItems) && e6.minItems === 0 || rn(e6.items) && e6.items.every((r6) => Ze(r6)));
}
function _c(e6) {
  return We(e6, "Undefined") && e6.type === "undefined" && ht(e6.$id);
}
function j8(e6) {
  return Wb(e6) && e6.anyOf.every((r6) => aC(r6) || sC2(r6));
}
function Wb(e6) {
  return We(e6, "Union") && ht(e6.$id) && Et(e6) && rn(e6.anyOf) && e6.anyOf.every((r6) => Ze(r6));
}
function DC(e6) {
  return We(e6, "Uint8Array") && e6.type === "Uint8Array" && ht(e6.$id) && Ft(e6.minByteLength) && Ft(e6.maxByteLength);
}
function TC(e6) {
  return We(e6, "Unknown") && ht(e6.$id);
}
function wC(e6) {
  return We(e6, "Unsafe");
}
function FC(e6) {
  return We(e6, "Void") && e6.type === "void" && ht(e6.$id);
}
function MC(e6) {
  return Et(e6) && j in e6 && Bt(e6[j]) && !P8.includes(e6[j]);
}
function Ze(e6) {
  return Et(e6) && (JE(e6) || YE(e6) || QE(e6) || qE(e6) || KE(e6) || eC(e6) || tC(e6) || rC(e6) || nC(e6) || oC2(e6) || iC2(e6) || _m(e6) || lC(e6) || cC(e6) || pC(e6) || dC(e6) || mC2(e6) || fC(e6) || hC(e6) || gC(e6) || yC(e6) || bC(e6) || vC(e6) || xC(e6) || IC(e6) || EC(e6) || CC(e6) || SC(e6) || _c(e6) || Wb(e6) || DC(e6) || TC(e6) || wC(e6) || FC(e6) || MC(e6));
}
$i();
var Xb = "(true|false)";
var Lm = "(0|[1-9][0-9]*)";
var Jb = "(.*)";
var U8 = "(?!.*)";
var hX = `^${Xb}$`;
var Za = `^${Lm}$`;
var Wa = `^${Jb}$`;
var AC = `^${U8}$`;
$i();
var Bn = {};
r(Bn, { Clear: () => z8, Delete: () => V8, Entries: () => G8, Get: () => W8, Has: () => H8, Set: () => Z8 });
$i();
var Lc = /* @__PURE__ */ new Map();
function G8() {
  return new Map(Lc);
}
function z8() {
  return Lc.clear();
}
function V8(e6) {
  return Lc.delete(e6);
}
function H8(e6) {
  return Lc.has(e6);
}
function Z8(e6, r6) {
  Lc.set(e6, r6);
}
function W8(e6) {
  return Lc.get(e6);
}
var Ar = {};
r(Ar, { Clear: () => J8, Delete: () => Y8, Entries: () => X8, Get: () => Q8, Has: () => K8, Set: () => q8 });
$i();
var Rc = /* @__PURE__ */ new Map();
function X8() {
  return new Map(Rc);
}
function J8() {
  return Rc.clear();
}
function Y8(e6) {
  return Rc.delete(e6);
}
function K8(e6) {
  return Rc.has(e6);
}
function q8(e6, r6) {
  Rc.set(e6, r6);
}
function Q8(e6) {
  return Rc.get(e6);
}
$i();
function OC(e6, r6) {
  return e6.includes(r6);
}
function BC(e6) {
  return [...new Set(e6)];
}
function e9(e6, r6) {
  return e6.filter((t6) => r6.includes(t6));
}
function t9(e6, r6) {
  return e6.reduce((t6, n) => e9(t6, n), r6);
}
function PC(e6) {
  return e6.length === 1 ? e6[0] : e6.length > 1 ? t9(e6.slice(1), e6[0]) : [];
}
function kC(e6) {
  let r6 = [];
  for (let t6 of e6) r6.push(...t6);
  return r6;
}
$i();
function Js(e6) {
  return H({ [j]: "Any" }, e6);
}
$i();
function Kh(e6, r6) {
  return H({ [j]: "Array", type: "array", items: e6 }, r6);
}
$i();
function qh(e6, r6) {
  return H({ [j]: "AsyncIterator", type: "AsyncIterator", items: e6 }, r6);
}
$i();
$i();
$i();
function r9(e6, r6) {
  let { [r6]: t6, ...n } = e6;
  return n;
}
function er(e6, r6) {
  return r6.reduce((t6, n) => r9(t6, n), e6);
}
$i();
function gt(e6) {
  return H({ [j]: "Never", not: {} }, e6);
}
$i();
$i();
function qe(e6) {
  return H({ [j]: "MappedResult", properties: e6 });
}
$i();
$i();
function Qh(e6, r6, t6) {
  return H({ [j]: "Constructor", type: "Constructor", parameters: e6, returns: r6 }, t6);
}
$i();
function Ys(e6, r6, t6) {
  return H({ [j]: "Function", type: "Function", parameters: e6, returns: r6 }, t6);
}
$i();
$i();
$i();
$i();
function Rm2(e6, r6) {
  return H({ [j]: "Union", anyOf: e6 }, r6);
}
function n9(e6) {
  return e6.some((r6) => Yi(r6));
}
function _C(e6) {
  return e6.map((r6) => Yi(r6) ? o9(r6) : r6);
}
function o9(e6) {
  return er(e6, [fn]);
}
function i9(e6, r6) {
  return n9(e6) ? Pn(Rm2(_C(e6), r6)) : Rm2(_C(e6), r6);
}
function Ki(e6, r6) {
  return e6.length === 0 ? gt(r6) : e6.length === 1 ? H(e6[0], r6) : i9(e6, r6);
}
$i();
function yt(e6, r6) {
  return e6.length === 0 ? gt(r6) : e6.length === 1 ? H(e6[0], r6) : Rm2(e6, r6);
}
$i();
$i();
$i();
var eg = class extends Se {
};
function a9(e6) {
  return e6.replace(/\\\$/g, "$").replace(/\\\*/g, "*").replace(/\\\^/g, "^").replace(/\\\|/g, "|").replace(/\\\(/g, "(").replace(/\\\)/g, ")");
}
function Yb(e6, r6, t6) {
  return e6[r6] === t6 && e6.charCodeAt(r6 - 1) !== 92;
}
function Xa2(e6, r6) {
  return Yb(e6, r6, "(");
}
function Nm(e6, r6) {
  return Yb(e6, r6, ")");
}
function LC(e6, r6) {
  return Yb(e6, r6, "|");
}
function s9(e6) {
  if (!(Xa2(e6, 0) && Nm(e6, e6.length - 1))) return false;
  let r6 = 0;
  for (let t6 = 0; t6 < e6.length; t6++) if (Xa2(e6, t6) && (r6 += 1), Nm(e6, t6) && (r6 -= 1), r6 === 0 && t6 !== e6.length - 1) return false;
  return true;
}
function u9(e6) {
  return e6.slice(1, e6.length - 1);
}
function l9(e6) {
  let r6 = 0;
  for (let t6 = 0; t6 < e6.length; t6++) if (Xa2(e6, t6) && (r6 += 1), Nm(e6, t6) && (r6 -= 1), LC(e6, t6) && r6 === 0) return true;
  return false;
}
function c9(e6) {
  for (let r6 = 0; r6 < e6.length; r6++) if (Xa2(e6, r6)) return true;
  return false;
}
function p9(e6) {
  let [r6, t6] = [0, 0], n = [];
  for (let i = 0; i < e6.length; i++) if (Xa2(e6, i) && (r6 += 1), Nm(e6, i) && (r6 -= 1), LC(e6, i) && r6 === 0) {
    let s6 = e6.slice(t6, i);
    s6.length > 0 && n.push(Nc(s6)), t6 = i + 1;
  }
  let o = e6.slice(t6);
  return o.length > 0 && n.push(Nc(o)), n.length === 0 ? { type: "const", const: "" } : n.length === 1 ? n[0] : { type: "or", expr: n };
}
function d9(e6) {
  function r6(o, i) {
    if (!Xa2(o, i)) throw new eg("TemplateLiteralParser: Index must point to open parens");
    let s6 = 0;
    for (let u6 = i; u6 < o.length; u6++) if (Xa2(o, u6) && (s6 += 1), Nm(o, u6) && (s6 -= 1), s6 === 0) return [i, u6];
    throw new eg("TemplateLiteralParser: Unclosed group parens in expression");
  }
  function t6(o, i) {
    for (let s6 = i; s6 < o.length; s6++) if (Xa2(o, s6)) return [i, s6];
    return [i, o.length];
  }
  let n = [];
  for (let o = 0; o < e6.length; o++) if (Xa2(e6, o)) {
    let [i, s6] = r6(e6, o), u6 = e6.slice(i, s6 + 1);
    n.push(Nc(u6)), o = s6;
  } else {
    let [i, s6] = t6(e6, o), u6 = e6.slice(i, s6);
    u6.length > 0 && n.push(Nc(u6)), o = s6 - 1;
  }
  return n.length === 0 ? { type: "const", const: "" } : n.length === 1 ? n[0] : { type: "and", expr: n };
}
function Nc(e6) {
  return s9(e6) ? Nc(u9(e6)) : l9(e6) ? p9(e6) : c9(e6) ? d9(e6) : { type: "const", const: a9(e6) };
}
function $c(e6) {
  return Nc(e6.slice(1, e6.length - 1));
}
var Kb = class extends Se {
};
function m9(e6) {
  return e6.type === "or" && e6.expr.length === 2 && e6.expr[0].type === "const" && e6.expr[0].const === "0" && e6.expr[1].type === "const" && e6.expr[1].const === "[1-9][0-9]*";
}
function f9(e6) {
  return e6.type === "or" && e6.expr.length === 2 && e6.expr[0].type === "const" && e6.expr[0].const === "true" && e6.expr[1].type === "const" && e6.expr[1].const === "false";
}
function h9(e6) {
  return e6.type === "const" && e6.const === ".*";
}
function Yu(e6) {
  return m9(e6) || h9(e6) ? false : f9(e6) ? true : e6.type === "and" ? e6.expr.every((r6) => Yu(r6)) : e6.type === "or" ? e6.expr.every((r6) => Yu(r6)) : e6.type === "const" ? true : (() => {
    throw new Kb("Unknown expression type");
  })();
}
function tg(e6) {
  let r6 = $c(e6.pattern);
  return Yu(r6);
}
$i();
var qb = class extends Se {
};
function* RC(e6) {
  if (e6.length === 1) return yield* e6[0];
  for (let r6 of e6[0]) for (let t6 of RC(e6.slice(1))) yield `${r6}${t6}`;
}
function* g9(e6) {
  return yield* RC(e6.expr.map((r6) => [...$m(r6)]));
}
function* y9(e6) {
  for (let r6 of e6.expr) yield* $m(r6);
}
function* b9(e6) {
  return yield e6.const;
}
function* $m(e6) {
  return e6.type === "and" ? yield* g9(e6) : e6.type === "or" ? yield* y9(e6) : e6.type === "const" ? yield* b9(e6) : (() => {
    throw new qb("Unknown expression");
  })();
}
function jc(e6) {
  let r6 = $c(e6.pattern);
  return Yu(r6) ? [...$m(r6)] : [];
}
$i();
$i();
function lt(e6, r6) {
  return H({ [j]: "Literal", const: e6, type: typeof e6 }, r6);
}
$i();
function rg(e6) {
  return H({ [j]: "Boolean", type: "boolean" }, e6);
}
$i();
function Uc(e6) {
  return H({ [j]: "BigInt", type: "bigint" }, e6);
}
$i();
function qi(e6) {
  return H({ [j]: "Number", type: "number" }, e6);
}
$i();
function Co2(e6) {
  return H({ [j]: "String", type: "string" }, e6);
}
function* v9(e6) {
  let r6 = e6.trim().replace(/"|'/g, "");
  return r6 === "boolean" ? yield rg() : r6 === "number" ? yield qi() : r6 === "bigint" ? yield Uc() : r6 === "string" ? yield Co2() : yield (() => {
    let t6 = r6.split("|").map((n) => lt(n.trim()));
    return t6.length === 0 ? gt() : t6.length === 1 ? t6[0] : Ki(t6);
  })();
}
function* x9(e6) {
  if (e6[1] !== "{") {
    let r6 = lt("$"), t6 = Qb(e6.slice(1));
    return yield* [r6, ...t6];
  }
  for (let r6 = 2; r6 < e6.length; r6++) if (e6[r6] === "}") {
    let t6 = v9(e6.slice(2, r6)), n = Qb(e6.slice(r6 + 1));
    return yield* [...t6, ...n];
  }
  yield lt(e6);
}
function* Qb(e6) {
  for (let r6 = 0; r6 < e6.length; r6++) if (e6[r6] === "$") {
    let t6 = lt(e6.slice(0, r6)), n = x9(e6.slice(r6));
    return yield* [t6, ...n];
  }
  yield lt(e6);
}
function NC(e6) {
  return [...Qb(e6)];
}
$i();
var ev = class extends Se {
};
function I9(e6) {
  return e6.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function $C(e6, r6) {
  return Yn(e6) ? e6.pattern.slice(1, e6.pattern.length - 1) : st(e6) ? `(${e6.anyOf.map((t6) => $C(t6, r6)).join("|")})` : Xu(e6) ? `${r6}${Lm}` : Wu(e6) ? `${r6}${Lm}` : Nb(e6) ? `${r6}${Lm}` : Pm(e6) ? `${r6}${Jb}` : Ha(e6) ? `${r6}${I9(e6.const.toString())}` : $b(e6) ? `${r6}${Xb}` : (() => {
    throw new ev(`Unexpected Kind '${e6[j]}'`);
  })();
}
function tv(e6) {
  return `^${e6.map((r6) => $C(r6, "")).join("")}$`;
}
$i();
function Ku(e6) {
  let t6 = jc(e6).map((n) => lt(n));
  return Ki(t6);
}
$i();
function ng(e6, r6) {
  let t6 = Bt(e6) ? tv(NC(e6)) : tv(e6);
  return H({ [j]: "TemplateLiteral", type: "string", pattern: t6 }, r6);
}
function E9(e6) {
  return jc(e6).map((t6) => t6.toString());
}
function C9(e6) {
  let r6 = [];
  for (let t6 of e6) r6.push(...kn(t6));
  return r6;
}
function S9(e6) {
  return [e6.toString()];
}
function kn(e6) {
  return [...new Set(Yn(e6) ? E9(e6) : st(e6) ? C9(e6.anyOf) : Ha(e6) ? S9(e6.const) : Xu(e6) ? ["[number]"] : Wu(e6) ? ["[number]"] : [])];
}
$i();
function D9(e6, r6, t6) {
  let n = {};
  for (let o of Object.getOwnPropertyNames(r6)) n[o] = Gc(e6, kn(r6[o]), t6);
  return n;
}
function T9(e6, r6, t6) {
  return D9(e6, r6.properties, t6);
}
function jC2(e6, r6, t6) {
  let n = T9(e6, r6, t6);
  return qe(n);
}
function GC(e6, r6) {
  return e6.map((t6) => zC(t6, r6));
}
function w9(e6) {
  return e6.filter((r6) => !Ws(r6));
}
function F9(e6, r6) {
  return og(w9(GC(e6, r6)));
}
function M9(e6) {
  return e6.some((r6) => Ws(r6)) ? [] : e6;
}
function A9(e6, r6) {
  return Ki(M9(GC(e6, r6)));
}
function O9(e6, r6) {
  return r6 in e6 ? e6[r6] : r6 === "[number]" ? Ki(e6) : gt();
}
function B9(e6, r6) {
  return r6 === "[number]" ? e6 : gt();
}
function P9(e6, r6) {
  return r6 in e6 ? e6[r6] : gt();
}
function zC(e6, r6) {
  return ur2(e6) ? F9(e6.allOf, r6) : st(e6) ? A9(e6.anyOf, r6) : ri(e6) ? O9(e6.items ?? [], r6) : Va(e6) ? B9(e6.items, r6) : vr(e6) ? P9(e6.properties, r6) : gt();
}
function jm(e6, r6) {
  return r6.map((t6) => zC(e6, t6));
}
function UC(e6, r6) {
  return Ki(jm(e6, r6));
}
function Gc(e6, r6, t6) {
  return Ut(r6) ? jC2(e6, r6, t6) : Jn(r6) ? VC(e6, r6, t6) : H(ni(r6) ? UC(e6, kn(r6)) : UC(e6, r6), t6);
}
function k9(e6, r6, t6) {
  return { [r6]: Gc(e6, [r6], $t(t6)) };
}
function _9(e6, r6, t6) {
  return r6.reduce((n, o) => ({ ...n, ...k9(e6, o, t6) }), {});
}
function L9(e6, r6, t6) {
  return _9(e6, r6.keys, t6);
}
function VC(e6, r6, t6) {
  let n = L9(e6, r6, t6);
  return qe(n);
}
$i();
function ig(e6, r6) {
  return H({ [j]: "Iterator", type: "Iterator", items: e6 }, r6);
}
$i();
function R9(e6) {
  let r6 = [];
  for (let t6 in e6) Yi(e6[t6]) || r6.push(t6);
  return r6;
}
function N9(e6, r6) {
  let t6 = R9(e6), n = t6.length > 0 ? { [j]: "Object", type: "object", properties: e6, required: t6 } : { [j]: "Object", type: "object", properties: e6 };
  return H(n, r6);
}
var Ct = N9;
$i();
function ag(e6, r6) {
  return H({ [j]: "Promise", type: "Promise", item: e6 }, r6);
}
$i();
$i();
function $9(e6) {
  return H(er(e6, [za]));
}
function j9(e6) {
  return H({ ...e6, [za]: "Readonly" });
}
function U9(e6, r6) {
  return r6 === false ? $9(e6) : j9(e6);
}
function So(e6, r6) {
  let t6 = r6 ?? true;
  return Ut(e6) ? HC(e6, t6) : U9(e6, t6);
}
function G9(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = So(e6[n], r6);
  return t6;
}
function z9(e6, r6) {
  return G9(e6.properties, r6);
}
function HC(e6, r6) {
  let t6 = z9(e6, r6);
  return qe(t6);
}
$i();
function Qi(e6, r6) {
  return H(e6.length > 0 ? { [j]: "Tuple", type: "array", items: e6, additionalItems: false, minItems: e6.length, maxItems: e6.length } : { [j]: "Tuple", type: "array", minItems: e6.length, maxItems: e6.length }, r6);
}
function ZC(e6, r6) {
  return e6 in r6 ? Do(e6, r6[e6]) : qe(r6);
}
function V9(e6) {
  return { [e6]: lt(e6) };
}
function H9(e6) {
  let r6 = {};
  for (let t6 of e6) r6[t6] = lt(t6);
  return r6;
}
function Z9(e6, r6) {
  return OC(r6, e6) ? V9(e6) : H9(r6);
}
function W9(e6, r6) {
  let t6 = Z9(e6, r6);
  return ZC(e6, t6);
}
function Um(e6, r6) {
  return r6.map((t6) => Do(e6, t6));
}
function X9(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(r6)) t6[n] = Do(e6, r6[n]);
  return t6;
}
function Do(e6, r6) {
  let t6 = { ...r6 };
  return Yi(r6) ? Pn(Do(e6, er(r6, [fn]))) : HE(r6) ? So(Do(e6, er(r6, [za]))) : Ut(r6) ? ZC(e6, r6.properties) : Jn(r6) ? W9(e6, r6.keys) : Am(r6) ? Qh(Um(e6, r6.parameters), Do(e6, r6.returns), t6) : Om(r6) ? Ys(Um(e6, r6.parameters), Do(e6, r6.returns), t6) : Mm(r6) ? qh(Do(e6, r6.items), t6) : Bm(r6) ? ig(Do(e6, r6.items), t6) : ur2(r6) ? _n(Um(e6, r6.allOf), t6) : st(r6) ? yt(Um(e6, r6.anyOf), t6) : ri(r6) ? Qi(Um(e6, r6.items ?? []), t6) : vr(r6) ? Ct(X9(e6, r6.properties), t6) : Va(r6) ? Kh(Do(e6, r6.items), t6) : Ju2(r6) ? ag(Do(e6, r6.item), t6) : r6;
}
function J9(e6, r6) {
  let t6 = {};
  for (let n of e6) t6[n] = Do(n, r6);
  return t6;
}
function WC2(e6, r6, t6) {
  let n = ni(e6) ? kn(e6) : e6, o = r6({ [j]: "MappedKey", keys: n }), i = J9(n, o);
  return Ct(i, t6);
}
$i();
function Y9(e6) {
  return H(er(e6, [fn]));
}
function K9(e6) {
  return H({ ...e6, [fn]: "Optional" });
}
function q9(e6, r6) {
  return r6 === false ? Y9(e6) : K9(e6);
}
function Pn(e6, r6) {
  let t6 = r6 ?? true;
  return Ut(e6) ? XC(e6, t6) : q9(e6, t6);
}
function Q9(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = Pn(e6[n], r6);
  return t6;
}
function eB(e6, r6) {
  return Q9(e6.properties, r6);
}
function XC(e6, r6) {
  let t6 = eB(e6, r6);
  return qe(t6);
}
$i();
function Gm(e6, r6 = {}) {
  let t6 = e6.every((o) => vr(o)), n = ni(r6.unevaluatedProperties) ? { unevaluatedProperties: r6.unevaluatedProperties } : {};
  return H(r6.unevaluatedProperties === false || ni(r6.unevaluatedProperties) || t6 ? { ...n, [j]: "Intersect", type: "object", allOf: e6 } : { ...n, [j]: "Intersect", allOf: e6 }, r6);
}
function tB(e6) {
  return e6.every((r6) => Yi(r6));
}
function rB(e6) {
  return er(e6, [fn]);
}
function JC2(e6) {
  return e6.map((r6) => Yi(r6) ? rB(r6) : r6);
}
function nB(e6, r6) {
  return tB(e6) ? Pn(Gm(JC2(e6), r6)) : Gm(JC2(e6), r6);
}
function og(e6, r6 = {}) {
  if (e6.length === 0) return gt(r6);
  if (e6.length === 1) return H(e6[0], r6);
  if (e6.some((t6) => kc(t6))) throw new Error("Cannot intersect transform types");
  return nB(e6, r6);
}
$i();
function _n(e6, r6) {
  if (e6.length === 0) return gt(r6);
  if (e6.length === 1) return H(e6[0], r6);
  if (e6.some((t6) => kc(t6))) throw new Error("Cannot intersect transform types");
  return Gm(e6, r6);
}
function YC(e6) {
  return e6.map((r6) => rv(r6));
}
function oB(e6) {
  return _n(YC(e6));
}
function iB(e6) {
  return yt(YC(e6));
}
function aB(e6) {
  return rv(e6);
}
function rv(e6) {
  return ur2(e6) ? oB(e6.allOf) : st(e6) ? iB(e6.anyOf) : Ju2(e6) ? aB(e6.item) : e6;
}
function KC(e6, r6) {
  return H(rv(e6), r6);
}
$i();
$i();
$i();
$i();
function qC2(e6) {
  let r6 = [];
  for (let t6 of e6) r6.push(Or(t6));
  return r6;
}
function sB(e6) {
  let r6 = qC2(e6);
  return kC(r6);
}
function uB(e6) {
  let r6 = qC2(e6);
  return PC(r6);
}
function lB(e6) {
  return e6.map((r6, t6) => t6.toString());
}
function cB(e6) {
  return ["[number]"];
}
function pB(e6) {
  return globalThis.Object.getOwnPropertyNames(e6);
}
function dB(e6) {
  return nv ? globalThis.Object.getOwnPropertyNames(e6).map((t6) => t6[0] === "^" && t6[t6.length - 1] === "$" ? t6.slice(1, t6.length - 1) : t6) : [];
}
function Or(e6) {
  return ur2(e6) ? sB(e6.allOf) : st(e6) ? uB(e6.anyOf) : ri(e6) ? lB(e6.items ?? []) : Va(e6) ? cB(e6.items) : vr(e6) ? pB(e6.properties) : jb(e6) ? dB(e6.patternProperties) : [];
}
var nv = false;
function Ja(e6) {
  nv = true;
  let r6 = Or(e6);
  return nv = false, `^(${r6.map((n) => `(${n})`).join("|")})$`;
}
function mB(e6) {
  return e6.map((r6) => r6 === "[number]" ? qi() : lt(r6));
}
function sg(e6, r6) {
  if (Ut(e6)) return QC(e6, r6);
  {
    let t6 = Or(e6), n = mB(t6), o = Ki(n);
    return H(o, r6);
  }
}
function fB(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = sg(e6[n], $t(r6));
  return t6;
}
function hB(e6, r6) {
  return fB(e6.properties, r6);
}
function QC(e6, r6) {
  let t6 = hB(e6, r6);
  return qe(t6);
}
$i();
function Ks(e6) {
  let r6 = Or(e6), t6 = jm(e6, r6);
  return r6.map((n, o) => [r6[o], t6[o]]);
}
function gB(e6) {
  let r6 = [];
  for (let t6 of e6) r6.push(...Or(t6));
  return BC(r6);
}
function yB(e6) {
  return e6.filter((r6) => !Ws(r6));
}
function bB(e6, r6) {
  let t6 = [];
  for (let n of e6) t6.push(...jm(n, [r6]));
  return yB(t6);
}
function vB(e6, r6) {
  let t6 = {};
  for (let n of r6) t6[n] = og(bB(e6, n));
  return t6;
}
function eS(e6, r6) {
  let t6 = gB(e6), n = vB(e6, t6);
  return Ct(n, r6);
}
$i();
$i();
function ug(e6) {
  return H({ [j]: "Date", type: "Date" }, e6);
}
$i();
function lg(e6) {
  return H({ [j]: "Null", type: "null" }, e6);
}
$i();
function cg(e6) {
  return H({ [j]: "Symbol", type: "symbol" }, e6);
}
$i();
function pg(e6) {
  return H({ [j]: "Undefined", type: "undefined" }, e6);
}
$i();
function dg(e6) {
  return H({ [j]: "Uint8Array", type: "Uint8Array" }, e6);
}
$i();
function Ya(e6) {
  return H({ [j]: "Unknown" }, e6);
}
function xB(e6) {
  return e6.map((r6) => ov(r6, false));
}
function IB(e6) {
  let r6 = {};
  for (let t6 of globalThis.Object.getOwnPropertyNames(e6)) r6[t6] = So(ov(e6[t6], false));
  return r6;
}
function mg(e6, r6) {
  return r6 === true ? e6 : So(e6);
}
function ov(e6, r6) {
  return Ob(e6) ? mg(Js(), r6) : Pb(e6) ? mg(Js(), r6) : rn(e6) ? So(Qi(xB(e6))) : ja(e6) ? dg() : Zu2(e6) ? ug() : Et(e6) ? mg(Ct(IB(e6)), r6) : Bb(e6) ? mg(Ys([], Ya()), r6) : Zt(e6) ? pg() : kb(e6) ? lg() : _b(e6) ? cg() : Dm(e6) ? Uc() : ti(e6) ? lt(e6) : Hs(e6) ? lt(e6) : Bt(e6) ? lt(e6) : Ct({});
}
function tS(e6, r6) {
  return H(ov(e6, true), r6);
}
$i();
function rS(e6, r6) {
  return Qi(e6.parameters, r6);
}
$i();
function zm(e6, r6) {
  return e6.map((t6) => oi(t6, r6));
}
function EB(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = oi(e6[n], r6);
  return t6;
}
function CB(e6, r6) {
  return e6.parameters = zm(e6.parameters, r6), e6.returns = oi(e6.returns, r6), e6;
}
function SB(e6, r6) {
  return e6.parameters = zm(e6.parameters, r6), e6.returns = oi(e6.returns, r6), e6;
}
function DB(e6, r6) {
  return e6.allOf = zm(e6.allOf, r6), e6;
}
function TB(e6, r6) {
  return e6.anyOf = zm(e6.anyOf, r6), e6;
}
function wB(e6, r6) {
  return Zt(e6.items) || (e6.items = zm(e6.items, r6)), e6;
}
function FB(e6, r6) {
  return e6.items = oi(e6.items, r6), e6;
}
function MB(e6, r6) {
  return e6.properties = EB(e6.properties, r6), e6;
}
function AB(e6, r6) {
  return e6.item = oi(e6.item, r6), e6;
}
function OB(e6, r6) {
  return e6.items = oi(e6.items, r6), e6;
}
function BB(e6, r6) {
  return e6.items = oi(e6.items, r6), e6;
}
function PB(e6, r6) {
  let t6 = r6.find((o) => o.$id === e6.$ref);
  if (t6 === void 0) throw Error(`Unable to dereference schema with $id ${e6.$ref}`);
  let n = er(t6, ["$id"]);
  return oi(n, r6);
}
function kB(e6, r6) {
  return Am(e6) ? CB(e6, r6) : Om(e6) ? SB(e6, r6) : ur2(e6) ? DB(e6, r6) : st(e6) ? TB(e6, r6) : ri(e6) ? wB(e6, r6) : Va(e6) ? FB(e6, r6) : vr(e6) ? MB(e6, r6) : Ju2(e6) ? AB(e6, r6) : Mm(e6) ? OB(e6, r6) : Bm(e6) ? BB(e6, r6) : Ub(e6) ? PB(e6, r6) : e6;
}
function oi(e6, r6) {
  return kB(wm(e6), GE(r6));
}
$i();
function nS(e6, r6) {
  if (Zt(e6)) throw new Error("Enum undefined or empty");
  let t6 = globalThis.Object.getOwnPropertyNames(e6).filter((i) => isNaN(i)).map((i) => e6[i]), o = [...new Set(t6)].map((i) => lt(i));
  return yt(o, { ...r6, [Eo]: "Enum" });
}
$i();
$i();
$i();
var av = class extends Se {
};
var G;
(function(e6) {
  e6[e6.Union = 0] = "Union", e6[e6.True = 1] = "True", e6[e6.False = 2] = "False";
})(G || (G = {}));
function To(e6) {
  return e6 === G.False ? e6 : G.True;
}
function zc(e6) {
  throw new av(e6);
}
function fr(e6) {
  return M2.IsNever(e6) || M2.IsIntersect(e6) || M2.IsUnion(e6) || M2.IsUnknown(e6) || M2.IsAny(e6);
}
function hr(e6, r6) {
  return M2.IsNever(r6) ? cS(e6, r6) : M2.IsIntersect(r6) ? fg(e6, r6) : M2.IsUnion(r6) ? cv(e6, r6) : M2.IsUnknown(r6) ? fS(e6, r6) : M2.IsAny(r6) ? lv(e6, r6) : zc("StructuralRight");
}
function lv(e6, r6) {
  return G.True;
}
function _B(e6, r6) {
  return M2.IsIntersect(r6) ? fg(e6, r6) : M2.IsUnion(r6) && r6.anyOf.some((t6) => M2.IsAny(t6) || M2.IsUnknown(t6)) ? G.True : M2.IsUnion(r6) ? G.Union : M2.IsUnknown(r6) || M2.IsAny(r6) ? G.True : G.Union;
}
function LB(e6, r6) {
  return M2.IsUnknown(e6) ? G.False : M2.IsAny(e6) ? G.Union : M2.IsNever(e6) ? G.True : G.False;
}
function RB(e6, r6) {
  return M2.IsObject(r6) && hg(r6) ? G.True : fr(r6) ? hr(e6, r6) : M2.IsArray(r6) ? To(bt(e6.items, r6.items)) : G.False;
}
function NB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsAsyncIterator(r6) ? To(bt(e6.items, r6.items)) : G.False;
}
function $B2(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsBigInt(r6) ? G.True : G.False;
}
function uS(e6, r6) {
  return M2.IsLiteralBoolean(e6) || M2.IsBoolean(e6) ? G.True : G.False;
}
function jB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsBoolean(r6) ? G.True : G.False;
}
function UB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsConstructor(r6) ? e6.parameters.length > r6.parameters.length ? G.False : e6.parameters.every((t6, n) => To(bt(r6.parameters[n], t6)) === G.True) ? To(bt(e6.returns, r6.returns)) : G.False : G.False;
}
function GB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsDate(r6) ? G.True : G.False;
}
function zB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsFunction(r6) ? e6.parameters.length > r6.parameters.length ? G.False : e6.parameters.every((t6, n) => To(bt(r6.parameters[n], t6)) === G.True) ? To(bt(e6.returns, r6.returns)) : G.False : G.False;
}
function lS(e6, r6) {
  return M2.IsLiteral(e6) && Ye2.IsNumber(e6.const) || M2.IsNumber(e6) || M2.IsInteger(e6) ? G.True : G.False;
}
function VB(e6, r6) {
  return M2.IsInteger(r6) || M2.IsNumber(r6) ? G.True : fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : G.False;
}
function fg(e6, r6) {
  return r6.allOf.every((t6) => bt(e6, t6) === G.True) ? G.True : G.False;
}
function HB(e6, r6) {
  return e6.allOf.some((t6) => bt(t6, r6) === G.True) ? G.True : G.False;
}
function ZB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsIterator(r6) ? To(bt(e6.items, r6.items)) : G.False;
}
function WB2(e6, r6) {
  return M2.IsLiteral(r6) && r6.const === e6.const ? G.True : fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsString(r6) ? mS(e6, r6) : M2.IsNumber(r6) ? pS(e6, r6) : M2.IsInteger(r6) ? lS(e6, r6) : M2.IsBoolean(r6) ? uS(e6, r6) : G.False;
}
function cS(e6, r6) {
  return G.False;
}
function XB(e6, r6) {
  return G.True;
}
function oS(e6) {
  let [r6, t6] = [e6, 0];
  for (; M2.IsNot(r6); ) r6 = r6.not, t6 += 1;
  return t6 % 2 === 0 ? r6 : Ya();
}
function JB2(e6, r6) {
  return M2.IsNot(e6) ? bt(oS(e6), r6) : M2.IsNot(r6) ? bt(e6, oS(r6)) : zc("Invalid fallthrough for Not");
}
function YB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsNull(r6) ? G.True : G.False;
}
function pS(e6, r6) {
  return M2.IsLiteralNumber(e6) || M2.IsNumber(e6) || M2.IsInteger(e6) ? G.True : G.False;
}
function KB(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsInteger(r6) || M2.IsNumber(r6) ? G.True : G.False;
}
function Ln(e6, r6) {
  return Object.getOwnPropertyNames(e6.properties).length === r6;
}
function iS(e6) {
  return hg(e6);
}
function aS(e6) {
  return Ln(e6, 0) || Ln(e6, 1) && "description" in e6.properties && M2.IsUnion(e6.properties.description) && e6.properties.description.anyOf.length === 2 && (M2.IsString(e6.properties.description.anyOf[0]) && M2.IsUndefined(e6.properties.description.anyOf[1]) || M2.IsString(e6.properties.description.anyOf[1]) && M2.IsUndefined(e6.properties.description.anyOf[0]));
}
function iv(e6) {
  return Ln(e6, 0);
}
function sS(e6) {
  return Ln(e6, 0);
}
function qB(e6) {
  return Ln(e6, 0);
}
function QB(e6) {
  return Ln(e6, 0);
}
function eP(e6) {
  return hg(e6);
}
function tP(e6) {
  let r6 = qi();
  return Ln(e6, 0) || Ln(e6, 1) && "length" in e6.properties && To(bt(e6.properties.length, r6)) === G.True;
}
function rP(e6) {
  return Ln(e6, 0);
}
function hg(e6) {
  let r6 = qi();
  return Ln(e6, 0) || Ln(e6, 1) && "length" in e6.properties && To(bt(e6.properties.length, r6)) === G.True;
}
function nP(e6) {
  let r6 = Ys([Js()], Js());
  return Ln(e6, 0) || Ln(e6, 1) && "then" in e6.properties && To(bt(e6.properties.then, r6)) === G.True;
}
function dS(e6, r6) {
  return bt(e6, r6) === G.False || M2.IsOptional(e6) && !M2.IsOptional(r6) ? G.False : G.True;
}
function nn2(e6, r6) {
  return M2.IsUnknown(e6) ? G.False : M2.IsAny(e6) ? G.Union : M2.IsNever(e6) || M2.IsLiteralString(e6) && iS(r6) || M2.IsLiteralNumber(e6) && iv(r6) || M2.IsLiteralBoolean(e6) && sS(r6) || M2.IsSymbol(e6) && aS(r6) || M2.IsBigInt(e6) && qB(r6) || M2.IsString(e6) && iS(r6) || M2.IsSymbol(e6) && aS(r6) || M2.IsNumber(e6) && iv(r6) || M2.IsInteger(e6) && iv(r6) || M2.IsBoolean(e6) && sS(r6) || M2.IsUint8Array(e6) && eP(r6) || M2.IsDate(e6) && QB(r6) || M2.IsConstructor(e6) && rP(r6) || M2.IsFunction(e6) && tP(r6) ? G.True : M2.IsRecord(e6) && M2.IsString(sv(e6)) ? r6[Eo] === "Record" ? G.True : G.False : M2.IsRecord(e6) && M2.IsNumber(sv(e6)) ? Ln(r6, 0) ? G.True : G.False : G.False;
}
function oP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsObject(r6) ? (() => {
    for (let t6 of Object.getOwnPropertyNames(r6.properties)) {
      if (!(t6 in e6.properties) && !M2.IsOptional(r6.properties[t6])) return G.False;
      if (M2.IsOptional(r6.properties[t6])) return G.True;
      if (dS(e6.properties[t6], r6.properties[t6]) === G.False) return G.False;
    }
    return G.True;
  })() : G.False;
}
function iP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) && nP(r6) ? G.True : M2.IsPromise(r6) ? To(bt(e6.item, r6.item)) : G.False;
}
function sv(e6) {
  return Za in e6.patternProperties ? qi() : Wa in e6.patternProperties ? Co2() : zc("Unknown record key pattern");
}
function uv(e6) {
  return Za in e6.patternProperties ? e6.patternProperties[Za] : Wa in e6.patternProperties ? e6.patternProperties[Wa] : zc("Unable to get record value schema");
}
function wo(e6, r6) {
  let [t6, n] = [sv(r6), uv(r6)];
  return M2.IsLiteralString(e6) && M2.IsNumber(t6) && To(bt(e6, n)) === G.True ? G.True : M2.IsUint8Array(e6) && M2.IsNumber(t6) || M2.IsString(e6) && M2.IsNumber(t6) || M2.IsArray(e6) && M2.IsNumber(t6) ? bt(e6, n) : M2.IsObject(e6) ? (() => {
    for (let o of Object.getOwnPropertyNames(e6.properties)) if (dS(n, e6.properties[o]) === G.False) return G.False;
    return G.True;
  })() : G.False;
}
function aP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? bt(uv(e6), uv(r6)) : G.False;
}
function sP(e6, r6) {
  let t6 = M2.IsRegExp(e6) ? Co2() : e6, n = M2.IsRegExp(r6) ? Co2() : r6;
  return bt(t6, n);
}
function mS(e6, r6) {
  return M2.IsLiteral(e6) && Ye2.IsString(e6.const) || M2.IsString(e6) ? G.True : G.False;
}
function uP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsString(r6) ? G.True : G.False;
}
function lP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsSymbol(r6) ? G.True : G.False;
}
function cP(e6, r6) {
  return M2.IsTemplateLiteral(e6) ? bt(Ku(e6), r6) : M2.IsTemplateLiteral(r6) ? bt(e6, Ku(r6)) : zc("Invalid fallthrough for TemplateLiteral");
}
function pP(e6, r6) {
  return M2.IsArray(r6) && e6.items !== void 0 && e6.items.every((t6) => bt(t6, r6.items) === G.True);
}
function dP(e6, r6) {
  return M2.IsNever(e6) ? G.True : M2.IsUnknown(e6) ? G.False : M2.IsAny(e6) ? G.Union : G.False;
}
function mP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) && hg(r6) || M2.IsArray(r6) && pP(e6, r6) ? G.True : M2.IsTuple(r6) ? Ye2.IsUndefined(e6.items) && !Ye2.IsUndefined(r6.items) || !Ye2.IsUndefined(e6.items) && Ye2.IsUndefined(r6.items) ? G.False : Ye2.IsUndefined(e6.items) && !Ye2.IsUndefined(r6.items) || e6.items.every((t6, n) => bt(t6, r6.items[n]) === G.True) ? G.True : G.False : G.False;
}
function fP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsUint8Array(r6) ? G.True : G.False;
}
function hP(e6, r6) {
  return fr(r6) ? hr(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsRecord(r6) ? wo(e6, r6) : M2.IsVoid(r6) ? bP(e6, r6) : M2.IsUndefined(r6) ? G.True : G.False;
}
function cv(e6, r6) {
  return r6.anyOf.some((t6) => bt(e6, t6) === G.True) ? G.True : G.False;
}
function gP(e6, r6) {
  return e6.anyOf.every((t6) => bt(t6, r6) === G.True) ? G.True : G.False;
}
function fS(e6, r6) {
  return G.True;
}
function yP(e6, r6) {
  return M2.IsNever(r6) ? cS(e6, r6) : M2.IsIntersect(r6) ? fg(e6, r6) : M2.IsUnion(r6) ? cv(e6, r6) : M2.IsAny(r6) ? lv(e6, r6) : M2.IsString(r6) ? mS(e6, r6) : M2.IsNumber(r6) ? pS(e6, r6) : M2.IsInteger(r6) ? lS(e6, r6) : M2.IsBoolean(r6) ? uS(e6, r6) : M2.IsArray(r6) ? LB(e6, r6) : M2.IsTuple(r6) ? dP(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsUnknown(r6) ? G.True : G.False;
}
function bP(e6, r6) {
  return M2.IsUndefined(e6) || M2.IsUndefined(e6) ? G.True : G.False;
}
function vP(e6, r6) {
  return M2.IsIntersect(r6) ? fg(e6, r6) : M2.IsUnion(r6) ? cv(e6, r6) : M2.IsUnknown(r6) ? fS(e6, r6) : M2.IsAny(r6) ? lv(e6, r6) : M2.IsObject(r6) ? nn2(e6, r6) : M2.IsVoid(r6) ? G.True : G.False;
}
function bt(e6, r6) {
  return M2.IsTemplateLiteral(e6) || M2.IsTemplateLiteral(r6) ? cP(e6, r6) : M2.IsRegExp(e6) || M2.IsRegExp(r6) ? sP(e6, r6) : M2.IsNot(e6) || M2.IsNot(r6) ? JB2(e6, r6) : M2.IsAny(e6) ? _B(e6, r6) : M2.IsArray(e6) ? RB(e6, r6) : M2.IsBigInt(e6) ? $B2(e6, r6) : M2.IsBoolean(e6) ? jB(e6, r6) : M2.IsAsyncIterator(e6) ? NB(e6, r6) : M2.IsConstructor(e6) ? UB(e6, r6) : M2.IsDate(e6) ? GB(e6, r6) : M2.IsFunction(e6) ? zB(e6, r6) : M2.IsInteger(e6) ? VB(e6, r6) : M2.IsIntersect(e6) ? HB(e6, r6) : M2.IsIterator(e6) ? ZB(e6, r6) : M2.IsLiteral(e6) ? WB2(e6, r6) : M2.IsNever(e6) ? XB(e6, r6) : M2.IsNull(e6) ? YB(e6, r6) : M2.IsNumber(e6) ? KB(e6, r6) : M2.IsObject(e6) ? oP(e6, r6) : M2.IsRecord(e6) ? aP(e6, r6) : M2.IsString(e6) ? uP(e6, r6) : M2.IsSymbol(e6) ? lP(e6, r6) : M2.IsTuple(e6) ? mP(e6, r6) : M2.IsPromise(e6) ? iP(e6, r6) : M2.IsUint8Array(e6) ? fP(e6, r6) : M2.IsUndefined(e6) ? hP(e6, r6) : M2.IsUnion(e6) ? gP(e6, r6) : M2.IsUnknown(e6) ? yP(e6, r6) : M2.IsVoid(e6) ? vP(e6, r6) : zc(`Unknown left type operand '${e6[j]}'`);
}
function qs(e6, r6) {
  return bt(e6, r6);
}
$i();
$i();
$i();
function xP(e6, r6, t6, n, o) {
  let i = {};
  for (let s6 of globalThis.Object.getOwnPropertyNames(e6)) i[s6] = Vc(e6[s6], r6, t6, n, $t(o));
  return i;
}
function IP(e6, r6, t6, n, o) {
  return xP(e6.properties, r6, t6, n, o);
}
function hS(e6, r6, t6, n, o) {
  let i = IP(e6, r6, t6, n, o);
  return qe(i);
}
function EP(e6, r6, t6, n) {
  let o = qs(e6, r6);
  return o === G.Union ? yt([t6, n]) : o === G.True ? t6 : n;
}
function Vc(e6, r6, t6, n, o) {
  return Ut(e6) ? hS(e6, r6, t6, n, o) : Jn(e6) ? H(gS(e6, r6, t6, n, o)) : H(EP(e6, r6, t6, n), o);
}
function CP(e6, r6, t6, n, o) {
  return { [e6]: Vc(lt(e6), r6, t6, n, $t(o)) };
}
function SP(e6, r6, t6, n, o) {
  return e6.reduce((i, s6) => ({ ...i, ...CP(s6, r6, t6, n, o) }), {});
}
function DP(e6, r6, t6, n, o) {
  return SP(e6.keys, r6, t6, n, o);
}
function gS(e6, r6, t6, n, o) {
  let i = DP(e6, r6, t6, n, o);
  return qe(i);
}
$i();
function TP(e6) {
  return e6.allOf.every((r6) => Ka2(r6));
}
function wP(e6) {
  return e6.anyOf.some((r6) => Ka2(r6));
}
function FP(e6) {
  return !Ka2(e6.not);
}
function Ka2(e6) {
  return e6[j] === "Intersect" ? TP(e6) : e6[j] === "Union" ? wP(e6) : e6[j] === "Not" ? FP(e6) : e6[j] === "Undefined";
}
$i();
function yS(e6, r6) {
  return Hc(Ku(e6), r6);
}
function MP(e6, r6) {
  let t6 = e6.filter((n) => qs(n, r6) === G.False);
  return t6.length === 1 ? t6[0] : yt(t6);
}
function Hc(e6, r6, t6 = {}) {
  return Yn(e6) ? H(yS(e6, r6), t6) : Ut(e6) ? H(bS(e6, r6), t6) : H(st(e6) ? MP(e6.anyOf, r6) : qs(e6, r6) !== G.False ? gt() : e6, t6);
}
function AP(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = Hc(e6[n], r6);
  return t6;
}
function OP(e6, r6) {
  return AP(e6.properties, r6);
}
function bS(e6, r6) {
  let t6 = OP(e6, r6);
  return qe(t6);
}
$i();
$i();
$i();
function vS(e6, r6) {
  return Zc(Ku(e6), r6);
}
function BP(e6, r6) {
  let t6 = e6.filter((n) => qs(n, r6) !== G.False);
  return t6.length === 1 ? t6[0] : yt(t6);
}
function Zc(e6, r6, t6) {
  return Yn(e6) ? H(vS(e6, r6), t6) : Ut(e6) ? H(xS(e6, r6), t6) : H(st(e6) ? BP(e6.anyOf, r6) : qs(e6, r6) !== G.False ? e6 : gt(), t6);
}
function PP(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = Zc(e6[n], r6);
  return t6;
}
function kP(e6, r6) {
  return PP(e6.properties, r6);
}
function xS(e6, r6) {
  let t6 = kP(e6, r6);
  return qe(t6);
}
$i();
function IS(e6, r6) {
  return H(e6.returns, r6);
}
$i();
function ES(e6) {
  return H({ [j]: "Integer", type: "integer" }, e6);
}
$i();
$i();
$i();
function _P(e6, r6, t6) {
  return { [e6]: ii(lt(e6), r6, $t(t6)) };
}
function LP(e6, r6, t6) {
  return e6.reduce((o, i) => ({ ...o, ..._P(i, r6, t6) }), {});
}
function RP(e6, r6, t6) {
  return LP(e6.keys, r6, t6);
}
function CS(e6, r6, t6) {
  let n = RP(e6, r6, t6);
  return qe(n);
}
function NP(e6) {
  let [r6, t6] = [e6.slice(0, 1), e6.slice(1)];
  return [r6.toLowerCase(), t6].join("");
}
function $P(e6) {
  let [r6, t6] = [e6.slice(0, 1), e6.slice(1)];
  return [r6.toUpperCase(), t6].join("");
}
function jP(e6) {
  return e6.toUpperCase();
}
function UP(e6) {
  return e6.toLowerCase();
}
function GP(e6, r6, t6) {
  let n = $c(e6.pattern);
  if (!Yu(n)) return { ...e6, pattern: SS(e6.pattern, r6) };
  let s6 = [...$m(n)].map((c) => lt(c)), u6 = DS(s6, r6), l = yt(u6);
  return ng([l], t6);
}
function SS(e6, r6) {
  return typeof e6 == "string" ? r6 === "Uncapitalize" ? NP(e6) : r6 === "Capitalize" ? $P(e6) : r6 === "Uppercase" ? jP(e6) : r6 === "Lowercase" ? UP(e6) : e6 : e6.toString();
}
function DS(e6, r6) {
  return e6.map((t6) => ii(t6, r6));
}
function ii(e6, r6, t6 = {}) {
  return Jn(e6) ? CS(e6, r6, t6) : Yn(e6) ? GP(e6, r6, t6) : st(e6) ? yt(DS(e6.anyOf, r6), t6) : Ha(e6) ? lt(SS(e6.const, r6), t6) : H(e6, t6);
}
function TS(e6, r6 = {}) {
  return ii(e6, "Capitalize", r6);
}
$i();
function wS(e6, r6 = {}) {
  return ii(e6, "Lowercase", r6);
}
$i();
function FS(e6, r6 = {}) {
  return ii(e6, "Uncapitalize", r6);
}
$i();
function MS(e6, r6 = {}) {
  return ii(e6, "Uppercase", r6);
}
$i();
function AS(e6, r6) {
  return H({ [j]: "Not", not: e6 }, r6);
}
$i();
$i();
$i();
function zP(e6, r6, t6) {
  let n = {};
  for (let o of globalThis.Object.getOwnPropertyNames(e6)) n[o] = Wc(e6[o], r6, $t(t6));
  return n;
}
function VP(e6, r6, t6) {
  return zP(e6.properties, r6, t6);
}
function OS(e6, r6, t6) {
  let n = VP(e6, r6, t6);
  return qe(n);
}
function HP(e6, r6) {
  return e6.map((t6) => pv(t6, r6));
}
function ZP(e6, r6) {
  return e6.map((t6) => pv(t6, r6));
}
function WP(e6, r6) {
  let { [r6]: t6, ...n } = e6;
  return n;
}
function XP(e6, r6) {
  return r6.reduce((t6, n) => WP(t6, n), e6);
}
function JP(e6, r6) {
  let t6 = er(e6, [jt, "$id", "required", "properties"]), n = XP(e6.properties, r6);
  return Ct(n, t6);
}
function pv(e6, r6) {
  return ur2(e6) ? _n(HP(e6.allOf, r6)) : st(e6) ? yt(ZP(e6.anyOf, r6)) : vr(e6) ? JP(e6, r6) : Ct({});
}
function Wc(e6, r6, t6) {
  if (Jn(r6)) return BS(e6, r6, t6);
  if (Ut(e6)) return OS(e6, r6, t6);
  let n = ni(r6) ? kn(r6) : r6;
  return H({ ...pv(e6, n), ...t6 });
}
function YP(e6, r6, t6) {
  return { [r6]: Wc(e6, [r6], $t(t6)) };
}
function KP(e6, r6, t6) {
  return r6.reduce((n, o) => ({ ...n, ...YP(e6, o, t6) }), {});
}
function qP(e6, r6, t6) {
  return KP(e6, r6.keys, t6);
}
function BS(e6, r6, t6) {
  let n = qP(e6, r6, t6);
  return qe(n);
}
$i();
function PS(e6, r6) {
  return Qi(e6.parameters, r6);
}
$i();
$i();
function kS(e6) {
  return e6.map((r6) => _S(r6));
}
function QP(e6) {
  let r6 = {};
  for (let t6 of globalThis.Object.getOwnPropertyNames(e6)) r6[t6] = Pn(e6[t6]);
  return r6;
}
function ek(e6) {
  let r6 = er(e6, [jt, "$id", "required", "properties"]), t6 = QP(e6.properties);
  return Ct(t6, r6);
}
function _S(e6) {
  return ur2(e6) ? _n(kS(e6.allOf)) : st(e6) ? yt(kS(e6.anyOf)) : vr(e6) ? ek(e6) : Ct({});
}
function gg(e6, r6) {
  return Ut(e6) ? LS(e6, r6) : H({ ..._S(e6), ...r6 });
}
function tk(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = gg(e6[n], $t(r6));
  return t6;
}
function rk(e6, r6) {
  return tk(e6.properties, r6);
}
function LS(e6, r6) {
  let t6 = rk(e6, r6);
  return qe(t6);
}
$i();
$i();
$i();
function nk(e6, r6, t6) {
  let n = {};
  for (let o of globalThis.Object.getOwnPropertyNames(e6)) n[o] = Xc(e6[o], r6, $t(t6));
  return n;
}
function ok(e6, r6, t6) {
  return nk(e6.properties, r6, t6);
}
function RS(e6, r6, t6) {
  let n = ok(e6, r6, t6);
  return qe(n);
}
function ik(e6, r6) {
  return e6.map((t6) => dv(t6, r6));
}
function ak(e6, r6) {
  return e6.map((t6) => dv(t6, r6));
}
function sk(e6, r6) {
  let t6 = {};
  for (let n of r6) n in e6 && (t6[n] = e6[n]);
  return t6;
}
function uk(e6, r6) {
  let t6 = er(e6, [jt, "$id", "required", "properties"]), n = sk(e6.properties, r6);
  return Ct(n, t6);
}
function dv(e6, r6) {
  return ur2(e6) ? _n(ik(e6.allOf, r6)) : st(e6) ? yt(ak(e6.anyOf, r6)) : vr(e6) ? uk(e6, r6) : Ct({});
}
function Xc(e6, r6, t6) {
  if (Jn(r6)) return NS(e6, r6, t6);
  if (Ut(e6)) return RS(e6, r6, t6);
  let n = ni(r6) ? kn(r6) : r6;
  return H({ ...dv(e6, n), ...t6 });
}
function lk(e6, r6, t6) {
  return { [r6]: Xc(e6, [r6], $t(t6)) };
}
function ck(e6, r6, t6) {
  return r6.reduce((n, o) => ({ ...n, ...lk(e6, o, t6) }), {});
}
function pk(e6, r6, t6) {
  return ck(e6, r6.keys, t6);
}
function NS(e6, r6, t6) {
  let n = pk(e6, r6, t6);
  return qe(n);
}
$i();
function $S(e6) {
  return So(Pn(e6));
}
$i();
function qu(e6, r6, t6) {
  return H({ [j]: "Record", type: "object", patternProperties: { [e6]: r6 } }, t6);
}
function mv(e6, r6, t6) {
  let n = {};
  for (let o of e6) n[o] = r6;
  return Ct(n, { ...t6, [Eo]: "Record" });
}
function dk(e6, r6, t6) {
  return tg(e6) ? mv(kn(e6), r6, t6) : qu(e6.pattern, r6, t6);
}
function mk(e6, r6, t6) {
  return mv(kn(yt(e6)), r6, t6);
}
function fk(e6, r6, t6) {
  return mv([e6.toString()], r6, t6);
}
function hk(e6, r6, t6) {
  return qu(e6.source, r6, t6);
}
function gk(e6, r6, t6) {
  let n = Zt(e6.pattern) ? Wa : e6.pattern;
  return qu(n, r6, t6);
}
function yk(e6, r6, t6) {
  return qu(Wa, r6, t6);
}
function bk(e6, r6, t6) {
  return qu(AC, r6, t6);
}
function vk(e6, r6, t6) {
  return qu(Za, r6, t6);
}
function xk(e6, r6, t6) {
  return qu(Za, r6, t6);
}
function jS2(e6, r6, t6 = {}) {
  return st(e6) ? mk(e6.anyOf, r6, t6) : Yn(e6) ? dk(e6, r6, t6) : Ha(e6) ? fk(e6.const, r6, t6) : Wu(e6) ? vk(e6, r6, t6) : Xu(e6) ? xk(e6, r6, t6) : Gb(e6) ? hk(e6, r6, t6) : Pm(e6) ? gk(e6, r6, t6) : Rb(e6) ? yk(e6, r6, t6) : Ws(e6) ? bk(e6, r6, t6) : gt(t6);
}
$i();
var Ik = 0;
function US(e6, r6 = {}) {
  Zt(r6.$id) && (r6.$id = `T${Ik++}`);
  let t6 = wm(e6({ [j]: "This", $ref: `${r6.$id}` }));
  return t6.$id = r6.$id, H({ [Eo]: "Recursive", ...t6 }, r6);
}
$i();
function GS(e6, r6) {
  if (Bt(e6)) return H({ [j]: "Ref", $ref: e6 }, r6);
  if (Zt(e6.$id)) throw new Error("Reference target type must specify an $id");
  return H({ [j]: "Ref", $ref: e6.$id }, r6);
}
$i();
function zS(e6, r6) {
  let t6 = Bt(e6) ? new globalThis.RegExp(e6) : e6;
  return H({ [j]: "RegExp", type: "RegExp", source: t6.source, flags: t6.flags }, r6);
}
$i();
$i();
function VS(e6) {
  return e6.map((r6) => HS2(r6));
}
function Ek(e6) {
  let r6 = {};
  for (let t6 of globalThis.Object.getOwnPropertyNames(e6)) r6[t6] = er(e6[t6], [fn]);
  return r6;
}
function Ck(e6) {
  let r6 = er(e6, [jt, "$id", "required", "properties"]), t6 = Ek(e6.properties);
  return Ct(t6, r6);
}
function HS2(e6) {
  return ur2(e6) ? _n(VS(e6.allOf)) : st(e6) ? yt(VS(e6.anyOf)) : vr(e6) ? Ck(e6) : Ct({});
}
function yg(e6, r6) {
  return Ut(e6) ? ZS2(e6, r6) : H({ ...HS2(e6), ...r6 });
}
function Sk(e6, r6) {
  let t6 = {};
  for (let n of globalThis.Object.getOwnPropertyNames(e6)) t6[n] = yg(e6[n], r6);
  return t6;
}
function Dk(e6, r6) {
  return Sk(e6.properties, r6);
}
function ZS2(e6, r6) {
  let t6 = Dk(e6, r6);
  return qe(t6);
}
$i();
function Tk(e6) {
  return ur2(e6) ? e6.allOf : st(e6) ? e6.anyOf : ri(e6) ? e6.items ?? [] : [];
}
function WS(e6) {
  return Tk(e6);
}
$i();
function XS(e6, r6) {
  return H(e6.returns, r6);
}
$i();
function JS(e6) {
  return JSON.parse(JSON.stringify(e6));
}
$i();
var fv = class {
  constructor(r6) {
    this.schema = r6;
  }
  Decode(r6) {
    return new hv(this.schema, r6);
  }
};
var hv = class {
  constructor(r6, t6) {
    this.schema = r6, this.decode = t6;
  }
  EncodeTransform(r6, t6) {
    let i = { Encode: (s6) => t6[jt].Encode(r6(s6)), Decode: (s6) => this.decode(t6[jt].Decode(s6)) };
    return { ...t6, [jt]: i };
  }
  EncodeSchema(r6, t6) {
    let n = { Decode: this.decode, Encode: r6 };
    return { ...t6, [jt]: n };
  }
  Encode(r6) {
    return kc(this.schema) ? this.EncodeTransform(r6, this.schema) : this.EncodeSchema(r6, this.schema);
  }
};
function YS(e6) {
  return new fv(e6);
}
$i();
function bg(e6 = {}) {
  return H({ [j]: e6[j] ?? "Unsafe" }, e6);
}
$i();
function KS(e6) {
  return H({ [j]: "Void", type: "void" }, e6);
}
$i();
var gv = {};
r(gv, { Any: () => Js, Array: () => Kh, AsyncIterator: () => qh, Awaited: () => KC, BigInt: () => Uc, Boolean: () => rg, Capitalize: () => TS, Composite: () => eS, Const: () => tS, Constructor: () => Qh, ConstructorParameters: () => rS, Date: () => ug, Deref: () => oi, Enum: () => nS, Exclude: () => Hc, Extends: () => Vc, Extract: () => Zc, Function: () => Ys, Index: () => Gc, InstanceType: () => IS, Integer: () => ES, Intersect: () => _n, Iterator: () => ig, KeyOf: () => sg, Literal: () => lt, Lowercase: () => wS, Mapped: () => WC2, Never: () => gt, Not: () => AS, Null: () => lg, Number: () => qi, Object: () => Ct, Omit: () => Wc, Optional: () => Pn, Parameters: () => PS, Partial: () => gg, Pick: () => Xc, Promise: () => ag, Readonly: () => So, ReadonlyOptional: () => $S, Record: () => jS2, Recursive: () => US, Ref: () => GS, RegExp: () => zS, Required: () => yg, Rest: () => WS, ReturnType: () => XS, Strict: () => JS, String: () => Co2, Symbol: () => cg, TemplateLiteral: () => ng, Transform: () => YS, Tuple: () => Qi, Uint8Array: () => dg, Uncapitalize: () => FS, Undefined: () => pg, Union: () => yt, Unknown: () => Ya, Unsafe: () => bg, Uppercase: () => MS, Void: () => KS });
$i();
var g = gv;
$i();
var Vm = g.Object({ externalId: g.String({ description: "An identifier that can be used to link this entity to data outside of the MVF." }), name: g.String({ description: "The name of the entity." }), shortName: g.String({ description: "A short name for the entity." }), description: g.String({ description: "A description of the entity." }), icon: g.String({ format: "uri", description: "A URL to an icon for the entity." }) }, { $id: "BaseDetails", description: "Additional information about a given entity." });
var yv = g.Partial(Vm, { $id: "Details", description: "Additional information about a given entity." });
var Kn2 = g.Object({ details: g.Optional(g.Ref(yv)) }, { $id: "WithDetails" });
var Qu = (e6) => {
  let r6 = [...e6].sort(), t6 = g.Pick(Vm, e6), n = g.Omit(Vm, e6);
  return g.Object({ details: g.Intersect([t6, g.Partial(n)]) }, { $id: `WithRequiredDetails_${r6.join("_")}` });
};
var bv = [Vm, yv];
$i();
var Jc = g.Number({ $id: "Longitude", minimum: -180, maximum: 180, description: "A WGS 84-compatible longitude coordinate value." });
var Yc = g.Number({ $id: "Latitude", minimum: -90, maximum: 90, description: "A WGS 84-compatible latitude coordinate value." });
var el = g.Tuple([g.Ref(Jc), g.Ref(Yc)], { $id: "Position", minItems: 2, maxItems: 2, description: "A valid WGS 84 position consisting of a longitude value, followed by a latitude value." });
var on = g.Object({ type: g.Literal("Point"), coordinates: g.Ref(el) }, { $id: "Point", description: "An RFC-7946 compatible GeoJSON Point geometry." });
var vg = g.Object({ type: g.Literal("MultiPoint"), coordinates: g.Array(g.Ref(el)) }, { $id: "MultiPoint", description: "An RFC-7946 compatible GeoJSON MultiPoint geometry." });
var xg = g.Object({ type: g.Literal("LineString"), coordinates: g.Array(g.Ref(el), { minItems: 2, description: "At least two positions are required." }) }, { $id: "LineString", description: "An RFC-7946 compatible GeoJSON LineString geometry." });
var Ig2 = g.Object({ type: g.Literal("MultiLineString"), coordinates: g.Array(g.Array(g.Ref(el), { minItems: 2 })) }, { $id: "MultiLineString", description: "An RFC-7946 compatible GeoJSON MultiLineString geometry." });
var qS = g.Array(g.Ref(el), { $id: "LinearRing", minItems: 4, description: "A linear ring is a building block of a polygon or multi-polygon." });
var vv = g.Array(g.Ref(qS), { $id: "LinearRings", minItems: 1, description: "A collection of linear rings, at least one of which is the exterior ring of a polygon." });
var Kc = g.Object({ type: g.Literal("Polygon"), coordinates: g.Ref(vv) }, { $id: "Polygon", description: "An RFC-7946 compatible GeoJSON Polygon geometry." });
var qc = g.Object({ type: g.Literal("MultiPolygon"), coordinates: g.Array(g.Ref(vv)) }, { $id: "MultiPolygon", description: "An RFC-7946 compatible GeoJSON MultiPolygon geometry." });
var Vr = (e6, r6, t6) => g.Object({ type: g.Literal("Feature"), geometry: e6, properties: r6 }, t6);
var hn = (e6, r6, t6) => g.Object({ type: g.Literal("FeatureCollection"), features: g.Array(e6, t6) }, r6);
var xv = [Jc, Yc, el, on, vg, xg, Ig2, qS, vv, Kc, qc];
$i();
var tr = (e6, r6) => g.Unsafe(g.String({ $id: r6, pattern: `^${e6}_[A-Za-z0-9-]+$` }));
var an2 = tr("g", "GeometryId");
var ze = tr("f", "FloorId");
var Iv = [an2, ze];
$i();
$i();
$i();
var Eg = class {
  constructor(r6) {
    t(this, "_value");
    this._value = r6;
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    if (this._value == null) return { done: true, value: void 0 };
    let r6 = this._value;
    return this._value = null, { done: false, value: r6 };
  }
};
var Cg = class {
  constructor(r6) {
    t(this, "_tag", "Some");
    t(this, "_value");
    this._value = r6;
  }
  get value() {
    return this._value;
  }
  isSome() {
    return true;
  }
  isSomeAnd(r6) {
    return r6(this.value);
  }
  isNone() {
    return false;
  }
  equals(r6) {
    return r6.isSome() && r6.value === this.value;
  }
  expect(r6) {
    return this.value;
  }
  unwrap() {
    return this.value;
  }
  unwrapOr(r6) {
    return this.value;
  }
  unwrapOrElse(r6) {
    return this.value;
  }
  inspect(r6) {
    return r6(this.value), this;
  }
  inspectNone(r6) {
    return this;
  }
  map(r6) {
    return QS(r6(this.value));
  }
  mapAsync(r6) {
    return r6(this.value).then((t6) => QS(t6));
  }
  mapOr(r6, t6) {
    return this.map(r6).unwrapOr(t6);
  }
  mapOrAsync(r6, t6) {
    return this.mapAsync(r6).then((n) => n.unwrapOr(t6));
  }
  mapOrElse(r6, t6) {
    return this.map(r6).unwrapOrElse(t6);
  }
  mapOrElseAsync(r6, t6) {
    return this.mapAsync(r6).then((n) => n.unwrapOrElse(t6));
  }
  and(r6) {
    return r6;
  }
  andThen(r6) {
    return r6(this.value);
  }
  andThenAsync(r6) {
    return r6(this.value);
  }
  filter(r6) {
    return r6(this.value) ? this : Qs();
  }
  or(r6) {
    return this;
  }
  orElse(r6) {
    return this;
  }
  xor(r6) {
    return r6.isSome() ? Qs() : this;
  }
  toString() {
    return `Some(${this.value})`;
  }
  okOr(r6) {
    return te(this.value);
  }
  okOrElse(r6) {
    return te(this.value);
  }
  iter() {
    return new Eg(this.value);
  }
  [Symbol.iterator]() {
    return this.iter();
  }
  zip(r6) {
    return r6.isSome() ? Qc([this.value, r6.value]) : Qs();
  }
  zipWith(r6, t6) {
    return r6.isSome() ? Qc(t6(this.value, r6.value)) : Qs();
  }
  get [Symbol.toStringTag]() {
    return "Some";
  }
};
var Sg = class {
  constructor() {
    t(this, "_tag", "None");
  }
  get value() {
    return null;
  }
  isSome() {
    return false;
  }
  isSomeAnd(r6) {
    return false;
  }
  isNone() {
    return true;
  }
  equals(r6) {
    return r6.isNone();
  }
  expect(r6) {
    throw new Error(r6);
  }
  unwrap() {
    throw new Error("Tried to unwrap a None value!");
  }
  unwrapOr(r6) {
    return r6;
  }
  unwrapOrElse(r6) {
    return r6();
  }
  inspect(r6) {
    return this;
  }
  inspectNone(r6) {
    return r6(), this;
  }
  map(r6) {
    return this;
  }
  mapAsync(r6) {
    return Promise.resolve(this);
  }
  mapOr(r6, t6) {
    return t6;
  }
  mapOrAsync(r6, t6) {
    return Promise.resolve(t6);
  }
  mapOrElse(r6, t6) {
    return t6();
  }
  mapOrElseAsync(r6, t6) {
    return t6();
  }
  and(r6) {
    return this;
  }
  andThen(r6) {
    return this;
  }
  andThenAsync(r6) {
    return Promise.resolve(this);
  }
  filter(r6) {
    return this;
  }
  or(r6) {
    return r6;
  }
  orElse(r6) {
    return r6();
  }
  xor(r6) {
    return r6;
  }
  toString() {
    return "None";
  }
  okOr(r6) {
    return oe2(r6);
  }
  okOrElse(r6) {
    return oe2(r6());
  }
  iter() {
    return new Eg(null);
  }
  [Symbol.iterator]() {
    return this.iter();
  }
  zip(r6) {
    return this;
  }
  zipWith(r6, t6) {
    return this;
  }
  get [Symbol.toStringTag]() {
    return "None";
  }
};
var Qc = (e6) => new Cg(e6);
var Qs = () => new Sg();
var QS = (e6) => e6 instanceof Cg || e6 instanceof Sg ? e6 : e6 == null ? Qs() : Qc(e6);
var Dg2 = class {
  constructor(r6) {
    t(this, "_value");
    this._value = r6;
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    if (this._value == null) return { done: true, value: void 0 };
    let r6 = this._value;
    return this._value = null, { done: false, value: r6 };
  }
};
var Ev = class {
  constructor(r6) {
    t(this, "_tag", "Ok");
    t(this, "_value");
    this._value = r6;
  }
  get value() {
    return this._value;
  }
  get error() {
    return null;
  }
  isOk() {
    return true;
  }
  isOkAnd(r6) {
    return r6(this.value);
  }
  isErr() {
    return false;
  }
  isErrAnd(r6) {
    return false;
  }
  ok() {
    return Qc(this.value);
  }
  err() {
    return Qs();
  }
  expect(r6) {
    return this.value;
  }
  expectErr(r6) {
    throw new Error(r6);
  }
  unwrap() {
    return this.value;
  }
  unwrapOr(r6) {
    return this.value;
  }
  unwrapOrElse(r6) {
    return this.value;
  }
  inspect(r6) {
    return r6(this.value), this;
  }
  inspectErr() {
    return this;
  }
  map(r6) {
    return te(r6(this.value));
  }
  async mapAsync(r6) {
    return r6(this.value).then(te);
  }
  mapOr(r6, t6) {
    return r6(this.value);
  }
  async mapOrAsync(r6, t6) {
    return r6(this.value);
  }
  mapOrElse(r6, t6) {
    return r6(this.value);
  }
  async mapOrElseAsync(r6, t6) {
    return r6(this.value);
  }
  mapErr(r6) {
    return this;
  }
  iter() {
    return new Dg2(this.value);
  }
  [Symbol.iterator]() {
    return this.iter();
  }
  and(r6) {
    return r6;
  }
  andThen(r6) {
    return r6(this.value);
  }
  or(r6) {
    return this;
  }
  orElse(r6) {
    return this;
  }
  async andThenAsync(r6) {
    return r6(this.value);
  }
  toString() {
    return `Ok(${this.value})`;
  }
  get [Symbol.toStringTag]() {
    return "Ok";
  }
};
var Cv = class e {
  constructor(r6) {
    t(this, "_tag", "Err");
    t(this, "_error");
    this._error = r6;
  }
  get value() {
    return null;
  }
  get error() {
    return this._error;
  }
  isOk() {
    return false;
  }
  isOkAnd(r6) {
    return false;
  }
  isErr() {
    return true;
  }
  isErrAnd(r6) {
    return r6(this.error);
  }
  ok() {
    return Qs();
  }
  err() {
    return Qc(this.error);
  }
  expect(r6) {
    throw new Error(r6);
  }
  expectErr(r6) {
    return this.error;
  }
  unwrap() {
    throw this.error;
  }
  unwrapOr(r6) {
    return r6;
  }
  unwrapOrElse(r6) {
    return r6();
  }
  inspect() {
    return this;
  }
  inspectErr(r6) {
    return r6(this.error), this;
  }
  map(r6) {
    return this;
  }
  iter() {
    return new Dg2(null);
  }
  [Symbol.iterator]() {
    return this.iter();
  }
  async mapAsync(r6) {
    return this;
  }
  mapOr(r6, t6) {
    return t6;
  }
  async mapOrAsync(r6, t6) {
    return t6;
  }
  mapOrElse(r6, t6) {
    return t6();
  }
  async mapOrElseAsync(r6, t6) {
    return t6();
  }
  mapErr(r6) {
    return new e(r6(this.error));
  }
  and(r6) {
    return this;
  }
  andThen(r6) {
    return this;
  }
  async andThenAsync(r6) {
    return this;
  }
  or(r6) {
    return r6;
  }
  orElse(r6) {
    return r6(this.error);
  }
  toString() {
    return `Err(${this.error})`;
  }
  get [Symbol.toStringTag]() {
    return "Err";
  }
};
var te = (e6) => new Ev(e6);
var oe2 = (e6) => new Cv(e6);
$i();
var Rn;
(function(e6) {
  e6.GeometryMissingError = "GeometryMissingError", e6.FloorMissingError = "FloorMissingError", e6.UnknownFloorError = "UnknownFloorError", e6.UnknownGeometryError = "UnknownGeometryError", e6.DuplicateIdError = "DuplicateIdError";
})(Rn || (Rn = {}));
$i();
$i();
$i();
$i();
var Sv = class extends Se {
  constructor(r6) {
    super(`Duplicate type kind '${r6}' detected`);
  }
};
var Hm = class extends Se {
  constructor(r6) {
    super(`Duplicate string format '${r6}' detected`);
  }
};
var Tg;
(function(e6) {
  function r6(n, o) {
    if (Ar.Has(n)) throw new Sv(n);
    return Ar.Set(n, o), (i = {}) => bg({ ...i, [j]: n });
  }
  e6.Type = r6;
  function t6(n, o) {
    if (Bn.Has(n)) throw new Hm(n);
    return Bn.Set(n, o), n;
  }
  e6.Format = t6;
})(Tg || (Tg = {}));
$i();
function wk(e6) {
  switch (e6.errorType) {
    case U.ArrayContains:
      return "Expected array to contain at least one matching value";
    case U.ArrayMaxContains:
      return `Expected array to contain no more than ${e6.schema.maxContains} matching values`;
    case U.ArrayMinContains:
      return `Expected array to contain at least ${e6.schema.minContains} matching values`;
    case U.ArrayMaxItems:
      return `Expected array length to be less or equal to ${e6.schema.maxItems}`;
    case U.ArrayMinItems:
      return `Expected array length to be greater or equal to ${e6.schema.minItems}`;
    case U.ArrayUniqueItems:
      return "Expected array elements to be unique";
    case U.Array:
      return "Expected array";
    case U.AsyncIterator:
      return "Expected AsyncIterator";
    case U.BigIntExclusiveMaximum:
      return `Expected bigint to be less than ${e6.schema.exclusiveMaximum}`;
    case U.BigIntExclusiveMinimum:
      return `Expected bigint to be greater than ${e6.schema.exclusiveMinimum}`;
    case U.BigIntMaximum:
      return `Expected bigint to be less or equal to ${e6.schema.maximum}`;
    case U.BigIntMinimum:
      return `Expected bigint to be greater or equal to ${e6.schema.minimum}`;
    case U.BigIntMultipleOf:
      return `Expected bigint to be a multiple of ${e6.schema.multipleOf}`;
    case U.BigInt:
      return "Expected bigint";
    case U.Boolean:
      return "Expected boolean";
    case U.DateExclusiveMinimumTimestamp:
      return `Expected Date timestamp to be greater than ${e6.schema.exclusiveMinimumTimestamp}`;
    case U.DateExclusiveMaximumTimestamp:
      return `Expected Date timestamp to be less than ${e6.schema.exclusiveMaximumTimestamp}`;
    case U.DateMinimumTimestamp:
      return `Expected Date timestamp to be greater or equal to ${e6.schema.minimumTimestamp}`;
    case U.DateMaximumTimestamp:
      return `Expected Date timestamp to be less or equal to ${e6.schema.maximumTimestamp}`;
    case U.DateMultipleOfTimestamp:
      return `Expected Date timestamp to be a multiple of ${e6.schema.multipleOfTimestamp}`;
    case U.Date:
      return "Expected Date";
    case U.Function:
      return "Expected function";
    case U.IntegerExclusiveMaximum:
      return `Expected integer to be less than ${e6.schema.exclusiveMaximum}`;
    case U.IntegerExclusiveMinimum:
      return `Expected integer to be greater than ${e6.schema.exclusiveMinimum}`;
    case U.IntegerMaximum:
      return `Expected integer to be less or equal to ${e6.schema.maximum}`;
    case U.IntegerMinimum:
      return `Expected integer to be greater or equal to ${e6.schema.minimum}`;
    case U.IntegerMultipleOf:
      return `Expected integer to be a multiple of ${e6.schema.multipleOf}`;
    case U.Integer:
      return "Expected integer";
    case U.IntersectUnevaluatedProperties:
      return "Unexpected property";
    case U.Intersect:
      return "Expected all values to match";
    case U.Iterator:
      return "Expected Iterator";
    case U.Literal:
      return `Expected ${typeof e6.schema.const == "string" ? `'${e6.schema.const}'` : e6.schema.const}`;
    case U.Never:
      return "Never";
    case U.Not:
      return "Value should not match";
    case U.Null:
      return "Expected null";
    case U.NumberExclusiveMaximum:
      return `Expected number to be less than ${e6.schema.exclusiveMaximum}`;
    case U.NumberExclusiveMinimum:
      return `Expected number to be greater than ${e6.schema.exclusiveMinimum}`;
    case U.NumberMaximum:
      return `Expected number to be less or equal to ${e6.schema.maximum}`;
    case U.NumberMinimum:
      return `Expected number to be greater or equal to ${e6.schema.minimum}`;
    case U.NumberMultipleOf:
      return `Expected number to be a multiple of ${e6.schema.multipleOf}`;
    case U.Number:
      return "Expected number";
    case U.Object:
      return "Expected object";
    case U.ObjectAdditionalProperties:
      return "Unexpected property";
    case U.ObjectMaxProperties:
      return `Expected object to have no more than ${e6.schema.maxProperties} properties`;
    case U.ObjectMinProperties:
      return `Expected object to have at least ${e6.schema.minProperties} properties`;
    case U.ObjectRequiredProperty:
      return "Expected required property";
    case U.Promise:
      return "Expected Promise";
    case U.RegExp:
      return "Expected string to match regular expression";
    case U.StringFormatUnknown:
      return `Unknown format '${e6.schema.format}'`;
    case U.StringFormat:
      return `Expected string to match '${e6.schema.format}' format`;
    case U.StringMaxLength:
      return `Expected string length less or equal to ${e6.schema.maxLength}`;
    case U.StringMinLength:
      return `Expected string length greater or equal to ${e6.schema.minLength}`;
    case U.StringPattern:
      return `Expected string to match '${e6.schema.pattern}'`;
    case U.String:
      return "Expected string";
    case U.Symbol:
      return "Expected symbol";
    case U.TupleLength:
      return `Expected tuple to have ${e6.schema.maxItems || 0} elements`;
    case U.Tuple:
      return "Expected tuple";
    case U.Uint8ArrayMaxByteLength:
      return `Expected byte length less or equal to ${e6.schema.maxByteLength}`;
    case U.Uint8ArrayMinByteLength:
      return `Expected byte length greater or equal to ${e6.schema.minByteLength}`;
    case U.Uint8Array:
      return "Expected Uint8Array";
    case U.Undefined:
      return "Expected undefined";
    case U.Union:
      return "Expected union value";
    case U.Void:
      return "Expected void";
    case U.Kind:
      return `Expected kind '${e6.schema[j]}'`;
    default:
      return "Unknown error type";
  }
}
var Fk = wk;
function e5() {
  return Fk;
}
$i();
var Dv = class extends Se {
  constructor(r6) {
    super(`Unable to dereference schema with $id '${r6.$ref}'`), this.schema = r6;
  }
};
function Mk(e6, r6) {
  let t6 = r6.find((n) => n.$id === e6.$ref);
  if (t6 === void 0) throw new Dv(e6);
  return Qe(t6, r6);
}
function Fo(e6, r6) {
  return !He(e6.$id) || r6.some((t6) => t6.$id === e6.$id) || r6.push(e6), r6;
}
function Qe(e6, r6) {
  return e6[j] === "This" || e6[j] === "Ref" ? Mk(e6, r6) : e6;
}
$i();
var Tv = class extends Se {
  constructor(r6) {
    super("Unable to hash value"), this.value = r6;
  }
};
var qn;
(function(e6) {
  e6[e6.Undefined = 0] = "Undefined", e6[e6.Null = 1] = "Null", e6[e6.Boolean = 2] = "Boolean", e6[e6.Number = 3] = "Number", e6[e6.String = 4] = "String", e6[e6.Object = 5] = "Object", e6[e6.Array = 6] = "Array", e6[e6.Date = 7] = "Date", e6[e6.Uint8Array = 8] = "Uint8Array", e6[e6.Symbol = 9] = "Symbol", e6[e6.BigInt = 10] = "BigInt";
})(qn || (qn = {}));
var ep = BigInt("14695981039346656037");
var [Ak, Ok] = [BigInt("1099511628211"), BigInt("18446744073709551616")];
var Bk = Array.from({ length: 256 }).map((e6, r6) => BigInt(r6));
var t52 = new Float64Array(1);
var r52 = new DataView(t52.buffer);
var n52 = new Uint8Array(t52.buffer);
function* Pk(e6) {
  let r6 = e6 === 0 ? 1 : Math.ceil(Math.floor(Math.log2(e6) + 1) / 8);
  for (let t6 = 0; t6 < r6; t6++) yield e6 >> 8 * (r6 - 1 - t6) & 255;
}
function kk(e6) {
  sn2(qn.Array);
  for (let r6 of e6) tp(r6);
}
function _k(e6) {
  sn2(qn.Boolean), sn2(e6 ? 1 : 0);
}
function Lk(e6) {
  sn2(qn.BigInt), r52.setBigInt64(0, e6);
  for (let r6 of n52) sn2(r6);
}
function Rk(e6) {
  sn2(qn.Date), tp(e6.getTime());
}
function Nk(e6) {
  sn2(qn.Null);
}
function $k(e6) {
  sn2(qn.Number), r52.setFloat64(0, e6);
  for (let r6 of n52) sn2(r6);
}
function jk(e6) {
  sn2(qn.Object);
  for (let r6 of globalThis.Object.getOwnPropertyNames(e6).sort()) tp(r6), tp(e6[r6]);
}
function Uk(e6) {
  sn2(qn.String);
  for (let r6 = 0; r6 < e6.length; r6++) for (let t6 of Pk(e6.charCodeAt(r6))) sn2(t6);
}
function Gk(e6) {
  sn2(qn.Symbol), tp(e6.description);
}
function zk(e6) {
  sn2(qn.Uint8Array);
  for (let r6 = 0; r6 < e6.length; r6++) sn2(e6[r6]);
}
function Vk(e6) {
  return sn2(qn.Undefined);
}
function tp(e6) {
  if (Me(e6)) return kk(e6);
  if (Ji(e6)) return _k(e6);
  if (Gr2(e6)) return Lk(e6);
  if (mn(e6)) return Rk(e6);
  if (Ua(e6)) return Nk(e6);
  if (ye(e6)) return $k(e6);
  if (Be(e6)) return jk(e6);
  if (He(e6)) return Uk(e6);
  if (Ga(e6)) return Gk(e6);
  if (Pc(e6)) return zk(e6);
  if (Wt(e6)) return Vk(e6);
  throw new Tv(e6);
}
function sn2(e6) {
  ep = ep ^ Bk[e6], ep = ep * Ak % Ok;
}
function eu(e6) {
  return ep = BigInt("14695981039346656037"), tp(e6), ep;
}
$i();
var wv = class extends Se {
  constructor(r6) {
    super("Unknown type"), this.schema = r6;
  }
};
function Hk(e6) {
  return e6[j] === "Any" || e6[j] === "Unknown";
}
function je(e6) {
  return e6 !== void 0;
}
function Zk(e6, r6, t6) {
  return true;
}
function Wk(e6, r6, t6) {
  if (!Me(t6) || je(e6.minItems) && !(t6.length >= e6.minItems) || je(e6.maxItems) && !(t6.length <= e6.maxItems) || !t6.every((i) => Hr(e6.items, r6, i)) || e6.uniqueItems === true && !(function() {
    let i = /* @__PURE__ */ new Set();
    for (let s6 of t6) {
      let u6 = eu(s6);
      if (i.has(u6)) return false;
      i.add(u6);
    }
    return true;
  })()) return false;
  if (!(je(e6.contains) || ye(e6.minContains) || ye(e6.maxContains))) return true;
  let n = je(e6.contains) ? e6.contains : gt(), o = t6.reduce((i, s6) => Hr(n, r6, s6) ? i + 1 : i, 0);
  return !(o === 0 || ye(e6.minContains) && o < e6.minContains || ye(e6.maxContains) && o > e6.maxContains);
}
function Xk(e6, r6, t6) {
  return Wh(t6);
}
function Jk(e6, r6, t6) {
  return !(!Gr2(t6) || je(e6.exclusiveMaximum) && !(t6 < e6.exclusiveMaximum) || je(e6.exclusiveMinimum) && !(t6 > e6.exclusiveMinimum) || je(e6.maximum) && !(t6 <= e6.maximum) || je(e6.minimum) && !(t6 >= e6.minimum) || je(e6.multipleOf) && t6 % e6.multipleOf !== BigInt(0));
}
function Yk(e6, r6, t6) {
  return Ji(t6);
}
function Kk(e6, r6, t6) {
  return Hr(e6.returns, r6, t6.prototype);
}
function qk(e6, r6, t6) {
  return !(!mn(t6) || je(e6.exclusiveMaximumTimestamp) && !(t6.getTime() < e6.exclusiveMaximumTimestamp) || je(e6.exclusiveMinimumTimestamp) && !(t6.getTime() > e6.exclusiveMinimumTimestamp) || je(e6.maximumTimestamp) && !(t6.getTime() <= e6.maximumTimestamp) || je(e6.minimumTimestamp) && !(t6.getTime() >= e6.minimumTimestamp) || je(e6.multipleOfTimestamp) && t6.getTime() % e6.multipleOfTimestamp !== 0);
}
function Qk(e6, r6, t6) {
  return Zs(t6);
}
function e_(e6, r6, t6) {
  return !(!Yh(t6) || je(e6.exclusiveMaximum) && !(t6 < e6.exclusiveMaximum) || je(e6.exclusiveMinimum) && !(t6 > e6.exclusiveMinimum) || je(e6.maximum) && !(t6 <= e6.maximum) || je(e6.minimum) && !(t6 >= e6.minimum) || je(e6.multipleOf) && t6 % e6.multipleOf !== 0);
}
function t_(e6, r6, t6) {
  let n = e6.allOf.every((o) => Hr(o, r6, t6));
  if (e6.unevaluatedProperties === false) {
    let o = new RegExp(Ja(e6)), i = Object.getOwnPropertyNames(t6).every((s6) => o.test(s6));
    return n && i;
  } else if (Ze(e6.unevaluatedProperties)) {
    let o = new RegExp(Ja(e6)), i = Object.getOwnPropertyNames(t6).every((s6) => o.test(s6) || Hr(e6.unevaluatedProperties, r6, t6[s6]));
    return n && i;
  } else return n;
}
function r_(e6, r6, t6) {
  return Xh(t6);
}
function n_(e6, r6, t6) {
  return t6 === e6.const;
}
function o_(e6, r6, t6) {
  return false;
}
function i_(e6, r6, t6) {
  return !Hr(e6.not, r6, t6);
}
function a_(e6, r6, t6) {
  return Ua(t6);
}
function s_(e6, r6, t6) {
  return !(!mt.IsNumberLike(t6) || je(e6.exclusiveMaximum) && !(t6 < e6.exclusiveMaximum) || je(e6.exclusiveMinimum) && !(t6 > e6.exclusiveMinimum) || je(e6.minimum) && !(t6 >= e6.minimum) || je(e6.maximum) && !(t6 <= e6.maximum) || je(e6.multipleOf) && t6 % e6.multipleOf !== 0);
}
function u_(e6, r6, t6) {
  if (!mt.IsObjectLike(t6) || je(e6.minProperties) && !(Object.getOwnPropertyNames(t6).length >= e6.minProperties) || je(e6.maxProperties) && !(Object.getOwnPropertyNames(t6).length <= e6.maxProperties)) return false;
  let n = Object.getOwnPropertyNames(e6.properties);
  for (let o of n) {
    let i = e6.properties[o];
    if (e6.required && e6.required.includes(o)) {
      if (!Hr(i, r6, t6[o]) || (Ka2(i) || Hk(i)) && !(o in t6)) return false;
    } else if (mt.IsExactOptionalProperty(t6, o) && !Hr(i, r6, t6[o])) return false;
  }
  if (e6.additionalProperties === false) {
    let o = Object.getOwnPropertyNames(t6);
    return e6.required && e6.required.length === n.length && o.length === n.length ? true : o.every((i) => n.includes(i));
  } else return typeof e6.additionalProperties == "object" ? Object.getOwnPropertyNames(t6).every((i) => n.includes(i) || Hr(e6.additionalProperties, r6, t6[i])) : true;
}
function l_(e6, r6, t6) {
  return Jh(t6);
}
function c_(e6, r6, t6) {
  if (!mt.IsRecordLike(t6) || je(e6.minProperties) && !(Object.getOwnPropertyNames(t6).length >= e6.minProperties) || je(e6.maxProperties) && !(Object.getOwnPropertyNames(t6).length <= e6.maxProperties)) return false;
  let [n, o] = Object.entries(e6.patternProperties)[0], i = new RegExp(n), s6 = Object.entries(t6).every(([c, d]) => i.test(c) ? Hr(o, r6, d) : true), u6 = typeof e6.additionalProperties == "object" ? Object.entries(t6).every(([c, d]) => i.test(c) ? true : Hr(e6.additionalProperties, r6, d)) : true, l = e6.additionalProperties === false ? Object.getOwnPropertyNames(t6).every((c) => i.test(c)) : true;
  return s6 && u6 && l;
}
function p_(e6, r6, t6) {
  return Hr(Qe(e6, r6), r6, t6);
}
function d_(e6, r6, t6) {
  let n = new RegExp(e6.source, e6.flags);
  return je(e6.minLength) && !(t6.length >= e6.minLength) || je(e6.maxLength) && !(t6.length <= e6.maxLength) ? false : n.test(t6);
}
function m_(e6, r6, t6) {
  return !He(t6) || je(e6.minLength) && !(t6.length >= e6.minLength) || je(e6.maxLength) && !(t6.length <= e6.maxLength) || je(e6.pattern) && !new RegExp(e6.pattern).test(t6) ? false : je(e6.format) ? Bn.Has(e6.format) ? Bn.Get(e6.format)(t6) : false : true;
}
function f_(e6, r6, t6) {
  return Ga(t6);
}
function h_(e6, r6, t6) {
  return He(t6) && new RegExp(e6.pattern).test(t6);
}
function g_(e6, r6, t6) {
  return Hr(Qe(e6, r6), r6, t6);
}
function y_(e6, r6, t6) {
  if (!Me(t6) || e6.items === void 0 && t6.length !== 0 || t6.length !== e6.maxItems) return false;
  if (!e6.items) return true;
  for (let n = 0; n < e6.items.length; n++) if (!Hr(e6.items[n], r6, t6[n])) return false;
  return true;
}
function b_(e6, r6, t6) {
  return Wt(t6);
}
function v_(e6, r6, t6) {
  return e6.anyOf.some((n) => Hr(n, r6, t6));
}
function x_(e6, r6, t6) {
  return !(!Pc(t6) || je(e6.maxByteLength) && !(t6.length <= e6.maxByteLength) || je(e6.minByteLength) && !(t6.length >= e6.minByteLength));
}
function I_(e6, r6, t6) {
  return true;
}
function E_(e6, r6, t6) {
  return mt.IsVoidLike(t6);
}
function C_(e6, r6, t6) {
  return Ar.Has(e6[j]) ? Ar.Get(e6[j])(e6, t6) : false;
}
function Hr(e6, r6, t6) {
  let n = je(e6.$id) ? [...r6, e6] : r6, o = e6;
  switch (o[j]) {
    case "Any":
      return Zk(o, n, t6);
    case "Array":
      return Wk(o, n, t6);
    case "AsyncIterator":
      return Xk(o, n, t6);
    case "BigInt":
      return Jk(o, n, t6);
    case "Boolean":
      return Yk(o, n, t6);
    case "Constructor":
      return Kk(o, n, t6);
    case "Date":
      return qk(o, n, t6);
    case "Function":
      return Qk(o, n, t6);
    case "Integer":
      return e_(o, n, t6);
    case "Intersect":
      return t_(o, n, t6);
    case "Iterator":
      return r_(o, n, t6);
    case "Literal":
      return n_(o, n, t6);
    case "Never":
      return o_(o, n, t6);
    case "Not":
      return i_(o, n, t6);
    case "Null":
      return a_(o, n, t6);
    case "Number":
      return s_(o, n, t6);
    case "Object":
      return u_(o, n, t6);
    case "Promise":
      return l_(o, n, t6);
    case "Record":
      return c_(o, n, t6);
    case "Ref":
      return p_(o, n, t6);
    case "RegExp":
      return d_(o, n, t6);
    case "String":
      return m_(o, n, t6);
    case "Symbol":
      return f_(o, n, t6);
    case "TemplateLiteral":
      return h_(o, n, t6);
    case "This":
      return g_(o, n, t6);
    case "Tuple":
      return y_(o, n, t6);
    case "Undefined":
      return b_(o, n, t6);
    case "Union":
      return v_(o, n, t6);
    case "Uint8Array":
      return x_(o, n, t6);
    case "Unknown":
      return I_(o, n, t6);
    case "Void":
      return E_(o, n, t6);
    default:
      if (!Ar.Has(o[j])) throw new wv(o);
      return C_(o, n, t6);
  }
}
function Le2(...e6) {
  return e6.length === 3 ? Hr(e6[0], e6[1], e6[2]) : Hr(e6[0], [], e6[1]);
}
var U;
(function(e6) {
  e6[e6.ArrayContains = 0] = "ArrayContains", e6[e6.ArrayMaxContains = 1] = "ArrayMaxContains", e6[e6.ArrayMaxItems = 2] = "ArrayMaxItems", e6[e6.ArrayMinContains = 3] = "ArrayMinContains", e6[e6.ArrayMinItems = 4] = "ArrayMinItems", e6[e6.ArrayUniqueItems = 5] = "ArrayUniqueItems", e6[e6.Array = 6] = "Array", e6[e6.AsyncIterator = 7] = "AsyncIterator", e6[e6.BigIntExclusiveMaximum = 8] = "BigIntExclusiveMaximum", e6[e6.BigIntExclusiveMinimum = 9] = "BigIntExclusiveMinimum", e6[e6.BigIntMaximum = 10] = "BigIntMaximum", e6[e6.BigIntMinimum = 11] = "BigIntMinimum", e6[e6.BigIntMultipleOf = 12] = "BigIntMultipleOf", e6[e6.BigInt = 13] = "BigInt", e6[e6.Boolean = 14] = "Boolean", e6[e6.DateExclusiveMaximumTimestamp = 15] = "DateExclusiveMaximumTimestamp", e6[e6.DateExclusiveMinimumTimestamp = 16] = "DateExclusiveMinimumTimestamp", e6[e6.DateMaximumTimestamp = 17] = "DateMaximumTimestamp", e6[e6.DateMinimumTimestamp = 18] = "DateMinimumTimestamp", e6[e6.DateMultipleOfTimestamp = 19] = "DateMultipleOfTimestamp", e6[e6.Date = 20] = "Date", e6[e6.Function = 21] = "Function", e6[e6.IntegerExclusiveMaximum = 22] = "IntegerExclusiveMaximum", e6[e6.IntegerExclusiveMinimum = 23] = "IntegerExclusiveMinimum", e6[e6.IntegerMaximum = 24] = "IntegerMaximum", e6[e6.IntegerMinimum = 25] = "IntegerMinimum", e6[e6.IntegerMultipleOf = 26] = "IntegerMultipleOf", e6[e6.Integer = 27] = "Integer", e6[e6.IntersectUnevaluatedProperties = 28] = "IntersectUnevaluatedProperties", e6[e6.Intersect = 29] = "Intersect", e6[e6.Iterator = 30] = "Iterator", e6[e6.Kind = 31] = "Kind", e6[e6.Literal = 32] = "Literal", e6[e6.Never = 33] = "Never", e6[e6.Not = 34] = "Not", e6[e6.Null = 35] = "Null", e6[e6.NumberExclusiveMaximum = 36] = "NumberExclusiveMaximum", e6[e6.NumberExclusiveMinimum = 37] = "NumberExclusiveMinimum", e6[e6.NumberMaximum = 38] = "NumberMaximum", e6[e6.NumberMinimum = 39] = "NumberMinimum", e6[e6.NumberMultipleOf = 40] = "NumberMultipleOf", e6[e6.Number = 41] = "Number", e6[e6.ObjectAdditionalProperties = 42] = "ObjectAdditionalProperties", e6[e6.ObjectMaxProperties = 43] = "ObjectMaxProperties", e6[e6.ObjectMinProperties = 44] = "ObjectMinProperties", e6[e6.ObjectRequiredProperty = 45] = "ObjectRequiredProperty", e6[e6.Object = 46] = "Object", e6[e6.Promise = 47] = "Promise", e6[e6.RegExp = 48] = "RegExp", e6[e6.StringFormatUnknown = 49] = "StringFormatUnknown", e6[e6.StringFormat = 50] = "StringFormat", e6[e6.StringMaxLength = 51] = "StringMaxLength", e6[e6.StringMinLength = 52] = "StringMinLength", e6[e6.StringPattern = 53] = "StringPattern", e6[e6.String = 54] = "String", e6[e6.Symbol = 55] = "Symbol", e6[e6.TupleLength = 56] = "TupleLength", e6[e6.Tuple = 57] = "Tuple", e6[e6.Uint8ArrayMaxByteLength = 58] = "Uint8ArrayMaxByteLength", e6[e6.Uint8ArrayMinByteLength = 59] = "Uint8ArrayMinByteLength", e6[e6.Uint8Array = 60] = "Uint8Array", e6[e6.Undefined = 61] = "Undefined", e6[e6.Union = 62] = "Union", e6[e6.Void = 63] = "Void";
})(U || (U = {}));
var Fv = class extends Se {
  constructor(r6) {
    super("Unknown type"), this.schema = r6;
  }
};
function qa(e6) {
  return e6.replace(/~/g, "~0").replace(/\//g, "~1");
}
function Ue(e6) {
  return e6 !== void 0;
}
var Mo = class {
  constructor(r6) {
    this.iterator = r6;
  }
  [Symbol.iterator]() {
    return this.iterator;
  }
  First() {
    let r6 = this.iterator.next();
    return r6.done ? void 0 : r6.value;
  }
};
function ee(e6, r6, t6, n, o = []) {
  return { type: e6, schema: r6, path: t6, value: n, message: e5()({ errorType: e6, path: t6, schema: r6, value: n, errors: o }), errors: o };
}
function* S_(e6, r6, t6, n) {
}
function* D_(e6, r6, t6, n) {
  if (!Me(n)) return yield ee(U.Array, e6, t6, n);
  Ue(e6.minItems) && !(n.length >= e6.minItems) && (yield ee(U.ArrayMinItems, e6, t6, n)), Ue(e6.maxItems) && !(n.length <= e6.maxItems) && (yield ee(U.ArrayMaxItems, e6, t6, n));
  for (let s6 = 0; s6 < n.length; s6++) yield* Zr2(e6.items, r6, `${t6}/${s6}`, n[s6]);
  if (e6.uniqueItems === true && !(function() {
    let s6 = /* @__PURE__ */ new Set();
    for (let u6 of n) {
      let l = eu(u6);
      if (s6.has(l)) return false;
      s6.add(l);
    }
    return true;
  })() && (yield ee(U.ArrayUniqueItems, e6, t6, n)), !(Ue(e6.contains) || Ue(e6.minContains) || Ue(e6.maxContains))) return;
  let o = Ue(e6.contains) ? e6.contains : gt(), i = n.reduce((s6, u6, l) => Zr2(o, r6, `${t6}${l}`, u6).next().done === true ? s6 + 1 : s6, 0);
  i === 0 && (yield ee(U.ArrayContains, e6, t6, n)), ye(e6.minContains) && i < e6.minContains && (yield ee(U.ArrayMinContains, e6, t6, n)), ye(e6.maxContains) && i > e6.maxContains && (yield ee(U.ArrayMaxContains, e6, t6, n));
}
function* T_(e6, r6, t6, n) {
  Wh(n) || (yield ee(U.AsyncIterator, e6, t6, n));
}
function* w_(e6, r6, t6, n) {
  if (!Gr2(n)) return yield ee(U.BigInt, e6, t6, n);
  Ue(e6.exclusiveMaximum) && !(n < e6.exclusiveMaximum) && (yield ee(U.BigIntExclusiveMaximum, e6, t6, n)), Ue(e6.exclusiveMinimum) && !(n > e6.exclusiveMinimum) && (yield ee(U.BigIntExclusiveMinimum, e6, t6, n)), Ue(e6.maximum) && !(n <= e6.maximum) && (yield ee(U.BigIntMaximum, e6, t6, n)), Ue(e6.minimum) && !(n >= e6.minimum) && (yield ee(U.BigIntMinimum, e6, t6, n)), Ue(e6.multipleOf) && n % e6.multipleOf !== BigInt(0) && (yield ee(U.BigIntMultipleOf, e6, t6, n));
}
function* F_(e6, r6, t6, n) {
  Ji(n) || (yield ee(U.Boolean, e6, t6, n));
}
function* M_(e6, r6, t6, n) {
  yield* Zr2(e6.returns, r6, t6, n.prototype);
}
function* A_(e6, r6, t6, n) {
  if (!mn(n)) return yield ee(U.Date, e6, t6, n);
  Ue(e6.exclusiveMaximumTimestamp) && !(n.getTime() < e6.exclusiveMaximumTimestamp) && (yield ee(U.DateExclusiveMaximumTimestamp, e6, t6, n)), Ue(e6.exclusiveMinimumTimestamp) && !(n.getTime() > e6.exclusiveMinimumTimestamp) && (yield ee(U.DateExclusiveMinimumTimestamp, e6, t6, n)), Ue(e6.maximumTimestamp) && !(n.getTime() <= e6.maximumTimestamp) && (yield ee(U.DateMaximumTimestamp, e6, t6, n)), Ue(e6.minimumTimestamp) && !(n.getTime() >= e6.minimumTimestamp) && (yield ee(U.DateMinimumTimestamp, e6, t6, n)), Ue(e6.multipleOfTimestamp) && n.getTime() % e6.multipleOfTimestamp !== 0 && (yield ee(U.DateMultipleOfTimestamp, e6, t6, n));
}
function* O_(e6, r6, t6, n) {
  Zs(n) || (yield ee(U.Function, e6, t6, n));
}
function* B_(e6, r6, t6, n) {
  if (!Yh(n)) return yield ee(U.Integer, e6, t6, n);
  Ue(e6.exclusiveMaximum) && !(n < e6.exclusiveMaximum) && (yield ee(U.IntegerExclusiveMaximum, e6, t6, n)), Ue(e6.exclusiveMinimum) && !(n > e6.exclusiveMinimum) && (yield ee(U.IntegerExclusiveMinimum, e6, t6, n)), Ue(e6.maximum) && !(n <= e6.maximum) && (yield ee(U.IntegerMaximum, e6, t6, n)), Ue(e6.minimum) && !(n >= e6.minimum) && (yield ee(U.IntegerMinimum, e6, t6, n)), Ue(e6.multipleOf) && n % e6.multipleOf !== 0 && (yield ee(U.IntegerMultipleOf, e6, t6, n));
}
function* P_(e6, r6, t6, n) {
  let o = false;
  for (let i of e6.allOf) for (let s6 of Zr2(i, r6, t6, n)) o = true, yield s6;
  if (o) return yield ee(U.Intersect, e6, t6, n);
  if (e6.unevaluatedProperties === false) {
    let i = new RegExp(Ja(e6));
    for (let s6 of Object.getOwnPropertyNames(n)) i.test(s6) || (yield ee(U.IntersectUnevaluatedProperties, e6, `${t6}/${s6}`, n));
  }
  if (typeof e6.unevaluatedProperties == "object") {
    let i = new RegExp(Ja(e6));
    for (let s6 of Object.getOwnPropertyNames(n)) if (!i.test(s6)) {
      let u6 = Zr2(e6.unevaluatedProperties, r6, `${t6}/${s6}`, n[s6]).next();
      u6.done || (yield u6.value);
    }
  }
}
function* k_(e6, r6, t6, n) {
  Xh(n) || (yield ee(U.Iterator, e6, t6, n));
}
function* __(e6, r6, t6, n) {
  n !== e6.const && (yield ee(U.Literal, e6, t6, n));
}
function* L_(e6, r6, t6, n) {
  yield ee(U.Never, e6, t6, n);
}
function* R_(e6, r6, t6, n) {
  Zr2(e6.not, r6, t6, n).next().done === true && (yield ee(U.Not, e6, t6, n));
}
function* N_(e6, r6, t6, n) {
  Ua(n) || (yield ee(U.Null, e6, t6, n));
}
function* $_(e6, r6, t6, n) {
  if (!mt.IsNumberLike(n)) return yield ee(U.Number, e6, t6, n);
  Ue(e6.exclusiveMaximum) && !(n < e6.exclusiveMaximum) && (yield ee(U.NumberExclusiveMaximum, e6, t6, n)), Ue(e6.exclusiveMinimum) && !(n > e6.exclusiveMinimum) && (yield ee(U.NumberExclusiveMinimum, e6, t6, n)), Ue(e6.maximum) && !(n <= e6.maximum) && (yield ee(U.NumberMaximum, e6, t6, n)), Ue(e6.minimum) && !(n >= e6.minimum) && (yield ee(U.NumberMinimum, e6, t6, n)), Ue(e6.multipleOf) && n % e6.multipleOf !== 0 && (yield ee(U.NumberMultipleOf, e6, t6, n));
}
function* j_(e6, r6, t6, n) {
  if (!mt.IsObjectLike(n)) return yield ee(U.Object, e6, t6, n);
  Ue(e6.minProperties) && !(Object.getOwnPropertyNames(n).length >= e6.minProperties) && (yield ee(U.ObjectMinProperties, e6, t6, n)), Ue(e6.maxProperties) && !(Object.getOwnPropertyNames(n).length <= e6.maxProperties) && (yield ee(U.ObjectMaxProperties, e6, t6, n));
  let o = Array.isArray(e6.required) ? e6.required : [], i = Object.getOwnPropertyNames(e6.properties), s6 = Object.getOwnPropertyNames(n);
  for (let u6 of o) s6.includes(u6) || (yield ee(U.ObjectRequiredProperty, e6.properties[u6], `${t6}/${qa(u6)}`, void 0));
  if (e6.additionalProperties === false) for (let u6 of s6) i.includes(u6) || (yield ee(U.ObjectAdditionalProperties, e6, `${t6}/${qa(u6)}`, n[u6]));
  if (typeof e6.additionalProperties == "object") for (let u6 of s6) i.includes(u6) || (yield* Zr2(e6.additionalProperties, r6, `${t6}/${qa(u6)}`, n[u6]));
  for (let u6 of i) {
    let l = e6.properties[u6];
    e6.required && e6.required.includes(u6) ? (yield* Zr2(l, r6, `${t6}/${qa(u6)}`, n[u6]), Ka2(e6) && !(u6 in n) && (yield ee(U.ObjectRequiredProperty, l, `${t6}/${qa(u6)}`, void 0))) : mt.IsExactOptionalProperty(n, u6) && (yield* Zr2(l, r6, `${t6}/${qa(u6)}`, n[u6]));
  }
}
function* U_(e6, r6, t6, n) {
  Jh(n) || (yield ee(U.Promise, e6, t6, n));
}
function* G_(e6, r6, t6, n) {
  if (!mt.IsRecordLike(n)) return yield ee(U.Object, e6, t6, n);
  Ue(e6.minProperties) && !(Object.getOwnPropertyNames(n).length >= e6.minProperties) && (yield ee(U.ObjectMinProperties, e6, t6, n)), Ue(e6.maxProperties) && !(Object.getOwnPropertyNames(n).length <= e6.maxProperties) && (yield ee(U.ObjectMaxProperties, e6, t6, n));
  let [o, i] = Object.entries(e6.patternProperties)[0], s6 = new RegExp(o);
  for (let [u6, l] of Object.entries(n)) s6.test(u6) && (yield* Zr2(i, r6, `${t6}/${qa(u6)}`, l));
  if (typeof e6.additionalProperties == "object") for (let [u6, l] of Object.entries(n)) s6.test(u6) || (yield* Zr2(e6.additionalProperties, r6, `${t6}/${qa(u6)}`, l));
  if (e6.additionalProperties === false) {
    for (let [u6, l] of Object.entries(n)) if (!s6.test(u6)) return yield ee(U.ObjectAdditionalProperties, e6, `${t6}/${qa(u6)}`, l);
  }
}
function* z_(e6, r6, t6, n) {
  yield* Zr2(Qe(e6, r6), r6, t6, n);
}
function* V_(e6, r6, t6, n) {
  if (!He(n)) return yield ee(U.String, e6, t6, n);
  if (Ue(e6.minLength) && !(n.length >= e6.minLength) && (yield ee(U.StringMinLength, e6, t6, n)), Ue(e6.maxLength) && !(n.length <= e6.maxLength) && (yield ee(U.StringMaxLength, e6, t6, n)), !new RegExp(e6.source, e6.flags).test(n)) return yield ee(U.RegExp, e6, t6, n);
}
function* H_(e6, r6, t6, n) {
  if (!He(n)) return yield ee(U.String, e6, t6, n);
  Ue(e6.minLength) && !(n.length >= e6.minLength) && (yield ee(U.StringMinLength, e6, t6, n)), Ue(e6.maxLength) && !(n.length <= e6.maxLength) && (yield ee(U.StringMaxLength, e6, t6, n)), He(e6.pattern) && (new RegExp(e6.pattern).test(n) || (yield ee(U.StringPattern, e6, t6, n))), He(e6.format) && (Bn.Has(e6.format) ? Bn.Get(e6.format)(n) || (yield ee(U.StringFormat, e6, t6, n)) : yield ee(U.StringFormatUnknown, e6, t6, n));
}
function* Z_(e6, r6, t6, n) {
  Ga(n) || (yield ee(U.Symbol, e6, t6, n));
}
function* W_(e6, r6, t6, n) {
  if (!He(n)) return yield ee(U.String, e6, t6, n);
  new RegExp(e6.pattern).test(n) || (yield ee(U.StringPattern, e6, t6, n));
}
function* X_(e6, r6, t6, n) {
  yield* Zr2(Qe(e6, r6), r6, t6, n);
}
function* J_(e6, r6, t6, n) {
  if (!Me(n)) return yield ee(U.Tuple, e6, t6, n);
  if (e6.items === void 0 && n.length !== 0) return yield ee(U.TupleLength, e6, t6, n);
  if (n.length !== e6.maxItems) return yield ee(U.TupleLength, e6, t6, n);
  if (e6.items) for (let o = 0; o < e6.items.length; o++) yield* Zr2(e6.items[o], r6, `${t6}/${o}`, n[o]);
}
function* Y_(e6, r6, t6, n) {
  Wt(n) || (yield ee(U.Undefined, e6, t6, n));
}
function* K_(e6, r6, t6, n) {
  if (Le2(e6, r6, n)) return;
  let o = e6.anyOf.map((i) => new Mo(Zr2(i, r6, t6, n)));
  yield ee(U.Union, e6, t6, n, o);
}
function* q_(e6, r6, t6, n) {
  if (!Pc(n)) return yield ee(U.Uint8Array, e6, t6, n);
  Ue(e6.maxByteLength) && !(n.length <= e6.maxByteLength) && (yield ee(U.Uint8ArrayMaxByteLength, e6, t6, n)), Ue(e6.minByteLength) && !(n.length >= e6.minByteLength) && (yield ee(U.Uint8ArrayMinByteLength, e6, t6, n));
}
function* Q_(e6, r6, t6, n) {
}
function* eL(e6, r6, t6, n) {
  mt.IsVoidLike(n) || (yield ee(U.Void, e6, t6, n));
}
function* tL(e6, r6, t6, n) {
  Ar.Get(e6[j])(e6, n) || (yield ee(U.Kind, e6, t6, n));
}
function* Zr2(e6, r6, t6, n) {
  let o = Ue(e6.$id) ? [...r6, e6] : r6, i = e6;
  switch (i[j]) {
    case "Any":
      return yield* S_(i, o, t6, n);
    case "Array":
      return yield* D_(i, o, t6, n);
    case "AsyncIterator":
      return yield* T_(i, o, t6, n);
    case "BigInt":
      return yield* w_(i, o, t6, n);
    case "Boolean":
      return yield* F_(i, o, t6, n);
    case "Constructor":
      return yield* M_(i, o, t6, n);
    case "Date":
      return yield* A_(i, o, t6, n);
    case "Function":
      return yield* O_(i, o, t6, n);
    case "Integer":
      return yield* B_(i, o, t6, n);
    case "Intersect":
      return yield* P_(i, o, t6, n);
    case "Iterator":
      return yield* k_(i, o, t6, n);
    case "Literal":
      return yield* __(i, o, t6, n);
    case "Never":
      return yield* L_(i, o, t6, n);
    case "Not":
      return yield* R_(i, o, t6, n);
    case "Null":
      return yield* N_(i, o, t6, n);
    case "Number":
      return yield* $_(i, o, t6, n);
    case "Object":
      return yield* j_(i, o, t6, n);
    case "Promise":
      return yield* U_(i, o, t6, n);
    case "Record":
      return yield* G_(i, o, t6, n);
    case "Ref":
      return yield* z_(i, o, t6, n);
    case "RegExp":
      return yield* V_(i, o, t6, n);
    case "String":
      return yield* H_(i, o, t6, n);
    case "Symbol":
      return yield* Z_(i, o, t6, n);
    case "TemplateLiteral":
      return yield* W_(i, o, t6, n);
    case "This":
      return yield* X_(i, o, t6, n);
    case "Tuple":
      return yield* J_(i, o, t6, n);
    case "Undefined":
      return yield* Y_(i, o, t6, n);
    case "Union":
      return yield* K_(i, o, t6, n);
    case "Uint8Array":
      return yield* q_(i, o, t6, n);
    case "Unknown":
      return yield* Q_(i, o, t6, n);
    case "Void":
      return yield* eL(i, o, t6, n);
    default:
      if (!Ar.Has(i[j])) throw new Fv(e6);
      return yield* tL(i, o, t6, n);
  }
}
function ea(...e6) {
  let r6 = e6.length === 3 ? Zr2(e6[0], e6[1], "", e6[2]) : Zr2(e6[0], [], "", e6[1]);
  return new Mo(r6);
}
$i();
$i();
var rL = function(e6, r6, t6, n, o) {
  if (n === "m") throw new TypeError("Private method is not writable");
  if (n === "a" && !o) throw new TypeError("Private accessor was defined without a setter");
  if (typeof r6 == "function" ? e6 !== r6 || !o : !r6.has(e6)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return n === "a" ? o.call(e6, t6) : o ? o.value = t6 : r6.set(e6, t6), t6;
};
var i52 = function(e6, r6, t6, n) {
  if (t6 === "a" && !n) throw new TypeError("Private accessor was defined without a getter");
  if (typeof r6 == "function" ? e6 !== r6 || !n : !r6.has(e6)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return t6 === "m" ? n : t6 === "a" ? n.call(e6) : n ? n.value : r6.get(e6);
};
var Mv;
var wg;
var a5;
var Av = class extends Se {
  constructor(r6) {
    let t6 = r6.First();
    super(t6 === void 0 ? "Invalid Value" : t6.message), Mv.add(this), wg.set(this, void 0), rL(this, wg, r6, "f"), this.error = t6;
  }
  Errors() {
    return new Mo(i52(this, Mv, "m", a5).call(this));
  }
};
wg = /* @__PURE__ */ new WeakMap(), Mv = /* @__PURE__ */ new WeakSet(), a5 = function* () {
  this.error && (yield this.error), yield* i52(this, wg, "f");
};
function o5(e6, r6, t6) {
  if (!Le2(e6, r6, t6)) throw new Av(ea(e6, r6, t6));
}
function Fg(...e6) {
  return e6.length === 3 ? o5(e6[0], e6[1], e6[2]) : o5(e6[0], [], e6[1]);
}
$i();
$i();
$i();
function nL(e6) {
  let r6 = {};
  for (let t6 of Object.getOwnPropertyNames(e6)) r6[t6] = et(e6[t6]);
  for (let t6 of Object.getOwnPropertySymbols(e6)) r6[t6] = et(e6[t6]);
  return r6;
}
function oL(e6) {
  return e6.map((r6) => et(r6));
}
function iL(e6) {
  return e6.slice();
}
function aL(e6) {
  return new Map(et([...e6.entries()]));
}
function sL(e6) {
  return new Set(et([...e6.entries()]));
}
function uL(e6) {
  return new Date(e6.toISOString());
}
function et(e6) {
  if (Me(e6)) return oL(e6);
  if (mn(e6)) return uL(e6);
  if (Io(e6)) return iL(e6);
  if (zE(e6)) return aL(e6);
  if (VE(e6)) return sL(e6);
  if (Be(e6)) return nL(e6);
  if (zr(e6)) return e6;
  throw new Error("ValueClone: Unable to clone value");
}
var Qn = class extends Se {
  constructor(r6, t6) {
    super(t6), this.schema = r6;
  }
};
function tt(e6) {
  return Zs(e6) ? e6() : et(e6);
}
function lL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : {};
}
function cL(e6, r6) {
  if (e6.uniqueItems === true && !Te2(e6, "default")) throw new Qn(e6, "Array with the uniqueItems constraint requires a default value");
  if ("contains" in e6 && !Te2(e6, "default")) throw new Qn(e6, "Array with the contains constraint requires a default value");
  return "default" in e6 ? tt(e6.default) : e6.minItems !== void 0 ? Array.from({ length: e6.minItems }).map((t6) => eo(e6.items, r6)) : [];
}
function pL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : (async function* () {
  })();
}
function dL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : BigInt(0);
}
function mL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : false;
}
function fL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  {
    let t6 = eo(e6.returns, r6);
    return typeof t6 == "object" && !Array.isArray(t6) ? class {
      constructor() {
        for (let [n, o] of Object.entries(t6)) {
          let i = this;
          i[n] = o;
        }
      }
    } : class {
    };
  }
}
function hL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.minimumTimestamp !== void 0 ? new Date(e6.minimumTimestamp) : /* @__PURE__ */ new Date();
}
function gL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : () => eo(e6.returns, r6);
}
function yL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.minimum !== void 0 ? e6.minimum : 0;
}
function bL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  {
    let t6 = e6.allOf.reduce((n, o) => {
      let i = eo(o, r6);
      return typeof i == "object" ? { ...n, ...i } : i;
    }, {});
    if (!Le2(e6, r6, t6)) throw new Qn(e6, "Intersect produced invalid value. Consider using a default value.");
    return t6;
  }
}
function vL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : (function* () {
  })();
}
function xL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.const;
}
function IL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  throw new Qn(e6, "Never types cannot be created. Consider using a default value.");
}
function EL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  throw new Qn(e6, "Not types must have a default value");
}
function CL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : null;
}
function SL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.minimum !== void 0 ? e6.minimum : 0;
}
function DL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  {
    let t6 = new Set(e6.required), n = {};
    for (let [o, i] of Object.entries(e6.properties)) t6.has(o) && (n[o] = eo(i, r6));
    return n;
  }
}
function TL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : Promise.resolve(eo(e6.item, r6));
}
function wL(e6, r6) {
  let [t6, n] = Object.entries(e6.patternProperties)[0];
  if (Te2(e6, "default")) return tt(e6.default);
  if (t6 === Wa || t6 === Za) return {};
  {
    let o = t6.slice(1, t6.length - 1).split("|"), i = {};
    for (let s6 of o) i[s6] = eo(n, r6);
    return i;
  }
}
function FL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : eo(Qe(e6, r6), r6);
}
function ML(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  throw new Qn(e6, "RegExp types cannot be created. Consider using a default value.");
}
function AL(e6, r6) {
  if (e6.pattern !== void 0) {
    if (Te2(e6, "default")) return tt(e6.default);
    throw new Qn(e6, "String types with patterns must specify a default value");
  } else if (e6.format !== void 0) {
    if (Te2(e6, "default")) return tt(e6.default);
    throw new Qn(e6, "String types with formats must specify a default value");
  } else return Te2(e6, "default") ? tt(e6.default) : e6.minLength !== void 0 ? Array.from({ length: e6.minLength }).map(() => " ").join("") : "";
}
function OL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : "value" in e6 ? Symbol.for(e6.value) : Symbol();
}
function BL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  if (!tg(e6)) throw new Qn(e6, "Can only create template literals that produce a finite variants. Consider using a default value.");
  return jc(e6)[0];
}
function PL(e6, r6) {
  if (s52++ > UL) throw new Qn(e6, "Cannot create recursive type as it appears possibly infinite. Consider using a default.");
  return Te2(e6, "default") ? tt(e6.default) : eo(Qe(e6, r6), r6);
}
function kL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.items === void 0 ? [] : Array.from({ length: e6.minItems }).map((t6, n) => eo(e6.items[n], r6));
}
function _L(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
}
function LL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  if (e6.anyOf.length === 0) throw new Error("ValueCreate.Union: Cannot create Union with zero variants");
  return eo(e6.anyOf[0], r6);
}
function RL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : e6.minByteLength !== void 0 ? new Uint8Array(e6.minByteLength) : new Uint8Array(0);
}
function NL(e6, r6) {
  return Te2(e6, "default") ? tt(e6.default) : {};
}
function $L(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
}
function jL(e6, r6) {
  if (Te2(e6, "default")) return tt(e6.default);
  throw new Error("User defined types must specify a default value");
}
function eo(e6, r6) {
  let t6 = Fo(e6, r6), n = e6;
  switch (n[j]) {
    case "Any":
      return lL(n, t6);
    case "Array":
      return cL(n, t6);
    case "AsyncIterator":
      return pL(n, t6);
    case "BigInt":
      return dL(n, t6);
    case "Boolean":
      return mL(n, t6);
    case "Constructor":
      return fL(n, t6);
    case "Date":
      return hL(n, t6);
    case "Function":
      return gL(n, t6);
    case "Integer":
      return yL(n, t6);
    case "Intersect":
      return bL(n, t6);
    case "Iterator":
      return vL(n, t6);
    case "Literal":
      return xL(n, t6);
    case "Never":
      return IL(n, t6);
    case "Not":
      return EL(n, t6);
    case "Null":
      return CL(n, t6);
    case "Number":
      return SL(n, t6);
    case "Object":
      return DL(n, t6);
    case "Promise":
      return TL(n, t6);
    case "Record":
      return wL(n, t6);
    case "Ref":
      return FL(n, t6);
    case "RegExp":
      return ML(n, t6);
    case "String":
      return AL(n, t6);
    case "Symbol":
      return OL(n, t6);
    case "TemplateLiteral":
      return BL(n, t6);
    case "This":
      return PL(n, t6);
    case "Tuple":
      return kL(n, t6);
    case "Undefined":
      return _L(n, t6);
    case "Union":
      return LL(n, t6);
    case "Uint8Array":
      return RL(n, t6);
    case "Unknown":
      return NL(n, t6);
    case "Void":
      return $L(n, t6);
    default:
      if (!Ar.Has(n[j])) throw new Qn(n, "Unknown type");
      return jL(n, t6);
  }
}
var UL = 512;
var s52 = 0;
function Ao(...e6) {
  return s52 = 0, e6.length === 2 ? eo(e6[0], e6[1]) : eo(e6[0], []);
}
var Mg = class extends Se {
  constructor(r6, t6) {
    super(t6), this.schema = r6;
  }
};
function GL(e6, r6, t6) {
  if (e6[j] === "Object" && typeof t6 == "object" && !Ua(t6)) {
    let n = e6, o = Object.getOwnPropertyNames(t6), i = Object.entries(n.properties), [s6, u6] = [1 / i.length, i.length];
    return i.reduce((l, [c, d]) => {
      let f = d[j] === "Literal" && d.const === t6[c] ? u6 : 0, h = Le2(d, r6, t6[c]) ? s6 : 0, b = o.includes(c) ? s6 : 0;
      return l + (f + h + b);
    }, 0);
  } else return Le2(e6, r6, t6) ? 1 : 0;
}
function zL(e6, r6, t6) {
  let n = e6.anyOf.map((s6) => Qe(s6, r6)), [o, i] = [n[0], 0];
  for (let s6 of n) {
    let u6 = GL(s6, r6, t6);
    u6 > i && (o = s6, i = u6);
  }
  return o;
}
function VL(e6, r6, t6) {
  if ("default" in e6) return typeof t6 == "function" ? e6.default : et(e6.default);
  {
    let n = zL(e6, r6, t6);
    return Ov(n, r6, t6);
  }
}
function HL(e6, r6, t6) {
  return Le2(e6, r6, t6) ? et(t6) : Ao(e6, r6);
}
function ZL(e6, r6, t6) {
  return Le2(e6, r6, t6) ? t6 : Ao(e6, r6);
}
function WL(e6, r6, t6) {
  if (Le2(e6, r6, t6)) return et(t6);
  let n = Me(t6) ? et(t6) : Ao(e6, r6), o = ye(e6.minItems) && n.length < e6.minItems ? [...n, ...Array.from({ length: e6.minItems - n.length }, () => null)] : n, s6 = (ye(e6.maxItems) && o.length > e6.maxItems ? o.slice(0, e6.maxItems) : o).map((l) => ta(e6.items, r6, l));
  if (e6.uniqueItems !== true) return s6;
  let u6 = [...new Set(s6)];
  if (!Le2(e6, r6, u6)) throw new Mg(e6, "Array cast produced invalid data due to uniqueItems constraint");
  return u6;
}
function XL(e6, r6, t6) {
  if (Le2(e6, r6, t6)) return Ao(e6, r6);
  let n = new Set(e6.returns.required || []), o = function() {
  };
  for (let [i, s6] of Object.entries(e6.returns.properties)) !n.has(i) && t6.prototype[i] === void 0 || (o.prototype[i] = ta(s6, r6, t6.prototype[i]));
  return o;
}
function JL(e6, r6, t6) {
  let n = Ao(e6, r6), o = Be(n) && Be(t6) ? { ...n, ...t6 } : t6;
  return Le2(e6, r6, o) ? o : Ao(e6, r6);
}
function YL(e6, r6, t6) {
  throw new Mg(e6, "Never types cannot be cast");
}
function KL(e6, r6, t6) {
  if (Le2(e6, r6, t6)) return t6;
  if (t6 === null || typeof t6 != "object") return Ao(e6, r6);
  let n = new Set(e6.required || []), o = {};
  for (let [i, s6] of Object.entries(e6.properties)) !n.has(i) && t6[i] === void 0 || (o[i] = ta(s6, r6, t6[i]));
  if (typeof e6.additionalProperties == "object") {
    let i = Object.getOwnPropertyNames(e6.properties);
    for (let s6 of Object.getOwnPropertyNames(t6)) i.includes(s6) || (o[s6] = ta(e6.additionalProperties, r6, t6[s6]));
  }
  return o;
}
function qL(e6, r6, t6) {
  if (Le2(e6, r6, t6)) return et(t6);
  if (t6 === null || typeof t6 != "object" || Array.isArray(t6) || t6 instanceof Date) return Ao(e6, r6);
  let n = Object.getOwnPropertyNames(e6.patternProperties)[0], o = e6.patternProperties[n], i = {};
  for (let [s6, u6] of Object.entries(t6)) i[s6] = ta(o, r6, u6);
  return i;
}
function QL(e6, r6, t6) {
  return ta(Qe(e6, r6), r6, t6);
}
function eR(e6, r6, t6) {
  return ta(Qe(e6, r6), r6, t6);
}
function tR(e6, r6, t6) {
  return Le2(e6, r6, t6) ? et(t6) : Me(t6) ? e6.items === void 0 ? [] : e6.items.map((n, o) => ta(n, r6, t6[o])) : Ao(e6, r6);
}
function rR(e6, r6, t6) {
  return Le2(e6, r6, t6) ? et(t6) : VL(e6, r6, t6);
}
function ta(e6, r6, t6) {
  let n = He(e6.$id) ? [...r6, e6] : r6, o = e6;
  switch (e6[j]) {
    case "Array":
      return WL(o, n, t6);
    case "Constructor":
      return XL(o, n, t6);
    case "Intersect":
      return JL(o, n, t6);
    case "Never":
      return YL(o, n, t6);
    case "Object":
      return KL(o, n, t6);
    case "Record":
      return qL(o, n, t6);
    case "Ref":
      return QL(o, n, t6);
    case "This":
      return eR(o, n, t6);
    case "Tuple":
      return tR(o, n, t6);
    case "Union":
      return rR(o, n, t6);
    case "Date":
    case "Symbol":
    case "Uint8Array":
      return HL(e6, r6, t6);
    default:
      return ZL(o, n, t6);
  }
}
function Ov(...e6) {
  return e6.length === 3 ? ta(e6[0], e6[1], e6[2]) : ta(e6[0], [], e6[1]);
}
$i();
function nR(e6) {
  return Xs(e6) && e6[j] !== "Unsafe";
}
function oR(e6, r6, t6) {
  return Me(t6) ? t6.map((n) => to(e6.items, r6, n)) : t6;
}
function iR(e6, r6, t6) {
  let n = e6.unevaluatedProperties, i = e6.allOf.map((u6) => to(u6, r6, et(t6))).reduce((u6, l) => Be(l) ? { ...u6, ...l } : l, {});
  if (!Be(t6) || !Be(i) || !Xs(n)) return i;
  let s6 = Or(e6);
  for (let u6 of Object.getOwnPropertyNames(t6)) s6.includes(u6) || Le2(n, r6, t6[u6]) && (i[u6] = to(n, r6, t6[u6]));
  return i;
}
function aR(e6, r6, t6) {
  if (!Be(t6) || Me(t6)) return t6;
  let n = e6.additionalProperties;
  for (let o of Object.getOwnPropertyNames(t6)) {
    if (Te2(e6.properties, o)) {
      t6[o] = to(e6.properties[o], r6, t6[o]);
      continue;
    }
    if (Xs(n) && Le2(n, r6, t6[o])) {
      t6[o] = to(n, r6, t6[o]);
      continue;
    }
    delete t6[o];
  }
  return t6;
}
function sR(e6, r6, t6) {
  if (!Be(t6)) return t6;
  let n = e6.additionalProperties, o = Object.getOwnPropertyNames(t6), [i, s6] = Object.entries(e6.patternProperties)[0], u6 = new RegExp(i);
  for (let l of o) {
    if (u6.test(l)) {
      t6[l] = to(s6, r6, t6[l]);
      continue;
    }
    if (Xs(n) && Le2(n, r6, t6[l])) {
      t6[l] = to(n, r6, t6[l]);
      continue;
    }
    delete t6[l];
  }
  return t6;
}
function uR(e6, r6, t6) {
  return to(Qe(e6, r6), r6, t6);
}
function lR(e6, r6, t6) {
  return to(Qe(e6, r6), r6, t6);
}
function cR(e6, r6, t6) {
  if (!Me(t6)) return t6;
  if (Wt(e6.items)) return [];
  let n = Math.min(t6.length, e6.items.length);
  for (let o = 0; o < n; o++) t6[o] = to(e6.items[o], r6, t6[o]);
  return t6.length > n ? t6.slice(0, n) : t6;
}
function pR(e6, r6, t6) {
  for (let n of e6.anyOf) if (nR(n) && Le2(n, r6, t6)) return to(n, r6, t6);
  return t6;
}
function to(e6, r6, t6) {
  let n = He(e6.$id) ? [...r6, e6] : r6, o = e6;
  switch (o[j]) {
    case "Array":
      return oR(o, n, t6);
    case "Intersect":
      return iR(o, n, t6);
    case "Object":
      return aR(o, n, t6);
    case "Record":
      return sR(o, n, t6);
    case "Ref":
      return uR(o, n, t6);
    case "This":
      return lR(o, n, t6);
    case "Tuple":
      return cR(o, n, t6);
    case "Union":
      return pR(o, n, t6);
    default:
      return t6;
  }
}
function Ag(...e6) {
  return e6.length === 3 ? to(e6[0], e6[1], e6[2]) : to(e6[0], [], e6[1]);
}
$i();
function Og(e6) {
  return He(e6) && !isNaN(e6) && !isNaN(parseFloat(e6));
}
function dR(e6) {
  return Gr2(e6) || Ji(e6) || ye(e6);
}
function Zm(e6) {
  return e6 === true || ye(e6) && e6 === 1 || Gr2(e6) && e6 === BigInt("1") || He(e6) && (e6.toLowerCase() === "true" || e6 === "1");
}
function Wm(e6) {
  return e6 === false || ye(e6) && (e6 === 0 || Object.is(e6, -0)) || Gr2(e6) && e6 === BigInt("0") || He(e6) && (e6.toLowerCase() === "false" || e6 === "0" || e6 === "-0");
}
function mR(e6) {
  return He(e6) && /^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e6);
}
function fR(e6) {
  return He(e6) && /^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e6);
}
function hR(e6) {
  return He(e6) && /^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e6);
}
function gR(e6) {
  return He(e6) && /^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e6);
}
function yR(e6) {
  return He(e6) && /^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e6);
}
function bR(e6, r6) {
  let t6 = l52(e6);
  return t6 === r6 ? t6 : e6;
}
function vR(e6, r6) {
  let t6 = c5(e6);
  return t6 === r6 ? t6 : e6;
}
function xR(e6, r6) {
  let t6 = u5(e6);
  return t6 === r6 ? t6 : e6;
}
function IR(e6, r6) {
  return He(e6.const) ? bR(r6, e6.const) : ye(e6.const) ? vR(r6, e6.const) : Ji(e6.const) ? xR(r6, e6.const) : r6;
}
function u5(e6) {
  return Zm(e6) ? true : Wm(e6) ? false : e6;
}
function ER(e6) {
  let r6 = (t6) => t6.split(".")[0];
  return Og(e6) ? BigInt(r6(e6)) : ye(e6) ? BigInt(Math.trunc(e6)) : Wm(e6) ? BigInt(0) : Zm(e6) ? BigInt(1) : e6;
}
function l52(e6) {
  return dR(e6) ? e6.toString() : Ga(e6) && e6.description !== void 0 ? e6.description.toString() : e6;
}
function c5(e6) {
  return Og(e6) ? parseFloat(e6) : Zm(e6) ? 1 : Wm(e6) ? 0 : e6;
}
function CR(e6) {
  return Og(e6) ? parseInt(e6) : ye(e6) ? e6 | 0 : Zm(e6) ? 1 : Wm(e6) ? 0 : e6;
}
function SR(e6) {
  return He(e6) && e6.toLowerCase() === "null" ? null : e6;
}
function DR(e6) {
  return He(e6) && e6 === "undefined" ? void 0 : e6;
}
function TR(e6) {
  return mn(e6) ? e6 : ye(e6) ? new Date(e6) : Zm(e6) ? /* @__PURE__ */ new Date(1) : Wm(e6) ? /* @__PURE__ */ new Date(0) : Og(e6) ? new Date(parseInt(e6)) : fR(e6) ? /* @__PURE__ */ new Date(`1970-01-01T${e6}.000Z`) : mR(e6) ? /* @__PURE__ */ new Date(`1970-01-01T${e6}`) : gR(e6) ? /* @__PURE__ */ new Date(`${e6}.000Z`) : hR(e6) ? new Date(e6) : yR(e6) ? /* @__PURE__ */ new Date(`${e6}T00:00:00.000Z`) : e6;
}
function wR(e6, r6, t6) {
  return (Me(t6) ? t6 : [t6]).map((o) => ra(e6.items, r6, o));
}
function FR(e6, r6, t6) {
  return ER(t6);
}
function MR(e6, r6, t6) {
  return u5(t6);
}
function AR(e6, r6, t6) {
  return TR(t6);
}
function OR(e6, r6, t6) {
  return CR(t6);
}
function BR(e6, r6, t6) {
  return e6.allOf.reduce((n, o) => ra(o, r6, n), t6);
}
function PR(e6, r6, t6) {
  return IR(e6, t6);
}
function kR(e6, r6, t6) {
  return SR(t6);
}
function _R(e6, r6, t6) {
  return c5(t6);
}
function LR(e6, r6, t6) {
  if (!Be(t6)) return t6;
  for (let n of Object.getOwnPropertyNames(e6.properties)) Te2(t6, n) && (t6[n] = ra(e6.properties[n], r6, t6[n]));
  return t6;
}
function RR(e6, r6, t6) {
  if (!Be(t6)) return t6;
  let o = Object.getOwnPropertyNames(e6.patternProperties)[0], i = e6.patternProperties[o];
  for (let [s6, u6] of Object.entries(t6)) t6[s6] = ra(i, r6, u6);
  return t6;
}
function NR(e6, r6, t6) {
  return ra(Qe(e6, r6), r6, t6);
}
function $R(e6, r6, t6) {
  return l52(t6);
}
function jR(e6, r6, t6) {
  return He(t6) || ye(t6) ? Symbol(t6) : t6;
}
function UR(e6, r6, t6) {
  return ra(Qe(e6, r6), r6, t6);
}
function GR(e6, r6, t6) {
  return Me(t6) && !Wt(e6.items) ? t6.map((o, i) => i < e6.items.length ? ra(e6.items[i], r6, o) : o) : t6;
}
function zR(e6, r6, t6) {
  return DR(t6);
}
function VR(e6, r6, t6) {
  for (let n of e6.anyOf) {
    let o = ra(n, r6, et(t6));
    if (Le2(n, r6, o)) return o;
  }
  return t6;
}
function ra(e6, r6, t6) {
  let n = Fo(e6, r6), o = e6;
  switch (e6[j]) {
    case "Array":
      return wR(o, n, t6);
    case "BigInt":
      return FR(o, n, t6);
    case "Boolean":
      return MR(o, n, t6);
    case "Date":
      return AR(o, n, t6);
    case "Integer":
      return OR(o, n, t6);
    case "Intersect":
      return BR(o, n, t6);
    case "Literal":
      return PR(o, n, t6);
    case "Null":
      return kR(o, n, t6);
    case "Number":
      return _R(o, n, t6);
    case "Object":
      return LR(o, n, t6);
    case "Record":
      return RR(o, n, t6);
    case "Ref":
      return NR(o, n, t6);
    case "String":
      return $R(o, n, t6);
    case "Symbol":
      return jR(o, n, t6);
    case "This":
      return UR(o, n, t6);
    case "Tuple":
      return GR(o, n, t6);
    case "Undefined":
      return zR(o, n, t6);
    case "Union":
      return VR(o, n, t6);
    default:
      return t6;
  }
}
function Bg(...e6) {
  return e6.length === 3 ? ra(e6[0], e6[1], e6[2]) : ra(e6[0], [], e6[1]);
}
$i();
$i();
var rp = class extends Se {
  constructor(r6, t6, n) {
    super("Unable to decode value as it does not match the expected schema"), this.schema = r6, this.value = t6, this.error = n;
  }
};
var tl2 = class extends Se {
  constructor(r6, t6, n, o) {
    super(o instanceof Error ? o.message : "Unknown error"), this.schema = r6, this.path = t6, this.value = n, this.error = o;
  }
};
function Xt(e6, r6, t6) {
  try {
    return Pt2(e6) ? e6[jt].Decode(t6) : t6;
  } catch (n) {
    throw new tl2(e6, r6, t6, n);
  }
}
function HR(e6, r6, t6, n) {
  return Me(n) ? Xt(e6, t6, n.map((o, i) => na(e6.items, r6, `${t6}/${i}`, o))) : Xt(e6, t6, n);
}
function ZR(e6, r6, t6, n) {
  if (!Be(n) || zr(n)) return Xt(e6, t6, n);
  let o = Ks(e6), i = o.map((d) => d[0]), s6 = { ...n };
  for (let [d, f] of o) d in s6 && (s6[d] = na(f, r6, `${t6}/${d}`, s6[d]));
  if (!Pt2(e6.unevaluatedProperties)) return Xt(e6, t6, s6);
  let u6 = Object.getOwnPropertyNames(s6), l = e6.unevaluatedProperties, c = { ...s6 };
  for (let d of u6) i.includes(d) || (c[d] = Xt(l, `${t6}/${d}`, c[d]));
  return Xt(e6, t6, c);
}
function WR(e6, r6, t6, n) {
  return Xt(e6, t6, na(e6.not, r6, t6, n));
}
function XR(e6, r6, t6, n) {
  if (!Be(n)) return Xt(e6, t6, n);
  let o = Or(e6), i = { ...n };
  for (let c of o) Te2(i, c) && (Wt(i[c]) && (!_c(e6.properties[c]) || mt.IsExactOptionalProperty(i, c)) || (i[c] = na(e6.properties[c], r6, `${t6}/${c}`, i[c])));
  if (!Ze(e6.additionalProperties)) return Xt(e6, t6, i);
  let s6 = Object.getOwnPropertyNames(i), u6 = e6.additionalProperties, l = { ...i };
  for (let c of s6) o.includes(c) || (l[c] = Xt(u6, `${t6}/${c}`, l[c]));
  return Xt(e6, t6, l);
}
function JR(e6, r6, t6, n) {
  if (!Be(n)) return Xt(e6, t6, n);
  let o = Object.getOwnPropertyNames(e6.patternProperties)[0], i = new RegExp(o), s6 = { ...n };
  for (let d of Object.getOwnPropertyNames(n)) i.test(d) && (s6[d] = na(e6.patternProperties[o], r6, `${t6}/${d}`, s6[d]));
  if (!Ze(e6.additionalProperties)) return Xt(e6, t6, s6);
  let u6 = Object.getOwnPropertyNames(s6), l = e6.additionalProperties, c = { ...s6 };
  for (let d of u6) i.test(d) || (c[d] = Xt(l, `${t6}/${d}`, c[d]));
  return Xt(e6, t6, c);
}
function YR(e6, r6, t6, n) {
  let o = Qe(e6, r6);
  return Xt(e6, t6, na(o, r6, t6, n));
}
function KR(e6, r6, t6, n) {
  let o = Qe(e6, r6);
  return Xt(e6, t6, na(o, r6, t6, n));
}
function qR(e6, r6, t6, n) {
  return Me(n) && Me(e6.items) ? Xt(e6, t6, e6.items.map((o, i) => na(o, r6, `${t6}/${i}`, n[i]))) : Xt(e6, t6, n);
}
function QR(e6, r6, t6, n) {
  for (let o of e6.anyOf) {
    if (!Le2(o, r6, n)) continue;
    let i = na(o, r6, t6, n);
    return Xt(e6, t6, i);
  }
  return Xt(e6, t6, n);
}
function na(e6, r6, t6, n) {
  let o = Fo(e6, r6), i = e6;
  switch (e6[j]) {
    case "Array":
      return HR(i, o, t6, n);
    case "Intersect":
      return ZR(i, o, t6, n);
    case "Not":
      return WR(i, o, t6, n);
    case "Object":
      return XR(i, o, t6, n);
    case "Record":
      return JR(i, o, t6, n);
    case "Ref":
      return YR(i, o, t6, n);
    case "Symbol":
      return Xt(i, t6, n);
    case "This":
      return KR(i, o, t6, n);
    case "Tuple":
      return qR(i, o, t6, n);
    case "Union":
      return QR(i, o, t6, n);
    default:
      return Xt(i, t6, n);
  }
}
function np(e6, r6, t6) {
  return na(e6, r6, "", t6);
}
$i();
var op = class extends Se {
  constructor(r6, t6, n) {
    super("The encoded value does not match the expected schema"), this.schema = r6, this.value = t6, this.error = n;
  }
};
var rl2 = class extends Se {
  constructor(r6, t6, n, o) {
    super(`${o instanceof Error ? o.message : "Unknown error"}`), this.schema = r6, this.path = t6, this.value = n, this.error = o;
  }
};
function un(e6, r6, t6) {
  try {
    return Pt2(e6) ? e6[jt].Encode(t6) : t6;
  } catch (n) {
    throw new rl2(e6, r6, t6, n);
  }
}
function eN(e6, r6, t6, n) {
  let o = un(e6, t6, n);
  return Me(o) ? o.map((i, s6) => oa(e6.items, r6, `${t6}/${s6}`, i)) : o;
}
function tN2(e6, r6, t6, n) {
  let o = un(e6, t6, n);
  if (!Be(n) || zr(n)) return o;
  let i = Ks(e6), s6 = i.map((f) => f[0]), u6 = { ...o };
  for (let [f, h] of i) f in u6 && (u6[f] = oa(h, r6, `${t6}/${f}`, u6[f]));
  if (!Pt2(e6.unevaluatedProperties)) return u6;
  let l = Object.getOwnPropertyNames(u6), c = e6.unevaluatedProperties, d = { ...u6 };
  for (let f of l) s6.includes(f) || (d[f] = un(c, `${t6}/${f}`, d[f]));
  return d;
}
function rN2(e6, r6, t6, n) {
  return un(e6.not, t6, un(e6, t6, n));
}
function nN(e6, r6, t6, n) {
  let o = un(e6, t6, n);
  if (!Be(o)) return o;
  let i = Or(e6), s6 = { ...o };
  for (let d of i) Te2(s6, d) && (Wt(s6[d]) && (!_c(e6.properties[d]) || mt.IsExactOptionalProperty(s6, d)) || (s6[d] = oa(e6.properties[d], r6, `${t6}/${d}`, s6[d])));
  if (!Ze(e6.additionalProperties)) return s6;
  let u6 = Object.getOwnPropertyNames(s6), l = e6.additionalProperties, c = { ...s6 };
  for (let d of u6) i.includes(d) || (c[d] = un(l, `${t6}/${d}`, c[d]));
  return c;
}
function oN(e6, r6, t6, n) {
  let o = un(e6, t6, n);
  if (!Be(n)) return o;
  let i = Object.getOwnPropertyNames(e6.patternProperties)[0], s6 = new RegExp(i), u6 = { ...o };
  for (let f of Object.getOwnPropertyNames(n)) s6.test(f) && (u6[f] = oa(e6.patternProperties[i], r6, `${t6}/${f}`, u6[f]));
  if (!Ze(e6.additionalProperties)) return u6;
  let l = Object.getOwnPropertyNames(u6), c = e6.additionalProperties, d = { ...u6 };
  for (let f of l) s6.test(f) || (d[f] = un(c, `${t6}/${f}`, d[f]));
  return d;
}
function iN(e6, r6, t6, n) {
  let o = Qe(e6, r6), i = oa(o, r6, t6, n);
  return un(e6, t6, i);
}
function aN2(e6, r6, t6, n) {
  let o = Qe(e6, r6), i = oa(o, r6, t6, n);
  return un(e6, t6, i);
}
function sN2(e6, r6, t6, n) {
  let o = un(e6, t6, n);
  return Me(e6.items) ? e6.items.map((i, s6) => oa(i, r6, `${t6}/${s6}`, o[s6])) : [];
}
function uN(e6, r6, t6, n) {
  for (let o of e6.anyOf) {
    if (!Le2(o, r6, n)) continue;
    let i = oa(o, r6, t6, n);
    return un(e6, t6, i);
  }
  for (let o of e6.anyOf) {
    let i = oa(o, r6, t6, n);
    if (Le2(e6, r6, i)) return un(e6, t6, i);
  }
  return un(e6, t6, n);
}
function oa(e6, r6, t6, n) {
  let o = Fo(e6, r6), i = e6;
  switch (e6[j]) {
    case "Array":
      return eN(i, o, t6, n);
    case "Intersect":
      return tN2(i, o, t6, n);
    case "Not":
      return rN2(i, o, t6, n);
    case "Object":
      return nN(i, o, t6, n);
    case "Record":
      return oN(i, o, t6, n);
    case "Ref":
      return iN(i, o, t6, n);
    case "This":
      return aN2(i, o, t6, n);
    case "Tuple":
      return sN2(i, o, t6, n);
    case "Union":
      return uN(i, o, t6, n);
    default:
      return un(i, t6, n);
  }
}
function Pg(e6, r6, t6) {
  return oa(e6, r6, "", t6);
}
$i();
function lN(e6, r6) {
  return Pt2(e6) || Br(e6.items, r6);
}
function cN(e6, r6) {
  return Pt2(e6) || Br(e6.items, r6);
}
function pN(e6, r6) {
  return Pt2(e6) || Br(e6.returns, r6) || e6.parameters.some((t6) => Br(t6, r6));
}
function dN(e6, r6) {
  return Pt2(e6) || Br(e6.returns, r6) || e6.parameters.some((t6) => Br(t6, r6));
}
function mN(e6, r6) {
  return Pt2(e6) || Pt2(e6.unevaluatedProperties) || e6.allOf.some((t6) => Br(t6, r6));
}
function fN(e6, r6) {
  return Pt2(e6) || Br(e6.items, r6);
}
function hN(e6, r6) {
  return Pt2(e6) || Br(e6.not, r6);
}
function gN(e6, r6) {
  return Pt2(e6) || Object.values(e6.properties).some((t6) => Br(t6, r6)) || Ze(e6.additionalProperties) && Br(e6.additionalProperties, r6);
}
function yN(e6, r6) {
  return Pt2(e6) || Br(e6.item, r6);
}
function bN(e6, r6) {
  let t6 = Object.getOwnPropertyNames(e6.patternProperties)[0], n = e6.patternProperties[t6];
  return Pt2(e6) || Br(n, r6) || Ze(e6.additionalProperties) && Pt2(e6.additionalProperties);
}
function vN(e6, r6) {
  return Pt2(e6) ? true : Br(Qe(e6, r6), r6);
}
function xN(e6, r6) {
  return Pt2(e6) ? true : Br(Qe(e6, r6), r6);
}
function IN(e6, r6) {
  return Pt2(e6) || !Wt(e6.items) && e6.items.some((t6) => Br(t6, r6));
}
function EN(e6, r6) {
  return Pt2(e6) || e6.anyOf.some((t6) => Br(t6, r6));
}
function Br(e6, r6) {
  let t6 = Fo(e6, r6), n = e6;
  if (e6.$id && Bv.has(e6.$id)) return false;
  switch (e6.$id && Bv.add(e6.$id), e6[j]) {
    case "Array":
      return lN(n, t6);
    case "AsyncIterator":
      return cN(n, t6);
    case "Constructor":
      return pN(n, t6);
    case "Function":
      return dN(n, t6);
    case "Intersect":
      return mN(n, t6);
    case "Iterator":
      return fN(n, t6);
    case "Not":
      return hN(n, t6);
    case "Object":
      return gN(n, t6);
    case "Promise":
      return yN(n, t6);
    case "Record":
      return bN(n, t6);
    case "Ref":
      return vN(n, t6);
    case "This":
      return xN(n, t6);
    case "Tuple":
      return IN(n, t6);
    case "Union":
      return EN(n, t6);
    default:
      return Pt2(e6);
  }
}
var Bv = /* @__PURE__ */ new Set();
function ia(e6, r6) {
  return Bv.clear(), Br(e6, r6);
}
function p5(...e6) {
  let [r6, t6, n] = e6.length === 3 ? [e6[0], e6[1], e6[2]] : [e6[0], [], e6[1]];
  if (!Le2(r6, t6, n)) throw new rp(r6, n, ea(r6, t6, n).First());
  return ia(r6, t6) ? np(r6, t6, n) : n;
}
$i();
function Qa(e6, r6) {
  let t6 = Te2(e6, "default") ? e6.default : void 0, n = Zs(t6) ? t6() : et(t6);
  return Wt(r6) ? n : Be(r6) && Be(n) ? Object.assign(n, r6) : r6;
}
function Pv(e6) {
  return Xs(e6) && "default" in e6;
}
function CN(e6, r6, t6) {
  let n = Qa(e6, t6);
  if (!Me(n)) return n;
  for (let o = 0; o < n.length; o++) n[o] = ro(e6.items, r6, n[o]);
  return n;
}
function SN(e6, r6, t6) {
  return mn(t6) ? t6 : Qa(e6, t6);
}
function DN(e6, r6, t6) {
  let n = Qa(e6, t6);
  return e6.allOf.reduce((o, i) => {
    let s6 = ro(i, r6, n);
    return Be(s6) ? { ...o, ...s6 } : s6;
  }, {});
}
function TN(e6, r6, t6) {
  let n = Qa(e6, t6);
  if (!Be(n)) return n;
  let o = Object.getOwnPropertyNames(e6.properties);
  for (let i of o) {
    let s6 = ro(e6.properties[i], r6, n[i]);
    Wt(s6) || (n[i] = ro(e6.properties[i], r6, n[i]));
  }
  if (!Pv(e6.additionalProperties)) return n;
  for (let i of Object.getOwnPropertyNames(n)) o.includes(i) || (n[i] = ro(e6.additionalProperties, r6, n[i]));
  return n;
}
function wN(e6, r6, t6) {
  let n = Qa(e6, t6);
  if (!Be(n)) return n;
  let o = e6.additionalProperties, [i, s6] = Object.entries(e6.patternProperties)[0], u6 = new RegExp(i);
  for (let l of Object.getOwnPropertyNames(n)) u6.test(l) && Pv(s6) && (n[l] = ro(s6, r6, n[l]));
  if (!Pv(o)) return n;
  for (let l of Object.getOwnPropertyNames(n)) u6.test(l) || (n[l] = ro(o, r6, n[l]));
  return n;
}
function FN(e6, r6, t6) {
  return ro(Qe(e6, r6), r6, Qa(e6, t6));
}
function MN(e6, r6, t6) {
  return ro(Qe(e6, r6), r6, t6);
}
function AN(e6, r6, t6) {
  let n = Qa(e6, t6);
  if (!Me(n) || Wt(e6.items)) return n;
  let [o, i] = [e6.items, Math.max(e6.items.length, n.length)];
  for (let s6 = 0; s6 < i; s6++) s6 < o.length && (n[s6] = ro(o[s6], r6, n[s6]));
  return n;
}
function ON(e6, r6, t6) {
  let n = Qa(e6, t6);
  for (let o of e6.anyOf) {
    let i = ro(o, r6, et(n));
    if (Le2(o, r6, i)) return i;
  }
  return n;
}
function ro(e6, r6, t6) {
  let n = Fo(e6, r6), o = e6;
  switch (o[j]) {
    case "Array":
      return CN(o, n, t6);
    case "Date":
      return SN(o, n, t6);
    case "Intersect":
      return DN(o, n, t6);
    case "Object":
      return TN(o, n, t6);
    case "Record":
      return wN(o, n, t6);
    case "Ref":
      return FN(o, n, t6);
    case "This":
      return MN(o, n, t6);
    case "Tuple":
      return AN(o, n, t6);
    case "Union":
      return ON(o, n, t6);
    default:
      return Qa(o, t6);
  }
}
function kg(...e6) {
  return e6.length === 3 ? ro(e6[0], e6[1], e6[2]) : ro(e6[0], [], e6[1]);
}
$i();
$i();
var ai = {};
r(ai, { Delete: () => PN, Format: () => Xm, Get: () => _N, Has: () => kN, Set: () => BN, ValuePointerRootDeleteError: () => Lg, ValuePointerRootSetError: () => _g });
$i();
var _g = class extends Se {
  constructor(r6, t6, n) {
    super("Cannot set root value"), this.value = r6, this.path = t6, this.update = n;
  }
};
var Lg = class extends Se {
  constructor(r6, t6) {
    super("Cannot delete root value"), this.value = r6, this.path = t6;
  }
};
function d5(e6) {
  return e6.indexOf("~") === -1 ? e6 : e6.replace(/~1/g, "/").replace(/~0/g, "~");
}
function* Xm(e6) {
  if (e6 === "") return;
  let [r6, t6] = [0, 0];
  for (let n = 0; n < e6.length; n++) e6.charAt(n) === "/" ? (n === 0 || (t6 = n, yield d5(e6.slice(r6, t6))), r6 = n + 1) : t6 = n;
  yield d5(e6.slice(r6));
}
function BN(e6, r6, t6) {
  if (r6 === "") throw new _g(e6, r6, t6);
  let [n, o, i] = [null, e6, ""];
  for (let s6 of Xm(r6)) o[s6] === void 0 && (o[s6] = {}), n = o, o = o[s6], i = s6;
  n[i] = t6;
}
function PN(e6, r6) {
  if (r6 === "") throw new Lg(e6, r6);
  let [t6, n, o] = [null, e6, ""];
  for (let i of Xm(r6)) {
    if (n[i] === void 0 || n[i] === null) return;
    t6 = n, n = n[i], o = i;
  }
  if (Array.isArray(t6)) {
    let i = parseInt(o);
    t6.splice(i, 1);
  } else delete t6[o];
}
function kN(e6, r6) {
  if (r6 === "") return true;
  let [t6, n, o] = [null, e6, ""];
  for (let i of Xm(r6)) {
    if (n[i] === void 0) return false;
    t6 = n, n = n[i], o = i;
  }
  return Object.getOwnPropertyNames(t6).includes(o);
}
function _N(e6, r6) {
  if (r6 === "") return e6;
  let t6 = e6;
  for (let n of Xm(r6)) {
    if (t6[n] === void 0) return;
    t6 = t6[n];
  }
  return t6;
}
$i();
function LN(e6, r6) {
  if (!Be(r6)) return false;
  let t6 = [...Object.keys(e6), ...Object.getOwnPropertySymbols(e6)], n = [...Object.keys(r6), ...Object.getOwnPropertySymbols(r6)];
  return t6.length !== n.length ? false : t6.every((o) => nl(e6[o], r6[o]));
}
function RN(e6, r6) {
  return mn(r6) && e6.getTime() === r6.getTime();
}
function NN(e6, r6) {
  return !Me(r6) || e6.length !== r6.length ? false : e6.every((t6, n) => nl(t6, r6[n]));
}
function $N(e6, r6) {
  return !Io(r6) || e6.length !== r6.length || Object.getPrototypeOf(e6).constructor.name !== Object.getPrototypeOf(r6).constructor.name ? false : e6.every((t6, n) => nl(t6, r6[n]));
}
function jN(e6, r6) {
  return e6 === r6;
}
function nl(e6, r6) {
  if (mn(e6)) return RN(e6, r6);
  if (Io(e6)) return $N(e6, r6);
  if (Me(e6)) return NN(e6, r6);
  if (Be(e6)) return LN(e6, r6);
  if (zr(e6)) return jN(e6, r6);
  throw new Error("ValueEquals: Unable to compare value");
}
var UN = Ct({ type: lt("insert"), path: Co2(), value: Ya() });
var GN = Ct({ type: lt("update"), path: Co2(), value: Ya() });
var zN = Ct({ type: lt("delete"), path: Co2() });
var f5 = yt([UN, GN, zN]);
var Rg = class extends Se {
  constructor(r6, t6) {
    super(t6), this.value = r6;
  }
};
function Ng(e6, r6) {
  return { type: "update", path: e6, value: r6 };
}
function h5(e6, r6) {
  return { type: "insert", path: e6, value: r6 };
}
function g5(e6) {
  return { type: "delete", path: e6 };
}
function m5(e6) {
  if (globalThis.Object.getOwnPropertySymbols(e6).length > 0) throw new Rg(e6, "Cannot diff objects with symbols");
}
function* VN(e6, r6, t6) {
  if (m5(r6), m5(t6), !Lb(t6)) return yield Ng(e6, t6);
  let n = globalThis.Object.getOwnPropertyNames(r6), o = globalThis.Object.getOwnPropertyNames(t6);
  for (let i of o) Te2(r6, i) || (yield h5(`${e6}/${i}`, t6[i]));
  for (let i of n) Te2(t6, i) && (nl(r6, t6) || (yield* $g2(`${e6}/${i}`, r6[i], t6[i])));
  for (let i of n) Te2(t6, i) || (yield g5(`${e6}/${i}`));
}
function* HN(e6, r6, t6) {
  if (!Me(t6)) return yield Ng(e6, t6);
  for (let n = 0; n < Math.min(r6.length, t6.length); n++) yield* $g2(`${e6}/${n}`, r6[n], t6[n]);
  for (let n = 0; n < t6.length; n++) n < r6.length || (yield h5(`${e6}/${n}`, t6[n]));
  for (let n = r6.length - 1; n >= 0; n--) n < t6.length || (yield g5(`${e6}/${n}`));
}
function* ZN(e6, r6, t6) {
  if (!Io(t6) || r6.length !== t6.length || globalThis.Object.getPrototypeOf(r6).constructor.name !== globalThis.Object.getPrototypeOf(t6).constructor.name) return yield Ng(e6, t6);
  for (let n = 0; n < Math.min(r6.length, t6.length); n++) yield* $g2(`${e6}/${n}`, r6[n], t6[n]);
}
function* WN(e6, r6, t6) {
  r6 !== t6 && (yield Ng(e6, t6));
}
function* $g2(e6, r6, t6) {
  if (Lb(r6)) return yield* VN(e6, r6, t6);
  if (Me(r6)) return yield* HN(e6, r6, t6);
  if (Io(r6)) return yield* ZN(e6, r6, t6);
  if (zr(r6)) return yield* WN(e6, r6, t6);
  throw new Rg(r6, "Unable to diff value");
}
function y5(e6, r6) {
  return [...$g2("", e6, r6)];
}
function XN(e6) {
  return e6.length > 0 && e6[0].path === "" && e6[0].type === "update";
}
function JN(e6) {
  return e6.length === 0;
}
function b5(e6, r6) {
  if (XN(r6)) return et(r6[0].value);
  if (JN(r6)) return et(e6);
  let t6 = et(e6);
  for (let n of r6) switch (n.type) {
    case "insert": {
      ai.Set(t6, n.path, n.value);
      break;
    }
    case "update": {
      ai.Set(t6, n.path, n.value);
      break;
    }
    case "delete": {
      ai.Delete(t6, n.path);
      break;
    }
  }
  return t6;
}
$i();
function v5(...e6) {
  let [r6, t6, n] = e6.length === 3 ? [e6[0], e6[1], e6[2]] : [e6[0], [], e6[1]], o = ia(r6, t6) ? Pg(r6, t6, n) : n;
  if (!Le2(r6, t6, o)) throw new op(r6, o, ea(r6, t6, o).First());
  return o;
}
$i();
var jg = class extends Se {
  constructor(r6) {
    super(r6);
  }
};
function YN(e6, r6, t6, n) {
  if (!Be(t6)) ai.Set(e6, r6, et(n));
  else {
    let o = Object.getOwnPropertyNames(t6), i = Object.getOwnPropertyNames(n);
    for (let s6 of o) i.includes(s6) || delete t6[s6];
    for (let s6 of i) o.includes(s6) || (t6[s6] = null);
    for (let s6 of i) kv(e6, `${r6}/${s6}`, t6[s6], n[s6]);
  }
}
function KN(e6, r6, t6, n) {
  if (!Me(t6)) ai.Set(e6, r6, et(n));
  else {
    for (let o = 0; o < n.length; o++) kv(e6, `${r6}/${o}`, t6[o], n[o]);
    t6.splice(n.length);
  }
}
function qN(e6, r6, t6, n) {
  if (Io(t6) && t6.length === n.length) for (let o = 0; o < t6.length; o++) t6[o] = n[o];
  else ai.Set(e6, r6, et(n));
}
function QN(e6, r6, t6, n) {
  t6 !== n && ai.Set(e6, r6, n);
}
function kv(e6, r6, t6, n) {
  if (Me(n)) return KN(e6, r6, t6, n);
  if (Io(n)) return qN(e6, r6, t6, n);
  if (Be(n)) return YN(e6, r6, t6, n);
  if (zr(n)) return QN(e6, r6, t6, n);
}
function x5(e6) {
  return Io(e6) || zr(e6);
}
function e$(e6, r6) {
  return Be(e6) && Me(r6) || Me(e6) && Be(r6);
}
function I52(e6, r6) {
  if (x5(e6) || x5(r6)) throw new jg("Only object and array types can be mutated at the root level");
  if (e$(e6, r6)) throw new jg("Cannot assign due type mismatch of assignable values");
  kv(e6, "", e6, r6);
}
$i();
var t$ = [(e6, r6, t6) => et(t6), (e6, r6, t6) => kg(e6, r6, t6), (e6, r6, t6) => Ag(e6, r6, t6), (e6, r6, t6) => Bg(e6, r6, t6), (e6, r6, t6) => (Fg(e6, r6, t6), t6), (e6, r6, t6) => ia(e6, r6) ? np(e6, r6, t6) : t6];
function E5(e6, r6, t6) {
  return t$.reduce((n, o) => o(e6, r6, n), t6);
}
function C52(...e6) {
  return e6.length === 3 ? E5(e6[0], e6[1], e6[2]) : E5(e6[0], [], e6[1]);
}
$i();
var si2 = {};
r(si2, { Assert: () => Fg, Cast: () => Ov, Check: () => Le2, Clean: () => Ag, Clone: () => et, Convert: () => Bg, Create: () => Ao, Decode: () => p5, Default: () => kg, Diff: () => y5, Edit: () => f5, Encode: () => v5, Equal: () => nl, Errors: () => ea, Hash: () => eu, Mutate: () => I52, Parse: () => C52, Patch: () => b5, ValueErrorIterator: () => Mo });
$i();
$i();
var S52 = {};
var r$ = function(e6, r6, t6, n, o) {
  var i = new Worker(S52[r6] || (S52[r6] = URL.createObjectURL(new Blob([e6 + ';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'], { type: "text/javascript" }))));
  return i.onmessage = function(s6) {
    var u6 = s6.data, l = u6.$e$;
    if (l) {
      var c = new Error(l[0]);
      c.code = l[1], c.stack = l[2], o(c, null);
    } else o(null, u6);
  }, i.postMessage(t6, n), i;
};
var St = Uint8Array;
var gn = Uint16Array;
var qm = Int32Array;
var lp = new St([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
var cp = new St([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
var Jm = new St([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
var w5 = function(e6, r6) {
  for (var t6 = new gn(31), n = 0; n < 31; ++n) t6[n] = r6 += 1 << e6[n - 1];
  for (var o = new qm(t6[30]), n = 1; n < 30; ++n) for (var i = t6[n]; i < t6[n + 1]; ++i) o[i] = i - t6[n] << 5 | n;
  return { b: t6, r: o };
};
var F5 = w5(lp, 2);
var jv = F5.b;
var Hg = F5.r;
jv[28] = 258, Hg[258] = 28;
var M52 = w5(cp, 0);
var A52 = M52.b;
var Lv = M52.r;
var Ym = new gn(32768);
for (ct = 0; ct < 32768; ++ct) es = (ct & 43690) >> 1 | (ct & 21845) << 1, es = (es & 52428) >> 2 | (es & 13107) << 2, es = (es & 61680) >> 4 | (es & 3855) << 4, Ym[ct] = ((es & 65280) >> 8 | (es & 255) << 8) >> 1;
var es;
var ct;
var Bo = function(e6, r6, t6) {
  for (var n = e6.length, o = 0, i = new gn(r6); o < n; ++o) e6[o] && ++i[e6[o] - 1];
  var s6 = new gn(r6);
  for (o = 1; o < r6; ++o) s6[o] = s6[o - 1] + i[o - 1] << 1;
  var u6;
  if (t6) {
    u6 = new gn(1 << r6);
    var l = 15 - r6;
    for (o = 0; o < n; ++o) if (e6[o]) for (var c = o << 4 | e6[o], d = r6 - e6[o], f = s6[e6[o] - 1]++ << d, h = f | (1 << d) - 1; f <= h; ++f) u6[Ym[f] >> l] = c;
  } else for (u6 = new gn(n), o = 0; o < n; ++o) e6[o] && (u6[o] = Ym[s6[e6[o] - 1]++] >> 15 - e6[o]);
  return u6;
};
var ts = new St(288);
for (ct = 0; ct < 144; ++ct) ts[ct] = 8;
var ct;
for (ct = 144; ct < 256; ++ct) ts[ct] = 9;
var ct;
for (ct = 256; ct < 280; ++ct) ts[ct] = 7;
var ct;
for (ct = 280; ct < 288; ++ct) ts[ct] = 8;
var ct;
var sp = new St(32);
for (ct = 0; ct < 32; ++ct) sp[ct] = 5;
var ct;
var O5 = Bo(ts, 9, 0);
var B5 = Bo(ts, 9, 1);
var P5 = Bo(sp, 5, 0);
var k52 = Bo(sp, 5, 1);
var Gg = function(e6) {
  for (var r6 = e6[0], t6 = 1; t6 < e6.length; ++t6) e6[t6] > r6 && (r6 = e6[t6]);
  return r6;
};
var Oo = function(e6, r6, t6) {
  var n = r6 / 8 | 0;
  return (e6[n] | e6[n + 1] << 8) >> (r6 & 7) & t6;
};
var zg = function(e6, r6) {
  var t6 = r6 / 8 | 0;
  return (e6[t6] | e6[t6 + 1] << 8 | e6[t6 + 2] << 16) >> (r6 & 7);
};
var Qm = function(e6) {
  return (e6 + 7) / 8 | 0;
};
var tu = function(e6, r6, t6) {
  return (r6 == null || r6 < 0) && (r6 = 0), (t6 == null || t6 > e6.length) && (t6 = e6.length), new St(e6.subarray(r6, t6));
};
var Jg = { UnexpectedEOF: 0, InvalidBlockType: 1, InvalidLengthLiteral: 2, InvalidDistance: 3, StreamFinished: 4, NoStreamHandler: 5, InvalidHeader: 6, NoCallback: 7, InvalidUTF8: 8, ExtraFieldTooLong: 9, InvalidDate: 10, FilenameTooLong: 11, StreamFinishing: 12, InvalidZipData: 13, UnknownCompressionMethod: 14 };
var _5 = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"];
var Jt2 = function(e6, r6, t6) {
  var n = new Error(r6 || _5[e6]);
  if (n.code = e6, Error.captureStackTrace && Error.captureStackTrace(n, Jt2), !t6) throw n;
  return n;
};
var L5 = function(e6, r6, t6, n) {
  var o = e6.length, i = n ? n.length : 0;
  if (!o || r6.f && !r6.l) return t6 || new St(0);
  var s6 = !t6, u6 = s6 || r6.i != 2, l = r6.i;
  s6 && (t6 = new St(o * 3));
  var c = function(O) {
    var Q = t6.length;
    if (O > Q) {
      var X = new St(Math.max(Q * 2, O));
      X.set(t6), t6 = X;
    }
  }, d = r6.f || 0, f = r6.p || 0, h = r6.b || 0, b = r6.l, I = r6.d, E = r6.m, v6 = r6.n, x6 = o * 8;
  do {
    if (!b) {
      d = Oo(e6, f, 1);
      var D = Oo(e6, f + 1, 3);
      if (f += 3, D) if (D == 1) b = B5, I = k52, E = 9, v6 = 5;
      else if (D == 2) {
        var P = Oo(e6, f, 31) + 257, L = Oo(e6, f + 10, 15) + 4, N = P + Oo(e6, f + 5, 31) + 1;
        f += 14;
        for (var $ = new St(N), W = new St(19), V = 0; V < L; ++V) W[Jm[V]] = Oo(e6, f + V * 3, 7);
        f += L * 3;
        for (var q4 = Gg(W), se = (1 << q4) - 1, ue = Bo(W, q4, 1), V = 0; V < N; ) {
          var ce = ue[Oo(e6, f, se)];
          f += ce & 15;
          var w6 = ce >> 4;
          if (w6 < 16) $[V++] = w6;
          else {
            var de2 = 0, Ee2 = 0;
            for (w6 == 16 ? (Ee2 = 3 + Oo(e6, f, 3), f += 2, de2 = $[V - 1]) : w6 == 17 ? (Ee2 = 3 + Oo(e6, f, 7), f += 3) : w6 == 18 && (Ee2 = 11 + Oo(e6, f, 127), f += 7); Ee2--; ) $[V++] = de2;
          }
        }
        var he = $.subarray(0, P), ne = $.subarray(P);
        E = Gg(he), v6 = Gg(ne), b = Bo(he, E, 1), I = Bo(ne, v6, 1);
      } else Jt2(1);
      else {
        var w6 = Qm(f) + 4, S = e6[w6 - 4] | e6[w6 - 3] << 8, F = w6 + S;
        if (F > o) {
          l && Jt2(0);
          break;
        }
        u6 && c(h + S), t6.set(e6.subarray(w6, F), h), r6.b = h += S, r6.p = f = F * 8, r6.f = d;
        continue;
      }
      if (f > x6) {
        l && Jt2(0);
        break;
      }
    }
    u6 && c(h + 131072);
    for (var Ce = (1 << E) - 1, xe3 = (1 << v6) - 1, Re = f; ; Re = f) {
      var de2 = b[zg(e6, f) & Ce], we = de2 >> 4;
      if (f += de2 & 15, f > x6) {
        l && Jt2(0);
        break;
      }
      if (de2 || Jt2(2), we < 256) t6[h++] = we;
      else if (we == 256) {
        Re = f, b = null;
        break;
      } else {
        var Ve = we - 254;
        if (we > 264) {
          var V = we - 257, me = lp[V];
          Ve = Oo(e6, f, (1 << me) - 1) + jv[V], f += me;
        }
        var at2 = I[zg(e6, f) & xe3], xt = at2 >> 4;
        at2 || Jt2(3), f += at2 & 15;
        var ne = A52[xt];
        if (xt > 3) {
          var me = cp[xt];
          ne += zg(e6, f) & (1 << me) - 1, f += me;
        }
        if (f > x6) {
          l && Jt2(0);
          break;
        }
        u6 && c(h + 131072);
        var Ot = h + Ve;
        if (h < ne) {
          var A = i - ne, Z = Math.min(ne, Ot);
          for (A + h < 0 && Jt2(3); h < Z; ++h) t6[h] = n[A + h];
        }
        for (; h < Ot; ++h) t6[h] = t6[h - ne];
      }
    }
    r6.l = b, r6.p = Re, r6.b = h, r6.f = d, b && (d = 1, r6.m = E, r6.d = I, r6.n = v6);
  } while (!d);
  return h != t6.length && s6 ? tu(t6, 0, h) : t6.subarray(0, h);
};
var aa = function(e6, r6, t6) {
  t6 <<= r6 & 7;
  var n = r6 / 8 | 0;
  e6[n] |= t6, e6[n + 1] |= t6 >> 8;
};
var ip = function(e6, r6, t6) {
  t6 <<= r6 & 7;
  var n = r6 / 8 | 0;
  e6[n] |= t6, e6[n + 1] |= t6 >> 8, e6[n + 2] |= t6 >> 16;
};
var Vg = function(e6, r6) {
  for (var t6 = [], n = 0; n < e6.length; ++n) e6[n] && t6.push({ s: n, f: e6[n] });
  var o = t6.length, i = t6.slice();
  if (!o) return { t: Gv, l: 0 };
  if (o == 1) {
    var s6 = new St(t6[0].s + 1);
    return s6[t6[0].s] = 1, { t: s6, l: 1 };
  }
  t6.sort(function(F, P) {
    return F.f - P.f;
  }), t6.push({ s: -1, f: 25001 });
  var u6 = t6[0], l = t6[1], c = 0, d = 1, f = 2;
  for (t6[0] = { s: -1, f: u6.f + l.f, l: u6, r: l }; d != o - 1; ) u6 = t6[t6[c].f < t6[f].f ? c++ : f++], l = t6[c != d && t6[c].f < t6[f].f ? c++ : f++], t6[d++] = { s: -1, f: u6.f + l.f, l: u6, r: l };
  for (var h = i[0].s, n = 1; n < o; ++n) i[n].s > h && (h = i[n].s);
  var b = new gn(h + 1), I = Zg(t6[d - 1], b, 0);
  if (I > r6) {
    var n = 0, E = 0, v6 = I - r6, x6 = 1 << v6;
    for (i.sort(function(P, L) {
      return b[L.s] - b[P.s] || P.f - L.f;
    }); n < o; ++n) {
      var D = i[n].s;
      if (b[D] > r6) E += x6 - (1 << I - b[D]), b[D] = r6;
      else break;
    }
    for (E >>= v6; E > 0; ) {
      var w6 = i[n].s;
      b[w6] < r6 ? E -= 1 << r6 - b[w6]++ - 1 : ++n;
    }
    for (; n >= 0 && E; --n) {
      var S = i[n].s;
      b[S] == r6 && (--b[S], ++E);
    }
    I = r6;
  }
  return { t: new St(b), l: I };
};
var Zg = function(e6, r6, t6) {
  return e6.s == -1 ? Math.max(Zg(e6.l, r6, t6 + 1), Zg(e6.r, r6, t6 + 1)) : r6[e6.s] = t6;
};
var Rv = function(e6) {
  for (var r6 = e6.length; r6 && !e6[--r6]; ) ;
  for (var t6 = new gn(++r6), n = 0, o = e6[0], i = 1, s6 = function(l) {
    t6[n++] = l;
  }, u6 = 1; u6 <= r6; ++u6) if (e6[u6] == o && u6 != r6) ++i;
  else {
    if (!o && i > 2) {
      for (; i > 138; i -= 138) s6(32754);
      i > 2 && (s6(i > 10 ? i - 11 << 5 | 28690 : i - 3 << 5 | 12305), i = 0);
    } else if (i > 3) {
      for (s6(o), --i; i > 6; i -= 6) s6(8304);
      i > 2 && (s6(i - 3 << 5 | 8208), i = 0);
    }
    for (; i--; ) s6(o);
    i = 1, o = e6[u6];
  }
  return { c: t6.subarray(0, n), n: r6 };
};
var ap = function(e6, r6) {
  for (var t6 = 0, n = 0; n < r6.length; ++n) t6 += e6[n] * r6[n];
  return t6;
};
var Uv = function(e6, r6, t6) {
  var n = t6.length, o = Qm(r6 + 2);
  e6[o] = n & 255, e6[o + 1] = n >> 8, e6[o + 2] = e6[o] ^ 255, e6[o + 3] = e6[o + 1] ^ 255;
  for (var i = 0; i < n; ++i) e6[o + i + 4] = t6[i];
  return (o + 4 + n) * 8;
};
var Nv = function(e6, r6, t6, n, o, i, s6, u6, l, c, d) {
  aa(r6, d++, t6), ++o[256];
  for (var f = Vg(o, 15), h = f.t, b = f.l, I = Vg(i, 15), E = I.t, v6 = I.l, x6 = Rv(h), D = x6.c, w6 = x6.n, S = Rv(E), F = S.c, P = S.n, L = new gn(19), N = 0; N < D.length; ++N) ++L[D[N] & 31];
  for (var N = 0; N < F.length; ++N) ++L[F[N] & 31];
  for (var $ = Vg(L, 7), W = $.t, V = $.l, q4 = 19; q4 > 4 && !W[Jm[q4 - 1]]; --q4) ;
  var se = c + 5 << 3, ue = ap(o, ts) + ap(i, sp) + s6, ce = ap(o, h) + ap(i, E) + s6 + 14 + 3 * q4 + ap(L, W) + 2 * L[16] + 3 * L[17] + 7 * L[18];
  if (l >= 0 && se <= ue && se <= ce) return Uv(r6, d, e6.subarray(l, l + c));
  var de2, Ee2, he, ne;
  if (aa(r6, d, 1 + (ce < ue)), d += 2, ce < ue) {
    de2 = Bo(h, b, 0), Ee2 = h, he = Bo(E, v6, 0), ne = E;
    var Ce = Bo(W, V, 0);
    aa(r6, d, w6 - 257), aa(r6, d + 5, P - 1), aa(r6, d + 10, q4 - 4), d += 14;
    for (var N = 0; N < q4; ++N) aa(r6, d + 3 * N, W[Jm[N]]);
    d += 3 * q4;
    for (var xe3 = [D, F], Re = 0; Re < 2; ++Re) for (var we = xe3[Re], N = 0; N < we.length; ++N) {
      var Ve = we[N] & 31;
      aa(r6, d, Ce[Ve]), d += W[Ve], Ve > 15 && (aa(r6, d, we[N] >> 5 & 127), d += we[N] >> 12);
    }
  } else de2 = O5, Ee2 = ts, he = P5, ne = sp;
  for (var N = 0; N < u6; ++N) {
    var me = n[N];
    if (me > 255) {
      var Ve = me >> 18 & 31;
      ip(r6, d, de2[Ve + 257]), d += Ee2[Ve + 257], Ve > 7 && (aa(r6, d, me >> 23 & 31), d += lp[Ve]);
      var at2 = me & 31;
      ip(r6, d, he[at2]), d += ne[at2], at2 > 3 && (ip(r6, d, me >> 5 & 8191), d += cp[at2]);
    } else ip(r6, d, de2[me]), d += Ee2[me];
  }
  return ip(r6, d, de2[256]), d + Ee2[256];
};
var R5 = new qm([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);
var Gv = new St(0);
var N5 = function(e6, r6, t6, n, o, i) {
  var s6 = i.z || e6.length, u6 = new St(n + s6 + 5 * (1 + Math.ceil(s6 / 7e3)) + o), l = u6.subarray(n, u6.length - o), c = i.l, d = (i.r || 0) & 7;
  if (r6) {
    d && (l[0] = i.r >> 3);
    for (var f = R5[r6 - 1], h = f >> 13, b = f & 8191, I = (1 << t6) - 1, E = i.p || new gn(32768), v6 = i.h || new gn(I + 1), x6 = Math.ceil(t6 / 3), D = 2 * x6, w6 = function(Y) {
      return (e6[Y] ^ e6[Y + 1] << x6 ^ e6[Y + 2] << D) & I;
    }, S = new qm(25e3), F = new gn(288), P = new gn(32), L = 0, N = 0, $ = i.i || 0, W = 0, V = i.w || 0, q4 = 0; $ + 2 < s6; ++$) {
      var se = w6($), ue = $ & 32767, ce = v6[se];
      if (E[ue] = ce, v6[se] = ue, V <= $) {
        var de2 = s6 - $;
        if ((L > 7e3 || W > 24576) && (de2 > 423 || !c)) {
          d = Nv(e6, l, 0, S, F, P, N, W, q4, $ - q4, d), W = L = N = 0, q4 = $;
          for (var Ee2 = 0; Ee2 < 286; ++Ee2) F[Ee2] = 0;
          for (var Ee2 = 0; Ee2 < 30; ++Ee2) P[Ee2] = 0;
        }
        var he = 2, ne = 0, Ce = b, xe3 = ue - ce & 32767;
        if (de2 > 2 && se == w6($ - xe3)) for (var Re = Math.min(h, de2) - 1, we = Math.min(32767, $), Ve = Math.min(258, de2); xe3 <= we && --Ce && ue != ce; ) {
          if (e6[$ + he] == e6[$ + he - xe3]) {
            for (var me = 0; me < Ve && e6[$ + me] == e6[$ + me - xe3]; ++me) ;
            if (me > he) {
              if (he = me, ne = xe3, me > Re) break;
              for (var at2 = Math.min(xe3, me - 2), xt = 0, Ee2 = 0; Ee2 < at2; ++Ee2) {
                var Ot = $ - xe3 + Ee2 & 32767, A = E[Ot], Z = Ot - A & 32767;
                Z > xt && (xt = Z, ce = Ot);
              }
            }
          }
          ue = ce, ce = E[ue], xe3 += ue - ce & 32767;
        }
        if (ne) {
          S[W++] = 268435456 | Hg[he] << 18 | Lv[ne];
          var O = Hg[he] & 31, Q = Lv[ne] & 31;
          N += lp[O] + cp[Q], ++F[257 + O], ++P[Q], V = $ + he, ++L;
        } else S[W++] = e6[$], ++F[e6[$]];
      }
    }
    for ($ = Math.max($, V); $ < s6; ++$) S[W++] = e6[$], ++F[e6[$]];
    d = Nv(e6, l, c, S, F, P, N, W, q4, $ - q4, d), c || (i.r = d & 7 | l[d / 8 | 0] << 3, d -= 7, i.h = v6, i.p = E, i.i = $, i.w = V);
  } else {
    for (var $ = i.w || 0; $ < s6 + c; $ += 65535) {
      var X = $ + 65535;
      X >= s6 && (l[d / 8 | 0] = c, X = s6), d = Uv(l, d + 1, e6.subarray($, X));
    }
    i.i = s6;
  }
  return tu(u6, 0, n + Qm(d) + o);
};
var n$ = (function() {
  for (var e6 = new Int32Array(256), r6 = 0; r6 < 256; ++r6) {
    for (var t6 = r6, n = 9; --n; ) t6 = (t6 & 1 && -306674912) ^ t6 >>> 1;
    e6[r6] = t6;
  }
  return e6;
})();
var $5 = function() {
  var e6 = -1;
  return { p: function(r6) {
    for (var t6 = e6, n = 0; n < r6.length; ++n) t6 = n$[t6 & 255 ^ r6[n]] ^ t6 >>> 8;
    e6 = t6;
  }, d: function() {
    return ~e6;
  } };
};
var j5 = function(e6, r6, t6, n, o) {
  if (!o && (o = { l: 1 }, r6.dictionary)) {
    var i = r6.dictionary.subarray(-32768), s6 = new St(i.length + e6.length);
    s6.set(i), s6.set(e6, i.length), e6 = s6, o.w = i.length;
  }
  return N5(e6, r6.level == null ? 6 : r6.level, r6.mem == null ? o.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(e6.length))) * 1.5) : 20 : 12 + r6.mem, t6, n, o);
};
var Yg = function(e6, r6) {
  var t6 = {};
  for (var n in e6) t6[n] = e6[n];
  for (var n in r6) t6[n] = r6[n];
  return t6;
};
var D5 = function(e6, r6, t6) {
  for (var n = e6(), o = e6.toString(), i = o.slice(o.indexOf("[") + 1, o.lastIndexOf("]")).replace(/\s+/g, "").split(","), s6 = 0; s6 < n.length; ++s6) {
    var u6 = n[s6], l = i[s6];
    if (typeof u6 == "function") {
      r6 += ";" + l + "=";
      var c = u6.toString();
      if (u6.prototype) if (c.indexOf("[native code]") != -1) {
        var d = c.indexOf(" ", 8) + 1;
        r6 += c.slice(d, c.indexOf("(", d));
      } else {
        r6 += c;
        for (var f in u6.prototype) r6 += ";" + l + ".prototype." + f + "=" + u6.prototype[f].toString();
      }
      else r6 += c;
    } else t6[l] = u6;
  }
  return r6;
};
var Ug = [];
var o$ = function(e6) {
  var r6 = [];
  for (var t6 in e6) e6[t6].buffer && r6.push((e6[t6] = new e6[t6].constructor(e6[t6])).buffer);
  return r6;
};
var i$ = function(e6, r6, t6, n) {
  if (!Ug[t6]) {
    for (var o = "", i = {}, s6 = e6.length - 1, u6 = 0; u6 < s6; ++u6) o = D5(e6[u6], o, i);
    Ug[t6] = { c: D5(e6[s6], o, i), e: i };
  }
  var l = Yg({}, Ug[t6].e);
  return r$(Ug[t6].c + ";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=" + r6.toString() + "}", t6, l, o$(l), n);
};
var a$ = function() {
  return [St, gn, qm, lp, cp, Jm, jv, A52, B5, k52, Ym, _5, Bo, Gg, Oo, zg, Qm, tu, Jt2, L5, Qg, Kg, U52];
};
var s$ = function() {
  return [St, gn, qm, lp, cp, Jm, Hg, Lv, O5, ts, P5, sp, Ym, R5, Gv, Bo, aa, ip, Vg, Zg, Rv, ap, Uv, Nv, Qm, tu, N5, j5, qg, Kg];
};
var Kg = function(e6) {
  return postMessage(e6, [e6.buffer]);
};
var U52 = function(e6) {
  return e6 && { out: e6.size && new St(e6.size), dictionary: e6.dictionary };
};
var G5 = function(e6, r6, t6, n, o, i) {
  var s6 = i$(t6, n, o, function(u6, l) {
    s6.terminate(), i(u6, l);
  });
  return s6.postMessage([e6, r6], r6.consume ? [e6.buffer] : []), function() {
    s6.terminate();
  };
};
var ui = function(e6, r6) {
  return e6[r6] | e6[r6 + 1] << 8;
};
var Xr = function(e6, r6) {
  return (e6[r6] | e6[r6 + 1] << 8 | e6[r6 + 2] << 16 | e6[r6 + 3] << 24) >>> 0;
};
var _v = function(e6, r6) {
  return Xr(e6, r6) + Xr(e6, r6 + 4) * 4294967296;
};
var Wr = function(e6, r6, t6) {
  for (; t6; ++r6) e6[r6] = t6, t6 >>>= 8;
};
function u$(e6, r6, t6) {
  return t6 || (t6 = r6, r6 = {}), typeof t6 != "function" && Jt2(7), G5(e6, r6, [s$], function(n) {
    return Kg(qg(n.data[0], n.data[1]));
  }, 0, t6);
}
function qg(e6, r6) {
  return j5(e6, r6 || {}, 0, 0);
}
function l$(e6, r6, t6) {
  return t6 || (t6 = r6, r6 = {}), typeof t6 != "function" && Jt2(7), G5(e6, r6, [a$], function(n) {
    return Kg(Qg(n.data[0], U52(n.data[1])));
  }, 1, t6);
}
function Qg(e6, r6) {
  return L5(e6, { i: 2 }, r6 && r6.out, r6 && r6.dictionary);
}
var zv = function(e6, r6, t6, n) {
  for (var o in e6) {
    var i = e6[o], s6 = r6 + o, u6 = n;
    Array.isArray(i) && (u6 = Yg(n, i[1]), i = i[0]), i instanceof St ? t6[s6] = [i, u6] : (t6[s6 += "/"] = [new St(0), u6], zv(i, s6, t6, n));
  }
};
var T52 = typeof TextEncoder < "u" && new TextEncoder();
var $v = typeof TextDecoder < "u" && new TextDecoder();
var c$ = 0;
try {
  $v.decode(Gv, { stream: true }), c$ = 1;
} catch {
}
var p$ = function(e6) {
  for (var r6 = "", t6 = 0; ; ) {
    var n = e6[t6++], o = (n > 127) + (n > 223) + (n > 239);
    if (t6 + o > e6.length) return { s: r6, r: tu(e6, t6 - 1) };
    o ? o == 3 ? (n = ((n & 15) << 18 | (e6[t6++] & 63) << 12 | (e6[t6++] & 63) << 6 | e6[t6++] & 63) - 65536, r6 += String.fromCharCode(55296 | n >> 10, 56320 | n & 1023)) : o & 1 ? r6 += String.fromCharCode((n & 31) << 6 | e6[t6++] & 63) : r6 += String.fromCharCode((n & 15) << 12 | (e6[t6++] & 63) << 6 | e6[t6++] & 63) : r6 += String.fromCharCode(n);
  }
};
function up(e6, r6) {
  if (r6) {
    for (var t6 = new St(e6.length), n = 0; n < e6.length; ++n) t6[n] = e6.charCodeAt(n);
    return t6;
  }
  if (T52) return T52.encode(e6);
  for (var o = e6.length, i = new St(e6.length + (e6.length >> 1)), s6 = 0, u6 = function(d) {
    i[s6++] = d;
  }, n = 0; n < o; ++n) {
    if (s6 + 5 > i.length) {
      var l = new St(s6 + 8 + (o - n << 1));
      l.set(i), i = l;
    }
    var c = e6.charCodeAt(n);
    c < 128 || r6 ? u6(c) : c < 2048 ? (u6(192 | c >> 6), u6(128 | c & 63)) : c > 55295 && c < 57344 ? (c = 65536 + (c & 1047552) | e6.charCodeAt(++n) & 1023, u6(240 | c >> 18), u6(128 | c >> 12 & 63), u6(128 | c >> 6 & 63), u6(128 | c & 63)) : (u6(224 | c >> 12), u6(128 | c >> 6 & 63), u6(128 | c & 63));
  }
  return tu(i, 0, s6);
}
function Vv(e6, r6) {
  if (r6) {
    for (var t6 = "", n = 0; n < e6.length; n += 16384) t6 += String.fromCharCode.apply(null, e6.subarray(n, n + 16384));
    return t6;
  } else {
    if ($v) return $v.decode(e6);
    var o = p$(e6), i = o.s, t6 = o.r;
    return t6.length && Jt2(8), i;
  }
}
var z5 = function(e6, r6) {
  return r6 + 30 + ui(e6, r6 + 26) + ui(e6, r6 + 28);
};
var V5 = function(e6, r6, t6) {
  var n = ui(e6, r6 + 28), o = Vv(e6.subarray(r6 + 46, r6 + 46 + n), !(ui(e6, r6 + 8) & 2048)), i = r6 + 46 + n, s6 = Xr(e6, r6 + 20), u6 = t6 && s6 == 4294967295 ? d$(e6, i) : [s6, Xr(e6, r6 + 24), Xr(e6, r6 + 42)], l = u6[0], c = u6[1], d = u6[2];
  return [ui(e6, r6 + 10), l, c, o, i + ui(e6, r6 + 30) + ui(e6, r6 + 32), d];
};
var d$ = function(e6, r6) {
  for (; ui(e6, r6) != 1; r6 += 4 + ui(e6, r6 + 2)) ;
  return [_v(e6, r6 + 12), _v(e6, r6 + 4), _v(e6, r6 + 20)];
};
var Km = function(e6) {
  var r6 = 0;
  if (e6) for (var t6 in e6) {
    var n = e6[t6].length;
    n > 65535 && Jt2(9), r6 += n + 4;
  }
  return r6;
};
var Wg = function(e6, r6, t6, n, o, i, s6, u6) {
  var l = n.length, c = t6.extra, d = u6 && u6.length, f = Km(c);
  Wr(e6, r6, s6 != null ? 33639248 : 67324752), r6 += 4, s6 != null && (e6[r6++] = 20, e6[r6++] = t6.os), e6[r6] = 20, r6 += 2, e6[r6++] = t6.flag << 1 | (i < 0 && 8), e6[r6++] = o && 8, e6[r6++] = t6.compression & 255, e6[r6++] = t6.compression >> 8;
  var h = new Date(t6.mtime == null ? Date.now() : t6.mtime), b = h.getFullYear() - 1980;
  if ((b < 0 || b > 119) && Jt2(10), Wr(e6, r6, b << 25 | h.getMonth() + 1 << 21 | h.getDate() << 16 | h.getHours() << 11 | h.getMinutes() << 5 | h.getSeconds() >> 1), r6 += 4, i != -1 && (Wr(e6, r6, t6.crc), Wr(e6, r6 + 4, i < 0 ? -i - 2 : i), Wr(e6, r6 + 8, t6.size)), Wr(e6, r6 + 12, l), Wr(e6, r6 + 14, f), r6 += 16, s6 != null && (Wr(e6, r6, d), Wr(e6, r6 + 6, t6.attrs), Wr(e6, r6 + 10, s6), r6 += 14), e6.set(n, r6), r6 += l, f) for (var I in c) {
    var E = c[I], v6 = E.length;
    Wr(e6, r6, +I), Wr(e6, r6 + 2, v6), e6.set(E, r6 + 4), r6 += 4 + v6;
  }
  return d && (e6.set(u6, r6), r6 += d), r6;
};
var H52 = function(e6, r6, t6, n, o) {
  Wr(e6, r6, 101010256), Wr(e6, r6 + 8, t6), Wr(e6, r6 + 10, t6), Wr(e6, r6 + 12, n), Wr(e6, r6 + 16, o);
};
function Z5(e6, r6, t6) {
  t6 || (t6 = r6, r6 = {}), typeof t6 != "function" && Jt2(7);
  var n = {};
  zv(e6, "", n, r6);
  var o = Object.keys(n), i = o.length, s6 = 0, u6 = 0, l = i, c = new Array(i), d = [], f = function() {
    for (var v6 = 0; v6 < d.length; ++v6) d[v6]();
  }, h = function(v6, x6) {
    Xg2(function() {
      t6(v6, x6);
    });
  };
  Xg2(function() {
    h = t6;
  });
  var b = function() {
    var v6 = new St(u6 + 22), x6 = s6, D = u6 - s6;
    u6 = 0;
    for (var w6 = 0; w6 < l; ++w6) {
      var S = c[w6];
      try {
        var F = S.c.length;
        Wg(v6, u6, S, S.f, S.u, F);
        var P = 30 + S.f.length + Km(S.extra), L = u6 + P;
        v6.set(S.c, L), Wg(v6, s6, S, S.f, S.u, F, u6, S.m), s6 += 16 + P + (S.m ? S.m.length : 0), u6 = L + F;
      } catch (N) {
        return h(N, null);
      }
    }
    H52(v6, s6, c.length, D, x6), h(null, v6);
  };
  i || b();
  for (var I = function(v6) {
    var x6 = o[v6], D = n[x6], w6 = D[0], S = D[1], F = $5(), P = w6.length;
    F.p(w6);
    var L = up(x6), N = L.length, $ = S.comment, W = $ && up($), V = W && W.length, q4 = Km(S.extra), se = S.level == 0 ? 0 : 8, ue = function(ce, de2) {
      if (ce) f(), h(ce, null);
      else {
        var Ee2 = de2.length;
        c[v6] = Yg(S, { size: P, crc: F.d(), c: de2, f: L, m: W, u: N != x6.length || W && $.length != V, compression: se }), s6 += 30 + N + q4 + Ee2, u6 += 76 + 2 * (N + q4) + (V || 0) + Ee2, --i || b();
      }
    };
    if (N > 65535 && ue(Jt2(11, 0, 1), null), !se) ue(null, w6);
    else if (P < 16e4) try {
      ue(null, qg(w6, S));
    } catch (ce) {
      ue(ce, null);
    }
    else d.push(u$(w6, S, ue));
  }, E = 0; E < l; ++E) I(E);
  return f;
}
function W5(e6, r6) {
  r6 || (r6 = {});
  var t6 = {}, n = [];
  zv(e6, "", t6, r6);
  var o = 0, i = 0;
  for (var s6 in t6) {
    var u6 = t6[s6], l = u6[0], c = u6[1], d = c.level == 0 ? 0 : 8, f = up(s6), h = f.length, b = c.comment, I = b && up(b), E = I && I.length, v6 = Km(c.extra);
    h > 65535 && Jt2(11);
    var x6 = d ? qg(l, c) : l, D = x6.length, w6 = $5();
    w6.p(l), n.push(Yg(c, { size: l.length, crc: w6.d(), c: x6, f, m: I, u: h != s6.length || I && b.length != E, o, compression: d })), o += 30 + h + v6 + D, i += 76 + 2 * (h + v6) + (E || 0) + D;
  }
  for (var S = new St(i + 22), F = o, P = i - o, L = 0; L < n.length; ++L) {
    var f = n[L];
    Wg(S, f.o, f, f.f, f.u, f.c.length);
    var N = 30 + f.f.length + Km(f.extra);
    S.set(f.c, f.o + N), Wg(S, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + N + (f.m ? f.m.length : 0);
  }
  return H52(S, o, n.length, P, F), S;
}
var Xg2 = typeof queueMicrotask == "function" ? queueMicrotask : typeof setTimeout == "function" ? setTimeout : function(e6) {
  e6();
};
function X5(e6, r6, t6) {
  t6 || (t6 = r6, r6 = {}), typeof t6 != "function" && Jt2(7);
  var n = [], o = function() {
    for (var v6 = 0; v6 < n.length; ++v6) n[v6]();
  }, i = {}, s6 = function(v6, x6) {
    Xg2(function() {
      t6(v6, x6);
    });
  };
  Xg2(function() {
    s6 = t6;
  });
  for (var u6 = e6.length - 22; Xr(e6, u6) != 101010256; --u6) if (!u6 || e6.length - u6 > 65558) return s6(Jt2(13, 0, 1), null), o;
  var l = ui(e6, u6 + 8);
  if (l) {
    var c = l, d = Xr(e6, u6 + 16), f = d == 4294967295 || c == 65535;
    if (f) {
      var h = Xr(e6, u6 - 12);
      f = Xr(e6, h) == 101075792, f && (c = l = Xr(e6, h + 32), d = Xr(e6, h + 48));
    }
    for (var b = r6 && r6.filter, I = function(v6) {
      var x6 = V5(e6, d, f), D = x6[0], w6 = x6[1], S = x6[2], F = x6[3], P = x6[4], L = x6[5], N = z5(e6, L);
      d = P;
      var $ = function(V, q4) {
        V ? (o(), s6(V, null)) : (q4 && (i[F] = q4), --l || s6(null, i));
      };
      if (!b || b({ name: F, size: w6, originalSize: S, compression: D })) if (!D) $(null, tu(e6, N, N + w6));
      else if (D == 8) {
        var W = e6.subarray(N, N + w6);
        if (S < 524288 || w6 > 0.8 * S) try {
          $(null, Qg(W, { out: new St(S) }));
        } catch (V) {
          $(V, null);
        }
        else n.push(l$(W, { size: S }, $));
      } else $(Jt2(14, "unknown compression type " + D, 1), null);
      else $(null, null);
    }, E = 0; E < c; ++E) I(E);
  } else s6(null, {});
  return o;
}
function J5(e6, r6) {
  for (var t6 = {}, n = e6.length - 22; Xr(e6, n) != 101010256; --n) (!n || e6.length - n > 65558) && Jt2(13);
  var o = ui(e6, n + 8);
  if (!o) return {};
  var i = Xr(e6, n + 16), s6 = i == 4294967295 || o == 65535;
  if (s6) {
    var u6 = Xr(e6, n - 12);
    s6 = Xr(e6, u6) == 101075792, s6 && (o = Xr(e6, u6 + 32), i = Xr(e6, u6 + 48));
  }
  for (var l = r6 && r6.filter, c = 0; c < o; ++c) {
    var d = V5(e6, i, s6), f = d[0], h = d[1], b = d[2], I = d[3], E = d[4], v6 = d[5], x6 = z5(e6, v6);
    i = E, (!l || l({ name: I, size: h, originalSize: b, compression: f })) && (f ? f == 8 ? t6[I] = Qg(e6.subarray(x6, x6 + h), { out: new St(b) }) : Jt2(14, "unknown compression type " + f) : t6[I] = tu(e6, x6, x6 + h));
  }
  return t6;
}
$i();
var m$ = (e6) => {
  if (e6 != null) return e6.trim() === "" ? void 0 : e6;
};
var f$ = (e6) => e6 != null;
var ey = (e6, r6, t6 = 0) => {
  if (M2.IsNull(e6)) return "null";
  if (M2.IsUndefined(e6)) return "undefined";
  if (M2.IsString(e6)) return "<string>";
  if (M2.IsNumber(e6)) return "<number>";
  if (M2.IsBoolean(e6)) return "<boolean>";
  if (M2.IsLiteral(e6)) return typeof e6.const == "string" ? `'${e6.const}'` : `${e6.const}`;
  if (M2.IsRef(e6)) {
    let n = r6.find((o) => o.$id === e6.$ref);
    return n == null ? e6.$ref : ey(n, r6, t6);
  }
  if (M2.IsArray(e6)) return `${ey(e6.items, r6, t6 + 1)}[]`;
  if (M2.IsUnion(e6) && (!(e6.anyOf.length > 5) || e6.$id == null)) {
    let o = `${e6.anyOf.map((i) => ey(i, r6, t6 + 1)).filter(f$).join(" | ")}`;
    return t6 > 0 ? `(${o})` : o;
  }
  return e6.$id ?? "";
};
var h$ = (e6, r6, t6) => {
  let n = r6.message;
  return M2.IsUnion(r6.schema) && (n = `Expected one of: ${ey(r6.schema, t6)}`), `${`#/definitions/${e6}${m$(r6.path) ?? ""}`}: ${n}`;
};
var ty = (e6, r6, t6) => {
  let n = r6.First();
  if (n != null) return h$(e6, n, t6);
};
var pp;
(function(e6) {
  e6.Archive = "Archive", e6.Validate = "Validate", e6.Encode = "Encode", e6.Unknown = "Unknown";
})(pp || (pp = {}));
var dp = class extends Error {
  constructor(t6, n) {
    super(n);
    t(this, "name");
    t(this, "kind");
    this.name = "CompressError", this.kind = t6;
  }
};
var g$ = (e6) => new dp(pp.Archive, e6.message);
var y$ = (e6) => {
  let r6 = Object.values(Jg);
  return e6 instanceof Error && "code" in e6 && typeof e6.code == "number" && r6.includes(e6.code);
};
var b$ = (e6, r6, t6) => new dp(pp.Validate, ty(e6, r6, t6) ?? "Unknown validate error");
var v$ = (e6) => new dp(pp.Encode, e6.message);
var x$ = (e6) => new dp(pp.Unknown, e6 instanceof Error ? e6.message : String(e6));
var ef = (e6, r6, t6) => r6 instanceof rl2 ? v$(r6) : r6 instanceof Mo ? b$(e6, r6, t6) : y$(r6) ? g$(r6) : x$(r6);
$i();
var mp;
(function(e6) {
  e6.Unarchive = "Unarchive", e6.Validate = "Validate", e6.Decode = "Decode", e6.Unknown = "Unknown";
})(mp || (mp = {}));
var fp = class extends Error {
  constructor(t6, n) {
    super(n);
    t(this, "name");
    t(this, "kind");
    this.name = "DecompressError", this.kind = t6;
  }
};
var I$ = (e6) => new fp(mp.Unarchive, e6.message);
var E$ = (e6) => {
  let r6 = Object.values(Jg);
  return e6 instanceof Error && "code" in e6 && typeof e6.code == "number" && r6.includes(e6.code);
};
var C$ = (e6, r6, t6) => new fp(mp.Validate, ty(e6, r6, t6) ?? "Unknown validate error");
var S$ = (e6) => new fp(mp.Decode, e6.message);
var D$ = (e6) => new fp(mp.Unknown, e6 instanceof Error ? e6.message : String(e6));
var tf = (e6, r6, t6) => r6 instanceof tl2 ? S$(r6) : r6 instanceof Mo ? C$(e6, r6, t6) : E$(r6) ? I$(r6) : D$(r6);
var Y5 = function* (e6, r6 = "") {
  if (e6 != null) {
    if (Array.isArray(e6)) {
      for (let t6 = 0; t6 < e6.length; t6++) yield [r6 + `[${t6}]`, e6[t6]];
      return;
    }
    if ("features" in e6) {
      for (let t6 = 0; t6 < e6.features.length; t6++) yield [r6 === "" ? `features[${t6}]` : `${r6}.features[${t6}]`, e6.features[t6]];
      return;
    }
    for (let [t6, n] of Object.entries(e6)) {
      let o = r6 === "" ? t6 : `${r6}.${t6}`;
      yield* Y5(n, o);
    }
  }
};
var T$ = (e6, r6) => e6 === "" ? r6 : r6.startsWith("[") ? `${e6}${r6}` : `${e6}.${r6}`;
var rr = (e6, r6, t6) => {
  let n = /* @__PURE__ */ new Set();
  for (let [o, i] of Y5(e6)) {
    let s6 = r6(i);
    if (n.has(s6)) return oe2({ kind: Rn.DuplicateIdError, properties: { id: s6, path: T$(t6, o) } });
    n.add(s6);
  }
  return te(true);
};
var K5 = (e6) => e6.floors == null ? oe2({ kind: Rn.FloorMissingError, properties: null }) : rr(e6.floors.features, (r6) => r6.properties.id, "floors");
var q5 = g.Intersect([g.Object({ id: g.Ref(ze), elevation: g.Integer({ description: "An ordinal representing the elevation of this map relative to other maps in the stack." }), subtitle: g.Optional(g.String({ description: "The subtitle of the floor." })), maxHeight: g.Optional(g.Number({ description: "The maximum height of the floor in meters. This includes the thickness of the floor itself, up to the tallest point on any wall. If the floor does not have a consistent height (eg, one room on the floor has a vaulted ceiling, the rest do not), this value represents the highest point anywhere on the floor. Must be a positive number, or undefined.", minimum: 0 })) }), Kn2], { $id: "FloorProperties" });
var Q5 = Vr(g.Union([g.Ref(Kc), g.Ref(qc), g.Null()]), g.Ref(q5), { $id: "FloorFeature" });
var eD = hn(g.Ref(Q5), { $id: "FloorCollection" });
var w$ = g.Object({ floors: g.Ref(eD) });
var tD = { name: "core:floors", intoBundle: function* (e6) {
  e6.floors != null && (yield { path: "floors.geojson", contents: e6.floors });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === "floors.geojson") return { floors: t6(r6) };
}, integrityCheck: K5, schema: w$, references: [q5, Q5, eD] };
$i();
$i();
var nr = (e6) => g.Unsafe(e6);
$i();
var Xe = (e6) => Object.keys(e6);
$i();
$i();
var F$ = (e6) => new Map(e6.floors?.features.map((r6) => [r6.properties.id, r6]) ?? []);
var li = (e6) => {
  let r6 = F$(e6);
  return (n) => {
    let o = r6.get(n);
    return o == null ? oe2({ kind: Rn.UnknownFloorError, properties: { floorId: n } }) : te(o);
  };
};
var rD = (e6) => {
  if (e6.floors == null) return oe2({ kind: Rn.FloorMissingError, properties: null });
  if (e6.geometry == null) return oe2({ kind: Rn.GeometryMissingError, properties: null });
  let r6 = rr(e6.geometry, (n) => n.properties.id, "geometry");
  if (r6.isErr()) return r6;
  let t6 = li(e6);
  for (let n of Xe(e6.geometry)) {
    let o = t6(n);
    if (o.isErr()) return o;
  }
  return te(true);
};
var nD = g.Intersect([g.Object({ id: g.Ref(an2) }), Kn2], { $id: "GeometryProperties" });
var oD = Vr(g.Union([g.Ref(on), g.Ref(vg), g.Ref(xg), g.Ref(Ig2), g.Ref(Kc), g.Ref(qc)]), g.Ref(nD), { $id: "GeometryFeature" });
var iD = hn(g.Ref(oD), { $id: "GeometryCollection" });
var M$ = g.Object({ geometry: nr(g.Record(ze, g.Ref(iD), { additionalProperties: false })) }, { $id: "GeometrySchema" });
var A$ = /^geometry\/(.*)\.geojson$/;
var aD = { name: "core:geometry", schema: M$, intoBundle: function* (e6) {
  if (e6.geometry != null) for (let r6 of Xe(e6.geometry)) yield { path: `geometry/${r6}.geojson`, contents: e6.geometry[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(A$)?.[1];
  if (n) return { geometry: { [n]: t6(r6) } };
}, references: [nD, oD, iD], integrityCheck: rD };
$i();
var Hv = g.Object({ type: g.Literal("file"), name: g.String({ description: "The name of the file." }) }, { $id: "ManifestFile" });
var sD = g.Recursive((e6) => g.Object({ type: g.Literal("folder"), name: g.String({ description: "The name of the folder." }), children: g.Array(g.Union([e6, g.Ref(Hv)]), { minItems: 1, description: "The children of the folder." }) }), { $id: "ManifestFolder" });
var uD = g.Object({ name: g.String({ description: "The name of the map." }), version: g.Literal("3.0.0", { description: "The version of the manifest." }), orgId: g.Optional(g.String({ description: "The identifier of the organization that the map this MVF is for belongs to." })), mapId: g.Optional(g.String({ description: "The identifier of the map that this MVF is for." })), contents: g.Array(g.Union([g.Ref(sD), g.Ref(Hv)]), { minItems: 1, description: "The contents of the MVF bundle." }), time: g.String({ format: "date-time", description: "An ISO 8601 date-time string, including timezone offset." }), tzid: g.Optional(g.Unsafe(g.String({ description: "A valid IANA timezone identifier.", pattern: "^[A-Za-z0-9_-]+/[A-Za-z0-9_-]+$" }))), naturalBearing: g.Optional(g.Number({ minimum: 0, maximum: 360, description: 'The angle, in degrees, the map is considered to be "naturally oriented" as, rather than facing directly north. 90 degrees means East is "up"' })), defaultFloor: g.Optional(g.Ref(ze, { description: "The default floor ID of the map." })), language: g.Optional(g.String({ description: "The language code of the map." })) }, { $id: "ManifestProperties" });
var lD = hn(Vr(on, g.Ref(uD)), { $id: "ManifestCollection" }, { minItems: 1, maxItems: 1 });
var O$ = g.Object({ manifest: g.Ref(lD) });
var cD = { name: "core:manifest", intoBundle: function* (e6) {
  e6.manifest != null && (yield { path: "manifest.geojson", contents: e6.manifest });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === "manifest.geojson") return { manifest: t6(r6) };
}, schema: O$, references: [Hv, sD, uD, lD] };
$i();
$i();
$i();
$i();
var Zv = class extends Se {
  constructor(t6) {
    super(`Unable to dereference schema with $id '${t6.$ref}'`);
    t(this, "schema");
    this.schema = t6;
  }
};
function B$(e6, r6) {
  let t6 = r6.find((n) => n.$id === e6.$ref);
  if (t6 === void 0) throw new Zv(e6);
  return ol2(t6, r6);
}
function ry(e6, r6) {
  return !Ye2.IsString(e6.$id) || r6.some((t6) => t6.$id === e6.$id) || r6.push(e6), r6;
}
function ol2(e6, r6) {
  return e6[j] === "This" || e6[j] === "Ref" ? B$(e6, r6) : e6;
}
$i();
function P$(e6, r6, t6) {
  let n = e6.get(r6);
  if (n !== void 0) return n;
  let o = ia(r6, t6);
  return e6.set(r6, o), o;
}
function ny() {
  let e6 = /* @__PURE__ */ new WeakMap();
  return { HasTransform: (r6, t6) => P$(e6, r6, t6) };
}
function Yt(e6, r6, t6) {
  try {
    return M2.IsTransform(e6) ? e6[jt].Decode(t6) : t6;
  } catch (n) {
    throw new tl2(e6, r6, t6, n);
  }
}
function k$(e6, r6, t6, n, o) {
  return Ye2.IsArray(n) ? Yt(e6, t6, n.map((i, s6) => sa(e6.items, r6, `${t6}/${s6}`, i, o))) : Yt(e6, t6, n);
}
function _$(e6, r6, t6, n, o) {
  if (!Ye2.IsObject(n) || zr(n)) return Yt(e6, t6, n);
  let i = Ks(e6), s6 = i.map((f) => f[0]), u6 = { ...n };
  for (let [f, h] of i) f in u6 && (u6[f] = sa(h, r6, `${t6}/${f}`, u6[f], o));
  if (!M2.IsTransform(e6.unevaluatedProperties)) return Yt(e6, t6, u6);
  let l = Object.getOwnPropertyNames(u6), c = e6.unevaluatedProperties, d = { ...u6 };
  for (let f of l) s6.includes(f) || (d[f] = Yt(c, `${t6}/${f}`, d[f]));
  return Yt(e6, t6, d);
}
function L$(e6, r6, t6, n, o) {
  return Yt(e6, t6, sa(e6.not, r6, t6, n, o));
}
function R$(e6, r6, t6, n, o) {
  if (!Ye2.IsObject(n)) return Yt(e6, t6, n);
  let i = Or(e6), s6 = { ...n };
  for (let d of i) Ye2.HasPropertyKey(s6, d) && (Ye2.IsUndefined(s6[d]) && (!M2.IsUndefined(e6.properties[d]) || mt.IsExactOptionalProperty(s6, d)) || (s6[d] = sa(e6.properties[d], r6, `${t6}/${d}`, s6[d], o)));
  if (!M2.IsSchema(e6.additionalProperties)) return Yt(e6, t6, s6);
  let u6 = Object.getOwnPropertyNames(s6), l = e6.additionalProperties, c = { ...s6 };
  for (let d of u6) i.includes(d) || (c[d] = Yt(l, `${t6}/${d}`, c[d]));
  return Yt(e6, t6, c);
}
function N$(e6, r6, t6, n, o) {
  if (!Ye2.IsObject(n)) return Yt(e6, t6, n);
  let i = Object.getOwnPropertyNames(e6.patternProperties)[0], s6 = new RegExp(i), u6 = { ...n };
  for (let f of Object.getOwnPropertyNames(n)) s6.test(f) && (u6[f] = sa(e6.patternProperties[i], r6, `${t6}/${f}`, u6[f], o));
  if (!M2.IsSchema(e6.additionalProperties)) return Yt(e6, t6, u6);
  let l = Object.getOwnPropertyNames(u6), c = e6.additionalProperties, d = { ...u6 };
  for (let f of l) s6.test(f) || (d[f] = Yt(c, `${t6}/${f}`, d[f]));
  return Yt(e6, t6, d);
}
function $$(e6, r6, t6, n, o) {
  let i = ol2(e6, r6);
  return Yt(e6, t6, sa(i, r6, t6, n, o));
}
function j$(e6, r6, t6, n, o) {
  let i = ol2(e6, r6);
  return Yt(e6, t6, sa(i, r6, t6, n, o));
}
function U$(e6, r6, t6, n, o) {
  return Ye2.IsArray(n) && Ye2.IsArray(e6.items) ? Yt(e6, t6, e6.items.map((i, s6) => sa(i, r6, `${t6}/${s6}`, n[s6], o))) : Yt(e6, t6, n);
}
function G$(e6, r6, t6, n, o) {
  for (let i of e6.anyOf) {
    if (!si2.Check(i, r6, n)) continue;
    let s6 = sa(i, r6, t6, n, o);
    return Yt(e6, t6, s6);
  }
  return Yt(e6, t6, n);
}
function sa(e6, r6, t6, n, o) {
  if (!o.HasTransform(e6, r6)) return n;
  let i = ry(e6, r6), s6 = e6;
  switch (e6[j]) {
    case "Array":
      return k$(s6, i, t6, n, o);
    case "Intersect":
      return _$(s6, i, t6, n, o);
    case "Not":
      return L$(s6, i, t6, n, o);
    case "Object":
      return R$(s6, i, t6, n, o);
    case "Record":
      return N$(s6, i, t6, n, o);
    case "Ref":
      return $$(s6, i, t6, n, o);
    case "Symbol":
      return Yt(s6, t6, n);
    case "This":
      return j$(s6, i, t6, n, o);
    case "Tuple":
      return U$(s6, i, t6, n, o);
    case "Union":
      return G$(s6, i, t6, n, o);
    default:
      return Yt(s6, t6, n);
  }
}
function pD(e6, r6, t6) {
  let n = ny();
  return sa(e6, r6, "", t6, n);
}
$i();
function ln2(e6, r6, t6) {
  try {
    return M2.IsTransform(e6) ? e6[jt].Encode(t6) : t6;
  } catch (n) {
    throw new rl2(e6, r6, t6, n);
  }
}
function z$(e6, r6, t6, n, o) {
  let i = ln2(e6, t6, n);
  return Ye2.IsArray(i) ? i.map((s6, u6) => ua(e6.items, r6, `${t6}/${u6}`, s6, o)) : i;
}
function V$(e6, r6, t6, n, o) {
  let i = ln2(e6, t6, n);
  if (!Ye2.IsObject(n) || zr(n)) return i;
  let s6 = Ks(e6), u6 = s6.map((h) => h[0]), l = { ...i };
  for (let [h, b] of s6) h in l && (l[h] = ua(b, r6, `${t6}/${h}`, l[h], o));
  if (!M2.IsTransform(e6.unevaluatedProperties)) return l;
  let c = Object.getOwnPropertyNames(l), d = e6.unevaluatedProperties, f = { ...l };
  for (let h of c) u6.includes(h) || (f[h] = ln2(d, `${t6}/${h}`, f[h]));
  return f;
}
function H$(e6, r6, t6, n) {
  return ln2(e6.not, t6, ln2(e6, t6, n));
}
function Z$(e6, r6, t6, n, o) {
  let i = ln2(e6, t6, n);
  if (!Ye2.IsObject(i)) return i;
  let s6 = Or(e6), u6 = { ...i };
  for (let f of s6) Ye2.HasPropertyKey(u6, f) && (Ye2.IsUndefined(u6[f]) && (!M2.IsUndefined(e6.properties[f]) || mt.IsExactOptionalProperty(u6, f)) || (u6[f] = ua(e6.properties[f], r6, `${t6}/${f}`, u6[f], o)));
  if (!M2.IsSchema(e6.additionalProperties)) return u6;
  let l = Object.getOwnPropertyNames(u6), c = e6.additionalProperties, d = { ...u6 };
  for (let f of l) s6.includes(f) || (d[f] = ln2(c, `${t6}/${f}`, d[f]));
  return d;
}
function W$(e6, r6, t6, n, o) {
  let i = ln2(e6, t6, n);
  if (!Ye2.IsObject(n)) return i;
  let s6 = Object.getOwnPropertyNames(e6.patternProperties)[0], u6 = new RegExp(s6), l = { ...i };
  for (let h of Object.getOwnPropertyNames(n)) u6.test(h) && (l[h] = ua(e6.patternProperties[s6], r6, `${t6}/${h}`, l[h], o));
  if (!M2.IsSchema(e6.additionalProperties)) return l;
  let c = Object.getOwnPropertyNames(l), d = e6.additionalProperties, f = { ...l };
  for (let h of c) u6.test(h) || (f[h] = ln2(d, `${t6}/${h}`, f[h]));
  return f;
}
function X$(e6, r6, t6, n, o) {
  let i = ol2(e6, r6), s6 = ua(i, r6, t6, n, o);
  return ln2(e6, t6, s6);
}
function J$(e6, r6, t6, n, o) {
  let i = ol2(e6, r6), s6 = ua(i, r6, t6, n, o);
  return ln2(e6, t6, s6);
}
function Y$(e6, r6, t6, n, o) {
  let i = ln2(e6, t6, n);
  return Ye2.IsArray(e6.items) ? e6.items.map((s6, u6) => ua(s6, r6, `${t6}/${u6}`, i[u6], o)) : [];
}
function K$(e6, r6, t6, n, o) {
  for (let i of e6.anyOf) {
    if (!si2.Check(i, r6, n)) continue;
    let s6 = ua(i, r6, t6, n, o);
    return ln2(e6, t6, s6);
  }
  for (let i of e6.anyOf) {
    let s6 = ua(i, r6, t6, n, o);
    if (si2.Check(e6, r6, s6)) return ln2(e6, t6, s6);
  }
  return ln2(e6, t6, n);
}
function ua(e6, r6, t6, n, o) {
  if (!o.HasTransform(e6, r6)) return n;
  let i = ry(e6, r6), s6 = e6;
  switch (e6[j]) {
    case "Array":
      return z$(s6, i, t6, n, o);
    case "Intersect":
      return V$(s6, i, t6, n, o);
    case "Not":
      return H$(s6, i, t6, n);
    case "Object":
      return Z$(s6, i, t6, n, o);
    case "Record":
      return W$(s6, i, t6, n, o);
    case "Ref":
      return X$(s6, i, t6, n, o);
    case "This":
      return J$(s6, i, t6, n, o);
    case "Tuple":
      return Y$(s6, i, t6, n, o);
    case "Union":
      return K$(s6, i, t6, n, o);
    default:
      return ln2(s6, t6, n);
  }
}
function dD(e6, r6, t6) {
  let n = ny();
  return ua(e6, r6, "", t6, n);
}
$i();
var Wv = class {
  constructor(r6, t6, n, o) {
    this.schema = r6, this.references = t6, this.checkFunc = n, this.code = o, this.hasTransform = ia(r6, t6);
  }
  Code() {
    return this.code;
  }
  Errors(r6) {
    return ea(this.schema, this.references, r6);
  }
  Check(r6) {
    return this.checkFunc(r6);
  }
  Decode(r6) {
    if (!this.checkFunc(r6)) throw new rp(this.schema, r6, this.Errors(r6).First());
    return this.hasTransform ? np(this.schema, this.references, r6) : r6;
  }
  Encode(r6) {
    let t6 = this.hasTransform ? Pg(this.schema, this.references, r6) : r6;
    if (!this.checkFunc(t6)) throw new op(this.schema, r6, this.Errors(r6).First());
    return t6;
  }
};
var rs;
(function(e6) {
  function r6(i) {
    return i === 36;
  }
  e6.DollarSign = r6;
  function t6(i) {
    return i === 95;
  }
  e6.IsUnderscore = t6;
  function n(i) {
    return i >= 65 && i <= 90 || i >= 97 && i <= 122;
  }
  e6.IsAlpha = n;
  function o(i) {
    return i >= 48 && i <= 57;
  }
  e6.IsNumeric = o;
})(rs || (rs = {}));
var oy;
(function(e6) {
  function r6(i) {
    return i.length === 0 ? false : rs.IsNumeric(i.charCodeAt(0));
  }
  function t6(i) {
    if (r6(i)) return false;
    for (let s6 = 0; s6 < i.length; s6++) {
      let u6 = i.charCodeAt(s6);
      if (!(rs.IsAlpha(u6) || rs.IsNumeric(u6) || rs.DollarSign(u6) || rs.IsUnderscore(u6))) return false;
    }
    return true;
  }
  function n(i) {
    return i.replace(/'/g, "\\'");
  }
  function o(i, s6) {
    return t6(s6) ? `${i}.${s6}` : `${i}['${n(s6)}']`;
  }
  e6.Encode = o;
})(oy || (oy = {}));
var Xv;
(function(e6) {
  function r6(t6) {
    let n = [];
    for (let o = 0; o < t6.length; o++) {
      let i = t6.charCodeAt(o);
      rs.IsNumeric(i) || rs.IsAlpha(i) ? n.push(t6.charAt(o)) : n.push(`_${i}_`);
    }
    return n.join("").replace(/__/g, "_");
  }
  e6.Encode = r6;
})(Xv || (Xv = {}));
var Jv;
(function(e6) {
  function r6(t6) {
    return t6.replace(/'/g, "\\'");
  }
  e6.Escape = r6;
})(Jv || (Jv = {}));
var Yv = class extends Se {
  constructor(r6) {
    super("Unknown type"), this.schema = r6;
  }
};
var iy = class extends Se {
  constructor(r6) {
    super("Preflight validation check failed to guard for the given schema"), this.schema = r6;
  }
};
var il2;
(function(e6) {
  function r6(s6, u6, l) {
    return mt.ExactOptionalPropertyTypes ? `('${u6}' in ${s6} ? ${l} : true)` : `(${oy.Encode(s6, u6)} !== undefined ? ${l} : true)`;
  }
  e6.IsExactOptionalProperty = r6;
  function t6(s6) {
    return mt.AllowArrayObject ? `(typeof ${s6} === 'object' && ${s6} !== null)` : `(typeof ${s6} === 'object' && ${s6} !== null && !Array.isArray(${s6}))`;
  }
  e6.IsObjectLike = t6;
  function n(s6) {
    return mt.AllowArrayObject ? `(typeof ${s6} === 'object' && ${s6} !== null && !(${s6} instanceof Date) && !(${s6} instanceof Uint8Array))` : `(typeof ${s6} === 'object' && ${s6} !== null && !Array.isArray(${s6}) && !(${s6} instanceof Date) && !(${s6} instanceof Uint8Array))`;
  }
  e6.IsRecordLike = n;
  function o(s6) {
    return mt.AllowNaN ? `typeof ${s6} === 'number'` : `Number.isFinite(${s6})`;
  }
  e6.IsNumberLike = o;
  function i(s6) {
    return mt.AllowNullVoid ? `(${s6} === undefined || ${s6} === null)` : `${s6} === undefined`;
  }
  e6.IsVoidLike = i;
})(il2 || (il2 = {}));
var ay;
(function(e6) {
  function r6(A) {
    return A[j] === "Any" || A[j] === "Unknown";
  }
  function* t6(A, Z, O) {
    yield "true";
  }
  function* n(A, Z, O) {
    yield `Array.isArray(${O})`;
    let [Q, X] = [Ve("value", "any"), Ve("acc", "number")];
    ye(A.maxItems) && (yield `${O}.length <= ${A.maxItems}`), ye(A.minItems) && (yield `${O}.length >= ${A.minItems}`);
    let Y = Ce(A.items, Z, "value");
    if (yield `${O}.every((${Q}) => ${Y})`, Ze(A.contains) || ye(A.minContains) || ye(A.maxContains)) {
      let K = Ze(A.contains) ? A.contains : gt(), ae = Ce(K, Z, "value"), $e = ye(A.minContains) ? [`(count >= ${A.minContains})`] : [], Rt = ye(A.maxContains) ? [`(count <= ${A.maxContains})`] : [], ir = `const count = value.reduce((${X}, ${Q}) => ${ae} ? acc + 1 : acc, 0)`, ho = ["(count > 0)", ...$e, ...Rt].join(" && ");
      yield `((${Q}) => { ${ir}; return ${ho}})(${O})`;
    }
    A.uniqueItems === true && (yield `((${Q}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${O})`);
  }
  function* o(A, Z, O) {
    yield `(typeof value === 'object' && Symbol.asyncIterator in ${O})`;
  }
  function* i(A, Z, O) {
    yield `(typeof ${O} === 'bigint')`, Gr2(A.exclusiveMaximum) && (yield `${O} < BigInt(${A.exclusiveMaximum})`), Gr2(A.exclusiveMinimum) && (yield `${O} > BigInt(${A.exclusiveMinimum})`), Gr2(A.maximum) && (yield `${O} <= BigInt(${A.maximum})`), Gr2(A.minimum) && (yield `${O} >= BigInt(${A.minimum})`), Gr2(A.multipleOf) && (yield `(${O} % BigInt(${A.multipleOf})) === 0`);
  }
  function* s6(A, Z, O) {
    yield `(typeof ${O} === 'boolean')`;
  }
  function* u6(A, Z, O) {
    yield* he(A.returns, Z, `${O}.prototype`);
  }
  function* l(A, Z, O) {
    yield `(${O} instanceof Date) && Number.isFinite(${O}.getTime())`, ye(A.exclusiveMaximumTimestamp) && (yield `${O}.getTime() < ${A.exclusiveMaximumTimestamp}`), ye(A.exclusiveMinimumTimestamp) && (yield `${O}.getTime() > ${A.exclusiveMinimumTimestamp}`), ye(A.maximumTimestamp) && (yield `${O}.getTime() <= ${A.maximumTimestamp}`), ye(A.minimumTimestamp) && (yield `${O}.getTime() >= ${A.minimumTimestamp}`), ye(A.multipleOfTimestamp) && (yield `(${O}.getTime() % ${A.multipleOfTimestamp}) === 0`);
  }
  function* c(A, Z, O) {
    yield `(typeof ${O} === 'function')`;
  }
  function* d(A, Z, O) {
    yield `Number.isInteger(${O})`, ye(A.exclusiveMaximum) && (yield `${O} < ${A.exclusiveMaximum}`), ye(A.exclusiveMinimum) && (yield `${O} > ${A.exclusiveMinimum}`), ye(A.maximum) && (yield `${O} <= ${A.maximum}`), ye(A.minimum) && (yield `${O} >= ${A.minimum}`), ye(A.multipleOf) && (yield `(${O} % ${A.multipleOf}) === 0`);
  }
  function* f(A, Z, O) {
    let Q = A.allOf.map((X) => Ce(X, Z, O)).join(" && ");
    if (A.unevaluatedProperties === false) {
      let X = Re(`${new RegExp(Ja(A))};`), Y = `Object.getOwnPropertyNames(${O}).every(key => ${X}.test(key))`;
      yield `(${Q} && ${Y})`;
    } else if (Ze(A.unevaluatedProperties)) {
      let X = Re(`${new RegExp(Ja(A))};`), Y = `Object.getOwnPropertyNames(${O}).every(key => ${X}.test(key) || ${Ce(A.unevaluatedProperties, Z, `${O}[key]`)})`;
      yield `(${Q} && ${Y})`;
    } else yield `(${Q})`;
  }
  function* h(A, Z, O) {
    yield `(typeof value === 'object' && Symbol.iterator in ${O})`;
  }
  function* b(A, Z, O) {
    typeof A.const == "number" || typeof A.const == "boolean" ? yield `(${O} === ${A.const})` : yield `(${O} === '${Jv.Escape(A.const)}')`;
  }
  function* I(A, Z, O) {
    yield "false";
  }
  function* E(A, Z, O) {
    yield `(!${Ce(A.not, Z, O)})`;
  }
  function* v6(A, Z, O) {
    yield `(${O} === null)`;
  }
  function* x6(A, Z, O) {
    yield il2.IsNumberLike(O), ye(A.exclusiveMaximum) && (yield `${O} < ${A.exclusiveMaximum}`), ye(A.exclusiveMinimum) && (yield `${O} > ${A.exclusiveMinimum}`), ye(A.maximum) && (yield `${O} <= ${A.maximum}`), ye(A.minimum) && (yield `${O} >= ${A.minimum}`), ye(A.multipleOf) && (yield `(${O} % ${A.multipleOf}) === 0`);
  }
  function* D(A, Z, O) {
    yield il2.IsObjectLike(O), ye(A.minProperties) && (yield `Object.getOwnPropertyNames(${O}).length >= ${A.minProperties}`), ye(A.maxProperties) && (yield `Object.getOwnPropertyNames(${O}).length <= ${A.maxProperties}`);
    let Q = Object.getOwnPropertyNames(A.properties);
    for (let X of Q) {
      let Y = oy.Encode(O, X), K = A.properties[X];
      if (A.required && A.required.includes(X)) yield* he(K, Z, Y), (Ka2(K) || r6(K)) && (yield `('${X}' in ${O})`);
      else {
        let ae = Ce(K, Z, Y);
        yield il2.IsExactOptionalProperty(O, X, ae);
      }
    }
    if (A.additionalProperties === false) if (A.required && A.required.length === Q.length) yield `Object.getOwnPropertyNames(${O}).length === ${Q.length}`;
    else {
      let X = `[${Q.map((Y) => `'${Y}'`).join(", ")}]`;
      yield `Object.getOwnPropertyNames(${O}).every(key => ${X}.includes(key))`;
    }
    if (typeof A.additionalProperties == "object") {
      let X = Ce(A.additionalProperties, Z, `${O}[key]`), Y = `[${Q.map((K) => `'${K}'`).join(", ")}]`;
      yield `(Object.getOwnPropertyNames(${O}).every(key => ${Y}.includes(key) || ${X}))`;
    }
  }
  function* w6(A, Z, O) {
    yield `(typeof value === 'object' && typeof ${O}.then === 'function')`;
  }
  function* S(A, Z, O) {
    yield il2.IsRecordLike(O), ye(A.minProperties) && (yield `Object.getOwnPropertyNames(${O}).length >= ${A.minProperties}`), ye(A.maxProperties) && (yield `Object.getOwnPropertyNames(${O}).length <= ${A.maxProperties}`);
    let [Q, X] = Object.entries(A.patternProperties)[0], Y = Re(`${new RegExp(Q)}`), K = Ce(X, Z, "value"), ae = Ze(A.additionalProperties) ? Ce(A.additionalProperties, Z, O) : A.additionalProperties === false ? "false" : "true", $e = `(${Y}.test(key) ? ${K} : ${ae})`;
    yield `(Object.entries(${O}).every(([key, value]) => ${$e}))`;
  }
  function* F(A, Z, O) {
    let Q = Qe(A, Z);
    if (ne.functions.has(A.$ref)) return yield `${xe3(A.$ref)}(${O})`;
    yield* he(Q, Z, O);
  }
  function* P(A, Z, O) {
    let Q = Re(`${new RegExp(A.source, A.flags)};`);
    yield `(typeof ${O} === 'string')`, ye(A.maxLength) && (yield `${O}.length <= ${A.maxLength}`), ye(A.minLength) && (yield `${O}.length >= ${A.minLength}`), yield `${Q}.test(${O})`;
  }
  function* L(A, Z, O) {
    yield `(typeof ${O} === 'string')`, ye(A.maxLength) && (yield `${O}.length <= ${A.maxLength}`), ye(A.minLength) && (yield `${O}.length >= ${A.minLength}`), A.pattern !== void 0 && (yield `${Re(`${new RegExp(A.pattern)};`)}.test(${O})`), A.format !== void 0 && (yield `format('${A.format}', ${O})`);
  }
  function* N(A, Z, O) {
    yield `(typeof ${O} === 'symbol')`;
  }
  function* $(A, Z, O) {
    yield `(typeof ${O} === 'string')`, yield `${Re(`${new RegExp(A.pattern)};`)}.test(${O})`;
  }
  function* W(A, Z, O) {
    yield `${xe3(A.$ref)}(${O})`;
  }
  function* V(A, Z, O) {
    if (yield `Array.isArray(${O})`, A.items === void 0) return yield `${O}.length === 0`;
    yield `(${O}.length === ${A.maxItems})`;
    for (let Q = 0; Q < A.items.length; Q++) yield `${Ce(A.items[Q], Z, `${O}[${Q}]`)}`;
  }
  function* q4(A, Z, O) {
    yield `${O} === undefined`;
  }
  function* se(A, Z, O) {
    yield `(${A.anyOf.map((X) => Ce(X, Z, O)).join(" || ")})`;
  }
  function* ue(A, Z, O) {
    yield `${O} instanceof Uint8Array`, ye(A.maxByteLength) && (yield `(${O}.length <= ${A.maxByteLength})`), ye(A.minByteLength) && (yield `(${O}.length >= ${A.minByteLength})`);
  }
  function* ce(A, Z, O) {
    yield "true";
  }
  function* de2(A, Z, O) {
    yield il2.IsVoidLike(O);
  }
  function* Ee2(A, Z, O) {
    let Q = ne.instances.size;
    ne.instances.set(Q, A), yield `kind('${A[j]}', ${Q}, ${O})`;
  }
  function* he(A, Z, O, Q = true) {
    let X = He(A.$id) ? [...Z, A] : Z, Y = A;
    if (Q && He(A.$id)) {
      let K = xe3(A.$id);
      if (ne.functions.has(K)) return yield `${K}(${O})`;
      {
        let ae = we(K, A, Z, "value", false);
        return ne.functions.set(K, ae), yield `${K}(${O})`;
      }
    }
    switch (Y[j]) {
      case "Any":
        return yield* t6(Y, X, O);
      case "Array":
        return yield* n(Y, X, O);
      case "AsyncIterator":
        return yield* o(Y, X, O);
      case "BigInt":
        return yield* i(Y, X, O);
      case "Boolean":
        return yield* s6(Y, X, O);
      case "Constructor":
        return yield* u6(Y, X, O);
      case "Date":
        return yield* l(Y, X, O);
      case "Function":
        return yield* c(Y, X, O);
      case "Integer":
        return yield* d(Y, X, O);
      case "Intersect":
        return yield* f(Y, X, O);
      case "Iterator":
        return yield* h(Y, X, O);
      case "Literal":
        return yield* b(Y, X, O);
      case "Never":
        return yield* I(Y, X, O);
      case "Not":
        return yield* E(Y, X, O);
      case "Null":
        return yield* v6(Y, X, O);
      case "Number":
        return yield* x6(Y, X, O);
      case "Object":
        return yield* D(Y, X, O);
      case "Promise":
        return yield* w6(Y, X, O);
      case "Record":
        return yield* S(Y, X, O);
      case "Ref":
        return yield* F(Y, X, O);
      case "RegExp":
        return yield* P(Y, X, O);
      case "String":
        return yield* L(Y, X, O);
      case "Symbol":
        return yield* N(Y, X, O);
      case "TemplateLiteral":
        return yield* $(Y, X, O);
      case "This":
        return yield* W(Y, X, O);
      case "Tuple":
        return yield* V(Y, X, O);
      case "Undefined":
        return yield* q4(Y, X, O);
      case "Union":
        return yield* se(Y, X, O);
      case "Uint8Array":
        return yield* ue(Y, X, O);
      case "Unknown":
        return yield* ce(Y, X, O);
      case "Void":
        return yield* de2(Y, X, O);
      default:
        if (!Ar.Has(Y[j])) throw new Yv(A);
        return yield* Ee2(Y, X, O);
    }
  }
  let ne = { language: "javascript", functions: /* @__PURE__ */ new Map(), variables: /* @__PURE__ */ new Map(), instances: /* @__PURE__ */ new Map() };
  function Ce(A, Z, O, Q = true) {
    return `(${[...he(A, Z, O, Q)].join(" && ")})`;
  }
  function xe3(A) {
    return `check_${Xv.Encode(A)}`;
  }
  function Re(A) {
    let Z = `local_${ne.variables.size}`;
    return ne.variables.set(Z, `const ${Z} = ${A}`), Z;
  }
  function we(A, Z, O, Q, X = true) {
    let [Y, K] = [`
`, (ir) => "".padStart(ir, " ")], ae = Ve("value", "any"), $e = me("boolean"), Rt = [...he(Z, O, Q, X)].map((ir) => `${K(4)}${ir}`).join(` &&${Y}`);
    return `function ${A}(${ae})${$e} {${Y}${K(2)}return (${Y}${Rt}${Y}${K(2)})
}`;
  }
  function Ve(A, Z) {
    let O = ne.language === "typescript" ? `: ${Z}` : "";
    return `${A}${O}`;
  }
  function me(A) {
    return ne.language === "typescript" ? `: ${A}` : "";
  }
  function at2(A, Z, O) {
    let Q = we("check", A, Z, "value"), X = Ve("value", "any"), Y = me("boolean"), K = [...ne.functions.values()], ae = [...ne.variables.values()], $e = He(A.$id) ? `return function check(${X})${Y} {
  return ${xe3(A.$id)}(value)
}` : `return ${Q}`;
    return [...ae, ...K, $e].join(`
`);
  }
  function xt(...A) {
    let Z = { language: "javascript" }, [O, Q, X] = A.length === 2 && Me(A[1]) ? [A[0], A[1], Z] : A.length === 2 && !Me(A[1]) ? [A[0], [], A[1]] : A.length === 3 ? [A[0], A[1], A[2]] : A.length === 1 ? [A[0], [], Z] : [null, [], Z];
    if (ne.language = X.language, ne.variables.clear(), ne.functions.clear(), ne.instances.clear(), !Ze(O)) throw new iy(O);
    for (let Y of Q) if (!Ze(Y)) throw new iy(Y);
    return at2(O, Q, X);
  }
  e6.Code = xt;
  function Ot(A, Z = []) {
    let O = xt(A, Z, { language: "javascript" }), Q = globalThis.Function("kind", "format", "hash", O), X = new Map(ne.instances);
    function Y(Rt, ir, ho) {
      if (!Ar.Has(Rt) || !X.has(ir)) return false;
      let Ni = Ar.Get(Rt), em = X.get(ir);
      return Ni(em, ho);
    }
    function K(Rt, ir) {
      return Bn.Has(Rt) ? Bn.Get(Rt)(ir) : false;
    }
    function ae(Rt) {
      return eu(Rt);
    }
    let $e = Q(Y, K, ae);
    return new Wv(A, Z, $e, O);
  }
  e6.Compile = Ot;
})(ay || (ay = {}));
$i();
$i();
$i();
var q$ = /^(\d\d\d\d)-(\d\d)-(\d\d)$/;
var Q$ = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
var ej = (e6) => e6 % 4 === 0 && (e6 % 100 !== 0 || e6 % 400 === 0);
var sy = (e6) => {
  let r6 = q$.exec(e6);
  if (!r6) return false;
  let t6 = +r6[1], n = +r6[2], o = +r6[3];
  return n >= 1 && n <= 12 && o >= 1 && o <= (n === 2 && ej(t6) ? 29 : Q$[n]);
};
$i();
var tj = /^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;
var uy = (e6) => {
  let r6 = tj.exec(e6);
  if (!r6) return false;
  let t6 = +r6[1], n = +r6[2], o = +r6[3], i = r6[4], s6 = r6[5] === "-" ? -1 : 1, u6 = +(r6[6] || 0), l = +(r6[7] || 0);
  if (u6 > 23 || l > 59 || !i) return false;
  if (t6 <= 23 && n <= 59 && o < 60) return true;
  let c = n - l * s6, d = t6 - u6 * s6 - (c < 0 ? 1 : 0);
  return (d === 23 || d === -1) && (c === 59 || c === -1) && o < 61;
};
var rj = /t|\s/i;
var mD = (e6) => {
  let r6 = e6.split(rj);
  return r6.length === 2 && sy(r6[0]) && uy(r6[1]);
};
$i();
var nj = /\/|:/;
var oj = /^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;
var fD = (e6) => nj.test(e6) && oj.test(e6);
var ij = [["date", sy], ["time", uy], ["date-time", mD], ["uri", fD]];
var hD = () => {
  for (let [e6, r6] of ij) try {
    Tg.Format(e6, r6);
  } catch (t6) {
    if (t6 instanceof Hm) continue;
    throw t6;
  }
};
$i();
var Kv = g.Record(g.String(), g.Unknown(), { $id: "Extra" });
var ci = g.Object({ extra: g.Optional(g.Ref(Kv)) });
var qv = [Kv];
$i();
$i();
$i();
$i();
$i();
$i();
var rt = (e6) => Object.entries(e6);
var aj = (e6) => {
  let r6 = /* @__PURE__ */ new Map();
  for (let [t6, n] of rt(e6.geometry ?? {})) r6.set(t6, new Map(n?.features.map((o) => [o.properties.id, o])));
  return r6;
};
var xr = (e6) => {
  let r6 = aj(e6);
  return (n, o) => {
    let i = r6.get(n);
    if (i == null) return oe2({ kind: Rn.UnknownFloorError, properties: { floorId: n } });
    let s6 = i.get(o);
    return s6 == null ? oe2({ kind: Rn.UnknownGeometryError, properties: { floorId: n, geometryId: o } }) : te(s6);
  };
};
$i();
var Po = g.Object({ geometryId: g.Ref(an2) }, { $id: "WithGeometryId" });
var hp = g.Object({ geometryIds: g.Array(g.Ref(an2)) }, { $id: "WithGeometryIds" });
var Qv = [Po, hp];
$i();
$i();
$i();
var gD = (e6) => e6 instanceof Error ? e6 : new Error(String(e6));
var gp = (e6) => (...r6) => {
  try {
    return te(e6(...r6));
  } catch (t6) {
    return oe2(gD(t6));
  }
};
var yD = gp((e6, r6) => {
  let t6 = {};
  for (let n of r6) for (let o of n.intoBundle(e6)) t6[o.path] = up(JSON.stringify(o.contents));
  return t6;
});
var e3 = async (e6, r6, t6) => yD(e6, r6).andThenAsync((n) => new Promise((o) => {
  Z5(n, { ...t6, consume: true }, (i, s6) => {
    o(i ? oe2(i) : te(s6));
  });
}));
var sj = gp(W5);
var t3 = (e6, r6, t6) => yD(e6, r6).andThen((n) => sj(n, t6));
$i();
$i();
function ly(e6, r6, t6 = []) {
  let n = { ...e6 };
  for (let [o, i] of Object.entries(r6)) if (i !== void 0) if (o in n) {
    let s6 = o;
    if (Array.isArray(i) && i.length > 0) {
      let u6 = uj(i[0], t6);
      if (u6) {
        let l = n[s6];
        if (!Array.isArray(l)) throw new Error(`Expected array at ${o}, got ${typeof l}`);
        let c = new Map(i.map((h) => [bD(h, u6), h])), f = l.map((h) => {
          let b = c.get(bD(h, u6));
          return b ? ly(h, b, t6) : h;
        });
        n[s6] = f;
      } else n[s6] = i;
    } else {
      let u6 = n[s6];
      typeof u6 == "object" && u6 !== null && typeof i == "object" && i !== null ? Object.keys(i).length === 0 ? n[s6] = i : n[s6] = ly(u6, i, t6) : n[o] = i;
    }
  } else n[o] = i;
  return n;
}
function uj(e6, r6) {
  function t6(n) {
    if (typeof n != "object" || n === null) return null;
    for (let o of r6) if (o in n && typeof n[o] < "u") return [o];
    if (Array.isArray(n)) return null;
    for (let [o, i] of Object.entries(n)) {
      let s6 = t6(i);
      if (s6) return [o, ...s6];
    }
    return null;
  }
  return t6(e6);
}
function bD(e6, r6) {
  return r6.reduce((t6, n) => {
    if (t6 && typeof t6 == "object") return t6[n];
  }, e6);
}
var lj = (e6) => e6;
var cj = (e6) => JSON.parse(Vv(e6));
var vD = (e6, r6) => r6.some((t6) => t6.fromBundle(e6.name, new Uint8Array(), lj) !== void 0);
var xD = gp((e6, r6) => {
  let t6 = {};
  for (let n of Object.keys(e6)) {
    let o = e6[n];
    for (let i of r6) {
      let s6 = i.fromBundle(n, o, cj);
      if (s6) {
        t6 = ly(t6, s6, []);
        break;
      }
    }
  }
  return t6;
});
var r3 = async (e6, r6) => new Promise((t6) => X5(e6, { filter: (n) => vD(n, r6) }, (n, o) => {
  t6(n ? oe2(n) : te(o));
})).then((t6) => t6.andThen((n) => xD(n, r6)));
var pj = gp(J5);
var n3 = (e6, r6) => pj(e6, { filter: (t6) => vD(t6, r6) }).andThen((t6) => xD(t6, r6));
$i();
var dj = (e6) => typeof e6 == "object" && e6 != null && "$ref" in e6 && typeof e6.$ref == "string";
var mj = (e6) => {
  if (e6.length < 2) return false;
  let r6 = e6.filter(dj);
  if (r6.length !== e6.length) return false;
  let t6 = r6[0].$ref;
  return r6.slice(1).every((n) => n.$ref === t6);
};
var cy = (e6) => typeof e6 == "object" && e6 != null && "allOf" in e6 && Array.isArray(e6.allOf) && mj(e6.allOf) ? e6.allOf[0] : typeof e6 == "object" && e6 != null && !Array.isArray(e6) ? Object.fromEntries(Object.entries(e6).map(([r6, t6]) => [r6, cy(t6)])) : Array.isArray(e6) ? e6.map(cy) : e6;
$i();
var py = (e6) => typeof e6 == "object" && e6 != null && "$ref" in e6 ? { ...e6, $ref: `#/definitions/${e6.$ref}` } : typeof e6 == "object" && e6 != null && !Array.isArray(e6) ? Object.fromEntries(Object.entries(e6).map(([r6, t6]) => [r6, py(t6)])) : Array.isArray(e6) ? e6.map(py) : e6;
var yp;
(function(e6) {
  e6.InvalidTypeboxSchema = "InvalidTypeboxSchema", e6.MissingReferenceId = "MissingReferenceId", e6.DuplicateReferenceId = "DuplicateReferenceId", e6.TypeboxError = "TypeboxError", e6.UnknownError = "UnknownError";
})(yp || (yp = {}));
var fj = (e6) => ({ next() {
  for (let t6 of e6) {
    let n = t6.next();
    if (!n.done) return n;
  }
  return { done: true, value: void 0 };
}, [Symbol.iterator]() {
  return this;
} });
var hj = (...e6) => {
  let r6 = /* @__PURE__ */ new Map();
  for (let t6 of fj(e6)) {
    if (!t6.$id) continue;
    let n = r6.get(t6.$id);
    if (n != null && n !== t6) return oe2({ kind: yp.DuplicateReferenceId, message: "Failed to register a reference for a schema with an $id that has already been used", schema: t6 });
    r6.set(t6.$id, t6);
  }
  return te(r6);
};
var Pr;
var bp;
var no;
var Jr2;
var o3 = class o32 {
  constructor(r6, t6, n, o) {
    v(this, Pr);
    v(this, bp);
    v(this, no, []);
    v(this, Jr2);
    w(this, Pr, r6), w(this, bp, t6), w(this, no, n), w(this, Jr2, o), this.is = this.is.bind(this), this.parse = this.parse.bind(this), this.verify = this.verify.bind(this), this.jsonSchema = this.jsonSchema.bind(this), this.compress = this.compress.bind(this), this.decompress = this.decompress.bind(this);
  }
  static create(r6, t6 = "CoreMVF", n = false) {
    let o = g.Composite(r6.extensions.map((s6) => s6.schema), { $id: t6 });
    if (!M2.IsSchema(o)) return oe2({ kind: yp.InvalidTypeboxSchema, message: "Attempting to merge schemas produced an invalid schema", schema: o });
    let i = hj(xv.values(), Iv.values(), bv.values(), qv.values(), i3.values(), Qv.values(), r6.extensions.flatMap((s6) => s6.references ?? []).values());
    if (!i.isOk()) return i;
    try {
      hD();
      let s6 = n ? null : ay.Compile(o, [...i.value.values()]);
      return te(new o32(o, s6, r6.extensions, i.value));
    } catch (s6) {
      return s6 instanceof Se ? oe2({ kind: yp.TypeboxError, message: s6.message, original: s6 }) : oe2({ kind: yp.UnknownError, message: "An unknown error occurred while compiling the schema", original: s6 });
    }
  }
  is(r6) {
    return u(this, bp)?.Check(r6) ?? si2.Check(u(this, Pr), [...u(this, Jr2).values()], r6);
  }
  parse(r6) {
    return this.is(r6) ? te(r6) : oe2(u(this, bp)?.Errors(r6) ?? si2.Errors(u(this, Pr), [...u(this, Jr2).values()], r6));
  }
  decode(r6) {
    try {
      return te(pD(u(this, Pr), [...u(this, Jr2).values()], r6));
    } catch (t6) {
      return oe2(t6);
    }
  }
  encode(r6) {
    try {
      return te(dD(u(this, Pr), [...u(this, Jr2).values()], r6));
    } catch (t6) {
      return oe2(t6);
    }
  }
  verify(r6) {
    for (let t6 of u(this, no)) if (t6.integrityCheck) {
      let n = t6.integrityCheck(r6);
      if (n.isErr()) return oe2(n.error);
    }
    return te(true);
  }
  jsonSchema() {
    let r6 = JSON.parse(JSON.stringify([u(this, Pr), ...u(this, Jr2).values()])), t6 = cy(py({ $id: `#/definitions/${u(this, Pr).$id ?? "CoreMVF"}`, $schema: "http://json-schema.org/draft-07/schema#", references: r6 }));
    return JSON.stringify(t6, null, 2);
  }
  async compress(r6) {
    return this.encode(r6).andThen((t6) => this.parse(t6)).andThenAsync((t6) => e3(t6, u(this, no))).then((t6) => t6.mapErr((n) => ef(u(this, Pr).$id ?? "CoreMVF", n, [...u(this, Jr2).values()])));
  }
  async compressUnsafe(r6) {
    return this.encode(r6).andThenAsync((t6) => e3(t6, u(this, no))).then((t6) => t6.mapErr((n) => ef(u(this, Pr).$id ?? "CoreMVF", n, [...u(this, Jr2).values()])));
  }
  compressSync(r6) {
    return this.encode(r6).andThen((t6) => this.parse(t6)).andThen((t6) => t3(t6, u(this, no))).mapErr((t6) => ef(u(this, Pr).$id ?? "CoreMVF", t6, [...u(this, Jr2).values()]));
  }
  compressUnsafeSync(r6) {
    return this.encode(r6).andThen((t6) => t3(t6, u(this, no))).mapErr((t6) => ef(u(this, Pr).$id ?? "CoreMVF", t6, [...u(this, Jr2).values()]));
  }
  async decompress(r6) {
    return r3(r6, u(this, no)).then((t6) => t6.andThen((n) => this.parse(n)).andThen((n) => this.decode(n)).mapErr((n) => tf(u(this, Pr).$id ?? "CoreMVF", n, [...u(this, Jr2).values()])));
  }
  async decompressUnsafe(r6) {
    return r3(r6, u(this, no)).then((t6) => t6.andThen((n) => this.decode(n)).mapErr((n) => tf(u(this, Pr).$id ?? "CoreMVF", n, [...u(this, Jr2).values()])));
  }
  decompressSync(r6) {
    return n3(r6, u(this, no)).andThen((t6) => this.parse(t6)).andThen((t6) => this.decode(t6)).mapErr((t6) => tf(u(this, Pr).$id ?? "CoreMVF", t6, [...u(this, Jr2).values()]));
  }
  decompressUnsafeSync(r6) {
    return n3(r6, u(this, no)).andThen((t6) => this.decode(t6)).mapErr((t6) => tf(u(this, Pr).$id ?? "CoreMVF", t6, [...u(this, Jr2).values()]));
  }
};
Pr = /* @__PURE__ */ new WeakMap(), bp = /* @__PURE__ */ new WeakMap(), no = /* @__PURE__ */ new WeakMap(), Jr2 = /* @__PURE__ */ new WeakMap();
var dy = o3;
var vp;
var my = class {
  constructor() {
    v(this, vp, []);
    this.extend = this.extend.bind(this);
  }
  extend(r6) {
    return u(this, vp).push(r6), this;
  }
  extendOptional(r6) {
    let t6 = { ...r6, schema: g.Partial(r6.schema) };
    return u(this, vp).push(t6), this;
  }
  build(r6) {
    return dy.create(this, void 0, r6?.cspSafe);
  }
  get extensions() {
    return u(this, vp);
  }
};
vp = /* @__PURE__ */ new WeakMap();
$i();
$i();
$i();
$i();
var xp = g.Object({ geometryId: g.Ref(an2), floorId: g.Ref(ze) }, { $id: "GeometryAnchor" });
var gj = g.Object({ geometryAnchor: g.Ref(xp) });
var rf = (e6, r6) => g.Object({ geometryAnchors: g.Array(g.Ref(xp), e6) }, r6);
var i3 = [xp];
$i();
$i();
$i();
var ID = (e6, r6) => g.Unsafe(g.Transform(g.String(r6)).Decode((t6) => e6.includes(t6) ? t6 : "unknown").Encode((t6) => t6));
var Nn = (e6, r6) => {
  let t6 = ID(e6, r6), n = [...e6, "unknown"], o = Object.freeze(Object.fromEntries([...e6, "unknown"].map((i) => [i, i])));
  return { schema: t6, values: n, record: o };
};
var ED = () => new my().extend(tD).extend(aD).extend(cD);
$i();
$i();
$i();
$i();
$i();
$i();
var nf;
(function(e6) {
  e6.AnnotationNonPointGeometryError = "AnnotationNonPointGeometryError", e6.AnnotationUnknownSymbolError = "AnnotationUnknownSymbolError";
})(nf || (nf = {}));
var CD = (e6) => {
  if (e6.annotations == null) return te(true);
  let r6 = rr(e6.annotations, (o) => o.id, "annotations");
  if (r6.isErr()) return r6;
  let t6 = xr(e6), n = new Set(Xe(e6.annotationSymbols ?? {}));
  for (let o of Xe(e6.annotations)) {
    let i = e6.annotations[o];
    if (i != null) for (let s6 of i) {
      if (!n.has(s6.symbolKey)) return oe2({ kind: nf.AnnotationUnknownSymbolError, properties: { annotationId: s6.id, symbolKey: s6.symbolKey } });
      let u6 = t6(o, s6.geometryId);
      if (u6.isErr()) return u6;
      if (u6.value.geometry.type !== "Point") return oe2({ kind: nf.AnnotationNonPointGeometryError, properties: { annotationId: s6.id, floorId: o, geometryId: s6.geometryId } });
    }
  }
  return te(true);
};
var SD = tr("a", "AnnotationId");
var a3 = g.Intersect([Po, g.Object({ id: g.Ref(SD, { description: "The unique identifier for the annotation." }), externalId: g.Optional(g.String({ description: "The external identifier for the annotation." })), symbolKey: g.String({ description: "The symbol identifier for the annotation." }) })], { $id: "AnnotationProperties" });
var DD = g.Object({ url: g.String({ format: "uri", description: "The URL for the symbol." }), name: g.String({ description: "The name of the symbol." }) }, { $id: "AnnotationSymbol" });
var yj = g.Object({ annotations: nr(g.Record(ze, g.Array(g.Ref(a3)), { additionalProperties: false })), annotationSymbols: nr(g.Record(g.Index(a3, ["symbolKey"]), g.Ref(DD))) }, { $id: "AnnotationsSchema" });
var bj = /^annotations\/(.*)\.json$/;
var TD = { name: "ext:mvf-annotations", schema: yj, intoBundle: function* (e6) {
  if (e6.annotations != null) for (let r6 of Xe(e6.annotations)) yield { path: `annotations/${r6}.json`, contents: e6.annotations[r6] };
  e6.annotationSymbols != null && (yield { path: "annotation-symbols.json", contents: e6.annotationSymbols });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === "annotation-symbols.json") return { annotationSymbols: t6(r6) };
  let n = e6.match(bj)?.[1];
  if (n) return { annotations: { [n]: t6(r6) } };
}, references: [SD, a3, DD], integrityCheck: CD };
$i();
$i();
$i();
var ns = tr("lcat", "LocationCategoryId");
var s3 = g.Intersect([g.Object({ id: g.Ref(ns), parent: g.Optional(g.Ref(ns)) }), Qu(["name"]), ci], { $id: "LocationCategory" });
var wD = [ns, s3];
$i();
$i();
var al;
(function(e6) {
  e6.UnknownCategoryError = "UnknownCategoryError", e6.UnknownParentCategoryError = "UnknownParentCategoryError", e6.UnknownParentLocationError = "UnknownParentLocationError";
})(al || (al = {}));
var FD = (e6) => {
  if (e6.locationCategories == null && e6.locations == null) return te(true);
  if (e6.locationCategories != null) {
    let o = rr(e6.locationCategories, (i) => i.id, "locationCategories");
    if (o.isErr()) return o;
  }
  if (e6.locations != null) {
    let o = rr(e6.locations, (i) => i.id, "locations");
    if (o.isErr()) return o;
  }
  if (e6.locationInstances != null) {
    let o = rr(e6.locationInstances, (i) => i.id, "locationInstances");
    if (o.isErr()) return o;
  }
  let r6 = new Set(e6.locationCategories?.map((o) => o.id) ?? []);
  for (let o of e6.locationCategories ?? []) if (o.parent != null && !r6.has(o.parent)) return oe2({ kind: al.UnknownParentCategoryError, properties: { categoryId: o.id, parentCategoryId: o.parent } });
  let t6 = xr(e6);
  for (let o of e6.locations ?? []) {
    for (let i of o.categories) if (!r6.has(i)) return oe2({ kind: al.UnknownCategoryError, properties: { locationId: o.id, categoryId: i } });
    for (let i of o.geometryAnchors) {
      let s6 = t6(i.floorId, i.geometryId);
      if (s6.isErr()) return s6;
    }
  }
  let n = new Set(e6.locations?.map((o) => o.id) ?? []);
  for (let o of e6.locationInstances ?? []) {
    if (!n.has(o.parentId)) return oe2({ kind: al.UnknownParentLocationError, properties: { locationInstanceId: o.id, parentLocationId: o.parentId } });
    for (let i of o.categories ?? []) if (!r6.has(i)) return oe2({ kind: al.UnknownCategoryError, properties: { locationId: o.id, categoryId: i } });
    for (let i of o.geometryAnchors ?? []) {
      let s6 = t6(i.floorId, i.geometryId);
      if (s6.isErr()) return s6;
    }
  }
  return te(true);
};
$i();
var os = tr("loc", "LocationId");
var fy = tr("loci", "LocationInstanceId");
var MD = g.Object({ name: g.String(), url: g.String({ format: "uri" }) }, { $id: "LocationSocial" });
var AD = g.Object({ url: g.String({ format: "uri" }) }, { $id: "LocationImage" });
var u3 = g.Object({ label: g.String(), url: g.String({ format: "uri" }) }, { $id: "LocationLink" });
var l3 = g.String({ pattern: "^[0-2][0-9]:[0-6][0-9](:[0-6][0-9])?$", $id: "OpeningHoursTime" });
var OD = g.Union([g.Literal("Sunday"), g.Literal("Monday"), g.Literal("Tuesday"), g.Literal("Wednesday"), g.Literal("Thursday"), g.Literal("Friday"), g.Literal("Saturday")], { $id: "OpeningHoursDay" });
var vj = "PublicHolidays";
var c3 = g.Union([OD, g.Literal(vj)], { $id: "OpeningHoursDayOrPublicHoliday" });
var hy = g.Object({ "@type": g.Optional(g.Literal("OpeningHoursSpecification", { description: "The type of opening hours" })), opens: g.Optional(g.Ref(l3, { description: "The time the opening hours start" })), closes: g.Optional(g.Ref(l3, { description: "The time the opening hours end" })), dayOfWeek: g.Optional(g.Union([g.Ref(c3), g.Array(g.Ref(c3))], { description: "The days of the week the opening hours apply to" })), validFrom: g.Optional(g.String({ format: "date", description: "The date the opening hours start, in ISO 8601 format" })), validThrough: g.Optional(g.String({ format: "date", description: "The date the opening hours end, in ISO 8601 format" })) }, { $id: "OpeningHoursSpecification" });
var gy = g.Intersect([g.Object({ id: g.Ref(os), categories: g.Array(g.Ref(ns)), logo: g.Optional(g.String({ format: "uri" })), phone: g.Optional(g.String()), social: g.Array(g.Ref(MD)), images: g.Array(g.Ref(AD)), links: g.Array(g.Ref(u3)), website: g.Optional(g.Ref(u3)), openingHours: g.Optional(g.Array(g.Ref(hy))) }), Qu(["name"]), rf(), ci], { $id: "Location" });
var p3 = g.Intersect([g.Object({ id: g.Ref(fy), parentId: g.Ref(os) }), g.Partial(g.Omit(gy, ["id", "parentId", "details"])), Kn2], { $id: "LocationInstance", description: "A location instance is a particular instance of an location that has some properties different from the parent." });
var yy = [os, fy, MD, AD, u3, l3, OD, c3, hy, gy, p3];
var xj = g.Object({ locations: g.Array(g.Ref(gy)), locationCategories: g.Array(g.Ref(s3)), locationInstances: g.Optional(g.Array(g.Ref(p3))) }, { $id: "LocationsExtensionSchema" });
var BD = "locations.json";
var PD = "location-categories.json";
var kD = "location-instances.json";
var _D = { name: "ext:locations", schema: xj, intoBundle: function* (e6) {
  e6.locations != null && (yield { path: BD, contents: e6.locations }), e6.locationCategories != null && (yield { path: PD, contents: e6.locationCategories }), e6.locationInstances != null && (yield { path: kD, contents: e6.locationInstances });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === BD) return { locations: t6(r6) };
  if (e6 === PD) return { locationCategories: t6(r6) };
  if (e6 === kD) return { locationInstances: t6(r6) };
}, references: [...wD, ...yy], integrityCheck: FD };
$i();
$i();
var pi;
(function(e6) {
  e6.EnterpriseLocationWithUnknownLocationError = "EnterpriseLocationWithUnknownLocationError", e6.EnterpriseCategoryWithUnknownLocationCategoryError = "EnterpriseCategoryWithUnknownLocationCategoryError", e6.InstanceWithUnknownLocationInstanceError = "InstanceWithUnknownLocationInstanceError", e6.InstanceWithUnknownEnterpriseLocationError = "InstanceWithUnknownEnterpriseLocationError", e6.EnterpriseLocationWithUnknownSibling = "EnterpriseLocationWithUnknownSibling", e6.EnterpriseLocationInstanceWithUnknownSibling = "EnterpriseLocationInstanceWithUnknownSibling", e6.EnterpriseVenueWithUnknownTopLocationError = "EnterpriseVenueWithUnknownTopLocationError", e6.EnterpriseLocationWithInvalidPrimaryCategory = "EnterpriseLocationWithInvalidPrimaryCategory";
})(pi || (pi = {}));
var LD = (e6) => {
  if (e6.cms == null) return te(true);
  let r6 = e6.cms, t6 = rr(e6.cms.categories, (h) => h.id, "cms.categories");
  if (t6.isErr()) return t6;
  let n = new Set(e6.locationCategories?.map((h) => h.id) ?? []);
  for (let h of r6.categories ?? []) if (!n.has(h.categoryId)) return oe2({ kind: pi.EnterpriseCategoryWithUnknownLocationCategoryError, properties: { enterpriseCategoryId: h.id, locationCategoryId: h.categoryId } });
  let o = rr(e6.cms.locations, (h) => h.id, "cms.locations");
  if (o.isErr()) return o;
  let i = new Map(e6.locations?.map((h) => [h.id, h]) ?? []);
  for (let h of r6.locations ?? []) {
    if (!i.has(h.locationId)) return oe2({ kind: pi.EnterpriseLocationWithUnknownLocationError, properties: { enterpriseLocationId: h.id, locationId: h.locationId } });
    for (let b of h.siblingGroups ?? []) for (let I of b.siblings ?? []) if (!i.has(I)) return oe2({ kind: pi.EnterpriseLocationWithUnknownSibling, properties: { enterpriseLocationId: h.id, siblingLocationId: I, label: b.label } });
    if (h.primaryCategory != null) {
      let b = i.get(h.locationId);
      if (b != null && !b.categories.includes(h.primaryCategory)) return oe2({ kind: pi.EnterpriseLocationWithInvalidPrimaryCategory, properties: { enterpriseLocationId: h.id, locationId: h.locationId, primaryCategory: h.primaryCategory } });
    }
  }
  if (r6.venue?.topLocations != null) {
    for (let h of r6.venue.topLocations) if (!i.has(h)) return oe2({ kind: pi.EnterpriseVenueWithUnknownTopLocationError, properties: { locationId: h } });
  }
  let s6 = new Set(e6.cms.locations?.map((h) => h.id) ?? []), u6 = rr(e6.cms.locationInstances, (h) => h.id, "cms.locationInstances");
  if (u6.isErr()) return u6;
  let l = new Set(e6.locationInstances?.map((h) => h.id) ?? []);
  for (let h of r6.locationInstances ?? []) {
    if (!s6.has(h.parentId)) return oe2({ kind: pi.InstanceWithUnknownEnterpriseLocationError, properties: { enterpriseLocationInstanceId: h.id, enterpriseLocationId: h.parentId } });
    if (!l.has(h.locationInstanceId)) return oe2({ kind: pi.InstanceWithUnknownLocationInstanceError, properties: { enterpriseLocationInstanceId: h.id, locationInstanceId: h.locationInstanceId } });
    for (let b of h.siblingGroups ?? []) for (let I of b.siblings ?? []) if (!i.has(I)) return oe2({ kind: pi.EnterpriseLocationInstanceWithUnknownSibling, properties: { enterpriseLocationInstanceId: h.id, siblingLocationId: I, label: b.label } });
  }
  let c = li(e6), d = xr(e6), f = rr(e6.cms.floorText, (h) => h.properties.id, "cms.floorText");
  if (f.isErr()) return f;
  for (let [h, b] of rt(r6.floorText ?? {})) {
    let I = c(h);
    if (I.isErr()) return I;
    for (let E of b.features) {
      if (!("geometryId" in E.properties)) continue;
      let v6 = d(h, E.properties.geometryId);
      if (v6.isErr()) return v6;
    }
  }
  for (let [h, b] of rt(r6.textures ?? {})) {
    let I = c(h);
    if (I.isErr()) return I;
    for (let E of b) {
      let v6 = d(h, E.geometryId);
      if (v6.isErr()) return v6;
    }
  }
  for (let [h, b] of rt(r6.layers ?? {})) {
    let I = c(h);
    if (I.isErr()) return I;
    for (let E of Xe(b ?? {})) {
      let v6 = d(h, E);
      if (v6.isErr()) return v6;
    }
  }
  for (let [h, b] of rt(r6.textAreas ?? {})) {
    let I = c(h);
    if (I.isErr()) return I;
    for (let E of b.features) if ("geometryId" in E.properties) {
      let v6 = d(h, E.properties.geometryId);
      if (v6.isErr()) return v6;
    }
  }
  return te(true);
};
$i();
$i();
var of = tr("el", "EnterpriseLocationId");
var d3 = tr("ec", "EnterpriseCategoryId");
var m3 = tr("eli", "EnterpriseLocationInstanceId");
var f3 = tr("ev", "EnterpriseVenueId");
var h3 = tr("eft", "EnterpriseFloorTextId");
var RD = [of, d3, m3, f3, h3];
var ND = g.Object({ id: g.Ref(d3), categoryId: g.Ref(ns), color: g.Optional(g.String()), sortOrder: g.Number(), iconFromDefaultList: g.Optional(g.Union([g.String(), g.Null()])), picture: g.Optional(g.String({ format: "uri", description: "The category's picture" })) }, { $id: "EnterpriseCategory" });
var g3 = g.Object({ categories: g.Optional(g.Array(g.Ref(ND))) }, { $id: "EnterpriseCategoriesSchema" });
var $D = [ND, g3];
$i();
var jD = Nn(["left", "center", "right"]);
var Ij = jD.schema;
var v0e = jD.values;
var y3 = g.Object({ id: g.Ref(h3), text: g.String(), visible: g.Boolean({ default: true }), fontSize: g.Number({ default: 12, exclusiveMinimum: 0 }), fontFamily: g.String({ default: "Droid Sans" }), color: g.String({ default: "black" }), rotation: g.Number({ minimum: 0, maximum: 360 }), align: Ij }, { $id: "FloorTextCommonProperties" });
var b3 = g.Intersect([g.Ref(y3), Po], { $id: "AnchoredFloorTextProperties" });
var v3 = g.Intersect([g.Ref(y3), g.Object({ verticalOffset: g.Number() })], { $id: "FloatingFloorTextProperties" });
var UD = g.Union([g.Ref(b3), g.Ref(v3)], { $id: "FloorTextProperties" });
var GD = Vr(on, g.Ref(UD), { $id: "FloorTextFeature" });
var Ej = Vr(on, g.Ref(b3), { $id: "AnchoredFloorTextFeature" });
var Cj = Vr(on, g.Ref(v3), { $id: "FloatingFloorTextFeature" });
var zD = hn(g.Ref(GD), { $id: "EnterpriseFloorTextFeatureCollection" });
var VD = g.Record(ze, g.Ref(zD), { $id: "EnterpriseFloorTextCollectionsByFloor", additionalProperties: false });
var x3 = g.Object({ floorText: g.Optional(g.Ref(VD)) }, { $id: "EnterpriseFloorTextSchema" });
var HD = [y3, b3, v3, UD, GD, Ej, Cj, zD, VD, x3];
$i();
var ZD = nr(g.Record(an2, g.String({ minLength: 1 }), { additionalProperties: false, $id: "EnterpriseLayers" }));
var WD = nr(g.Record(ze, g.Ref(ZD), { additionalProperties: false, $id: "EnterpriseLayersByFloor" }));
var I3 = g.Object({ layers: g.Optional(g.Ref(WD)) }, { $id: "EnterpriseLayersSchema" });
var XD = [ZD, WD, I3];
$i();
$i();
$i();
var E3 = Nn(["closed-temporarily", "new", "pop-up", "coming-soon", "relocated"]);
var Sj = E3.schema;
var A0e = E3.values;
var O0e = E3.record;
var C3 = g.Object({ type: Sj, start: g.Optional(g.String({ format: "date", description: "The start date of the state" })), end: g.Optional(g.String({ format: "date", description: "The end date of the state" })) }, { $id: "LocationState", description: "The state of a location. Start and end dates are optional." });
var S3 = g.Object({ label: g.String(), siblings: g.Array(g.Ref(os)) }, { $id: "SiblingGroup" });
var by = g.Object({ name: g.String(), code: g.String() }, { $id: "Language" });
var JD = [C3, S3, by];
var vy = g.Object({ id: g.Ref(of), locationId: g.Ref(os), cmsId: g.String(), type: g.String(), sortOrder: g.Number(), tags: g.Optional(g.Array(g.String())), picture: g.Optional(g.String({ format: "uri", description: "The picture of the location" })), states: g.Optional(g.Array(g.Ref(C3), { description: "The location's state. No more than one state should be active at a time, and all but at most one should have dates set" })), siblingGroups: g.Optional(g.Array(g.Ref(S3))), gallery: g.Optional(g.Array(g.Object({ caption: g.Optional(g.String()), image: g.String({ format: "uri" }), embeddedUrl: g.Optional(g.String({ format: "uri", description: "The URL to link from the image" })) }, { description: "The location's image gallery" }), { description: "The location's image gallery" })), showFloatingLabelWhenImagePresent: g.Optional(g.Boolean({ description: "Whether to show the flat label when an image is present" })), amenity: g.Optional(g.String({ description: "The location's amenity type. Only set if the location is an amenity" })), showLogo: g.Optional(g.Boolean({ description: "Whether to show the logo of the location" })), primaryCategory: g.Optional(g.Ref(ns)) }, { $id: "EnterpriseLocation" });
var D3 = g.Object({ locations: g.Optional(g.Array(g.Ref(vy))) }, { $id: "EnterpriseLocationsSchema" });
var YD = [vy, D3];
var KD = g.Intersect([g.Object({ id: g.Ref(m3), parentId: g.Ref(of), locationInstanceId: g.Ref(fy) }), g.Partial(g.Omit(vy, ["id", "parentId", "locationId"]))], { $id: "EnterpriseLocationInstance", description: "A locationInstance is a particular instance of an Enterprise Location that has some properties different from the parent." });
var T3 = g.Object({ locationInstances: g.Optional(g.Array(g.Ref(KD))) }, { $id: "EnterpriseLocationInstancesSchema" });
var qD = [KD, T3];
$i();
var w3 = Nn(["near", "center"], { $id: "EnterpriseTextAreaAlignment" });
var QD = w3.schema;
var Y0e = w3.values;
var K0e = w3.record;
var F3 = g.Object({ maxWidth: g.Number({ exclusiveMinimum: 0, description: "The maximum width of the label, in meters." }), maxHeight: g.Number({ exclusiveMinimum: 0, description: "The maximum height of the label, in meters." }), align: g.Ref(QD), rotation: g.Number({ minimum: 0, maximum: 360, description: "Rotation in degrees, about the center of the image. North is 0, east is 90." }) }, { $id: "EnterpriseBaseTextAreaProperties" });
var e7 = g.Intersect([g.Ref(F3), Po], { $id: "EnterpriseAnchoredTextAreaProperties" });
var t7 = g.Intersect([g.Ref(F3), g.Object({ verticalOffset: g.Number({ minimum: 0, description: "How high to position the image, in meters, relative to the ground plane." }) })], { $id: "EnterpriseFloatingTextAreaProperties" });
var r7 = g.Union([e7, t7], { $id: "EnterpriseTextAreaProperties" });
var n7 = Vr(g.Ref(on), r7, { $id: "EnterpriseTextAreaFeature" });
var o7 = hn(g.Ref(n7), { $id: "EnterpriseTextAreaCollection" });
var i7 = g.Record(ze, g.Ref(o7), { $id: "EnterpriseTextAreasByFloor", additionalProperties: false });
var a7 = g.Object({ textAreas: g.Optional(g.Ref(i7)) }, { $id: "EnterpriseTextAreasSchema" });
var s7 = [QD, F3, e7, t7, r7, n7, o7, i7];
$i();
var M3 = g.Object({ u: g.Number(), v: g.Number() }, { $id: "EnterpriseTextureUV" });
var A3 = Nn(["top", "side"], { $id: "EnterpriseTextureFace" });
var u7 = A3.schema;
var rhe = A3.values;
var nhe = A3.record;
var O3 = Nn(["inside", "outside", "both"], { $id: "EnterpriseTextureSurface" });
var l7 = O3.schema;
var ohe = O3.values;
var ihe = O3.record;
var c7 = g.Tuple([Jc, Yc, Jc, Yc], { $id: "EnterpriseTextureBounds" });
var p7 = g.Intersect([g.Object({ repeat: g.Ref(M3), offset: g.Ref(M3), rotation: g.Number({ minimum: 0, maximum: 360 }), path: g.String({ format: "uri" }), face: g.Ref(u7), surface: g.Ref(l7), bounds: g.Ref(c7) }, { $id: "EnterpriseTextureProperties" }), Po], { $id: "EnterpriseTexture" });
var d7 = g.Array(g.Ref(p7), { $id: "EnterpriseTextures" });
var m7 = g.Record(ze, g.Ref(d7), { $id: "EnterpriseTexturesByFloor", additionalProperties: false });
var B3 = g.Object({ textures: g.Optional(g.Ref(m7)) }, { $id: "EnterpriseTexturesSchema" });
var f7 = [p7, d7, B3, M3, u7, l7, c7, m7];
$i();
var h7 = g.Intersect([g.Object({ id: g.Ref(f3), slug: g.String(), defaultLanguage: g.Ref(by), languages: g.Array(g.Ref(by)), countrycode: g.Optional(g.String()), logo: g.Optional(g.String({ format: "uri" })), mappedinWebUrl: g.Optional(g.String({ format: "uri" })), topLocations: g.Optional(g.Array(g.Ref(os))), operationHours: g.Optional(g.Array(g.Ref(hy))), coverImage: g.Optional(g.String({ format: "uri" })) }), Qu(["name"]), ci], { $id: "EnterpriseVenue" });
var P3 = g.Object({ venue: g.Optional(g.Ref(h7)) }, { $id: "EnterpriseVenueSchema" });
var g7 = [h7, P3];
var b7 = g.Intersect([P3, D3, T3, g3, B3, x3, I3, a7], { $id: "CMSProperties" });
var y7 = g.Object({ cms: g.Optional(g.Ref(b7)) }, { $id: "CMSExtensionSchema" });
var Dj = /^cms\/(?:([^/]+)\/)?([^/]+)\.(?:json|geojson)$/;
var v7 = { name: "ext:cms", schema: y7, intoBundle: function* (e6) {
  if (e6.cms == null) return;
  let r6 = e6.cms;
  for (let t6 of Xe(r6)) switch (t6) {
    case "floorText":
      for (let n of Xe(r6.floorText ?? {})) yield { path: `cms/floorText/${n}.geojson`, contents: (r6.floorText ?? {})[n] };
      continue;
    case "textures":
      for (let n of Xe(r6.textures ?? {})) yield { path: `cms/textures/${n}.json`, contents: (r6.textures ?? {})[n] };
      continue;
    case "textAreas":
      for (let n of Xe(r6.textAreas ?? {})) yield { path: `cms/textAreas/${n}.geojson`, contents: (r6.textAreas ?? {})[n] };
      continue;
    default:
      yield { path: `cms/${t6}.json`, contents: r6[t6] };
      continue;
  }
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(Dj);
  if (!n) return;
  let [, o, i] = n, s6 = t6(r6);
  switch (o) {
    case "floorText":
    case "textures":
    case "textAreas":
      return { cms: { [o]: { [i]: s6 } } };
    default:
      return { cms: { [i]: s6 } };
  }
}, references: [b7, y7, ...g7, ...YD, ...qD, ...$D, ...f7, ...XD, ...HD, ...s7, ...RD, ...JD, ...yy], integrityCheck: LD };
$i();
$i();
$i();
$i();
var di;
(function(e6) {
  e6.NavigationFlagMissingDeclaration = "NavigationFlagMissingDeclaration", e6.NavigationFlagDuplicateBit = "NavigationFlagDuplicateBit", e6.NavigationFlagIncorrectFlagsLength = "NavigationFlagIncorrectFlagsLength", e6.NavigationFlagValueTooBig = "NavigationFlagValueTooBig";
})(di || (di = {}));
var x7 = (e6) => {
  let { navigationFlags: r6 } = e6;
  if (!r6 || Object.keys(r6).length === 0) return te(true);
  let t6 = Object.entries(r6).map(([i, s6]) => ({ key: i, ...s6 })).sort((i, s6) => i.index !== s6.index ? i.index - s6.index : i.bit - s6.bit), n = 0, o = -1;
  for (let i of t6) {
    if (i.bit === o) return oe2({ kind: di.NavigationFlagDuplicateBit, properties: { index: i.index, bit: i.bit, path: `navigationFlags.${i.key}` } });
    if (i.index != n) {
      if (o != 31) return oe2({ kind: di.NavigationFlagMissingDeclaration, properties: { index: n, bit: o + 1, path: "navigationFlags" } });
      if (i.index != n + 1 || i.bit != 0) return oe2({ kind: di.NavigationFlagMissingDeclaration, properties: { index: n + 1, bit: 0, path: "navigationFlags" } });
      n = i.index, o = 0;
    } else {
      if (i.bit !== o + 1) return oe2({ kind: di.NavigationFlagMissingDeclaration, properties: { index: i.index, bit: o + 1, path: "navigationFlags" } });
      o = i.bit;
    }
  }
  return te(true);
};
$i();
function ru(e6, r6) {
  return r6 && (e6.flags[r6.index] & 1 << r6.bit) !== 0;
}
$i();
var I7 = 2 ** 32 - 1;
var af = (e6) => {
  let r6 = Object.keys(e6.navigationFlags ?? {}).length;
  if (r6 === 0) return { index: -1, flag: 0 };
  let t6 = Math.floor(r6 / 32), n = r6 % 32;
  return { index: t6, flag: 2 ** n - 1 };
};
var Ip = (e6, r6, t6) => {
  if (r6.index == -1 && e6.length === 0) return te(true);
  let n = r6.flag > 0 || r6.index === -1 ? r6.index + 1 : r6.index;
  if (e6.length !== n) return oe2({ kind: di.NavigationFlagIncorrectFlagsLength, properties: { expected: n, actual: e6.length, path: t6 } });
  for (let o = 0; o < e6.length; o++) {
    let i = e6[o];
    if (o < r6.index) {
      if (i > I7) return oe2({ kind: di.NavigationFlagValueTooBig, properties: { index: o, flagValue: i, expectedMaxFlagValue: I7, path: t6 } });
      continue;
    } else if (i > r6.flag) return oe2({ kind: di.NavigationFlagValueTooBig, properties: { index: o, flagValue: i, expectedMaxFlagValue: r6.flag, path: t6 } });
  }
  return te(true);
};
var Tj = g.Object({ index: g.Integer({ description: "The index of the flag in a flags array.", minimum: 0 }), bit: g.Integer({ description: "The bit position of the flag in a flag's bitfield.", minimum: 0, maximum: 31 }) }, { $id: "NavigationFlagDeclarationCore" });
var E7 = g.Intersect([Tj, Kn2], { $id: "NavigationFlagDeclaration", description: 'A NavigationFlagDeclaration describes the relationship between a "key" that a developer might use to wayfind using that flag, and the index and bit position in an object\'s `flags` array.' });
var k3 = { accessible: "accessible", outdoors: "outdoors", public: "public" };
var C7 = g.Record(g.String(), E7, { $id: "NavigationFlagDeclarations", description: "Any well known and custom flags present in the MVF" });
var wj = g.Object({ navigationFlags: g.Ref(C7) }, { $id: "NavigationFlagsSchema" });
var xy = g.Array(g.Integer({ minimum: 0, maximum: Math.pow(2, 32) - 1 }), { $id: "Flags" });
var _3 = g.Object({ flags: g.Ref(xy) }, { $id: "WithFlags" });
var sl2 = g.Intersect([xp, _3], { $id: "FlaggedGeometryAnchor" });
var Fj = g.Object({ geometryAnchor: sl2 }, { $id: "WithFlaggedGeometryAnchor" });
var Mj = g.Object({ geometryAnchors: g.Array(sl2) }, { $id: "WithFlaggedGeometryAnchors" });
var S7 = { name: "ext:mvf-navigation-flags", schema: wj, intoBundle: function* (e6) {
  e6.navigationFlags != null && (yield { path: "navigationFlags.json", contents: e6.navigationFlags });
}, fromBundle: (e6, r6, t6) => e6 !== "navigationFlags.json" ? void 0 : { navigationFlags: t6(r6) }, references: [E7, C7, xy, sl2, Fj, Mj], integrityCheck: x7 };
$i();
var D7 = (e6) => {
  if (e6.connections == null) return te(true);
  let r6 = rr(e6.connections, (o) => o.id, "connections");
  if (r6.isErr()) return r6;
  let t6 = xr(e6), n = af(e6);
  for (let [o, i] of e6.connections.entries()) {
    for (let [s6, u6] of i.entrances.entries()) {
      let l = t6(u6.floorId, u6.geometryId);
      if (l.isErr()) return l;
      let c = Ip(u6.flags, n, `connections[${o}].entrances[${s6}]`);
      if (c.isErr()) return c;
    }
    for (let [s6, u6] of i.exits.entries()) {
      let l = t6(u6.floorId, u6.geometryId);
      if (l.isErr()) return l;
      let c = Ip(u6.flags, n, `connections[${o}].exits[${s6}]`);
      if (c.isErr()) return c;
    }
  }
  return te(true);
};
var w7 = tr("c", "ConnectionId");
var { schema: Aj, values: uge, record: Oj } = Nn(["elevator", "escalator", "travelator", "stairs", "door", "ramp", "ladder"], { $id: "ConnectionType" });
var F7 = Aj;
var L3 = Oj;
var M7 = g.Intersect([g.Object({ id: g.Ref(w7, { description: "The unique identifier for the connection." }), entrances: g.Array(g.Ref(sl2)), exits: g.Array(g.Ref(sl2)), entryCost: g.Number({ description: "The cost to enter the connection.", minimum: 0 }), floorCostMultiplier: g.Number({ description: "The cost multiplier for each floor transitioned.", minimum: 1 }), type: g.Ref(F7, { description: "The type of connection." }) }), Kn2, ci], { $id: "ConnectionsProperties" });
var A7 = g.Array(g.Ref(M7), { $id: "ConnectionsCollection" });
var Bj = g.Object({ connections: g.Ref(A7) }, { $id: "ConnectionsExtensionSchema" });
var T7 = "connections.json";
var O7 = { name: "ext:connections", schema: Bj, intoBundle: function* (e6) {
  e6.connections != null && (yield { path: T7, contents: e6.connections });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === T7) return { connections: t6(r6) };
}, references: [M7, A7, F7, w7, sl2, xy], integrityCheck: D7 };
$i();
$i();
var B7 = (e6) => {
  if (e6.defaultStyle == null) return te(true);
  let r6 = xr(e6);
  for (let t6 of Object.values(e6.defaultStyle)) if (t6 != null) for (let n of t6.geometryAnchors) {
    let o = r6(n.floorId, n.geometryId);
    if (o.isErr()) return o;
  }
  return te(true);
};
var P7 = g.Intersect([rf(), ci, g.Object({ altitude: g.Number({ description: "How far off the bottom of the floor the objects with this style should be drawn, in meters." }), color: g.String({ pattern: "^#[0-9a-fA-F]{6}$", description: "Color should be represented with a hash (#), followed by 6 hexadecimal digits. ex: #RRGGBB" }), height: g.Number({ minimum: 0, description: "The height of the objects belonging to this layer, in meters." }), opacity: g.Number({ minimum: 0, maximum: 1, description: "The opacity of the objects belonging to this layer, from 0 to 1." }), buffer: g.Number({ description: "The buffer amount to apply to the geometry, in meters. This can be used to inflate line string geometry for walls, but might also be applicable as a way to grow or shrink polygon geometry for aesthetic purposes. Can be negative." }), hidden: g.Optional(g.Boolean({ description: "Whether or not the objects with this style should be hidden." })) })], { $id: "DefaultStyle" });
var k7 = g.Record(g.String(), g.Ref(P7), { $id: "DefaultStyleCollection", additionalProperties: false });
var Pj = g.Object({ defaultStyle: g.Ref(k7) }, { $id: "DefaultStyleSchema" });
var _7 = { name: "ext:mvf-default-style", schema: Pj, intoBundle: function* (e6) {
  e6.defaultStyle != null && (yield { path: "default-style.json", contents: e6.defaultStyle });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === "default-style.json") return { defaultStyle: t6(r6) };
}, references: [P7, k7], integrityCheck: B7 };
$i();
$i();
$i();
$i();
var Iy;
(function(e6) {
  e6.InvalidDefaultFloorError = "InvalidDefaultFloorError";
})(Iy || (Iy = {}));
var L7 = (e6) => {
  if (e6.floorStacks == null) return te(true);
  let r6 = rr(e6.floorStacks, (n) => n.id, "floorStacks");
  if (r6.isErr()) return r6;
  let t6 = li(e6);
  for (let n of e6.floorStacks) {
    for (let o of n.floors) {
      let i = t6(o);
      if (i.isErr()) return i;
    }
    if (n.defaultFloor != null && !n.floors.includes(n.defaultFloor)) return oe2({ kind: Iy.InvalidDefaultFloorError, properties: { floorStackId: n.id, floorId: n.defaultFloor } });
  }
  return te(true);
};
var sf = tr("fs", "FloorStackId");
var N7 = g.Intersect([g.Object({ id: g.Ref(sf, { description: "The unique identifier for the floor stack." }), floors: g.Array(g.Ref(ze), { uniqueItems: true, minItems: 1, description: "The floors that are part of this floor stack." }), defaultFloor: g.Optional(g.Ref(ze, { description: "The default floor for the floor stack." })) }), Kn2], { $id: "FloorStacksProperties" });
var $7 = g.Array(g.Ref(N7), { $id: "FloorStackCollection" });
var kj = g.Object({ floorStacks: g.Ref($7) }, { $id: "FloorStackExtensionSchema" });
var R7 = "floor-stacks.json";
var j7 = { name: "ext:floor-stacks", schema: kj, intoBundle: function* (e6) {
  e6.floorStacks != null && (yield { path: R7, contents: e6.floorStacks });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === R7) return { floorStacks: t6(r6) };
}, references: [sf, N7, $7], integrityCheck: L7 };
$i();
$i();
var uf;
(function(e6) {
  e6.MissingFloorStackError = "MissingFloorStackError", e6.UnknownFloorStackError = "UnknownFloorStackError";
})(uf || (uf = {}));
var U7 = (e6) => {
  if (e6.facade == null) return te(true);
  if (e6.floorStacks == null) return oe2({ kind: uf.MissingFloorStackError, properties: null });
  let r6 = new Set(e6.floorStacks.map((o) => o.id)), t6 = xr(e6), n = li(e6);
  for (let [o, i] of rt(e6.facade)) {
    if (i == null) continue;
    let s6 = n(o);
    if (s6.isErr()) return s6;
    for (let u6 of i) {
      let { floorStackId: l, geometryIds: c } = u6;
      if (!r6.has(l)) return oe2({ kind: uf.UnknownFloorStackError, properties: { floorStackId: l } });
      for (let d of c) {
        let f = t6(o, d);
        if (f.isErr()) return f;
      }
    }
  }
  return te(true);
};
var G7 = g.Intersect([g.Object({ floorStackId: g.Ref(sf) }), hp], { $id: "Facade" });
var _j = g.Object({ facade: nr(g.Record(ze, g.Array(g.Ref(G7)), { additionalProperties: false })) }, { $id: "FacadeExtensionSchema" });
var Lj = /^facade\/(.*)\.json$/;
var z7 = { name: "ext:facade", schema: _j, intoBundle: function* (e6) {
  if (e6.facade != null) for (let r6 of Xe(e6.facade)) yield { path: `facade/${r6}.json`, contents: e6.facade[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(Lj)?.[1];
  if (n) return { facade: { [n]: t6(r6) } };
}, references: [sf, G7], integrityCheck: U7 };
$i();
$i();
var V7 = (e6) => {
  if (e6.floorImages == null) return te(true);
  let r6 = xr(e6);
  for (let [t6, n] of rt(e6.floorImages)) if (n != null) for (let o of n.features) {
    if (!("geometryId" in o.properties)) continue;
    let i = o.properties.geometryId, s6 = r6(t6, i);
    if (s6.isErr()) return s6;
  }
  return te(true);
};
var R3 = g.Object({ path: g.String({ format: "uri", description: "The path to the image. This will be a remote URL." }), width: g.Number({ minimum: 0, description: "The width of the image when represented on the map, in meters." }), height: g.Number({ minimum: 0, description: "The height of the image when represented on the map, in meters." }), rotation: g.Number({ minimum: 0, maximum: 360, description: "Rotation in degrees, about the center of the image. North is 0, east is 90." }) }, { $id: "BaseFloorImageProperties" });
var H7 = g.Intersect([g.Ref(R3), Po], { $id: "AnchoredFloorImageProperties" });
var Z7 = g.Intersect([g.Ref(R3), g.Object({ verticalOffset: g.Number({ minimum: 0, description: "How high to position the image, in meters, relative to the ground plane." }) })], { $id: "FloatingFloorImageProperties" });
var W7 = g.Union([H7, Z7], { $id: "FloorImageProperties" });
var X7 = Vr(g.Ref(on), W7, { $id: "FloorImageFeature" });
var J7 = hn(g.Ref(X7), { $id: "FloorImageCollection" });
var Rj = g.Object({ floorImages: nr(g.Record(ze, g.Ref(J7), { additionalProperties: false })) }, { $id: "FloorImagesExtensionSchema" });
var Nj = /^floorImages\/(.*)\.geojson$/;
var Y7 = { name: "ext:floor-images", schema: Rj, intoBundle: function* (e6) {
  if (e6.floorImages != null) for (let r6 of Xe(e6.floorImages)) yield { path: `floorImages/${r6}.geojson`, contents: e6.floorImages[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(Nj)?.[1];
  if (n) return { floorImages: { [n]: t6(r6) } };
}, references: [R3, H7, Z7, W7, X7, J7], integrityCheck: V7 };
$i();
$i();
var K7 = (e6) => {
  if (e6.kinds == null) return te(true);
  let r6 = xr(e6);
  for (let [t6, n] of rt(e6.kinds)) if (n != null) for (let o of Xe(n)) {
    let i = r6(t6, o);
    if (i.isErr()) return i;
  }
  return te(true);
};
var { values: xye, schema: $j, record: Iye } = Nn(["room", "hallway", "wall", "object", "poi", "area", "window"], { $id: "Kind" });
var q7 = $j;
var Q7 = nr(g.Record(an2, g.Ref(q7), { additionalProperties: false, $id: "GeometryKinds" }));
var jj = g.Object({ kinds: nr(g.Record(ze, g.Ref(Q7), { additionalProperties: false })) }, { $id: "KindsExtensionSchema" });
var Uj = /^kinds\/(.*)\.json$/;
var eT = { name: "ext:kinds", schema: jj, intoBundle: function* (e6) {
  if (e6.kinds != null) for (let r6 of Xe(e6.kinds)) yield { path: `kinds/${r6}.json`, contents: e6.kinds[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(Uj)?.[1];
  if (n) return { kinds: { [n]: t6(r6) } };
}, references: [q7, Q7], integrityCheck: K7 };
$i();
$i();
$i();
var lf;
(function(e6) {
  e6.UnknownNeighbor = "UnknownNeighbor", e6.SelfReference = "SelfReference";
})(lf || (lf = {}));
var tT = (e6) => {
  if (e6.nodes == null) return te(true);
  let r6 = rr(e6.nodes, (o) => o.properties.id, "nodes");
  if (r6.isErr()) return r6;
  let t6 = xr(e6), n = af(e6);
  for (let [o, i] of rt(e6.nodes)) {
    if (i == null) continue;
    let s6 = new Set(i.features.map((u6) => u6.properties.id));
    for (let [u6, l] of i.features.entries()) {
      for (let c of l.properties.geometryIds) {
        let d = t6(o, c);
        if (d.isErr()) return d;
      }
      for (let [c, d] of l.properties.neighbors.entries()) {
        if (!s6.has(d.id)) return oe2({ kind: lf.UnknownNeighbor, properties: { floorId: o, nodeId: l.properties.id, neighborId: d.id } });
        if (d.id === l.properties.id) return oe2({ kind: lf.SelfReference, properties: { floorId: o, nodeId: l.properties.id } });
        let f = Ip(d.flags, n, `nodes["${o}"].features[${u6}].properties.neighbors[${c}]`);
        if (f.isErr()) return f;
      }
    }
  }
  return te(true);
};
var N3 = tr("n", "NodeId");
var rT = g.Intersect([g.Object({ id: g.Ref(N3, { description: "The unique identifier for the node." }), extraCost: g.Number({ minimum: 0, description: "The extra cost to traverse to the node, above the straight-line distance." }) }), _3], { $id: "NodeNeighbor" });
var nT = g.Intersect([g.Object({ id: g.Ref(N3, { description: "The unique identifier for the node." }), neighbors: g.Array(g.Ref(rT), { description: "The neighbors of the node." }) }), hp], { $id: "NodeProperties" });
var oT = Vr(g.Ref(on), nT, { $id: "NodeFeature" });
var iT = hn(g.Ref(oT), { $id: "NodeCollection" });
var Gj = g.Object({ nodes: nr(g.Record(ze, g.Ref(iT), { additionalProperties: false })) }, { $id: "NodesExtensionSchema" });
var zj = /^nodes\/(.*)\.(geo)?json$/;
var aT = { name: "ext:nodes", schema: Gj, intoBundle: function* (e6) {
  if (e6.nodes != null) for (let r6 of Xe(e6.nodes)) yield { path: `nodes/${r6}.geojson`, contents: e6.nodes[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(zj)?.[1];
  if (n) return { nodes: { [n]: t6(r6) } };
}, references: [N3, rT, nT, oT, iT], integrityCheck: tT };
$i();
$i();
$i();
var Ey;
(function(e6) {
  e6.FloorInFloorStackError = "FloorInFloorStackError";
})(Ey || (Ey = {}));
var sT = (e6) => {
  if (e6.outdoors == null) return te(true);
  let r6 = li(e6);
  for (let t6 of e6.outdoors.floors) {
    let n = r6(t6);
    if (n.isErr()) return n;
    if (e6.floorStacks != null) {
      for (let o of e6.floorStacks) if (o.floors.includes(t6)) return oe2({ kind: Ey.FloorInFloorStackError, properties: { floorId: t6, floorStackId: o.id } });
    }
  }
  return te(true);
};
var lT = g.Object({ floors: g.Array(g.Ref(ze), { uniqueItems: true, description: "A list of floor IDs that should be considered to contain outdoor features." }) }, { $id: "Outdoors" });
var Vj = g.Object({ outdoors: g.Ref(lT) }, { $id: "OutdoorsExtensionSchema" });
var uT = "outdoors.json";
var cT = { name: "ext:outdoors", schema: Vj, intoBundle: function* (e6) {
  e6.outdoors != null && (yield { path: uT, contents: e6.outdoors });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === uT) return { outdoors: t6(r6) };
}, references: [lT], integrityCheck: sT };
$i();
$i();
$i();
var Cy;
(function(e6) {
  e6.TilesetDuplicateKeyError = "TilesetDuplicateKeyError";
})(Cy || (Cy = {}));
var pT = (e6) => {
  if (e6.tileset == null) return te(true);
  let r6 = /* @__PURE__ */ new Set();
  if (r6.add(e6.tileset.default.key), e6.tileset.others) for (let t6 of e6.tileset.others) {
    if (r6.has(t6.key)) return oe2({ kind: Cy.TilesetDuplicateKeyError, properties: { key: t6.key } });
    r6.add(t6.key);
  }
  return te(true);
};
var $3 = g.Object({ key: g.String({ minLength: 1, description: "Unique identifier for the tileset style." }), name: g.String({ minLength: 1, description: "Display name of the tileset style." }), url: g.String({ format: "uri", description: "URL of the tileset style." }) }, { $id: "TilesetStyle", description: "A tileset style definition." });
var dT = g.Object({ default: g.Ref($3, { description: "The default tileset style, which should be used." }), others: g.Optional(g.Array(g.Ref($3, { description: "Additional tileset styles that can be used." }))) }, { $id: "TilesetCollection" });
var Hj = g.Object({ tileset: g.Ref(dT) }, { $id: "TilesetExtensionSchema" });
var mT = { name: "ext:mvf-tileset", schema: Hj, intoBundle: function* (e6) {
  e6.tileset != null && (yield { path: "tileset.json", contents: e6.tileset });
}, fromBundle: (e6, r6, t6) => {
  if (e6 === "tileset.json") return { tileset: t6(r6) };
}, references: [$3, dT], integrityCheck: pT };
$i();
var fT = g.Object({}, { $id: "WalkableProperties" });
var hT = g.Object({}, { $id: "NonWalkableProperties" });
var gT = nr(g.Record(an2, g.Ref(fT), { $id: "WalkableGeometries", additionalProperties: false }));
var yT = nr(g.Record(an2, g.Ref(hT), { $id: "NonWalkableGeometries", additionalProperties: false }));
var Zj = g.Object({ walkable: nr(g.Record(ze, g.Ref(gT), { additionalProperties: false })), nonwalkable: nr(g.Record(ze, g.Ref(yT), { additionalProperties: false })) }, { $id: "TraversabilitySchema" });
var Wj = /^walkable\/(.*)\.json$/;
var Xj = /^nonwalkable\/(.*)\.json$/;
var bT = { name: "ext:mvf-traversability", schema: Zj, intoBundle: function* (e6) {
  if (e6.walkable != null) for (let r6 of Xe(e6.walkable)) yield { path: `walkable/${r6}.json`, contents: e6.walkable[r6] };
  if (e6.nonwalkable != null) for (let r6 of Xe(e6.nonwalkable)) yield { path: `nonwalkable/${r6}.json`, contents: e6.nonwalkable[r6] };
}, fromBundle: (e6, r6, t6) => {
  let n = e6.match(Wj)?.[1];
  if (n != null) return { walkable: { [n]: t6(r6) } };
  let o = e6.match(Xj)?.[1];
  if (o != null) return { nonwalkable: { [o]: t6(r6) } };
}, references: [fT, hT, gT, yT] };
$i();
$i();
function vT(e6) {
  return e6.replace(/^g_/, "s_");
}
function Sy(e6) {
  return e6.replace(/^g_/, "o_");
}
function Jj(e6) {
  return e6.replace(/^g_/, "w_");
}
function xT(e6) {
  return e6.replace(/^loci_/, "eli_");
}
function cf(e6) {
  return e6.replace(/^loc_/, "el_");
}
function Dy(e6) {
  return e6.replace(/^lcat_/, "ec_");
}
function Yj(e6) {
  return e6.replace(/^g_/, "ar_");
}
function IT(e6) {
  return e6.replace(/^n_/, "s_");
}
function Kj(e6, r6, t6) {
  switch (e6.geometry.type) {
    case "MultiPoint":
    case "MultiLineString":
    case "MultiPolygon": {
      let n = [], o = 0, i = e6.geometry.type.replace("Multi", "");
      for (let s6 of e6.geometry.coordinates) n.push({ ...e6, geometry: { type: i, coordinates: s6 }, properties: { ...e6.properties, id: `${r6}-${o++}`, kind: t6 } });
      return n;
    }
    default:
      return [{ ...e6, properties: { ...e6.properties, id: r6, kind: t6 } }];
  }
}
function Ep(e6, r6, t6, n) {
  let o = /* @__PURE__ */ new Map();
  for (let { feature: i, floorId: s6 } of e6) {
    let u6 = i.properties.id, l = n.get(u6);
    if (r6.has(u6)) {
      let c = Kj(i, t6(u6), l), d = c.map((h) => h.properties.id), f = d.map((h) => ({ geometryId: h, floorId: s6 }));
      o.set(u6, { ids: d, features: c, anchors: f });
    }
  }
  return o;
}
function ET(e6) {
  let r6 = { space: /* @__PURE__ */ new Map(), obstruction: /* @__PURE__ */ new Map(), area: /* @__PURE__ */ new Map(), window: /* @__PURE__ */ new Map(), object: /* @__PURE__ */ new Map() };
  if (!e6.geometry) return r6;
  let t6 = qj(e6), n = rt(e6.geometry).flatMap(([c, d]) => (d?.features ?? []).map((f) => ({ feature: f, floorId: c }))).flat(), o = new Set(Object.values(e6.walkable ?? {}).filter((c) => c !== void 0).flatMap(Xe)), i = new Set(Object.values(e6.nonwalkable ?? {}).filter((c) => c !== void 0).flatMap(Xe)), s6 = new Set(Array.from(t6.entries()).filter(([c, d]) => d === "area").map(([c]) => c)), u6 = new Set(Array.from(t6.entries()).filter(([c, d]) => d === "object").map(([c]) => c)), l = new Set(Array.from(t6.entries()).filter(([c, d]) => d === "window").map(([c]) => c));
  return o.size > 0 && (r6.space = Ep(n, o, vT, t6)), i.size > 0 && (r6.obstruction = Ep(n, i, Sy, t6)), s6.size > 0 && (r6.area = Ep(n, s6, Yj, t6)), u6.size > 0 && (r6.object = Ep(n, u6, Sy, t6)), l.size > 0 && (r6.window = Ep(n, l, Jj, t6)), o.size === 0 && i.size === 0 && s6.size === 0 && (r6.space = Ep(n, new Set(n.map((c) => c.feature.properties.id)), vT, t6)), r6;
}
function qj(e6) {
  let r6 = new Map(Object.values(e6.kinds ?? {}).filter((t6) => t6 !== void 0).flatMap(rt));
  for (let t6 of e6.connections?.filter((n) => n.type !== "door") ?? []) {
    for (let n of t6.entrances) r6.set(n.geometryId, `connection.${t6.type}`);
    for (let n of t6.exits) r6.set(n.geometryId, `connection.${t6.type}`);
  }
  return r6;
}
function CT(e6) {
  let { nodesByGeometryId: r6, incomingEdgesByNodeId: t6, nodesById: n } = Qj(e6), o = ET(e6), i = eU(e6), s6 = e6.navigationFlags ?? {};
  return { geometryMaps: o, nodesByGeometryId: r6, geometryFeatureById: i, navigationFlags: s6, incomingEdgesByNodeId: t6, nodesById: n };
}
function Qj(e6) {
  let r6 = /* @__PURE__ */ new Map(), t6 = /* @__PURE__ */ new Map(), n = /* @__PURE__ */ new Map();
  for (let o of Object.values(e6.nodes ?? {})) for (let i of o?.features ?? []) {
    if (n.set(i.properties.id, i), i.properties.geometryIds.length > 0) for (let s6 of i.properties.geometryIds) {
      let u6 = r6.get(s6) ?? [];
      u6.push(i.properties.id), r6.set(s6, u6);
    }
    if (i.properties.neighbors.length > 0) for (let s6 of i.properties.neighbors) {
      let u6 = t6.get(s6.id);
      u6 != null ? u6.push(s6) : t6.set(s6.id, [s6]);
    }
  }
  return { nodesByGeometryId: r6, incomingEdgesByNodeId: t6, nodesById: n };
}
function eU(e6) {
  let r6 = /* @__PURE__ */ new Map();
  for (let t6 of Object.values(e6.geometry ?? {})) for (let n of t6?.features ?? []) r6.set(n.properties.id, n);
  return r6;
}
$i();
function ST(e6, r6) {
  if (!e6.annotations || !e6.annotationSymbols || !e6.geometry) return {};
  let t6 = {};
  for (let [n, o] of rt(e6.annotations)) {
    if (!o || o.length === 0 || !e6.geometry[n] || e6.geometry[n].features.length === 0) continue;
    let i = new Map(e6.geometry[n].features.map((u6) => [u6.properties.id, u6])), s6 = { type: "FeatureCollection", features: [] };
    for (let u6 of o) {
      let l = i.get(u6.geometryId);
      if (!l || l.geometry.type !== "Point") continue;
      let c = { id: u6.id, externalId: u6.externalId, symbolId: u6.symbolKey };
      s6.features.push({ type: "Feature", geometry: l.geometry, properties: c });
    }
    t6[n] = s6;
  }
  return { annotation: t6 };
}
$i();
function DT(e6, { nodesByGeometryId: r6 }) {
  let t6 = { "connection.json": [], entrance: {} }, n = e6.navigationFlags?.[k3.accessible], o = e6.navigationFlags?.[k3.outdoors], i = new Map(Object.values(e6.geometry ?? {}).flatMap((s6) => s6?.features ?? []).map((s6) => [s6.properties.id, s6]));
  for (let s6 of e6.connections ?? []) {
    if (j3(s6, i) && !tU(s6)) {
      let d = rU(s6, i, r6, o);
      for (let [f, h] of d) t6.entrance[f] || (t6.entrance[f] = { type: "FeatureCollection", features: [] }), t6.entrance[f].features.push(h);
      continue;
    }
    let u6 = n != null && s6.entrances.some((d) => ru(d, n)) && s6.exits.some((d) => ru(d, n)), l = Array.from(new Set([...s6.entrances.map((d) => r6.get(d.geometryId)), ...s6.exits.map((d) => r6.get(d.geometryId))].flat().filter((d) => d != null))), c = { id: s6.id, externalId: s6.details?.externalId ?? "", type: s6.type, accessible: u6, nodes: l };
    s6.details?.name && (c.details = { name: s6.details.name }), s6.extra && (c.extra = s6.extra), t6["connection.json"].push(c);
  }
  return t6;
}
function j3(e6, r6) {
  return e6.type == L3.door && e6.entrances.every((t6) => r6.get(t6.geometryId)?.geometry.type === "LineString");
}
function tU(e6) {
  return e6.entrances.length === 0 || e6.exits.length === 0 ? false : (/* @__PURE__ */ new Set([...e6.entrances.map((t6) => t6.floorId), ...e6.exits.map((t6) => t6.floorId)])).size >= 2;
}
function rU(e6, r6, t6, n) {
  if (e6.type !== L3.door) return [];
  let o = [];
  for (let i of e6.entrances) {
    let s6 = r6.get(i.geometryId);
    if (s6?.geometry.type === "LineString") {
      let u6 = { type: "Feature", geometry: s6.geometry, properties: { id: e6.id, externalId: e6.details?.externalId ?? "", isExterior: nU(e6, n) } }, l = e6.details;
      l && (u6.properties.details = { name: l.name, description: l.description }, l.icon && (u6.properties.details.images = [{ url: l.icon, altText: `${l.name} icon` }]));
      let c = t6.get(i.geometryId);
      c && c.length > 0 && (u6.properties.node = c[0]), o.push([i.floorId, u6]);
    }
  }
  return o;
}
function nU(e6, r6) {
  return e6.entrances.some((t6) => ru(t6, r6)) || e6.exits.some((t6) => ru(t6, r6));
}
$i();
function wT(e6, { geometryMaps: r6, nodesByGeometryId: t6 }) {
  let n = { categories: [], locations: [], locationInstances: [], layers: [], venue: { slug: "", name: "", externalId: "", defaultLanguage: { name: "English", code: "en" }, languages: [] } }, o = e6.manifest?.features[0];
  o && (n.venue.defaultFloor = o.properties.defaultFloor, n.venue.tzid = o.properties.tzid, n.venue.name = o.properties.name, n.venue.defaultLanguage = { name: o.properties.language ?? "English", code: o.properties.language ?? "en" });
  let i = e6.cms?.venue;
  i && (n.venue = { ...n.venue, slug: i.slug, name: i.details?.name ?? n.venue.name ?? o.properties.name, externalId: i.details?.externalId ?? "", defaultLanguage: i.defaultLanguage, languages: i.languages ?? [], countrycode: i.countrycode, coverImage: i.coverImage, logo: i.logo, icon: i.details?.icon, extra: i.extra, mappedinWebUrl: i.mappedinWebUrl, operationHours: i.operationHours, topLocations: i.topLocations });
  let s6 = /* @__PURE__ */ new Map(), u6 = e6.locations ?? [], l = e6.cms?.locations ?? [], c = e6.cms?.categories ?? [], d = new Map((c ?? []).map((w6) => [w6.categoryId, w6]));
  if (u6.length > 0) {
    let w6 = new Map(l.map((S) => [S.locationId, S]));
    for (let S of u6) {
      let F = w6.get(S.id) ?? {};
      if (S) {
        let P = S.details, L = { id: F?.cmsId !== void 0 ? `el_${F?.cmsId}` : cf(S.id), name: P.name, externalId: P.externalId ?? "", type: F.type ?? "location", sortOrder: F.sortOrder ?? 0, amenity: F.amenity, description: P.description, extra: S.extra, links: S.links, operationHours: S.openingHours, gallery: F.gallery, logo: S.logo, shortName: P.shortName, picture: F.picture, showFloatingLabelWhenImagePresent: F.showFloatingLabelWhenImagePresent, showLogo: F.showLogo, siblingGroups: F.siblingGroups, states: F.states, tags: F.tags, spaces: [], nodes: [], polygons: [] };
        if (S.phone && (L.phone = { number: S.phone }), F.primaryCategory) {
          let $ = d.get(F.primaryCategory);
          $ && (L.primaryCategory = $.id);
        }
        let N = TT(S.social);
        S.website && (N.website = S.website.url), L.social = N;
        for (let $ of S.geometryAnchors) {
          let W = r6.space.get($.geometryId), V = r6.obstruction.get($.geometryId), q4 = W ?? V;
          if (q4) {
            let ue = new Set(q4.features.filter((ce) => ce.geometry.type === "Polygon").map((ce) => ce.properties.id));
            for (let ce of q4.anchors) W != null && q4 === W && L.spaces.push({ floor: ce.floorId, id: ce.geometryId }), ue.has(ce.geometryId) && L.polygons.push({ map: ce.floorId, id: ce.geometryId });
          }
          let se = t6.get($.geometryId);
          for (let ue of se ?? []) L.nodes.push({ map: $.floorId, id: ue });
        }
        n.locations.push(L);
        for (let $ of S.categories) s6.set($, [...s6.get($) ?? [], S.id]);
      }
    }
  }
  let f = e6.cms?.locationInstances ?? [], h = e6.locationInstances;
  if (h) {
    let w6 = new Map(f.map((F) => [F.locationInstanceId, F])), S = [];
    for (let F of h) {
      let P = w6.get(F.id) ?? {};
      if (F) {
        let L = { id: xT(F.id), parent: P.parentId ?? cf(F.parentId), name: F.details?.name, externalId: F.details?.externalId, type: P.type, sortOrder: P.sortOrder, amenity: P.amenity, description: F.details?.description, extra: F.extra, links: F.links, operationHours: F.openingHours, gallery: P.gallery, picture: P.picture, showFloatingLabelWhenImagePresent: P.showFloatingLabelWhenImagePresent, showLogo: P.showLogo, siblingGroups: P.siblingGroups, states: P.states, tags: P.tags, logo: F.logo, shortName: F.details?.shortName };
        F.phone && (L.phone = { number: F.phone });
        let N = TT(F.social ?? []);
        if (F.website && (N.website = F.website.url), Object.keys(N).length > 0 && (L.social = N), F.geometryAnchors?.length) {
          let $ = F.geometryAnchors.flatMap((W) => r6.space.get(W.geometryId)?.anchors ?? []);
          $.length > 0 && (L.spaces = $.map((W) => ({ floor: W.floorId, id: W.geometryId })));
        }
        if (F.geometryAnchors) {
          L.spaces = [], L.polygons = [], L.nodes = [];
          for (let $ of F.geometryAnchors) {
            let W = r6.space.get($.geometryId);
            if (W) {
              let q4 = new Set(W.features.filter((se) => se.geometry.type === "Polygon").map((se) => se.properties.id));
              for (let se of W.anchors) L.spaces.push({ floor: se.floorId, id: se.geometryId }), q4.has(se.geometryId) && L.polygons.push({ map: se.floorId, id: se.geometryId });
            }
            let V = t6.get($.geometryId);
            for (let q4 of V ?? []) L.nodes.push({ map: $.floorId, id: q4 });
          }
        }
        S.push(L);
      }
    }
    S.length > 0 && (n.locationInstances = S);
  }
  let b = e6.locationCategories;
  if (b) {
    let w6 = [], S = new Map(b.map((N) => [N.id, N])), F = new Map((c ?? []).map((N) => [N.categoryId, N])), P = /* @__PURE__ */ new Map();
    for (let N of b) {
      let $ = S.get(N.parent);
      if ($) {
        let W = P.get($.id) ?? [];
        W.push(N.id), P.set($.id, W);
      }
    }
    for (let N of b) {
      let $ = F.get(N.id);
      if (N) {
        let W = (P.get(N.id) ?? []).map(Dy), V = { id: Dy(N.id), name: N.details.name, externalId: N.details.externalId ?? "", sortOrder: $?.sortOrder ?? 0, children: W, locations: (s6.get(N.id) ?? []).map(cf), icon: N.details.icon, picture: $?.picture, color: $?.color, extra: N.extra, iconFromDefaultList: $?.iconFromDefaultList };
        w6.push(V);
      }
    }
    n.categories = w6;
    let L = {};
    for (let N of u6) L[cf(N.id)] = N.categories.map(Dy).filter(($) => $ !== void 0);
    n.categoryPriorities = L;
  }
  let I = {};
  for (let [w6, S] of Object.entries(e6.defaultStyle ?? {})) if (S.buffer) {
    let F = S.geometryAnchors.flatMap((P) => r6.space.get(P.geometryId)?.anchors ?? []);
    I[w6] = { edgeOffset: S.buffer, geometryAnchors: F };
  }
  Object.keys(I).length > 0 && (n.enterpriseStyles = I);
  let E = /* @__PURE__ */ new Map();
  for (let w6 of Object.values(e6.cms?.layers ?? {})) if (w6) for (let [S, F] of rt(w6)) {
    if (typeof F != "string") continue;
    let P = E.get(F) ?? { name: F, id: `ely_${F}`, spaces: [] };
    P.spaces.push(...r6.space.get(S)?.anchors.map((L) => ({ floorId: L.floorId, spaceId: L.geometryId })) ?? []), E.set(F, P);
  }
  E.size > 0 && (n.layers = Array.from(E.values()));
  let v6 = [];
  for (let w6 of Object.values(e6.cms?.textures ?? {})) for (let S of w6) {
    let F = r6.space.get(S.geometryId)?.anchors;
    !F || F.length < 1 || S.face === "unknown" || S.surface === "unknown" || v6.push({ repeat: S.repeat, offset: S.offset, rotation: S.rotation, path: S.path, face: S.face, surface: S.surface, bounds: S.bounds, geometryAnchors: F });
  }
  v6.length > 0 && (n.textures = v6);
  let x6 = {};
  for (let [w6, S] of Object.entries(e6.cms?.floorText ?? {})) {
    let F = { type: "FeatureCollection", features: [] };
    for (let P of S.features) {
      if (P.properties.align === "unknown") continue;
      let L = { align: P.properties.align, color: P.properties.color, fontFamily: P.properties.fontFamily, fontSize: P.properties.fontSize, rotation: P.properties.rotation, text: P.properties.text, visible: P.properties.visible };
      "geometryId" in P.properties ? L.geometryId = P.properties.geometryId : L.verticalOffset = P.properties.verticalOffset, F.features.push({ type: "Feature", geometry: P.geometry, properties: L });
    }
    F.features.length > 0 && (x6[w6] = F);
  }
  Object.keys(x6).length > 0 && (n.floorText = x6);
  let D = { enterprise: n };
  if (e6.cms?.textAreas) {
    let w6 = {};
    for (let [S, F] of rt(e6.cms.textAreas)) {
      let P = { type: "FeatureCollection", features: [] };
      for (let L of F.features) {
        if (L.properties.align === "unknown") continue;
        let N = { align: L.properties.align, maxWidth: L.properties.maxWidth, maxHeight: L.properties.maxHeight, rotation: L.properties.rotation };
        "geometryId" in L.properties ? N.anchorId = L.properties.geometryId : N.verticalOffset = L.properties.verticalOffset;
        let $ = { type: "Feature", geometry: L.geometry, properties: N };
        P.features.push($);
      }
      w6[S] = P;
    }
    D.textAreas = w6;
  }
  return D;
}
var oU = ["facebook", "instagram", "twitter"];
function TT(e6) {
  let r6 = {};
  for (let { name: t6, url: n } of e6) {
    let o = t6.toLowerCase();
    oU.includes(o) && (r6[o] = n);
  }
  return r6;
}
$i();
var iU = (e6) => `fc_${e6.slice(3)}`;
function FT(e6, { geometryMaps: r6 }) {
  if (!e6.facade) return {};
  let t6 = {}, n = {};
  for (let [o, i] of rt(e6.facade)) if (i) for (let s6 of Object.values(i)) {
    let { floorStackId: u6, geometryIds: l } = s6, c = iU(u6);
    n[u6] ?? (n[u6] = { id: c, spaces: [] }), n[u6].spaces.push(...l.map((d) => ({ floorId: o, spaceId: r6.space.get(d)?.ids[0] ?? "" })));
  }
  return Object.keys(n).length > 0 && (t6.facade = n), t6;
}
$i();
function MT(e6, r6 = {}) {
  let t6 = { type: "FeatureCollection", features: [] }, n = [];
  for (let o of e6.floors.features) n.push({ id: o.properties.id, externalId: o.properties.details?.externalId ?? "", elevation: o.properties.elevation, name: o.properties.details?.name ?? "", shortName: o.properties.details?.shortName ?? "", subtitle: o.properties.subtitle, maxHeight: o.properties.maxHeight }), t6.features.push({ type: "Feature", geometry: o.geometry, properties: { id: o.properties.id, externalId: o.properties.details?.externalId ?? "", elevation: o.properties.elevation, name: o.properties.details?.name ?? "", shortName: o.properties.details?.shortName ?? "", subtitle: o.properties.subtitle, maxHeight: o.properties.maxHeight } });
  return { "floor.geojson": t6, "map.geojson": n };
}
$i();
function AT(e6, { geometryMaps: r6 }) {
  let t6 = {}, n = {};
  for (let [o, i] of rt(e6.floorImages ?? {})) {
    let s6 = { features: [], type: "FeatureCollection" };
    for (let u6 of i?.features ?? []) if ("verticalOffset" in u6.properties) s6.features.push(u6);
    else {
      let { geometryId: l, ...c } = u6.properties, d = r6.space.get(l)?.ids[0] ?? r6.obstruction.get(l)?.ids[0];
      if (!d) continue;
      let f = { geometry: u6.geometry, properties: { ...c, anchorId: d }, type: u6.type };
      s6.features.push(f);
    }
    n[o] = s6;
  }
  return Object.keys(n).length > 0 && (t6.floorImages = n), t6;
}
$i();
function OT(e6, r6 = {}) {
  let t6 = [];
  for (let o of e6?.floorStacks ?? []) {
    let i = { id: o.id, floors: o.floors, maps: o.floors, externalId: o.details?.externalId ?? "", name: o.details?.name ?? "", shortName: o.details?.shortName ?? "", type: "Building" };
    o.defaultFloor && (i.defaultFloor = o.defaultFloor), t6.push(i);
  }
  if (e6.outdoors && e6.outdoors.floors.length > 0) {
    let o = { id: "outdoors", floors: e6.outdoors.floors, maps: e6.outdoors.floors, type: "Outdoor", name: "Outdoors", externalId: "outdoors" };
    t6.push(o);
  }
  return { "floorstack.json": t6, "mapstack.geojson": t6 };
}
$i();
$i();
var _T = s(kT(), 1);
var cU = (e6) => {
  let r6 = e6.geometry.coordinates[0], t6 = 0;
  for (let n = 0; n < r6.length - 1; n++) t6 += r6[n][0] * r6[n + 1][1] - r6[n + 1][0] * r6[n][1];
  return Math.abs(t6 / 2);
};
var pU = (e6, r6) => {
  let [t6, n] = e6, o = r6.geometry.coordinates[0], i = false;
  for (let s6 = 0, u6 = o.length - 1; s6 < o.length; u6 = s6++) {
    let [l, c] = o[s6], [d, f] = o[u6];
    c > n != f > n && t6 < (d - l) * (n - c) / (f - c) + l && (i = !i);
  }
  return i;
};
var dU = (e6) => {
  let r6 = e6.geometry.coordinates[0], t6 = 0, n = 0;
  for (let o = 0; o < r6.length - 1; o++) t6 += r6[o][0], n += r6[o][1];
  return { geometry: { coordinates: [t6 / (r6.length - 1), n / (r6.length - 1)] } };
};
var mU = (e6) => {
  let r6 = cU(e6), t6 = Number.isFinite(r6) ? Math.max(r6, 1) : 1;
  return Math.sqrt(t6) * 1e-6;
};
var wy = (e6) => {
  try {
    let t6 = dU(e6).geometry.coordinates;
    if (!pU(t6, e6)) {
      let o = (0, _T.default)(e6.geometry.coordinates, mU(e6));
      return te([o[0], o[1]]);
    }
    return te(t6);
  } catch {
    return oe2(new Error("Unable to calculate center of polygon"));
  }
};
function V3(e6) {
  return e6?.geometry?.type === "Polygon";
}
function RT(e6, { geometryMaps: r6, nodesByGeometryId: t6, nodesById: n }) {
  let o = yU(e6.defaultStyle), i = {}, s6 = {}, u6 = {}, l = {};
  for (let d of Xe(e6.geometry)) {
    let f = e6.geometry[d];
    if (!f) continue;
    let h = [], b = [], I = [], E = [];
    for (let v6 of f.features) {
      let x6 = v6.properties.id, D = o.has(x6), w6 = t6.get(x6) ?? [];
      for (let S of r6.space.get(x6)?.features ?? []) h.push(LT(S, w6));
      for (let S of r6.obstruction.get(x6)?.features ?? []) if (b.push(fU(S, D)), r6.object.get(x6)) {
        let P = t6.get(x6) ?? [], L = P.map((N) => n.get(N)).filter((N) => N != null);
        for (let N of L) {
          let $ = LT({ type: "Feature", geometry: N.geometry, properties: { id: IT(N.properties.id), kind: "desk-entrance", details: { externalId: Sy(x6) } } }, P);
          h.push($);
        }
      }
      for (let S of r6.area.get(x6)?.features ?? []) I.push(hU(S, w6));
      for (let S of r6.window.get(x6)?.features ?? []) E.push(gU(S));
    }
    h.length > 0 && (i[d] = { type: "FeatureCollection", features: h.filter((v6) => v6 !== null) }), b.length > 0 && (s6[d] = { type: "FeatureCollection", features: b.filter((v6) => v6 !== null) }), I.length > 0 && (u6[d] = { type: "FeatureCollection", features: I.filter((v6) => v6 !== null) }), E.length > 0 && (l[d] = { type: "FeatureCollection", features: E.filter((v6) => v6 !== null) });
  }
  let c = { space: i, obstruction: s6 };
  return Object.keys(u6).length > 0 && (c.area = u6), Object.keys(l).length > 0 && (c.window = l), c;
}
function LT(e6, r6) {
  switch (e6.geometry.type) {
    case "MultiPoint":
    case "MultiLineString":
    case "MultiPolygon":
      return null;
  }
  let t6 = { type: "Feature", geometry: e6.geometry, properties: { destinationNodes: r6, id: e6.properties.id, externalId: e6.properties.details?.externalId ?? "", kind: e6.properties.kind } };
  return e6.properties.details && (t6.properties.details = { name: e6.properties.details.name, description: e6.properties.details.description, images: e6.properties.details.icon ? [{ url: e6.properties.details.icon, altText: e6.properties.details.name ? `${e6.properties.details.name} icon` : "icon" }] : void 0 }), V3(t6) && (t6.properties.center = wy(t6).unwrapOr(void 0)), t6;
}
function fU(e6, r6) {
  switch (e6.geometry.type) {
    case "MultiPoint":
    case "MultiLineString":
    case "MultiPolygon":
    case "Point":
      return null;
  }
  let t6 = e6.properties, n = { type: "Feature", geometry: e6.geometry, properties: { id: t6.id, externalId: t6.details?.externalId ?? "", entrances: [], kind: t6.kind, footprintComponent: r6 } };
  return V3(n) && (n.properties.center = wy(n).unwrapOr(void 0)), t6.details && (n.properties.details = { name: t6.details.name, description: t6.details.description, images: t6.details.icon ? [{ url: t6.details.icon, altText: t6.details.name ? `${t6.details.name} icon` : "icon" }] : void 0 }), n;
}
function hU(e6, r6) {
  if (e6.geometry.type !== "Polygon") return null;
  let t6 = e6.properties, n = { type: "Feature", geometry: e6.geometry, properties: { id: t6.id, externalId: t6.details?.externalId ?? "", destinationNodes: r6 } };
  return V3(n) && (n.properties.center = wy(n).unwrapOr(void 0)), t6.details && (n.properties.details = { name: t6.details.name, description: t6.details.description, images: t6.details.icon ? [{ url: t6.details.icon, altText: t6.details.name ? `${t6.details.name} icon` : "icon" }] : void 0 }), n;
}
function gU(e6) {
  return e6.geometry.type !== "LineString" ? null : { type: "Feature", geometry: e6.geometry, properties: { id: e6.properties.id } };
}
function yU(e6) {
  return new Set((e6?.ExteriorWalls?.geometryAnchors ?? []).map((t6) => t6.geometryId));
}
$i();
function NT(e6, { geometryMaps: r6, geometryFeatureById: t6 }) {
  if (!e6.locationCategories && !e6.locations) return {};
  let n = {};
  if (e6.locationCategories?.length) {
    let o = [];
    for (let i of e6.locationCategories) {
      let s6 = { id: i.id, name: i.details.name, icon: i.details.icon ?? "" };
      i.parent && (s6.parent = i.parent), o.push(s6);
    }
    n["category.json"] = o;
  }
  if (e6.locations?.length) {
    let o = bU(e6, { geometryFeatureById: t6 }), i = [];
    for (let s6 of e6.locations) {
      let u6 = { id: s6.id, name: s6.details.name, categories: s6.categories, spaces: [], obstructions: [], areas: [], annotations: [], connections: [], entrances: [], links: s6.links, openingHoursSpecification: s6.openingHours ?? [], pictures: s6.images, social: s6.social, description: s6.details.description, externalId: s6.details.externalId, icon: s6.details.icon, logo: s6.logo, phone: s6.phone, website: s6.website };
      i.push(u6);
      for (let { geometryId: l, floorId: c } of s6.geometryAnchors) u6.spaces.push(...r6.space.get(l)?.ids.map((d) => ({ id: d, floor: c })) ?? []), u6.obstructions.push(...r6.obstruction.get(l)?.ids.map((d) => ({ id: d, floor: c })) ?? []), u6.areas.push(...r6.area.get(l)?.ids.map((d) => ({ id: d, floor: c })) ?? []), u6.entrances.push(...o.entrancesByGeometryId.get(l) ?? []), u6.connections.push(...o.connectionsByGeometryId.get(l) ?? []), u6.annotations.push(...o.annotationsByGeometryId.get(l) ?? []);
    }
    n["location.json"] = i;
  }
  return n;
}
function bU(e6, { geometryFeatureById: r6 }) {
  let t6 = { annotationsByGeometryId: /* @__PURE__ */ new Map(), connectionsByGeometryId: /* @__PURE__ */ new Map(), entrancesByGeometryId: /* @__PURE__ */ new Map() };
  if (e6.annotations) for (let [n, o] of rt(e6.annotations)) for (let i of o ?? []) {
    let s6 = i.geometryId, u6 = i.id, l = t6.annotationsByGeometryId.get(s6) ?? [];
    l.push({ floor: n, id: u6 }), t6.annotationsByGeometryId.set(s6, l);
  }
  if (e6.connections) for (let n of e6.connections) {
    let o = j3(n, r6), i = Array.from(new Map([...n.entrances, ...n.exits].map((s6) => [`${s6.geometryId}_${s6.floorId}`, s6])).values());
    for (let s6 of i) {
      let u6 = s6.geometryId;
      if (o) {
        let l = t6.entrancesByGeometryId.get(u6) ?? [];
        l.push({ floor: s6.floorId, id: n.id }), t6.entrancesByGeometryId.set(u6, l);
      } else {
        let l = t6.connectionsByGeometryId.get(u6) ?? [];
        l.push(n.id), t6.connectionsByGeometryId.set(u6, l);
      }
    }
  }
  return t6;
}
$i();
function $T(e6, r6) {
  let t6 = { features: [], type: "FeatureCollection" }, n = { "manifest.geojson": t6 }, o = e6.manifest;
  if (o.features.length > 0) {
    let i = o.features[0], s6 = i.properties, u6 = { type: "Feature", geometry: i.geometry, properties: { folder_struct: [], version: "2.0.0", time: s6.time, name: s6.name, naturalBearing: s6.naturalBearing, tzid: s6.tzid, map: s6.mapId, org_id: s6.orgId, language: s6.language } };
    t6.features.push(u6);
  }
  return n;
}
$i();
function jT(e6, { geometryMaps: r6, navigationFlags: t6, incomingEdgesByNodeId: n }) {
  let o = { "node.geojson": { type: "FeatureCollection", features: [] } }, i = o["node.geojson"].features, s6 = vU(e6), u6 = xU(e6), l = IU(e6, u6, s6);
  for (let [c, d] of rt(e6.nodes ?? {})) for (let f of d?.features ?? []) {
    let h = r6.space.get(f.properties.geometryIds[0])?.features[0], b = h?.geometry.type === "Point" && h?.properties.details?.externalId ? h.properties.details.externalId : "", I = n.get(f.properties.id) ?? [], E = Object.keys(t6 ?? {}), v6 = [];
    for (let D of I) for (let w6 of E) ru(D, t6[w6]) && v6.push(t6[w6]);
    let x6 = { type: "Feature", geometry: f.geometry, properties: { id: f.properties.id, floor: c, space: f.properties.geometryIds.map((D) => r6.space.get(D)?.ids).flat().filter((D) => D !== void 0), neighbors: [...f.properties.neighbors.map((D) => ({ id: D.id, weight: D.extraCost })), ...l.get(f.properties.id) ?? []], map: c, externalId: b, flags: v6.length > 0 ? EU(v6) : void 0 } };
    i.push(x6);
  }
  return o;
}
function vU(e6) {
  let r6 = /* @__PURE__ */ new Map();
  for (let t6 of e6.floors?.features ?? []) r6.set(t6.properties.id, t6.properties.elevation);
  return r6;
}
function xU(e6) {
  let r6 = /* @__PURE__ */ new Map();
  for (let t6 of Object.values(e6.nodes ?? {})) for (let n of t6?.features ?? []) if (n.properties.geometryIds.length !== 0) for (let o of n.properties.geometryIds) {
    let i = r6.get(o) ?? [];
    i.includes(n.properties.id) || (i.push(n.properties.id), r6.set(o, i));
  }
  return r6;
}
function IU(e6, r6, t6) {
  let n = /* @__PURE__ */ new Map();
  for (let o of e6.connections ?? []) {
    let i = o.exits.map((s6) => ({ ...s6, nodes: r6.get(s6.geometryId) ?? [] }));
    for (let s6 of o.entrances) {
      let u6 = r6.get(s6.geometryId) ?? [];
      for (let l of u6) for (let c of i) {
        let d = Math.abs((t6.get(s6.floorId) ?? 0) - (t6.get(c.floorId) ?? 0)) * o.floorCostMultiplier, f = n.get(l) ?? [];
        f.push(...c.nodes.filter((h) => h !== l).map((h) => ({ id: h, weight: d + o.entryCost }))), n.set(l, f);
      }
    }
  }
  return n;
}
function EU(e6) {
  if (e6 == null || e6.length === 0) return;
  let r6 = new Array(Math.max(...e6.map((t6) => t6.index)) + 1).fill(0);
  for (let t6 of e6) r6[t6.index] |= 1 << t6.bit;
  return r6;
}
$i();
function CU(e6, r6) {
  let t6 = {};
  for (let n of e6) {
    let o = r6.get(n);
    o && (t6[o] ?? (t6[o] = []), t6[o].push(n));
  }
  return t6;
}
function UT(e6, { geometryMaps: r6 }) {
  if (!e6.defaultStyle) return {};
  let t6 = {}, n = {};
  t6["styles.json"] = n;
  let o = [...Array.from(r6.space.values()).map((s6) => s6.features), ...Array.from(r6.obstruction.values()).map((s6) => s6.features)], i = new Map(o.flatMap((s6) => s6.map((u6) => [u6.properties.id, u6.geometry.type])));
  for (let [s6, u6] of rt(e6.defaultStyle)) {
    let l = CU(u6.geometryAnchors.flatMap((c) => [...r6.space.get(c.geometryId)?.ids ?? [], ...r6.obstruction.get(c.geometryId)?.ids ?? []]), i);
    if (l.Point && l.Point.length > 0) {
      let c = { points: Array.from(l.Point.values()), showImage: u6.extra?.showImage !== void 0 ? u6.extra?.showImage === true : u6.opacity !== 0 };
      n[`${s6}.Point`] = c;
    }
    if (l.LineString && l.LineString.length > 0) {
      let c = { lineStrings: Array.from(l.LineString.values()), altitude: u6.altitude, color: u6.color, height: u6.height, opacity: u6.opacity, width: u6.buffer };
      n[`${s6}.LineString`] = c;
    }
    if (l.Polygon && l.Polygon.length > 0) {
      let c = { polygons: Array.from(l.Polygon.values()), altitude: u6.altitude, color: u6.color, height: u6.height, opacity: u6.opacity };
      u6.extra?.showImage !== void 0 && (c.showImage = u6.extra.showImage === true), n[`${s6}.Polygon`] = c;
    }
  }
  return t6;
}
var SU = ED().extendOptional(S7).extendOptional(aT).extendOptional(O7).extendOptional(eT).extendOptional(bT).extendOptional(_7).extendOptional(j7).extendOptional(cT).extendOptional(mT).extendOptional(Y7).extendOptional(z7).extendOptional(TD).extendOptional(_D).extendOptional(v7).build({ cspSafe: true }).expect("Invalid parser, this should never happen. Likely a bug in the MVFv2 library, or one of the extensions.");
function GT(e6) {
  let r6 = CT(e6), t6 = MT(e6, r6), n = RT(e6, r6), o = jT(e6, r6), i = DT(e6, r6), s6 = UT(e6, r6), u6 = OT(e6, r6), l = AT(e6, r6), c = FT(e6, r6), d = ST(e6, r6), f = NT(e6, r6), h = wT(e6, r6), b = $T(e6, r6);
  return { ...e6.tileset ? { "tileset.json": e6.tileset } : {}, ...e6.navigationFlags ? { "navigationFlags.json": e6.navigationFlags } : {}, ...t6, ...n, ...o, ...i, ...s6, ...u6, ...l, ...c, ...d, ...f, ...h, ...b };
}
function H3(e6) {
  let r6 = SU.decompressUnsafeSync(e6);
  return r6.isOk() ? te(GT(r6.value)) : oe2(r6.error);
}
$i();
function Cp(e6) {
  return e6.endsWith("/") ? e6 : `${e6}/`;
}
$i();
var Sp = "https://app.mappedin.com/";
var zT = "https://auth.mappedin.com/";
var VT = Object.freeze({ baseUri: "https://app.mappedin.com/", baseAuthUri: "https://app.mappedin.com/", analyticsBaseUri: "https://api-gateway.mappedin.com/track-analytics/a/", tileServerUri: "https://tiles-cdn.mappedin.com/styles/mappedin/style.json" });
var DU = Object.freeze({ ...VT, baseUri: "https://api-gateway.mappedin.com/", baseAuthUri: "https://auth.mappedin.com/" });
var TU = Object.freeze({ baseUri: "https://api-gateway.eu.mappedin.com/", baseAuthUri: "https://auth.eu.mappedin.com/", analyticsBaseUri: "https://api-gateway.eu.mappedin.com/track-analytics/a/", tileServerUri: "https://tiles-cdn.eu.mappedin.com/styles/mappedin/style.json" });
var wU = Object.freeze({ baseUri: "https://api-gateway-staging.mappedin.net/", baseAuthUri: "https://auth-staging.mappedin.net/", analyticsBaseUri: "https://api-gateway-staging.mappedin.net/track-analytics/a/", tileServerUri: "https://tiles-cdn.mappedin.com/styles/mappedin/style.json" });
var FU = Object.freeze({ baseUri: "https://app-staging.mappedin.net/", baseAuthUri: "https://app-staging.mappedin.net/", analyticsBaseUri: "https://api-gateway-staging.mappedin.net/track-analytics/a/", tileServerUri: "https://tiles-cdn.mappedin.com/styles/mappedin/style.json" });
var MU = { eu: TU, us: VT, "us-enterprise": DU, "us-staging-enterprise": wU, "us-staging-self-serve": FU };
function HT(e6) {
  return MU[e6];
}
$i();
$i();
var AU = (e6) => {
  let r6 = Date.now();
  return e6 - r6;
};
var Fy = (e6, r6) => AU(e6) <= r6 * 60 * 1e3;
var WT = 60;
var XT = WT * 60 * 1e3;
var ZT = "accessTokens";
async function pf(e6, r6 = false) {
  let t6 = `${e6.key}`, n = Rm.getInstance(), o = n?.loadSessionData(ZT) || {}, i = Math.floor(Date.now() / 1e3);
  if (o[t6] && !Fy(o[t6].expiresTimestamp * 1e3, WT)) return o[t6];
  let s6 = r6 ? await OU(e6, i) : await BU(e6, i), u6 = { ...o, [t6]: s6 };
  return n?.saveSessionData(ZT, u6), s6;
}
async function OU(e6, r6) {
  let t6;
  e6.customAuthUri ? t6 = e6.customAuthUri : t6 = `${e6.baseAuthUri ?? zT}oauth2/token`;
  let n;
  try {
    n = await oo()(t6, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ grant_type: "client_credentials", client_id: e6.key, client_secret: e6.secret }) });
  } catch (i) {
    let s6 = i instanceof Error ? i.message : String(i);
    throw new Error(`Failed to fetch enterprise access token from ${t6}: ${s6}`);
  }
  if (!n.ok) throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);
  let o = await n.json();
  return { accessToken: o.access_token, expiresTimestamp: r6 + o.expires_in };
}
async function BU(e6, r6) {
  let t6;
  e6.customAuthUri ? t6 = e6.customAuthUri : t6 = `${e6.baseAuthUri ? Cp(e6.baseAuthUri) : Sp}api/v1/api-key/token`;
  let n;
  try {
    n = await oo()(t6, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ key: e6.key, secret: e6.secret }) });
  } catch (i) {
    let s6 = i instanceof Error ? i.message : String(i);
    throw new Error(`Failed to fetch access token from ${t6}: ${s6}`);
  }
  if (!n.ok) throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);
  let o = await n.json();
  return { accessToken: o.access_token, expiresTimestamp: r6 + o.expires_in };
}
$i();
var YT = 60;
var KT = YT * 60 * 1e3;
var JT = "miSasTokens";
async function Z3(e6, r6) {
  let t6 = `${r6}__${e6.mapId}`, n = Rm.getInstance(), o = n?.loadSessionData(JT) || {};
  if (o[t6] && !Fy(o[t6].expires, YT)) return o[t6];
  let i = await PU(e6, r6), s6 = { ...o, [t6]: { token: i.token, expires: new Date(i.expires).getTime() } };
  return n?.saveSessionData(JT, s6), i;
}
async function PU(e6, r6) {
  let t6 = `${e6.baseUri ? Cp(e6.baseUri) : Sp}api/v1/venue/${e6.mapId}/sas-token`, n = await oo()(t6, { method: "GET", headers: { Authorization: `Bearer ${r6}` } });
  if (!n.ok) throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);
  let o = await n.json();
  return { token: o.token, expires: new Date(o.expires).getTime() };
}
$i();
var io = Uint8Array;
var ul2 = Uint16Array;
var qT = Uint32Array;
var QT = new io([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0]);
var ew = new io([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0]);
var kU = new io([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
var tw = function(e6, r6) {
  for (var t6 = new ul2(31), n = 0; n < 31; ++n) t6[n] = r6 += 1 << e6[n - 1];
  for (var o = new qT(t6[30]), n = 1; n < 30; ++n) for (var i = t6[n]; i < t6[n + 1]; ++i) o[i] = i - t6[n] << 5 | n;
  return [t6, o];
};
var rw = tw(QT, 2);
var nw = rw[0];
var _U = rw[1];
nw[28] = 258, _U[258] = 28;
var ow = tw(ew, 0);
var LU = ow[0];
var Tbe = ow[1];
var Y3 = new ul2(32768);
for (pt = 0; pt < 32768; ++pt) is = (pt & 43690) >>> 1 | (pt & 21845) << 1, is = (is & 52428) >>> 2 | (is & 13107) << 2, is = (is & 61680) >>> 4 | (is & 3855) << 4, Y3[pt] = ((is & 65280) >>> 8 | (is & 255) << 8) >>> 1;
var is;
var pt;
var df = function(e6, r6, t6) {
  for (var n = e6.length, o = 0, i = new ul2(r6); o < n; ++o) e6[o] && ++i[e6[o] - 1];
  var s6 = new ul2(r6);
  for (o = 0; o < r6; ++o) s6[o] = s6[o - 1] + i[o - 1] << 1;
  var u6;
  if (t6) {
    u6 = new ul2(1 << r6);
    var l = 15 - r6;
    for (o = 0; o < n; ++o) if (e6[o]) for (var c = o << 4 | e6[o], d = r6 - e6[o], f = s6[e6[o] - 1]++ << d, h = f | (1 << d) - 1; f <= h; ++f) u6[Y3[f] >>> l] = c;
  } else for (u6 = new ul2(n), o = 0; o < n; ++o) e6[o] && (u6[o] = Y3[s6[e6[o] - 1]++] >>> 15 - e6[o]);
  return u6;
};
var mf = new io(288);
for (pt = 0; pt < 144; ++pt) mf[pt] = 8;
var pt;
for (pt = 144; pt < 256; ++pt) mf[pt] = 9;
var pt;
for (pt = 256; pt < 280; ++pt) mf[pt] = 7;
var pt;
for (pt = 280; pt < 288; ++pt) mf[pt] = 8;
var pt;
var iw = new io(32);
for (pt = 0; pt < 32; ++pt) iw[pt] = 5;
var pt;
var RU = df(mf, 9, 1);
var NU = df(iw, 5, 1);
var W3 = function(e6) {
  for (var r6 = e6[0], t6 = 1; t6 < e6.length; ++t6) e6[t6] > r6 && (r6 = e6[t6]);
  return r6;
};
var mi = function(e6, r6, t6) {
  var n = r6 / 8 | 0;
  return (e6[n] | e6[n + 1] << 8) >> (r6 & 7) & t6;
};
var X3 = function(e6, r6) {
  var t6 = r6 / 8 | 0;
  return (e6[t6] | e6[t6 + 1] << 8 | e6[t6 + 2] << 16) >> (r6 & 7);
};
var $U = function(e6) {
  return (e6 + 7) / 8 | 0;
};
var q3 = function(e6, r6, t6) {
  (r6 == null || r6 < 0) && (r6 = 0), (t6 == null || t6 > e6.length) && (t6 = e6.length);
  var n = new (e6.BYTES_PER_ELEMENT == 2 ? ul2 : e6.BYTES_PER_ELEMENT == 4 ? qT : io)(t6 - r6);
  return n.set(e6.subarray(r6, t6)), n;
};
var jU = ["unexpected EOF", "invalid block type", "invalid length/literal", "invalid distance", "stream finished", "no stream handler", , "no callback", "invalid UTF-8 data", "extra field too long", "date not in range 1980-2099", "filename too long", "stream finishing", "invalid zip data"];
var fi = function(e6, r6, t6) {
  var n = new Error(r6 || jU[e6]);
  if (n.code = e6, Error.captureStackTrace && Error.captureStackTrace(n, fi), !t6) throw n;
  return n;
};
var UU = function(e6, r6, t6) {
  var n = e6.length;
  if (!n || t6 && t6.f && !t6.l) return r6 || new io(0);
  var o = !r6 || t6, i = !t6 || t6.i;
  t6 || (t6 = {}), r6 || (r6 = new io(n * 3));
  var s6 = function(at2) {
    var xt = r6.length;
    if (at2 > xt) {
      var Ot = new io(Math.max(xt * 2, at2));
      Ot.set(r6), r6 = Ot;
    }
  }, u6 = t6.f || 0, l = t6.p || 0, c = t6.b || 0, d = t6.l, f = t6.d, h = t6.m, b = t6.n, I = n * 8;
  do {
    if (!d) {
      u6 = mi(e6, l, 1);
      var E = mi(e6, l + 1, 3);
      if (l += 3, E) if (E == 1) d = RU, f = NU, h = 9, b = 5;
      else if (E == 2) {
        var w6 = mi(e6, l, 31) + 257, S = mi(e6, l + 10, 15) + 4, F = w6 + mi(e6, l + 5, 31) + 1;
        l += 14;
        for (var P = new io(F), L = new io(19), N = 0; N < S; ++N) L[kU[N]] = mi(e6, l + N * 3, 7);
        l += S * 3;
        for (var $ = W3(L), W = (1 << $) - 1, V = df(L, $, 1), N = 0; N < F; ) {
          var q4 = V[mi(e6, l, W)];
          l += q4 & 15;
          var v6 = q4 >>> 4;
          if (v6 < 16) P[N++] = v6;
          else {
            var se = 0, ue = 0;
            for (v6 == 16 ? (ue = 3 + mi(e6, l, 3), l += 2, se = P[N - 1]) : v6 == 17 ? (ue = 3 + mi(e6, l, 7), l += 3) : v6 == 18 && (ue = 11 + mi(e6, l, 127), l += 7); ue--; ) P[N++] = se;
          }
        }
        var ce = P.subarray(0, w6), de2 = P.subarray(w6);
        h = W3(ce), b = W3(de2), d = df(ce, h, 1), f = df(de2, b, 1);
      } else fi(1);
      else {
        var v6 = $U(l) + 4, x6 = e6[v6 - 4] | e6[v6 - 3] << 8, D = v6 + x6;
        if (D > n) {
          i && fi(0);
          break;
        }
        o && s6(c + x6), r6.set(e6.subarray(v6, D), c), t6.b = c += x6, t6.p = l = D * 8, t6.f = u6;
        continue;
      }
      if (l > I) {
        i && fi(0);
        break;
      }
    }
    o && s6(c + 131072);
    for (var Ee2 = (1 << h) - 1, he = (1 << b) - 1, ne = l; ; ne = l) {
      var se = d[X3(e6, l) & Ee2], Ce = se >>> 4;
      if (l += se & 15, l > I) {
        i && fi(0);
        break;
      }
      if (se || fi(2), Ce < 256) r6[c++] = Ce;
      else if (Ce == 256) {
        ne = l, d = null;
        break;
      } else {
        var xe3 = Ce - 254;
        if (Ce > 264) {
          var N = Ce - 257, Re = QT[N];
          xe3 = mi(e6, l, (1 << Re) - 1) + nw[N], l += Re;
        }
        var we = f[X3(e6, l) & he], Ve = we >>> 4;
        we || fi(3), l += we & 15;
        var de2 = LU[Ve];
        if (Ve > 3) {
          var Re = ew[Ve];
          de2 += X3(e6, l) & (1 << Re) - 1, l += Re;
        }
        if (l > I) {
          i && fi(0);
          break;
        }
        o && s6(c + 131072);
        for (var me = c + xe3; c < me; c += 4) r6[c] = r6[c - de2], r6[c + 1] = r6[c + 1 - de2], r6[c + 2] = r6[c + 2 - de2], r6[c + 3] = r6[c + 3 - de2];
        c = me;
      }
    }
    t6.l = d, t6.p = ne, t6.b = c, t6.f = u6, d && (u6 = 1, t6.m = h, t6.d = f, t6.n = b);
  } while (!u6);
  return c == r6.length ? r6 : q3(r6, 0, c);
};
var GU = new io(0);
var la = function(e6, r6) {
  return e6[r6] | e6[r6 + 1] << 8;
};
var hi = function(e6, r6) {
  return (e6[r6] | e6[r6 + 1] << 8 | e6[r6 + 2] << 16 | e6[r6 + 3] << 24) >>> 0;
};
var J3 = function(e6, r6) {
  return hi(e6, r6) + hi(e6, r6 + 4) * 4294967296;
};
function zU(e6, r6) {
  return UU(e6, r6);
}
var K3 = typeof TextDecoder < "u" && new TextDecoder();
var VU = 0;
try {
  K3.decode(GU, { stream: true }), VU = 1;
} catch {
}
var HU = function(e6) {
  for (var r6 = "", t6 = 0; ; ) {
    var n = e6[t6++], o = (n > 127) + (n > 223) + (n > 239);
    if (t6 + o > e6.length) return [r6, q3(e6, t6 - 1)];
    o ? o == 3 ? (n = ((n & 15) << 18 | (e6[t6++] & 63) << 12 | (e6[t6++] & 63) << 6 | e6[t6++] & 63) - 65536, r6 += String.fromCharCode(55296 | n >> 10, 56320 | n & 1023)) : o & 1 ? r6 += String.fromCharCode((n & 31) << 6 | e6[t6++] & 63) : r6 += String.fromCharCode((n & 15) << 12 | (e6[t6++] & 63) << 6 | e6[t6++] & 63) : r6 += String.fromCharCode(n);
  }
};
function ZU(e6, r6) {
  if (r6) {
    for (var t6 = "", n = 0; n < e6.length; n += 16384) t6 += String.fromCharCode.apply(null, e6.subarray(n, n + 16384));
    return t6;
  } else {
    if (K3) return K3.decode(e6);
    var o = HU(e6), i = o[0], s6 = o[1];
    return s6.length && fi(8), i;
  }
}
var WU = function(e6, r6) {
  return r6 + 30 + la(e6, r6 + 26) + la(e6, r6 + 28);
};
var XU = function(e6, r6, t6) {
  var n = la(e6, r6 + 28), o = ZU(e6.subarray(r6 + 46, r6 + 46 + n), !(la(e6, r6 + 8) & 2048)), i = r6 + 46 + n, s6 = hi(e6, r6 + 20), u6 = t6 && s6 == 4294967295 ? JU(e6, i) : [s6, hi(e6, r6 + 24), hi(e6, r6 + 42)], l = u6[0], c = u6[1], d = u6[2];
  return [la(e6, r6 + 10), l, c, o, i + la(e6, r6 + 30) + la(e6, r6 + 32), d];
};
var JU = function(e6, r6) {
  for (; la(e6, r6) != 1; r6 += 4 + la(e6, r6 + 2)) ;
  return [J3(e6, r6 + 12), J3(e6, r6 + 4), J3(e6, r6 + 20)];
};
function Q3(e6, r6) {
  for (var t6 = {}, n = e6.length - 22; hi(e6, n) != 101010256; --n) (!n || e6.length - n > 65558) && fi(13);
  var o = la(e6, n + 8);
  if (!o) return {};
  var i = hi(e6, n + 16), s6 = i == 4294967295 || o == 65535;
  if (s6) {
    var u6 = hi(e6, n - 12);
    s6 = hi(e6, u6) == 101075792, s6 && (o = hi(e6, u6 + 32), i = hi(e6, u6 + 48));
  }
  for (var l = r6 && r6.filter, c = 0; c < o; ++c) {
    var d = XU(e6, i, s6), f = d[0], h = d[1], b = d[2], I = d[3], E = d[4], v6 = d[5], x6 = WU(e6, v6);
    i = E, (!l || l({ name: I, size: h, originalSize: b, compression: f })) && (f ? f == 8 ? t6[I] = zU(e6.subarray(x6, x6 + h), new io(b)) : fi(14, "unknown compression type " + f) : t6[I] = q3(e6, x6, x6 + h));
  }
  return t6;
}
var aw = globalThis.fetch;
var KU = yc?.env?.npm_package_version;
function oo() {
  if (aw == null) throw new Error("fetch is not available in your environment. Pass your own function into `setFetchFn` (node-fetch, etc)");
  return aw;
}
var ex = { supplementaryUrl: "https://api-gateway.mappedin.com/analytics/", headers: {}, accessToken: "", clientId: "", noAuth: false, includeHidden: true, clientSecret: "", apiGateway: "", authorization: "", perspective: "Website", language: "", venue: "" };
function uw(e6) {
  let r6 = { ...ex, ...e6 };
  return r6.headers = { ...r6.headers, "mappedin-sdk-version": KU }, r6.things = [], "platformString" in e6 && (r6.headers = { ...r6.headers, "mappedin-platform-version": e6.platformString }), r6.noAuth || (r6.accessToken ? r6.authorization = `Bearer ${r6.accessToken}` : r6.clientId && r6.clientSecret && (r6.authorization = `Basic ${globalThis.btoa(`${r6.clientId}:${r6.clientSecret}`)}`)), r6.language = r6.language?.toLowerCase(), r6;
}
function qU(e6, r6, t6 = false) {
  let n = { language: e6.language, clientId: e6.clientId, clientSecret: e6.clientSecret };
  t6 && delete n.language;
  let { headers: o } = e6;
  o["Content-Type"] = o["Content-Type"] || "text/json", e6.accessToken ? o.Authorization = `Bearer ${e6.accessToken}` : e6.noAuth || e6.clientId && e6.clientSecret && (o["x-mappedin-key"] = btoa(e6.clientId), o["x-mappedin-secret"] = btoa(e6.clientSecret));
  let i = { method: "GET", headers: o };
  return e6.secure && (r6 += "&withcdntoken"), { req: i, url: r6 };
}
async function QU(e6, r6, t6 = false) {
  let n = qU(e6, r6, t6), o = await oo()(n.url, n.req);
  if (!o.ok) throw new Error(`${o.status} ${o.statusText}`);
  return o.json();
}
var eG = (e6) => {
  let r6 = e6 != null && typeof e6 == "object" && "perspectives" in e6 && e6.perspectives != null && typeof e6.perspectives == "object" ? e6.perspectives : null;
  if (r6 == null || Object.keys(r6).length === 0) return Pt.warn("No perspectives available in response!"), null;
  let t6 = {};
  for (let [n, o] of Object.entries(r6)) {
    let i = "url" in o && typeof o.url == "string" ? o.url : null, s6 = "locale_packs" in o && typeof o.locale_packs == "object" ? o.locale_packs : null;
    if (i == null || s6 == null) {
      Pt.warn(`Perspective ${n} is missing url or locale_packs!`);
      continue;
    }
    t6[n] = { url: i, locale_packs: s6 };
  }
  return t6;
};
async function tG(e6, r6 = "exports/mvf/1/bundle") {
  let t6 = uw({ baseUri: "https://api-gateway.mappedin.com/", ...ex, ...e6 }), n = `${t6.baseUri + r6}?venue=${t6.venue}&version=${t6.version ?? "2.0.0"}`;
  t6.headers["Content-Type"] = "application/zip";
  let o = await QU(t6, n), i = o.url, s6 = o.locale_packs, u6 = t6.perspective ?? ex.perspective, l = eG(o);
  if (u6 != null && u6 !== "" && l != null) {
    let c = l[u6];
    c == null ? Pt.warn(`Perspective ${u6} not found in response! Loading default perspective instead.`) : (Pt.log(`Loading perspective "${u6}"`), i = c.url, s6 = c.locale_packs);
  }
  return { url: i, localePacks: s6, updated_at: o.updated_at };
}
var Dp = /* @__PURE__ */ (function() {
  let e6;
  return () => (e6 || (e6 = new TextDecoder()), e6);
})();
async function tx(e6, { signal: r6 }) {
  let t6 = await (await oo()(e6, { signal: r6 })).arrayBuffer();
  return new Uint8Array(t6);
}
async function Tp(e6) {
  let r6 = Q3(e6), t6 = {};
  if (r6["enterprise/"] != null) {
    t6.enterprise = {};
    let n = r6["enterprise/locations.json"];
    n && (t6.enterprise.locations = JSON.parse(Dp().decode(n)));
    let o = r6["enterprise/locationInstances.json"];
    o && (t6.enterprise.locationInstances = JSON.parse(Dp().decode(o)));
    let i = r6["enterprise/categories.json"];
    i && (t6.enterprise.categories = JSON.parse(Dp().decode(i)));
  }
  return r6["floorstack.json"] && (t6["floorstack.json"] = JSON.parse(Dp().decode(r6["floorstack.json"]))), r6["floor.geojson"] && (t6["floor.geojson"] = JSON.parse(Dp().decode(r6["floor.geojson"]))), r6["manifest.json"] && (t6["manifest.geojson"] = JSON.parse(Dp().decode(r6["manifest.json"]))), t6;
}
async function lw(e6, { signal: r6 }) {
  try {
    let t6 = await (await oo()(e6, { signal: r6 })).arrayBuffer();
    if (r6.aborted) return;
    let n = new Uint8Array(t6);
    return await Tp(n);
  } catch (t6) {
    let n = new Error("downloadLanguagePack failed");
    throw n.cause = t6, n;
  }
}
function rG(e6) {
  let { mvfVersion: r6, useDraftData: t6 } = e6;
  if (r6 === "3.0.0") return t6 ? "exports/mvf3-draft/1/bundle" : "exports/mvf3/1/bundle";
  if (r6 == null || r6 === "2.0.0") return t6 ? "exports/mvf2-draft/1/bundle" : "exports/mvf2/1/bundle";
  if (r6 === "2.0.0-c") return t6 ? "exports/mvf2c-draft/1/bundle" : "exports/mvf2c/1/bundle";
  throw new Error(`Unsupported MVF version: ${r6}`);
}
async function rx(e6) {
  return new Promise(async (r6, t6) => {
    try {
      let n = rG(e6), { url: o, localePacks: i } = await tG(e6, n), s6 = await oo()(o).then((l) => l.arrayBuffer()), u6 = new Uint8Array(s6);
      r6({ compressed: u6, localePacks: i });
    } catch (n) {
      t6(n);
    }
  });
}
async function nx2(e6, r6) {
  return new Promise(async (t6, n) => {
    try {
      let { url: o } = await nG(e6, r6), i = await oo()(o).then((u6) => u6.arrayBuffer()), s6 = new Uint8Array(i);
      t6(s6);
    } catch (o) {
      n(o);
    }
  });
}
async function nG(e6, r6) {
  let t6 = new URL(`${e6.baseUri ? Cp(e6.baseUri) : Sp}api/v1/venue/${e6.mapId}/mvf`);
  e6.viewId && t6.searchParams.set("configId", e6.viewId), e6.mvfVersion && t6.searchParams.set("version", e6.mvfVersion);
  let n = await oo()(t6.toString(), { headers: { Authorization: `Bearer ${r6}` } });
  if (!n.ok) throw new Error(`${n.status} ${n.statusText}`);
  return n.json();
}
function ox2(e6) {
  let r6 = new TextDecoder(), t6 = r6.decode.bind(r6);
  try {
    let n = { "connection.json": JSON.parse(t6(e6["connection.json"])), "manifest.geojson": JSON.parse(t6(e6["manifest.geojson"])), "map.geojson": e6["map.geojson"] ? JSON.parse(t6(e6["map.geojson"])) : void 0, "mapstack.geojson": e6["mapstack.geojson"] ? JSON.parse(t6(e6["mapstack.geojson"])) : void 0, "node.geojson": JSON.parse(t6(e6["node.geojson"])), obstruction: {}, space: {}, entrance: {}, facade: {}, "tileset.json": e6["tileset.json"] ? JSON.parse(t6(e6["tileset.json"])) : void 0, "navigationFlags.json": e6["navigationFlags.json"] ? JSON.parse(t6(e6["navigationFlags.json"])) : void 0 };
    if (e6.enterprise != null && (n.enterprise = {}, e6.enterprise?.["locations.json"] && (n.enterprise.locations = JSON.parse(t6(e6.enterprise?.["locations.json"]))), e6.enterprise?.["categories.json"] && (n.enterprise.categories = JSON.parse(t6(e6.enterprise?.["categories.json"]))), e6.enterprise?.["venue.json"] && (n.enterprise.venue = JSON.parse(t6(e6.enterprise?.["venue.json"]))), e6.enterprise?.["layers.json"] && (n.enterprise.layers = JSON.parse(t6(e6.enterprise?.["layers.json"]))), e6.enterprise?.["locationInstances.json"] && (n.enterprise.locationInstances = JSON.parse(t6(e6.enterprise?.["locationInstances.json"]))), e6.enterprise?.["enterpriseStyles.json"] && (n.enterprise.enterpriseStyles = JSON.parse(t6(e6.enterprise?.["enterpriseStyles.json"]))), e6.enterprise?.["textures.json"] && (n.enterprise.textures = JSON.parse(t6(e6.enterprise?.["textures.json"]))), e6.enterprise?.["floorText.json"] && (n.enterprise.floorText = JSON.parse(t6(e6.enterprise?.["floorText.json"]))), e6.enterprise?.["categoryPriorities.json"] && (n.enterprise.categoryPriorities = JSON.parse(t6(e6.enterprise?.["categoryPriorities.json"])))), e6["floorstack.json"] != null ? n["floorstack.json"] = JSON.parse(t6(e6["floorstack.json"])) : e6["mapstack.json"] != null && (n["mapstack.json"] = JSON.parse(t6(e6["mapstack.json"]))), n["floorstack.json"] == null && n["mapstack.json"] == null && n["mapstack.geojson"] == null) throw new Error("MVF is missing floorstack.json or mapstack.json/mapstack.geojson");
    if (e6["floor.geojson"] && (n["floor.geojson"] = JSON.parse(t6(e6["floor.geojson"]))), n["floor.geojson"] == null && n["map.geojson"] == null) throw new Error("MVF is missing floor.geojson or map.geojson");
    if ("styles.json" in e6 && (n["styles.json"] = JSON.parse(t6(e6["styles.json"]))), "shapes.json" in e6 && (n["shapes.json"] = JSON.parse(t6(e6["shapes.json"]))), "location.json" in e6 && (n["location.json"] = JSON.parse(t6(e6["location.json"]))), "category.json" in e6 && (n["category.json"] = JSON.parse(t6(e6["category.json"]))), e6.annotation != null) {
      n.annotation = {};
      let i = Object.keys(e6.annotation);
      for (let s6 of i) {
        let u6 = s6.replace(/\.json|\.geojson/g, "");
        n.annotation[u6] = JSON.parse(t6(e6.annotation[s6]));
      }
    }
    let o = Object.keys(e6.space);
    for (let i of o) {
      let s6 = i.replace(/\.json|\.geojson/g, "");
      n.space[s6] = JSON.parse(t6(e6.space[i]));
    }
    if (e6.obstruction != null) {
      let i = Object.keys(e6.obstruction);
      for (let s6 of i) {
        let u6 = s6.replace(/\.json|\.geojson/g, "");
        n.obstruction[u6] = JSON.parse(t6(e6.obstruction[s6]));
      }
    } else n.obstruction = {};
    if (e6.entrance != null) {
      let i = Object.keys(e6.entrance);
      for (let s6 of i) {
        let u6 = s6.replace(/\.json|\.geojson/g, "");
        n.entrance[u6] = JSON.parse(t6(e6.entrance[s6]));
      }
    } else n.entrance = {};
    if ("floorImages" in e6 && e6.floorImages != null) {
      n.floorImages = {};
      for (let i of Object.keys(e6.floorImages)) {
        let s6 = i.replace(/\.json|\.geojson/g, "");
        n.floorImages[s6] = JSON.parse(t6(e6.floorImages[i]));
      }
    }
    if ("textAreas" in e6 && e6.textAreas != null) {
      n.textAreas = {};
      for (let i of Object.keys(e6.textAreas)) {
        let s6 = i.replace(/\.json|\.geojson/g, "");
        n.textAreas[s6] = JSON.parse(t6(e6.textAreas[i]));
      }
    }
    if ("facade" in e6 && e6.facade != null) {
      n.facade = {};
      for (let i of Object.keys(e6.facade)) {
        let s6 = i.replace(/\.json|\.geojson/g, "");
        n.facade[s6] = JSON.parse(t6(e6.facade[i]));
      }
    }
    if ("area" in e6 && e6.area != null) {
      n.area = {};
      for (let i of Object.keys(e6.area)) {
        let s6 = i.replace(/\.json|\.geojson/g, "");
        n.area[s6] = JSON.parse(t6(e6.area[i]));
      }
    }
    return n;
  } catch (n) {
    throw Pt.error(n), new Error("MVF parsing failed! Probably encountered a bad file.");
  }
}
function oG(e6) {
  if (e6 == null || typeof e6 != "object") return false;
  let r6 = ["connection.json", "manifest.geojson", "floor.geojson" in e6 ? "floor.geojson" : "map.geojson", "node.geojson", "floorstack.json" in e6 ? "floorstack.json" : "mapstack.json" in e6 ? "mapstack.json" : "mapstack.geojson"];
  "styles.json" in e6 && r6.push("styles.json"), "shapes.json" in e6 && r6.push("shapes.json");
  for (let t6 of r6) if (e6[t6] == null || e6[t6][Symbol.toStringTag] !== "Uint8Array") return false;
  return true;
}
async function ix(e6) {
  return new Promise(async (r6, t6) => {
    try {
      if (e6 == null || typeof e6 != "object") throw new Error("Error parsing data! Unzipping failed.");
      if (e6[Symbol.toStringTag] !== "Uint8Array") throw new Error("Unexpected file type! Unzipping failed.");
      let n = Q3(e6);
      if (!oG(n)) throw new Error("MVF is missing some expect static files. Unzipping failed.");
      let o = {}, i = Object.keys(n);
      for (let s6 of i) {
        if (n[s6].length === 0) continue;
        let u6 = s6.split("/");
        if (u6.length < 0) throw new Error("Encounted a file with no name! Unzipping failed.");
        if (u6.length > 2) throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");
        if (u6.length === 1) {
          o[u6[0]] = n[s6];
          continue;
        }
        if (u6[0] === "image") {
          Pt.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");
          continue;
        } else o[u6[0]] == null && (o[u6[0]] = {}), o[u6[0]][u6[1]] = n[s6];
      }
      r6(o);
    } catch (n) {
      t6(n);
    }
  });
}
function ou() {
  let e6 = "us", r6 = {};
  function t6() {
    return iG(HT(e6), r6);
  }
  return { updateByUserOption(n) {
    n.environment && (e6 = n.environment), n.baseUri && (r6.baseUri = n.baseUri), n.baseAuthUri && (r6.baseAuthUri = n.baseAuthUri), n.analytics?.baseUri && (r6.analyticsBaseUri = n.analytics?.baseUri);
  }, updateTileServerBaseUrl(n) {
    r6.tileServerUri = n;
  }, updateEnvironment(n) {
    e6 = n;
  }, setEnterprise(n) {
    (e6 === "us" || e6 === "us-enterprise") && (e6 = n ? "us-enterprise" : "us");
  }, getBaseUri() {
    return t6().baseUri;
  }, getBaseAuthUri() {
    return t6().baseAuthUri;
  }, getAnalyticsBaseUri() {
    return t6().analyticsBaseUri;
  }, getTileServerUri() {
    return t6().tileServerUri;
  }, reset() {
    e6 = "us", r6 = {};
  }, __getState: t6 };
}
function iG(e6, r6) {
  return { ...e6, ...r6 };
}
var My = (e6) => {
  let r6 = Object.values(e6["floorstack.json"] ?? e6["mapstack.json"] ?? {});
  return r6.length === 1 ? [] : r6.filter((t6) => t6.type !== "Outdoor").map((t6) => t6.id.replace("fs_", "").replace("ms_", ""));
};
var sw = async (e6) => {
  let r6 = performance.now(), t6 = H3(e6);
  return Pt.log(`Parsed MVFv3 in ${performance.now() - r6}ms`), t6.inspectErr((o) => {
    throw Pt.error(o), new Error("MVFv3 parsing failed!");
  }), t6.unwrap();
};
async function Ay(e6, r6 = "2.0.0") {
  switch (r6) {
    case "2.0.0":
    case "2.0.0-c":
      try {
        let t6 = await ix(e6);
        return ox2(t6);
      } catch {
        return sw(e6);
      }
    case "3.0.0":
      return sw(e6);
    default:
      throw new Error(`Unsupported MVF version: ${r6}`);
  }
}
$i();
$i();
$i();
function ko(e6) {
  if (!e6) throw new Error("coord is required");
  if (!Array.isArray(e6)) {
    if (e6.type === "Feature" && e6.geometry !== null && e6.geometry.type === "Point") return e6.geometry.coordinates;
    if (e6.type === "Point") return e6.coordinates;
  }
  if (Array.isArray(e6) && e6.length >= 2 && !Array.isArray(e6[0]) && !Array.isArray(e6[1])) return e6;
  throw new Error("coord must be GeoJSON Point or an Array of numbers");
}
function ao(e6) {
  if (Array.isArray(e6)) return e6;
  if (e6.type === "Feature") {
    if (e6.geometry !== null) return e6.geometry.coordinates;
  } else if (e6.coordinates) return e6.coordinates;
  throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array");
}
function wp(e6) {
  return e6.type === "Feature" ? e6.geometry : e6;
}
function cw(e6, r6) {
  return e6.type === "FeatureCollection" ? "FeatureCollection" : e6.type === "GeometryCollection" ? "GeometryCollection" : e6.type === "Feature" && e6.geometry !== null ? e6.geometry.type : e6.type;
}
function aG(e6, r6, t6) {
  t6 === void 0 && (t6 = {});
  for (var n = ko(e6), o = ao(r6), i = 0; i < o.length - 1; i++) {
    var s6 = false;
    if (t6.ignoreEndVertices && (i === 0 && (s6 = "start"), i === o.length - 2 && (s6 = "end"), i === 0 && i + 1 === o.length - 1 && (s6 = "both")), sG(o[i], o[i + 1], n, s6, typeof t6.epsilon > "u" ? null : t6.epsilon)) return true;
  }
  return false;
}
function sG(e6, r6, t6, n, o) {
  var i = t6[0], s6 = t6[1], u6 = e6[0], l = e6[1], c = r6[0], d = r6[1], f = t6[0] - u6, h = t6[1] - l, b = c - u6, I = d - l, E = f * I - h * b;
  if (o !== null) {
    if (Math.abs(E) > o) return false;
  } else if (E !== 0) return false;
  if (n) {
    if (n === "start") return Math.abs(b) >= Math.abs(I) ? b > 0 ? u6 < i && i <= c : c <= i && i < u6 : I > 0 ? l < s6 && s6 <= d : d <= s6 && s6 < l;
    if (n === "end") return Math.abs(b) >= Math.abs(I) ? b > 0 ? u6 <= i && i < c : c < i && i <= u6 : I > 0 ? l <= s6 && s6 < d : d < s6 && s6 <= l;
    if (n === "both") return Math.abs(b) >= Math.abs(I) ? b > 0 ? u6 < i && i < c : c < i && i < u6 : I > 0 ? l < s6 && s6 < d : d < s6 && s6 < l;
  } else return Math.abs(b) >= Math.abs(I) ? b > 0 ? u6 <= i && i <= c : c <= i && i <= u6 : I > 0 ? l <= s6 && s6 <= d : d <= s6 && s6 <= l;
  return false;
}
var pw = aG;
$i();
function uG(e6, r6) {
  r6 === void 0 && (r6 = {});
  var t6 = HS(e6), n = (t6[0] + t6[2]) / 2, o = (t6[1] + t6[3]) / 2;
  return $B([n, o], r6.properties, r6);
}
var Fp = uG;
$i();
$i();
function lG(e6, r6, t6) {
  t6 === void 0 && (t6 = {});
  var n = ko(e6), o = ko(r6), i = f_e(o[1] - n[1]), s6 = f_e(o[0] - n[0]), u6 = f_e(n[1]), l = f_e(o[1]), c = Math.pow(Math.sin(i / 2), 2) + Math.pow(Math.sin(s6 / 2), 2) * Math.cos(u6) * Math.cos(l);
  return c_e(2 * Math.atan2(Math.sqrt(c), Math.sqrt(1 - c)), t6.units);
}
var iu = lG;
function Oy(e6, r6) {
  return r6 === void 0 && (r6 = {}), b_e(e6, function(t6, n) {
    var o = n.geometry.coordinates;
    return t6 + iu(o[0], o[1], r6);
  }, 0);
}
$i();
$i();
$i();
function By(e6, r6, t6) {
  if (t6 === void 0 && (t6 = {}), t6.final === true) return cG(e6, r6);
  var n = ko(e6), o = ko(r6), i = f_e(n[0]), s6 = f_e(o[0]), u6 = f_e(n[1]), l = f_e(o[1]), c = Math.sin(s6 - i) * Math.cos(l), d = Math.cos(u6) * Math.sin(l) - Math.sin(u6) * Math.cos(l) * Math.cos(s6 - i);
  return h_e(Math.atan2(c, d));
}
function cG(e6, r6) {
  var t6 = By(r6, e6);
  return t6 = (t6 + 180) % 360, t6;
}
$i();
function ll(e6, r6, t6, n) {
  n === void 0 && (n = {});
  var o = ko(e6), i = f_e(o[0]), s6 = f_e(o[1]), u6 = f_e(t6), l = p_e(r6, n.units), c = Math.asin(Math.sin(s6) * Math.cos(l) + Math.cos(s6) * Math.sin(l) * Math.cos(u6)), d = i + Math.atan2(Math.sin(u6) * Math.sin(l) * Math.cos(s6), Math.cos(l) - Math.sin(s6) * Math.sin(c)), f = h_e(d), h = h_e(c);
  return $B([f, h], n.properties);
}
$i();
$i();
function pG(e6) {
  if (!e6) throw new Error("geojson is required");
  var r6 = [];
  return JB(e6, function(t6) {
    dG(t6, r6);
  }), s_e(r6);
}
function dG(e6, r6) {
  var t6 = [], n = e6.geometry;
  if (n !== null) {
    switch (n.type) {
      case "Polygon":
        t6 = ao(n);
        break;
      case "LineString":
        t6 = [ao(n)];
    }
    t6.forEach(function(o) {
      var i = mG(o, e6.properties);
      i.forEach(function(s6) {
        s6.id = r6.length, r6.push(s6);
      });
    });
  }
}
function mG(e6, r6) {
  var t6 = [];
  return e6.reduce(function(n, o) {
    var i = jS([n, o], r6);
    return i.bbox = fG(n, o), t6.push(i), o;
  }), t6;
}
function fG(e6, r6) {
  var t6 = e6[0], n = e6[1], o = r6[0], i = r6[1], s6 = t6 < o ? t6 : o, u6 = n < i ? n : i, l = t6 > o ? t6 : o, c = n > i ? n : i;
  return [s6, u6, l, c];
}
var ax2 = pG;
var Mw = s(ww(), 1);
function UG(e6, r6) {
  var t6 = {}, n = [];
  if (e6.type === "LineString" && (e6 = Ci(e6)), r6.type === "LineString" && (r6 = Ci(r6)), e6.type === "Feature" && r6.type === "Feature" && e6.geometry !== null && r6.geometry !== null && e6.geometry.type === "LineString" && r6.geometry.type === "LineString" && e6.geometry.coordinates.length === 2 && r6.geometry.coordinates.length === 2) {
    var o = Fw(e6, r6);
    return o && n.push(o), s_e(n);
  }
  var i = (0, Mw.default)();
  return i.load(ax2(r6)), x_e(ax2(e6), function(s6) {
    x_e(i.search(s6), function(u6) {
      var l = Fw(s6, u6);
      if (l) {
        var c = ao(l).join(",");
        t6[c] || (t6[c] = true, n.push(l));
      }
    });
  }), s_e(n);
}
function Fw(e6, r6) {
  var t6 = ao(e6), n = ao(r6);
  if (t6.length !== 2) throw new Error("<intersects> line1 must only contain 2 coordinates");
  if (n.length !== 2) throw new Error("<intersects> line2 must only contain 2 coordinates");
  var o = t6[0][0], i = t6[0][1], s6 = t6[1][0], u6 = t6[1][1], l = n[0][0], c = n[0][1], d = n[1][0], f = n[1][1], h = (f - c) * (s6 - o) - (d - l) * (u6 - i), b = (d - l) * (i - c) - (f - c) * (o - l), I = (s6 - o) * (i - c) - (u6 - i) * (o - l);
  if (h === 0) return null;
  var E = b / h, v6 = I / h;
  if (E >= 0 && E <= 1 && v6 >= 0 && v6 <= 1) {
    var x6 = o + E * (s6 - o), D = i + E * (u6 - i);
    return $B([x6, D]);
  }
  return null;
}
var Ap = UG;
function GG(e6, r6, t6) {
  t6 === void 0 && (t6 = {});
  var n = $B([1 / 0, 1 / 0], { dist: 1 / 0 }), o = 0;
  return JB(e6, function(i) {
    for (var s6 = ao(i), u6 = 0; u6 < s6.length - 1; u6++) {
      var l = $B(s6[u6]);
      l.properties.dist = iu(r6, l, t6);
      var c = $B(s6[u6 + 1]);
      c.properties.dist = iu(r6, c, t6);
      var d = iu(l, c, t6), f = Math.max(l.properties.dist, c.properties.dist), h = By(l, c), b = ll(r6, f, h + 90, t6), I = ll(r6, f, h - 90, t6), E = Ap(jS([b.geometry.coordinates, I.geometry.coordinates]), jS([l.geometry.coordinates, c.geometry.coordinates])), v6 = null;
      E.features.length > 0 && (v6 = E.features[0], v6.properties.dist = iu(r6, v6, t6), v6.properties.location = o + iu(l, v6, t6)), l.properties.dist < n.properties.dist && (n = l, n.properties.index = u6, n.properties.location = o), c.properties.dist < n.properties.dist && (n = c, n.properties.index = u6 + 1, n.properties.location = o + d), v6 && v6.properties.dist < n.properties.dist && (n = v6, n.properties.index = u6), o += d;
    }
  }), n;
}
var hf = GG;
function zG(e6, r6, t6) {
  var n = ao(t6);
  if (cw(t6) !== "LineString") throw new Error("line must be a LineString");
  var o = hf(t6, e6), i = hf(t6, r6), s6;
  o.properties.index <= i.properties.index ? s6 = [o, i] : s6 = [i, o];
  for (var u6 = [s6[0].geometry.coordinates], l = s6[0].properties.index + 1; l < s6[1].properties.index + 1; l++) u6.push(n[l]);
  return u6.push(s6[1].geometry.coordinates), jS(u6, t6.properties);
}
var vx = zG;
var VG = 1e-7;
function xx(e6) {
  return { type: "Point", coordinates: e6 };
}
function HG(e6, r6) {
  let { coordinates: t6 } = r6.geometry, { coordinates: n } = e6.geometry, o = t6.map((i) => hf(e6, xx(i)));
  return n.reduce((i, s6) => {
    let u6 = vx(xx(s6), o[0], e6), l = vx(xx(s6), o[1], e6), c = Oy(u6) < Oy(l) ? u6 : l;
    return c.properties = { ...e6.properties, entrances: [] }, i.concat([c]);
  }, []);
}
function Ix(e6, r6) {
  return r6.reduce((t6, n) => {
    let o = { epsilon: VG }, i = t6.obstructions.findIndex((u6) => pw(Fp(n), u6, o)), s6 = t6.obstructions[i];
    if (s6) {
      let [u6, l] = HG(s6, n);
      t6.entrances.push(n), t6.obstructions.splice(i, 1, u6, l);
    }
    return t6;
  }, { obstructions: [e6], entrances: [] });
}
$i();
$i();
$i();
var Er = class {
  constructor(r6) {
    t(this, "id");
    this.id = r6;
  }
};
$i();
$i();
var Op = class Op2 {
  constructor(r6, t6, n) {
    t(this, "__type", Op2.__type);
    t(this, "id", Vt());
    t(this, "latitude");
    t(this, "longitude");
    t(this, "floorId");
    t(this, "verticalOffset");
    if (typeof r6 == "object") this.latitude = r6.latitude, this.longitude = r6.longitude, this.floorId = r6.floorId, this.verticalOffset = r6.verticalOffset ?? 0;
    else {
      if (t6 == null) throw new Error("Coordinate longitude is required.");
      this.latitude = r6, this.longitude = t6, this.floorId = n, this.verticalOffset = 0;
    }
  }
  static is(r6) {
    return r6.__type === Op2.__type;
  }
  get anchorTarget() {
    return this;
  }
  get focusTarget() {
    return this;
  }
  isEqual(r6) {
    return this.latitude === r6.latitude && this.longitude === r6.longitude && this.floorId === r6.floorId;
  }
  toJSON() {
    return { __type: Op2.__type, latitude: this.latitude, longitude: this.longitude, floorId: this.floorId, verticalOffset: this.verticalOffset };
  }
  toGeoJSON() {
    return { type: "Point", coordinates: [this.longitude, this.latitude, this.verticalOffset ?? 0] };
  }
  destroy() {
  }
};
t(Op, "__type", "coordinate");
var Ex2 = Op;
var ge2 = Ex2;
function Cx(e6) {
  let r6 = e6.enterprise?.locations?.reduce((o, i) => (o[i.id] = i, o), {}) || {};
  for (let o of e6.enterprise?.locationInstances || []) r6[o.id] = o;
  let t6 = {};
  for (let o of e6["floorstack.json"] || []) t6[o.id] = o;
  let n = {};
  for (let o of e6["floor.geojson"]?.features || []) o.properties && o.properties.id && (n[o.properties.id] = o.properties);
  return { type: "downloaded", data: e6, optimized: { "enterprise-location": r6, "enterprise-category": e6.enterprise?.categories?.reduce((o, i) => (o[i.id] = i, o), {}) || {}, "floor-stack": t6, floor: n } };
}
function Aw(e6) {
  return /^https?:\/\/cdn\.mappedin\.com/.test(e6);
}
function Ow(e6) {
  return !!e6.split("?")[1]?.includes("sv=");
}
function kr2(e6, r6) {
  let t6 = e6?.properties?.id || "unknown";
  if (e6.geometry == null) return Pt.error(`Cannot get the center coordinate for "${t6}" because it has no geometry.`), new ge2({ latitude: 0, longitude: 0, floorId: r6 });
  try {
    if (e6.geometry.type === "LineString") {
      let [[n, o], [i, s6]] = e6.geometry.coordinates, u6 = (n + i) / 2, l = (o + s6) / 2;
      return new ge2({ latitude: l, longitude: u6, floorId: r6 });
    } else if (e6.geometry.type === "Point") {
      let [n, o] = e6.geometry.coordinates;
      return new ge2({ latitude: o, longitude: n, floorId: r6 });
    } else if (e6.geometry.type === "Polygon") {
      let n = e6;
      if (n.properties.center != null) {
        let [o, i] = n.properties.center;
        return new ge2({ latitude: i, longitude: o, floorId: r6 });
      }
    }
  } catch {
  }
  try {
    let [n, o] = Fp(e6).geometry.coordinates;
    return new ge2({ latitude: o, longitude: n, floorId: r6 });
  } catch (n) {
    return Pt.error(`Failed to get center coordinate for "${t6}" ${n instanceof Error ? n.stack : ""}`), new ge2({ latitude: 0, longitude: 0, floorId: r6 });
  }
}
function Bw(e6, r6) {
  return r6 && (e6.flags[r6.index] & 1 << r6.bit) !== 0;
}
var so;
var _r;
var cl;
var as;
var Bp = class Bp2 extends Er {
  constructor(t6, n) {
    super(n.mvfData.properties.id);
    t(this, "__type", Bp2.__type);
    v(this, so);
    v(this, _r, {});
    v(this, cl);
    v(this, as);
    w(this, so, t6), w(this, cl, n.floorId), w(this, as, n.mvfData);
  }
  static is(t6) {
    return t6.__type === Bp2.__type;
  }
  get locations() {
    return u(this, _r).locations ? u(this, _r).locations : (u(this, _r).locations = (u(this, so).locationIdsByNodeId[this.id] || []).map((t6) => u(this, so).getById("enterprise-location", t6)).filter(Boolean), u(this, _r).locations);
  }
  get space() {
    return u(this, so).getById("space", u(this, so).spaceIdsByNodeId[this.id]?.[0]);
  }
  get object() {
    return u(this, so).getById("object", u(this, so).objectIdsByNodeId[this.id]?.[0]);
  }
  get floor() {
    let t6 = u(this, so).getById("floor", u(this, cl));
    if (t6 == null) throw new Error(`Floor ${u(this, cl)} not found!`);
    return t6;
  }
  get coordinate() {
    return u(this, _r).coordinate == null && (u(this, _r).coordinate = kr2(u(this, as), u(this, cl))), u(this, _r).coordinate;
  }
  get externalId() {
    return u(this, as).properties.externalId ?? "";
  }
  get neighbors() {
    if (u(this, _r).neighbors == null) {
      let t6 = u(this, as).properties.neighbors.map((n) => {
        let o = u(this, so).getById("node", n.id);
        if (o == null) throw new Error(`Node ${n.id} not found!`);
        return o;
      });
      u(this, _r).neighbors = t6;
    }
    return u(this, _r).neighbors;
  }
  get navigationFlags() {
    if (u(this, _r).navigationFlags == null) {
      let t6 = [], n = u(this, as).properties.flags;
      if (n != null && n.length > 0) for (let [o, i] of Object.entries(u(this, so).navigationFlags)) n.length > i.index && n[i.index] != null && Bw({ flags: n }, i) && t6.push(o);
      u(this, _r).navigationFlags = Object.freeze(t6);
    }
    return u(this, _r).navigationFlags;
  }
  get geoJSON() {
    return { ...u(this, as), properties: null };
  }
  get focusTarget() {
    return this.coordinate;
  }
  get anchorTarget() {
    return this.coordinate;
  }
  toJSON() {
    return { __type: Bp2.__type, id: this.id, floor: this.floor.id, coordinate: this.coordinate.toJSON(), neighbors: this.neighbors.map((t6) => t6.id) };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, _r))) delete u(this, _r)[t6];
  }
};
so = /* @__PURE__ */ new WeakMap(), _r = /* @__PURE__ */ new WeakMap(), cl = /* @__PURE__ */ new WeakMap(), as = /* @__PURE__ */ new WeakMap(), t(Bp, "__type", "node");
var Sx = Bp;
var _o = Sx;
$i();
$i();
$i();
$i();
var gf;
var ss;
var Pp = class Pp2 extends Er {
  constructor(t6) {
    super(String(Vt()));
    t(this, "__type", Pp2.__type);
    v(this, gf, {});
    v(this, ss);
    w(this, ss, t6.mvfData);
  }
  static is(t6) {
    return t6.__type === Pp2.__type;
  }
  get url() {
    return u(this, ss).url;
  }
  get name() {
    if ("displayName" in u(this, ss)) return u(this, ss).displayName;
    if ("label" in u(this, ss)) return u(this, ss).label;
  }
  toJSON() {
    return { __type: Pp2.__type, id: this.id, url: this.url, name: this.name };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, gf))) delete u(this, gf)[t6];
  }
};
gf = /* @__PURE__ */ new WeakMap(), ss = /* @__PURE__ */ new WeakMap(), t(Pp, "__type", "hyperlink");
var Dx = Pp;
var pl = Dx;
$i();
$i();
function yf(e6) {
  return typeof e6 == "string" ? e6 : e6.id;
}
function wx(e6) {
  return Array.isArray(e6) && Number.isFinite(e6[0]) && Number.isFinite(e6[1]);
}
var Tx = 8;
var pa2 = (e6) => typeof e6 == "number" ? e6.toFixed(Tx) : wx(e6) ? e6[1].toFixed(Tx) + "-" + e6[0].toFixed(Tx) : e6.map((r6) => pa2(r6)).join("-");
var ZG = /^https:\/\/cdn\.mappedin\.com\/category-symbols\/.+$/;
var WG = /^https:\/\/cdn-staging\.mappedin\.net\/category-symbols\/.+$/;
var XG = (e6) => ZG.test(e6) || WG.test(e6);
var JG = /^https:\/\/cdn\.mappedin\.com\/[^/]+\/[^/]+\.[a-zA-Z0-9]+$/;
var YG = /^https:\/\/cdn-staging\.mappedin\.net\/[^/]+\/[^/]+\.[a-zA-Z0-9]+$/;
var KG = (e6) => XG(e6) ? false : JG.test(e6) || YG.test(e6);
var Ly = (e6) => {
  if (!KG(e6)) return null;
  let r6 = "";
  e6.startsWith("https://") ? (r6 = "https://", e6 = e6.slice(8)) : e6.startsWith("http://") && (r6 = "http://", e6 = e6.slice(7));
  let [t6, n, o] = e6.split("/"), i = o.split(".").pop() ?? "";
  return { origin: r6 + t6, mapId: n, fileName: o, fileType: i };
};
function Fx(e6) {
  return e6.reduce((r6, t6, n) => n === 0 ? r6 : r6 + A5(e6[n - 1].toGeoJSON().coordinates, t6.toGeoJSON().coordinates), 0);
}
var bf;
var su;
var dl;
var kp = class kp2 extends Er {
  constructor(t6) {
    super(String(Vt()));
    t(this, "__type", kp2.__type);
    v(this, bf, {});
    v(this, su);
    v(this, dl);
    w(this, su, t6.mvfData), w(this, dl, t6.mapData);
  }
  static is(t6) {
    return t6.__type === kp2.__type;
  }
  get url() {
    let t6 = u(this, su).url;
    if (u(this, dl).tokenManager == null) return t6;
    let n = Ly(u(this, su).url);
    if (n == null) return t6;
    let o = n.mapId;
    try {
      if (u(this, dl).tokenManager.isEnterpriseMode()) return t6;
      let i = u(this, dl).tokenManager.getSasToken(o).token;
      if (i == null || i === "") throw new Error("SAS token empty!");
      return `${t6}?${i}`;
    } catch (i) {
      return n.fileType !== "svg" && Pt.error("Error getting SAS token for image", { error: i, url: t6 }), t6;
    }
  }
  get name() {
    return u(this, su).altText;
  }
  get altText() {
    return u(this, su).altText;
  }
  toJSON() {
    return { __type: kp2.__type, id: this.id, url: this.url, name: this.name };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, bf))) delete u(this, bf)[t6];
  }
};
bf = /* @__PURE__ */ new WeakMap(), su = /* @__PURE__ */ new WeakMap(), dl = /* @__PURE__ */ new WeakMap(), t(kp, "__type", "image");
var Mx = kp;
var ml = Mx;
$i();
var fl;
var gi = class {
  constructor(r6, t6) {
    t(this, "id");
    v(this, fl);
    this.id = r6;
  }
  get geoJSONBoundingBox() {
    return u(this, fl) ? u(this, fl) : "bbox" in this.geoJSON.geometry && this.geoJSON.geometry.bbox ? this.geoJSON.geometry.bbox : (w(this, fl, HS(this.geoJSON)), u(this, fl));
  }
  get geoJSON() {
    return { properties: null, type: "Feature", geometry: { type: "Polygon", coordinates: [[]] } };
  }
};
fl = /* @__PURE__ */ new WeakMap();
var _p;
var us;
var ls;
var Yr = class extends gi {
  constructor(t6, n) {
    super(n.properties.id, t6);
    v(this, _p);
    v(this, us);
    v(this, ls, {});
    w(this, _p, t6), w(this, us, n);
  }
  get externalId() {
    return u(this, us).properties.externalId ?? "";
  }
  get name() {
    let t6 = u(this, us).properties.details?.name ?? "";
    return t6 === "" && (t6 = this.locationProfiles.find((n) => n.name && n.name.length > 0)?.name ?? ""), t6;
  }
  get description() {
    let t6 = u(this, us).properties.details?.description ?? "";
    return t6 === "" && (t6 = this.locationProfiles.find((n) => n.description && n.description.length > 0)?.description ?? ""), t6;
  }
  get images() {
    if (u(this, ls).images != null) return u(this, ls).images;
    let t6 = u(this, us).properties.details?.images?.map((n) => new ml({ mvfData: n, mapData: u(this, _p) })) ?? [];
    return (t6 == null || t6.length === 0) && (t6 = this.locationProfiles.find((n) => n.images.length > 0)?.images ?? []), u(this, ls).images = t6, t6;
  }
  get links() {
    if (u(this, ls).links != null) return u(this, ls).links;
    let t6 = u(this, us).properties.details?.links?.map((n) => new pl({ mvfData: n })) ?? [];
    return (t6 == null || t6.length === 0) && (t6 = this.locationProfiles.find((n) => n.links.length > 0)?.links ?? []), u(this, ls).links = t6, t6;
  }
  get locationProfiles() {
    return u(this, _p).locationProfilesByAttachedFeatureId[this.id] ?? [];
  }
};
_p = /* @__PURE__ */ new WeakMap(), us = /* @__PURE__ */ new WeakMap(), ls = /* @__PURE__ */ new WeakMap();
var vf;
var hl;
var Rp;
var Np;
var Lp = class Lp2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    t(this, "__type", Lp2.__type);
    v(this, vf);
    v(this, hl);
    v(this, Rp, {});
    v(this, Np);
    w(this, vf, t6), w(this, hl, n.floorId), w(this, Np, n.mvfData);
  }
  static is(t6) {
    return t6.__type === Lp2.__type;
  }
  get center() {
    return u(this, Rp).center == null && (u(this, Rp).center = kr2(u(this, Np), u(this, hl))), u(this, Rp).center;
  }
  get floor() {
    let t6 = u(this, vf).getById("floor", u(this, hl));
    if (t6 == null) throw new Error(`Floor ${u(this, hl)} not found!`);
    return t6;
  }
  get geoJSON() {
    return { ...u(this, Np), properties: null };
  }
  get focusTarget() {
    return this;
  }
  get anchorTarget() {
    return this.center;
  }
  toJSON() {
    return { __type: Lp2.__type, id: this.id, name: this.name, floor: this.floor.id };
  }
  destroy() {
  }
};
vf = /* @__PURE__ */ new WeakMap(), hl = /* @__PURE__ */ new WeakMap(), Rp = /* @__PURE__ */ new WeakMap(), Np = /* @__PURE__ */ new WeakMap(), t(Lp, "__type", "area");
var Ax = Lp;
var Lo = Ax;
$i();
var gl;
var cs;
var yl;
var bl;
var $p = class $p2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    t(this, "__type", $p2.__type);
    v(this, gl);
    v(this, cs);
    v(this, yl);
    v(this, bl);
    w(this, cs, {}), w(this, bl, n.mvfData), w(this, gl, t6), w(this, yl, n.floorId);
  }
  static is(t6) {
    return t6.__type === $p2.__type;
  }
  get floor() {
    let t6 = u(this, gl).getById("floor", u(this, yl));
    if (t6 == null) throw new Error(`Floor ${u(this, yl)} not found!`);
    return t6;
  }
  get center() {
    return u(this, cs).center == null && (u(this, cs).center = kr2(u(this, bl), u(this, yl))), u(this, cs).center;
  }
  get isExterior() {
    if (u(this, bl).properties.isExterior) return true;
    let t6 = u(this, gl).obstructionIdByEntranceId[this.id];
    return u(this, gl).getMVFFeatureById("obstruction", t6)?.properties.footprintComponent ?? false;
  }
  get geoJSON() {
    return { ...u(this, bl), properties: null };
  }
  get focusTarget() {
    return this.center;
  }
  get anchorTarget() {
    return this.center;
  }
  toJSON() {
    return { __type: $p2.__type, id: this.id, name: this.name, floor: this.floor.id, center: this.center.toJSON() };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, cs))) delete u(this, cs)[t6];
  }
};
gl = /* @__PURE__ */ new WeakMap(), cs = /* @__PURE__ */ new WeakMap(), yl = /* @__PURE__ */ new WeakMap(), bl = /* @__PURE__ */ new WeakMap(), t($p, "__type", "door");
var Ox2 = $p;
var yn = Ox2;
$i();
var ps2;
var vl;
var Lr;
var uu;
var jp = class jp2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    t(this, "__type", jp2.__type);
    v(this, ps2);
    v(this, vl);
    v(this, Lr, {});
    v(this, uu);
    w(this, ps2, t6), w(this, vl, n.floorId), w(this, uu, n.mvfData);
  }
  static is(t6) {
    return t6.__type === jp2.__type;
  }
  get type() {
    return QG(u(this, uu).properties.kind);
  }
  get locations() {
    if (u(this, Lr).locations) return u(this, Lr).locations;
    u(this, Lr).locations = [];
    let t6 = u(this, ps2).mvfLocationsByGeometryId[u(this, uu).properties.id];
    if (t6?.length > 0) for (let n of t6) {
      let o = u(this, ps2).getById("enterprise-location", n.id);
      o && u(this, Lr).locations.push(o);
    }
    return u(this, Lr).locations;
  }
  get floor() {
    let t6 = u(this, ps2).getById("floor", u(this, vl));
    if (t6 == null) throw new Error(`Floor ${u(this, vl)} not found!`);
    return t6;
  }
  get doors() {
    if (u(this, Lr).doors) return u(this, Lr).doors;
    u(this, Lr).doors = [];
    let t6 = u(this, ps2).entranceNodeIdsBySpaceId?.[this.id] ?? [];
    for (let n of t6) {
      let o = u(this, ps2).doorsByNodeId[n];
      o && u(this, Lr).doors.push(o);
    }
    return u(this, Lr).doors;
  }
  get center() {
    return u(this, Lr).center == null && (u(this, Lr).center = kr2(u(this, uu), u(this, vl))), u(this, Lr).center;
  }
  get geoJSON() {
    return { ...u(this, uu), properties: null };
  }
  get focusTarget() {
    return this.geoJSON.geometry.type === "Polygon" ? this : this.center;
  }
  get anchorTarget() {
    return this.center;
  }
  toJSON() {
    return { __type: jp2.__type, id: this.id, name: this.name, type: this.type, floor: this.floor.id, center: this.center.toJSON() };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, Lr))) delete u(this, Lr)[t6];
  }
};
ps2 = /* @__PURE__ */ new WeakMap(), vl = /* @__PURE__ */ new WeakMap(), Lr = /* @__PURE__ */ new WeakMap(), uu = /* @__PURE__ */ new WeakMap(), t(jp, "__type", "space");
var Bx = jp;
var qG = ["room", "hallway", "exterior", "void", "gate"];
function QG(e6) {
  if (e6 == null || e6 === "default") return "room";
  let r6 = e6.toLowerCase();
  return qG.includes(r6) ? r6 : "room";
}
var Cr2 = Bx;
$i();
var Ro;
var vt;
var $n2;
var Gp;
var Ry;
var Up = class Up2 extends gi {
  constructor(t6, n) {
    super(n.mvfData.properties.id, t6);
    v(this, Gp);
    t(this, "__type", Up2.__type);
    v(this, Ro);
    v(this, vt, {});
    v(this, $n2);
    w(this, Ro, t6), w(this, $n2, n.mvfData);
  }
  static is(t6) {
    return t6.__type === Up2.__type;
  }
  get focusTarget() {
    return this;
  }
  get name() {
    if (!("name" in u(this, $n2).properties)) return u(this, $n2).properties.externalId ?? "";
    let t6 = x(this, Gp, Ry).call(this, "name");
    return typeof t6 == "string" ? t6 : "";
  }
  get shortName() {
    if (!("shortName" in u(this, $n2).properties)) return u(this, $n2).properties.externalId ?? "";
    let t6 = x(this, Gp, Ry).call(this, "shortName");
    return typeof t6 == "string" ? t6 : "";
  }
  get subtitle() {
    let t6 = x(this, Gp, Ry).call(this, "subtitle");
    return typeof t6 == "string" ? t6 : "";
  }
  get externalId() {
    return u(this, $n2).properties.externalId ?? "";
  }
  get elevation() {
    return u(this, $n2).properties.elevation;
  }
  get maxHeight() {
    return u(this, $n2).properties.maxHeight;
  }
  get spaces() {
    if (u(this, vt).spaces == null) {
      let t6 = u(this, Ro).spaces.filter((n) => n.floor.id === this.id);
      u(this, vt).spaces = t6;
    }
    return u(this, vt).spaces;
  }
  get geoJSON() {
    return { type: "Feature", properties: null, geometry: u(this, $n2).geometry ?? { type: "Polygon", coordinates: [] } };
  }
  get objects() {
    if (u(this, vt).objects == null) {
      let t6 = u(this, Ro).objects.filter((n) => n.floor.id === this.id);
      u(this, vt).objects = t6;
    }
    return u(this, vt).objects;
  }
  get connections() {
    if (u(this, vt).connections == null) {
      let t6 = u(this, Ro).connections.filter((n) => n.floors.includes(this));
      u(this, vt).connections = t6;
    }
    return u(this, vt).connections;
  }
  get doors() {
    if (u(this, vt).doors == null) {
      let t6 = u(this, Ro).doors.filter((n) => n.floor.id === this.id);
      u(this, vt).doors = t6;
    }
    return u(this, vt).doors;
  }
  get annotations() {
    if (u(this, vt).annotations == null) {
      let t6 = u(this, Ro).annotations.filter((n) => n.floor.id === this.id);
      u(this, vt).annotations = t6;
    }
    return u(this, vt).annotations;
  }
  get pois() {
    if (u(this, vt).pois == null) {
      let t6 = u(this, Ro).pointsOfInterest.filter((n) => n.floor.id === this.id);
      u(this, vt).pois = t6;
    }
    return u(this, vt).pois;
  }
  get floorStack() {
    if (u(this, vt).floorStack == null) {
      let t6 = u(this, Ro).floorStacks.find((n) => n.floors.includes(this));
      u(this, vt).floorStack = t6;
    }
    return u(this, vt).floorStack;
  }
  get center() {
    return u(this, vt).center == null && (u(this, vt).center = kr2(u(this, $n2), this.id)), u(this, vt).center;
  }
  toJSON() {
    return { __type: Up2.__type, id: this.id, name: this.name, shortName: this.shortName, subtitle: this.subtitle, elevation: this.elevation, maxHeight: this.maxHeight, spaces: this.spaces.map((t6) => t6.id), objects: this.objects.map((t6) => t6.id), connections: this.connections.map((t6) => t6.id), doors: this.doors.map((t6) => t6.id), annotations: this.annotations.map((t6) => t6.id), pois: this.pois.map((t6) => t6.id) };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, vt))) delete u(this, vt)[t6];
  }
};
Ro = /* @__PURE__ */ new WeakMap(), vt = /* @__PURE__ */ new WeakMap(), $n2 = /* @__PURE__ */ new WeakMap(), Gp = /* @__PURE__ */ new WeakSet(), Ry = function(t6) {
  let n = u(this, $n2).properties[t6];
  return u(this, Ro).getPropTranslation(this.__type, t6, this.id, n);
}, t(Up, "__type", "floor");
var Px = Up;
var jn2 = Px;
$i();
$i();
$i();
function zp(e6) {
  let r6;
  if (Cr2.is(e6) || yn.is(e6) || Un.is(e6) || Lo.is(e6) || Rr.is(e6)) r6 = e6.center;
  else if (uo.is(e6) || ds.is(e6)) r6 = e6.coordinate;
  else if (ge2.is(e6)) r6 = e6;
  else if (_o.is(e6)) r6 = e6.coordinate;
  else if (da.is(e6)) r6 = e6.coordinates[0];
  else return;
  return r6;
}
$i();
$i();
var Pw = 3.333333333;
var xf = { debug: false, pitch: 45, bearing: 0, antialiasing: { enabled: true }, shadingAndOutlines: true, outdoorView: { layersHiddenByGeometry: ["building", "building-top"] }, imagePlacementOptions: { mode: "default" }, flipImagesToFaceCamera: true, multiFloorView: { enabled: true, floorGap: "auto" } };
var ma = "ExteriorWalls";
var lu = "Walls";
var kw = 0;
var Vp = "InteriorDoors";
var Hp = "ExteriorDoors";
var or = "GeometryLayer";
var fa = "LabelsLayer";
var yi = "MarkersLayer";
var Zp = "FootprintLayer";
var xl2 = "OcclusionLayer";
var Il = "AreasLayer";
var Wp = "ImagesLayer";
var El2 = "FacadesLayer";
var ha = "PathsLayer";
var _w = ["https://mappedin.auth0.com", "https://mappedin-staging.auth0.com", "https://staging.mappedin.com", "https://mappedin-staging.auth0.com/userinfo", "https://mappedin.com", "https://mappedin.auth0.com/userinfo"];
var ez = { orange: "#F26336", teal: "#057685", lightTeal: "#5DC7D0" };
var tz = /* @__PURE__ */ new Set(["outdoorView", "bearing", "pitch", "zoomLevel", "screenOffsets", "debug", "initialFloor", "shadingAndOutlines", "wallTopColor", "style", "multiFloorView", "occlusion", "imagePlacementOptions", "flipImagesToFaceCamera", "injectStyles", "useStandaloneCamera", "preloadFloors"]);
var rz2 = /* @__PURE__ */ new Set(["style", "enabled", "layersHiddenByGeometry", "lowDpi"]);
function kx(e6) {
  e6.outdoorView?.enabled && !e6.outdoorView?.token && Pt.error("Enable outdoor view requires a token. Provide token in `options.outdoorView.token`");
}
function _x(e6, r6) {
  let t6 = e6?.outdoorView?.token || r6.outdoorViewToken, n = { ...xf, ...e6, outdoorView: { enabled: e6?.outdoorView?.enabled === void 0 ? !!t6 : e6?.outdoorView?.enabled, layersHiddenByGeometry: xf.outdoorView?.layersHiddenByGeometry, ...e6?.outdoorView }, bearing: e6?.bearing ?? r6.naturalBearing ?? 0, imagePlacementOptions: { ...xf.imagePlacementOptions, ...e6?.imagePlacementOptions }, multiFloorView: { ...xf.multiFloorView, ...e6?.multiFloorView } };
  return t6 && n.outdoorView && (n.outdoorView.token = t6), n;
}
function Lw(e6) {
  let r6 = { remove_watermark: false };
  if (e6) try {
    let t6 = T5(e6);
    Object.assign(r6, t6.capabilities);
  } catch (t6) {
    Pt.error("Error decoding capabilities from token", t6);
  }
  return r6;
}
function Rw(e6) {
  let r6 = Object.fromEntries(Object.entries(e6).filter(([t6]) => tz.has(t6)));
  return r6.outdoorView && (r6.outdoorView = Object.fromEntries(Object.entries(r6.outdoorView).filter(([t6]) => rz2.has(t6)))), r6;
}
var cu;
var No;
var ms;
var Xp = class Xp2 extends Yr {
  constructor(t6, n) {
    let o = Object.values(n.mvfDataByFloorId)[0];
    super(t6, o);
    t(this, "__type", Xp2.__type);
    v(this, cu);
    v(this, No);
    v(this, ms);
    w(this, No, {}), w(this, cu, t6), w(this, ms, n.mvfDataByFloorId);
  }
  static is(t6) {
    return t6.__type === Xp2.__type;
  }
  get accessible() {
    return Object.values(u(this, ms))[0].properties.accessible ?? false;
  }
  get type() {
    return Object.values(u(this, ms))[0].properties.kind?.split(".")[1] ?? "unknown";
  }
  get extra() {
    return Object.values(u(this, ms))[0].properties.extra;
  }
  get coordinates() {
    return u(this, No).coordinates == null && (u(this, No).coordinates = Object.entries(u(this, ms)).map(([t6, n]) => kr2(n, t6))), u(this, No).coordinates;
  }
  get nodes() {
    return Object.values(u(this, ms))[0].properties.nodes.map((t6) => u(this, cu).getById("node", t6));
  }
  get floors() {
    return this.coordinates.map((t6) => t6.floorId ? u(this, cu).getById("floor", t6.floorId) : void 0).filter(ym);
  }
  get locationProfiles() {
    if (u(this, No).locationProfiles != null) return u(this, No).locationProfiles;
    let t6 = super.locationProfiles;
    if (t6 == null || t6.length === 0) {
      let n = [this.coordinates[0]?.longitude ?? 0, this.coordinates[0]?.latitude ?? 0], o = pa2(n), i = u(this, cu).mvfConnectionIdsByLatLon[o] ?? [];
      for (let s6 of i) {
        let u6 = u(this, cu).locationProfilesByAttachedFeatureId[s6];
        if (u6 != null) {
          t6 = u6;
          break;
        }
      }
    }
    return u(this, No).locationProfiles = t6 ?? [], t6;
  }
  get focusTarget() {
    return this.coordinates;
  }
  toJSON() {
    return { __type: Xp2.__type, id: this.id, name: this.name, type: this.type, externalId: this.externalId, coordinates: this.coordinates.map((t6) => t6.toJSON()), floors: this.floors.map((t6) => t6.id), extra: this.extra };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, No))) delete u(this, No)[t6];
  }
};
cu = /* @__PURE__ */ new WeakMap(), No = /* @__PURE__ */ new WeakMap(), ms = /* @__PURE__ */ new WeakMap(), t(Xp, "__type", "connection");
var Lx = Xp;
var lo = Lx;
$i();
var Cl;
var Sl2;
var co;
var pu;
var Jp = class Jp2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    t(this, "__type", Jp2.__type);
    v(this, Cl);
    v(this, Sl2);
    v(this, co, {});
    v(this, pu);
    w(this, Cl, t6), w(this, Sl2, n.floorId), w(this, pu, n.mvfData);
  }
  static is(t6) {
    return t6.__type === Jp2.__type;
  }
  get type() {
    let t6 = u(this, pu).properties.kind;
    return t6 == null && (t6 = "object"), t6 === "Desks" && (t6 = "desk"), t6.toLowerCase();
  }
  get locations() {
    if (u(this, co).locations) return u(this, co).locations;
    u(this, co).locations = [];
    let t6 = u(this, Cl).mvfLocationsByGeometryId[u(this, pu).properties.id];
    if (t6?.length > 0) for (let n of t6) {
      let o = u(this, Cl).getById("enterprise-location", n.id);
      o && u(this, co).locations.push(o);
    }
    return u(this, co).locations;
  }
  get floor() {
    let t6 = u(this, Cl).getById("floor", u(this, Sl2));
    if (t6 == null) throw new Error(`Floor ${u(this, Sl2)} not found!`);
    return t6;
  }
  get center() {
    return u(this, co).center == null && (u(this, co).center = kr2(u(this, pu), u(this, Sl2))), u(this, co).center;
  }
  get geoJSON() {
    return { ...u(this, pu), properties: null };
  }
  get anchorTarget() {
    return this.center;
  }
  get focusTarget() {
    return this.geoJSON.geometry.type === "Polygon" ? this : this.center;
  }
  toJSON() {
    return { __type: Jp2.__type, id: this.id, name: this.name, type: this.type, floor: this.floor.id, center: this.center.toJSON() };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, co))) u(this, co)[t6] = null;
  }
};
Cl = /* @__PURE__ */ new WeakMap(), Sl2 = /* @__PURE__ */ new WeakMap(), co = /* @__PURE__ */ new WeakMap(), pu = /* @__PURE__ */ new WeakMap(), t(Jp, "__type", "object");
var Rx = Jp;
var Un = Rx;
$i();
var If;
var Dl;
var du;
var Kp;
var Yp = class Yp2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    t(this, "__type", Yp2.__type);
    v(this, If);
    v(this, Dl);
    v(this, du, {});
    v(this, Kp);
    w(this, If, t6), w(this, Kp, n.mvfData), w(this, Dl, n.floorId);
  }
  static is(t6) {
    return t6.__type === Yp2.__type;
  }
  get floor() {
    let t6 = u(this, If).getById("floor", u(this, Dl));
    if (t6 == null) throw new Error(`Floor ${u(this, Dl)} not found!`);
    return t6;
  }
  get coordinate() {
    return u(this, du).coordinate == null && (u(this, du).coordinate = kr2(u(this, Kp), u(this, Dl))), u(this, du).coordinate;
  }
  get geoJSON() {
    return { ...u(this, Kp), properties: null };
  }
  get focusTarget() {
    return this.coordinate;
  }
  get anchorTarget() {
    return this.coordinate;
  }
  toJSON() {
    return { __type: Yp2.__type, id: this.id, name: this.name, floor: this.floor.id, coordinate: this.coordinate.toJSON() };
  }
  destroy() {
    for (let t6 in u(this, du)) u(this, du)[t6] = null;
  }
};
If = /* @__PURE__ */ new WeakMap(), Dl = /* @__PURE__ */ new WeakMap(), du = /* @__PURE__ */ new WeakMap(), Kp = /* @__PURE__ */ new WeakMap(), t(Yp, "__type", "point-of-interest");
var Nx = Yp;
var uo = Nx;
$i();
var Ef;
var Tl;
var mu;
var wl2;
var Cf2;
var jx;
var qp = class qp2 extends Yr {
  constructor(t6, n) {
    super(t6, n.mvfData);
    v(this, Cf2);
    t(this, "__type", qp2.__type);
    v(this, Ef);
    v(this, Tl);
    v(this, mu, {});
    v(this, wl2);
    w(this, Ef, t6), w(this, Tl, n.floorId), w(this, wl2, n.mvfData);
  }
  static is(t6) {
    return t6.__type === qp2.__type;
  }
  get group() {
    return x(this, Cf2, jx).call(this).group;
  }
  get type() {
    return x(this, Cf2, jx).call(this).type;
  }
  get coordinate() {
    return u(this, mu).coordinate == null && (u(this, mu).coordinate = kr2(u(this, wl2), u(this, Tl))), u(this, mu).coordinate;
  }
  get floor() {
    let t6 = u(this, Ef).getById("floor", u(this, Tl));
    if (t6 == null) throw new Error(`Floor ${u(this, Tl)} not found!`);
    return t6;
  }
  get geoJSON() {
    return { ...u(this, wl2), properties: null };
  }
  get focusTarget() {
    return this.coordinate;
  }
  get anchorTarget() {
    return this.coordinate;
  }
  toJSON() {
    return { __type: qp2.__type, id: this.id, group: this.group, type: this.type, coordinate: this.coordinate.toJSON() };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, mu))) delete u(this, mu)[t6];
  }
};
Ef = /* @__PURE__ */ new WeakMap(), Tl = /* @__PURE__ */ new WeakMap(), mu = /* @__PURE__ */ new WeakMap(), wl2 = /* @__PURE__ */ new WeakMap(), Cf2 = /* @__PURE__ */ new WeakSet(), jx = function() {
  let [t6, n] = u(this, wl2).properties.symbolId.split("--");
  return { group: t6, type: n };
}, t(qp, "__type", "annotation");
var $x = qp;
var ds = $x;
$i();
var fu;
var $o;
var bi;
var ed2;
var Sf;
var Gx;
var Qp = class Qp2 extends gi {
  constructor(t6, n) {
    super(n.mvfData.id, t6);
    v(this, Sf);
    t(this, "__type", Qp2.__type);
    v(this, fu);
    v(this, $o, {});
    v(this, bi);
    v(this, ed2);
    w(this, fu, t6), w(this, bi, n.mvfData), w(this, ed2, n.facadeId);
  }
  static is(t6) {
    return t6.__type === Qp2.__type;
  }
  get type() {
    return u(this, bi).type;
  }
  get name() {
    let t6 = x(this, Sf, Gx).call(this, "name");
    return typeof t6 == "string" ? t6 : "";
  }
  get shortName() {
    let t6 = x(this, Sf, Gx).call(this, "shortName");
    return typeof t6 == "string" ? t6 : "";
  }
  get externalId() {
    return u(this, bi).externalId ?? "";
  }
  get floors() {
    if (u(this, $o).floors == null) {
      let t6 = (u(this, bi).floors ?? u(this, bi).maps ?? []).reduce((n, o) => {
        let i = u(this, fu).floorsById[o];
        return i && n.push(i), n;
      }, []);
      t6.length === 0 && Pt.error(`Floor stack ${this.id} has no floors`), u(this, $o).floors = t6.sort((n, o) => n.elevation - o.elevation);
    }
    return u(this, $o).floors;
  }
  get defaultFloor() {
    if (u(this, $o).defaultFloor != null) return u(this, $o).defaultFloor;
    let t6 = u(this, bi).defaultFloor ? u(this, fu).getById("floor", u(this, bi).defaultFloor) : void 0;
    return u(this, $o).defaultFloor = t6 || this.floors.reduce((n, o) => Math.abs(o.elevation) < Math.abs(n.elevation) ? o : n), u(this, $o).defaultFloor;
  }
  get facade() {
    return u(this, ed2) ? u(this, fu).facadesById[u(this, ed2)] : void 0;
  }
  toJSON() {
    return { __type: Qp2.__type, id: this.id, name: this.name, shortName: this.shortName, type: this.type, floors: this.floors.map((t6) => t6.id) };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, $o))) delete u(this, $o)[t6];
  }
};
fu = /* @__PURE__ */ new WeakMap(), $o = /* @__PURE__ */ new WeakMap(), bi = /* @__PURE__ */ new WeakMap(), ed2 = /* @__PURE__ */ new WeakMap(), Sf = /* @__PURE__ */ new WeakSet(), Gx = function(t6) {
  return u(this, fu).getPropTranslation(this.__type, t6, this.id, u(this, bi)[t6]);
}, t(Qp, "__type", "floor-stack");
var Ux = Qp;
var Ny = Ux;
$i();
var rd;
var Fl;
var nd2;
var ga;
var td2 = class td3 extends gi {
  constructor(t6, n) {
    super(n.mvfData.id, t6);
    t(this, "__type", td3.__type);
    v(this, rd);
    v(this, Fl);
    v(this, nd2);
    v(this, ga, {});
    w(this, rd, n.mvfData), w(this, Fl, t6), w(this, nd2, n.floorStackId);
  }
  static is(t6) {
    return t6.__type === td3.__type;
  }
  get floorStack() {
    return u(this, Fl).getById("floor-stack", u(this, nd2));
  }
  get spaces() {
    if (!u(this, ga).spaces) {
      u(this, ga).spaces = [];
      for (let t6 of u(this, rd).spaces) {
        let n = u(this, Fl).getById("space", t6.spaceId);
        n && u(this, ga).spaces.push(n);
      }
    }
    return u(this, ga).spaces;
  }
  get center() {
    if (!u(this, ga).center) {
      let t6 = { type: "FeatureCollection", features: [] };
      for (let o of this.spaces) {
        let i = u(this, Fl).mvfSpacesById[o.id];
        i && t6.features.push(i);
      }
      if (t6.features.length === 0) throw new $a("No geometry found for facade!");
      let n = Fp(t6);
      u(this, ga).center = new ge2({ latitude: n.geometry.coordinates[1], longitude: n.geometry.coordinates[0], floorId: u(this, rd).spaces[0].floorId });
    }
    return u(this, ga).center;
  }
  get focusTarget() {
    return this.spaces;
  }
  get anchorTarget() {
    return this.center;
  }
  toJSON() {
    return { id: this.id, __type: td3.__type, floorStackId: u(this, nd2), floorStack: this.floorStack, spaces: this.spaces };
  }
};
rd = /* @__PURE__ */ new WeakMap(), Fl = /* @__PURE__ */ new WeakMap(), nd2 = /* @__PURE__ */ new WeakMap(), ga = /* @__PURE__ */ new WeakMap(), t(td2, "__type", "facade");
var zx = td2;
var Rr = zx;
$i();
var nz = /* @__PURE__ */ new Set(["wall", "area"]);
var oz = /* @__PURE__ */ new Set(["void", "desk-entrance"]);
var iz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {}, s6 = {}, u6 = {};
  for (let l of e6["location.json"] || []) {
    let c = new Ml(r6, { mvfData: l });
    if (t6[l.id] = c, l.externalId && (i[l.externalId] == null && (i[l.externalId] = []), i[l.externalId].push(c)), l.categories) for (let f of l.categories) s6[f] == null && (s6[f] = []), s6[f].push(c);
    let d = [...l.obstructions?.map((f) => f.id) ?? [], ...l.spaces?.map((f) => f.id) ?? [], ...l.annotations?.map((f) => f.id) ?? [], ...l.connections ?? [], ...l.entrances?.map((f) => f.id) ?? [], ...l.areas?.map((f) => f.id) ?? []];
    for (let f of d) f && (u6[f] == null && (u6[f] = []), u6[f].push(c));
  }
  for (let l of e6["category.json"] || []) {
    let c = new jy(r6, { mvfData: l });
    n[l.id] = c, l.parent && (o[l.parent] == null && (o[l.parent] = []), o[l.parent].push(c));
  }
  return { locationCategoriesByParentId: o, locationProfilesById: t6, locationCategoriesById: n, locationProfilesByExternalId: i, locationProfilesByCategoryId: s6, locationProfilesByAttachedFeatureId: u6 };
};
var az = (e6, r6, t6) => {
  let n = {}, o = {}, i = {}, s6 = {}, u6 = {}, l = {}, c = {}, d = {}, f = {}, h = {}, b = {}, I = globalThis.Object.keys(e6.space);
  for (let E of I) {
    let v6 = e6.space[E];
    if (v6 != null) {
      for (let x6 of v6.features) if (b[x6.properties.id] = E, l[x6.properties.id] = x6, x6.properties.kind === "desk-entrance" && (u6[x6.properties.externalId] == null && (u6[x6.properties.externalId] = []), u6[x6.properties.externalId].push(...x6.properties.destinationNodes)), !xz(x6)) {
        if (x6.properties.kind?.includes("connection")) {
          let D = pa2(x6.geometry.coordinates);
          f[D] == null && (f[D] = []), f[D].push(x6.properties.id);
          continue;
        }
        if (x6.properties.kind === "poi" || x6.geometry.type === "Point" && x6.properties.kind == null) {
          let D = new uo(t6, { floorId: E, mvfData: x6 });
          i[x6.properties.id] = D, d[E] || (d[E] = []), d[E].push(x6), x6.properties.externalId && (s6[x6.properties.externalId] == null && (s6[x6.properties.externalId] = []), s6[x6.properties.externalId].push(D));
        } else if (x6.geometry.type === "Point") Pt.warn("Encountered a point space with an unknown kind!", x6.properties.kind);
        else {
          let D = new Cr2(t6, { floorId: E, mvfData: x6 });
          n[x6.properties.id] = D, x6.properties.externalId && (o[x6.properties.externalId] == null && (o[x6.properties.externalId] = []), o[x6.properties.externalId].push(D)), c[E] || (c[E] = []), c[E].push(x6);
        }
      }
    }
  }
  for (let E in f) {
    let v6 = f[E], x6 = {};
    for (let w6 of v6) {
      let S = b[w6], F = l[w6], P = r6?.["n_" + F.properties.id.split("s_")[1]];
      x6[S] = { ...F, properties: { ...F.properties, accessible: P?.accessible === true } };
    }
    let D = new lo(t6, { mvfDataByFloorId: x6 });
    h[D.id] = D;
  }
  return { spacesById: n, spacesByExternalId: o, poisById: i, poisByExternalId: s6, connectionsById: h, objectEntranceNodeIdsByObstructionId: u6, mvfSpacesById: l, connectionIdsByLatLon: f, mvfSpacesByFloorId: c, mvfPoisByFloorId: d };
};
var sz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {};
  for (let s6 of e6["node.geojson"].features) {
    o[s6.properties.id] = s6;
    let u6 = new _o(r6, { mvfData: s6, floorId: s6.properties.floor ?? s6.properties.map });
    t6[s6.properties.id] = u6, s6.properties.externalId && (n[s6.properties.externalId] == null && (n[s6.properties.externalId] = []), n[s6.properties.externalId].push(u6));
    let l = s6.properties.floor ?? s6.properties.map;
    i[l] || (i[l] = []), i[l].push(s6);
  }
  return { nodesById: t6, nodesByExternalId: n, mvfNodesById: o, mvfNodesByFloorId: i };
};
var uz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {}, s6 = globalThis.Object.keys(e6.obstruction);
  for (let u6 of s6) {
    let l = e6.obstruction[u6];
    if (l != null) for (let c of l.features) {
      o[c.properties.id] = c;
      for (let f of c.properties.entrances) i[f] = c.properties.id;
      if (nz.has(c.properties.kind?.toLowerCase() ?? "")) continue;
      let d = new Un(r6, { floorId: u6, mvfData: c });
      t6[c.properties.id] = d, c.properties.externalId && (n[c.properties.externalId] == null && (n[c.properties.externalId] = []), n[c.properties.externalId].push(d));
    }
  }
  return { objectsById: t6, objectsByExternalId: n, mvfObstructionById: o, obstructionIdByEntranceId: i };
};
var lz = (e6, r6) => {
  let t6 = {}, n = {}, o = {};
  if ("floor.geojson" in e6 && e6["floor.geojson"] != null) for (let i of e6["floor.geojson"].features) {
    o[i.properties.id] = i.properties;
    let s6 = new jn2(r6, { mvfData: i });
    t6[i.properties.id] = s6, i.properties.externalId && (n[i.properties.externalId] == null && (n[i.properties.externalId] = []), n[i.properties.externalId].push(s6));
  }
  else for (let i of e6["map.geojson"]) {
    o[i.id] = i;
    let s6 = new jn2(r6, { mvfData: { properties: i } });
    t6[i.id] = s6;
  }
  return { floorsById: t6, floorsByExternalId: n, mvfFloorsById: o };
};
var cz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {}, s6 = {}, u6 = e6["floorstack.json"] || e6["mapstack.json"] || e6["mapstack.geojson"];
  if (u6 != null) for (let l of u6) {
    let c = e6.facade?.[l.id], d = new Ny(r6, { mvfData: l, facadeId: c?.id });
    if (t6[l.id] = d, l.externalId && (n[l.externalId] == null && (n[l.externalId] = []), n[l.externalId].push(d)), o[l.id] = l, c) {
      let f = new Rr(r6, { mvfData: c, floorStackId: l.id });
      i[c.id] = f;
      for (let h of c.spaces) s6[h.spaceId] = f;
    }
  }
  return { floorStacksById: t6, floorStacksByExternalId: n, mvfFloorStacksById: o, facadesById: i, facadesBySpaceId: s6 };
};
var pz = (e6, r6) => {
  let t6 = {}, n = {}, o = e6["connection.json"].reduce((i, s6) => {
    s6.nodes.forEach((l) => i[l] = s6), t6[s6.id] = s6;
    let u6 = r6?.[s6.nodes[0]];
    if (u6 != null) {
      let l = pa2(u6.geometry.coordinates);
      n[l] == null && (n[l] = []), n[l].push(s6.id);
    }
    return i;
  }, {});
  return { mvfConnectionsById: t6, mvfConnectionsByNodeId: o, mvfConnectionIdsByLatLon: n };
};
var dz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {}, s6 = {}, u6 = globalThis.Object.keys(e6.entrance);
  for (let l of u6) {
    let c = e6.entrance[l];
    if (c != null) for (let d of c.features) {
      i[d.properties.id] = d;
      let f = new yn(r6, { floorId: l, mvfData: d });
      d.properties.node && (o[d.properties.node] = f), t6[d.properties.id] = f, d.properties.externalId && (n[d.properties.externalId] == null && (n[d.properties.externalId] = []), n[d.properties.externalId].push(f)), s6[l] || (s6[l] = []), s6[l].push(d);
    }
  }
  return { doorsById: t6, doorsByExternalId: n, doorsByNodeId: o, mvfEntrancesById: i, mvfEntrancesByFloorId: s6 };
};
var mz = (e6, r6, t6) => {
  if (e6.textAreas != null) for (let n in e6.textAreas) {
    let o = e6.textAreas[n]?.features;
    if (o != null) {
      for (let i of o) if ("anchorId" in i.properties) {
        let s6 = i?.properties, u6 = r6[s6.anchorId] || t6[s6.anchorId];
        if (u6 != null && s6 != null) {
          let l = u6.properties;
          l.textArea = s6, l.textArea && (l.textArea.position = i.geometry.coordinates);
        }
      }
    }
  }
};
var fz = (e6, r6, t6) => {
  if (e6.floorImages != null) for (let n in e6.floorImages) {
    let o = e6.floorImages[n]?.features;
    if (o != null) {
      for (let i of o) if ("anchorId" in i.properties) {
        let s6 = i?.properties, u6 = r6[s6.anchorId] || t6[s6.anchorId];
        if (u6 != null && s6 != null) {
          let l = u6.properties;
          l.image = s6, l.image && (l.image.position = i.geometry.coordinates);
        }
      }
    }
  }
};
var hz = (e6, r6) => {
  if (e6.enterprise?.enterpriseStyles == null) return;
  let t6 = e6.enterprise?.enterpriseStyles;
  for (let n in t6) {
    let o = t6[n];
    o.geometryAnchors.forEach((i) => {
      let s6 = r6[i.geometryId];
      if (s6 != null) {
        let u6 = s6.properties;
        u6.style = { styleId: n, edgeOffset: o.edgeOffset };
      }
    });
  }
};
var gz = (e6, r6, t6) => {
  if (!(e6.enterprise == null || e6.enterprise.textures == null)) for (let n of e6.enterprise.textures) for (let o of n.geometryAnchors) {
    let i = r6[o.geometryId] || t6[o.geometryId];
    if (i != null) {
      let s6 = i.properties;
      s6.textures == null && (s6.textures = []), s6.textures.push(n);
    }
  }
};
var yz = (e6, r6) => {
  let t6 = {}, n = {}, o = {};
  if (e6.annotation == null) return { annotationsById: t6, mvfAnnotationsById: n, mvfAnnotationsByFloorId: o };
  let i = globalThis.Object.keys(e6.annotation);
  for (let s6 of i) {
    let u6 = e6.annotation[s6];
    if (u6 != null) for (let l of u6.features) {
      n[l.properties.id] = l;
      let c = new ds(r6, { floorId: s6, mvfData: l });
      t6[l.properties.id] = c, o[s6] || (o[s6] = []), o[s6].push(l);
    }
  }
  return { annotationsById: t6, mvfAnnotationsById: n, mvfAnnotationsByFloorId: o };
};
var bz = (e6, r6) => {
  let t6 = {}, n = {}, o = {};
  if (e6.area == null) return { areasById: t6, areasByExternalId: n, mvfAreasById: o };
  let i = globalThis.Object.keys(e6.area);
  for (let s6 of i) {
    let u6 = e6.area[s6];
    if (u6 != null) for (let l of u6.features) {
      o[l.properties.id] = l;
      let c = new Lo(r6, { floorId: s6, mvfData: l });
      t6[l.properties.id] = c, l.properties.externalId && (n[l.properties.externalId] == null && (n[l.properties.externalId] = []), n[l.properties.externalId].push(c));
    }
  }
  return { areasById: t6, areasByExternalId: n, mvfAreasById: o };
};
var vz = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {};
  for (let s6 in e6) {
    let u6 = e6[s6];
    if (u6 == null) continue;
    let l = u6.properties.destinationNodes ?? [];
    if (l.length < 1) continue;
    let c = [];
    for (let d of l) r6[d] != null && c.push(d), n[d] == null && (n[d] = []), n[d].push(u6.properties.id), u6.properties.kind === "desk-entrance" && (o[d] == null && (o[d] = []), o[d].push(u6.properties.externalId));
    c.length > 0 && (t6[s6] = c), i[s6] = l;
  }
  return { entranceNodeIdsBySpaceId: t6, spaceIdsByNodeId: n, objectIdsByNodeId: o, destinationNodesIdsBySpaceId: i };
};
var Nw = (e6, r6) => {
  let t6 = {}, n = {}, o = {}, i = {}, s6 = (e6.enterprise?.locations ?? []).reduce((v6, x6) => (v6[x6.id] = x6, v6), {}), u6 = {}, l = {}, c = {}, d = {}, f = {}, h = {}, b = e6.enterprise?.venue || {}, I = {};
  for (let v6 of e6.enterprise?.categories ?? []) {
    let x6 = new $y(r6, { mvfData: v6 });
    u6[v6.id] = x6, v6.externalId && (l[v6.externalId] == null && (l[v6.externalId] = []), l[v6.externalId].push(x6)), c[v6.id] = v6, v6.locations.forEach((D) => {
      f[D] == null && (f[D] = []), f[D].push(v6.id);
    });
  }
  let E = {};
  for (let v6 of e6.enterprise?.locationInstances ?? []) {
    let x6 = s6[v6.parent], D = Object.keys(x6), w6 = {};
    for (let F of D) w6[F] = void 0;
    let S = { ...w6, polygons: [], nodes: [], ...v6 };
    E[S.parent] == null && (E[S.parent] = []), E[S.parent].push(new da(r6, { mvfData: S, categoryIds: e6.enterprise?.categoryPriorities?.[S.id] || f[S.id], parentId: v6.parent })), I[S.id] = v6;
  }
  for (let v6 of e6.enterprise?.locations ?? []) {
    let x6 = new da(r6, { mvfData: v6, categoryIds: e6.enterprise?.categoryPriorities?.[v6.id] || f[v6.id], locationInstances: E[v6.id] });
    o[v6.id] = x6, v6.externalId && (i[v6.externalId] == null && (i[v6.externalId] = []), i[v6.externalId].push(x6)), v6.nodes.forEach((D) => {
      h[D.id] == null && (h[D.id] = []), h[D.id].push(v6.id);
    });
    for (let D of v6.polygons) d[D.id] == null && (d[D.id] = []), d[D.id].push(v6);
  }
  if (r6.enterpriseMode === true) {
    for (let v6 in r6.mvfConnectionsById) {
      let x6 = {}, D = r6.mvfConnectionsById[v6];
      for (let w6 of r6.mvfConnectionsById[v6].nodes) {
        let S = r6.nodesById[w6];
        S != null && (x6[S.floor.id] = { type: "Feature", geometry: { type: "Point", coordinates: [S.coordinate.longitude, S.coordinate.latitude] }, properties: { id: v6, externalId: D.externalId, kind: "enterprise." + D.type, destinationNodes: [], flags: "", type: D.type, nodes: D.nodes, accessible: D.accessible, extra: D.extra, details: D.details } });
      }
      Object.keys(x6).length > 0 && (t6[v6] = new lo(r6, { mvfDataByFloorId: x6 }), D.externalId && (n[D.externalId] == null && (n[D.externalId] = []), n[D.externalId].push(t6[v6])));
    }
    r6.connectionsById = t6;
  }
  return { connectionsByExternalId: n, locationIdsByNodeId: h, mvfLocationsByGeometryId: d, mvfLocationsById: s6, mvfCategoriesById: c, locationsById: o, locationsByExternalId: i, locationInstancesById: I, categoriesById: u6, categoriesByExternalId: l, venue: b };
};
var $w = (e6, r6) => {
  let { nodesById: t6, nodesByExternalId: n, mvfNodesById: o, mvfNodesByFloorId: i } = sz(e6, r6), { mvfConnectionsById: s6, mvfConnectionsByNodeId: u6, mvfConnectionIdsByLatLon: l } = pz(e6, o), { spacesById: c, spacesByExternalId: d, poisById: f, poisByExternalId: h, mvfSpacesById: b, objectEntranceNodeIdsByObstructionId: I, connectionsById: E, connectionIdsByLatLon: v6, mvfSpacesByFloorId: x6, mvfPoisByFloorId: D } = az(e6, u6, r6), { objectsById: w6, objectsByExternalId: S, mvfObstructionById: F, obstructionIdByEntranceId: P } = uz(e6, r6), { floorsById: L, floorsByExternalId: N, mvfFloorsById: $ } = lz(e6, r6), { floorStacksById: W, floorStacksByExternalId: V, mvfFloorStacksById: q4, facadesById: se, facadesBySpaceId: ue } = cz(e6, r6), { doorsById: ce, doorsByExternalId: de2, doorsByNodeId: Ee2, mvfEntrancesById: he, mvfEntrancesByFloorId: ne } = dz(e6, r6), { annotationsById: Ce, mvfAnnotationsById: xe3, mvfAnnotationsByFloorId: Re } = yz(e6, r6), { areasById: we, areasByExternalId: Ve, mvfAreasById: me } = bz(e6, r6);
  fz(e6, b, F), mz(e6, b, F), hz(e6, b), gz(e6, b, F);
  let { locationCategoriesByParentId: at2, locationProfilesById: xt, locationCategoriesById: Ot, locationProfilesByExternalId: A, locationProfilesByCategoryId: Z, locationProfilesByAttachedFeatureId: O } = iz(e6, r6), { entranceNodeIdsBySpaceId: Q, spaceIdsByNodeId: X, objectIdsByNodeId: Y, destinationNodesIdsBySpaceId: K } = vz(b, Ee2);
  return { spacesById: c, spacesByExternalId: d, nodesById: t6, nodesByExternalId: n, objectsById: w6, objectsByExternalId: S, floorsById: L, floorsByExternalId: N, floorStacksById: W, floorStacksByExternalId: V, facadesById: se, facadesBySpaceId: ue, connectionsById: E, doorsById: ce, doorsByExternalId: de2, doorsByNodeId: Ee2, poisById: f, poisByExternalId: h, annotationsById: Ce, areasById: we, areasByExternalId: Ve, objectEntranceNodeIdsByObstructionId: I, obstructionIdByEntranceId: P, connectionIdsByLatLon: v6, locationProfilesById: xt, locationCategoriesById: Ot, locationProfilesByExternalId: A, locationProfilesByCategoryId: Z, locationCategoriesByParentId: at2, mvfSpacesById: b, mvfNodesById: o, mvfObstructionById: F, mvfFloorsById: $, mvfFloorStacksById: q4, mvfConnectionsById: s6, mvfConnectionsByNodeId: u6, mvfEntrancesById: he, mvfAnnotationsById: xe3, mvfNodesByFloorId: i, mvfSpacesByFloorId: x6, mvfPoisByFloorId: D, mvfAreasById: me, mvfEntrancesByFloorId: ne, mvfAnnotationsByFloorId: Re, locationProfilesByAttachedFeatureId: O, mvfConnectionIdsByLatLon: l, entranceNodeIdsBySpaceId: Q, spaceIdsByNodeId: X, objectIdsByNodeId: Y, destinationNodesIdsBySpaceId: K };
};
function xz(e6) {
  return !["Polygon", "MultiPolygon"].includes(e6.geometry.type) && "kind" in e6.properties && e6.properties.kind == null || oz.has(e6.properties.kind ?? "");
}
$i();
var Iz = /* @__PURE__ */ new Set(["polygons"]);
var po;
var nt;
var Sr2;
var Df;
var od = class od2 extends Er {
  constructor(t6, n) {
    super(n.mvfData.externalId);
    t(this, "__type", od2.__type);
    t(this, "description");
    t(this, "name", "");
    t(this, "amenity");
    t(this, "externalId", "");
    t(this, "extra");
    t(this, "gallery");
    t(this, "instances");
    t(this, "logo");
    t(this, "operationHours");
    t(this, "phone");
    t(this, "picture");
    t(this, "shortName");
    t(this, "showFloatingLabelWhenImagePresent");
    t(this, "showLogo");
    t(this, "siblingGroups");
    t(this, "social");
    t(this, "sortOrder", -1);
    t(this, "states");
    t(this, "tags");
    t(this, "type", "");
    t(this, "hidden", false);
    t(this, "primaryCategory");
    v(this, po);
    v(this, nt, {});
    v(this, Sr2);
    v(this, Df);
    w(this, po, t6), w(this, Sr2, n.mvfData), w(this, Df, n.categoryIds || []), this.instances = n.locationInstances || [];
    for (let o in n.mvfData) !Iz.has(o) && !Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this), o) && Object.defineProperty(this, o, { enumerable: true, get() {
      if (n.parentId) {
        let i = u(this, po).locationsById[n.parentId];
        return u(this, Sr2)[o] != null ? u(this, po).getPropTranslation(this.__type, o, u(this, Sr2).id, u(this, Sr2)[o]) : u(this, po).getPropTranslation(this.__type, o, u(this, Sr2).id, i[o]);
      }
      return u(this, po).getPropTranslation(this.__type, o, u(this, Sr2).id, u(this, Sr2)[o]);
    } });
  }
  static is(t6) {
    return t6.__type === od2.__type;
  }
  get focusTarget() {
    return this.spaces;
  }
  get categories() {
    return u(this, nt).categories ? u(this, nt).categories : (u(this, nt).categories = (u(this, Df).map((t6) => u(this, po).getById("enterprise-category", t6)) || []).filter(Boolean), u(this, nt).categories);
  }
  get coordinates() {
    if (u(this, nt).coordinates) return u(this, nt).coordinates;
    u(this, nt).coordinates = [];
    for (let t6 = 0; t6 < this.nodes.length; t6++) u(this, nt).coordinates.push(this.nodes[t6].coordinate);
    return u(this, nt).coordinates;
  }
  get nodes() {
    if (u(this, nt).nodes) return u(this, nt).nodes;
    u(this, nt).nodes = [];
    for (let t6 = 0; t6 < u(this, Sr2).nodes.length; t6++) {
      let n = u(this, po).getById("node", u(this, Sr2).nodes[t6].id);
      n && u(this, nt).nodes.push(n);
    }
    return u(this, nt).nodes;
  }
  get points() {
    if (u(this, nt).points) return u(this, nt).points;
    u(this, nt).points = [];
    for (let t6 = 0; t6 < u(this, Sr2).spaces.length; t6++) {
      let n = u(this, po).getById("point-of-interest", u(this, Sr2).spaces[t6].id);
      n && u(this, nt).points.push(n);
    }
    return u(this, nt).points;
  }
  get spaces() {
    if (u(this, nt).spaces) return u(this, nt).spaces;
    u(this, nt).spaces = [];
    let t6 = Array.isArray(u(this, Sr2).spaces) ? u(this, Sr2).spaces : u(this, Sr2).polygons;
    for (let n = 0; n < t6.length; n++) {
      let o = u(this, po).getById("space", t6[n].id);
      o && u(this, nt).spaces.push(o);
    }
    return u(this, nt).spaces;
  }
  get objects() {
    if (u(this, nt).objects) return u(this, nt).objects;
    u(this, nt).objects = [];
    for (let t6 = 0; t6 < u(this, Sr2).polygons.length; t6++) {
      let n = u(this, po).getById("object", u(this, Sr2).polygons[t6].id);
      n && u(this, nt).objects.push(n);
    }
    return u(this, nt).objects;
  }
  toJSON() {
    return { __type: od2.__type, id: this.id, name: this.name };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, nt))) delete u(this, nt)[t6];
  }
};
po = /* @__PURE__ */ new WeakMap(), nt = /* @__PURE__ */ new WeakMap(), Sr2 = /* @__PURE__ */ new WeakMap(), Df = /* @__PURE__ */ new WeakMap(), t(od, "__type", "enterprise-location");
var Vx = od;
var da = Vx;
$i();
var Ez = /* @__PURE__ */ new Set();
var Al;
var bn2;
var ya;
var id = class id2 extends Er {
  constructor(t6, n) {
    super(n.mvfData.externalId);
    t(this, "__type", id2.__type);
    t(this, "name", "");
    t(this, "color");
    t(this, "externalId", "");
    t(this, "extra");
    t(this, "icon");
    t(this, "iconFromDefaultList");
    t(this, "sortOrder", -1);
    t(this, "picture");
    v(this, Al);
    v(this, bn2, {});
    v(this, ya);
    w(this, Al, t6), w(this, ya, n.mvfData);
    for (let o in n.mvfData) !Ez.has(o) && !Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this), o) && Object.defineProperty(this, o, { get() {
      return u(this, Al).getPropTranslation(this.__type, o, u(this, ya).id, u(this, ya)[o]);
    } });
  }
  static is(t6) {
    return t6.__type === id2.__type;
  }
  get children() {
    if (u(this, bn2).children) return u(this, bn2).children;
    u(this, bn2).children = [];
    for (let t6 = 0; t6 < u(this, ya).children.length; t6++) {
      let n = u(this, Al).getById("enterprise-category", u(this, ya).children[t6]);
      n && u(this, bn2).children.push(n);
    }
    return u(this, bn2).children;
  }
  get locations() {
    if (u(this, bn2).locations) return u(this, bn2).locations;
    u(this, bn2).locations = [];
    for (let t6 = 0; t6 < u(this, ya).locations.length; t6++) {
      let n = u(this, Al).getById("enterprise-location", u(this, ya).locations[t6]);
      n && u(this, bn2).locations.push(n);
    }
    return u(this, bn2).locations;
  }
  toJSON() {
    return { __type: id2.__type, id: this.id, name: this.name };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, bn2))) delete u(this, bn2)[t6];
  }
};
Al = /* @__PURE__ */ new WeakMap(), bn2 = /* @__PURE__ */ new WeakMap(), ya = /* @__PURE__ */ new WeakMap(), t(id, "__type", "enterprise-category");
var Hx = id;
var $y = Hx;
$i();
var Cz = /* @__PURE__ */ new Set();
var Tf;
var sd;
var ad = class ad2 extends Er {
  constructor(t6, n) {
    super(n.mvfData.externalId);
    t(this, "__type", ad2.__type);
    t(this, "countrycode");
    t(this, "coverImage");
    t(this, "externalId", "");
    t(this, "defaultLanguage", { code: "en", name: "English" });
    t(this, "defaultFloor");
    t(this, "extra");
    t(this, "icon");
    t(this, "languages", []);
    t(this, "links", []);
    t(this, "logo");
    t(this, "mappedinWebUrl");
    t(this, "operationHours");
    t(this, "slug", "");
    t(this, "topLocations");
    t(this, "tzid");
    v(this, Tf, {});
    v(this, sd);
    w(this, sd, n.mvfData);
    for (let o in n.mvfData) !Cz.has(o) && !Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this), o) && (this[o] = n.mvfData[o]);
  }
  static is(t6) {
    return t6.__type === ad2.__type;
  }
  get name() {
    return u(this, sd).name ?? "";
  }
  get defaultMap() {
    return u(this, sd).defaultMap ?? this.defaultFloor ?? "";
  }
  toJSON() {
    return { __type: ad2.__type, id: this.id, name: this.name };
  }
  destroy() {
    for (let t6 of Object.keys(u(this, Tf))) delete u(this, Tf)[t6];
  }
};
Tf = /* @__PURE__ */ new WeakMap(), sd = /* @__PURE__ */ new WeakMap(), t(ad, "__type", "enterprise-venue");
var Zx = ad;
var Wx = Zx;
$i();
$i();
function wf(e6, r6, t6 = []) {
  let n = { ...e6 };
  for (let [o, i] of Object.entries(r6)) if (i !== void 0) if (o in n) {
    let s6 = o;
    if (Array.isArray(i) && i.length > 0) {
      let u6 = Sz(i[0], t6);
      if (u6) {
        let l = n[s6];
        if (!Array.isArray(l)) throw new Error(`Expected array at ${o}, got ${typeof l}`);
        let c = new Map(i.map((h) => [jw(h, u6), h])), f = l.map((h) => {
          let b = c.get(jw(h, u6));
          return b ? wf(h, b, t6) : h;
        });
        n[s6] = f;
      } else n[s6] = i;
    } else {
      let u6 = n[s6];
      typeof u6 == "object" && u6 !== null && typeof i == "object" && i !== null ? Object.keys(i).length === 0 ? n[s6] = i : n[s6] = wf(u6, i, t6) : n[o] = i;
    }
  } else n[o] = i;
  return n;
}
function Sz(e6, r6) {
  function t6(n) {
    if (typeof n != "object" || n === null) return null;
    for (let o of r6) if (o in n && typeof n[o] < "u") return [o];
    if (Array.isArray(n)) return null;
    for (let [o, i] of Object.entries(n)) {
      let s6 = t6(i);
      if (s6) return [o, ...s6];
    }
    return null;
  }
  return t6(e6);
}
function jw(e6, r6) {
  return r6.reduce((t6, n) => {
    if (t6 && typeof t6 == "object") return t6[n];
  }, e6);
}
$i();
$i();
$i();
$i();
$i();
var Uw = ((i) => (i.Departure = "Departure", i.TakeConnection = "TakeConnection", i.ExitConnection = "ExitConnection", i.Turn = "Turn", i.Arrival = "Arrival", i))(Uw || {});
var Xx = ((s6) => (s6.Straight = "Straight", s6.Right = "Right", s6.SlightRight = "SlightRight", s6.Left = "Left", s6.SlightLeft = "SlightLeft", s6.Back = "Back", s6))(Xx || {});
var Gw = ((d) => (d.stairs = "stairs", d.elevator = "elevator", d.escalator = "escalator", d.door = "door", d.ramp = "ramp", d.slide = "slide", d.portal = "portal", d.security = "security", d.shuttle = "shuttle", d.ladder = "ladder", d))(Gw || {});
var Uy = ((t6) => (t6.Exterior = "exterior-walls", t6.Interior = "interior-walls", t6))(Uy || {});
var Gy = ((t6) => (t6.Interior = "interior-doors", t6.Exterior = "exterior-doors", t6))(Gy || {});
function jo(e6) {
  return e6.verticalOffset === 0 ? [e6.longitude, e6.latitude] : [e6.longitude, e6.latitude, e6.verticalOffset];
}
function Tz(e6) {
  return new Map(e6.map((r6) => {
    let { properties: t6 } = r6, { id: n } = t6;
    return [n, r6];
  }));
}
var Jx = (e6, r6) => {
  let t6 = Tz(r6), n = { entrances: { type: "FeatureCollection", features: [] }, walls: { type: "Feature", properties: { id: e6[0].properties.id }, geometry: { type: "MultiLineString", coordinates: [] } } };
  for (let o of e6) {
    let i = [o.geometry.coordinates], s6 = (o.properties.entrances || []).reduce((u6, l) => (t6.has(l) && u6.push(t6.get(l)), u6), []);
    if (s6.length) {
      let { entrances: u6, obstructions: l } = Ix(o, s6);
      i = l.map((c) => c.geometry.coordinates), n.entrances.features.push(...u6);
    }
    n.walls.geometry.coordinates.push(...i);
  }
  return n;
};
function zw(e6, r6) {
  return ((r6 - e6 + Math.PI) % (Math.PI * 2) + Math.PI * 2) % (Math.PI * 2) - Math.PI;
}
function Vw(e6, r6) {
  let t6 = "Left";
  return e6 <= -Math.PI / 4 ? t6 = "Right" : e6 <= -r6 ? t6 = "SlightRight" : e6 <= r6 ? t6 = "Straight" : e6 <= Math.PI / 4 ? t6 = "SlightLeft" : t6 = "Left", t6;
}
function Hw(e6) {
  let r6 = {};
  for (let t6 in e6) {
    let n = e6[t6];
    if (n != null) {
      if (n.id = t6, "polygons" in n) for (let o of n.polygons) r6[o] = n;
      else if ("lineStrings" in n) for (let o of n.lineStrings) r6[o] = n;
      else if ("points" in n) for (let o of n.points) r6[o] = n;
    }
  }
  return r6;
}
function zy(e6, r6) {
  return e6.reduce((t6, n) => {
    let o = r6[n.properties.id];
    if (o == null) return t6;
    if ("textures" in n.properties && Array.isArray(n.properties.textures) && n.properties.textures.length > 0) {
      let i = { ...o, id: o.id + "-textures" };
      t6.set(i, [n]);
    } else t6.has(o) || t6.set(o, []), t6.get(o).push(n);
    return t6;
  }, /* @__PURE__ */ new Map());
}
function ud(e6, r6 = {}) {
  let t6 = { ...e6, flipImageToFaceCamera: r6?.flipImagesToFaceCamera ?? true }, n = r6?.style?.shading ?? r6?.shadingAndOutlines;
  if (n === true ? t6.shading = { start: 0.1, end: 0.15, intensity: 0.4 } : typeof n == "object" && (t6.shading = { start: n.start, end: n.end, intensity: n.intensity }), t6.outline = r6?.style?.outlines ?? r6?.shadingAndOutlines, "lineStrings" in e6) {
    let o = r6?.style?.wallTopColor ?? r6?.wallTopColor;
    o != null && (t6.topColor = o);
  }
  return t6;
}
var Zw = (e6, r6) => {
  let n = (r6.currentMap?.currentFloor).layers.get(or);
  switch (e6) {
    case "interior-walls":
      return n?.layers.get(lu);
    case "exterior-walls":
      return n?.layers.get(ma);
    case "interior-doors":
      return n?.layers.get(Vp);
    case "exterior-doors":
      return n?.layers.get(Hp);
    default:
      return typeof e6 == "string" ? e6 : e6?.id;
  }
};
function Yx(e6) {
  return new Promise((r6) => {
    e6.onComplete(r6), e6.onStop(r6);
  });
}
function Vy(e6) {
  return e6.bbox ? e6.bbox : HS(e6);
}
function Ww(e6, r6) {
  return [Math.min(e6[0], r6[0]), Math.min(e6[1], r6[1]), Math.max(e6[2], r6[2]), Math.max(e6[3], r6[3])];
}
function Ff(e6, r6, t6) {
  return e6.floorId && r6.has(e6.floorId) ? r6.get(e6.floorId) : t6;
}
function ld(e6) {
  if (Cr2.is(e6) || Un.is(e6)) return e6.id;
}
function Xw(e6, r6, t6) {
  let n = e6.coordinates.length === 2 && e6.coordinates[0].floorId !== e6.coordinates[1].floorId, o = true;
  if (n && e6.coordinates[0].floorId != null && e6.coordinates[1].floorId != null) {
    let i = r6?.getById("floor", e6.coordinates[0].floorId), s6 = r6?.getById("floor", e6.coordinates[1].floorId);
    if (i && s6) {
      let u6 = t6.getState(i), l = t6.getState(s6);
      u6 != null && l != null && (o = u6.visible && l.visible && u6.altitude !== l.altitude);
    }
  } else {
    let i = e6.coordinates[0].floorId != null ? r6?.getById("floor", e6.coordinates[0].floorId) : void 0;
    o = i ? t6.getState(i)?.visible ?? true : true;
  }
  return o;
}
function Jw(e6, r6) {
  let t6 = e6.properties.path.split("/"), n = t6[t6.length - 1].split(".")[0], o = atob(n);
  return "img_" + H5(o).toString() + "-" + r6;
}
function fs(e6 = "auto", r6) {
  return e6 === "auto" ? r6 ? Math.round(r6 * Pw) : 10 : e6;
}
function Yw(e6, r6 = "auto") {
  if (!e6.length) return /* @__PURE__ */ new Map();
  let t6 = e6.sort((u6, l) => u6.elevation - l.elevation), n = t6.findIndex((u6) => u6.elevation >= 0);
  n === -1 && (n = t6.length);
  let o = 0, i = /* @__PURE__ */ new Map();
  for (let u6 = n; u6 < t6.length; u6 += 1) {
    let l = t6[u6], c = t6[u6 + 1], d = l.elevation, f = c ? c.elevation : void 0, h = f !== void 0 ? Math.max(0, f - d - 1) : 0, b = u6 === n ? d : 0, I = fs(r6, l.maxHeight) * (1 + h + b), E = o;
    i.set(l.elevation, { altitude: E, effectiveHeight: I }), o += I;
  }
  let s6 = (u6) => -u6 - 1;
  o = 0;
  for (let u6 = n - 1; u6 >= 0; u6 -= 1) {
    let l = t6[u6], c = t6[u6 - 1], d = s6(l.elevation), f = c ? s6(c.elevation) : void 0, h = f !== void 0 ? Math.max(0, f - d - 1) : 0, b = u6 === n - 1 ? d : 0, I = fs(r6, l.maxHeight) * (1 + h + b), E = -(o + I);
    i.set(l.elevation, { altitude: E, effectiveHeight: I }), o += I;
  }
  return i;
}
function Hy(e6, r6) {
  let t6 = r6(e6.center);
  return { center: new ge2({ latitude: t6[1], longitude: t6[0] }), radius: e6.radius };
}
var Kw = Math.PI * 0.1;
var vn;
var Gn2;
var mo;
var hs;
var Ol;
var pd;
var Uo;
var qw;
var cd;
var Qw;
var hu = class {
  constructor(r6, t6, n, o, i) {
    v(this, Uo);
    t(this, "id");
    v(this, vn, {});
    v(this, Gn2);
    v(this, mo);
    t(this, "departure");
    t(this, "destination");
    v(this, hs);
    v(this, Ol);
    v(this, pd);
    this.id = i?.id ?? Vt(), w(this, Gn2, t6), w(this, mo, r6.features), this.departure = n, this.destination = o;
  }
  get path() {
    return u(this, mo).map((r6) => u(this, Gn2).getById("node", r6.properties.id)).filter(Boolean);
  }
  get coordinates() {
    return u(this, vn).coordinates ? u(this, vn).coordinates : (u(this, vn).coordinates = u(this, mo).map((r6) => new ge2(r6.geometry.coordinates[1], r6.geometry.coordinates[0], r6.properties.groupBy)), u(this, vn).coordinates);
  }
  get distance() {
    return u(this, vn).distance ? u(this, vn).distance : (u(this, vn).distance = u(this, mo).reduce((r6, t6) => r6 + (t6.properties.distance || 0), 0), u(this, vn).distance);
  }
  get instructions() {
    if (u(this, mo).length < 2) return [];
    if (u(this, vn).instructions) return u(this, vn).instructions;
    let r6 = [], t6 = 0;
    for (let n = 0; n < u(this, mo).length; n++) {
      let o = u(this, mo)[n], i = u(this, mo)[n - 1], s6 = u(this, mo)[n + 1], u6 = new ge2(o.geometry.coordinates[1], o.geometry.coordinates[0], o.properties.groupBy), l = x(this, Uo, qw).call(this, { prevDirection: i, direction: o, nextDirection: s6 });
      t6 += i?.properties.distance || 0;
      for (let c of l) c && (r6.push({ action: c, distance: t6, coordinate: u6, node: u(this, Gn2).getById("node", o.properties.id) }), t6 = 0);
    }
    return u(this, vn).instructions = r6, u(this, vn).instructions;
  }
  toJSON() {
    return { id: this.id, directions: u(this, mo), __type: "directions", from: this.departure, to: this.destination };
  }
};
vn = /* @__PURE__ */ new WeakMap(), Gn2 = /* @__PURE__ */ new WeakMap(), mo = /* @__PURE__ */ new WeakMap(), hs = /* @__PURE__ */ new WeakMap(), Ol = /* @__PURE__ */ new WeakMap(), pd = /* @__PURE__ */ new WeakMap(), Uo = /* @__PURE__ */ new WeakSet(), qw = function(r6) {
  let { prevDirection: t6, direction: n, nextDirection: o } = r6, i = t6 && u(this, Gn2).getById("floor", t6.properties.groupBy), s6 = u(this, Gn2).getById("floor", n.properties.groupBy), u6 = o && u(this, Gn2).getById("floor", o.properties.groupBy), l = [];
  t6 || l.push({ type: "Departure" });
  let c = u(this, Gn2).getMVFFeatureByNodeId("connection", n.properties.id), d = c ? u(this, Gn2).getById("connection", c.id) : void 0, f = c && c.nodes.length > 1, h = u(this, Gn2).enterpriseMode && (!n.properties.destination || !c?.nodes.includes(n.properties.destination) || !c?.nodes.includes(n.properties.id));
  if (c && !(!f || h)) if (!u(this, hs) || u(this, hs) === "exit") l.push(x(this, Uo, cd).call(this, "TakeConnection", s6, u6, d, c)), w(this, hs, "take"), w(this, Ol, d), w(this, pd, c);
  else {
    let I = u(this, Gn2).getMVFFeatureByNodeId("connection", t6?.properties.id ?? ""), E = u(this, Gn2).getById("connection", I?.id ?? "");
    l.push(x(this, Uo, cd).call(this, "ExitConnection", s6, i, E, I)), w(this, hs, "exit"), w(this, Ol, d), w(this, pd, c);
  }
  else u(this, hs) === "take" ? (l.push(x(this, Uo, cd).call(this, "ExitConnection", s6, i, u(this, Ol), u(this, pd))), w(this, hs, "exit"), w(this, Ol, d)) : u6 && s6?.id !== u6.id ? l.push(x(this, Uo, cd).call(this, "TakeConnection", s6, u6, d)) : i && i.id !== s6?.id ? l.push(x(this, Uo, cd).call(this, "ExitConnection", s6, i, d)) : l.push(x(this, Uo, Qw).call(this, t6, n));
  return o || l.push({ type: "Arrival" }), l;
}, cd = function(r6, t6, n, o, i) {
  let s6 = "none", u6 = t6 ? t6.elevation : 0;
  if (u6 != null && n?.elevation != null) {
    let c = u6 - n.elevation;
    c > 0 ? s6 = "down" : c < 0 && (s6 = "up");
  }
  let l = o?.type ?? i?.type ?? "stairs";
  return { type: r6, fromFloor: t6, toFloor: n, direction: s6, connection: o, connectionType: l };
}, Qw = function(r6, t6) {
  let n = t6.properties.edges;
  if (!n || n.filter((s6) => s6.destination.properties.id !== r6?.properties.id && s6.destination.properties.id !== t6.properties.destination).length === 0) return null;
  let i = r6 ? -zw(r6.properties.angle, t6.properties.angle) : 0;
  return Math.abs(i) >= Kw ? { type: "Turn", bearing: Vw(i, Kw), referencePosition: "At" } : null;
};
$i();
$i();
$i();
$i();
$i();
$i();
$i();
var Bl = class {
  constructor({ origin: r6, destination: t6, distance: n = 0, angle: o = 0, pathWeight: i = 0, multiplicativeDistanceWeightScaling: s6 = true }) {
    t(this, "origin");
    t(this, "destination");
    t(this, "distance");
    t(this, "angle");
    t(this, "weight");
    if (this.origin = r6, this.destination = t6, this.distance = n, this.angle = o, this.weight = i || 0, s6 ? r6.properties.floor === t6.properties.floor && (this.weight = (this.weight >= 0 ? this.distance * this.weight : 0) + this.distance) : r6.properties.map === t6.properties.map && (this.weight = this.weight >= 0 ? this.distance + this.weight : 0), isNaN(this.angle)) throw new Error("Invalid angle: Expected a numeric value, but received NaN.");
  }
};
$i();
$i();
$i();
function gs(e6, r6, t6) {
  if (t6 === void 0 && (t6 = {}), !e6) throw new Error("point is required");
  if (!r6) throw new Error("polygon is required");
  var n = ko(e6), o = wp(r6), i = o.type, s6 = r6.bbox, u6 = o.coordinates;
  if (s6 && wz(n, s6) === false) return false;
  i === "Polygon" && (u6 = [u6]);
  for (var l = false, c = 0; c < u6.length && !l; c++) if (eF(n, u6[c][0], t6.ignoreBoundary)) {
    for (var d = false, f = 1; f < u6[c].length && !d; ) eF(n, u6[c][f], !t6.ignoreBoundary) && (d = true), f++;
    d || (l = true);
  }
  return l;
}
function eF(e6, r6, t6) {
  var n = false;
  r6[0][0] === r6[r6.length - 1][0] && r6[0][1] === r6[r6.length - 1][1] && (r6 = r6.slice(0, r6.length - 1));
  for (var o = 0, i = r6.length - 1; o < r6.length; i = o++) {
    var s6 = r6[o][0], u6 = r6[o][1], l = r6[i][0], c = r6[i][1], d = e6[1] * (s6 - l) + u6 * (l - e6[0]) + c * (e6[0] - s6) === 0 && (s6 - e6[0]) * (l - e6[0]) <= 0 && (u6 - e6[1]) * (c - e6[1]) <= 0;
    if (d) return !t6;
    var f = u6 > e6[1] != c > e6[1] && e6[0] < (l - s6) * (e6[1] - u6) / (c - u6) + s6;
    f && (n = !n);
  }
  return n;
}
function wz(e6, r6) {
  return r6[0] <= e6[0] && r6[1] <= e6[1] && r6[2] >= e6[0] && r6[3] >= e6[1];
}
$i();
$i();
function ys2([e6, r6], [t6, n]) {
  let o = r6 - n, i = e6 - t6;
  return (Math.atan2(i, o) + Math.PI * 3) % (Math.PI * 2);
}
$i();
$i();
function Zy(e6, r6, t6, n) {
  let [o, i] = e6, [s6, u6] = r6, [l, c] = t6, [d, f] = n;
  if (i === u6 && o === s6 || c === f && l === d) return null;
  let h = (d - l) * (u6 - i) - (f - c) * (s6 - o);
  if (h === 0) return null;
  let b = ((f - c) * (o - l) - (d - l) * (i - c)) / h, I = ((u6 - i) * (o - l) - (s6 - o) * (i - c)) / h;
  if (b < 0 || b > 1 || I < 0 || I > 1) return null;
  let E = i + b * (u6 - i);
  return [o + b * (s6 - o), E];
}
$i();
function Kx(e6, r6, t6, n) {
  let o = ll(e6, t6 / 1e3, n), i = ll(r6, t6 / 1e3, n);
  return [o.geometry.coordinates, i.geometry.coordinates];
}
$i();
function qx(e6) {
  let r6 = e6 * (180 / Math.PI);
  return r6 = r6 % 360, r6 > 180 ? r6 -= 360 : r6 < -180 && (r6 += 360), Object.is(r6, -0) ? 0 : r6;
}
var tF = 111e3;
function Wy(e6, r6, t6 = [], n = 0) {
  let o = true, i = e6.geometry.coordinates, s6 = r6.geometry.coordinates, u6 = qx(ys2(i, s6) - Math.PI / 2), l = qx(ys2(i, s6) + Math.PI / 2), c = n / tF, d = n / (tF * Math.cos(i[1] * Math.PI / 180)), f = Math.min(i[1], s6[1]) - c, h = Math.max(i[1], s6[1]) + c, b = Math.min(i[0], s6[0]) - d, I = Math.max(i[0], s6[0]) + d;
  for (let E of t6) if (!(Math.max(E[0][1], E[1][1]) < f || Math.min(E[0][1], E[1][1]) > h || Math.max(E[0][0], E[1][0]) < b || Math.min(E[0][0], E[1][0]) > I)) {
    if (n > 0) {
      let v6 = Kx(i, s6, n, u6), x6 = Kx(i, s6, n, l);
      if (Zy(v6[0], v6[1], E[0], E[1]) || Zy(x6[0], x6[1], E[0], E[1])) return o = false, false;
    } else if (Zy(i, s6, E[0], E[1])) return o = false, false;
  }
  return o;
}
var e2 = 0.4;
var Pl;
var Kr;
var Qx;
var rF;
var nF;
var oF;
var iF;
var aF;
var sF;
var Jy;
var Xy = class {
  constructor({ nodes: r6, groupBy: t6, multiplicativeDistanceWeightScaling: n }) {
    v(this, Kr);
    t(this, "edges", {});
    t(this, "nodesById");
    t(this, "nodesByGroup", /* @__PURE__ */ new Map());
    v(this, Pl);
    t(this, "hasLineOfSight", (r8, t10, n6 = [], o6 = e2) => Wy({ type: "Feature", properties: { id: "origin", neighbors: [] }, geometry: { type: "Point", coordinates: r8 } }, { type: "Feature", properties: { id: "destination", neighbors: [] }, geometry: { type: "Point", coordinates: t10 } }, n6, o6) === true);
    v(this, Jy, (r8, t10) => {
      let n6 = 0;
      for (let o6 of t10) (!o6[u(this, Pl)] || o6[u(this, Pl)] === r8.properties[u(this, Pl)]) && gs(r8.geometry.coordinates, o6.geometry.geometry) && (n6 += Math.max(0, o6.cost));
      return n6;
    });
    w(this, Pl, t6);
    let { features: o } = r6;
    this.nodesById = x(this, Kr, rF).call(this, o), x(this, Kr, nF).call(this), x(this, Kr, oF).call(this, o, t6, { multiplicativeDistanceWeightScaling: n });
  }
  getShortestEuclideanDistance(r6, t6) {
    return t6.reduce((n, o) => {
      let i = I5(r6.geometry.coordinates, o.geometry.coordinates);
      return Math.min(n, i);
    }, Number.MAX_VALUE);
  }
  dijkstraFindWithinTravelDistance(r6, t6, n, o, i, s6) {
    let u6 = this.nodesById[r6];
    if (!u6) return [];
    let l = [], c = {}, d = {}, f = /* @__PURE__ */ new Set(), h = [];
    for (l.push({ node: u6, distance: 0 }), c[u6.properties.id] = null, d[u6.properties.id] = 0; l.length > 0; ) {
      l.sort((v6, x6) => v6.distance - x6.distance);
      let b = l.shift();
      if (!b) break;
      let I = b.node, E = b.distance;
      if (!f.has(I.properties.id)) {
        if (f.add(I.properties.id), h.length >= s6) break;
        I.properties.id != null && n.includes(I.properties.id?.toString()) && (i ? this.hasLineOfSight(u6.geometry.coordinates, I.geometry.coordinates, o) && h.push({ feature: I, distance: E }) : h.push({ feature: I, distance: E }));
        for (let v6 of this.edges[I.properties.id]) {
          let x6 = v6.destination, D = E + v6.distance, w6 = d[I.properties.id] + v6.weight;
          D > t6 || f.has(x6.properties.id) || d[x6.properties.id] !== void 0 && w6 >= d[x6.properties.id] || (d[x6.properties.id] = w6, c[x6.properties.id] = v6, l.push({ node: x6, distance: D }));
        }
      }
    }
    return h.sort((b, I) => b.distance - I.distance);
  }
  aStar({ originIds: r6, destinationNodeIds: t6, disabledConnectionNodeIds: n, zones: o, overrideEdgeWeights: i, disabledNodeIds: s6 }) {
    let u6 = x(this, Kr, Qx).call(this, r6), l = x(this, Kr, Qx).call(this, t6);
    if (u6.length === 0 || l.length === 0) return [];
    let { frontier: c, cameFrom: d, costSoFar: f } = x(this, Kr, iF).call(this, u6, l);
    for (; c.length > 0; ) {
      let h = c.shift();
      if (!h) break;
      if (x(this, Kr, aF).call(this, h.origin, l)) return x(this, Kr, sF).call(this, d, h.origin.properties.id);
      for (let b of this.edges[h.origin.properties.id]) {
        let I = i?.get(b) ?? b.weight;
        if (n?.has(b.origin.properties.id) && b.destination.properties.map !== b.origin.properties.map || s6?.has(b.origin.properties.id)) continue;
        let E = f[h.origin.properties.id] + I + u(this, Jy).call(this, b.destination, o);
        if (E !== 1 / 0 && (f[b.destination.properties.id] == null || E < f[b.destination.properties.id])) {
          let v6 = E + this.getShortestEuclideanDistance(b.destination, l);
          f[b.destination.properties.id] = E, d[b.destination.properties.id] = b, c.push({ origin: b.destination, priority: v6 });
        }
      }
      c.sort((b, I) => b.priority - I.priority);
    }
    return [];
  }
};
Pl = /* @__PURE__ */ new WeakMap(), Kr = /* @__PURE__ */ new WeakSet(), Qx = function(r6) {
  return r6.map((t6) => this.nodesById[t6]).filter(Boolean);
}, rF = function(r6) {
  return r6.reduce((t6, n) => (t6[n.properties.id] = n, t6), {});
}, nF = function() {
  for (let r6 in this.nodesById) this.nodesById.hasOwnProperty(r6) && (this.nodesById[r6].properties.neighbors = this.nodesById[r6].properties.neighbors.filter(({ id: t6 }) => !!this.nodesById[t6]));
}, oF = function(r6, t6, n) {
  r6.forEach((o) => {
    let i = t6 === "default" ? t6 : o.properties[t6];
    this.nodesByGroup.has(i) || this.nodesByGroup.set(i, []), this.nodesByGroup.get(i).push(o), this.edges[o.properties.id] = o.properties.neighbors.map(({ id: s6, weight: u6 }) => {
      let l = this.nodesById[s6], c = A5(o.geometry.coordinates, l.geometry.coordinates), d = ys2(o.geometry.coordinates, l.geometry.coordinates);
      return new Bl({ origin: o, destination: l, pathWeight: u6, distance: c, angle: d, multiplicativeDistanceWeightScaling: n?.multiplicativeDistanceWeightScaling });
    });
  });
}, iF = function(r6, t6) {
  let n = [], o = {}, i = {};
  return r6.forEach((s6) => {
    let u6 = this.getShortestEuclideanDistance(s6, t6);
    n.push({ origin: s6, priority: u6 }), o[s6.properties.id] = null, i[s6.properties.id] = 0;
  }), n.sort((s6, u6) => s6.priority - u6.priority), { frontier: n, cameFrom: o, costSoFar: i };
}, aF = function(r6, t6) {
  return t6.some((n) => n.properties.id === r6.properties.id);
}, sF = function(r6, t6) {
  let n = [], o = r6[t6];
  for (; o; ) n.push(o), o = r6[o.origin.properties.id];
  return n.reverse();
}, Jy = /* @__PURE__ */ new WeakMap();
$i();
function t2(e6, r6, t6) {
  if (e6 == null || e6[r6] == null) return false;
  let n = 1 << t6;
  return (e6[r6] & n) !== 0;
}
var dd = class {
  constructor({ nodes: r6, geojsonCollection: t6, groupBy: n = "default", multiplicativeDistanceWeightScaling: o, flagDeclarations: i }) {
    t(this, "groupBy");
    t(this, "graph");
    t(this, "geometryEdgesByMapId", /* @__PURE__ */ new Map());
    t(this, "flagDeclarations", {});
    t(this, "disabledNodeIds");
    t(this, "generatePath", (r8) => {
      let { destination: t10 } = r8[r8.length - 1], n6 = { type: "FeatureCollection", features: [] };
      for (let i6 = 0; i6 < r8.length; i6++) {
        let { origin: s8, destination: u6 } = r8[i6], l = { id: s8.properties.id, angle: r8[i6].angle, distance: r8[i6].distance, destination: u6.properties.id, edges: this.graph.edges[s8.properties.id] };
        this.groupBy !== "default" && (l.groupBy = s8.properties[this.groupBy]), n6.features.push({ type: "Feature", geometry: { type: "Point", coordinates: [s8.geometry.coordinates[0], s8.geometry.coordinates[1]] }, properties: l });
      }
      let o6 = { id: t10.properties.id, edges: this.graph.edges[t10.properties.id] };
      return this.groupBy !== "default" && (o6.groupBy = t10.properties[this.groupBy]), n6.features.push({ type: "Feature", geometry: { type: "Point", coordinates: [t10.geometry.coordinates[0], t10.geometry.coordinates[1]] }, properties: o6 }), n6;
    });
    t(this, "findNearestNodesOnGraph", (r8, t10, n6, o6, i6 = false, s8 = 1 / 0) => this.graph.dijkstraFindWithinTravelDistance(r8, t10, o6, this.geometryEdgesByMapId.get(n6) ?? [], i6, s8));
    t(this, "hasLineOfSight", (r8, t10, n6, o6) => this.graph.hasLineOfSight(r8, t10, this.geometryEdgesByMapId.get(n6), o6));
    t(this, "getDistance", (r8, t10) => A5(r8, t10));
    t(this, "getAngle", (r8, t10) => ys2(r8, t10));
    this.groupBy = n, this.graph = new Xy({ nodes: r6, groupBy: this.groupBy, multiplicativeDistanceWeightScaling: o });
    let s6 = t6?.features || [];
    this.flagDeclarations = i ?? {}, this.disabledNodeIds = this.getDisabledNodeIds(), s6.forEach((u6) => {
      let l = null;
      if (u6.geometry.type === "LineString" ? l = u6.geometry.coordinates : u6.geometry.type === "Polygon" && (l = u6.geometry.coordinates.flat()), l) {
        let c = this.groupBy === "default" ? this.groupBy : u6.properties[this.groupBy];
        this.geometryEdgesByMapId.has(c) || this.geometryEdgesByMapId.set(c, []), l.forEach((d, f) => {
          this.geometryEdgesByMapId.get(c).push([d, l[f + 1] || l[0]]);
        });
      }
    });
  }
  getDisabledNodeIds() {
    let r6 = /* @__PURE__ */ new Set();
    if (Hh.public in this.flagDeclarations) for (let t6 in this.graph.nodesById) t2(this.graph.nodesById[t6].properties.flags, this.flagDeclarations[Hh.public].index, this.flagDeclarations[Hh.public].bit) || r6.add(t6);
    return r6;
  }
  getDirections({ zones: r6, originIds: t6, destinationNodeIds: n, disabledConnectionNodeIds: o, simplify: i, multiplicativeDistanceWeightScaling: s6, overrideEdgeWeights: u6 }) {
    let l = i?.enabled ?? true, c = r6 ?? [], d = this.graph.aStar({ originIds: t6, destinationNodeIds: n, zones: c, disabledConnectionNodeIds: new Set(o), overrideEdgeWeights: u6, disabledNodeIds: this.disabledNodeIds });
    return d.length === 0 ? { type: "FeatureCollection", features: [] } : (l && (d = this.simplifyAllSteps(d, i?.bufferRadius ?? e2, s6)), this.generatePath(d));
  }
  simplifyAllSteps(r6, t6, n) {
    let o = [], i = [r6[0]];
    for (let c = 1; c < r6.length; c++) if (this.groupBy !== "default" && r6[c].origin.properties[this.groupBy] !== r6[c - 1].origin.properties[this.groupBy]) {
      let d = r6[c - 1].origin.properties[this.groupBy], f = this.geometryEdgesByMapId.get(d) ?? [];
      o.push(...this.simplifySteps(i, f, t6, n)), i = [r6[c]];
    } else i.push(r6[c]);
    let s6 = r6[r6.length - 1], u6 = this.groupBy === "default" ? this.groupBy : s6.origin.properties[this.groupBy], l = this.geometryEdgesByMapId.get(u6) ?? [];
    return o.push(...this.simplifySteps(i, l, t6, n)), o;
  }
  simplifySteps(r6, t6, n, o) {
    if (r6.length < 3) return r6;
    let i = [r6[0]], s6 = 1;
    for (let u6 = s6 + 2; u6 < r6.length; u6++) if ("outdoors" in this.flagDeclarations && t2(r6[s6]?.origin?.properties?.flags ?? [], this.flagDeclarations.outdoors.index, this.flagDeclarations.outdoors.bit) || r6[s6].origin.properties.preventSmoothing || !Wy(r6[s6].origin, r6[u6].origin, t6, n)) {
      let l = u6 - 1;
      i.push(new Bl({ ...r6[s6], destination: r6[l].origin, distance: A5(r6[s6].origin.geometry.coordinates, r6[l].origin.geometry.coordinates), angle: ys2(r6[s6].origin.geometry.coordinates, r6[l].origin.geometry.coordinates) })), s6 = l;
    }
    return i.push(new Bl({ ...r6[s6], destination: r6[r6.length - 1].origin, distance: A5(r6[s6].origin.geometry.coordinates, r6[r6.length - 1].origin.geometry.coordinates), angle: ys2(r6[s6].origin.geometry.coordinates, r6[r6.length - 1].origin.geometry.coordinates), multiplicativeDistanceWeightScaling: o }), r6[r6.length - 1]), i;
  }
};
$i();
var Fz = { lineOfSight: true, mode: "absolute-distance", maxResults: 1 };
function uF(e6) {
  return { ...Fz, lineOfSight: !e6 };
}
var kt2 = /* @__PURE__ */ new WeakMap();
function Yy(e6, r6, t6) {
  let n = uF(t6), i = r6.Query.__LEGACY_NEAREST_SYNC(e6, r6.getByType("node"), n)?.[0]?.feature.id;
  return i ? [i] : [];
}
async function Ky(e6, r6, t6) {
  let n = uF(t6), i = (await r6.Query.nearest(e6, r6.getByType("node"), n))?.[0]?.feature.id;
  return i ? [i] : [];
}
function Mz(e6, r6, t6) {
  let n = [];
  for (let o of e6.navigationTarget) {
    let i = md(o, r6, t6);
    n.push(...i);
  }
  return n;
}
async function Az(e6, r6, t6) {
  let n = [];
  for (let o of e6.navigationTarget) {
    let i = await gu(o, r6, t6);
    n.push(...i);
  }
  return n;
}
function lF(e6, r6) {
  let n = r6?.getMVFFeatureById("entrance", e6.id)?.properties.node;
  return n ? [n] : [];
}
function cF(e6, r6) {
  return r6?.getMVFFeatureById("area", e6.id)?.properties.destinationNodes ?? [];
}
function pF(e6, r6) {
  let t6 = r6?.getMVFFeatureById("space", e6.id);
  if (t6 == null) return [];
  let n = r6.entranceNodeIdsBySpaceId?.[e6.id];
  return n && n.length > 0 ? n : t6.properties.destinationNodes ?? [];
}
function Oz(e6, r6, t6) {
  let n = [];
  for (let o of e6.coordinates) {
    let i = Yy(o, r6, t6);
    i.length > 0 && n.push(i[0]);
  }
  return n;
}
async function Bz(e6, r6, t6) {
  let n = [];
  for (let o of e6.coordinates) {
    let i = await Ky(o, r6, t6);
    i.length > 0 && n.push(i[0]);
  }
  return n;
}
function dF(e6, r6) {
  return r6?.objectEntranceNodeIdsByObstructionId[e6.id] ?? [];
}
function mF(e6, r6) {
  return e6.spaces.flatMap((t6) => r6?.getMVFFeatureById("space", t6.id)?.properties.destinationNodes ?? []).filter((t6) => typeof t6 == "string");
}
function fF(e6) {
  return e6.nodes.map((r6) => r6.id);
}
function md(e6, r6, t6) {
  if (kt2.has(e6)) return kt2.get(e6);
  if (Ml.is(e6)) {
    let n = Mz(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (ds.is(e6)) {
    let n = Yy(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (ge2.is(e6)) {
    let n = Yy(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else {
    if (uo.is(e6)) return Yy(e6, r6, t6);
    if (yn.is(e6)) {
      let n = lF(e6, r6);
      return kt2.set(e6, n), n;
    } else if (Lo.is(e6)) {
      let n = cF(e6, r6);
      return kt2.set(e6, n), n;
    } else if (Cr2.is(e6)) {
      let n = pF(e6, r6);
      return kt2.set(e6, n), n;
    } else if (lo.is(e6)) {
      let n = Oz(e6, r6, t6);
      return kt2.set(e6, n), n;
    } else if (Un.is(e6)) {
      let n = dF(e6, r6);
      return kt2.set(e6, n), n;
    } else if (Rr.is(e6)) {
      let n = mF(e6, r6);
      return kt2.set(e6, n), n;
    } else if (da.is(e6)) {
      let n = fF(e6);
      return kt2.set(e6, n), n;
    } else if (_o.is(e6)) {
      let n = [e6.id];
      return kt2.set(e6, n), n;
    } else return [];
  }
}
async function gu(e6, r6, t6) {
  if (kt2.has(e6)) return kt2.get(e6);
  if (Ml.is(e6)) {
    let n = await Az(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (ds.is(e6)) {
    let n = await Ky(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (ge2.is(e6)) {
    let n = await Ky(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (uo.is(e6)) {
    let n = await Ky(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (yn.is(e6)) {
    let n = lF(e6, r6);
    return kt2.set(e6, n), n;
  } else if (Lo.is(e6)) {
    let n = cF(e6, r6);
    return kt2.set(e6, n), n;
  } else if (Cr2.is(e6)) {
    let n = pF(e6, r6);
    return kt2.set(e6, n), n;
  } else if (lo.is(e6)) {
    let n = await Bz(e6, r6, t6);
    return kt2.set(e6, n), n;
  } else if (Un.is(e6)) {
    let n = dF(e6, r6);
    return kt2.set(e6, n), n;
  } else {
    if (Rr.is(e6)) return mF(e6, r6);
    if (da.is(e6)) {
      let n = fF(e6);
      return kt2.set(e6, n), n;
    } else if (_o.is(e6)) {
      let n = [e6.id];
      return kt2.set(e6, n), n;
    } else return [];
  }
}
function hF(e6, r6, t6) {
  let n = e6.features[0]?.properties.id, o = r6[0];
  if (r6.length > 1) {
    for (let i of r6) if ((t6.get(i) ?? []).includes(n)) {
      o = i;
      break;
    }
  }
  return o;
}
function gF(e6, r6, t6) {
  let n = e6.features[e6.features.length - 1]?.properties.id, o = r6[0];
  if (r6.length > 1) {
    for (let i of r6) if ((t6.get(i) ?? []).includes(n)) {
      o = i;
      break;
    }
  }
  return o;
}
var kl;
var qy;
var fd = class {
  constructor({ nodes: r6, geojsonCollection: t6, connections: n, groupBy: o, multiplicativeDistanceWeightScaling: i, flagDeclarations: s6 }) {
    t(this, "navigator");
    t(this, "connections");
    t(this, "getDirections", async (r8, t10, n6, o6) => {
      let i6 = /* @__PURE__ */ new Map(), s8 = /* @__PURE__ */ new Map();
      for (let f of r8) i6.set(f, await gu(f, o6, o6.enterpriseMode));
      for (let f of t10) s8.set(f, await gu(f, o6, o6.enterpriseMode));
      let { originIds: u6, destinationNodeIds: l, featureToNodeIdsMap: c, earlyReturnNodeId: d } = this.processTargets(i6, s8, o6);
      return d ? u(this, kl).call(this, r8, t10, [d], [d], n6, o6, c) : u(this, kl).call(this, r8, t10, u6, l, n6, o6, c);
    });
    t(this, "getDirectionsSync", (r8, t10, n6, o6) => {
      let i6 = new Map(r8.map((f) => [f, md(f, o6, o6.enterpriseMode)])), s8 = new Map(t10.map((f) => [f, md(f, o6, o6.enterpriseMode)])), { originIds: u6, destinationNodeIds: l, featureToNodeIdsMap: c, earlyReturnNodeId: d } = this.processTargets(i6, s8, o6);
      return d ? u(this, kl).call(this, r8, t10, [d], [d], n6, o6, c) : u(this, kl).call(this, r8, t10, u6, l, n6, o6, c);
    });
    v(this, kl, (r8, t10, n6, o6, i6, s8, u6) => {
      let l = this.getDisabledConnectionNodeIds(i6.accessible).filter((E) => !n6.includes(E) && !o6.includes(E)), c = /* @__PURE__ */ new Map(), d = { ...i6.connectionIdWeightMap };
      for (let E of i6.excludedConnections) d[E.id] = 1 / 0;
      for (let E in d) {
        let v6 = s8.getById("connection", E);
        v6 && u(this, qy).call(this, v6, d[E], c);
      }
      let f = this.navigator.getDirections({ zones: i6.zones.map((E) => ({ geometry: E.geometry, cost: E.cost, map: E.floor?.id })), originIds: n6, destinationNodeIds: o6, disabledConnectionNodeIds: l, simplify: { enabled: i6.smoothing.enabled, bufferRadius: i6.smoothing.radius }, overrideEdgeWeights: c, multiplicativeDistanceWeightScaling: !s8.enterpriseMode });
      this.addCoordinateDirections(f, r8, t10);
      let h = hF(f, r8, u6), b = gF(f, t10, u6), I = new hu(f, s8, h, b);
      if (!(I.distance === 0 && (/* @__PURE__ */ new Set([...n6, ...o6])).size === n6.length + o6.length)) return I;
    });
    t(this, "getDisabledConnectionNodeIds", (r8) => r8 === false ? [] : this.connections.reduce((t10, n6) => n6.accessible ? t10 : t10.concat(n6.nodes), []));
    v(this, qy, (r8, t10, n6) => {
      if (r8.nodes.length < 2) return;
      let o6 = new Set(r8.nodes.map((i6) => i6.id));
      for (let i6 of r8.nodes) {
        let s8 = this.navigator.graph.edges[i6.id];
        if (s8) for (let u6 of s8) o6.has(u6.destination.properties.id) && n6.set(u6, t10);
      }
    });
    t(this, "addCoordinateDirections", (r8, [t10], [n6]) => {
      if (r8.features.length) {
        if (ge2.is(t10)) {
          let o6 = this.createDirectionFeature(t10, this.navigator.getAngle([t10.longitude, t10.latitude], r8.features[0].geometry.coordinates), this.navigator.getDistance([t10.longitude, t10.latitude], r8.features[0].geometry.coordinates));
          r8.features.splice(0, 0, o6);
        }
        if (ge2.is(n6)) {
          let o6 = this.createDirectionFeature(n6, 0, 0), i6 = r8.features[r8.features.length - 1];
          i6.properties.distance = this.navigator.getDistance(i6.geometry.coordinates, [n6.longitude, n6.latitude]), i6.properties.angle = this.navigator.getAngle(i6.geometry.coordinates, [n6.longitude, n6.latitude]), r8.features.push(o6);
        }
      }
    });
    t(this, "createDirectionFeature", (r8, t10, n6) => ({ type: "Feature", geometry: { type: "Point", coordinates: [r8.longitude, r8.latitude] }, properties: { groupBy: r8.floorId, id: r8.id, angle: t10, distance: n6, edges: [] } }));
    this.navigator = new dd({ nodes: r6, geojsonCollection: this.createCollection(t6), groupBy: o, multiplicativeDistanceWeightScaling: i, flagDeclarations: s6 }), this.connections = n;
  }
  processTargets(r6, t6, n) {
    let o = [], i = [], s6 = /* @__PURE__ */ new Map(), u6 = /* @__PURE__ */ new Set();
    for (let [l, c] of r6) {
      s6.set(l, c);
      for (let d of c) o.push(d), n.nodesById[d]?.space?.id && u6.add(n.nodesById[d].space.id);
    }
    for (let [l, c] of t6) {
      s6.set(l, c);
      for (let d of c) if (i.push(d), n.nodesById[d]?.space && u6.has(n.nodesById[d]?.space?.id)) return { originIds: o, destinationNodeIds: i, featureToNodeIdsMap: s6, earlyReturnNodeId: d };
    }
    return { originIds: o, destinationNodeIds: i, featureToNodeIdsMap: s6 };
  }
  createCollection(r6) {
    return { type: "FeatureCollection", features: Object.entries(r6).reduce((t6, [n, o]) => t6.concat(o.features.map((i) => (i.properties.map = n, i))), []) };
  }
};
kl = /* @__PURE__ */ new WeakMap(), qy = /* @__PURE__ */ new WeakMap();
$i();
$i();
$i();
$i();
$i();
$i();
function yF(e6) {
  let r6 = +this._x.call(null, e6), t6 = +this._y.call(null, e6);
  return bF(this.cover(r6, t6), r6, t6, e6);
}
function bF(e6, r6, t6, n) {
  if (isNaN(r6) || isNaN(t6)) return e6;
  var o, i = e6._root, s6 = { data: n }, u6 = e6._x0, l = e6._y0, c = e6._x1, d = e6._y1, f, h, b, I, E, v6, x6, D;
  if (!i) return e6._root = s6, e6;
  for (; i.length; ) if ((E = r6 >= (f = (u6 + c) / 2)) ? u6 = f : c = f, (v6 = t6 >= (h = (l + d) / 2)) ? l = h : d = h, o = i, !(i = i[x6 = v6 << 1 | E])) return o[x6] = s6, e6;
  if (b = +e6._x.call(null, i.data), I = +e6._y.call(null, i.data), r6 === b && t6 === I) return s6.next = i, o ? o[x6] = s6 : e6._root = s6, e6;
  do
    o = o ? o[x6] = new Array(4) : e6._root = new Array(4), (E = r6 >= (f = (u6 + c) / 2)) ? u6 = f : c = f, (v6 = t6 >= (h = (l + d) / 2)) ? l = h : d = h;
  while ((x6 = v6 << 1 | E) === (D = (I >= h) << 1 | b >= f));
  return o[D] = i, o[x6] = s6, e6;
}
function vF(e6) {
  var r6, t6, n = e6.length, o, i, s6 = new Array(n), u6 = new Array(n), l = 1 / 0, c = 1 / 0, d = -1 / 0, f = -1 / 0;
  for (t6 = 0; t6 < n; ++t6) isNaN(o = +this._x.call(null, r6 = e6[t6])) || isNaN(i = +this._y.call(null, r6)) || (s6[t6] = o, u6[t6] = i, o < l && (l = o), o > d && (d = o), i < c && (c = i), i > f && (f = i));
  if (l > d || c > f) return this;
  for (this.cover(l, c).cover(d, f), t6 = 0; t6 < n; ++t6) bF(this, s6[t6], u6[t6], e6[t6]);
  return this;
}
$i();
function xF(e6, r6) {
  if (isNaN(e6 = +e6) || isNaN(r6 = +r6)) return this;
  var t6 = this._x0, n = this._y0, o = this._x1, i = this._y1;
  if (isNaN(t6)) o = (t6 = Math.floor(e6)) + 1, i = (n = Math.floor(r6)) + 1;
  else {
    for (var s6 = o - t6 || 1, u6 = this._root, l, c; t6 > e6 || e6 >= o || n > r6 || r6 >= i; ) switch (c = (r6 < n) << 1 | e6 < t6, l = new Array(4), l[c] = u6, u6 = l, s6 *= 2, c) {
      case 0:
        o = t6 + s6, i = n + s6;
        break;
      case 1:
        t6 = o - s6, i = n + s6;
        break;
      case 2:
        o = t6 + s6, n = i - s6;
        break;
      case 3:
        t6 = o - s6, n = i - s6;
        break;
    }
    this._root && this._root.length && (this._root = u6);
  }
  return this._x0 = t6, this._y0 = n, this._x1 = o, this._y1 = i, this;
}
$i();
function IF() {
  var e6 = [];
  return this.visit(function(r6) {
    if (!r6.length) do
      e6.push(r6.data);
    while (r6 = r6.next);
  }), e6;
}
$i();
function EF(e6) {
  return arguments.length ? this.cover(+e6[0][0], +e6[0][1]).cover(+e6[1][0], +e6[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]];
}
$i();
$i();
function Nr(e6, r6, t6, n, o) {
  this.node = e6, this.x0 = r6, this.y0 = t6, this.x1 = n, this.y1 = o;
}
function CF(e6, r6, t6) {
  var n, o = this._x0, i = this._y0, s6, u6, l, c, d = this._x1, f = this._y1, h = [], b = this._root, I, E;
  for (b && h.push(new Nr(b, o, i, d, f)), t6 == null ? t6 = 1 / 0 : (o = e6 - t6, i = r6 - t6, d = e6 + t6, f = r6 + t6, t6 *= t6); I = h.pop(); ) if (!(!(b = I.node) || (s6 = I.x0) > d || (u6 = I.y0) > f || (l = I.x1) < o || (c = I.y1) < i)) if (b.length) {
    var v6 = (s6 + l) / 2, x6 = (u6 + c) / 2;
    h.push(new Nr(b[3], v6, x6, l, c), new Nr(b[2], s6, x6, v6, c), new Nr(b[1], v6, u6, l, x6), new Nr(b[0], s6, u6, v6, x6)), (E = (r6 >= x6) << 1 | e6 >= v6) && (I = h[h.length - 1], h[h.length - 1] = h[h.length - 1 - E], h[h.length - 1 - E] = I);
  } else {
    var D = e6 - +this._x.call(null, b.data), w6 = r6 - +this._y.call(null, b.data), S = D * D + w6 * w6;
    if (S < t6) {
      var F = Math.sqrt(t6 = S);
      o = e6 - F, i = r6 - F, d = e6 + F, f = r6 + F, n = b.data;
    }
  }
  return n;
}
$i();
function SF(e6) {
  if (isNaN(d = +this._x.call(null, e6)) || isNaN(f = +this._y.call(null, e6))) return this;
  var r6, t6 = this._root, n, o, i, s6 = this._x0, u6 = this._y0, l = this._x1, c = this._y1, d, f, h, b, I, E, v6, x6;
  if (!t6) return this;
  if (t6.length) for (; ; ) {
    if ((I = d >= (h = (s6 + l) / 2)) ? s6 = h : l = h, (E = f >= (b = (u6 + c) / 2)) ? u6 = b : c = b, r6 = t6, !(t6 = t6[v6 = E << 1 | I])) return this;
    if (!t6.length) break;
    (r6[v6 + 1 & 3] || r6[v6 + 2 & 3] || r6[v6 + 3 & 3]) && (n = r6, x6 = v6);
  }
  for (; t6.data !== e6; ) if (o = t6, !(t6 = t6.next)) return this;
  return (i = t6.next) && delete t6.next, o ? (i ? o.next = i : delete o.next, this) : r6 ? (i ? r6[v6] = i : delete r6[v6], (t6 = r6[0] || r6[1] || r6[2] || r6[3]) && t6 === (r6[3] || r6[2] || r6[1] || r6[0]) && !t6.length && (n ? n[x6] = t6 : this._root = t6), this) : (this._root = i, this);
}
function DF(e6) {
  for (var r6 = 0, t6 = e6.length; r6 < t6; ++r6) this.remove(e6[r6]);
  return this;
}
$i();
function TF() {
  return this._root;
}
$i();
function wF() {
  var e6 = 0;
  return this.visit(function(r6) {
    if (!r6.length) do
      ++e6;
    while (r6 = r6.next);
  }), e6;
}
$i();
function FF(e6) {
  var r6 = [], t6, n = this._root, o, i, s6, u6, l;
  for (n && r6.push(new Nr(n, this._x0, this._y0, this._x1, this._y1)); t6 = r6.pop(); ) if (!e6(n = t6.node, i = t6.x0, s6 = t6.y0, u6 = t6.x1, l = t6.y1) && n.length) {
    var c = (i + u6) / 2, d = (s6 + l) / 2;
    (o = n[3]) && r6.push(new Nr(o, c, d, u6, l)), (o = n[2]) && r6.push(new Nr(o, i, d, c, l)), (o = n[1]) && r6.push(new Nr(o, c, s6, u6, d)), (o = n[0]) && r6.push(new Nr(o, i, s6, c, d));
  }
  return this;
}
$i();
function MF(e6) {
  var r6 = [], t6 = [], n;
  for (this._root && r6.push(new Nr(this._root, this._x0, this._y0, this._x1, this._y1)); n = r6.pop(); ) {
    var o = n.node;
    if (o.length) {
      var i, s6 = n.x0, u6 = n.y0, l = n.x1, c = n.y1, d = (s6 + l) / 2, f = (u6 + c) / 2;
      (i = o[0]) && r6.push(new Nr(i, s6, u6, d, f)), (i = o[1]) && r6.push(new Nr(i, d, u6, l, f)), (i = o[2]) && r6.push(new Nr(i, s6, f, d, c)), (i = o[3]) && r6.push(new Nr(i, d, f, l, c));
    }
    t6.push(n);
  }
  for (; n = t6.pop(); ) e6(n.node, n.x0, n.y0, n.x1, n.y1);
  return this;
}
$i();
function AF(e6) {
  return e6[0];
}
function OF(e6) {
  return arguments.length ? (this._x = e6, this) : this._x;
}
$i();
function BF(e6) {
  return e6[1];
}
function PF(e6) {
  return arguments.length ? (this._y = e6, this) : this._y;
}
function Mf(e6, r6, t6) {
  var n = new r2(r6 ?? AF, t6 ?? BF, NaN, NaN, NaN, NaN);
  return e6 == null ? n : n.addAll(e6);
}
function r2(e6, r6, t6, n, o, i) {
  this._x = e6, this._y = r6, this._x0 = t6, this._y0 = n, this._x1 = o, this._y1 = i, this._root = void 0;
}
function kF(e6) {
  for (var r6 = { data: e6.data }, t6 = r6; e6 = e6.next; ) t6 = t6.next = { data: e6.data };
  return r6;
}
var xn = Mf.prototype = r2.prototype;
xn.copy = function() {
  var e6 = new r2(this._x, this._y, this._x0, this._y0, this._x1, this._y1), r6 = this._root, t6, n;
  if (!r6) return e6;
  if (!r6.length) return e6._root = kF(r6), e6;
  for (t6 = [{ source: r6, target: e6._root = new Array(4) }]; r6 = t6.pop(); ) for (var o = 0; o < 4; ++o) (n = r6.source[o]) && (n.length ? t6.push({ source: n, target: r6.target[o] = new Array(4) }) : r6.target[o] = kF(n));
  return e6;
};
xn.add = yF;
xn.addAll = vF;
xn.cover = xF;
xn.data = IF;
xn.extent = EF;
xn.find = CF;
xn.remove = SF;
xn.removeAll = DF;
xn.root = TF;
xn.size = wF;
xn.visit = FF;
xn.visitAfter = MF;
xn.x = OF;
xn.y = PF;
$i();
function n2(e6, r6, t6, n = 0, o = 0, i = 0, s6 = 0) {
  if (t6 === void 0) {
    t6 = e6.root();
    let l = e6.extent();
    if (l && ([[n, o], [i, s6]] = l, r6(t6, n, o, i, s6))) return true;
    if (!t6) return false;
  }
  let u6 = [[n, o, (i + n) / 2, (s6 + o) / 2], [(i + n) / 2, o, i, (s6 + o) / 2], [n, (s6 + o) / 2, (i + n) / 2, s6], [(i + n) / 2, (s6 + o) / 2, i, s6]];
  for (let l = 0; l < 4; l++) {
    let c = t6[l];
    if (c) {
      let [d, f, h, b] = u6[l];
      r6(c, d, f, h, b) || n2(e6, r6, c, d, f, h, b);
    }
  }
  return false;
}
var _F = 1e3;
var Pz = 0.1;
var kz = 5;
var _z = 1.5;
var vi;
var Af;
var e1;
var LF;
var zn;
var _l2;
var Qy = class {
  constructor(r6, t6) {
    v(this, e1);
    v(this, vi, {});
    v(this, Af, /* @__PURE__ */ new Map());
    t(this, "getMaxSearchRadiusForFloorId", (r8, t10) => {
      let n = u(this, Af).get(u(this, zn).mapName)?.get(t10);
      if (n) return n;
      let o = this.getNodeTreeByTypeAndFloorId(r8, u(this, zn).mapName, t10);
      if (typeof o.extent == "function") if (o.extent()) {
        let [[i, s6], [u6, l]] = o.extent(), c = u6 - i, d = l - s6;
        n = Math.max(c, d);
      } else n = _F;
      else n = _F;
      return u(this, Af).set(u(this, zn).mapName, /* @__PURE__ */ new Map([[t10, n]])), n;
    });
    v(this, zn);
    v(this, _l2);
    w(this, zn, r6), w(this, _l2, t6);
  }
  searchWithIncludedIds(r6, t6, n, o, i, s6, u6 = false, l = 1 / 0) {
    let c = this.getNodeTreeByTypeAndFloorId(t6, n, o), d = /* @__PURE__ */ new Set(), f = [], h = kz, b = Math.max(s6, this.getMaxSearchRadiusForFloorId(t6, o));
    for (; f.length < l && h <= b; ) {
      let I = x(this, e1, LF).call(this, r6, c, i, h, s6, d);
      I.sort((E, v6) => E.distance - v6.distance);
      for (let E of I) {
        if (f.length >= l) break;
        u6 ? u(this, zn).directions.navigator.hasLineOfSight(r6, E.node.geometry.coordinates, o, Pz) && f.push(E) : f.push(E);
      }
      h = h * _z;
    }
    return f;
  }
  getNodeTreeByTypeAndFloorId(r6, t6, n) {
    if (u(this, vi)[r6] || (u(this, vi)[r6] = {}), u(this, vi)[r6][t6]?.[n]) return u(this, vi)[r6][t6][n];
    u(this, vi)[r6][t6] || (u(this, vi)[r6][t6] = {}), u(this, vi)[r6][t6][n] = Mf();
    let o = u(this, vi)[r6][t6][n];
    o.x((s6) => u(this, _l2).call(this, s6.geometry.coordinates).x), o.y((s6) => u(this, _l2).call(this, s6.geometry.coordinates).y);
    let i = [];
    switch (r6) {
      case "space":
        i = u(this, zn).mvfSpacesByFloorId[n].flatMap((u6) => u6.properties.destinationNodes).map((u6) => {
          let l = u(this, zn).mvfNodesById[u6];
          return l ? { ...l, properties: { id: l.properties.id, parentId: l.properties.space[0] } } : null;
        });
        break;
      case "node":
        i = u(this, zn).mvfNodesByFloorId[n]?.filter((u6) => u6.properties.neighbors.length > 0) || [];
        break;
      case "point-of-interest":
        i = u(this, zn).mvfPoisByFloorId[n] || [];
        break;
      case "door":
        i = u(this, zn).mvfEntrancesByFloorId[n] || [];
        break;
      case "annotation":
        i = u(this, zn).mvfAnnotationsByFloorId[n] || [];
        break;
    }
    return i?.length > 0 && o.addAll(i), o;
  }
};
vi = /* @__PURE__ */ new WeakMap(), Af = /* @__PURE__ */ new WeakMap(), e1 = /* @__PURE__ */ new WeakSet(), LF = function(r6, t6, n, o, i, s6) {
  let { x: u6, y: l } = u(this, _l2).call(this, r6), c = u6 - o, d = u6 + o, f = l - o, h = l + o, b = [];
  return n2(t6, (I, E, v6, x6, D) => {
    let w6 = E >= d || v6 >= h || x6 < c || D < f;
    if ("data" in I) {
      let S = I.data, F = S.properties.parentId || S.properties.id;
      if (n.includes(F) && !s6.has(F)) {
        s6.add(F);
        let P = A5(r6, S.geometry.coordinates);
        P <= i && b.push({ node: S, distance: P });
      }
    }
    return w6;
  }), b;
}, zn = /* @__PURE__ */ new WeakMap(), _l2 = /* @__PURE__ */ new WeakMap();
var hd = 50;
var RF = 111319.9;
var o2 = 1;
var i2 = false;
var NF = zod_default.object({ limit: zod_default.enum(["same-floor", "same-elevation"]).optional(), mode: zod_default.enum(["travel-distance", "absolute-distance"]).optional(), lineOfSight: zod_default.boolean().optional().or(zod_default.literal("auto")), maxDistance: zod_default.number().optional(), maxResults: zod_default.number().optional() });
var $F = { lineOfSight: i2, mode: "travel-distance", maxDistance: hd, limit: "same-floor", maxResults: o2 };
var lr2;
var Bf;
var t1;
var Pf;
var a2;
var gd;
var r1;
var n1;
var Of = class {
  constructor(r6) {
    v(this, Pf);
    v(this, lr2);
    v(this, Bf);
    v(this, t1, ([r8, t6]) => {
      let [n, o] = [u(this, lr2).mapCenter.longitude, u(this, lr2).mapCenter.latitude], i = RF, s6 = RF * Math.cos(t6 * Math.PI / 180), u6 = (r8 - n) * s6, l = (t6 - o) * i;
      return { x: u6, y: l };
    });
    t(this, "__LEGACY_NEAREST_SYNC", (r8, t6, n) => {
      let o = { ...$F, ...n };
      try {
        NF.parse(o);
      } catch (d) {
        Pt.error(d);
        return;
      }
      let i = zp(r8);
      if (!i) return;
      let s6 = x(this, Pf, a2).call(this, i, o), u6 = [], l = {}, c = [];
      for (let d of t6) {
        let f = md(d, u(this, lr2), u(this, lr2).enterpriseMode);
        if (f) for (let h of f) l[h] || (l[h] = []), l[h].push(d), c.push(h);
      }
      return n?.mode === "absolute-distance" ? u6 = u(this, gd).call(this, i, s6, t6, o) : u6 = u(this, n1).call(this, r8, s6, c, l, o), u6.sort((d, f) => d.distance - f.distance);
    });
    v(this, gd, (r8, t6, n, o) => {
      let i = [], s6 = new Set(n.map((u6) => u6.__type));
      for (let u6 of t6) for (let l of s6) {
        let c = u(this, Bf).searchWithIncludedIds([r8.longitude, r8.latitude], l, u(this, lr2).mapName, u6, n.filter((d) => d.__type === l).map((d) => d.id), o?.maxDistance ?? hd, o?.lineOfSight === "auto" ? i2 : o?.lineOfSight, o?.maxResults ?? 1);
        if (c) for (let d of c) i.push({ distance: d.distance, feature: u(this, lr2).getById(l, d.node.properties.parentId) || u(this, lr2).getById(l, d.node.properties.id) });
      }
      return i;
    });
    v(this, r1, async (r8, t6, n, o, i) => {
      let s6 = [];
      for (let u6 of t6) {
        let l, c = 0;
        if (!_o.is(r8)) {
          let d = u(this, gd).call(this, r8.anchorTarget, [u6], u(this, lr2).getByType("node").filter((f) => f.floor.id === u6), { limit: "same-floor", lineOfSight: i?.lineOfSight ?? true, mode: "absolute-distance", maxDistance: i?.maxDistance ?? hd, maxResults: 1 });
          d.length > 0 && (l = d[0].feature, c = d[0].distance);
        }
        if (l) {
          let d = /* @__PURE__ */ new Set(), f = u(this, lr2).directions.navigator.findNearestNodesOnGraph(l.id, (i?.maxDistance ?? hd) - c, u6, n, false, i?.maxResults ?? o2);
          for (let h of f) for (let b of o[h.feature.properties.id]) d.has(b.id) || (s6.push({ distance: h.distance + c, feature: b }), d.add(b.id));
        }
      }
      return s6;
    });
    v(this, n1, (r8, t6, n, o, i) => {
      let s6 = [];
      for (let u6 of t6) {
        let l;
        if (_o.is(r8) || (l = this.__LEGACY_NEAREST_SYNC(r8, u(this, lr2).getByType("node"), { lineOfSight: i?.lineOfSight ?? true, mode: "absolute-distance", maxDistance: i?.maxDistance ?? hd, maxResults: 1 })?.[0].feature), l) {
          let c = u(this, lr2).directions.navigator.findNearestNodesOnGraph(l.id, i?.maxDistance ?? hd, u6, n, i?.lineOfSight === "auto" ? i2 : i?.lineOfSight, i?.maxResults ?? o2);
          for (let d of c) for (let f of o[d.feature.properties.id]) s6.push({ distance: d.distance, feature: f });
        }
      }
      return s6;
    });
    w(this, lr2, r6), w(this, Bf, new Qy(u(this, lr2), u(this, t1)));
  }
  async nearest(r6, t6, n) {
    let o = { ...$F, ...n };
    try {
      NF.parse(o);
    } catch (f) {
      Pt.error(f);
      return;
    }
    let i = zp(r6);
    if (!i) return;
    let s6 = x(this, Pf, a2).call(this, i, o), u6 = [], l = {}, c = [], d = [];
    if (n?.mode === "absolute-distance") u6 = u(this, gd).call(this, i, s6, t6, o);
    else {
      for (let f of t6) d.push(gu(f, u(this, lr2), u(this, lr2).enterpriseMode).then((h) => {
        if (h) for (let b of h) l[b] || (l[b] = []), l[b].push(f), c.push(b);
      }));
      await Promise.all(d), u6 = await u(this, r1).call(this, r6, s6, c, l, o);
    }
    return u6.sort((f, h) => f.distance - h.distance);
  }
};
lr2 = /* @__PURE__ */ new WeakMap(), Bf = /* @__PURE__ */ new WeakMap(), t1 = /* @__PURE__ */ new WeakMap(), Pf = /* @__PURE__ */ new WeakSet(), a2 = function(r6, t6) {
  let n = r6.floorId ? [r6.floorId] : [];
  if (r6.floorId == null) for (let o of u(this, lr2).getByType("floor-stack")) {
    let i = o.defaultFloor;
    i && n.push(i.id);
  }
  else if (t6?.limit === "same-elevation") {
    let o = u(this, lr2).floorsById[r6.floorId];
    if (o) {
      let i = o?.elevation;
      i && (n = u(this, lr2).getByType("floor-stack").map((s6) => s6.floors.find((u6) => u6.elevation === i)?.id).filter(Boolean));
    }
  }
  return n;
}, gd = /* @__PURE__ */ new WeakMap(), r1 = /* @__PURE__ */ new WeakMap(), n1 = /* @__PURE__ */ new WeakMap();
$i();
$i();
var kf;
var o1 = class {
  constructor(r6) {
    v(this, kf);
    w(this, kf, r6 || []);
  }
  get raw() {
    return u(this, kf);
  }
};
kf = /* @__PURE__ */ new WeakMap();
var qr;
var le;
var Mt;
var yd2 = class yd3 extends Er {
  constructor(t6, n) {
    super(n.mvfData.id);
    t(this, "__type", yd3.__type);
    t(this, "id", "loc_");
    t(this, "name", "");
    t(this, "externalId");
    t(this, "description");
    t(this, "logo");
    t(this, "phone");
    t(this, "social", []);
    t(this, "images", []);
    t(this, "links", []);
    t(this, "website");
    t(this, "icon");
    v(this, qr);
    v(this, le, {});
    v(this, Mt);
    w(this, qr, t6), w(this, Mt, n.mvfData);
    for (let o in n.mvfData) o === "links" ? this.links = n.mvfData.links.map((i) => new pl({ mvfData: i })) : o === "pictures" ? this.images = n.mvfData.pictures.map((i) => i.url ? new ml({ mvfData: { ...i, url: i.url ?? "" }, mapData: u(this, qr) }) : void 0).filter((i) => i != null) : o === "website" ? n.mvfData.website && (this.website = new pl({ mvfData: n.mvfData.website })) : o === "icon" ? n.mvfData.icon && (this.icon = new ml({ mvfData: { url: n.mvfData.icon }, mapData: u(this, qr) })) : Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this), o) || Object.defineProperty(this, o, { enumerable: true, get() {
      return u(this, Mt)[o];
    } });
  }
  static is(t6) {
    return t6.__type === yd3.__type;
  }
  get spaces() {
    if (u(this, le).spaces) return u(this, le).spaces;
    if (u(this, Mt).spaces == null) return u(this, le).spaces = [], u(this, le).spaces;
    u(this, le).spaces = [];
    for (let t6 = 0; t6 < u(this, Mt).spaces.length; t6++) {
      let n = u(this, qr).getById("space", u(this, Mt).spaces[t6].id);
      n && u(this, le).spaces.push(n);
    }
    return u(this, le).spaces;
  }
  get points() {
    if (u(this, le).points) return u(this, le).points;
    if (u(this, Mt).spaces == null) return u(this, le).points = [], u(this, le).points;
    u(this, le).points = [];
    for (let t6 = 0; t6 < u(this, Mt).spaces.length; t6++) {
      let n = u(this, qr).getById("point-of-interest", u(this, Mt).spaces[t6].id);
      n && u(this, le).points.push(n);
    }
    return u(this, le).points;
  }
  get doors() {
    if (u(this, le).doors) return u(this, le).doors;
    if (u(this, Mt).entrances == null) return u(this, le).doors = [], u(this, le).doors;
    u(this, le).doors = [];
    for (let t6 = 0; t6 < u(this, Mt).entrances.length; t6++) {
      let n = u(this, qr).getById("door", u(this, Mt).entrances[t6].id);
      n && u(this, le).doors.push(n);
    }
    return u(this, le).doors;
  }
  get connections() {
    if (u(this, le).connections) return u(this, le).connections;
    if (u(this, Mt).connections == null) return u(this, le).connections = [], u(this, le).connections;
    let t6 = /* @__PURE__ */ new Set();
    for (let n = 0; n < u(this, Mt).connections.length; n++) {
      let o = u(this, Mt).connections[n], i = u(this, qr).mvfConnectionsById[o], u6 = (i == null ? [] : i.nodes).map((l) => u(this, qr).getById("node", l)).filter(Boolean);
      for (let l of u6) {
        if (l == null) continue;
        let c = pa2([l.coordinate.longitude, l.coordinate.latitude]), f = (u(this, qr).connectionSpaceIdsByLatLon[c] ?? []).map((h) => u(this, qr).connectionsById[h]).filter((h) => h != null);
        for (let h of f) t6.add(h);
      }
    }
    return u(this, le).connections = Array.from(t6), u(this, le).connections;
  }
  get annotations() {
    if (u(this, le).annotations) return u(this, le).annotations;
    if (u(this, Mt).annotations == null) return u(this, le).annotations = [], u(this, le).annotations;
    u(this, le).annotations = [];
    for (let t6 = 0; t6 < u(this, Mt).annotations.length; t6++) {
      let n = u(this, qr).getById("annotation", u(this, Mt).annotations[t6].id);
      n && u(this, le).annotations.push(n);
    }
    return u(this, le).annotations;
  }
  get categories() {
    return u(this, le).categories ? u(this, le).categories : u(this, Mt).categories == null ? (u(this, le).categories = [], u(this, le).categories) : (u(this, le).categories = u(this, Mt).categories.map((t6) => u(this, qr).getById("location-category", t6)).filter((t6) => t6 != null), u(this, le).categories);
  }
  get mapObjects() {
    return u(this, le).mapObjects ? u(this, le).mapObjects : u(this, Mt).obstructions == null ? (u(this, le).mapObjects = [], u(this, le).mapObjects) : (u(this, le).mapObjects = u(this, Mt).obstructions.map((t6) => u(this, qr).getById("object", t6.id)).filter((t6) => t6 != null), u(this, le).mapObjects);
  }
  get areas() {
    return u(this, le).areas ? u(this, le).areas : u(this, Mt).areas == null ? (u(this, le).areas = [], u(this, le).areas) : (u(this, le).areas = u(this, Mt).areas.map((t6) => u(this, qr).getById("area", t6.id)).filter((t6) => t6 != null), u(this, le).areas);
  }
  get focusTarget() {
    if (u(this, le).focusTarget) return u(this, le).focusTarget;
    let t6 = [];
    for (let n of this.spaces) t6.push(n);
    for (let n of this.connections) t6.push(...n.coordinates);
    for (let n of this.doors) t6.push(n.focusTarget);
    for (let n of this.mapObjects) t6.push(n.focusTarget);
    for (let n of this.annotations) t6.push(n.focusTarget);
    for (let n of this.points) t6.push(n.focusTarget);
    for (let n of this.areas) t6.push(n.focusTarget);
    return u(this, le).focusTarget = t6, t6;
  }
  get openingHours() {
    return u(this, le).openingHours ? u(this, le).openingHours : (u(this, le).openingHours = new o1(u(this, Mt).openingHoursSpecification ?? []), u(this, le).openingHours);
  }
  get navigationTarget() {
    if (u(this, le).navigationTarget) return u(this, le).navigationTarget;
    let t6 = [];
    for (let n of this.spaces) t6.push(n);
    for (let n of this.connections) t6.push(...n.coordinates);
    for (let n of this.doors) t6.push(n.focusTarget);
    for (let n of this.mapObjects) t6.push(n.focusTarget);
    for (let n of this.annotations) t6.push(n.focusTarget);
    for (let n of this.points) t6.push(n.focusTarget);
    return u(this, le).navigationTarget = t6, t6;
  }
  toJSON() {
    return { __type: yd3.__type, id: this.id, name: this.name };
  }
};
qr = /* @__PURE__ */ new WeakMap(), le = /* @__PURE__ */ new WeakMap(), Mt = /* @__PURE__ */ new WeakMap(), t(yd2, "__type", "location-profile");
var s2 = yd2;
var Ml = s2;
$i();
var yu;
var Vn;
var Rl;
var bd = class bd2 extends Er {
  constructor(t6, n) {
    super(n.mvfData.id);
    t(this, "__type", bd2.__type);
    t(this, "id", "cat_");
    t(this, "name", "");
    t(this, "icon", "");
    v(this, yu);
    v(this, Vn, {});
    v(this, Rl);
    w(this, yu, t6), w(this, Rl, n.mvfData);
    for (let o in n.mvfData) Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this), o) || Object.defineProperty(this, o, { enumerable: true, get() {
      return u(this, Rl)[o];
    } });
  }
  static is(t6) {
    return t6.__type === bd2.__type;
  }
  get parent() {
    return u(this, Vn).parent ? u(this, Vn).parent : (u(this, Vn).parent = u(this, Rl).parent ? u(this, yu).getById("location-category", u(this, Rl).parent) : void 0, u(this, Vn).parent);
  }
  get children() {
    return u(this, Vn).children ? u(this, Vn).children : (u(this, Vn).children = u(this, yu).locationCategoriesByParentId[this.id] || [], u(this, Vn).children);
  }
  get locationProfiles() {
    if (u(this, Vn).locationProfiles) return u(this, Vn).locationProfiles;
    let t6 = [];
    for (let n of u(this, yu).locationProfilesByCategoryId[this.id] || []) {
      let o = u(this, yu).getById("location-profile", n.id);
      o && t6.push(o);
    }
    return u(this, Vn).locationProfiles = t6, t6;
  }
  toJSON() {
    return { __type: bd2.__type, id: this.id, name: this.name };
  }
};
yu = /* @__PURE__ */ new WeakMap(), Vn = /* @__PURE__ */ new WeakMap(), Rl = /* @__PURE__ */ new WeakMap(), t(bd, "__type", "location-category");
var u2 = bd;
var jy = u2;
var ve2;
var i1;
var UF;
var vd;
var xd;
var Nl = class extends Ka {
  constructor(t6, n) {
    super();
    v(this, i1);
    t(this, "Analytics");
    v(this, ve2, {});
    t(this, "Query");
    t(this, "mvf");
    t(this, "outdoorViewToken");
    t(this, "objectEntranceNodeIdsByObstructionId");
    t(this, "obstructionIdByEntranceId");
    t(this, "venue");
    t(this, "tokenManager");
    t(this, "directions");
    t(this, "enterpriseMode", false);
    t(this, "nodesById");
    t(this, "spacesById");
    t(this, "floorsById");
    t(this, "floorStacksById");
    t(this, "facadesById");
    t(this, "facadesBySpaceId");
    t(this, "connectionsById");
    t(this, "objectsById");
    t(this, "doorsById");
    t(this, "pointsOfInterestById");
    t(this, "annotationsById");
    t(this, "areasById");
    t(this, "locationProfilesById");
    t(this, "locationCategoriesById");
    t(this, "locationProfilesByExternalId");
    t(this, "locationProfilesByCategoryId");
    t(this, "locationCategoriesByParentId");
    t(this, "doorsByNodeId");
    t(this, "mvfAnnotationsById");
    t(this, "mvfConnectionsById");
    t(this, "mvfConnectionsByNodeId");
    t(this, "mvfConnectionIdsByLatLon");
    t(this, "mvfEntrancesById");
    t(this, "mvfNodesById");
    t(this, "mvfObstructionById");
    t(this, "mvfSpacesById");
    t(this, "mvfFloorsById");
    t(this, "mvfFloorStacksById");
    t(this, "mvfAreasById");
    t(this, "spacesByExternalId");
    t(this, "nodesByExternalId");
    t(this, "objectsByExternalId");
    t(this, "poisByExternalId");
    t(this, "floorsByExternalId");
    t(this, "floorStacksByExternalId");
    t(this, "doorsByExternalId");
    t(this, "areasByExternalId");
    t(this, "connectionSpaceIdsByLatLon", {});
    t(this, "locationProfilesByAttachedFeatureId", {});
    t(this, "entranceNodeIdsBySpaceId", {});
    t(this, "locationsById", {});
    t(this, "categoriesById", {});
    t(this, "mvfLocationsByGeometryId", {});
    t(this, "locationIdsByNodeId", {});
    t(this, "spaceIdsByNodeId", {});
    t(this, "objectIdsByNodeId", {});
    t(this, "connectionsByExternalId", {});
    t(this, "locationsByExternalId", {});
    t(this, "categoriesByExternalId", {});
    t(this, "destinationNodesIdsBySpaceId", {});
    t(this, "mvfNodesByFloorId");
    t(this, "mvfSpacesByFloorId");
    t(this, "mvfPoisByFloorId");
    t(this, "mvfEntrancesByFloorId");
    t(this, "mvfAnnotationsByFloorId");
    t(this, "localePacksUrls");
    t(this, "currentLanguage");
    t(this, "languagePacks", {});
    t(this, "tilesets", {});
    t(this, "navigationFlags");
    t(this, "binaryBundle");
    t(this, "envControl");
    t(this, "getMapDataOptions");
    v(this, vd, new ge2(0, 0, "initializing"));
    t(this, "propTranslationCache", /* @__PURE__ */ new Map());
    v(this, xd);
    t(this, "__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC", (t10, n6, o6) => this.__LEGACY_GET_DIRECTIONS_SYNC(t10, n6, { ...o6, multiDestination: true }));
    t(this, "__LEGACY_GET_DIRECTIONS_SYNC", (t10, n6, o6) => {
      let { accessible: i6 = false, multiDestination: s6 = false } = o6 || {}, u6 = jF(this.enterpriseMode, o6), l = o6?.zones || [], c = { accessible: i6, zones: l, smoothing: u6, excludedConnections: o6?.excludedConnections || [], connectionIdWeightMap: o6?.connectionIdWeightMap || {} };
      if (s6 && Array.isArray(n6)) {
        let d = Array.isArray(t10) ? t10 : [t10], f = [];
        for (let h of n6) {
          let b = Array.isArray(h) ? h : [h], I = this.directions.getDirectionsSync(d, b, c, this);
          if (!I) {
            Pt.error("getDirections failed due to missing directions for one of the segments");
            return;
          }
          d = b, f.push(I);
        }
        return f;
      } else {
        let d = Array.isArray(t10) ? t10 : [t10], f = Array.isArray(n6) ? n6 : [n6];
        if (Array.isArray(f[0])) {
          Pt.error("getDirections does not support multi-destination without multisegment option");
          return;
        }
        d[0].id && f[0].id && this.Analytics.sendGetDirectionsEvent(d[0].id, f[0].id, i6);
        try {
          return this.directions.getDirectionsSync(d, f, c, this);
        } catch (h) {
          Pt.error("Unable to get directions", h);
          return;
        }
      }
    });
    t(this, "getDirections", async (t10, n6, o6) => {
      let { accessible: i6 = false } = o6 || {}, s6 = jF(this.enterpriseMode, o6), u6 = o6?.zones || [], l = { accessible: i6, zones: u6, smoothing: s6, excludedConnections: o6?.excludedConnections || [], connectionIdWeightMap: o6?.connectionIdWeightMap || {} }, c = Array.isArray(t10) ? t10 : [t10], d = Array.isArray(n6) ? n6 : [n6];
      if (Array.isArray(d[0])) {
        Pt.error("getDirections does not support multi-destination without multisegment option");
        return;
      }
      c[0].id && d[0].id && this.Analytics.sendGetDirectionsEvent(c[0].id, d[0].id, i6);
      try {
        return this.directions.getDirections(c, d, l, this);
      } catch (f) {
        Pt.error("Unable to get directions", f);
        return;
      }
    });
    t(this, "getDirectionsMultiDestination", async (t10, n6, o6) => Promise.resolve(this.__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC(t10, n6, o6)));
    t(this, "transformImageRequest", async (t10) => {
      if (this.enterpriseMode || !this.getMapDataOptions) return { url: t10 };
      if (!Aw(t10)) return { url: t10 };
      if (Ow(t10)) return { url: t10 };
      let n6 = Ly(t10);
      if (!n6) return { url: t10 };
      try {
        let i6 = (await this.tokenManager?.getSasTokensAsync())?.[n6.mapId];
        if (i6 == null) throw new Error("SAS token not found");
        let [s6] = t10.split("?");
        return { url: `${s6}?${i6.token}` };
      } catch (o6) {
        return Pt.error("Failed to append SAS token to image request. Requests for private images may fail.", o6), { url: t10 };
      }
    });
    let o = n?.env ?? ou();
    if (this.envControl = o, this.binaryBundle = n?.binaryBundle, this.Analytics = new Bc(), this.localePacksUrls = n?.localePacksUrls ?? {}, this.mvf = t6, this.outdoorViewToken = n?.outdoorViewToken, this.getMapDataOptions = n?.getMapDataOptions, t6["tileset.json"]?.default != null && (this.tilesets[t6["tileset.json"].default.key] = t6["tileset.json"].default, o.updateTileServerBaseUrl(t6["tileset.json"].default.url), t6["tileset.json"].others != null)) for (let s6 of t6["tileset.json"].others) this.tilesets[s6.key] = s6;
    this.navigationFlags = t6["navigationFlags.json"] ?? {}, this.enterpriseMode = n?.enterprise ?? false, this.tokenManager = n?.tokenManager;
    let i = $w(t6, this);
    if (this.nodesById = i.nodesById, this.spacesById = i.spacesById, this.floorsById = i.floorsById, this.floorStacksById = i.floorStacksById, this.facadesById = i.facadesById, this.facadesBySpaceId = i.facadesBySpaceId, this.connectionsById = i.connectionsById, this.objectsById = i.objectsById, this.doorsById = i.doorsById, this.pointsOfInterestById = i.poisById, this.annotationsById = i.annotationsById, this.areasById = i.areasById, this.locationProfilesById = i.locationProfilesById, this.locationCategoriesById = i.locationCategoriesById, this.locationProfilesByCategoryId = i.locationProfilesByCategoryId, this.locationCategoriesByParentId = i.locationCategoriesByParentId, this.spacesByExternalId = i.spacesByExternalId, this.nodesByExternalId = i.nodesByExternalId, this.objectsByExternalId = i.objectsByExternalId, this.floorsByExternalId = i.floorsByExternalId, this.locationProfilesByExternalId = i.locationProfilesByExternalId, this.floorStacksByExternalId = i.floorStacksByExternalId, this.poisByExternalId = i.poisByExternalId, this.doorsByExternalId = i.doorsByExternalId, this.areasByExternalId = i.areasByExternalId, this.mvfAnnotationsById = i.mvfAnnotationsById, this.mvfConnectionsById = i.mvfConnectionsById, this.mvfConnectionsByNodeId = i.mvfConnectionsByNodeId, this.mvfConnectionIdsByLatLon = i.mvfConnectionIdsByLatLon, this.mvfEntrancesById = i.mvfEntrancesById, this.mvfNodesById = i.mvfNodesById, this.mvfObstructionById = i.mvfObstructionById, this.mvfSpacesById = i.mvfSpacesById, this.mvfFloorsById = i.mvfFloorsById, this.mvfFloorStacksById = i.mvfFloorStacksById, this.mvfNodesByFloorId = i.mvfNodesByFloorId, this.mvfSpacesByFloorId = i.mvfSpacesByFloorId, this.mvfPoisByFloorId = i.mvfPoisByFloorId, this.mvfEntrancesByFloorId = i.mvfEntrancesByFloorId, this.mvfAnnotationsByFloorId = i.mvfAnnotationsByFloorId, this.mvfAreasById = i.mvfAreasById, this.doorsByNodeId = i.doorsByNodeId, this.objectEntranceNodeIdsByObstructionId = i.objectEntranceNodeIdsByObstructionId, this.obstructionIdByEntranceId = i.obstructionIdByEntranceId, this.connectionSpaceIdsByLatLon = i.connectionIdsByLatLon, this.locationProfilesByAttachedFeatureId = i.locationProfilesByAttachedFeatureId, this.entranceNodeIdsBySpaceId = i.entranceNodeIdsBySpaceId, this.spaceIdsByNodeId = i.spaceIdsByNodeId, this.objectIdsByNodeId = i.objectIdsByNodeId, this.destinationNodesIdsBySpaceId = i.destinationNodesIdsBySpaceId, this.enterpriseMode || _f()) {
      let s6 = Nw(t6, this);
      if (this.locationsById = s6.locationsById, this.categoriesById = s6.categoriesById, this.mvfLocationsByGeometryId = s6.mvfLocationsByGeometryId, this.locationIdsByNodeId = s6.locationIdsByNodeId, this.connectionsByExternalId = s6.connectionsByExternalId, this.locationsByExternalId = s6.locationsByExternalId, this.categoriesByExternalId = s6.categoriesByExternalId, s6.venue.name != null) {
        this.venue = new Wx(this, { mvfData: s6.venue });
        let u6 = {};
        for (let l in s6.mvfLocationsById) u6[l] = s6.mvfLocationsById[l];
        for (let l in s6.locationInstancesById) u6[l] = s6.locationInstancesById[l];
        this.languagePacks[this.venue.defaultLanguage.code] = { type: "initial", optimized: { "enterprise-location": u6, "enterprise-category": s6.mvfCategoriesById, "floor-stack": i.mvfFloorStacksById, floor: i.mvfFloorsById } }, n?.languagePacks?.forEach(({ language: l, localePack: c }) => {
          this.languagePacks[l.code] = Cx(c);
        }), this.currentLanguage = this.venue.defaultLanguage;
      }
    }
    this.directions = new fd({ nodes: t6["node.geojson"], geojsonCollection: this.enterpriseMode && t6.enterprise ? t6.space : t6.obstruction, connections: t6["connection.json"], groupBy: "map", multiplicativeDistanceWeightScaling: !this.enterpriseMode, flagDeclarations: t6["navigationFlags.json"] }), this.Query = new Of(this);
  }
  getEnv() {
    let t6 = this;
    return { get baseUri() {
      return t6.envControl.getBaseUri();
    }, get baseAuthUri() {
      return t6.envControl.getBaseAuthUri();
    }, get analyticsBaseUri() {
      return t6.envControl.getAnalyticsBaseUri();
    }, get tileServerUri() {
      return t6.envControl.getTileServerUri();
    } };
  }
  get mapName() {
    return this.mvf["manifest.geojson"].features[0].properties.name;
  }
  get organizationId() {
    return this.mvf["manifest.geojson"].features[0].properties.org_id ?? "";
  }
  get mapCenter() {
    return u(this, vd).floorId === "initializing" && w(this, vd, new ge2(this.mvf["manifest.geojson"].features[0].geometry.coordinates[1], this.mvf["manifest.geojson"].features[0].geometry.coordinates[0])), u(this, vd);
  }
  get naturalBearing() {
    return this.mvf["manifest.geojson"].features[0].properties.naturalBearing ?? 0;
  }
  get spaces() {
    return u(this, ve2).spaces == null && (u(this, ve2).spaces = globalThis.Object.values(this.spacesById)), u(this, ve2).spaces;
  }
  get objects() {
    return u(this, ve2).objects == null && (u(this, ve2).objects = globalThis.Object.values(this.objectsById)), u(this, ve2).objects;
  }
  get connections() {
    return u(this, ve2).connections == null && (u(this, ve2).connections = globalThis.Object.values(this.connectionsById)), u(this, ve2).connections;
  }
  get floors() {
    return u(this, ve2).floors == null && (u(this, ve2).floors = globalThis.Object.values(this.floorsById)), u(this, ve2).floors;
  }
  get floorStacks() {
    return u(this, ve2).floorStacks == null && (u(this, ve2).floorStacks = globalThis.Object.values(this.floorStacksById)), u(this, ve2).floorStacks;
  }
  get facades() {
    return u(this, ve2).facades == null && (u(this, ve2).facades = globalThis.Object.values(this.facadesById)), u(this, ve2).facades;
  }
  get doors() {
    return u(this, ve2).doors == null && (u(this, ve2).doors = globalThis.Object.values(this.doorsById)), u(this, ve2).doors;
  }
  get pointsOfInterest() {
    return u(this, ve2).pointsOfInterest == null && (u(this, ve2).pointsOfInterest = globalThis.Object.values(this.pointsOfInterestById)), u(this, ve2).pointsOfInterest;
  }
  get annotations() {
    return u(this, ve2).annotations == null && (u(this, ve2).annotations = globalThis.Object.values(this.annotationsById)), u(this, ve2).annotations;
  }
  get areas() {
    return u(this, ve2).areas == null && (u(this, ve2).areas = globalThis.Object.values(this.areasById)), u(this, ve2).areas;
  }
  get nodes() {
    return u(this, ve2).nodes == null && (u(this, ve2).nodes = globalThis.Object.values(this.nodesById)), u(this, ve2).nodes;
  }
  get locations() {
    return u(this, ve2).locations == null && (u(this, ve2).locations = globalThis.Object.values(this.locationsById)), globalThis.Object.values(this.locationsById);
  }
  get categories() {
    return u(this, ve2).categories == null && (u(this, ve2).categories = globalThis.Object.values(this.categoriesById)), globalThis.Object.values(this.categoriesById);
  }
  get locationProfiles() {
    return u(this, ve2).locationProfiles == null && (u(this, ve2).locationProfiles = globalThis.Object.values(this.locationProfilesById)), u(this, ve2).locationProfiles;
  }
  get locationCategories() {
    return u(this, ve2).locationCategories == null && (u(this, ve2).locationCategories = globalThis.Object.values(this.locationCategoriesById)), u(this, ve2).locationCategories;
  }
  get mvfFloors() {
    return u(this, ve2).mvfFloors == null && (u(this, ve2).mvfFloors = globalThis.Object.values(this.mvfFloorsById)), u(this, ve2).mvfFloors;
  }
  get mvfFloorStacks() {
    return u(this, ve2).mvfFloorStacks == null && (u(this, ve2).mvfFloorStacks = globalThis.Object.values(this.mvfFloorStacksById)), u(this, ve2).mvfFloorStacks;
  }
  getByType(t6) {
    switch (t6) {
      case "location-profile":
        return this.locationProfiles;
      case "location-category":
        return this.locationCategories;
      case "area":
        return this.areas;
      case "node":
        return this.nodes;
      case "space":
        return this.spaces;
      case "door":
        return this.doors;
      case "floor":
        return this.floors;
      case "floor-stack":
        return this.floorStacks;
      case "connection":
        return this.connections;
      case "object":
        return this.objects;
      case "point-of-interest":
        return this.pointsOfInterest;
      case "annotation":
        return this.annotations;
      case "enterprise-location":
        return this.locations;
      case "enterprise-category":
        return this.categories;
      case "enterprise-venue":
        return this.venue;
      case "facade":
        return this.facades;
      default:
        return [];
    }
  }
  getById(t6, n) {
    let o = { "location-profile": this.locationProfilesById, "location-category": this.locationCategoriesById, space: this.spacesById, floor: this.floorsById, "floor-stack": this.floorStacksById, facade: this.facadesById, node: this.nodesById, door: this.doorsById, connection: this.connectionsById, "mvf-connection": (u6) => x(this, i1, UF).call(this, this.mvfConnectionsById[u6]), object: this.objectsById, "point-of-interest": this.pointsOfInterestById, annotation: this.annotationsById, area: this.areasById, "enterprise-location": this.locationsById, "enterprise-category": this.categoriesById }, i = (u6) => {
      let l = o[u6];
      if (l != null) return typeof l == "function" ? l(n) : l[n];
    }, s6 = () => {
      for (let u6 of Object.keys(o)) {
        let l = i(u6);
        if (l != null) return l;
      }
    };
    return t6 === "unknown" ? s6() : i(t6);
  }
  getByExternalId(t6, n) {
    switch (t6) {
      case "location-profile":
        return this.locationProfilesByExternalId[n] ?? [];
      case "location-category":
        return [];
      case "space":
        return this.spacesByExternalId[n] ?? [];
      case "floor":
        return this.floorsByExternalId[n] ?? [];
      case "floor-stack":
        return this.floorStacksByExternalId[n] ?? [];
      case "node":
        return this.nodesByExternalId[n] ?? [];
      case "door":
        return this.doorsByExternalId[n] ?? [];
      case "connection":
        return this.connectionsByExternalId[n] ?? [];
      case "object":
        return this.objectsByExternalId[n] ?? [];
      case "point-of-interest":
        return this.poisByExternalId[n] ?? [];
      case "area":
        return this.areasByExternalId[n] ?? [];
      case "enterprise-location":
        return this.locationsByExternalId[n] ?? [];
      case "enterprise-category":
        return this.categoriesByExternalId[n] ?? [];
      default:
        return [];
    }
  }
  getMapDataById(t6) {
    return this.spacesById[t6] ?? this.floorsById[t6] ?? this.floorStacksById[t6] ?? this.facadesById[t6] ?? this.nodesById[t6] ?? this.doorsById[t6] ?? this.connectionsById[t6] ?? this.objectsById[t6] ?? this.pointsOfInterestById[t6] ?? this.annotationsById[t6] ?? this.areasById[t6];
  }
  getMVFFeatureById(t6, n) {
    switch (t6) {
      case "space":
        return this.mvfSpacesById[n];
      case "node":
        return this.mvfNodesById[n];
      case "obstruction":
        return this.mvfObstructionById[n];
      case "floor":
        return this.mvfFloorsById[n];
      case "floor-stack":
        return this.mvfFloorStacksById[n];
      case "connection":
        return this.mvfConnectionsById[n];
      case "entrance":
        return this.mvfEntrancesById[n];
      case "annotation":
        return this.mvfAnnotationsById[n];
      case "area":
        return this.mvfAreasById[n];
      default:
        throw new Error(`Unknown MVF feature type: ${t6}`);
    }
  }
  getMVFFeatureByNodeId(t6, n) {
    switch (t6) {
      case "connection":
        return this.mvfConnectionsByNodeId[n];
      default:
        throw new Error(`Unsupported MVF feature type: ${t6}`);
    }
  }
  getMVFFeatureByType(t6) {
    switch (t6) {
      case "floor-stack":
        return this.mvfFloorStacks;
      case "floor":
        return this.mvfFloors;
      default:
        throw new Error(`Unsupported MVF feature type: ${t6}`);
    }
  }
  getPropTranslation(t6, n, o, i) {
    if (!this.currentLanguage) return i;
    let { code: s6 } = this.currentLanguage, u6 = this.languagePacks[s6]?.optimized?.[t6];
    if (u6) {
      let l = u6[o];
      if (l != null && l[n] !== void 0) {
        let c = l[n];
        if (c != null && typeof c == "object") {
          if (typeof i == "object" && typeof c == "object" && !Array.isArray(c)) {
            let d = H5(s6 + t6 + o + n.toString());
            if (this.propTranslationCache.has(d)) return this.propTranslationCache.get(d);
            let f = wf(i, c, ["id"]);
            return this.propTranslationCache.set(d, f), f;
          }
          return c;
        }
        return c;
      }
    }
    return i;
  }
  findPreferredLanguage(t6) {
    if (!this.venue) return;
    let n = l2(this.venue, t6);
    return t6?.languageCode != null && t6.languageCode.toLowerCase() !== n.code.toLowerCase() && Pt.warn(`Language code "${t6.languageCode}" could not be found in the venue. Using "${n.code}" instead.`), n;
  }
  async changeLanguage(t6) {
    let n = t6.toLowerCase();
    if (!n) {
      Pt.error("Language code must be defined.");
      return;
    }
    if (!this.currentLanguage || !this.venue) {
      Pt.error("Changing the language is not supported for this map.");
      return;
    }
    let o = this.currentLanguage.code, i = this.venue?.languages.find(({ code: u6 }) => u6.toLowerCase() === n.toLowerCase());
    if (!i) {
      Pt.warn(`Language code "${n}" could not be found in the venue.`);
      return;
    }
    if (o === i.code) return;
    let s6 = this.languagePacks[i.code];
    if (!s6) {
      let u6 = this.localePacksUrls[i.code];
      if (!u6) {
        Pt.error(`Locale pack URL not found for language code "${i.code}".`);
        return;
      }
      u(this, xd) && u(this, xd).abort();
      let l = new AbortController();
      w(this, xd, l);
      let c;
      try {
        c = await lw(u6, { signal: l.signal });
      } catch (d) {
        Pt.error(`Failed to download language pack for language code "${i.code}".`, d);
        return;
      }
      if (!c || l.signal.aborted) return;
      s6 = Cx(c), this.languagePacks[i.code] = s6;
    }
    this.Analytics.sendChangeLanguageEvent({ fromLanguage: this.currentLanguage.code }), this.currentLanguage = i, this.publish("language-change", this.currentLanguage);
  }
  getDistance(t6, n) {
    let o = zp(t6), i = zp(n);
    return A5([o.longitude, o.latitude], [i.longitude, i.latitude]);
  }
  async toJSONBundle({ downloadLanguagePacks: t6 = true } = {}) {
    let n = [];
    if (t6 && this.enterpriseMode) {
      let o = new AbortController();
      for (let i of this.venue?.languages || []) try {
        if (this.localePacksUrls[i.code]) {
          let s6 = await tx(this.localePacksUrls[i.code], { signal: o.signal }), u6 = await Tp(s6);
          u6 && n.push({ language: { code: i.code, name: i.name }, localePack: u6 });
        }
      } catch (s6) {
        Pt.warn("failed downloading language pack", s6);
      }
    }
    return { type: "json", options: { enterprise: this.enterpriseMode }, languagePacks: n, main: this.mvf };
  }
  async toBinaryBundle({ downloadLanguagePacks: t6 = true } = {}) {
    if (!this.binaryBundle) {
      Pt.error("binary bundle not found");
      return;
    }
    let n = [];
    if (t6 && this.enterpriseMode) {
      let o = new AbortController();
      for (let i of this.venue?.languages || []) try {
        if (this.localePacksUrls[i.code]) {
          let s6 = await tx(this.localePacksUrls[i.code], { signal: o.signal });
          s6 && n.push({ language: { code: i.code, name: i.name }, localePack: s6 });
        }
      } catch (s6) {
        Pt.warn("failed downloading language pack", s6);
      }
    }
    return { type: "binary", options: { enterprise: this.enterpriseMode }, languagePacks: n, main: this.binaryBundle };
  }
  destroy() {
    for (let t6 of globalThis.Object.keys(u(this, ve2))) u(this, ve2)[t6] = null;
    this.propTranslationCache.clear();
  }
};
ve2 = /* @__PURE__ */ new WeakMap(), i1 = /* @__PURE__ */ new WeakSet(), UF = function(t6) {
  let n = t6?.nodes?.[0], o = this.getById("node", n);
  if (o == null) return;
  let i = pa2([o.coordinate.longitude, o.coordinate.latitude]);
  return this.connectionSpaceIdsByLatLon[i]?.map((u6) => this.connectionsById[u6]).find((u6) => u6 != null);
}, vd = /* @__PURE__ */ new WeakMap(), xd = /* @__PURE__ */ new WeakMap();
var jF = (e6, r6) => {
  let t6 = !e6, n = r6?.smoothing, i = n != null ? typeof n == "object" ? n.enabled ?? t6 : n : t6, s6 = typeof n == "object" ? n.radius : void 0;
  return { enabled: i, radius: s6 ?? 0.75 };
};
$i();
$i();
$i();
globalThis.requestIdleCallback = globalThis.requestIdleCallback || function(e6) {
  var r6 = performance.now();
  return setTimeout(function() {
    e6({ didTimeout: false, timeRemaining: function() {
      return Math.max(0, 50 - (performance.now() - r6));
    } });
  }, 0);
};
globalThis.cancelIdleCallback = globalThis.cancelIdleCallback || function(e6) {
  clearTimeout(e6);
};
$i();
$i();
(function() {
  typeof globalThis != "object" && (Object.defineProperty(Object.prototype, "__magic__", { get: function() {
    return this;
  }, configurable: true }), __magic__.globalThis = __magic__, delete Object.prototype.__magic__);
})();
var GF = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAkGBwgHBgkICAgKCgkLDhcPDg0NDhwUFREXIh4jIyEeICAlKjUtJScyKCAgLj8vMjc5PDw8JC1CRkE6RjU7PDn/2wBDAQoKCg4MDhsPDxs5JiAmOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTn/wgARCAIABAADAREAAhEBAxEB/8QAGwABAAMBAQEBAAAAAAAAAAAAAAECAwQFBgf/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAP3EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAIAAAJAFAAAAAAAAAAAAAAAAAAAAAAAAABAgAAEgCgAAAAAAAAAAAAAAAAAAAABERLSM1zM4zXMzjMoUIqCCSSS8XNC9mpoaVomharWTQAAAAAAAAAAAAAAAAEREtIoZrnGZkucUKFStQQSTFixdNDStF0TWrmiWqbJoAAAAAAAAAAAAAIgiWkZy4HNLzHLXKcxzpzmFYmRkUKFSCCSSxcuampsbR0HSdK9R1R1HTZvWll0mlAAAAAAAAAAAIiKLnLjHNLynLXKcycxzmNYmJmUKFSCAWLFy5qamxvHQvSdJ0nVHUdFm1aparWKAjNWSKAAAAARBEtYzlyXnjmOSuM4U4q4jjOM5a5k5zAyMjOqFCCCCSSS5c0jU1NzoOk6pew7TtjuO1e0646jezWr2WSaUAAAAAECIqtZco55eY464zhTirhOI5Dks5jAwMTIzqhUqQASWLFzSNTY3Og6V646zsO2O47V7DrjqNzWy9nlZ1c0LlrLEk0EQQVipRczIyMU5q5F4U8+vOPOrgThOOuU5jAxMjMzKpUggigJiSSxY0XQ1Njc6TqjtO49CX0D0T0Y7l7E6JdzU1NEvViSalBAWIqVKLSMjIxOauM4U86vPPOrz04TjrkOYwMTIzKJQqQQCKmBJJYutzQ1Njc6TrOyO475fRPRPQjuXsToXWPn6kkkEkhCkEAgggqVMjlrzzzDy7PMPPrhOQ5jBMqoVIIIAAIAJAAJJJLFzWN16TsO49CPTPUl9Q9A6o1LFiSSSSQpCwQQCCCpVMjlrzzyzy7PMPPrhOM5kwM6zKlQQAAQASAASCxY0NI3XpOw7j0I9M9SX0z0DqjU+UqpQqVIBFgEyixJYuWLFDkrzE8o8yvOONOasipBAAAAAAAAAAABJJY2OiO1fQPUj1T0pewuVKlCCqQsBIUSSSSWLlyTM5K808pPLrzziTnrEqQQAAAAAAAAAAASSWNjojtX0D1I9VfSOuND4uzMzqhQqVIALEli5c1jUuQc1vnp5pwJzVmQQAAAAAAAAAAAAAASSaHTHevpHoHTFjMyM6zKlSpABJJcsaGkamhU5q88804E5qzIIAAAAAAAAAAAAAAJJNDpjvX0j0Dqix8dVDMolSpAqCYElixc0XU0IMjlTlrIqAAAAAAAAAAAAAAAAAWNTqjqXYGZkZpUoQQRSFIsSXLroaGhBkcqctZFQAAAAAAAAAAAAAAAACxqdUdS7EngWQCAAQASACSSSwKlSCAAAAAAAAAAAAAAAAAACSSxYFSCCAACCQACSSSwKlSCAAAAAAAAAAAAAAAAAACSSxYGIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAJAJAJBAAIAIABAAAAAAAAAAAAAAAAAAAABIAJAJAJBAAIAIABAAAAJABAAAAAAAAAJBILEli5Y0LlzQ0Lly5csWLAkgFSChUoUMyhmUMyhQqVKkEEAEAAAAAAAAAkEgsSWLljQuXNDQuXLlyxYsCSAVIKFShQzKGZQzKFCpUqQe+ZmZkUKFCpUEEAAkksWLFzQ0NTU2NzY3Og3NzoNzc2NjU1NS5csSAQVKmZmZGRiYmBgYHOYGBgYGBiZGRkUMypUqQCAASSWLFi5oaGpqbG5sbnQbm50G5ubGxqampcuWJAIIKGZmZGRiYmBgYHOYGBgYGR+jmBzmBzmJiZGZQoQQSSWLmhqbGxudB0nSdJ1HSdR1HSdJ0G5qamhcsWJJJBIIIBUqVKFDIyMDA5jmOU5TlOY5TmOc5znMTEyMyhQggFixc0NTY2NzoOk6TpOo6TqOo6TpOg3NTU0LlixJJIJBAIKkFChQyMjAwOY5jlOU5jnP00yMTnOc5zAwMjMoVIJJLmhqbmx0HQdBubmxqXLkkgAAAAAAAAAAAAAEEFTMzMTEwOc5znMDAyMyhUgkkuaGpsbnQdB0G5ubGpcuSSAAAAAAAAAAAAAAQQVKGZ1gAEEEEFSCACSSxJJJIAAAAAAAAAAAAAAAAAAAAAAABBBBBUggAkkksSSSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCCpBUqQVIKggAkFiSSxYksSSSSAAAAAAAAAAAAAAAAAAQCCpBUqQVIKggAkFiSSxYksSWBIAAKFiQAAAAAAAAACCpUoUMzIyMzMzMyhQoVKkEEAgkEkklixYuXNDQ0NTQ1NC5cuWJAAAAAAAAAAIKlShQzMjIzMzMzKFChUqQQQCCQSSSWLFyxoXNDQ1NDU0LljUkkAAAAAAAAAAggggEEAgAAAAAAAAAAAAAEkgkkkkkAAAAAAAAAAgggggEAgAAAAAEgEAAAAAAEkgkkuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADyyCCCCCCCCAQASCSQWJJJJLEkkkkkgkkEgkAEgAAEAAgEAggEEEEEEEFSCCCCCCAQASCSQWJJJJLEkkkkkgkkEgEgEgAAEAAgEAggEEEEEH5AQQQQVBBAIAAJBIJJJLEkkkkliSSSSSQSSCQSAAAQAQQCCCCCCCCCpBBBBBUEEEAgAAkEgkkksSSSSSWJJJJJJBJIJBIAABABBAIIIIIIIIKg/LCAQCACAAAACQCQSCQSASSASCQCQAAAAAAQCAQAQCAQAQQCACAAAACQCQSCQSASSASCQCQAAAAAAQCAQAQCAQfPgAAAAAAAAAAAAAAkAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAgAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/xAApEAAABQUBAQACAwACAwAAAAABAgQFFQMGERQWEhNAUAAgMGCAkKCw/9oACAEBAAECAP8AwTZznOf3mc5/YZE41xVivFyM6i7C8C8C8zMzMzMyDyDyDyDwV4K7ldSuZV5VgVwqZ/SCca4qxXmcjOouwvAvEzMzMzMzMyDyDyDwV4K7ldSuRVwKgrgf88TDWMrO4VHOo61Hao7ndzvB3k7yZ5M8i8i8zMzMzMyDyDyDyV5K8keSPJHmm8U3em70nam603Mi8qotUDfk5GqZUdfUc6jrUdqjvUeDvB3kzyZ5M8i8i8zMzMzMzMg8g8leSvJHkjyR5pvFN4pu9N2pOtNzIvKqLWA39PX+/saplJlh1tRfVcKrlVdKrrVdqrvVdzu53Y7sZ2M6mdRdRdBdJSUk5SUB0B0B1K6kdSOxHam7Unek70nei7UXWi6UXKk40l9NaRWWuB8/75E41zKjraq+q41nOq6VXas7VXeq71Hc7ud2O7GdRdRdZQXSUlJSUlAdCugOpXUjqR2I7U3em70nek70nai60XSk5UnGkvItIrKoCsC0FwLgXAuBbube3ubm7uiuFcZcZaZYdZUWVl1dwruVdzrulZ0qulVzqOR3EzgZeZcZcK0Vm3t7W1tbW1tgrBYC0q0q4q8jgRxpuVJzoulB0oOlBzoOVBworqa0iwi0i0q4FwLQWAr2trZ2trb3RWiuFcZaZadbUW1l1ZwruVd0rulZ0qulVzqOR3E7gZeZeK4VorNzb29ra2tsFe2CwFpVxVxV5HAjjTcqTnRdKDpQdKDnQcqDhRXU1pFhVm/ISUnKSkrLSsrKyspJyUhvitOtrLq69Q4qHGu41nGqvqLjrDKhUDW+nv1nP+Oc+vYVArFUEVEWUl1FfQcU7imckzinX0VxFoLgXyMlJykrLS0tLS0rKSclI74rjraq6uvUuKhxruNdxqr6i46wysVA1vp79Zz/AI5z6A4VArFUEVkWUl1FfQcU7imcUzinX0VxFoLZKTlJWVlpaXl5eWlpWUB0BzBxkDr669SvUr666stqqz1xqes/j5AxahFFJXRWp1yZemX0F5HCQkpOUlZaWlpeXl5aWB2lQdAcwcZE7hWcFLgpXqF1ZbVVnUDU9Z/HyBi1CV6SuitTrky9MvoLyL5AXEXEXIXIXKSkpKSkpIHIHIHIrkVxK4yJnCsvrra6uqpPVE354GJVpKaCtOtoryuEiZxM5C5C5C5SUnJSclJSQOQORXIrkVxBxM4VV9dbXV1VJ6om/PAxKtFTQVp1tFeRwkRWitFYKvb2tra2draBUCsFgLCrSrQWitOsqqT1RN+jAxKtJTTWFWitMtMtFYKzb29ra2tnaBUCsFZVhVpVoLRWnWVFJ6om/RgYlWkpprAW73v36zn++c+gOFQKv1GoJv04GCp9Rq/T36zn++c+gOFT7fUagm/TgYKn1+3/AKEeMefHjx8/n8vl8vn8/Hjx5xj9bjHnx48fP5/L5fL5/Px48ecY/wAvOPxceQIFIKIJgSAiBAVuK2FaitINAM4MwMwMsJCQkJCQkJCwosws4tAtItQtgtot4oRSCm+Hy8ecfi48gQKQUQTAkBECArcVsK1FaQaAZwZgZgZYSEhISEhISFhRZhZxaBaRahbBbRbxQikFN8BpfMWgWozWLaLcKAUWpq62vr/DX19YEoJARAhBvK2laytRGgjORlIyEYiMJLfJbxLdJbhLbJbRLaJbJbZLbAWxzHMcxzHMcxzHMDbBrYNbJraNbRrbPbh7dPbx7fOwHYjsZ2UzMZoM0maxbRbhQCi1NXW19fX19fW1QSAiBCDeVtK1laiNBGYjKRkIxEYSW+S3iW6S3CW2S2iW0S2S2yW2AtgLY5jmOY5jmOY5gbYNbJrZNbRraPbZ7cPbp7ePb52A7EdjOymZjW4e3D26e3j2+ZgMwmYhYxY4SEhISEBjKxlYiMJGAjAS3iW9TtynblO26dtUrap2zTtmnbNO2SW2S3isRWYGkG0EAItTW1/h8Phr6+rp6AtwtQs5mI9vntw9tHtk9s1LZqWzUto9tnts9uHt09vHt8zAZhMxCxixwkJCQkIDGVjKxEYSMBGAlvEt6nblO3Kdt0rap21TtmnbNO2SWyS2yW8ViKzA1A2ggBFqa2v8Ph8NfW1dPRFuFqMzGYjW+e3D20e2T2zUtk9tHto1tCzHYj2+e3T24e3D24a3DW4Nuc5znOc4FuBbhbcLbhLcJblO3CW4S3iMRGcrYVECcKYB+cJBoCjM2maDsZ7fPbp7cPbh7cNbhrcG3Oc5znOcC3C24W3C24S3CW5TtwluEt4jERnK2FRAnCmAfnCQaAoxb/7ePl8NbU09PT1NYKHy8Y/ZePl8NbU09PT1NYKHy8Y/4Z6+g1tjb3d+Rk5SVlZWVlZSTkd8Fu3s/b6es/pvX0Gtsbe7vyMnKSkrKysrKSciC8Fu3s/YKnrP9gqAb8X0NQawqBVCrMrMqMoGuNUTiYf4ICT5/L4/H4fD4fH4hSCmBAAP4AgctUtYqgqoqsqsqoFIVwqAb8X0NQawqBVCrMrMqMoGuNUTiYf4ICT5/L4/H4fD4fH4hSCmBAAP4AgctUtYqgqkqsqsqsFIV/Hn8XHj5/H4a+traurq6mpqampqampqampqampqampqampqamrq62tr/D4/Lx5/Fx4+fx+Gvra2rq6upqampqampqamrq6upqampqampqamrq6utra/w+Py/wCgEzNTc5OTs7PT09PT8/Pz09PT07Ozk3Ng9TMxLy0rKSclJSMhIb+9vbu9u7u7u7u7u729vb2/vyEjJSUnKSstLzEzNTc5OTs7Oz09PT8/Pz09PT07Ozk5NzUzMS8tKyknJSUjISG/v727vbu7u7u7u7u9u729v78hIyUlJykrLS8x0nR9H0fR9H0XRdF0XRdD0PQ9F0XRdF0XRdF0fR9H0nSdJ0vS9L0vTdN03TdP0/T9P0/T9P0/T9P0/T9R0/T9P0/T9P0/TdN03S9L0vS9J0nSdJ0fR9H0XRdF0PRdD0PQ9D0PRdF0XRdF0XR9H0fSdJ0nS9L0vS9N03TdN0/T9P0/T9P0/T9P0/T9P1HT9P0/T9P0/T9N03TdL0vS9L0vSS8tLy0tLS0rKysrKysrKysrKystLS0vLS8vLy8vMTExMTExMzMzMTMzMzM1NTUzMzMzMzMzMzExMTExMS8vLy8vLy8tKy0tKysrKysrKysrKysrLS0tLy0vLy8vLzExMTExMTMzMzEzMzMzNTU1MzMzMzMzMzMxMTExMTEvLy8vnOc5znOc5znOc5znOc5znOc59ZznPr169evXr169evXr169evXr16znOfWc5znOc5znOc5znOc5znOc5znOc59ZznPr169evXr169evXr169evXr16znOfWc5z/9YD//xAArEAEAAgIDAQABBAICAQUAAAAAAVICYgNRYQRBEEBQUzFCIDARYICQoLD/2gAIAQEAAz8A/wDgmhCEI/nYQj+RhjH5ccflxw44YMe0dtmzZs2bNmzZs2bIsjtiwlxy45/Ljn8se0fwuPbjj8uOPy44YQxR2izZs2bNmzZs2bNkWR2xYS45cc/lhP5Y9/wEQwj8sIRD1s2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNmyLMZYZMZ/KJ/dRDCPywhjCI/LZs2bNmzZs2bNmzZs2bNmzZs2bNmzZs2bNkWYywlhP5RP/ABj9hDGGMIh69bNmzZs2bNmzZsmybJsmybJsmybJsmybJsmybJs2bNmzZs2bNmzZ7+mMsZYyj9hDGGMIj9NmzZs2bNmzZs2bJsmybJsmybJs2TZNk2TZNk2bJs2bNmzZs2bNmzZ6iWMsXr16hiwYMGDBgwYo/T169/T162bNmzZs2TZNk2T2ntPae09pSlKUpSlPae09p7T2mybJsmzZs2bNmz17+nr16hiwYOPtx9uPtx9sO2DBih69evXr1s2bNmzZsmybJsmye09p7T2lKUpSlKU9p7T2ntNk2TZNmzZs2bNmz17+vr1s2bNmzZs2bNmzZs2evXr169bNmye09p7SlKUp/wC6UpSlKe09p7etmzZs9evWzZs2bNmzZs2bNmzZs2bPXr1s9bNmye09p7SlKUp/7pSlKUp7T29bPWz169evWzZs2bNmzZs2bNmzZs2bNmzZs2evU9plM/vJhMJ7T29bNnrZ62bNmzZs2bNmzZs2bNmzZs2bNnr39J7TKZ/eTCYT3+nr162bNnrZs2bJsntNk2TZPabNmzZs2etnr39JlM/wUwmP09etmzZs2bNk2TZNk2TZNk2bNmzZs2bNnv6TKZ/gphMfp69etk9p7T2ntKUpSlKUp7T2nt69e/pMpn+GmH/j9PXr1Pae09pSySlklKU9p7T29evf0mUz/DTCY/T16lP/AHSlKU/xUpSlP/dKUpT/ABUpT/8AQllKWTJl0y6ZdMumXTLpl0y6ZJSn+QlKWTJl0y6ZdMumXTLpl0y6ZJSn/sn9xKWXTLpn0z6Z9M+mXTLplVlVlVlVlVlVlVlVlVlVlRlVlVlRlVlVlVlVlVlVlVl0z6Z9M4/DPpn0z6ZdMkp/byll0y6Z9M+mfTPpn0y6ZVZVZVZVZVZVZVZVZUZVZUZVZVZVZVZVZVZVZVZVZVZdM+mfTOPwz6Z9M+mTJlVlVlVl0yZ9M2fTPpn0z6Z9M+mbPpn0z6Z9M2fTPpl0yqyqyqyqyqyomiaJomiaJomiaJomjRo0aNGjRo0aNGjRNE0TRNE0TRNE0TRNE0ZVZVZVZVZVZVZM+mbPpn0z6Z9M+mfTNn0z6Z9M+mfTPpl0y6ZVZVZVTVlVlRNE0TRlRNE0TRNE0TRo0aNGjRo0aNGjRomiaJomiaJomiaJomqaJqyq0TRNE0TRNE0TVNE1TVNU1TRNE1TVNU0TRNE0TRNGjRo0aNGjRhWHFHTgh88Pmj8Pnj/V89HBRwf1w4f64cNMXFSHFTFxUxcVIcP9cOGkOCkPno+ej55/D55cEuKemHUIo0aNGjRo0TRNE0TRNE0TVNE0TVNE1TVNE1TRNU0TRNE0TRNGjRo0aNGjRhWHFHThh88Pnj8Pnq+ejgo4P64cP9cOKkOKkOKmLipi4aYuH+uHBSHBSHz0fPR88/h88uCXFNWHUIo0aNGjRo4ZcU9MOoRRFGjRo0aNGjRo0aNGjRo0RRhVxR04IcGP4cGP+jij/GEMI/xjCP3+M/5xhxT/AJwhwT/o4Mv9XBk4p6YdQiiKNGjRo0aNGjRo0aNGjRoijGsOKOnBi4Mfw4I/0cUf4whhH+MYR+/xn/OMOKf84Q4J/wBHBP8Ar/zxrDCsOKkOKjhq4auGrhq4auGjipDjpDGsI/k8awwrDipDio4aOGrhq4auGrho4qQ46QxrCP8A0bHcMLQ47w4rw4buCzgs4O3A4HA4XA4HA4HA4O3BZwWcN3Fdx3hhaGNoR/Dx3DC0OO8OK8OG7gs4LODtwOBwOFwOBwOBwODtwWcFnDdxXcd4YWhjaEf88UftoQh4y6ZuRyuVzOZzeudz+uf1z+uf1z+uf1z+uf1zuf1z+uf1z+uf1z+udzR25nM5o7c3rlcrlZsniOkSj9tCEPGXTNyuVy+uZzOb1z+uf1z+uf1z+uf1z+uf1z+udz+uf1z+uf1z+uf1z+ueO3O5nM5vXK5XKzZPEdMUftoYsemHTDpx9OPpxVcVXDVw1cNXDVw0cNHDRw0cNHDRw0cNHDRw0cNHDRw0cNHDRw0cNHDVw1cNXFVxVcVXFVx9OPph0w6Yo/bQxY9MOnH04+nH04quKrhq4auGrhq4aOGjho4aOGjho4aOGkOGkOGkOGjho4aOGjho4aOGjhq4auGriq4quKriq4+nH0w6Ydf+wHgcLhcLicTjYdww7hh3DDuGPcMe4Y9ww7hh3DDuGHcONxuJxOFwuBwOB8753z2fPZ89nz3fNd893zXfPd893z3fP/Y+e757uC75/wCyHz/2Q+f+yHBd893z3fPd893z3fPd893zXfNd893z2fPZ8/b5+3zvncDgcLhcLicTjYdww7hh3DDuGHcMe4Ydww7hh3DDuGHcONxuJxOFwuBwPnfO+d89nz2fPZ893zXfPd813z3fPd893z/2Pnu+e7gu+f8Ash8/9kPn/shwXcF3z3fPd893z3fPd893zXfNd893z2fPZ8/b5+3zvncDdu3bt03bt26bpum6bpum6bt27du3bt26bt26bpum6bpum6bpum6bt03TdN26bpum6bpum7dN03TdN03TdN03TdN03Tdum7dum7dN27dum6bpum6bpum6bpum7du3bt03bpu3bpum6bpum6bpum6bpu3TdN03bpum6bpum6bt03TdN03TdN03TdN03TdN03TduysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysysmzKzKzKybMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrMrJT+2lKUpSlKUpSlKUpSlKUpSlKUpSlKUpSlKUpSn9tKUpSlKUpSlKUpSlKUpSlKUpSlKUpSlKUpT/wDrA//EAB0RAAMBAAMBAQEAAAAAAAAAAAABERIwQFAgkMD/2gAIAQIBAT8A/COlKioqKioqKi+zSoqKioqL59Ro0aKyvpVlZWaNFXiVGkaNFZWV9CsrNGjRpFXepo0V8c69Zo0u1pGilfVnJWaNF+NFXNUaNFfmU0aReamkaNPzNM19VlZWaKysrK/XrKzTNGjRWaKyv+u0/8QAHREBAQACAQUAAAAAAAAAAAAAEQBAUCAQITCQwP/aAAgBAwEBPwD1NkRER07eYiIiNMRERGARERGgIiNAREZRERoCIjiYBERqiIwiI1REcCIiIiIjbkREREREfXZ//9k=";
$i();
$i();
var zF = false;
function VF() {
  zF = true;
}
function HF() {
  return zF;
}
var a1 = class {
  constructor(r6) {
    t(this, "backgroundAlpha", 1);
    t(this, "backgroundColor", new Nt());
    t(this, "width", 0);
    t(this, "height", 0);
    t(this, "options", {});
    t(this, "renderer");
    t(this, "enabledLayers", /* @__PURE__ */ new Set([0, 1]));
    t(this, "handleWebGLContextCreationError", (r8) => {
      this.options.onWebGLContextCreationError?.(r8);
    });
    t(this, "handleWebGLContextLost", (r8) => {
      this.options.onWebGLContextLost?.(r8);
    });
    t(this, "handleWebGLContextRestored", (r8) => {
      this.options.onWebGLContextRestored?.(r8);
    });
    try {
      this.options = r6, HF() ? (this.renderer = { setSize: () => {
      }, state: { reset: () => {
      } }, properties: { get: () => {
      } }, getSize: () => ({ width: window.innerWidth, height: innerHeight }), getDrawingBufferSize: () => ({ width: window.innerWidth, height: innerHeight }), getClearAlpha: () => 1, getClearColor: () => new Nt(), autoUpdate: true, shadowMap: { autoUpdate: true }, getContext: () => ({ getContextAttributes() {
        return { alpha: true, antialias: false, depth: true, stencil: false };
      } }), readRenderTargetPixelsAsync: () => Promise.resolve([]), setRenderTarget: () => {
      }, setClearColor: () => {
      }, clear: () => {
      }, render: () => {
      }, clearStencil: () => {
      }, clearDepth: () => {
      }, domElement: document.createElement("canvas"), capabilities: { isWebGL2: true } }, this.renderer.domElement.style.width = "1920px", Object.defineProperty(this.renderer.domElement, "clientWidth", { value: 1920 }), this.renderer.domElement.style.height = "1080px", Object.defineProperty(this.renderer.domElement, "clientHeight", { value: 1080 })) : (this.renderer = new Nu({ canvas: r6.canvas, alpha: r6.alpha || false, stencil: true, antialias: typeof r6.antialias == "boolean" ? r6.antialias : true, powerPreference: "high-performance", preserveDrawingBuffer: true }), this.renderer.localClippingEnabled = true), this.backgroundColor = new Nt(r6.backgroundColor ?? "#ffffff"), this.backgroundAlpha = r6.backgroundAlpha ?? 1;
    } catch (t6) {
      Pt.error(t6), r6.onWebGLRendererError && r6.onWebGLRendererError(t6);
    }
    this.domElement()?.addEventListener("webglcontextlost", this.handleWebGLContextLost), this.domElement()?.addEventListener("webglcontextrestored", this.handleWebGLContextRestored), this.domElement()?.addEventListener("webglcontextcreationerror", this.handleWebGLContextCreationError);
  }
  destroy() {
    this.renderer && this.renderer.dispose?.(), this.domElement()?.removeEventListener("webglcontextlost", this.handleWebGLContextLost), this.domElement()?.removeEventListener("webglcontextrestored", this.handleWebGLContextRestored), this.domElement()?.removeEventListener("webglcontextcreationerror", this.handleWebGLContextCreationError);
  }
  render(r6, t6) {
    if (this.renderer) {
      this.renderer.state.reset(), t6.layers.disableAll();
      for (let n of this.enabledLayers.values()) t6.layers.enable(n);
      this.renderer.clearStencil(), this.renderer.autoClear = false, this.renderer.setRenderTarget(null), this.renderer.render(r6, t6), this.renderer.clearDepth(), t6.layers.disableAll(), t6.layers.enable(rM.ALWAYS_ON_TOP_PATHS), this.renderer.render(r6, t6), this.renderer.state.reset();
    }
  }
  clear() {
    this.renderer && (this.renderer.setClearColor(this.backgroundColor, this.backgroundAlpha), this.renderer.clear());
  }
  setBufferSize(r6, t6) {
    yc.env.NODE_ENV === "test" || !this.renderer || (this.width = r6, this.height = t6, this.renderer.setSize(r6, t6, false));
  }
  setBackgroundColor(r6, t6) {
    this.backgroundColor = r6, this.backgroundAlpha = t6;
  }
  domElement() {
    return this.renderer?.domElement;
  }
};
$i();
$i();
var ZF = '"use strict";(()=>{var Ja=Object.defineProperty;var us=(e,r,n)=>r in e?Ja(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var pe=(e,r)=>{for(var n in r)Ja(e,n,{get:r[n],enumerable:!0})};var E=(e,r,n)=>us(e,typeof r!="symbol"?r+"":r,n);function Ma(e,r){return r.x+r.w<e.x+e.w&&r.x>e.x&&r.y>e.y&&r.y+r.h<e.y+e.h}function Ba(e,r){let[n,o]=r;return n>=e.x&&n<=e.x+e.w&&o>=e.y&&o<=e.y+e.h}function Ka(e,r){let n=r.x,o=r.y,t=r.x+r.w,i=r.y+r.h,a=e.x,u=e.y,s=e.x+e.w,m=e.y+e.h;return n<s&&a<t&&o<m&&u<i}function Q(e,r){for(let n=0;n<r.length;n++)e.push(r[n])}var U=class{constructor(r,n,o,t,i){E(this,"x");E(this,"y");E(this,"w");E(this,"h");E(this,"userData");this.userData=typeof i>"u"?null:i,this.x=r,this.y=n,this.w=o,this.h=t}contains(r){return r===this?!1:Ma(this,r)}intersects(r){return Ka(this,r)}intersectsPoint(r){return Ba(this,r)}draw(r){r.fillStyle="rgba(123,222,26, 0.8)",r.fillRect(this.x,this.y,this.w,this.h)}};var Ae=class e{constructor(r,n){E(this,"topLeft");E(this,"topRight");E(this,"bottomLeft");E(this,"bottomRight");E(this,"divided",!1);E(this,"boundary");E(this,"capacity",16);E(this,"objects",[]);E(this,"parent");this.parent=n,this.boundary=r}getSize(){return this.divided?this.objects.length+this.topLeft.getSize()+this.topRight.getSize()+this.bottomLeft.getSize()+this.bottomRight.getSize():this.objects.length}subdivide(){let{x:r,y:n,w:o,h:t}=this.boundary;this.topLeft=new e(new U(r,n,o/2,t/2),this),this.topRight=new e(new U(r+o/2,n,o/2,t/2),this),this.bottomLeft=new e(new U(r,n+t/2,o/2,t/2),this),this.bottomRight=new e(new U(r+o/2,n+t/2,o/2,t/2),this),this.divided=!0}queryRect(r){let n=[];if(this.boundary.intersects(r))n.push(...this.objects);else return[];return this.divided&&(Q(n,this.topLeft.queryRect(r)),Q(n,this.topRight.queryRect(r)),Q(n,this.bottomLeft.queryRect(r)),Q(n,this.bottomRight.queryRect(r))),n}queryPoint(r){let n=[];if(this.boundary.intersectsPoint(r))n.push(...this.objects);else return[];return this.divided&&(Q(n,this.topLeft.queryPoint(r)),Q(n,this.topRight.queryPoint(r)),Q(n,this.bottomLeft.queryPoint(r)),Q(n,this.bottomRight.queryPoint(r))),n}insert(r){return(this.parent?!this.boundary.contains(r):!this.boundary.intersects(r))?!1:this.objects.length<this.capacity?(this.objects.push(r),!0):(this.divided||this.subdivide(),(this.topLeft.insert(r)||this.topRight.insert(r)||this.bottomLeft.insert(r)||this.bottomRight.insert(r))===!1&&this.objects.push(r),!0)}drawObjects(r){this.objects.forEach(n=>n.draw(r)),this.divided&&(this.topLeft.drawObjects(r),this.topRight.drawObjects(r),this.bottomLeft.drawObjects(r),this.bottomRight.drawObjects(r))}draw(r){r.rect(this.boundary.x,this.boundary.y,this.boundary.w,this.boundary.h),this.divided&&(this.topLeft.draw(r),this.topRight.draw(r),this.bottomLeft.draw(r),this.bottomRight.draw(r)),r.strokeStyle="black",r.lineWidth=4,r.stroke()}};var Te={};pe(Te,{$brand:()=>zt,$input:()=>to,$output:()=>eo,NEVER:()=>Ar,TimePrecision:()=>io,ZodAny:()=>xc,ZodArray:()=>wc,ZodBase64:()=>xa,ZodBase64URL:()=>ka,ZodBigInt:()=>xt,ZodBigIntFormat:()=>wa,ZodBoolean:()=>yt,ZodCIDRv4:()=>_a,ZodCIDRv6:()=>ya,ZodCUID:()=>fa,ZodCUID2:()=>pa,ZodCatch:()=>Bc,ZodCodec:()=>Ea,ZodCustom:()=>Nr,ZodCustomStringFormat:()=>bt,ZodDate:()=>Or,ZodDefault:()=>Lc,ZodDiscriminatedUnion:()=>Sc,ZodE164:()=>za,ZodEmail:()=>la,ZodEmoji:()=>da,ZodEnum:()=>ht,ZodError:()=>Ed,ZodFile:()=>Ec,ZodFirstPartyTypeKind:()=>Aa,ZodFunction:()=>es,ZodGUID:()=>zr,ZodIPv4:()=>$a,ZodIPv6:()=>ba,ZodISODate:()=>_r,ZodISODateTime:()=>br,ZodISODuration:()=>xr,ZodISOTime:()=>yr,ZodIntersection:()=>jc,ZodIssueCode:()=>Gm,ZodJWT:()=>Ia,ZodKSUID:()=>ha,ZodLazy:()=>Yc,ZodLiteral:()=>Tc,ZodMap:()=>Zc,ZodNaN:()=>Gc,ZodNanoID:()=>ma,ZodNever:()=>zc,ZodNonOptional:()=>Da,ZodNull:()=>_c,ZodNullable:()=>Rc,ZodNumber:()=>_t,ZodNumberFormat:()=>De,ZodObject:()=>Ur,ZodOptional:()=>Za,ZodPipe:()=>Ta,ZodPrefault:()=>Vc,ZodPromise:()=>Hc,ZodReadonly:()=>Wc,ZodRealError:()=>V,ZodRecord:()=>Pa,ZodSet:()=>Dc,ZodString:()=>$t,ZodStringFormat:()=>N,ZodSuccess:()=>Mc,ZodSymbol:()=>$c,ZodTemplateLiteral:()=>qc,ZodTransform:()=>Ac,ZodTuple:()=>Pc,ZodType:()=>k,ZodULID:()=>ga,ZodURL:()=>jr,ZodUUID:()=>ne,ZodUndefined:()=>bc,ZodUnion:()=>ja,ZodUnknown:()=>kc,ZodVoid:()=>Ic,ZodXID:()=>va,_ZodString:()=>sa,_default:()=>Cc,_function:()=>Cm,any:()=>_m,array:()=>Pr,base64:()=>nm,base64url:()=>im,bigint:()=>gm,boolean:()=>hc,catch:()=>Kc,check:()=>Vm,cidrv4:()=>tm,cidrv6:()=>rm,clone:()=>R,codec:()=>Am,coerce:()=>Ra,config:()=>D,core:()=>re,cuid:()=>Wd,cuid2:()=>Xd,custom:()=>Fm,date:()=>xm,decode:()=>ea,decodeAsync:()=>ra,discriminatedUnion:()=>Sm,e164:()=>om,email:()=>Rd,emoji:()=>Kd,encode:()=>Ho,encodeAsync:()=>ta,endsWith:()=>lt,enum:()=>Ua,file:()=>Zm,flattenError:()=>Ke,float32:()=>dm,float64:()=>mm,formatError:()=>Ge,function:()=>Cm,getErrorMap:()=>Xm,globalRegistry:()=>q,gt:()=>ee,gte:()=>C,guid:()=>Ld,hash:()=>lm,hex:()=>sm,hostname:()=>cm,httpUrl:()=>Bd,includes:()=>ct,instanceof:()=>Jm,int:()=>ca,int32:()=>fm,int64:()=>vm,intersection:()=>Oc,ipv4:()=>Hd,ipv6:()=>em,iso:()=>kr,json:()=>Bm,jwt:()=>am,keyof:()=>km,ksuid:()=>Qd,lazy:()=>Qc,length:()=>Ue,literal:()=>Nm,locales:()=>tt,looseObject:()=>wm,lowercase:()=>at,lt:()=>H,lte:()=>G,map:()=>Om,maxLength:()=>Pe,maxSize:()=>Oe,mime:()=>dt,minLength:()=>le,minSize:()=>be,multipleOf:()=>$e,nan:()=>Em,nanoid:()=>Gd,nativeEnum:()=>Um,negative:()=>Do,never:()=>Sa,nonnegative:()=>Eo,nonoptional:()=>Jc,nonpositive:()=>To,normalize:()=>mt,null:()=>yc,nullable:()=>wr,nullish:()=>Dm,number:()=>vc,object:()=>zm,optional:()=>Ir,overwrite:()=>te,parse:()=>Xo,parseAsync:()=>qo,partialRecord:()=>jm,pipe:()=>Sr,positive:()=>Zo,prefault:()=>Fc,preprocess:()=>Km,prettifyError:()=>Wr,promise:()=>Lm,property:()=>Ao,readonly:()=>Xc,record:()=>Nc,refine:()=>ts,regex:()=>ot,regexes:()=>K,registry:()=>Qt,safeDecode:()=>ia,safeDecodeAsync:()=>aa,safeEncode:()=>na,safeEncodeAsync:()=>oa,safeParse:()=>Yo,safeParseAsync:()=>Qo,set:()=>Pm,setErrorMap:()=>Wm,size:()=>it,startsWith:()=>st,strictObject:()=>Im,string:()=>ua,stringFormat:()=>um,stringbool:()=>Mm,success:()=>Tm,superRefine:()=>rs,symbol:()=>$m,templateLiteral:()=>Rm,toJSONSchema:()=>Mo,toLowerCase:()=>pt,toUpperCase:()=>gt,transform:()=>Na,treeifyError:()=>Gr,trim:()=>ft,tuple:()=>Uc,uint32:()=>pm,uint64:()=>hm,ulid:()=>qd,undefined:()=>bm,union:()=>Oa,unknown:()=>Ze,uppercase:()=>ut,url:()=>Md,util:()=>h,uuid:()=>Cd,uuidv4:()=>Vd,uuidv6:()=>Fd,uuidv7:()=>Jd,void:()=>ym,xid:()=>Yd});var re={};pe(re,{$ZodAny:()=>ki,$ZodArray:()=>ji,$ZodAsyncError:()=>W,$ZodBase64:()=>fi,$ZodBase64URL:()=>pi,$ZodBigInt:()=>Kt,$ZodBigIntFormat:()=>bi,$ZodBoolean:()=>Ye,$ZodCIDRv4:()=>li,$ZodCIDRv6:()=>di,$ZodCUID:()=>Hn,$ZodCUID2:()=>ei,$ZodCatch:()=>Bi,$ZodCheck:()=>Z,$ZodCheckBigIntFormat:()=>On,$ZodCheckEndsWith:()=>Vn,$ZodCheckGreaterThan:()=>Lt,$ZodCheckIncludes:()=>Ln,$ZodCheckLengthEquals:()=>Tn,$ZodCheckLessThan:()=>Rt,$ZodCheckLowerCase:()=>An,$ZodCheckMaxLength:()=>Zn,$ZodCheckMaxSize:()=>Pn,$ZodCheckMimeType:()=>Jn,$ZodCheckMinLength:()=>Dn,$ZodCheckMinSize:()=>Un,$ZodCheckMultipleOf:()=>Sn,$ZodCheckNumberFormat:()=>jn,$ZodCheckOverwrite:()=>Mn,$ZodCheckProperty:()=>Fn,$ZodCheckRegex:()=>En,$ZodCheckSizeEquals:()=>Nn,$ZodCheckStartsWith:()=>Cn,$ZodCheckStringFormat:()=>Se,$ZodCheckUpperCase:()=>Rn,$ZodCodec:()=>Qe,$ZodCustom:()=>Hi,$ZodCustomStringFormat:()=>hi,$ZodDate:()=>Si,$ZodDefault:()=>Vi,$ZodDiscriminatedUnion:()=>Pi,$ZodE164:()=>gi,$ZodEmail:()=>Xn,$ZodEmoji:()=>Yn,$ZodEncodeError:()=>ie,$ZodEnum:()=>Ti,$ZodError:()=>Be,$ZodFile:()=>Ai,$ZodFunction:()=>qi,$ZodGUID:()=>Gn,$ZodIPv4:()=>ci,$ZodIPv6:()=>si,$ZodISODate:()=>oi,$ZodISODateTime:()=>ii,$ZodISODuration:()=>ui,$ZodISOTime:()=>ai,$ZodIntersection:()=>Ui,$ZodJWT:()=>vi,$ZodKSUID:()=>ni,$ZodLazy:()=>Qi,$ZodLiteral:()=>Ei,$ZodMap:()=>Zi,$ZodNaN:()=>Ki,$ZodNanoID:()=>Qn,$ZodNever:()=>Ii,$ZodNonOptional:()=>Ji,$ZodNull:()=>xi,$ZodNullable:()=>Ci,$ZodNumber:()=>Bt,$ZodNumberFormat:()=>$i,$ZodObject:()=>$u,$ZodObjectJIT:()=>Oi,$ZodOptional:()=>Li,$ZodPipe:()=>Gi,$ZodPrefault:()=>Fi,$ZodPromise:()=>Yi,$ZodReadonly:()=>Wi,$ZodRealError:()=>L,$ZodRecord:()=>Ni,$ZodRegistry:()=>je,$ZodSet:()=>Di,$ZodString:()=>he,$ZodStringFormat:()=>O,$ZodSuccess:()=>Mi,$ZodSymbol:()=>_i,$ZodTemplateLiteral:()=>Xi,$ZodTransform:()=>Ri,$ZodTuple:()=>Wt,$ZodType:()=>x,$ZodULID:()=>ti,$ZodURL:()=>qn,$ZodUUID:()=>Wn,$ZodUndefined:()=>yi,$ZodUnion:()=>Gt,$ZodUnknown:()=>zi,$ZodVoid:()=>wi,$ZodXID:()=>ri,$brand:()=>zt,$constructor:()=>c,$input:()=>to,$output:()=>eo,Doc:()=>qe,JSONSchema:()=>fc,JSONSchemaGenerator:()=>vt,NEVER:()=>Ar,TimePrecision:()=>io,_any:()=>wo,_array:()=>Ro,_base64:()=>gr,_base64url:()=>vr,_bigint:()=>bo,_boolean:()=>ho,_catch:()=>Od,_check:()=>mc,_cidrv4:()=>fr,_cidrv6:()=>pr,_coercedBigint:()=>_o,_coercedBoolean:()=>$o,_coercedDate:()=>Uo,_coercedNumber:()=>lo,_coercedString:()=>no,_cuid:()=>ar,_cuid2:()=>ur,_custom:()=>Co,_date:()=>Po,_decode:()=>Pt,_decodeAsync:()=>Nt,_default:()=>wd,_discriminatedUnion:()=>pd,_e164:()=>hr,_email:()=>Ht,_emoji:()=>ir,_encode:()=>Ot,_encodeAsync:()=>Ut,_endsWith:()=>lt,_enum:()=>_d,_file:()=>Lo,_float32:()=>fo,_float64:()=>po,_gt:()=>ee,_gte:()=>C,_guid:()=>rt,_includes:()=>ct,_int:()=>mo,_int32:()=>go,_int64:()=>yo,_intersection:()=>gd,_ipv4:()=>dr,_ipv6:()=>mr,_isoDate:()=>ao,_isoDateTime:()=>oo,_isoDuration:()=>co,_isoTime:()=>uo,_jwt:()=>$r,_ksuid:()=>lr,_lazy:()=>Zd,_length:()=>Ue,_literal:()=>xd,_lowercase:()=>at,_lt:()=>H,_lte:()=>G,_map:()=>$d,_max:()=>G,_maxLength:()=>Pe,_maxSize:()=>Oe,_mime:()=>dt,_min:()=>C,_minLength:()=>le,_minSize:()=>be,_multipleOf:()=>$e,_nan:()=>No,_nanoid:()=>or,_nativeEnum:()=>yd,_negative:()=>Do,_never:()=>jo,_nonnegative:()=>Eo,_nonoptional:()=>Sd,_nonpositive:()=>To,_normalize:()=>mt,_null:()=>Io,_nullable:()=>Id,_number:()=>so,_optional:()=>zd,_overwrite:()=>te,_parse:()=>ke,_parseAsync:()=>ze,_pipe:()=>Pd,_positive:()=>Zo,_promise:()=>Dd,_property:()=>Ao,_readonly:()=>Ud,_record:()=>hd,_refine:()=>Vo,_regex:()=>ot,_safeDecode:()=>Dt,_safeDecodeAsync:()=>Et,_safeEncode:()=>Zt,_safeEncodeAsync:()=>Tt,_safeParse:()=>Ie,_safeParseAsync:()=>we,_set:()=>bd,_size:()=>it,_startsWith:()=>st,_string:()=>ro,_stringFormat:()=>Ne,_stringbool:()=>Jo,_success:()=>jd,_superRefine:()=>Fo,_symbol:()=>ko,_templateLiteral:()=>Nd,_toLowerCase:()=>pt,_toUpperCase:()=>gt,_transform:()=>kd,_trim:()=>ft,_tuple:()=>vd,_uint32:()=>vo,_uint64:()=>xo,_ulid:()=>cr,_undefined:()=>zo,_union:()=>fd,_unknown:()=>So,_uppercase:()=>ut,_url:()=>nt,_uuid:()=>er,_uuidv4:()=>tr,_uuidv6:()=>rr,_uuidv7:()=>nr,_void:()=>Oo,_xid:()=>sr,clone:()=>R,config:()=>D,decode:()=>Ts,decodeAsync:()=>As,encode:()=>Ds,encodeAsync:()=>Es,flattenError:()=>Ke,formatError:()=>Ge,globalConfig:()=>Re,globalRegistry:()=>q,isValidBase64:()=>mi,isValidBase64URL:()=>pu,isValidJWT:()=>gu,locales:()=>tt,parse:()=>St,parseAsync:()=>jt,prettifyError:()=>Wr,regexes:()=>K,registry:()=>Qt,safeDecode:()=>Ls,safeDecodeAsync:()=>Vs,safeEncode:()=>Rs,safeEncodeAsync:()=>Cs,safeParse:()=>Xr,safeParseAsync:()=>qr,toDotPath:()=>Ya,toJSONSchema:()=>Mo,treeifyError:()=>Gr,util:()=>h,version:()=>Bn});var Ar=Object.freeze({status:"aborted"});function c(e,r,n){function o(u,s){var m;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(m=u._zod).traits??(m.traits=new Set),u._zod.traits.add(e),r(u,s);for(let f in a.prototype)f in u||Object.defineProperty(u,f,{value:a.prototype[f].bind(u)});u._zod.constr=a,u._zod.def=s}let t=n?.Parent??Object;class i extends t{}Object.defineProperty(i,"name",{value:e});function a(u){var s;let m=n?.Parent?new i:this;o(m,u),(s=m._zod).deferred??(s.deferred=[]);for(let f of m._zod.deferred)f();return m}return Object.defineProperty(a,"init",{value:o}),Object.defineProperty(a,Symbol.hasInstance,{value:u=>n?.Parent&&u instanceof n.Parent?!0:u?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}var zt=Symbol("zod_brand"),W=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},ie=class extends Error{constructor(r){super(`Encountered unidirectional transform during encode: ${r}`),this.name="ZodEncodeError"}},Re={};function D(e){return e&&Object.assign(Re,e),Re}var h={};pe(h,{BIGINT_FORMAT_RANGES:()=>Kr,Class:()=>Lr,NUMBER_FORMAT_RANGES:()=>Br,aborted:()=>se,allowsEval:()=>Vr,assert:()=>ms,assertEqual:()=>cs,assertIs:()=>ls,assertNever:()=>ds,assertNotEqual:()=>ss,assignProp:()=>ae,base64ToUint8Array:()=>Wa,base64urlToUint8Array:()=>Os,cached:()=>ye,captureStackTrace:()=>wt,cleanEnum:()=>js,cleanRegex:()=>Ve,clone:()=>R,cloneDef:()=>ps,createTransparentProxy:()=>_s,defineLazy:()=>I,esc:()=>It,escapeRegex:()=>X,extend:()=>ks,finalizeIssue:()=>J,floatSafeRemainder:()=>Cr,getElementAtPath:()=>gs,getEnumValues:()=>Ce,getLengthableOrigin:()=>Me,getParsedType:()=>bs,getSizableOrigin:()=>Je,hexToUint8Array:()=>Us,isObject:()=>ge,isPlainObject:()=>ce,issue:()=>xe,joinValues:()=>l,jsonStringifyReplacer:()=>_e,merge:()=>Is,mergeDefs:()=>ue,normalizeParams:()=>v,nullish:()=>oe,numKeys:()=>$s,objectClone:()=>fs,omit:()=>xs,optionalKeys:()=>Mr,partial:()=>ws,pick:()=>ys,prefixIssues:()=>F,primitiveTypes:()=>Jr,promiseAllObject:()=>vs,propertyKeyTypes:()=>Fe,randomString:()=>hs,required:()=>Ss,safeExtend:()=>zs,shallowClone:()=>Fr,stringifyPrimitive:()=>p,uint8ArrayToBase64:()=>Xa,uint8ArrayToBase64url:()=>Ps,uint8ArrayToHex:()=>Ns,unwrapMessage:()=>Le});function cs(e){return e}function ss(e){return e}function ls(e){}function ds(e){throw new Error}function ms(e){}function Ce(e){let r=Object.values(e).filter(o=>typeof o=="number");return Object.entries(e).filter(([o,t])=>r.indexOf(+o)===-1).map(([o,t])=>t)}function l(e,r="|"){return e.map(n=>p(n)).join(r)}function _e(e,r){return typeof r=="bigint"?r.toString():r}function ye(e){return{get value(){{let n=e();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function oe(e){return e==null}function Ve(e){let r=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(r,n)}function Cr(e,r){let n=(e.toString().split(".")[1]||"").length,o=r.toString(),t=(o.split(".")[1]||"").length;if(t===0&&/\\d?e-\\d?/.test(o)){let s=o.match(/\\d?e-(\\d?)/);s?.[1]&&(t=Number.parseInt(s[1]))}let i=n>t?n:t,a=Number.parseInt(e.toFixed(i).replace(".","")),u=Number.parseInt(r.toFixed(i).replace(".",""));return a%u/10**i}var Ga=Symbol("evaluating");function I(e,r,n){let o;Object.defineProperty(e,r,{get(){if(o!==Ga)return o===void 0&&(o=Ga,o=n()),o},set(t){Object.defineProperty(e,r,{value:t})},configurable:!0})}function fs(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function ae(e,r,n){Object.defineProperty(e,r,{value:n,writable:!0,enumerable:!0,configurable:!0})}function ue(...e){let r={};for(let n of e){let o=Object.getOwnPropertyDescriptors(n);Object.assign(r,o)}return Object.defineProperties({},r)}function ps(e){return ue(e._zod.def)}function gs(e,r){return r?r.reduce((n,o)=>n?.[o],e):e}function vs(e){let r=Object.keys(e),n=r.map(o=>e[o]);return Promise.all(n).then(o=>{let t={};for(let i=0;i<r.length;i++)t[r[i]]=o[i];return t})}function hs(e=10){let r="abcdefghijklmnopqrstuvwxyz",n="";for(let o=0;o<e;o++)n+=r[Math.floor(Math.random()*r.length)];return n}function It(e){return JSON.stringify(e)}var wt="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ge(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}var Vr=ye(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});function ce(e){if(ge(e)===!1)return!1;let r=e.constructor;if(r===void 0)return!0;let n=r.prototype;return!(ge(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Fr(e){return ce(e)?{...e}:Array.isArray(e)?[...e]:e}function $s(e){let r=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&r++;return r}var bs=e=>{let r=typeof e;switch(r){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${r}`)}},Fe=new Set(["string","number","symbol"]),Jr=new Set(["string","number","bigint","boolean","symbol","undefined"]);function X(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&")}function R(e,r,n){let o=new e._zod.constr(r??e._zod.def);return(!r||n?.parent)&&(o._zod.parent=e),o}function v(e){let r=e;if(!r)return{};if(typeof r=="string")return{error:()=>r};if(r?.message!==void 0){if(r?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");r.error=r.message}return delete r.message,typeof r.error=="string"?{...r,error:()=>r.error}:r}function _s(e){let r;return new Proxy({},{get(n,o,t){return r??(r=e()),Reflect.get(r,o,t)},set(n,o,t,i){return r??(r=e()),Reflect.set(r,o,t,i)},has(n,o){return r??(r=e()),Reflect.has(r,o)},deleteProperty(n,o){return r??(r=e()),Reflect.deleteProperty(r,o)},ownKeys(n){return r??(r=e()),Reflect.ownKeys(r)},getOwnPropertyDescriptor(n,o){return r??(r=e()),Reflect.getOwnPropertyDescriptor(r,o)},defineProperty(n,o,t){return r??(r=e()),Reflect.defineProperty(r,o,t)}})}function p(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function Mr(e){return Object.keys(e).filter(r=>e[r]._zod.optin==="optional"&&e[r]._zod.optout==="optional")}var Br={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Kr={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function ys(e,r){let n=e._zod.def,o=ue(e._zod.def,{get shape(){let t={};for(let i in r){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(t[i]=n.shape[i])}return ae(this,"shape",t),t},checks:[]});return R(e,o)}function xs(e,r){let n=e._zod.def,o=ue(e._zod.def,{get shape(){let t={...e._zod.def.shape};for(let i in r){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);r[i]&&delete t[i]}return ae(this,"shape",t),t},checks:[]});return R(e,o)}function ks(e,r){if(!ce(r))throw new Error("Invalid input to extend: expected a plain object");let n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let t=ue(e._zod.def,{get shape(){let i={...e._zod.def.shape,...r};return ae(this,"shape",i),i},checks:[]});return R(e,t)}function zs(e,r){if(!ce(r))throw new Error("Invalid input to safeExtend: expected a plain object");let n={...e._zod.def,get shape(){let o={...e._zod.def.shape,...r};return ae(this,"shape",o),o},checks:e._zod.def.checks};return R(e,n)}function Is(e,r){let n=ue(e._zod.def,{get shape(){let o={...e._zod.def.shape,...r._zod.def.shape};return ae(this,"shape",o),o},get catchall(){return r._zod.def.catchall},checks:[]});return R(e,n)}function ws(e,r,n){let o=ue(r._zod.def,{get shape(){let t=r._zod.def.shape,i={...t};if(n)for(let a in n){if(!(a in t))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(i[a]=e?new e({type:"optional",innerType:t[a]}):t[a])}else for(let a in t)i[a]=e?new e({type:"optional",innerType:t[a]}):t[a];return ae(this,"shape",i),i},checks:[]});return R(r,o)}function Ss(e,r,n){let o=ue(r._zod.def,{get shape(){let t=r._zod.def.shape,i={...t};if(n)for(let a in n){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(i[a]=new e({type:"nonoptional",innerType:t[a]}))}else for(let a in t)i[a]=new e({type:"nonoptional",innerType:t[a]});return ae(this,"shape",i),i},checks:[]});return R(r,o)}function se(e,r=0){if(e.aborted===!0)return!0;for(let n=r;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function F(e,r){return r.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}function Le(e){return typeof e=="string"?e:e?.message}function J(e,r,n){let o={...e,path:e.path??[]};if(!e.message){let t=Le(e.inst?._zod.def?.error?.(e))??Le(r?.error?.(e))??Le(n.customError?.(e))??Le(n.localeError?.(e))??"Invalid input";o.message=t}return delete o.inst,delete o.continue,r?.reportInput||delete o.input,o}function Je(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Me(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function xe(...e){let[r,n,o]=e;return typeof r=="string"?{message:r,code:"custom",input:n,inst:o}:{...r}}function js(e){return Object.entries(e).filter(([r,n])=>Number.isNaN(Number.parseInt(r,10))).map(r=>r[1])}function Wa(e){let r=atob(e),n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n}function Xa(e){let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}function Os(e){let r=e.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-r.length%4)%4);return Wa(r+n)}function Ps(e){return Xa(e).replace(/\\+/g,"-").replace(/\\//g,"_").replace(/=/g,"")}function Us(e){let r=e.replace(/^0x/,"");if(r.length%2!==0)throw new Error("Invalid hex string length");let n=new Uint8Array(r.length/2);for(let o=0;o<r.length;o+=2)n[o/2]=Number.parseInt(r.slice(o,o+2),16);return n}function Ns(e){return Array.from(e).map(r=>r.toString(16).padStart(2,"0")).join("")}var Lr=class{constructor(...r){}};var qa=(e,r)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:r,enumerable:!1}),e.message=JSON.stringify(r,_e,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Be=c("$ZodError",qa),L=c("$ZodError",qa,{Parent:Error});function Ke(e,r=n=>n.message){let n={},o=[];for(let t of e.issues)t.path.length>0?(n[t.path[0]]=n[t.path[0]]||[],n[t.path[0]].push(r(t))):o.push(r(t));return{formErrors:o,fieldErrors:n}}function Ge(e,r=n=>n.message){let n={_errors:[]},o=t=>{for(let i of t.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>o({issues:a}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)n._errors.push(r(i));else{let a=n,u=0;for(;u<i.path.length;){let s=i.path[u];u===i.path.length-1?(a[s]=a[s]||{_errors:[]},a[s]._errors.push(r(i))):a[s]=a[s]||{_errors:[]},a=a[s],u++}}};return o(e),n}function Gr(e,r=n=>n.message){let n={errors:[]},o=(t,i=[])=>{var a,u;for(let s of t.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(m=>o({issues:m},s.path));else if(s.code==="invalid_key")o({issues:s.issues},s.path);else if(s.code==="invalid_element")o({issues:s.issues},s.path);else{let m=[...i,...s.path];if(m.length===0){n.errors.push(r(s));continue}let f=n,g=0;for(;g<m.length;){let y=m[g],$=g===m.length-1;typeof y=="string"?(f.properties??(f.properties={}),(a=f.properties)[y]??(a[y]={errors:[]}),f=f.properties[y]):(f.items??(f.items=[]),(u=f.items)[y]??(u[y]={errors:[]}),f=f.items[y]),$&&f.errors.push(r(s)),g++}}};return o(e),n}function Ya(e){let r=[],n=e.map(o=>typeof o=="object"?o.key:o);for(let o of n)typeof o=="number"?r.push(`[${o}]`):typeof o=="symbol"?r.push(`[${JSON.stringify(String(o))}]`):/[^\\w$]/.test(o)?r.push(`[${JSON.stringify(o)}]`):(r.length&&r.push("."),r.push(o));return r.join("")}function Wr(e){let r=[],n=[...e.issues].sort((o,t)=>(o.path??[]).length-(t.path??[]).length);for(let o of n)r.push(`\\u2716 ${o.message}`),o.path?.length&&r.push(`  \\u2192 at ${Ya(o.path)}`);return r.join(`\n`)}var ke=e=>(r,n,o,t)=>{let i=o?Object.assign(o,{async:!1}):{async:!1},a=r._zod.run({value:n,issues:[]},i);if(a instanceof Promise)throw new W;if(a.issues.length){let u=new(t?.Err??e)(a.issues.map(s=>J(s,i,D())));throw wt(u,t?.callee),u}return a.value},St=ke(L),ze=e=>async(r,n,o,t)=>{let i=o?Object.assign(o,{async:!0}):{async:!0},a=r._zod.run({value:n,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){let u=new(t?.Err??e)(a.issues.map(s=>J(s,i,D())));throw wt(u,t?.callee),u}return a.value},jt=ze(L),Ie=e=>(r,n,o)=>{let t=o?{...o,async:!1}:{async:!1},i=r._zod.run({value:n,issues:[]},t);if(i instanceof Promise)throw new W;return i.issues.length?{success:!1,error:new(e??Be)(i.issues.map(a=>J(a,t,D())))}:{success:!0,data:i.value}},Xr=Ie(L),we=e=>async(r,n,o)=>{let t=o?Object.assign(o,{async:!0}):{async:!0},i=r._zod.run({value:n,issues:[]},t);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(a=>J(a,t,D())))}:{success:!0,data:i.value}},qr=we(L),Ot=e=>(r,n,o)=>{let t=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ke(e)(r,n,t)},Ds=Ot(L),Pt=e=>(r,n,o)=>ke(e)(r,n,o),Ts=Pt(L),Ut=e=>async(r,n,o)=>{let t=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return ze(e)(r,n,t)},Es=Ut(L),Nt=e=>async(r,n,o)=>ze(e)(r,n,o),As=Nt(L),Zt=e=>(r,n,o)=>{let t=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return Ie(e)(r,n,t)},Rs=Zt(L),Dt=e=>(r,n,o)=>Ie(e)(r,n,o),Ls=Dt(L),Tt=e=>async(r,n,o)=>{let t=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return we(e)(r,n,t)},Cs=Tt(L),Et=e=>async(r,n,o)=>we(e)(r,n,o),Vs=Et(L);var K={};pe(K,{base64:()=>mn,base64url:()=>At,bigint:()=>bn,boolean:()=>xn,browserEmail:()=>Xs,cidrv4:()=>ln,cidrv6:()=>dn,cuid:()=>Yr,cuid2:()=>Qr,date:()=>gn,datetime:()=>hn,domain:()=>Ys,duration:()=>nn,e164:()=>pn,email:()=>an,emoji:()=>un,extendedDuration:()=>Fs,guid:()=>on,hex:()=>Qs,hostname:()=>fn,html5Email:()=>Ks,idnEmail:()=>Ws,integer:()=>_n,ipv4:()=>cn,ipv6:()=>sn,ksuid:()=>tn,lowercase:()=>In,md5_base64:()=>el,md5_base64url:()=>tl,md5_hex:()=>Hs,nanoid:()=>rn,null:()=>kn,number:()=>yn,rfc5322Email:()=>Gs,sha1_base64:()=>nl,sha1_base64url:()=>il,sha1_hex:()=>rl,sha256_base64:()=>al,sha256_base64url:()=>ul,sha256_hex:()=>ol,sha384_base64:()=>sl,sha384_base64url:()=>ll,sha384_hex:()=>cl,sha512_base64:()=>ml,sha512_base64url:()=>fl,sha512_hex:()=>dl,string:()=>$n,time:()=>vn,ulid:()=>Hr,undefined:()=>zn,unicodeEmail:()=>Qa,uppercase:()=>wn,uuid:()=>ve,uuid4:()=>Js,uuid6:()=>Ms,uuid7:()=>Bs,xid:()=>en});var Yr=/^[cC][^\\s-]{8,}$/,Qr=/^[0-9a-z]+$/,Hr=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,en=/^[0-9a-vA-V]{20}$/,tn=/^[A-Za-z0-9]{27}$/,rn=/^[a-zA-Z0-9_-]{21}$/,nn=/^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/,Fs=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,on=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ve=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Js=ve(4),Ms=ve(6),Bs=ve(7),an=/^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_\'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/,Ks=/^[a-zA-Z0-9.!#$%&\'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gs=/^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,Qa=/^[^\\s@"]{1,64}@[^\\s@]{1,255}$/u,Ws=Qa,Xs=/^[a-zA-Z0-9.!#$%&\'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qs="^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$";function un(){return new RegExp(qs,"u")}var cn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ln=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/,dn=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mn=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,At=/^[A-Za-z0-9_-]*$/,fn=/^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/,Ys=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/,pn=/^\\+(?:[0-9]){6,14}[0-9]$/,Ha="(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))",gn=new RegExp(`^${Ha}$`);function eu(e){let r="(?:[01]\\\\d|2[0-3]):[0-5]\\\\d";return typeof e.precision=="number"?e.precision===-1?`${r}`:e.precision===0?`${r}:[0-5]\\\\d`:`${r}:[0-5]\\\\d\\\\.\\\\d{${e.precision}}`:`${r}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`}function vn(e){return new RegExp(`^${eu(e)}$`)}function hn(e){let r=eu({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)");let o=`${r}(?:${n.join("|")})`;return new RegExp(`^${Ha}T(?:${o})$`)}var $n=e=>{let r=e?`[\\\\s\\\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\\\s\\\\S]*";return new RegExp(`^${r}$`)},bn=/^-?\\d+n?$/,_n=/^-?\\d+$/,yn=/^-?\\d+(?:\\.\\d+)?/,xn=/^(?:true|false)$/i,kn=/^null$/i;var zn=/^undefined$/i;var In=/^[^A-Z]*$/,wn=/^[^a-z]*$/,Qs=/^[0-9a-fA-F]*$/;function We(e,r){return new RegExp(`^[A-Za-z0-9+/]{${e}}${r}$`)}function Xe(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var Hs=/^[0-9a-fA-F]{32}$/,el=We(22,"=="),tl=Xe(22),rl=/^[0-9a-fA-F]{40}$/,nl=We(27,"="),il=Xe(27),ol=/^[0-9a-fA-F]{64}$/,al=We(43,"="),ul=Xe(43),cl=/^[0-9a-fA-F]{96}$/,sl=We(64,""),ll=Xe(64),dl=/^[0-9a-fA-F]{128}$/,ml=We(86,"=="),fl=Xe(86);var Z=c("$ZodCheck",(e,r)=>{var n;e._zod??(e._zod={}),e._zod.def=r,(n=e._zod).onattach??(n.onattach=[])}),ru={number:"number",bigint:"bigint",object:"date"},Rt=c("$ZodCheckLessThan",(e,r)=>{Z.init(e,r);let n=ru[typeof r.value];e._zod.onattach.push(o=>{let t=o._zod.bag,i=(r.inclusive?t.maximum:t.exclusiveMaximum)??Number.POSITIVE_INFINITY;r.value<i&&(r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value<=r.value:o.value<r.value)||o.issues.push({origin:n,code:"too_big",maximum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),Lt=c("$ZodCheckGreaterThan",(e,r)=>{Z.init(e,r);let n=ru[typeof r.value];e._zod.onattach.push(o=>{let t=o._zod.bag,i=(r.inclusive?t.minimum:t.exclusiveMinimum)??Number.NEGATIVE_INFINITY;r.value>i&&(r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value)}),e._zod.check=o=>{(r.inclusive?o.value>=r.value:o.value>r.value)||o.issues.push({origin:n,code:"too_small",minimum:r.value,input:o.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),Sn=c("$ZodCheckMultipleOf",(e,r)=>{Z.init(e,r),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=r.value)}),e._zod.check=n=>{if(typeof n.value!=typeof r.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%r.value===BigInt(0):Cr(n.value,r.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:r.value,input:n.value,inst:e,continue:!r.abort})}}),jn=c("$ZodCheckNumberFormat",(e,r)=>{Z.init(e,r),r.format=r.format||"float64";let n=r.format?.includes("int"),o=n?"int":"number",[t,i]=Br[r.format];e._zod.onattach.push(a=>{let u=a._zod.bag;u.format=r.format,u.minimum=t,u.maximum=i,n&&(u.pattern=_n)}),e._zod.check=a=>{let u=a.value;if(n){if(!Number.isInteger(u)){a.issues.push({expected:o,format:r.format,code:"invalid_type",continue:!1,input:u,inst:e});return}if(!Number.isSafeInteger(u)){u>0?a.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort}):a.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!r.abort});return}}u<t&&a.issues.push({origin:"number",input:u,code:"too_small",minimum:t,inclusive:!0,inst:e,continue:!r.abort}),u>i&&a.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:e})}}),On=c("$ZodCheckBigIntFormat",(e,r)=>{Z.init(e,r);let[n,o]=Kr[r.format];e._zod.onattach.push(t=>{let i=t._zod.bag;i.format=r.format,i.minimum=n,i.maximum=o}),e._zod.check=t=>{let i=t.value;i<n&&t.issues.push({origin:"bigint",input:i,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!r.abort}),i>o&&t.issues.push({origin:"bigint",input:i,code:"too_big",maximum:o,inst:e})}}),Pn=c("$ZodCheckMaxSize",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.size!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<t&&(o._zod.bag.maximum=r.maximum)}),e._zod.check=o=>{let t=o.value;t.size<=r.maximum||o.issues.push({origin:Je(t),code:"too_big",maximum:r.maximum,inclusive:!0,input:t,inst:e,continue:!r.abort})}}),Un=c("$ZodCheckMinSize",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.size!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>t&&(o._zod.bag.minimum=r.minimum)}),e._zod.check=o=>{let t=o.value;t.size>=r.minimum||o.issues.push({origin:Je(t),code:"too_small",minimum:r.minimum,inclusive:!0,input:t,inst:e,continue:!r.abort})}}),Nn=c("$ZodCheckSizeEquals",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.size!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag;t.minimum=r.size,t.maximum=r.size,t.size=r.size}),e._zod.check=o=>{let t=o.value,i=t.size;if(i===r.size)return;let a=i>r.size;o.issues.push({origin:Je(t),...a?{code:"too_big",maximum:r.size}:{code:"too_small",minimum:r.size},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!r.abort})}}),Zn=c("$ZodCheckMaxLength",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.length!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<t&&(o._zod.bag.maximum=r.maximum)}),e._zod.check=o=>{let t=o.value;if(t.length<=r.maximum)return;let a=Me(t);o.issues.push({origin:a,code:"too_big",maximum:r.maximum,inclusive:!0,input:t,inst:e,continue:!r.abort})}}),Dn=c("$ZodCheckMinLength",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.length!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>t&&(o._zod.bag.minimum=r.minimum)}),e._zod.check=o=>{let t=o.value;if(t.length>=r.minimum)return;let a=Me(t);o.issues.push({origin:a,code:"too_small",minimum:r.minimum,inclusive:!0,input:t,inst:e,continue:!r.abort})}}),Tn=c("$ZodCheckLengthEquals",(e,r)=>{var n;Z.init(e,r),(n=e._zod.def).when??(n.when=o=>{let t=o.value;return!oe(t)&&t.length!==void 0}),e._zod.onattach.push(o=>{let t=o._zod.bag;t.minimum=r.length,t.maximum=r.length,t.length=r.length}),e._zod.check=o=>{let t=o.value,i=t.length;if(i===r.length)return;let a=Me(t),u=i>r.length;o.issues.push({origin:a,...u?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!r.abort})}}),Se=c("$ZodCheckStringFormat",(e,r)=>{var n,o;Z.init(e,r),e._zod.onattach.push(t=>{let i=t._zod.bag;i.format=r.format,r.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(r.pattern))}),r.pattern?(n=e._zod).check??(n.check=t=>{r.pattern.lastIndex=0,!r.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:r.format,input:t.value,...r.pattern?{pattern:r.pattern.toString()}:{},inst:e,continue:!r.abort})}):(o=e._zod).check??(o.check=()=>{})}),En=c("$ZodCheckRegex",(e,r)=>{Se.init(e,r),e._zod.check=n=>{r.pattern.lastIndex=0,!r.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:r.pattern.toString(),inst:e,continue:!r.abort})}}),An=c("$ZodCheckLowerCase",(e,r)=>{r.pattern??(r.pattern=In),Se.init(e,r)}),Rn=c("$ZodCheckUpperCase",(e,r)=>{r.pattern??(r.pattern=wn),Se.init(e,r)}),Ln=c("$ZodCheckIncludes",(e,r)=>{Z.init(e,r);let n=X(r.includes),o=new RegExp(typeof r.position=="number"?`^.{${r.position}}${n}`:n);r.pattern=o,e._zod.onattach.push(t=>{let i=t._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(o)}),e._zod.check=t=>{t.value.includes(r.includes,r.position)||t.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:r.includes,input:t.value,inst:e,continue:!r.abort})}}),Cn=c("$ZodCheckStartsWith",(e,r)=>{Z.init(e,r);let n=new RegExp(`^${X(r.prefix)}.*`);r.pattern??(r.pattern=n),e._zod.onattach.push(o=>{let t=o._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(r.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:r.prefix,input:o.value,inst:e,continue:!r.abort})}}),Vn=c("$ZodCheckEndsWith",(e,r)=>{Z.init(e,r);let n=new RegExp(`.*${X(r.suffix)}$`);r.pattern??(r.pattern=n),e._zod.onattach.push(o=>{let t=o._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(r.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:r.suffix,input:o.value,inst:e,continue:!r.abort})}});function tu(e,r,n){e.issues.length&&r.issues.push(...F(n,e.issues))}var Fn=c("$ZodCheckProperty",(e,r)=>{Z.init(e,r),e._zod.check=n=>{let o=r.schema._zod.run({value:n.value[r.property],issues:[]},{});if(o instanceof Promise)return o.then(t=>tu(t,n,r.property));tu(o,n,r.property)}}),Jn=c("$ZodCheckMimeType",(e,r)=>{Z.init(e,r);let n=new Set(r.mime);e._zod.onattach.push(o=>{o._zod.bag.mime=r.mime}),e._zod.check=o=>{n.has(o.value.type)||o.issues.push({code:"invalid_value",values:r.mime,input:o.value.type,inst:e,continue:!r.abort})}}),Mn=c("$ZodCheckOverwrite",(e,r)=>{Z.init(e,r),e._zod.check=n=>{n.value=r.tx(n.value)}});var qe=class{constructor(r=[]){this.content=[],this.indent=0,this&&(this.args=r)}indented(r){this.indent+=1,r(this),this.indent-=1}write(r){if(typeof r=="function"){r(this,{execution:"sync"}),r(this,{execution:"async"});return}let o=r.split(`\n`).filter(a=>a),t=Math.min(...o.map(a=>a.length-a.trimStart().length)),i=o.map(a=>a.slice(t)).map(a=>" ".repeat(this.indent*2)+a);for(let a of i)this.content.push(a)}compile(){let r=Function,n=this?.args,t=[...(this?.content??[""]).map(i=>`  ${i}`)];return new r(...n,t.join(`\n`))}};var Bn={major:4,minor:1,patch:12};var x=c("$ZodType",(e,r)=>{var n;e??(e={}),e._zod.def=r,e._zod.bag=e._zod.bag||{},e._zod.version=Bn;let o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(let t of o)for(let i of t._zod.onattach)i(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(a,u,s)=>{let m=se(a),f;for(let g of u){if(g._zod.def.when){if(!g._zod.def.when(a))continue}else if(m)continue;let y=a.issues.length,$=g._zod.check(a);if($ instanceof Promise&&s?.async===!1)throw new W;if(f||$ instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await $,a.issues.length!==y&&(m||(m=se(a,y)))});else{if(a.issues.length===y)continue;m||(m=se(a,y))}}return f?f.then(()=>a):a},i=(a,u,s)=>{if(se(a))return a.aborted=!0,a;let m=t(u,o,s);if(m instanceof Promise){if(s.async===!1)throw new W;return m.then(f=>e._zod.parse(f,s))}return e._zod.parse(m,s)};e._zod.run=(a,u)=>{if(u.skipChecks)return e._zod.parse(a,u);if(u.direction==="backward"){let m=e._zod.parse({value:a.value,issues:[]},{...u,skipChecks:!0});return m instanceof Promise?m.then(f=>i(f,a,u)):i(m,a,u)}let s=e._zod.parse(a,u);if(s instanceof Promise){if(u.async===!1)throw new W;return s.then(m=>t(m,o,u))}return t(s,o,u)}}e["~standard"]={validate:t=>{try{let i=Xr(e,t);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return qr(e,t).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),he=c("$ZodString",(e,r)=>{x.init(e,r),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??$n(e._zod.bag),e._zod.parse=(n,o)=>{if(r.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),O=c("$ZodStringFormat",(e,r)=>{Se.init(e,r),he.init(e,r)}),Gn=c("$ZodGUID",(e,r)=>{r.pattern??(r.pattern=on),O.init(e,r)}),Wn=c("$ZodUUID",(e,r)=>{if(r.version){let o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[r.version];if(o===void 0)throw new Error(`Invalid UUID version: "${r.version}"`);r.pattern??(r.pattern=ve(o))}else r.pattern??(r.pattern=ve());O.init(e,r)}),Xn=c("$ZodEmail",(e,r)=>{r.pattern??(r.pattern=an),O.init(e,r)}),qn=c("$ZodURL",(e,r)=>{O.init(e,r),e._zod.check=n=>{try{let o=n.value.trim(),t=new URL(o);r.hostname&&(r.hostname.lastIndex=0,r.hostname.test(t.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:fn.source,input:n.value,inst:e,continue:!r.abort})),r.protocol&&(r.protocol.lastIndex=0,r.protocol.test(t.protocol.endsWith(":")?t.protocol.slice(0,-1):t.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:r.protocol.source,input:n.value,inst:e,continue:!r.abort})),r.normalize?n.value=t.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!r.abort})}}}),Yn=c("$ZodEmoji",(e,r)=>{r.pattern??(r.pattern=un()),O.init(e,r)}),Qn=c("$ZodNanoID",(e,r)=>{r.pattern??(r.pattern=rn),O.init(e,r)}),Hn=c("$ZodCUID",(e,r)=>{r.pattern??(r.pattern=Yr),O.init(e,r)}),ei=c("$ZodCUID2",(e,r)=>{r.pattern??(r.pattern=Qr),O.init(e,r)}),ti=c("$ZodULID",(e,r)=>{r.pattern??(r.pattern=Hr),O.init(e,r)}),ri=c("$ZodXID",(e,r)=>{r.pattern??(r.pattern=en),O.init(e,r)}),ni=c("$ZodKSUID",(e,r)=>{r.pattern??(r.pattern=tn),O.init(e,r)}),ii=c("$ZodISODateTime",(e,r)=>{r.pattern??(r.pattern=hn(r)),O.init(e,r)}),oi=c("$ZodISODate",(e,r)=>{r.pattern??(r.pattern=gn),O.init(e,r)}),ai=c("$ZodISOTime",(e,r)=>{r.pattern??(r.pattern=vn(r)),O.init(e,r)}),ui=c("$ZodISODuration",(e,r)=>{r.pattern??(r.pattern=nn),O.init(e,r)}),ci=c("$ZodIPv4",(e,r)=>{r.pattern??(r.pattern=cn),O.init(e,r),e._zod.onattach.push(n=>{let o=n._zod.bag;o.format="ipv4"})}),si=c("$ZodIPv6",(e,r)=>{r.pattern??(r.pattern=sn),O.init(e,r),e._zod.onattach.push(n=>{let o=n._zod.bag;o.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!r.abort})}}}),li=c("$ZodCIDRv4",(e,r)=>{r.pattern??(r.pattern=ln),O.init(e,r)}),di=c("$ZodCIDRv6",(e,r)=>{r.pattern??(r.pattern=dn),O.init(e,r),e._zod.check=n=>{let o=n.value.split("/");try{if(o.length!==2)throw new Error;let[t,i]=o;if(!i)throw new Error;let a=Number(i);if(`${a}`!==i)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${t}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!r.abort})}}});function mi(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}var fi=c("$ZodBase64",(e,r)=>{r.pattern??(r.pattern=mn),O.init(e,r),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{mi(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!r.abort})}});function pu(e){if(!At.test(e))return!1;let r=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=r.padEnd(Math.ceil(r.length/4)*4,"=");return mi(n)}var pi=c("$ZodBase64URL",(e,r)=>{r.pattern??(r.pattern=At),O.init(e,r),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{pu(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!r.abort})}}),gi=c("$ZodE164",(e,r)=>{r.pattern??(r.pattern=pn),O.init(e,r)});function gu(e,r=null){try{let n=e.split(".");if(n.length!==3)return!1;let[o]=n;if(!o)return!1;let t=JSON.parse(atob(o));return!("typ"in t&&t?.typ!=="JWT"||!t.alg||r&&(!("alg"in t)||t.alg!==r))}catch{return!1}}var vi=c("$ZodJWT",(e,r)=>{O.init(e,r),e._zod.check=n=>{gu(n.value,r.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!r.abort})}}),hi=c("$ZodCustomStringFormat",(e,r)=>{O.init(e,r),e._zod.check=n=>{r.fn(n.value)||n.issues.push({code:"invalid_format",format:r.format,input:n.value,inst:e,continue:!r.abort})}}),Bt=c("$ZodNumber",(e,r)=>{x.init(e,r),e._zod.pattern=e._zod.bag.pattern??yn,e._zod.parse=(n,o)=>{if(r.coerce)try{n.value=Number(n.value)}catch{}let t=n.value;if(typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t))return n;let i=typeof t=="number"?Number.isNaN(t)?"NaN":Number.isFinite(t)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:t,inst:e,...i?{received:i}:{}}),n}}),$i=c("$ZodNumber",(e,r)=>{jn.init(e,r),Bt.init(e,r)}),Ye=c("$ZodBoolean",(e,r)=>{x.init(e,r),e._zod.pattern=xn,e._zod.parse=(n,o)=>{if(r.coerce)try{n.value=!!n.value}catch{}let t=n.value;return typeof t=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:t,inst:e}),n}}),Kt=c("$ZodBigInt",(e,r)=>{x.init(e,r),e._zod.pattern=bn,e._zod.parse=(n,o)=>{if(r.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:e}),n}}),bi=c("$ZodBigInt",(e,r)=>{On.init(e,r),Kt.init(e,r)}),_i=c("$ZodSymbol",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;return typeof t=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:t,inst:e}),n}}),yi=c("$ZodUndefined",(e,r)=>{x.init(e,r),e._zod.pattern=zn,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(n,o)=>{let t=n.value;return typeof t>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:t,inst:e}),n}}),xi=c("$ZodNull",(e,r)=>{x.init(e,r),e._zod.pattern=kn,e._zod.values=new Set([null]),e._zod.parse=(n,o)=>{let t=n.value;return t===null||n.issues.push({expected:"null",code:"invalid_type",input:t,inst:e}),n}}),ki=c("$ZodAny",(e,r)=>{x.init(e,r),e._zod.parse=n=>n}),zi=c("$ZodUnknown",(e,r)=>{x.init(e,r),e._zod.parse=n=>n}),Ii=c("$ZodNever",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)}),wi=c("$ZodVoid",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;return typeof t>"u"||n.issues.push({expected:"void",code:"invalid_type",input:t,inst:e}),n}}),Si=c("$ZodDate",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{if(r.coerce)try{n.value=new Date(n.value)}catch{}let t=n.value,i=t instanceof Date;return i&&!Number.isNaN(t.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:t,...i?{received:"Invalid Date"}:{},inst:e}),n}});function iu(e,r,n){e.issues.length&&r.issues.push(...F(n,e.issues)),r.value[n]=e.value}var ji=c("$ZodArray",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;if(!Array.isArray(t))return n.issues.push({expected:"array",code:"invalid_type",input:t,inst:e}),n;n.value=Array(t.length);let i=[];for(let a=0;a<t.length;a++){let u=t[a],s=r.element._zod.run({value:u,issues:[]},o);s instanceof Promise?i.push(s.then(m=>iu(m,n,a))):iu(s,n,a)}return i.length?Promise.all(i).then(()=>n):n}});function Mt(e,r,n,o){e.issues.length&&r.issues.push(...F(n,e.issues)),e.value===void 0?n in o&&(r.value[n]=void 0):r.value[n]=e.value}function vu(e){let r=Object.keys(e.shape);for(let o of r)if(!e.shape?.[o]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);let n=Mr(e.shape);return{...e,keys:r,keySet:new Set(r),numKeys:r.length,optionalKeys:new Set(n)}}function hu(e,r,n,o,t,i){let a=[],u=t.keySet,s=t.catchall._zod,m=s.def.type;for(let f of Object.keys(r)){if(u.has(f))continue;if(m==="never"){a.push(f);continue}let g=s.run({value:r[f],issues:[]},o);g instanceof Promise?e.push(g.then(y=>Mt(y,n,f,r))):Mt(g,n,f,r)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:r,inst:i}),e.length?Promise.all(e).then(()=>n):n}var $u=c("$ZodObject",(e,r)=>{if(x.init(e,r),!Object.getOwnPropertyDescriptor(r,"shape")?.get){let u=r.shape;Object.defineProperty(r,"shape",{get:()=>{let s={...u};return Object.defineProperty(r,"shape",{value:s}),s}})}let o=ye(()=>vu(r));I(e._zod,"propValues",()=>{let u=r.shape,s={};for(let m in u){let f=u[m]._zod;if(f.values){s[m]??(s[m]=new Set);for(let g of f.values)s[m].add(g)}}return s});let t=ge,i=r.catchall,a;e._zod.parse=(u,s)=>{a??(a=o.value);let m=u.value;if(!t(m))return u.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),u;u.value={};let f=[],g=a.shape;for(let y of a.keys){let d=g[y]._zod.run({value:m[y],issues:[]},s);d instanceof Promise?f.push(d.then(b=>Mt(b,u,y,m))):Mt(d,u,y,m)}return i?hu(f,m,u,s,o.value,e):f.length?Promise.all(f).then(()=>u):u}}),Oi=c("$ZodObjectJIT",(e,r)=>{$u.init(e,r);let n=e._zod.parse,o=ye(()=>vu(r)),t=y=>{let $=new qe(["shape","payload","ctx"]),d=o.value,b=z=>{let j=It(z);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};$.write("const input = payload.value;");let _=Object.create(null),S=0;for(let z of d.keys)_[z]=`key_${S++}`;$.write("const newResult = {};");for(let z of d.keys){let j=_[z],A=It(z);$.write(`const ${j} = ${b(z)};`),$.write(`\n        if (${j}.issues.length) {\n          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${A}, ...iss.path] : [${A}]\n          })));\n        }\n        \n        \n        if (${j}.value === undefined) {\n          if (${A} in input) {\n            newResult[${A}] = undefined;\n          }\n        } else {\n          newResult[${A}] = ${j}.value;\n        }\n        \n      `)}$.write("payload.value = newResult;"),$.write("return payload;");let w=$.compile();return(z,j)=>w(y,z,j)},i,a=ge,u=!Re.jitless,m=u&&Vr.value,f=r.catchall,g;e._zod.parse=(y,$)=>{g??(g=o.value);let d=y.value;return a(d)?u&&m&&$?.async===!1&&$.jitless!==!0?(i||(i=t(r.shape)),y=i(y,$),f?hu([],d,y,$,g,e):y):n(y,$):(y.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),y)}});function ou(e,r,n,o){for(let i of e)if(i.issues.length===0)return r.value=i.value,r;let t=e.filter(i=>!se(i));return t.length===1?(r.value=t[0].value,t[0]):(r.issues.push({code:"invalid_union",input:r.value,inst:n,errors:e.map(i=>i.issues.map(a=>J(a,o,D())))}),r)}var Gt=c("$ZodUnion",(e,r)=>{x.init(e,r),I(e._zod,"optin",()=>r.options.some(t=>t._zod.optin==="optional")?"optional":void 0),I(e._zod,"optout",()=>r.options.some(t=>t._zod.optout==="optional")?"optional":void 0),I(e._zod,"values",()=>{if(r.options.every(t=>t._zod.values))return new Set(r.options.flatMap(t=>Array.from(t._zod.values)))}),I(e._zod,"pattern",()=>{if(r.options.every(t=>t._zod.pattern)){let t=r.options.map(i=>i._zod.pattern);return new RegExp(`^(${t.map(i=>Ve(i.source)).join("|")})$`)}});let n=r.options.length===1,o=r.options[0]._zod.run;e._zod.parse=(t,i)=>{if(n)return o(t,i);let a=!1,u=[];for(let s of r.options){let m=s._zod.run({value:t.value,issues:[]},i);if(m instanceof Promise)u.push(m),a=!0;else{if(m.issues.length===0)return m;u.push(m)}}return a?Promise.all(u).then(s=>ou(s,t,e,i)):ou(u,t,e,i)}}),Pi=c("$ZodDiscriminatedUnion",(e,r)=>{Gt.init(e,r);let n=e._zod.parse;I(e._zod,"propValues",()=>{let t={};for(let i of r.options){let a=i._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${r.options.indexOf(i)}"`);for(let[u,s]of Object.entries(a)){t[u]||(t[u]=new Set);for(let m of s)t[u].add(m)}}return t});let o=ye(()=>{let t=r.options,i=new Map;for(let a of t){let u=a._zod.propValues?.[r.discriminator];if(!u||u.size===0)throw new Error(`Invalid discriminated union option at index "${r.options.indexOf(a)}"`);for(let s of u){if(i.has(s))throw new Error(`Duplicate discriminator value "${String(s)}"`);i.set(s,a)}}return i});e._zod.parse=(t,i)=>{let a=t.value;if(!ge(a))return t.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),t;let u=o.value.get(a?.[r.discriminator]);return u?u._zod.run(t,i):r.unionFallback?n(t,i):(t.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:r.discriminator,input:a,path:[r.discriminator],inst:e}),t)}}),Ui=c("$ZodIntersection",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value,i=r.left._zod.run({value:t,issues:[]},o),a=r.right._zod.run({value:t,issues:[]},o);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([s,m])=>au(n,s,m)):au(n,i,a)}});function Kn(e,r){if(e===r)return{valid:!0,data:e};if(e instanceof Date&&r instanceof Date&&+e==+r)return{valid:!0,data:e};if(ce(e)&&ce(r)){let n=Object.keys(r),o=Object.keys(e).filter(i=>n.indexOf(i)!==-1),t={...e,...r};for(let i of o){let a=Kn(e[i],r[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};t[i]=a.data}return{valid:!0,data:t}}if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let o=0;o<e.length;o++){let t=e[o],i=r[o],a=Kn(t,i);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function au(e,r,n){if(r.issues.length&&e.issues.push(...r.issues),n.issues.length&&e.issues.push(...n.issues),se(e))return e;let o=Kn(r.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}var Wt=c("$ZodTuple",(e,r)=>{x.init(e,r);let n=r.items,o=n.length-[...n].reverse().findIndex(t=>t._zod.optin!=="optional");e._zod.parse=(t,i)=>{let a=t.value;if(!Array.isArray(a))return t.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),t;t.value=[];let u=[];if(!r.rest){let m=a.length>n.length,f=a.length<o-1;if(m||f)return t.issues.push({...m?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},input:a,inst:e,origin:"array"}),t}let s=-1;for(let m of n){if(s++,s>=a.length&&s>=o)continue;let f=m._zod.run({value:a[s],issues:[]},i);f instanceof Promise?u.push(f.then(g=>Ct(g,t,s))):Ct(f,t,s)}if(r.rest){let m=a.slice(n.length);for(let f of m){s++;let g=r.rest._zod.run({value:f,issues:[]},i);g instanceof Promise?u.push(g.then(y=>Ct(y,t,s))):Ct(g,t,s)}}return u.length?Promise.all(u).then(()=>t):t}});function Ct(e,r,n){e.issues.length&&r.issues.push(...F(n,e.issues)),r.value[n]=e.value}var Ni=c("$ZodRecord",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;if(!ce(t))return n.issues.push({expected:"record",code:"invalid_type",input:t,inst:e}),n;let i=[];if(r.keyType._zod.values){let a=r.keyType._zod.values;n.value={};for(let s of a)if(typeof s=="string"||typeof s=="number"||typeof s=="symbol"){let m=r.valueType._zod.run({value:t[s],issues:[]},o);m instanceof Promise?i.push(m.then(f=>{f.issues.length&&n.issues.push(...F(s,f.issues)),n.value[s]=f.value})):(m.issues.length&&n.issues.push(...F(s,m.issues)),n.value[s]=m.value)}let u;for(let s in t)a.has(s)||(u=u??[],u.push(s));u&&u.length>0&&n.issues.push({code:"unrecognized_keys",input:t,inst:e,keys:u})}else{n.value={};for(let a of Reflect.ownKeys(t)){if(a==="__proto__")continue;let u=r.keyType._zod.run({value:a,issues:[]},o);if(u instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(u.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:u.issues.map(m=>J(m,o,D())),input:a,path:[a],inst:e}),n.value[u.value]=u.value;continue}let s=r.valueType._zod.run({value:t[a],issues:[]},o);s instanceof Promise?i.push(s.then(m=>{m.issues.length&&n.issues.push(...F(a,m.issues)),n.value[u.value]=m.value})):(s.issues.length&&n.issues.push(...F(a,s.issues)),n.value[u.value]=s.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Zi=c("$ZodMap",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;if(!(t instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:t,inst:e}),n;let i=[];n.value=new Map;for(let[a,u]of t){let s=r.keyType._zod.run({value:a,issues:[]},o),m=r.valueType._zod.run({value:u,issues:[]},o);s instanceof Promise||m instanceof Promise?i.push(Promise.all([s,m]).then(([f,g])=>{uu(f,g,n,a,t,e,o)})):uu(s,m,n,a,t,e,o)}return i.length?Promise.all(i).then(()=>n):n}});function uu(e,r,n,o,t,i,a){e.issues.length&&(Fe.has(typeof o)?n.issues.push(...F(o,e.issues)):n.issues.push({code:"invalid_key",origin:"map",input:t,inst:i,issues:e.issues.map(u=>J(u,a,D()))})),r.issues.length&&(Fe.has(typeof o)?n.issues.push(...F(o,r.issues)):n.issues.push({origin:"map",code:"invalid_element",input:t,inst:i,key:o,issues:r.issues.map(u=>J(u,a,D()))})),n.value.set(e.value,r.value)}var Di=c("$ZodSet",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;if(!(t instanceof Set))return n.issues.push({input:t,inst:e,expected:"set",code:"invalid_type"}),n;let i=[];n.value=new Set;for(let a of t){let u=r.valueType._zod.run({value:a,issues:[]},o);u instanceof Promise?i.push(u.then(s=>cu(s,n))):cu(u,n)}return i.length?Promise.all(i).then(()=>n):n}});function cu(e,r){e.issues.length&&r.issues.push(...e.issues),r.value.add(e.value)}var Ti=c("$ZodEnum",(e,r)=>{x.init(e,r);let n=Ce(r.entries),o=new Set(n);e._zod.values=o,e._zod.pattern=new RegExp(`^(${n.filter(t=>Fe.has(typeof t)).map(t=>typeof t=="string"?X(t):t.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return o.has(a)||t.issues.push({code:"invalid_value",values:n,input:a,inst:e}),t}}),Ei=c("$ZodLiteral",(e,r)=>{if(x.init(e,r),r.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(r.values),e._zod.pattern=new RegExp(`^(${r.values.map(n=>typeof n=="string"?X(n):n?X(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,o)=>{let t=n.value;return e._zod.values.has(t)||n.issues.push({code:"invalid_value",values:r.values,input:t,inst:e}),n}}),Ai=c("$ZodFile",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{let t=n.value;return t instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:t,inst:e}),n}}),Ri=c("$ZodTransform",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ie(e.constructor.name);let t=r.transform(n.value,n);if(o.async)return(t instanceof Promise?t:Promise.resolve(t)).then(a=>(n.value=a,n));if(t instanceof Promise)throw new W;return n.value=t,n}});function su(e,r){return e.issues.length&&r===void 0?{issues:[],value:void 0}:e}var Li=c("$ZodOptional",(e,r)=>{x.init(e,r),e._zod.optin="optional",e._zod.optout="optional",I(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,void 0]):void 0),I(e._zod,"pattern",()=>{let n=r.innerType._zod.pattern;return n?new RegExp(`^(${Ve(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(r.innerType._zod.optin==="optional"){let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(i=>su(i,n.value)):su(t,n.value)}return n.value===void 0?n:r.innerType._zod.run(n,o)}}),Ci=c("$ZodNullable",(e,r)=>{x.init(e,r),I(e._zod,"optin",()=>r.innerType._zod.optin),I(e._zod,"optout",()=>r.innerType._zod.optout),I(e._zod,"pattern",()=>{let n=r.innerType._zod.pattern;return n?new RegExp(`^(${Ve(n.source)}|null)$`):void 0}),I(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:r.innerType._zod.run(n,o)}),Vi=c("$ZodDefault",(e,r)=>{x.init(e,r),e._zod.optin="optional",I(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return r.innerType._zod.run(n,o);if(n.value===void 0)return n.value=r.defaultValue,n;let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(i=>lu(i,r)):lu(t,r)}});function lu(e,r){return e.value===void 0&&(e.value=r.defaultValue),e}var Fi=c("$ZodPrefault",(e,r)=>{x.init(e,r),e._zod.optin="optional",I(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=r.defaultValue),r.innerType._zod.run(n,o))}),Ji=c("$ZodNonOptional",(e,r)=>{x.init(e,r),I(e._zod,"values",()=>{let n=r.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(i=>du(i,e)):du(t,e)}});function du(e,r){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:r}),e}var Mi=c("$ZodSuccess",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ie("ZodSuccess");let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(i=>(n.value=i.issues.length===0,n)):(n.value=t.issues.length===0,n)}}),Bi=c("$ZodCatch",(e,r)=>{x.init(e,r),I(e._zod,"optin",()=>r.innerType._zod.optin),I(e._zod,"optout",()=>r.innerType._zod.optout),I(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return r.innerType._zod.run(n,o);let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(i=>(n.value=i.value,i.issues.length&&(n.value=r.catchValue({...n,error:{issues:i.issues.map(a=>J(a,o,D()))},input:n.value}),n.issues=[]),n)):(n.value=t.value,t.issues.length&&(n.value=r.catchValue({...n,error:{issues:t.issues.map(i=>J(i,o,D()))},input:n.value}),n.issues=[]),n)}}),Ki=c("$ZodNaN",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:e,expected:"nan",code:"invalid_type"}),n)}),Gi=c("$ZodPipe",(e,r)=>{x.init(e,r),I(e._zod,"values",()=>r.in._zod.values),I(e._zod,"optin",()=>r.in._zod.optin),I(e._zod,"optout",()=>r.out._zod.optout),I(e._zod,"propValues",()=>r.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){let i=r.out._zod.run(n,o);return i instanceof Promise?i.then(a=>Vt(a,r.in,o)):Vt(i,r.in,o)}let t=r.in._zod.run(n,o);return t instanceof Promise?t.then(i=>Vt(i,r.out,o)):Vt(t,r.out,o)}});function Vt(e,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:e.value,issues:e.issues},n)}var Qe=c("$ZodCodec",(e,r)=>{x.init(e,r),I(e._zod,"values",()=>r.in._zod.values),I(e._zod,"optin",()=>r.in._zod.optin),I(e._zod,"optout",()=>r.out._zod.optout),I(e._zod,"propValues",()=>r.in._zod.propValues),e._zod.parse=(n,o)=>{if((o.direction||"forward")==="forward"){let i=r.in._zod.run(n,o);return i instanceof Promise?i.then(a=>Ft(a,r,o)):Ft(i,r,o)}else{let i=r.out._zod.run(n,o);return i instanceof Promise?i.then(a=>Ft(a,r,o)):Ft(i,r,o)}}});function Ft(e,r,n){if(e.issues.length)return e.aborted=!0,e;if((n.direction||"forward")==="forward"){let t=r.transform(e.value,e);return t instanceof Promise?t.then(i=>Jt(e,i,r.out,n)):Jt(e,t,r.out,n)}else{let t=r.reverseTransform(e.value,e);return t instanceof Promise?t.then(i=>Jt(e,i,r.in,n)):Jt(e,t,r.in,n)}}function Jt(e,r,n,o){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:r,issues:e.issues},o)}var Wi=c("$ZodReadonly",(e,r)=>{x.init(e,r),I(e._zod,"propValues",()=>r.innerType._zod.propValues),I(e._zod,"values",()=>r.innerType._zod.values),I(e._zod,"optin",()=>r.innerType._zod.optin),I(e._zod,"optout",()=>r.innerType._zod.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return r.innerType._zod.run(n,o);let t=r.innerType._zod.run(n,o);return t instanceof Promise?t.then(mu):mu(t)}});function mu(e){return e.value=Object.freeze(e.value),e}var Xi=c("$ZodTemplateLiteral",(e,r)=>{x.init(e,r);let n=[];for(let o of r.parts)if(typeof o=="object"&&o!==null){if(!o._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...o._zod.traits].shift()}`);let t=o._zod.pattern instanceof RegExp?o._zod.pattern.source:o._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${o._zod.traits}`);let i=t.startsWith("^")?1:0,a=t.endsWith("$")?t.length-1:t.length;n.push(t.slice(i,a))}else if(o===null||Jr.has(typeof o))n.push(X(`${o}`));else throw new Error(`Invalid template literal part: ${o}`);e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(o,t)=>typeof o.value!="string"?(o.issues.push({input:o.value,inst:e,expected:"template_literal",code:"invalid_type"}),o):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(o.value)||o.issues.push({input:o.value,inst:e,code:"invalid_format",format:r.format??"template_literal",pattern:e._zod.pattern.source}),o)}),qi=c("$ZodFunction",(e,r)=>(x.init(e,r),e._def=r,e._zod.def=r,e.implement=n=>{if(typeof n!="function")throw new Error("implement() must be called with a function");return function(...o){let t=e._def.input?St(e._def.input,o):o,i=Reflect.apply(n,this,t);return e._def.output?St(e._def.output,i):i}},e.implementAsync=n=>{if(typeof n!="function")throw new Error("implementAsync() must be called with a function");return async function(...o){let t=e._def.input?await jt(e._def.input,o):o,i=await Reflect.apply(n,this,t);return e._def.output?await jt(e._def.output,i):i}},e._zod.parse=(n,o)=>typeof n.value!="function"?(n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:e}),n):(e._def.output&&e._def.output._zod.def.type==="promise"?n.value=e.implementAsync(n.value):n.value=e.implement(n.value),n),e.input=(...n)=>{let o=e.constructor;return Array.isArray(n[0])?new o({type:"function",input:new Wt({type:"tuple",items:n[0],rest:n[1]}),output:e._def.output}):new o({type:"function",input:n[0],output:e._def.output})},e.output=n=>{let o=e.constructor;return new o({type:"function",input:e._def.input,output:n})},e)),Yi=c("$ZodPromise",(e,r)=>{x.init(e,r),e._zod.parse=(n,o)=>Promise.resolve(n.value).then(t=>r.innerType._zod.run({value:t,issues:[]},o))}),Qi=c("$ZodLazy",(e,r)=>{x.init(e,r),I(e._zod,"innerType",()=>r.getter()),I(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),I(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),I(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),I(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(n,o)=>e._zod.innerType._zod.run(n,o)}),Hi=c("$ZodCustom",(e,r)=>{Z.init(e,r),x.init(e,r),e._zod.parse=(n,o)=>n,e._zod.check=n=>{let o=n.value,t=r.fn(o);if(t instanceof Promise)return t.then(i=>fu(i,n,o,e));fu(t,n,o,e)}});function fu(e,r,n,o){if(!e){let t={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(t.params=o._zod.def.params),r.issues.push(xe(t))}}var tt={};pe(tt,{ar:()=>bu,az:()=>_u,be:()=>xu,bg:()=>ku,ca:()=>zu,cs:()=>Iu,da:()=>wu,de:()=>Su,en:()=>Xt,eo:()=>ju,es:()=>Ou,fa:()=>Pu,fi:()=>Uu,fr:()=>Nu,frCA:()=>Zu,he:()=>Du,hu:()=>Tu,id:()=>Eu,is:()=>Au,it:()=>Ru,ja:()=>Lu,ka:()=>Cu,kh:()=>Vu,km:()=>qt,ko:()=>Fu,lt:()=>Mu,mk:()=>Bu,ms:()=>Ku,nl:()=>Gu,no:()=>Wu,ota:()=>Xu,pl:()=>Yu,ps:()=>qu,pt:()=>Qu,ru:()=>ec,sl:()=>tc,sv:()=>rc,ta:()=>nc,th:()=>ic,tr:()=>oc,ua:()=>ac,uk:()=>Yt,ur:()=>uc,vi:()=>cc,yo:()=>dc,zhCN:()=>sc,zhTW:()=>lc});var gl=()=>{let e={string:{unit:"\\u062D\\u0631\\u0641",verb:"\\u0623\\u0646 \\u064A\\u062D\\u0648\\u064A"},file:{unit:"\\u0628\\u0627\\u064A\\u062A",verb:"\\u0623\\u0646 \\u064A\\u062D\\u0648\\u064A"},array:{unit:"\\u0639\\u0646\\u0635\\u0631",verb:"\\u0623\\u0646 \\u064A\\u062D\\u0648\\u064A"},set:{unit:"\\u0639\\u0646\\u0635\\u0631",verb:"\\u0623\\u0646 \\u064A\\u062D\\u0648\\u064A"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0645\\u062F\\u062E\\u0644",email:"\\u0628\\u0631\\u064A\\u062F \\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A",url:"\\u0631\\u0627\\u0628\\u0637",emoji:"\\u0625\\u064A\\u0645\\u0648\\u062C\\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0648\\u0648\\u0642\\u062A \\u0628\\u0645\\u0639\\u064A\\u0627\\u0631 ISO",date:"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0628\\u0645\\u0639\\u064A\\u0627\\u0631 ISO",time:"\\u0648\\u0642\\u062A \\u0628\\u0645\\u0639\\u064A\\u0627\\u0631 ISO",duration:"\\u0645\\u062F\\u0629 \\u0628\\u0645\\u0639\\u064A\\u0627\\u0631 ISO",ipv4:"\\u0639\\u0646\\u0648\\u0627\\u0646 IPv4",ipv6:"\\u0639\\u0646\\u0648\\u0627\\u0646 IPv6",cidrv4:"\\u0645\\u062F\\u0649 \\u0639\\u0646\\u0627\\u0648\\u064A\\u0646 \\u0628\\u0635\\u064A\\u063A\\u0629 IPv4",cidrv6:"\\u0645\\u062F\\u0649 \\u0639\\u0646\\u0627\\u0648\\u064A\\u0646 \\u0628\\u0635\\u064A\\u063A\\u0629 IPv6",base64:"\\u0646\\u064E\\u0635 \\u0628\\u062A\\u0631\\u0645\\u064A\\u0632 base64-encoded",base64url:"\\u0646\\u064E\\u0635 \\u0628\\u062A\\u0631\\u0645\\u064A\\u0632 base64url-encoded",json_string:"\\u0646\\u064E\\u0635 \\u0639\\u0644\\u0649 \\u0647\\u064A\\u0626\\u0629 JSON",e164:"\\u0631\\u0642\\u0645 \\u0647\\u0627\\u062A\\u0641 \\u0628\\u0645\\u0639\\u064A\\u0627\\u0631 E.164",jwt:"JWT",template_literal:"\\u0645\\u062F\\u062E\\u0644"};return t=>{switch(t.code){case"invalid_type":return`\\u0645\\u062F\\u062E\\u0644\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644\\u0629: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0625\\u062F\\u062E\\u0627\\u0644 ${t.expected}\\u060C \\u0648\\u0644\\u0643\\u0646 \\u062A\\u0645 \\u0625\\u062F\\u062E\\u0627\\u0644 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u0645\\u062F\\u062E\\u0644\\u0627\\u062A \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644\\u0629: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0625\\u062F\\u062E\\u0627\\u0644 ${p(t.values[0])}`:`\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062A\\u0648\\u0642\\u0639 \\u0627\\u0646\\u062A\\u0642\\u0627\\u0621 \\u0623\\u062D\\u062F \\u0647\\u0630\\u0647 \\u0627\\u0644\\u062E\\u064A\\u0627\\u0631\\u0627\\u062A: ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?` \\u0623\\u0643\\u0628\\u0631 \\u0645\\u0646 \\u0627\\u0644\\u0644\\u0627\\u0632\\u0645: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 ${t.origin??"\\u0627\\u0644\\u0642\\u064A\\u0645\\u0629"} ${i} ${t.maximum.toString()} ${a.unit??"\\u0639\\u0646\\u0635\\u0631"}`:`\\u0623\\u0643\\u0628\\u0631 \\u0645\\u0646 \\u0627\\u0644\\u0644\\u0627\\u0632\\u0645: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0623\\u0646 \\u062A\\u0643\\u0648\\u0646 ${t.origin??"\\u0627\\u0644\\u0642\\u064A\\u0645\\u0629"} ${i} ${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u0623\\u0635\\u063A\\u0631 \\u0645\\u0646 \\u0627\\u0644\\u0644\\u0627\\u0632\\u0645: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0644\\u0640 ${t.origin} \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 ${i} ${t.minimum.toString()} ${a.unit}`:`\\u0623\\u0635\\u063A\\u0631 \\u0645\\u0646 \\u0627\\u0644\\u0644\\u0627\\u0632\\u0645: \\u064A\\u0641\\u062A\\u0631\\u0636 \\u0644\\u0640 ${t.origin} \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 ${i} ${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u0646\\u064E\\u0635 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0628\\u062F\\u0623 \\u0628\\u0640 "${t.prefix}"`:i.format==="ends_with"?`\\u0646\\u064E\\u0635 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0646\\u062A\\u0647\\u064A \\u0628\\u0640 "${i.suffix}"`:i.format==="includes"?`\\u0646\\u064E\\u0635 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u062A\\u0636\\u0645\\u0651\\u064E\\u0646 "${i.includes}"`:i.format==="regex"?`\\u0646\\u064E\\u0635 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0637\\u0627\\u0628\\u0642 \\u0627\\u0644\\u0646\\u0645\\u0637 ${i.pattern}`:`${o[i.format]??t.format} \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644`}case"not_multiple_of":return`\\u0631\\u0642\\u0645 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644: \\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 \\u0645\\u0646 \\u0645\\u0636\\u0627\\u0639\\u0641\\u0627\\u062A ${t.divisor}`;case"unrecognized_keys":return`\\u0645\\u0639\\u0631\\u0641${t.keys.length>1?"\\u0627\\u062A":""} \\u063A\\u0631\\u064A\\u0628${t.keys.length>1?"\\u0629":""}: ${l(t.keys,"\\u060C ")}`;case"invalid_key":return`\\u0645\\u0639\\u0631\\u0641 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644 \\u0641\\u064A ${t.origin}`;case"invalid_union":return"\\u0645\\u062F\\u062E\\u0644 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644";case"invalid_element":return`\\u0645\\u062F\\u062E\\u0644 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644 \\u0641\\u064A ${t.origin}`;default:return"\\u0645\\u062F\\u062E\\u0644 \\u063A\\u064A\\u0631 \\u0645\\u0642\\u0628\\u0648\\u0644"}}};function bu(){return{localeError:gl()}}var vl=()=>{let e={string:{unit:"simvol",verb:"olmal\\u0131d\\u0131r"},file:{unit:"bayt",verb:"olmal\\u0131d\\u0131r"},array:{unit:"element",verb:"olmal\\u0131d\\u0131r"},set:{unit:"element",verb:"olmal\\u0131d\\u0131r"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`Yanl\\u0131\\u015F d\\u0259y\\u0259r: g\\xF6zl\\u0259nil\\u0259n ${t.expected}, daxil olan ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Yanl\\u0131\\u015F d\\u0259y\\u0259r: g\\xF6zl\\u0259nil\\u0259n ${p(t.values[0])}`:`Yanl\\u0131\\u015F se\\xE7im: a\\u015Fa\\u011F\\u0131dak\\u0131lardan biri olmal\\u0131d\\u0131r: ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\xC7ox b\\xF6y\\xFCk: g\\xF6zl\\u0259nil\\u0259n ${t.origin??"d\\u0259y\\u0259r"} ${i}${t.maximum.toString()} ${a.unit??"element"}`:`\\xC7ox b\\xF6y\\xFCk: g\\xF6zl\\u0259nil\\u0259n ${t.origin??"d\\u0259y\\u0259r"} ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\xC7ox ki\\xE7ik: g\\xF6zl\\u0259nil\\u0259n ${t.origin} ${i}${t.minimum.toString()} ${a.unit}`:`\\xC7ox ki\\xE7ik: g\\xF6zl\\u0259nil\\u0259n ${t.origin} ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Yanl\\u0131\\u015F m\\u0259tn: "${i.prefix}" il\\u0259 ba\\u015Flamal\\u0131d\\u0131r`:i.format==="ends_with"?`Yanl\\u0131\\u015F m\\u0259tn: "${i.suffix}" il\\u0259 bitm\\u0259lidir`:i.format==="includes"?`Yanl\\u0131\\u015F m\\u0259tn: "${i.includes}" daxil olmal\\u0131d\\u0131r`:i.format==="regex"?`Yanl\\u0131\\u015F m\\u0259tn: ${i.pattern} \\u015Fablonuna uy\\u011Fun olmal\\u0131d\\u0131r`:`Yanl\\u0131\\u015F ${o[i.format]??t.format}`}case"not_multiple_of":return`Yanl\\u0131\\u015F \\u0259d\\u0259d: ${t.divisor} il\\u0259 b\\xF6l\\xFCn\\u0259 bil\\u0259n olmal\\u0131d\\u0131r`;case"unrecognized_keys":return`Tan\\u0131nmayan a\\xE7ar${t.keys.length>1?"lar":""}: ${l(t.keys,", ")}`;case"invalid_key":return`${t.origin} daxilind\\u0259 yanl\\u0131\\u015F a\\xE7ar`;case"invalid_union":return"Yanl\\u0131\\u015F d\\u0259y\\u0259r";case"invalid_element":return`${t.origin} daxilind\\u0259 yanl\\u0131\\u015F d\\u0259y\\u0259r`;default:return"Yanl\\u0131\\u015F d\\u0259y\\u0259r"}}};function _u(){return{localeError:vl()}}function yu(e,r,n,o){let t=Math.abs(e),i=t%10,a=t%100;return a>=11&&a<=19?o:i===1?r:i>=2&&i<=4?n:o}var hl=()=>{let e={string:{unit:{one:"\\u0441\\u0456\\u043C\\u0432\\u0430\\u043B",few:"\\u0441\\u0456\\u043C\\u0432\\u0430\\u043B\\u044B",many:"\\u0441\\u0456\\u043C\\u0432\\u0430\\u043B\\u0430\\u045E"},verb:"\\u043C\\u0435\\u0446\\u044C"},array:{unit:{one:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442",few:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u044B",many:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430\\u045E"},verb:"\\u043C\\u0435\\u0446\\u044C"},set:{unit:{one:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442",few:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u044B",many:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430\\u045E"},verb:"\\u043C\\u0435\\u0446\\u044C"},file:{unit:{one:"\\u0431\\u0430\\u0439\\u0442",few:"\\u0431\\u0430\\u0439\\u0442\\u044B",many:"\\u0431\\u0430\\u0439\\u0442\\u0430\\u045E"},verb:"\\u043C\\u0435\\u0446\\u044C"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u043B\\u0456\\u043A";case"object":{if(Array.isArray(t))return"\\u043C\\u0430\\u0441\\u0456\\u045E";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0443\\u0432\\u043E\\u0434",email:"email \\u0430\\u0434\\u0440\\u0430\\u0441",url:"URL",emoji:"\\u044D\\u043C\\u043E\\u0434\\u0437\\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u0434\\u0430\\u0442\\u0430 \\u0456 \\u0447\\u0430\\u0441",date:"ISO \\u0434\\u0430\\u0442\\u0430",time:"ISO \\u0447\\u0430\\u0441",duration:"ISO \\u043F\\u0440\\u0430\\u0446\\u044F\\u0433\\u043B\\u0430\\u0441\\u0446\\u044C",ipv4:"IPv4 \\u0430\\u0434\\u0440\\u0430\\u0441",ipv6:"IPv6 \\u0430\\u0434\\u0440\\u0430\\u0441",cidrv4:"IPv4 \\u0434\\u044B\\u044F\\u043F\\u0430\\u0437\\u043E\\u043D",cidrv6:"IPv6 \\u0434\\u044B\\u044F\\u043F\\u0430\\u0437\\u043E\\u043D",base64:"\\u0440\\u0430\\u0434\\u043E\\u043A \\u0443 \\u0444\\u0430\\u0440\\u043C\\u0430\\u0446\\u0435 base64",base64url:"\\u0440\\u0430\\u0434\\u043E\\u043A \\u0443 \\u0444\\u0430\\u0440\\u043C\\u0430\\u0446\\u0435 base64url",json_string:"JSON \\u0440\\u0430\\u0434\\u043E\\u043A",e164:"\\u043D\\u0443\\u043C\\u0430\\u0440 E.164",jwt:"JWT",template_literal:"\\u0443\\u0432\\u043E\\u0434"};return t=>{switch(t.code){case"invalid_type":return`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u045E\\u0432\\u043E\\u0434: \\u0447\\u0430\\u043A\\u0430\\u045E\\u0441\\u044F ${t.expected}, \\u0430\\u0442\\u0440\\u044B\\u043C\\u0430\\u043D\\u0430 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u045E\\u0432\\u043E\\u0434: \\u0447\\u0430\\u043A\\u0430\\u043B\\u0430\\u0441\\u044F ${p(t.values[0])}`:`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u0432\\u0430\\u0440\\u044B\\u044F\\u043D\\u0442: \\u0447\\u0430\\u043A\\u0430\\u045E\\u0441\\u044F \\u0430\\u0434\\u0437\\u0456\\u043D \\u0437 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);if(a){let u=Number(t.maximum),s=yu(u,a.unit.one,a.unit.few,a.unit.many);return`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u0430 \\u0432\\u044F\\u043B\\u0456\\u043A\\u0456: \\u0447\\u0430\\u043A\\u0430\\u043B\\u0430\\u0441\\u044F, \\u0448\\u0442\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u044D\\u043D\\u043D\\u0435"} \\u043F\\u0430\\u0432\\u0456\\u043D\\u043D\\u0430 ${a.verb} ${i}${t.maximum.toString()} ${s}`}return`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u0430 \\u0432\\u044F\\u043B\\u0456\\u043A\\u0456: \\u0447\\u0430\\u043A\\u0430\\u043B\\u0430\\u0441\\u044F, \\u0448\\u0442\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u044D\\u043D\\u043D\\u0435"} \\u043F\\u0430\\u0432\\u0456\\u043D\\u043D\\u0430 \\u0431\\u044B\\u0446\\u044C ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);if(a){let u=Number(t.minimum),s=yu(u,a.unit.one,a.unit.few,a.unit.many);return`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u0430 \\u043C\\u0430\\u043B\\u044B: \\u0447\\u0430\\u043A\\u0430\\u043B\\u0430\\u0441\\u044F, \\u0448\\u0442\\u043E ${t.origin} \\u043F\\u0430\\u0432\\u0456\\u043D\\u043D\\u0430 ${a.verb} ${i}${t.minimum.toString()} ${s}`}return`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u0430 \\u043C\\u0430\\u043B\\u044B: \\u0447\\u0430\\u043A\\u0430\\u043B\\u0430\\u0441\\u044F, \\u0448\\u0442\\u043E ${t.origin} \\u043F\\u0430\\u0432\\u0456\\u043D\\u043D\\u0430 \\u0431\\u044B\\u0446\\u044C ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u0440\\u0430\\u0434\\u043E\\u043A: \\u043F\\u0430\\u0432\\u0456\\u043D\\u0435\\u043D \\u043F\\u0430\\u0447\\u044B\\u043D\\u0430\\u0446\\u0446\\u0430 \\u0437 "${i.prefix}"`:i.format==="ends_with"?`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u0440\\u0430\\u0434\\u043E\\u043A: \\u043F\\u0430\\u0432\\u0456\\u043D\\u0435\\u043D \\u0437\\u0430\\u043A\\u0430\\u043D\\u0447\\u0432\\u0430\\u0446\\u0446\\u0430 \\u043D\\u0430 "${i.suffix}"`:i.format==="includes"?`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u0440\\u0430\\u0434\\u043E\\u043A: \\u043F\\u0430\\u0432\\u0456\\u043D\\u0435\\u043D \\u0437\\u043C\\u044F\\u0448\\u0447\\u0430\\u0446\\u044C "${i.includes}"`:i.format==="regex"?`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u0440\\u0430\\u0434\\u043E\\u043A: \\u043F\\u0430\\u0432\\u0456\\u043D\\u0435\\u043D \\u0430\\u0434\\u043F\\u0430\\u0432\\u044F\\u0434\\u0430\\u0446\\u044C \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u0443 ${i.pattern}`:`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u043B\\u0456\\u043A: \\u043F\\u0430\\u0432\\u0456\\u043D\\u0435\\u043D \\u0431\\u044B\\u0446\\u044C \\u043A\\u0440\\u0430\\u0442\\u043D\\u044B\\u043C ${t.divisor}`;case"unrecognized_keys":return`\\u041D\\u0435\\u0440\\u0430\\u0441\\u043F\\u0430\\u0437\\u043D\\u0430\\u043D\\u044B ${t.keys.length>1?"\\u043A\\u043B\\u044E\\u0447\\u044B":"\\u043A\\u043B\\u044E\\u0447"}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u043A\\u043B\\u044E\\u0447 \\u0443 ${t.origin}`;case"invalid_union":return"\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u045E\\u0432\\u043E\\u0434";case"invalid_element":return`\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u0430\\u0435 \\u0437\\u043D\\u0430\\u0447\\u044D\\u043D\\u043D\\u0435 \\u045E ${t.origin}`;default:return"\\u041D\\u044F\\u043F\\u0440\\u0430\\u0432\\u0456\\u043B\\u044C\\u043D\\u044B \\u045E\\u0432\\u043E\\u0434"}}};function xu(){return{localeError:hl()}}var $l=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"\\u0447\\u0438\\u0441\\u043B\\u043E";case"object":{if(Array.isArray(e))return"\\u043C\\u0430\\u0441\\u0438\\u0432";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return r},bl=()=>{let e={string:{unit:"\\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430",verb:"\\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430"},file:{unit:"\\u0431\\u0430\\u0439\\u0442\\u0430",verb:"\\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430"},array:{unit:"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430",verb:"\\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430"},set:{unit:"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430",verb:"\\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430"}};function r(o){return e[o]??null}let n={regex:"\\u0432\\u0445\\u043E\\u0434",email:"\\u0438\\u043C\\u0435\\u0439\\u043B \\u0430\\u0434\\u0440\\u0435\\u0441",url:"URL",emoji:"\\u0435\\u043C\\u043E\\u0434\\u0436\\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u0432\\u0440\\u0435\\u043C\\u0435",date:"ISO \\u0434\\u0430\\u0442\\u0430",time:"ISO \\u0432\\u0440\\u0435\\u043C\\u0435",duration:"ISO \\u043F\\u0440\\u043E\\u0434\\u044A\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u043D\\u043E\\u0441\\u0442",ipv4:"IPv4 \\u0430\\u0434\\u0440\\u0435\\u0441",ipv6:"IPv6 \\u0430\\u0434\\u0440\\u0435\\u0441",cidrv4:"IPv4 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D",cidrv6:"IPv6 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D",base64:"base64-\\u043A\\u043E\\u0434\\u0438\\u0440\\u0430\\u043D \\u043D\\u0438\\u0437",base64url:"base64url-\\u043A\\u043E\\u0434\\u0438\\u0440\\u0430\\u043D \\u043D\\u0438\\u0437",json_string:"JSON \\u043D\\u0438\\u0437",e164:"E.164 \\u043D\\u043E\\u043C\\u0435\\u0440",jwt:"JWT",template_literal:"\\u0432\\u0445\\u043E\\u0434"};return o=>{switch(o.code){case"invalid_type":return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u0432\\u0445\\u043E\\u0434: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430\\u043D ${o.expected}, \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D ${$l(o.input)}`;case"invalid_value":return o.values.length===1?`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u0432\\u0445\\u043E\\u0434: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430\\u043D ${p(o.values[0])}`:`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u0430 \\u043E\\u043F\\u0446\\u0438\\u044F: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430\\u043D\\u043E \\u0435\\u0434\\u043D\\u043E \\u043E\\u0442 ${l(o.values,"|")}`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`\\u0422\\u0432\\u044A\\u0440\\u0434\\u0435 \\u0433\\u043E\\u043B\\u044F\\u043C\\u043E: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430 \\u0441\\u0435 ${o.origin??"\\u0441\\u0442\\u043E\\u0439\\u043D\\u043E\\u0441\\u0442"} \\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430 ${t}${o.maximum.toString()} ${i.unit??"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430"}`:`\\u0422\\u0432\\u044A\\u0440\\u0434\\u0435 \\u0433\\u043E\\u043B\\u044F\\u043C\\u043E: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430 \\u0441\\u0435 ${o.origin??"\\u0441\\u0442\\u043E\\u0439\\u043D\\u043E\\u0441\\u0442"} \\u0434\\u0430 \\u0431\\u044A\\u0434\\u0435 ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`\\u0422\\u0432\\u044A\\u0440\\u0434\\u0435 \\u043C\\u0430\\u043B\\u043A\\u043E: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430 \\u0441\\u0435 ${o.origin} \\u0434\\u0430 \\u0441\\u044A\\u0434\\u044A\\u0440\\u0436\\u0430 ${t}${o.minimum.toString()} ${i.unit}`:`\\u0422\\u0432\\u044A\\u0440\\u0434\\u0435 \\u043C\\u0430\\u043B\\u043A\\u043E: \\u043E\\u0447\\u0430\\u043A\\u0432\\u0430 \\u0441\\u0435 ${o.origin} \\u0434\\u0430 \\u0431\\u044A\\u0434\\u0435 ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;if(t.format==="starts_with")return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u043D\\u0438\\u0437: \\u0442\\u0440\\u044F\\u0431\\u0432\\u0430 \\u0434\\u0430 \\u0437\\u0430\\u043F\\u043E\\u0447\\u0432\\u0430 \\u0441 "${t.prefix}"`;if(t.format==="ends_with")return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u043D\\u0438\\u0437: \\u0442\\u0440\\u044F\\u0431\\u0432\\u0430 \\u0434\\u0430 \\u0437\\u0430\\u0432\\u044A\\u0440\\u0448\\u0432\\u0430 \\u0441 "${t.suffix}"`;if(t.format==="includes")return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u043D\\u0438\\u0437: \\u0442\\u0440\\u044F\\u0431\\u0432\\u0430 \\u0434\\u0430 \\u0432\\u043A\\u043B\\u044E\\u0447\\u0432\\u0430 "${t.includes}"`;if(t.format==="regex")return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u043D\\u0438\\u0437: \\u0442\\u0440\\u044F\\u0431\\u0432\\u0430 \\u0434\\u0430 \\u0441\\u044A\\u0432\\u043F\\u0430\\u0434\\u0430 \\u0441 ${t.pattern}`;let i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D";return t.format==="emoji"&&(i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E"),t.format==="datetime"&&(i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E"),t.format==="date"&&(i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u0430"),t.format==="time"&&(i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E"),t.format==="duration"&&(i="\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u0430"),`${i} ${n[t.format]??o.format}`}case"not_multiple_of":return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u043E \\u0447\\u0438\\u0441\\u043B\\u043E: \\u0442\\u0440\\u044F\\u0431\\u0432\\u0430 \\u0434\\u0430 \\u0431\\u044A\\u0434\\u0435 \\u043A\\u0440\\u0430\\u0442\\u043D\\u043E \\u043D\\u0430 ${o.divisor}`;case"unrecognized_keys":return`\\u041D\\u0435\\u0440\\u0430\\u0437\\u043F\\u043E\\u0437\\u043D\\u0430\\u0442${o.keys.length>1?"\\u0438":""} \\u043A\\u043B\\u044E\\u0447${o.keys.length>1?"\\u043E\\u0432\\u0435":""}: ${l(o.keys,", ")}`;case"invalid_key":return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u043A\\u043B\\u044E\\u0447 \\u0432 ${o.origin}`;case"invalid_union":return"\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u0432\\u0445\\u043E\\u0434";case"invalid_element":return`\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u043D\\u0430 \\u0441\\u0442\\u043E\\u0439\\u043D\\u043E\\u0441\\u0442 \\u0432 ${o.origin}`;default:return"\\u041D\\u0435\\u0432\\u0430\\u043B\\u0438\\u0434\\u0435\\u043D \\u0432\\u0445\\u043E\\u0434"}}};function ku(){return{localeError:bl()}}var _l=()=>{let e={string:{unit:"car\\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"entrada",email:"adre\\xE7a electr\\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\\xE7a IPv4",ipv6:"adre\\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Tipus inv\\xE0lid: s\'esperava ${t.expected}, s\'ha rebut ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Valor inv\\xE0lid: s\'esperava ${p(t.values[0])}`:`Opci\\xF3 inv\\xE0lida: s\'esperava una de ${l(t.values," o ")}`;case"too_big":{let i=t.inclusive?"com a m\\xE0xim":"menys de",a=r(t.origin);return a?`Massa gran: s\'esperava que ${t.origin??"el valor"} contingu\\xE9s ${i} ${t.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s\'esperava que ${t.origin??"el valor"} fos ${i} ${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?"com a m\\xEDnim":"m\\xE9s de",a=r(t.origin);return a?`Massa petit: s\'esperava que ${t.origin} contingu\\xE9s ${i} ${t.minimum.toString()} ${a.unit}`:`Massa petit: s\'esperava que ${t.origin} fos ${i} ${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Format inv\\xE0lid: ha de comen\\xE7ar amb "${i.prefix}"`:i.format==="ends_with"?`Format inv\\xE0lid: ha d\'acabar amb "${i.suffix}"`:i.format==="includes"?`Format inv\\xE0lid: ha d\'incloure "${i.includes}"`:i.format==="regex"?`Format inv\\xE0lid: ha de coincidir amb el patr\\xF3 ${i.pattern}`:`Format inv\\xE0lid per a ${o[i.format]??t.format}`}case"not_multiple_of":return`N\\xFAmero inv\\xE0lid: ha de ser m\\xFAltiple de ${t.divisor}`;case"unrecognized_keys":return`Clau${t.keys.length>1?"s":""} no reconeguda${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`Clau inv\\xE0lida a ${t.origin}`;case"invalid_union":return"Entrada inv\\xE0lida";case"invalid_element":return`Element inv\\xE0lid a ${t.origin}`;default:return"Entrada inv\\xE0lida"}}};function zu(){return{localeError:_l()}}var yl=()=>{let e={string:{unit:"znak\\u016F",verb:"m\\xEDt"},file:{unit:"bajt\\u016F",verb:"m\\xEDt"},array:{unit:"prvk\\u016F",verb:"m\\xEDt"},set:{unit:"prvk\\u016F",verb:"m\\xEDt"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u010D\\xEDslo";case"string":return"\\u0159et\\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(t))return"pole";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"regul\\xE1rn\\xED v\\xFDraz",email:"e-mailov\\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \\u010Das ve form\\xE1tu ISO",date:"datum ve form\\xE1tu ISO",time:"\\u010Das ve form\\xE1tu ISO",duration:"doba trv\\xE1n\\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\\u0159et\\u011Bzec zak\\xF3dovan\\xFD ve form\\xE1tu base64",base64url:"\\u0159et\\u011Bzec zak\\xF3dovan\\xFD ve form\\xE1tu base64url",json_string:"\\u0159et\\u011Bzec ve form\\xE1tu JSON",e164:"\\u010D\\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return t=>{switch(t.code){case"invalid_type":return`Neplatn\\xFD vstup: o\\u010Dek\\xE1v\\xE1no ${t.expected}, obdr\\u017Eeno ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Neplatn\\xFD vstup: o\\u010Dek\\xE1v\\xE1no ${p(t.values[0])}`:`Neplatn\\xE1 mo\\u017Enost: o\\u010Dek\\xE1v\\xE1na jedna z hodnot ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Hodnota je p\\u0159\\xEDli\\u0161 velk\\xE1: ${t.origin??"hodnota"} mus\\xED m\\xEDt ${i}${t.maximum.toString()} ${a.unit??"prvk\\u016F"}`:`Hodnota je p\\u0159\\xEDli\\u0161 velk\\xE1: ${t.origin??"hodnota"} mus\\xED b\\xFDt ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Hodnota je p\\u0159\\xEDli\\u0161 mal\\xE1: ${t.origin??"hodnota"} mus\\xED m\\xEDt ${i}${t.minimum.toString()} ${a.unit??"prvk\\u016F"}`:`Hodnota je p\\u0159\\xEDli\\u0161 mal\\xE1: ${t.origin??"hodnota"} mus\\xED b\\xFDt ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Neplatn\\xFD \\u0159et\\u011Bzec: mus\\xED za\\u010D\\xEDnat na "${i.prefix}"`:i.format==="ends_with"?`Neplatn\\xFD \\u0159et\\u011Bzec: mus\\xED kon\\u010Dit na "${i.suffix}"`:i.format==="includes"?`Neplatn\\xFD \\u0159et\\u011Bzec: mus\\xED obsahovat "${i.includes}"`:i.format==="regex"?`Neplatn\\xFD \\u0159et\\u011Bzec: mus\\xED odpov\\xEDdat vzoru ${i.pattern}`:`Neplatn\\xFD form\\xE1t ${o[i.format]??t.format}`}case"not_multiple_of":return`Neplatn\\xE9 \\u010D\\xEDslo: mus\\xED b\\xFDt n\\xE1sobkem ${t.divisor}`;case"unrecognized_keys":return`Nezn\\xE1m\\xE9 kl\\xED\\u010De: ${l(t.keys,", ")}`;case"invalid_key":return`Neplatn\\xFD kl\\xED\\u010D v ${t.origin}`;case"invalid_union":return"Neplatn\\xFD vstup";case"invalid_element":return`Neplatn\\xE1 hodnota v ${t.origin}`;default:return"Neplatn\\xFD vstup"}}};function Iu(){return{localeError:yl()}}var xl=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},r={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\\xE6t",file:"fil"};function n(a){return e[a]??null}function o(a){return r[a]??a}let t=a=>{let u=typeof a;switch(u){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return u},i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\\xE6t",date:"ISO-dato",time:"ISO-klokkesl\\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\\xE5de",ipv6:"IPv6-omr\\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${o(a.expected)}, fik ${o(t(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\\xE6rdi: forventede ${p(a.values[0])}`:`Ugyldigt valg: forventede en af f\\xF8lgende ${l(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",s=n(a.origin),m=o(a.origin);return s?`For stor: forventede ${m??"value"} ${s.verb} ${u} ${a.maximum.toString()} ${s.unit??"elementer"}`:`For stor: forventede ${m??"value"} havde ${u} ${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",s=n(a.origin),m=o(a.origin);return s?`For lille: forventede ${m} ${s.verb} ${u} ${a.minimum.toString()} ${s.unit}`:`For lille: forventede ${m} havde ${u} ${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Ugyldig streng: skal starte med "${u.prefix}"`:u.format==="ends_with"?`Ugyldig streng: skal ende med "${u.suffix}"`:u.format==="includes"?`Ugyldig streng: skal indeholde "${u.includes}"`:u.format==="regex"?`Ugyldig streng: skal matche m\\xF8nsteret ${u.pattern}`:`Ugyldig ${i[u.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\\xF8gler":"Ukendt n\\xF8gle"}: ${l(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}};function wu(){return{localeError:xl()}}var kl=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"Zahl";case"object":{if(Array.isArray(t))return"Array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return t=>{switch(t.code){case"invalid_type":return`Ung\\xFCltige Eingabe: erwartet ${t.expected}, erhalten ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Ung\\xFCltige Eingabe: erwartet ${p(t.values[0])}`:`Ung\\xFCltige Option: erwartet eine von ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Zu gro\\xDF: erwartet, dass ${t.origin??"Wert"} ${i}${t.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\\xDF: erwartet, dass ${t.origin??"Wert"} ${i}${t.maximum.toString()} ist`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Zu klein: erwartet, dass ${t.origin} ${i}${t.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${t.origin} ${i}${t.minimum.toString()} ist`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Ung\\xFCltiger String: muss mit "${i.prefix}" beginnen`:i.format==="ends_with"?`Ung\\xFCltiger String: muss mit "${i.suffix}" enden`:i.format==="includes"?`Ung\\xFCltiger String: muss "${i.includes}" enthalten`:i.format==="regex"?`Ung\\xFCltiger String: muss dem Muster ${i.pattern} entsprechen`:`Ung\\xFCltig: ${o[i.format]??t.format}`}case"not_multiple_of":return`Ung\\xFCltige Zahl: muss ein Vielfaches von ${t.divisor} sein`;case"unrecognized_keys":return`${t.keys.length>1?"Unbekannte Schl\\xFCssel":"Unbekannter Schl\\xFCssel"}: ${l(t.keys,", ")}`;case"invalid_key":return`Ung\\xFCltiger Schl\\xFCssel in ${t.origin}`;case"invalid_union":return"Ung\\xFCltige Eingabe";case"invalid_element":return`Ung\\xFCltiger Wert in ${t.origin}`;default:return"Ung\\xFCltige Eingabe"}}};function Su(){return{localeError:kl()}}var zl=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return r},Il=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function r(o){return e[o]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return o=>{switch(o.code){case"invalid_type":return`Invalid input: expected ${o.expected}, received ${zl(o.input)}`;case"invalid_value":return o.values.length===1?`Invalid input: expected ${p(o.values[0])}`:`Invalid option: expected one of ${l(o.values,"|")}`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`Too big: expected ${o.origin??"value"} to have ${t}${o.maximum.toString()} ${i.unit??"elements"}`:`Too big: expected ${o.origin??"value"} to be ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`Too small: expected ${o.origin} to have ${t}${o.minimum.toString()} ${i.unit}`:`Too small: expected ${o.origin} to be ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`Invalid string: must start with "${t.prefix}"`:t.format==="ends_with"?`Invalid string: must end with "${t.suffix}"`:t.format==="includes"?`Invalid string: must include "${t.includes}"`:t.format==="regex"?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${n[t.format]??o.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${o.divisor}`;case"unrecognized_keys":return`Unrecognized key${o.keys.length>1?"s":""}: ${l(o.keys,", ")}`;case"invalid_key":return`Invalid key in ${o.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${o.origin}`;default:return"Invalid input"}}};function Xt(){return{localeError:Il()}}var wl=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":{if(Array.isArray(e))return"tabelo";if(e===null)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return r},Sl=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function r(o){return e[o]??null}let n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return o=>{switch(o.code){case"invalid_type":return`Nevalida enigo: atendi\\u011Dis ${o.expected}, ricevi\\u011Dis ${wl(o.input)}`;case"invalid_value":return o.values.length===1?`Nevalida enigo: atendi\\u011Dis ${p(o.values[0])}`:`Nevalida opcio: atendi\\u011Dis unu el ${l(o.values,"|")}`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`Tro granda: atendi\\u011Dis ke ${o.origin??"valoro"} havu ${t}${o.maximum.toString()} ${i.unit??"elementojn"}`:`Tro granda: atendi\\u011Dis ke ${o.origin??"valoro"} havu ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`Tro malgranda: atendi\\u011Dis ke ${o.origin} havu ${t}${o.minimum.toString()} ${i.unit}`:`Tro malgranda: atendi\\u011Dis ke ${o.origin} estu ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`Nevalida karaktraro: devas komenci\\u011Di per "${t.prefix}"`:t.format==="ends_with"?`Nevalida karaktraro: devas fini\\u011Di per "${t.suffix}"`:t.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:t.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${n[t.format]??o.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${o.divisor}`;case"unrecognized_keys":return`Nekonata${o.keys.length>1?"j":""} \\u015Dlosilo${o.keys.length>1?"j":""}: ${l(o.keys,", ")}`;case"invalid_key":return`Nevalida \\u015Dlosilo en ${o.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${o.origin}`;default:return"Nevalida enigo"}}};function ju(){return{localeError:Sl()}}var jl=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},r={string:"texto",number:"n\\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\\xFAmero grande",symbol:"s\\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\\xF3n",union:"uni\\xF3n",literal:"literal",promise:"promesa",void:"vac\\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function n(a){return e[a]??null}function o(a){return r[a]??a}let t=a=>{let u=typeof a;switch(u){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return u},i={regex:"entrada",email:"direcci\\xF3n de correo electr\\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\\xF3n ISO",ipv4:"direcci\\xF3n IPv4",ipv6:"direcci\\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\\xE1lida: se esperaba ${o(a.expected)}, recibido ${o(t(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\\xE1lida: se esperaba ${p(a.values[0])}`:`Opci\\xF3n inv\\xE1lida: se esperaba una de ${l(a.values,"|")}`;case"too_big":{let u=a.inclusive?"<=":"<",s=n(a.origin),m=o(a.origin);return s?`Demasiado grande: se esperaba que ${m??"valor"} tuviera ${u}${a.maximum.toString()} ${s.unit??"elementos"}`:`Demasiado grande: se esperaba que ${m??"valor"} fuera ${u}${a.maximum.toString()}`}case"too_small":{let u=a.inclusive?">=":">",s=n(a.origin),m=o(a.origin);return s?`Demasiado peque\\xF1o: se esperaba que ${m} tuviera ${u}${a.minimum.toString()} ${s.unit}`:`Demasiado peque\\xF1o: se esperaba que ${m} fuera ${u}${a.minimum.toString()}`}case"invalid_format":{let u=a;return u.format==="starts_with"?`Cadena inv\\xE1lida: debe comenzar con "${u.prefix}"`:u.format==="ends_with"?`Cadena inv\\xE1lida: debe terminar en "${u.suffix}"`:u.format==="includes"?`Cadena inv\\xE1lida: debe incluir "${u.includes}"`:u.format==="regex"?`Cadena inv\\xE1lida: debe coincidir con el patr\\xF3n ${u.pattern}`:`Inv\\xE1lido ${i[u.format]??a.format}`}case"not_multiple_of":return`N\\xFAmero inv\\xE1lido: debe ser m\\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${l(a.keys,", ")}`;case"invalid_key":return`Llave inv\\xE1lida en ${o(a.origin)}`;case"invalid_union":return"Entrada inv\\xE1lida";case"invalid_element":return`Valor inv\\xE1lido en ${o(a.origin)}`;default:return"Entrada inv\\xE1lida"}}};function Ou(){return{localeError:jl()}}var Ol=()=>{let e={string:{unit:"\\u06A9\\u0627\\u0631\\u0627\\u06A9\\u062A\\u0631",verb:"\\u062F\\u0627\\u0634\\u062A\\u0647 \\u0628\\u0627\\u0634\\u062F"},file:{unit:"\\u0628\\u0627\\u06CC\\u062A",verb:"\\u062F\\u0627\\u0634\\u062A\\u0647 \\u0628\\u0627\\u0634\\u062F"},array:{unit:"\\u0622\\u06CC\\u062A\\u0645",verb:"\\u062F\\u0627\\u0634\\u062A\\u0647 \\u0628\\u0627\\u0634\\u062F"},set:{unit:"\\u0622\\u06CC\\u062A\\u0645",verb:"\\u062F\\u0627\\u0634\\u062A\\u0647 \\u0628\\u0627\\u0634\\u062F"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0639\\u062F\\u062F";case"object":{if(Array.isArray(t))return"\\u0622\\u0631\\u0627\\u06CC\\u0647";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0648\\u0631\\u0648\\u062F\\u06CC",email:"\\u0622\\u062F\\u0631\\u0633 \\u0627\\u06CC\\u0645\\u06CC\\u0644",url:"URL",emoji:"\\u0627\\u06CC\\u0645\\u0648\\u062C\\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0648 \\u0632\\u0645\\u0627\\u0646 \\u0627\\u06CC\\u0632\\u0648",date:"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0627\\u06CC\\u0632\\u0648",time:"\\u0632\\u0645\\u0627\\u0646 \\u0627\\u06CC\\u0632\\u0648",duration:"\\u0645\\u062F\\u062A \\u0632\\u0645\\u0627\\u0646 \\u0627\\u06CC\\u0632\\u0648",ipv4:"IPv4 \\u0622\\u062F\\u0631\\u0633",ipv6:"IPv6 \\u0622\\u062F\\u0631\\u0633",cidrv4:"IPv4 \\u062F\\u0627\\u0645\\u0646\\u0647",cidrv6:"IPv6 \\u062F\\u0627\\u0645\\u0646\\u0647",base64:"base64-encoded \\u0631\\u0634\\u062A\\u0647",base64url:"base64url-encoded \\u0631\\u0634\\u062A\\u0647",json_string:"JSON \\u0631\\u0634\\u062A\\u0647",e164:"E.164 \\u0639\\u062F\\u062F",jwt:"JWT",template_literal:"\\u0648\\u0631\\u0648\\u062F\\u06CC"};return t=>{switch(t.code){case"invalid_type":return`\\u0648\\u0631\\u0648\\u062F\\u06CC \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0645\\u06CC\\u200C\\u0628\\u0627\\u06CC\\u0633\\u062A ${t.expected} \\u0645\\u06CC\\u200C\\u0628\\u0648\\u062F\\u060C ${n(t.input)} \\u062F\\u0631\\u06CC\\u0627\\u0641\\u062A \\u0634\\u062F`;case"invalid_value":return t.values.length===1?`\\u0648\\u0631\\u0648\\u062F\\u06CC \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0645\\u06CC\\u200C\\u0628\\u0627\\u06CC\\u0633\\u062A ${p(t.values[0])} \\u0645\\u06CC\\u200C\\u0628\\u0648\\u062F`:`\\u06AF\\u0632\\u06CC\\u0646\\u0647 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0645\\u06CC\\u200C\\u0628\\u0627\\u06CC\\u0633\\u062A \\u06CC\\u06A9\\u06CC \\u0627\\u0632 ${l(t.values,"|")} \\u0645\\u06CC\\u200C\\u0628\\u0648\\u062F`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u062E\\u06CC\\u0644\\u06CC \\u0628\\u0632\\u0631\\u06AF: ${t.origin??"\\u0645\\u0642\\u062F\\u0627\\u0631"} \\u0628\\u0627\\u06CC\\u062F ${i}${t.maximum.toString()} ${a.unit??"\\u0639\\u0646\\u0635\\u0631"} \\u0628\\u0627\\u0634\\u062F`:`\\u062E\\u06CC\\u0644\\u06CC \\u0628\\u0632\\u0631\\u06AF: ${t.origin??"\\u0645\\u0642\\u062F\\u0627\\u0631"} \\u0628\\u0627\\u06CC\\u062F ${i}${t.maximum.toString()} \\u0628\\u0627\\u0634\\u062F`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u062E\\u06CC\\u0644\\u06CC \\u06A9\\u0648\\u0686\\u06A9: ${t.origin} \\u0628\\u0627\\u06CC\\u062F ${i}${t.minimum.toString()} ${a.unit} \\u0628\\u0627\\u0634\\u062F`:`\\u062E\\u06CC\\u0644\\u06CC \\u06A9\\u0648\\u0686\\u06A9: ${t.origin} \\u0628\\u0627\\u06CC\\u062F ${i}${t.minimum.toString()} \\u0628\\u0627\\u0634\\u062F`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u0631\\u0634\\u062A\\u0647 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0628\\u0627\\u06CC\\u062F \\u0628\\u0627 "${i.prefix}" \\u0634\\u0631\\u0648\\u0639 \\u0634\\u0648\\u062F`:i.format==="ends_with"?`\\u0631\\u0634\\u062A\\u0647 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0628\\u0627\\u06CC\\u062F \\u0628\\u0627 "${i.suffix}" \\u062A\\u0645\\u0627\\u0645 \\u0634\\u0648\\u062F`:i.format==="includes"?`\\u0631\\u0634\\u062A\\u0647 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0628\\u0627\\u06CC\\u062F \\u0634\\u0627\\u0645\\u0644 "${i.includes}" \\u0628\\u0627\\u0634\\u062F`:i.format==="regex"?`\\u0631\\u0634\\u062A\\u0647 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0628\\u0627\\u06CC\\u062F \\u0628\\u0627 \\u0627\\u0644\\u06AF\\u0648\\u06CC ${i.pattern} \\u0645\\u0637\\u0627\\u0628\\u0642\\u062A \\u062F\\u0627\\u0634\\u062A\\u0647 \\u0628\\u0627\\u0634\\u062F`:`${o[i.format]??t.format} \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631`}case"not_multiple_of":return`\\u0639\\u062F\\u062F \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631: \\u0628\\u0627\\u06CC\\u062F \\u0645\\u0636\\u0631\\u0628 ${t.divisor} \\u0628\\u0627\\u0634\\u062F`;case"unrecognized_keys":return`\\u06A9\\u0644\\u06CC\\u062F${t.keys.length>1?"\\u0647\\u0627\\u06CC":""} \\u0646\\u0627\\u0634\\u0646\\u0627\\u0633: ${l(t.keys,", ")}`;case"invalid_key":return`\\u06A9\\u0644\\u06CC\\u062F \\u0646\\u0627\\u0634\\u0646\\u0627\\u0633 \\u062F\\u0631 ${t.origin}`;case"invalid_union":return"\\u0648\\u0631\\u0648\\u062F\\u06CC \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631";case"invalid_element":return`\\u0645\\u0642\\u062F\\u0627\\u0631 \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631 \\u062F\\u0631 ${t.origin}`;default:return"\\u0648\\u0631\\u0648\\u062F\\u06CC \\u0646\\u0627\\u0645\\u0639\\u062A\\u0628\\u0631"}}};function Pu(){return{localeError:Ol()}}var Pl=()=>{let e={string:{unit:"merkki\\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\\xE4iv\\xE4m\\xE4\\xE4r\\xE4n"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"s\\xE4\\xE4nn\\xF6llinen lauseke",email:"s\\xE4hk\\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\\xE4iv\\xE4m\\xE4\\xE4r\\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return t=>{switch(t.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${t.expected}, oli ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Virheellinen sy\\xF6te: t\\xE4ytyy olla ${p(t.values[0])}`:`Virheellinen valinta: t\\xE4ytyy olla yksi seuraavista: ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Liian suuri: ${a.subject} t\\xE4ytyy olla ${i}${t.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\\xE4ytyy olla ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Liian pieni: ${a.subject} t\\xE4ytyy olla ${i}${t.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\\xE4ytyy olla ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Virheellinen sy\\xF6te: t\\xE4ytyy alkaa "${i.prefix}"`:i.format==="ends_with"?`Virheellinen sy\\xF6te: t\\xE4ytyy loppua "${i.suffix}"`:i.format==="includes"?`Virheellinen sy\\xF6te: t\\xE4ytyy sis\\xE4lt\\xE4\\xE4 "${i.includes}"`:i.format==="regex"?`Virheellinen sy\\xF6te: t\\xE4ytyy vastata s\\xE4\\xE4nn\\xF6llist\\xE4 lauseketta ${i.pattern}`:`Virheellinen ${o[i.format]??t.format}`}case"not_multiple_of":return`Virheellinen luku: t\\xE4ytyy olla luvun ${t.divisor} monikerta`;case"unrecognized_keys":return`${t.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${l(t.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\\xF6te"}}};function Uu(){return{localeError:Pl()}}var Ul=()=>{let e={string:{unit:"caract\\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\\xE9l\\xE9ments",verb:"avoir"},set:{unit:"\\xE9l\\xE9ments",verb:"avoir"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"nombre";case"object":{if(Array.isArray(t))return"tableau";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"entr\\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\\xEEne encod\\xE9e en base64",base64url:"cha\\xEEne encod\\xE9e en base64url",json_string:"cha\\xEEne JSON",e164:"num\\xE9ro E.164",jwt:"JWT",template_literal:"entr\\xE9e"};return t=>{switch(t.code){case"invalid_type":return`Entr\\xE9e invalide : ${t.expected} attendu, ${n(t.input)} re\\xE7u`;case"invalid_value":return t.values.length===1?`Entr\\xE9e invalide : ${p(t.values[0])} attendu`:`Option invalide : une valeur parmi ${l(t.values,"|")} attendue`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Trop grand : ${t.origin??"valeur"} doit ${a.verb} ${i}${t.maximum.toString()} ${a.unit??"\\xE9l\\xE9ment(s)"}`:`Trop grand : ${t.origin??"valeur"} doit \\xEAtre ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Trop petit : ${t.origin} doit ${a.verb} ${i}${t.minimum.toString()} ${a.unit}`:`Trop petit : ${t.origin} doit \\xEAtre ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Cha\\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\\xEEne invalide : doit correspondre au mod\\xE8le ${i.pattern}`:`${o[i.format]??t.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \\xEAtre un multiple de ${t.divisor}`;case"unrecognized_keys":return`Cl\\xE9${t.keys.length>1?"s":""} non reconnue${t.keys.length>1?"s":""} : ${l(t.keys,", ")}`;case"invalid_key":return`Cl\\xE9 invalide dans ${t.origin}`;case"invalid_union":return"Entr\\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${t.origin}`;default:return"Entr\\xE9e invalide"}}};function Nu(){return{localeError:Ul()}}var Nl=()=>{let e={string:{unit:"caract\\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\\xE9l\\xE9ments",verb:"avoir"},set:{unit:"\\xE9l\\xE9ments",verb:"avoir"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"entr\\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\\xEEne encod\\xE9e en base64",base64url:"cha\\xEEne encod\\xE9e en base64url",json_string:"cha\\xEEne JSON",e164:"num\\xE9ro E.164",jwt:"JWT",template_literal:"entr\\xE9e"};return t=>{switch(t.code){case"invalid_type":return`Entr\\xE9e invalide : attendu ${t.expected}, re\\xE7u ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Entr\\xE9e invalide : attendu ${p(t.values[0])}`:`Option invalide : attendu l\'une des valeurs suivantes ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"\\u2264":"<",a=r(t.origin);return a?`Trop grand : attendu que ${t.origin??"la valeur"} ait ${i}${t.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${t.origin??"la valeur"} soit ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?"\\u2265":">",a=r(t.origin);return a?`Trop petit : attendu que ${t.origin} ait ${i}${t.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${t.origin} soit ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Cha\\xEEne invalide : doit commencer par "${i.prefix}"`:i.format==="ends_with"?`Cha\\xEEne invalide : doit se terminer par "${i.suffix}"`:i.format==="includes"?`Cha\\xEEne invalide : doit inclure "${i.includes}"`:i.format==="regex"?`Cha\\xEEne invalide : doit correspondre au motif ${i.pattern}`:`${o[i.format]??t.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \\xEAtre un multiple de ${t.divisor}`;case"unrecognized_keys":return`Cl\\xE9${t.keys.length>1?"s":""} non reconnue${t.keys.length>1?"s":""} : ${l(t.keys,", ")}`;case"invalid_key":return`Cl\\xE9 invalide dans ${t.origin}`;case"invalid_union":return"Entr\\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${t.origin}`;default:return"Entr\\xE9e invalide"}}};function Zu(){return{localeError:Nl()}}var Zl=()=>{let e={string:{unit:"\\u05D0\\u05D5\\u05EA\\u05D9\\u05D5\\u05EA",verb:"\\u05DC\\u05DB\\u05DC\\u05D5\\u05DC"},file:{unit:"\\u05D1\\u05D9\\u05D9\\u05D8\\u05D9\\u05DD",verb:"\\u05DC\\u05DB\\u05DC\\u05D5\\u05DC"},array:{unit:"\\u05E4\\u05E8\\u05D9\\u05D8\\u05D9\\u05DD",verb:"\\u05DC\\u05DB\\u05DC\\u05D5\\u05DC"},set:{unit:"\\u05E4\\u05E8\\u05D9\\u05D8\\u05D9\\u05DD",verb:"\\u05DC\\u05DB\\u05DC\\u05D5\\u05DC"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u05E7\\u05DC\\u05D8",email:"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA \\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC",url:"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA \\u05E8\\u05E9\\u05EA",emoji:"\\u05D0\\u05D9\\u05DE\\u05D5\\u05D2\'\\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D5\\u05D6\\u05DE\\u05DF ISO",date:"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA ISO",time:"\\u05D6\\u05DE\\u05DF ISO",duration:"\\u05DE\\u05E9\\u05DA \\u05D6\\u05DE\\u05DF ISO",ipv4:"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA IPv4",ipv6:"\\u05DB\\u05EA\\u05D5\\u05D1\\u05EA IPv6",cidrv4:"\\u05D8\\u05D5\\u05D5\\u05D7 IPv4",cidrv6:"\\u05D8\\u05D5\\u05D5\\u05D7 IPv6",base64:"\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05D1\\u05D1\\u05E1\\u05D9\\u05E1 64",base64url:"\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05D1\\u05D1\\u05E1\\u05D9\\u05E1 64 \\u05DC\\u05DB\\u05EA\\u05D5\\u05D1\\u05D5\\u05EA \\u05E8\\u05E9\\u05EA",json_string:"\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA JSON",e164:"\\u05DE\\u05E1\\u05E4\\u05E8 E.164",jwt:"JWT",template_literal:"\\u05E7\\u05DC\\u05D8"};return t=>{switch(t.code){case"invalid_type":return`\\u05E7\\u05DC\\u05D8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF: \\u05E6\\u05E8\\u05D9\\u05DA ${t.expected}, \\u05D4\\u05EA\\u05E7\\u05D1\\u05DC ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u05E7\\u05DC\\u05D8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF: \\u05E6\\u05E8\\u05D9\\u05DA ${p(t.values[0])}`:`\\u05E7\\u05DC\\u05D8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF: \\u05E6\\u05E8\\u05D9\\u05DA \\u05D0\\u05D7\\u05EA \\u05DE\\u05D4\\u05D0\\u05E4\\u05E9\\u05E8\\u05D5\\u05D9\\u05D5\\u05EA  ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u05D2\\u05D3\\u05D5\\u05DC \\u05DE\\u05D3\\u05D9: ${t.origin??"value"} \\u05E6\\u05E8\\u05D9\\u05DA \\u05DC\\u05D4\\u05D9\\u05D5\\u05EA ${i}${t.maximum.toString()} ${a.unit??"elements"}`:`\\u05D2\\u05D3\\u05D5\\u05DC \\u05DE\\u05D3\\u05D9: ${t.origin??"value"} \\u05E6\\u05E8\\u05D9\\u05DA \\u05DC\\u05D4\\u05D9\\u05D5\\u05EA ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u05E7\\u05D8\\u05DF \\u05DE\\u05D3\\u05D9: ${t.origin} \\u05E6\\u05E8\\u05D9\\u05DA \\u05DC\\u05D4\\u05D9\\u05D5\\u05EA ${i}${t.minimum.toString()} ${a.unit}`:`\\u05E7\\u05D8\\u05DF \\u05DE\\u05D3\\u05D9: ${t.origin} \\u05E6\\u05E8\\u05D9\\u05DA \\u05DC\\u05D4\\u05D9\\u05D5\\u05EA ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05E0\\u05D4: \\u05D7\\u05D9\\u05D9\\u05D1\\u05EA \\u05DC\\u05D4\\u05EA\\u05D7\\u05D9\\u05DC \\u05D1"${i.prefix}"`:i.format==="ends_with"?`\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05E0\\u05D4: \\u05D7\\u05D9\\u05D9\\u05D1\\u05EA \\u05DC\\u05D4\\u05E1\\u05EA\\u05D9\\u05D9\\u05DD \\u05D1 "${i.suffix}"`:i.format==="includes"?`\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05E0\\u05D4: \\u05D7\\u05D9\\u05D9\\u05D1\\u05EA \\u05DC\\u05DB\\u05DC\\u05D5\\u05DC "${i.includes}"`:i.format==="regex"?`\\u05DE\\u05D7\\u05E8\\u05D5\\u05D6\\u05EA \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05E0\\u05D4: \\u05D7\\u05D9\\u05D9\\u05D1\\u05EA \\u05DC\\u05D4\\u05EA\\u05D0\\u05D9\\u05DD \\u05DC\\u05EA\\u05D1\\u05E0\\u05D9\\u05EA ${i.pattern}`:`${o[i.format]??t.format} \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF`}case"not_multiple_of":return`\\u05DE\\u05E1\\u05E4\\u05E8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF: \\u05D7\\u05D9\\u05D9\\u05D1 \\u05DC\\u05D4\\u05D9\\u05D5\\u05EA \\u05DE\\u05DB\\u05E4\\u05DC\\u05D4 \\u05E9\\u05DC ${t.divisor}`;case"unrecognized_keys":return`\\u05DE\\u05E4\\u05EA\\u05D7${t.keys.length>1?"\\u05D5\\u05EA":""} \\u05DC\\u05D0 \\u05DE\\u05D6\\u05D5\\u05D4${t.keys.length>1?"\\u05D9\\u05DD":"\\u05D4"}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u05DE\\u05E4\\u05EA\\u05D7 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF \\u05D1${t.origin}`;case"invalid_union":return"\\u05E7\\u05DC\\u05D8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF";case"invalid_element":return`\\u05E2\\u05E8\\u05DA \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF \\u05D1${t.origin}`;default:return"\\u05E7\\u05DC\\u05D8 \\u05DC\\u05D0 \\u05EA\\u05E7\\u05D9\\u05DF"}}};function Du(){return{localeError:Zl()}}var Dl=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"sz\\xE1m";case"object":{if(Array.isArray(t))return"t\\xF6mb";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"bemenet",email:"email c\\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\\u0151b\\xE9lyeg",date:"ISO d\\xE1tum",time:"ISO id\\u0151",duration:"ISO id\\u0151intervallum",ipv4:"IPv4 c\\xEDm",ipv6:"IPv6 c\\xEDm",cidrv4:"IPv4 tartom\\xE1ny",cidrv6:"IPv6 tartom\\xE1ny",base64:"base64-k\\xF3dolt string",base64url:"base64url-k\\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\\xE1m",jwt:"JWT",template_literal:"bemenet"};return t=>{switch(t.code){case"invalid_type":return`\\xC9rv\\xE9nytelen bemenet: a v\\xE1rt \\xE9rt\\xE9k ${t.expected}, a kapott \\xE9rt\\xE9k ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\xC9rv\\xE9nytelen bemenet: a v\\xE1rt \\xE9rt\\xE9k ${p(t.values[0])}`:`\\xC9rv\\xE9nytelen opci\\xF3: valamelyik \\xE9rt\\xE9k v\\xE1rt ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`T\\xFAl nagy: ${t.origin??"\\xE9rt\\xE9k"} m\\xE9rete t\\xFAl nagy ${i}${t.maximum.toString()} ${a.unit??"elem"}`:`T\\xFAl nagy: a bemeneti \\xE9rt\\xE9k ${t.origin??"\\xE9rt\\xE9k"} t\\xFAl nagy: ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`T\\xFAl kicsi: a bemeneti \\xE9rt\\xE9k ${t.origin} m\\xE9rete t\\xFAl kicsi ${i}${t.minimum.toString()} ${a.unit}`:`T\\xFAl kicsi: a bemeneti \\xE9rt\\xE9k ${t.origin} t\\xFAl kicsi ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\xC9rv\\xE9nytelen string: "${i.prefix}" \\xE9rt\\xE9kkel kell kezd\\u0151dnie`:i.format==="ends_with"?`\\xC9rv\\xE9nytelen string: "${i.suffix}" \\xE9rt\\xE9kkel kell v\\xE9gz\\u0151dnie`:i.format==="includes"?`\\xC9rv\\xE9nytelen string: "${i.includes}" \\xE9rt\\xE9ket kell tartalmaznia`:i.format==="regex"?`\\xC9rv\\xE9nytelen string: ${i.pattern} mint\\xE1nak kell megfelelnie`:`\\xC9rv\\xE9nytelen ${o[i.format]??t.format}`}case"not_multiple_of":return`\\xC9rv\\xE9nytelen sz\\xE1m: ${t.divisor} t\\xF6bbsz\\xF6r\\xF6s\\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`\\xC9rv\\xE9nytelen kulcs ${t.origin}`;case"invalid_union":return"\\xC9rv\\xE9nytelen bemenet";case"invalid_element":return`\\xC9rv\\xE9nytelen \\xE9rt\\xE9k: ${t.origin}`;default:return"\\xC9rv\\xE9nytelen bemenet"}}};function Tu(){return{localeError:Dl()}}var Tl=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`Input tidak valid: diharapkan ${t.expected}, diterima ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Input tidak valid: diharapkan ${p(t.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Terlalu besar: diharapkan ${t.origin??"value"} memiliki ${i}${t.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${t.origin??"value"} menjadi ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Terlalu kecil: diharapkan ${t.origin} memiliki ${i}${t.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${t.origin} menjadi ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`String tidak valid: harus dimulai dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak valid: harus berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak valid: harus menyertakan "${i.includes}"`:i.format==="regex"?`String tidak valid: harus sesuai pola ${i.pattern}`:`${o[i.format]??t.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${t.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${t.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${t.origin}`;default:return"Input tidak valid"}}};function Eu(){return{localeError:Tl()}}var El=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"n\\xFAmer";case"object":{if(Array.isArray(e))return"fylki";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return r},Al=()=>{let e={string:{unit:"stafi",verb:"a\\xF0 hafa"},file:{unit:"b\\xE6ti",verb:"a\\xF0 hafa"},array:{unit:"hluti",verb:"a\\xF0 hafa"},set:{unit:"hluti",verb:"a\\xF0 hafa"}};function r(o){return e[o]??null}let n={regex:"gildi",email:"netfang",url:"vefsl\\xF3\\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\\xEDmi",date:"ISO dagsetning",time:"ISO t\\xEDmi",duration:"ISO t\\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return o=>{switch(o.code){case"invalid_type":return`Rangt gildi: \\xDE\\xFA sl\\xF3st inn ${El(o.input)} \\xFEar sem \\xE1 a\\xF0 vera ${o.expected}`;case"invalid_value":return o.values.length===1?`Rangt gildi: gert r\\xE1\\xF0 fyrir ${p(o.values[0])}`:`\\xD3gilt val: m\\xE1 vera eitt af eftirfarandi ${l(o.values,"|")}`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`Of st\\xF3rt: gert er r\\xE1\\xF0 fyrir a\\xF0 ${o.origin??"gildi"} hafi ${t}${o.maximum.toString()} ${i.unit??"hluti"}`:`Of st\\xF3rt: gert er r\\xE1\\xF0 fyrir a\\xF0 ${o.origin??"gildi"} s\\xE9 ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`Of l\\xEDti\\xF0: gert er r\\xE1\\xF0 fyrir a\\xF0 ${o.origin} hafi ${t}${o.minimum.toString()} ${i.unit}`:`Of l\\xEDti\\xF0: gert er r\\xE1\\xF0 fyrir a\\xF0 ${o.origin} s\\xE9 ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`\\xD3gildur strengur: ver\\xF0ur a\\xF0 byrja \\xE1 "${t.prefix}"`:t.format==="ends_with"?`\\xD3gildur strengur: ver\\xF0ur a\\xF0 enda \\xE1 "${t.suffix}"`:t.format==="includes"?`\\xD3gildur strengur: ver\\xF0ur a\\xF0 innihalda "${t.includes}"`:t.format==="regex"?`\\xD3gildur strengur: ver\\xF0ur a\\xF0 fylgja mynstri ${t.pattern}`:`Rangt ${n[t.format]??o.format}`}case"not_multiple_of":return`R\\xF6ng tala: ver\\xF0ur a\\xF0 vera margfeldi af ${o.divisor}`;case"unrecognized_keys":return`\\xD3\\xFEekkt ${o.keys.length>1?"ir lyklar":"ur lykill"}: ${l(o.keys,", ")}`;case"invalid_key":return`Rangur lykill \\xED ${o.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \\xED ${o.origin}`;default:return"Rangt gildi"}}};function Au(){return{localeError:Al()}}var Rl=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"numero";case"object":{if(Array.isArray(t))return"vettore";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`Input non valido: atteso ${t.expected}, ricevuto ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Input non valido: atteso ${p(t.values[0])}`:`Opzione non valida: atteso uno tra ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Troppo grande: ${t.origin??"valore"} deve avere ${i}${t.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${t.origin??"valore"} deve essere ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Troppo piccolo: ${t.origin} deve avere ${i}${t.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${t.origin} deve essere ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Stringa non valida: deve iniziare con "${i.prefix}"`:i.format==="ends_with"?`Stringa non valida: deve terminare con "${i.suffix}"`:i.format==="includes"?`Stringa non valida: deve includere "${i.includes}"`:i.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${i.pattern}`:`Invalid ${o[i.format]??t.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${t.divisor}`;case"unrecognized_keys":return`Chiav${t.keys.length>1?"i":"e"} non riconosciut${t.keys.length>1?"e":"a"}: ${l(t.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${t.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${t.origin}`;default:return"Input non valido"}}};function Ru(){return{localeError:Rl()}}var Ll=()=>{let e={string:{unit:"\\u6587\\u5B57",verb:"\\u3067\\u3042\\u308B"},file:{unit:"\\u30D0\\u30A4\\u30C8",verb:"\\u3067\\u3042\\u308B"},array:{unit:"\\u8981\\u7D20",verb:"\\u3067\\u3042\\u308B"},set:{unit:"\\u8981\\u7D20",verb:"\\u3067\\u3042\\u308B"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u6570\\u5024";case"object":{if(Array.isArray(t))return"\\u914D\\u5217";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u5165\\u529B\\u5024",email:"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9",url:"URL",emoji:"\\u7D75\\u6587\\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\\u65E5\\u6642",date:"ISO\\u65E5\\u4ED8",time:"ISO\\u6642\\u523B",duration:"ISO\\u671F\\u9593",ipv4:"IPv4\\u30A2\\u30C9\\u30EC\\u30B9",ipv6:"IPv6\\u30A2\\u30C9\\u30EC\\u30B9",cidrv4:"IPv4\\u7BC4\\u56F2",cidrv6:"IPv6\\u7BC4\\u56F2",base64:"base64\\u30A8\\u30F3\\u30B3\\u30FC\\u30C9\\u6587\\u5B57\\u5217",base64url:"base64url\\u30A8\\u30F3\\u30B3\\u30FC\\u30C9\\u6587\\u5B57\\u5217",json_string:"JSON\\u6587\\u5B57\\u5217",e164:"E.164\\u756A\\u53F7",jwt:"JWT",template_literal:"\\u5165\\u529B\\u5024"};return t=>{switch(t.code){case"invalid_type":return`\\u7121\\u52B9\\u306A\\u5165\\u529B: ${t.expected}\\u304C\\u671F\\u5F85\\u3055\\u308C\\u307E\\u3057\\u305F\\u304C\\u3001${n(t.input)}\\u304C\\u5165\\u529B\\u3055\\u308C\\u307E\\u3057\\u305F`;case"invalid_value":return t.values.length===1?`\\u7121\\u52B9\\u306A\\u5165\\u529B: ${p(t.values[0])}\\u304C\\u671F\\u5F85\\u3055\\u308C\\u307E\\u3057\\u305F`:`\\u7121\\u52B9\\u306A\\u9078\\u629E: ${l(t.values,"\\u3001")}\\u306E\\u3044\\u305A\\u308C\\u304B\\u3067\\u3042\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`;case"too_big":{let i=t.inclusive?"\\u4EE5\\u4E0B\\u3067\\u3042\\u308B":"\\u3088\\u308A\\u5C0F\\u3055\\u3044",a=r(t.origin);return a?`\\u5927\\u304D\\u3059\\u304E\\u308B\\u5024: ${t.origin??"\\u5024"}\\u306F${t.maximum.toString()}${a.unit??"\\u8981\\u7D20"}${i}\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:`\\u5927\\u304D\\u3059\\u304E\\u308B\\u5024: ${t.origin??"\\u5024"}\\u306F${t.maximum.toString()}${i}\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`}case"too_small":{let i=t.inclusive?"\\u4EE5\\u4E0A\\u3067\\u3042\\u308B":"\\u3088\\u308A\\u5927\\u304D\\u3044",a=r(t.origin);return a?`\\u5C0F\\u3055\\u3059\\u304E\\u308B\\u5024: ${t.origin}\\u306F${t.minimum.toString()}${a.unit}${i}\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:`\\u5C0F\\u3055\\u3059\\u304E\\u308B\\u5024: ${t.origin}\\u306F${t.minimum.toString()}${i}\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u7121\\u52B9\\u306A\\u6587\\u5B57\\u5217: "${i.prefix}"\\u3067\\u59CB\\u307E\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:i.format==="ends_with"?`\\u7121\\u52B9\\u306A\\u6587\\u5B57\\u5217: "${i.suffix}"\\u3067\\u7D42\\u308F\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:i.format==="includes"?`\\u7121\\u52B9\\u306A\\u6587\\u5B57\\u5217: "${i.includes}"\\u3092\\u542B\\u3080\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:i.format==="regex"?`\\u7121\\u52B9\\u306A\\u6587\\u5B57\\u5217: \\u30D1\\u30BF\\u30FC\\u30F3${i.pattern}\\u306B\\u4E00\\u81F4\\u3059\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`:`\\u7121\\u52B9\\u306A${o[i.format]??t.format}`}case"not_multiple_of":return`\\u7121\\u52B9\\u306A\\u6570\\u5024: ${t.divisor}\\u306E\\u500D\\u6570\\u3067\\u3042\\u308B\\u5FC5\\u8981\\u304C\\u3042\\u308A\\u307E\\u3059`;case"unrecognized_keys":return`\\u8A8D\\u8B58\\u3055\\u308C\\u3066\\u3044\\u306A\\u3044\\u30AD\\u30FC${t.keys.length>1?"\\u7FA4":""}: ${l(t.keys,"\\u3001")}`;case"invalid_key":return`${t.origin}\\u5185\\u306E\\u7121\\u52B9\\u306A\\u30AD\\u30FC`;case"invalid_union":return"\\u7121\\u52B9\\u306A\\u5165\\u529B";case"invalid_element":return`${t.origin}\\u5185\\u306E\\u7121\\u52B9\\u306A\\u5024`;default:return"\\u7121\\u52B9\\u306A\\u5165\\u529B"}}};function Lu(){return{localeError:Ll()}}var Cl=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"\\u10E0\\u10D8\\u10EA\\u10EE\\u10D5\\u10D8";case"object":{if(Array.isArray(e))return"\\u10DB\\u10D0\\u10E1\\u10D8\\u10D5\\u10D8";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return{string:"\\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8",boolean:"\\u10D1\\u10E3\\u10DA\\u10D4\\u10D0\\u10DC\\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\\u10E4\\u10E3\\u10DC\\u10E5\\u10EA\\u10D8\\u10D0"}[r]??r},Vl=()=>{let e={string:{unit:"\\u10E1\\u10D8\\u10DB\\u10D1\\u10DD\\u10DA\\u10DD",verb:"\\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D8\\u10EA\\u10D0\\u10D5\\u10D3\\u10D4\\u10E1"},file:{unit:"\\u10D1\\u10D0\\u10D8\\u10E2\\u10D8",verb:"\\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D8\\u10EA\\u10D0\\u10D5\\u10D3\\u10D4\\u10E1"},array:{unit:"\\u10D4\\u10DA\\u10D4\\u10DB\\u10D4\\u10DC\\u10E2\\u10D8",verb:"\\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D8\\u10EA\\u10D0\\u10D5\\u10D3\\u10D4\\u10E1"},set:{unit:"\\u10D4\\u10DA\\u10D4\\u10DB\\u10D4\\u10DC\\u10E2\\u10D8",verb:"\\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D8\\u10EA\\u10D0\\u10D5\\u10D3\\u10D4\\u10E1"}};function r(o){return e[o]??null}let n={regex:"\\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0",email:"\\u10D4\\u10DA-\\u10E4\\u10DD\\u10E1\\u10E2\\u10D8\\u10E1 \\u10DB\\u10D8\\u10E1\\u10D0\\u10DB\\u10D0\\u10E0\\u10D7\\u10D8",url:"URL",emoji:"\\u10D4\\u10DB\\u10DD\\u10EF\\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u10D7\\u10D0\\u10E0\\u10D8\\u10E6\\u10D8-\\u10D3\\u10E0\\u10DD",date:"\\u10D7\\u10D0\\u10E0\\u10D8\\u10E6\\u10D8",time:"\\u10D3\\u10E0\\u10DD",duration:"\\u10EE\\u10D0\\u10DC\\u10D2\\u10E0\\u10EB\\u10DA\\u10D8\\u10D5\\u10DD\\u10D1\\u10D0",ipv4:"IPv4 \\u10DB\\u10D8\\u10E1\\u10D0\\u10DB\\u10D0\\u10E0\\u10D7\\u10D8",ipv6:"IPv6 \\u10DB\\u10D8\\u10E1\\u10D0\\u10DB\\u10D0\\u10E0\\u10D7\\u10D8",cidrv4:"IPv4 \\u10D3\\u10D8\\u10D0\\u10DE\\u10D0\\u10D6\\u10DD\\u10DC\\u10D8",cidrv6:"IPv6 \\u10D3\\u10D8\\u10D0\\u10DE\\u10D0\\u10D6\\u10DD\\u10DC\\u10D8",base64:"base64-\\u10D9\\u10DD\\u10D3\\u10D8\\u10E0\\u10D4\\u10D1\\u10E3\\u10DA\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8",base64url:"base64url-\\u10D9\\u10DD\\u10D3\\u10D8\\u10E0\\u10D4\\u10D1\\u10E3\\u10DA\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8",json_string:"JSON \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8",e164:"E.164 \\u10DC\\u10DD\\u10DB\\u10D4\\u10E0\\u10D8",jwt:"JWT",template_literal:"\\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0"};return o=>{switch(o.code){case"invalid_type":return`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${o.expected}, \\u10DB\\u10D8\\u10E6\\u10D4\\u10D1\\u10E3\\u10DA\\u10D8 ${Cl(o.input)}`;case"invalid_value":return o.values.length===1?`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${p(o.values[0])}`:`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10D5\\u10D0\\u10E0\\u10D8\\u10D0\\u10DC\\u10E2\\u10D8: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8\\u10D0 \\u10D4\\u10E0\\u10D7-\\u10D4\\u10E0\\u10D7\\u10D8 ${l(o.values,"|")}-\\u10D3\\u10D0\\u10DC`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`\\u10D6\\u10D4\\u10D3\\u10DB\\u10D4\\u10E2\\u10D0\\u10D3 \\u10D3\\u10D8\\u10D3\\u10D8: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${o.origin??"\\u10DB\\u10DC\\u10D8\\u10E8\\u10D5\\u10DC\\u10D4\\u10DA\\u10DD\\u10D1\\u10D0"} ${i.verb} ${t}${o.maximum.toString()} ${i.unit}`:`\\u10D6\\u10D4\\u10D3\\u10DB\\u10D4\\u10E2\\u10D0\\u10D3 \\u10D3\\u10D8\\u10D3\\u10D8: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${o.origin??"\\u10DB\\u10DC\\u10D8\\u10E8\\u10D5\\u10DC\\u10D4\\u10DA\\u10DD\\u10D1\\u10D0"} \\u10D8\\u10E7\\u10DD\\u10E1 ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`\\u10D6\\u10D4\\u10D3\\u10DB\\u10D4\\u10E2\\u10D0\\u10D3 \\u10DE\\u10D0\\u10E2\\u10D0\\u10E0\\u10D0: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${o.origin} ${i.verb} ${t}${o.minimum.toString()} ${i.unit}`:`\\u10D6\\u10D4\\u10D3\\u10DB\\u10D4\\u10E2\\u10D0\\u10D3 \\u10DE\\u10D0\\u10E2\\u10D0\\u10E0\\u10D0: \\u10DB\\u10DD\\u10E1\\u10D0\\u10DA\\u10DD\\u10D3\\u10DC\\u10D4\\u10DA\\u10D8 ${o.origin} \\u10D8\\u10E7\\u10DD\\u10E1 ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8: \\u10E3\\u10DC\\u10D3\\u10D0 \\u10D8\\u10EC\\u10E7\\u10D4\\u10D1\\u10DD\\u10D3\\u10D4\\u10E1 "${t.prefix}"-\\u10D8\\u10D7`:t.format==="ends_with"?`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8: \\u10E3\\u10DC\\u10D3\\u10D0 \\u10DB\\u10D7\\u10D0\\u10D5\\u10E0\\u10D3\\u10D4\\u10D1\\u10DD\\u10D3\\u10D4\\u10E1 "${t.suffix}"-\\u10D8\\u10D7`:t.format==="includes"?`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8: \\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D8\\u10EA\\u10D0\\u10D5\\u10D3\\u10D4\\u10E1 "${t.includes}"-\\u10E1`:t.format==="regex"?`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E1\\u10E2\\u10E0\\u10D8\\u10DC\\u10D2\\u10D8: \\u10E3\\u10DC\\u10D3\\u10D0 \\u10E8\\u10D4\\u10D4\\u10E1\\u10D0\\u10D1\\u10D0\\u10DB\\u10D4\\u10D1\\u10DD\\u10D3\\u10D4\\u10E1 \\u10E8\\u10D0\\u10D1\\u10DA\\u10DD\\u10DC\\u10E1 ${t.pattern}`:`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 ${n[t.format]??o.format}`}case"not_multiple_of":return`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E0\\u10D8\\u10EA\\u10EE\\u10D5\\u10D8: \\u10E3\\u10DC\\u10D3\\u10D0 \\u10D8\\u10E7\\u10DD\\u10E1 ${o.divisor}-\\u10D8\\u10E1 \\u10EF\\u10D4\\u10E0\\u10D0\\u10D3\\u10D8`;case"unrecognized_keys":return`\\u10E3\\u10EA\\u10DC\\u10DD\\u10D1\\u10D8 \\u10D2\\u10D0\\u10E1\\u10D0\\u10E6\\u10D4\\u10D1${o.keys.length>1?"\\u10D4\\u10D1\\u10D8":"\\u10D8"}: ${l(o.keys,", ")}`;case"invalid_key":return`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10D2\\u10D0\\u10E1\\u10D0\\u10E6\\u10D4\\u10D1\\u10D8 ${o.origin}-\\u10E8\\u10D8`;case"invalid_union":return"\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0";case"invalid_element":return`\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10DB\\u10DC\\u10D8\\u10E8\\u10D5\\u10DC\\u10D4\\u10DA\\u10DD\\u10D1\\u10D0 ${o.origin}-\\u10E8\\u10D8`;default:return"\\u10D0\\u10E0\\u10D0\\u10E1\\u10EC\\u10DD\\u10E0\\u10D8 \\u10E8\\u10D4\\u10E7\\u10D5\\u10D0\\u10DC\\u10D0"}}};function Cu(){return{localeError:Vl()}}var Fl=()=>{let e={string:{unit:"\\u178F\\u17BD\\u17A2\\u1780\\u17D2\\u179F\\u179A",verb:"\\u1782\\u17BD\\u179A\\u1798\\u17B6\\u1793"},file:{unit:"\\u1794\\u17C3",verb:"\\u1782\\u17BD\\u179A\\u1798\\u17B6\\u1793"},array:{unit:"\\u1792\\u17B6\\u178F\\u17BB",verb:"\\u1782\\u17BD\\u179A\\u1798\\u17B6\\u1793"},set:{unit:"\\u1792\\u17B6\\u178F\\u17BB",verb:"\\u1782\\u17BD\\u179A\\u1798\\u17B6\\u1793"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"\\u1798\\u17B7\\u1793\\u1798\\u17C2\\u1793\\u1787\\u17B6\\u179B\\u17C1\\u1781 (NaN)":"\\u179B\\u17C1\\u1781";case"object":{if(Array.isArray(t))return"\\u17A2\\u17B6\\u179A\\u17C1 (Array)";if(t===null)return"\\u1782\\u17D2\\u1798\\u17B6\\u1793\\u178F\\u1798\\u17D2\\u179B\\u17C3 (null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B",email:"\\u17A2\\u17B6\\u179F\\u1799\\u178A\\u17D2\\u178B\\u17B6\\u1793\\u17A2\\u17CA\\u17B8\\u1798\\u17C2\\u179B",url:"URL",emoji:"\\u179F\\u1789\\u17D2\\u1789\\u17B6\\u17A2\\u17B6\\u179A\\u1798\\u17D2\\u1798\\u178E\\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791 \\u1793\\u17B7\\u1784\\u1798\\u17C9\\u17C4\\u1784 ISO",date:"\\u1780\\u17B6\\u179B\\u1794\\u179A\\u17B7\\u1785\\u17D2\\u1786\\u17C1\\u1791 ISO",time:"\\u1798\\u17C9\\u17C4\\u1784 ISO",duration:"\\u179A\\u1799\\u17C8\\u1796\\u17C1\\u179B ISO",ipv4:"\\u17A2\\u17B6\\u179F\\u1799\\u178A\\u17D2\\u178B\\u17B6\\u1793 IPv4",ipv6:"\\u17A2\\u17B6\\u179F\\u1799\\u178A\\u17D2\\u178B\\u17B6\\u1793 IPv6",cidrv4:"\\u178A\\u17C2\\u1793\\u17A2\\u17B6\\u179F\\u1799\\u178A\\u17D2\\u178B\\u17B6\\u1793 IPv4",cidrv6:"\\u178A\\u17C2\\u1793\\u17A2\\u17B6\\u179F\\u1799\\u178A\\u17D2\\u178B\\u17B6\\u1793 IPv6",base64:"\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u17A2\\u17CA\\u17B7\\u1780\\u17BC\\u178A base64",base64url:"\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u17A2\\u17CA\\u17B7\\u1780\\u17BC\\u178A base64url",json_string:"\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A JSON",e164:"\\u179B\\u17C1\\u1781 E.164",jwt:"JWT",template_literal:"\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B"};return t=>{switch(t.code){case"invalid_type":return`\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${t.expected} \\u1794\\u17C9\\u17BB\\u1793\\u17D2\\u178F\\u17C2\\u1791\\u1791\\u17BD\\u179B\\u1794\\u17B6\\u1793 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1794\\u1789\\u17D2\\u1785\\u17BC\\u179B\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${p(t.values[0])}`:`\\u1787\\u1798\\u17D2\\u179A\\u17BE\\u179F\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1787\\u17B6\\u1798\\u17BD\\u1799\\u1780\\u17D2\\u1793\\u17BB\\u1784\\u1785\\u17C6\\u178E\\u17C4\\u1798 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u1792\\u17C6\\u1796\\u17C1\\u1780\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${t.origin??"\\u178F\\u1798\\u17D2\\u179B\\u17C3"} ${i} ${t.maximum.toString()} ${a.unit??"\\u1792\\u17B6\\u178F\\u17BB"}`:`\\u1792\\u17C6\\u1796\\u17C1\\u1780\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${t.origin??"\\u178F\\u1798\\u17D2\\u179B\\u17C3"} ${i} ${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u178F\\u17BC\\u1785\\u1796\\u17C1\\u1780\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${t.origin} ${i} ${t.minimum.toString()} ${a.unit}`:`\\u178F\\u17BC\\u1785\\u1796\\u17C1\\u1780\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1780\\u17B6\\u179A ${t.origin} ${i} ${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1785\\u17B6\\u1794\\u17CB\\u1795\\u17D2\\u178F\\u17BE\\u1798\\u178A\\u17C4\\u1799 "${i.prefix}"`:i.format==="ends_with"?`\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1794\\u1789\\u17D2\\u1785\\u1794\\u17CB\\u178A\\u17C4\\u1799 "${i.suffix}"`:i.format==="includes"?`\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1798\\u17B6\\u1793 "${i.includes}"`:i.format==="regex"?`\\u1781\\u17D2\\u179F\\u17C2\\u17A2\\u1780\\u17D2\\u179F\\u179A\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u178F\\u17C2\\u1795\\u17D2\\u1782\\u17BC\\u1795\\u17D2\\u1782\\u1784\\u1793\\u17B9\\u1784\\u1791\\u1798\\u17D2\\u179A\\u1784\\u17CB\\u178A\\u17C2\\u179B\\u1794\\u17B6\\u1793\\u1780\\u17C6\\u178E\\u178F\\u17CB ${i.pattern}`:`\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u179B\\u17C1\\u1781\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u17D6 \\u178F\\u17D2\\u179A\\u17BC\\u179C\\u178F\\u17C2\\u1787\\u17B6\\u1796\\u17A0\\u17BB\\u1782\\u17BB\\u178E\\u1793\\u17C3 ${t.divisor}`;case"unrecognized_keys":return`\\u179A\\u1780\\u1783\\u17BE\\u1789\\u179F\\u17C4\\u1798\\u17B7\\u1793\\u179F\\u17D2\\u1782\\u17B6\\u179B\\u17CB\\u17D6 ${l(t.keys,", ")}`;case"invalid_key":return`\\u179F\\u17C4\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1793\\u17C5\\u1780\\u17D2\\u1793\\u17BB\\u1784 ${t.origin}`;case"invalid_union":return"\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C";case"invalid_element":return`\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C\\u1793\\u17C5\\u1780\\u17D2\\u1793\\u17BB\\u1784 ${t.origin}`;default:return"\\u1791\\u17B7\\u1793\\u17D2\\u1793\\u1793\\u17D0\\u1799\\u1798\\u17B7\\u1793\\u178F\\u17D2\\u179A\\u17B9\\u1798\\u178F\\u17D2\\u179A\\u17BC\\u179C"}}};function qt(){return{localeError:Fl()}}function Vu(){return qt()}var Jl=()=>{let e={string:{unit:"\\uBB38\\uC790",verb:"to have"},file:{unit:"\\uBC14\\uC774\\uD2B8",verb:"to have"},array:{unit:"\\uAC1C",verb:"to have"},set:{unit:"\\uAC1C",verb:"to have"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\uC785\\uB825",email:"\\uC774\\uBA54\\uC77C \\uC8FC\\uC18C",url:"URL",emoji:"\\uC774\\uBAA8\\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\uB0A0\\uC9DC\\uC2DC\\uAC04",date:"ISO \\uB0A0\\uC9DC",time:"ISO \\uC2DC\\uAC04",duration:"ISO \\uAE30\\uAC04",ipv4:"IPv4 \\uC8FC\\uC18C",ipv6:"IPv6 \\uC8FC\\uC18C",cidrv4:"IPv4 \\uBC94\\uC704",cidrv6:"IPv6 \\uBC94\\uC704",base64:"base64 \\uC778\\uCF54\\uB529 \\uBB38\\uC790\\uC5F4",base64url:"base64url \\uC778\\uCF54\\uB529 \\uBB38\\uC790\\uC5F4",json_string:"JSON \\uBB38\\uC790\\uC5F4",e164:"E.164 \\uBC88\\uD638",jwt:"JWT",template_literal:"\\uC785\\uB825"};return t=>{switch(t.code){case"invalid_type":return`\\uC798\\uBABB\\uB41C \\uC785\\uB825: \\uC608\\uC0C1 \\uD0C0\\uC785\\uC740 ${t.expected}, \\uBC1B\\uC740 \\uD0C0\\uC785\\uC740 ${n(t.input)}\\uC785\\uB2C8\\uB2E4`;case"invalid_value":return t.values.length===1?`\\uC798\\uBABB\\uB41C \\uC785\\uB825: \\uAC12\\uC740 ${p(t.values[0])} \\uC774\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4`:`\\uC798\\uBABB\\uB41C \\uC635\\uC158: ${l(t.values,"\\uB610\\uB294 ")} \\uC911 \\uD558\\uB098\\uC5EC\\uC57C \\uD569\\uB2C8\\uB2E4`;case"too_big":{let i=t.inclusive?"\\uC774\\uD558":"\\uBBF8\\uB9CC",a=i==="\\uBBF8\\uB9CC"?"\\uC774\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4":"\\uC5EC\\uC57C \\uD569\\uB2C8\\uB2E4",u=r(t.origin),s=u?.unit??"\\uC694\\uC18C";return u?`${t.origin??"\\uAC12"}\\uC774 \\uB108\\uBB34 \\uD07D\\uB2C8\\uB2E4: ${t.maximum.toString()}${s} ${i}${a}`:`${t.origin??"\\uAC12"}\\uC774 \\uB108\\uBB34 \\uD07D\\uB2C8\\uB2E4: ${t.maximum.toString()} ${i}${a}`}case"too_small":{let i=t.inclusive?"\\uC774\\uC0C1":"\\uCD08\\uACFC",a=i==="\\uC774\\uC0C1"?"\\uC774\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4":"\\uC5EC\\uC57C \\uD569\\uB2C8\\uB2E4",u=r(t.origin),s=u?.unit??"\\uC694\\uC18C";return u?`${t.origin??"\\uAC12"}\\uC774 \\uB108\\uBB34 \\uC791\\uC2B5\\uB2C8\\uB2E4: ${t.minimum.toString()}${s} ${i}${a}`:`${t.origin??"\\uAC12"}\\uC774 \\uB108\\uBB34 \\uC791\\uC2B5\\uB2C8\\uB2E4: ${t.minimum.toString()} ${i}${a}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\uC798\\uBABB\\uB41C \\uBB38\\uC790\\uC5F4: "${i.prefix}"(\\uC73C)\\uB85C \\uC2DC\\uC791\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4`:i.format==="ends_with"?`\\uC798\\uBABB\\uB41C \\uBB38\\uC790\\uC5F4: "${i.suffix}"(\\uC73C)\\uB85C \\uB05D\\uB098\\uC57C \\uD569\\uB2C8\\uB2E4`:i.format==="includes"?`\\uC798\\uBABB\\uB41C \\uBB38\\uC790\\uC5F4: "${i.includes}"\\uC744(\\uB97C) \\uD3EC\\uD568\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4`:i.format==="regex"?`\\uC798\\uBABB\\uB41C \\uBB38\\uC790\\uC5F4: \\uC815\\uADDC\\uC2DD ${i.pattern} \\uD328\\uD134\\uACFC \\uC77C\\uCE58\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4`:`\\uC798\\uBABB\\uB41C ${o[i.format]??t.format}`}case"not_multiple_of":return`\\uC798\\uBABB\\uB41C \\uC22B\\uC790: ${t.divisor}\\uC758 \\uBC30\\uC218\\uC5EC\\uC57C \\uD569\\uB2C8\\uB2E4`;case"unrecognized_keys":return`\\uC778\\uC2DD\\uD560 \\uC218 \\uC5C6\\uB294 \\uD0A4: ${l(t.keys,", ")}`;case"invalid_key":return`\\uC798\\uBABB\\uB41C \\uD0A4: ${t.origin}`;case"invalid_union":return"\\uC798\\uBABB\\uB41C \\uC785\\uB825";case"invalid_element":return`\\uC798\\uBABB\\uB41C \\uAC12: ${t.origin}`;default:return"\\uC798\\uBABB\\uB41C \\uC785\\uB825"}}};function Fu(){return{localeError:Jl()}}var Ml=e=>et(typeof e,e),et=(e,r=void 0)=>{switch(e){case"number":return Number.isNaN(r)?"NaN":"skai\\u010Dius";case"bigint":return"sveikasis skai\\u010Dius";case"string":return"eilut\\u0117";case"boolean":return"login\\u0117 reik\\u0161m\\u0117";case"undefined":case"void":return"neapibr\\u0117\\u017Eta reik\\u0161m\\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return r===void 0?"ne\\u017Einomas objektas":r===null?"nulin\\u0117 reik\\u0161m\\u0117":Array.isArray(r)?"masyvas":Object.getPrototypeOf(r)!==Object.prototype&&r.constructor?r.constructor.name:"objektas";case"null":return"nulin\\u0117 reik\\u0161m\\u0117"}return e},He=e=>e.charAt(0).toUpperCase()+e.slice(1);function Ju(e){let r=Math.abs(e),n=r%10,o=r%100;return o>=11&&o<=19||n===0?"many":n===1?"one":"few"}var Bl=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\\u0173"},verb:{smaller:{inclusive:"turi b\\u016Bti ne ilgesn\\u0117 kaip",notInclusive:"turi b\\u016Bti trumpesn\\u0117 kaip"},bigger:{inclusive:"turi b\\u016Bti ne trumpesn\\u0117 kaip",notInclusive:"turi b\\u016Bti ilgesn\\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\\u0173"},verb:{smaller:{inclusive:"turi b\\u016Bti ne didesnis kaip",notInclusive:"turi b\\u016Bti ma\\u017Eesnis kaip"},bigger:{inclusive:"turi b\\u016Bti ne ma\\u017Eesnis kaip",notInclusive:"turi b\\u016Bti didesnis kaip"}}},array:{unit:{one:"element\\u0105",few:"elementus",many:"element\\u0173"},verb:{smaller:{inclusive:"turi tur\\u0117ti ne daugiau kaip",notInclusive:"turi tur\\u0117ti ma\\u017Eiau kaip"},bigger:{inclusive:"turi tur\\u0117ti ne ma\\u017Eiau kaip",notInclusive:"turi tur\\u0117ti daugiau kaip"}}},set:{unit:{one:"element\\u0105",few:"elementus",many:"element\\u0173"},verb:{smaller:{inclusive:"turi tur\\u0117ti ne daugiau kaip",notInclusive:"turi tur\\u0117ti ma\\u017Eiau kaip"},bigger:{inclusive:"turi tur\\u0117ti ne ma\\u017Eiau kaip",notInclusive:"turi tur\\u0117ti daugiau kaip"}}}};function r(o,t,i,a){let u=e[o]??null;return u===null?u:{unit:u.unit[t],verb:u.verb[a][i?"inclusive":"notInclusive"]}}let n={regex:"\\u012Fvestis",email:"el. pa\\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\\u017Ekoduota eilut\\u0117",base64url:"base64url u\\u017Ekoduota eilut\\u0117",json_string:"JSON eilut\\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\\u012Fvestis"};return o=>{switch(o.code){case"invalid_type":return`Gautas tipas ${Ml(o.input)}, o tik\\u0117tasi - ${et(o.expected)}`;case"invalid_value":return o.values.length===1?`Privalo b\\u016Bti ${p(o.values[0])}`:`Privalo b\\u016Bti vienas i\\u0161 ${l(o.values,"|")} pasirinkim\\u0173`;case"too_big":{let t=et(o.origin),i=r(o.origin,Ju(Number(o.maximum)),o.inclusive??!1,"smaller");if(i?.verb)return`${He(t??o.origin??"reik\\u0161m\\u0117")} ${i.verb} ${o.maximum.toString()} ${i.unit??"element\\u0173"}`;let a=o.inclusive?"ne didesnis kaip":"ma\\u017Eesnis kaip";return`${He(t??o.origin??"reik\\u0161m\\u0117")} turi b\\u016Bti ${a} ${o.maximum.toString()} ${i?.unit}`}case"too_small":{let t=et(o.origin),i=r(o.origin,Ju(Number(o.minimum)),o.inclusive??!1,"bigger");if(i?.verb)return`${He(t??o.origin??"reik\\u0161m\\u0117")} ${i.verb} ${o.minimum.toString()} ${i.unit??"element\\u0173"}`;let a=o.inclusive?"ne ma\\u017Eesnis kaip":"didesnis kaip";return`${He(t??o.origin??"reik\\u0161m\\u0117")} turi b\\u016Bti ${a} ${o.minimum.toString()} ${i?.unit}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`Eilut\\u0117 privalo prasid\\u0117ti "${t.prefix}"`:t.format==="ends_with"?`Eilut\\u0117 privalo pasibaigti "${t.suffix}"`:t.format==="includes"?`Eilut\\u0117 privalo \\u012Ftraukti "${t.includes}"`:t.format==="regex"?`Eilut\\u0117 privalo atitikti ${t.pattern}`:`Neteisingas ${n[t.format]??o.format}`}case"not_multiple_of":return`Skai\\u010Dius privalo b\\u016Bti ${o.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\\u017Eint${o.keys.length>1?"i":"as"} rakt${o.keys.length>1?"ai":"as"}: ${l(o.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \\u012Fvestis";case"invalid_element":{let t=et(o.origin);return`${He(t??o.origin??"reik\\u0161m\\u0117")} turi klaiding\\u0105 \\u012Fvest\\u012F`}default:return"Klaidinga \\u012Fvestis"}}};function Mu(){return{localeError:Bl()}}var Kl=()=>{let e={string:{unit:"\\u0437\\u043D\\u0430\\u0446\\u0438",verb:"\\u0434\\u0430 \\u0438\\u043C\\u0430\\u0430\\u0442"},file:{unit:"\\u0431\\u0430\\u0458\\u0442\\u0438",verb:"\\u0434\\u0430 \\u0438\\u043C\\u0430\\u0430\\u0442"},array:{unit:"\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438",verb:"\\u0434\\u0430 \\u0438\\u043C\\u0430\\u0430\\u0442"},set:{unit:"\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438",verb:"\\u0434\\u0430 \\u0438\\u043C\\u0430\\u0430\\u0442"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0431\\u0440\\u043E\\u0458";case"object":{if(Array.isArray(t))return"\\u043D\\u0438\\u0437\\u0430";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0432\\u043D\\u0435\\u0441",email:"\\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u043D\\u0430 \\u0435-\\u043F\\u043E\\u0448\\u0442\\u0430",url:"URL",emoji:"\\u0435\\u043C\\u043E\\u045F\\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u0434\\u0430\\u0442\\u0443\\u043C \\u0438 \\u0432\\u0440\\u0435\\u043C\\u0435",date:"ISO \\u0434\\u0430\\u0442\\u0443\\u043C",time:"ISO \\u0432\\u0440\\u0435\\u043C\\u0435",duration:"ISO \\u0432\\u0440\\u0435\\u043C\\u0435\\u0442\\u0440\\u0430\\u0435\\u045A\\u0435",ipv4:"IPv4 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430",ipv6:"IPv6 \\u0430\\u0434\\u0440\\u0435\\u0441\\u0430",cidrv4:"IPv4 \\u043E\\u043F\\u0441\\u0435\\u0433",cidrv6:"IPv6 \\u043E\\u043F\\u0441\\u0435\\u0433",base64:"base64-\\u0435\\u043D\\u043A\\u043E\\u0434\\u0438\\u0440\\u0430\\u043D\\u0430 \\u043D\\u0438\\u0437\\u0430",base64url:"base64url-\\u0435\\u043D\\u043A\\u043E\\u0434\\u0438\\u0440\\u0430\\u043D\\u0430 \\u043D\\u0438\\u0437\\u0430",json_string:"JSON \\u043D\\u0438\\u0437\\u0430",e164:"E.164 \\u0431\\u0440\\u043E\\u0458",jwt:"JWT",template_literal:"\\u0432\\u043D\\u0435\\u0441"};return t=>{switch(t.code){case"invalid_type":return`\\u0413\\u0440\\u0435\\u0448\\u0435\\u043D \\u0432\\u043D\\u0435\\u0441: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 ${t.expected}, \\u043F\\u0440\\u0438\\u043C\\u0435\\u043D\\u043E ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Invalid input: expected ${p(t.values[0])}`:`\\u0413\\u0440\\u0435\\u0448\\u0430\\u043D\\u0430 \\u043E\\u043F\\u0446\\u0438\\u0458\\u0430: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 \\u0435\\u0434\\u043D\\u0430 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u041F\\u0440\\u0435\\u043C\\u043D\\u043E\\u0433\\u0443 \\u0433\\u043E\\u043B\\u0435\\u043C: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 ${t.origin??"\\u0432\\u0440\\u0435\\u0434\\u043D\\u043E\\u0441\\u0442\\u0430"} \\u0434\\u0430 \\u0438\\u043C\\u0430 ${i}${t.maximum.toString()} ${a.unit??"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0438"}`:`\\u041F\\u0440\\u0435\\u043C\\u043D\\u043E\\u0433\\u0443 \\u0433\\u043E\\u043B\\u0435\\u043C: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 ${t.origin??"\\u0432\\u0440\\u0435\\u0434\\u043D\\u043E\\u0441\\u0442\\u0430"} \\u0434\\u0430 \\u0431\\u0438\\u0434\\u0435 ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u041F\\u0440\\u0435\\u043C\\u043D\\u043E\\u0433\\u0443 \\u043C\\u0430\\u043B: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 ${t.origin} \\u0434\\u0430 \\u0438\\u043C\\u0430 ${i}${t.minimum.toString()} ${a.unit}`:`\\u041F\\u0440\\u0435\\u043C\\u043D\\u043E\\u0433\\u0443 \\u043C\\u0430\\u043B: \\u0441\\u0435 \\u043E\\u0447\\u0435\\u043A\\u0443\\u0432\\u0430 ${t.origin} \\u0434\\u0430 \\u0431\\u0438\\u0434\\u0435 ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u041D\\u0435\\u0432\\u0430\\u0436\\u0435\\u0447\\u043A\\u0430 \\u043D\\u0438\\u0437\\u0430: \\u043C\\u043E\\u0440\\u0430 \\u0434\\u0430 \\u0437\\u0430\\u043F\\u043E\\u0447\\u043D\\u0443\\u0432\\u0430 \\u0441\\u043E "${i.prefix}"`:i.format==="ends_with"?`\\u041D\\u0435\\u0432\\u0430\\u0436\\u0435\\u0447\\u043A\\u0430 \\u043D\\u0438\\u0437\\u0430: \\u043C\\u043E\\u0440\\u0430 \\u0434\\u0430 \\u0437\\u0430\\u0432\\u0440\\u0448\\u0443\\u0432\\u0430 \\u0441\\u043E "${i.suffix}"`:i.format==="includes"?`\\u041D\\u0435\\u0432\\u0430\\u0436\\u0435\\u0447\\u043A\\u0430 \\u043D\\u0438\\u0437\\u0430: \\u043C\\u043E\\u0440\\u0430 \\u0434\\u0430 \\u0432\\u043A\\u043B\\u0443\\u0447\\u0443\\u0432\\u0430 "${i.includes}"`:i.format==="regex"?`\\u041D\\u0435\\u0432\\u0430\\u0436\\u0435\\u0447\\u043A\\u0430 \\u043D\\u0438\\u0437\\u0430: \\u043C\\u043E\\u0440\\u0430 \\u0434\\u0430 \\u043E\\u0434\\u0433\\u043E\\u0430\\u0440\\u0430 \\u043D\\u0430 \\u043F\\u0430\\u0442\\u0435\\u0440\\u043D\\u043E\\u0442 ${i.pattern}`:`Invalid ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u0413\\u0440\\u0435\\u0448\\u0435\\u043D \\u0431\\u0440\\u043E\\u0458: \\u043C\\u043E\\u0440\\u0430 \\u0434\\u0430 \\u0431\\u0438\\u0434\\u0435 \\u0434\\u0435\\u043B\\u0438\\u0432 \\u0441\\u043E ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"\\u041D\\u0435\\u043F\\u0440\\u0435\\u043F\\u043E\\u0437\\u043D\\u0430\\u0435\\u043D\\u0438 \\u043A\\u043B\\u0443\\u0447\\u0435\\u0432\\u0438":"\\u041D\\u0435\\u043F\\u0440\\u0435\\u043F\\u043E\\u0437\\u043D\\u0430\\u0435\\u043D \\u043A\\u043B\\u0443\\u0447"}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u0413\\u0440\\u0435\\u0448\\u0435\\u043D \\u043A\\u043B\\u0443\\u0447 \\u0432\\u043E ${t.origin}`;case"invalid_union":return"\\u0413\\u0440\\u0435\\u0448\\u0435\\u043D \\u0432\\u043D\\u0435\\u0441";case"invalid_element":return`\\u0413\\u0440\\u0435\\u0448\\u043D\\u0430 \\u0432\\u0440\\u0435\\u0434\\u043D\\u043E\\u0441\\u0442 \\u0432\\u043E ${t.origin}`;default:return"\\u0413\\u0440\\u0435\\u0448\\u0435\\u043D \\u0432\\u043D\\u0435\\u0441"}}};function Bu(){return{localeError:Kl()}}var Gl=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"nombor";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`Input tidak sah: dijangka ${t.expected}, diterima ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Input tidak sah: dijangka ${p(t.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Terlalu besar: dijangka ${t.origin??"nilai"} ${a.verb} ${i}${t.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${t.origin??"nilai"} adalah ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Terlalu kecil: dijangka ${t.origin} ${a.verb} ${i}${t.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${t.origin} adalah ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`String tidak sah: mesti bermula dengan "${i.prefix}"`:i.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${i.suffix}"`:i.format==="includes"?`String tidak sah: mesti mengandungi "${i.includes}"`:i.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${i.pattern}`:`${o[i.format]??t.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${t.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${l(t.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${t.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${t.origin}`;default:return"Input tidak sah"}}};function Ku(){return{localeError:Gl()}}var Wl=()=>{let e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"getal";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return t=>{switch(t.code){case"invalid_type":return`Ongeldige invoer: verwacht ${t.expected}, ontving ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Ongeldige invoer: verwacht ${p(t.values[0])}`:`Ongeldige optie: verwacht \\xE9\\xE9n van ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Te lang: verwacht dat ${t.origin??"waarde"} ${i}${t.maximum.toString()} ${a.unit??"elementen"} bevat`:`Te lang: verwacht dat ${t.origin??"waarde"} ${i}${t.maximum.toString()} is`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Te kort: verwacht dat ${t.origin} ${i}${t.minimum.toString()} ${a.unit} bevat`:`Te kort: verwacht dat ${t.origin} ${i}${t.minimum.toString()} is`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Ongeldige tekst: moet met "${i.prefix}" beginnen`:i.format==="ends_with"?`Ongeldige tekst: moet op "${i.suffix}" eindigen`:i.format==="includes"?`Ongeldige tekst: moet "${i.includes}" bevatten`:i.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${i.pattern}`:`Ongeldig: ${o[i.format]??t.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${t.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${t.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${t.origin}`;default:return"Ongeldige invoer"}}};function Gu(){return{localeError:Wl()}}var Xl=()=>{let e={string:{unit:"tegn",verb:"\\xE5 ha"},file:{unit:"bytes",verb:"\\xE5 ha"},array:{unit:"elementer",verb:"\\xE5 inneholde"},set:{unit:"elementer",verb:"\\xE5 inneholde"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"tall";case"object":{if(Array.isArray(t))return"liste";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\\xE5de",ipv6:"IPv6-omr\\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`Ugyldig input: forventet ${t.expected}, fikk ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Ugyldig verdi: forventet ${p(t.values[0])}`:`Ugyldig valg: forventet en av ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`For stor(t): forventet ${t.origin??"value"} til \\xE5 ha ${i}${t.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${t.origin??"value"} til \\xE5 ha ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`For lite(n): forventet ${t.origin} til \\xE5 ha ${i}${t.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${t.origin} til \\xE5 ha ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Ugyldig streng: m\\xE5 starte med "${i.prefix}"`:i.format==="ends_with"?`Ugyldig streng: m\\xE5 ende med "${i.suffix}"`:i.format==="includes"?`Ugyldig streng: m\\xE5 inneholde "${i.includes}"`:i.format==="regex"?`Ugyldig streng: m\\xE5 matche m\\xF8nsteret ${i.pattern}`:`Ugyldig ${o[i.format]??t.format}`}case"not_multiple_of":return`Ugyldig tall: m\\xE5 v\\xE6re et multiplum av ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"Ukjente n\\xF8kler":"Ukjent n\\xF8kkel"}: ${l(t.keys,", ")}`;case"invalid_key":return`Ugyldig n\\xF8kkel i ${t.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${t.origin}`;default:return"Ugyldig input"}}};function Wu(){return{localeError:Xl()}}var ql=()=>{let e={string:{unit:"harf",verb:"olmal\\u0131d\\u0131r"},file:{unit:"bayt",verb:"olmal\\u0131d\\u0131r"},array:{unit:"unsur",verb:"olmal\\u0131d\\u0131r"},set:{unit:"unsur",verb:"olmal\\u0131d\\u0131r"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"numara";case"object":{if(Array.isArray(t))return"saf";if(t===null)return"gayb";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"giren",email:"epostag\\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\\xE2m\\u0131",date:"ISO tarihi",time:"ISO zaman\\u0131",duration:"ISO m\\xFCddeti",ipv4:"IPv4 ni\\u015F\\xE2n\\u0131",ipv6:"IPv6 ni\\u015F\\xE2n\\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\\u015Fifreli metin",base64url:"base64url-\\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\\u0131s\\u0131",jwt:"JWT",template_literal:"giren"};return t=>{switch(t.code){case"invalid_type":return`F\\xE2sit giren: umulan ${t.expected}, al\\u0131nan ${n(t.input)}`;case"invalid_value":return t.values.length===1?`F\\xE2sit giren: umulan ${p(t.values[0])}`:`F\\xE2sit tercih: m\\xFBteberler ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Fazla b\\xFCy\\xFCk: ${t.origin??"value"}, ${i}${t.maximum.toString()} ${a.unit??"elements"} sahip olmal\\u0131yd\\u0131.`:`Fazla b\\xFCy\\xFCk: ${t.origin??"value"}, ${i}${t.maximum.toString()} olmal\\u0131yd\\u0131.`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Fazla k\\xFC\\xE7\\xFCk: ${t.origin}, ${i}${t.minimum.toString()} ${a.unit} sahip olmal\\u0131yd\\u0131.`:`Fazla k\\xFC\\xE7\\xFCk: ${t.origin}, ${i}${t.minimum.toString()} olmal\\u0131yd\\u0131.`}case"invalid_format":{let i=t;return i.format==="starts_with"?`F\\xE2sit metin: "${i.prefix}" ile ba\\u015Flamal\\u0131.`:i.format==="ends_with"?`F\\xE2sit metin: "${i.suffix}" ile bitmeli.`:i.format==="includes"?`F\\xE2sit metin: "${i.includes}" ihtiv\\xE2 etmeli.`:i.format==="regex"?`F\\xE2sit metin: ${i.pattern} nak\\u015F\\u0131na uymal\\u0131.`:`F\\xE2sit ${o[i.format]??t.format}`}case"not_multiple_of":return`F\\xE2sit say\\u0131: ${t.divisor} kat\\u0131 olmal\\u0131yd\\u0131.`;case"unrecognized_keys":return`Tan\\u0131nmayan anahtar ${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`${t.origin} i\\xE7in tan\\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\\u0131namad\\u0131.";case"invalid_element":return`${t.origin} i\\xE7in tan\\u0131nmayan k\\u0131ymet var.`;default:return"K\\u0131ymet tan\\u0131namad\\u0131."}}};function Xu(){return{localeError:ql()}}var Yl=()=>{let e={string:{unit:"\\u062A\\u0648\\u06A9\\u064A",verb:"\\u0648\\u0644\\u0631\\u064A"},file:{unit:"\\u0628\\u0627\\u06CC\\u067C\\u0633",verb:"\\u0648\\u0644\\u0631\\u064A"},array:{unit:"\\u062A\\u0648\\u06A9\\u064A",verb:"\\u0648\\u0644\\u0631\\u064A"},set:{unit:"\\u062A\\u0648\\u06A9\\u064A",verb:"\\u0648\\u0644\\u0631\\u064A"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0639\\u062F\\u062F";case"object":{if(Array.isArray(t))return"\\u0627\\u0631\\u06D0";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0648\\u0631\\u0648\\u062F\\u064A",email:"\\u0628\\u0631\\u06CC\\u069A\\u0646\\u0627\\u0644\\u06CC\\u06A9",url:"\\u06CC\\u0648 \\u0622\\u0631 \\u0627\\u0644",emoji:"\\u0627\\u06CC\\u0645\\u0648\\u062C\\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u0646\\u06CC\\u067C\\u0647 \\u0627\\u0648 \\u0648\\u062E\\u062A",date:"\\u0646\\u06D0\\u067C\\u0647",time:"\\u0648\\u062E\\u062A",duration:"\\u0645\\u0648\\u062F\\u0647",ipv4:"\\u062F IPv4 \\u067E\\u062A\\u0647",ipv6:"\\u062F IPv6 \\u067E\\u062A\\u0647",cidrv4:"\\u062F IPv4 \\u0633\\u0627\\u062D\\u0647",cidrv6:"\\u062F IPv6 \\u0633\\u0627\\u062D\\u0647",base64:"base64-encoded \\u0645\\u062A\\u0646",base64url:"base64url-encoded \\u0645\\u062A\\u0646",json_string:"JSON \\u0645\\u062A\\u0646",e164:"\\u062F E.164 \\u0634\\u0645\\u06D0\\u0631\\u0647",jwt:"JWT",template_literal:"\\u0648\\u0631\\u0648\\u062F\\u064A"};return t=>{switch(t.code){case"invalid_type":return`\\u0646\\u0627\\u0633\\u0645 \\u0648\\u0631\\u0648\\u062F\\u064A: \\u0628\\u0627\\u06CC\\u062F ${t.expected} \\u0648\\u0627\\u06CC, \\u0645\\u06AB\\u0631 ${n(t.input)} \\u062A\\u0631\\u0644\\u0627\\u0633\\u0647 \\u0634\\u0648`;case"invalid_value":return t.values.length===1?`\\u0646\\u0627\\u0633\\u0645 \\u0648\\u0631\\u0648\\u062F\\u064A: \\u0628\\u0627\\u06CC\\u062F ${p(t.values[0])} \\u0648\\u0627\\u06CC`:`\\u0646\\u0627\\u0633\\u0645 \\u0627\\u0646\\u062A\\u062E\\u0627\\u0628: \\u0628\\u0627\\u06CC\\u062F \\u06CC\\u0648 \\u0644\\u0647 ${l(t.values,"|")} \\u0685\\u062E\\u0647 \\u0648\\u0627\\u06CC`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u0689\\u06CC\\u0631 \\u0644\\u0648\\u06CC: ${t.origin??"\\u0627\\u0631\\u0632\\u069A\\u062A"} \\u0628\\u0627\\u06CC\\u062F ${i}${t.maximum.toString()} ${a.unit??"\\u0639\\u0646\\u0635\\u0631\\u0648\\u0646\\u0647"} \\u0648\\u0644\\u0631\\u064A`:`\\u0689\\u06CC\\u0631 \\u0644\\u0648\\u06CC: ${t.origin??"\\u0627\\u0631\\u0632\\u069A\\u062A"} \\u0628\\u0627\\u06CC\\u062F ${i}${t.maximum.toString()} \\u0648\\u064A`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u0689\\u06CC\\u0631 \\u06A9\\u0648\\u0686\\u0646\\u06CC: ${t.origin} \\u0628\\u0627\\u06CC\\u062F ${i}${t.minimum.toString()} ${a.unit} \\u0648\\u0644\\u0631\\u064A`:`\\u0689\\u06CC\\u0631 \\u06A9\\u0648\\u0686\\u0646\\u06CC: ${t.origin} \\u0628\\u0627\\u06CC\\u062F ${i}${t.minimum.toString()} \\u0648\\u064A`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u0646\\u0627\\u0633\\u0645 \\u0645\\u062A\\u0646: \\u0628\\u0627\\u06CC\\u062F \\u062F "${i.prefix}" \\u0633\\u0631\\u0647 \\u067E\\u06CC\\u0644 \\u0634\\u064A`:i.format==="ends_with"?`\\u0646\\u0627\\u0633\\u0645 \\u0645\\u062A\\u0646: \\u0628\\u0627\\u06CC\\u062F \\u062F "${i.suffix}" \\u0633\\u0631\\u0647 \\u067E\\u0627\\u06CC \\u062A\\u0647 \\u0648\\u0631\\u0633\\u064A\\u0696\\u064A`:i.format==="includes"?`\\u0646\\u0627\\u0633\\u0645 \\u0645\\u062A\\u0646: \\u0628\\u0627\\u06CC\\u062F "${i.includes}" \\u0648\\u0644\\u0631\\u064A`:i.format==="regex"?`\\u0646\\u0627\\u0633\\u0645 \\u0645\\u062A\\u0646: \\u0628\\u0627\\u06CC\\u062F \\u062F ${i.pattern} \\u0633\\u0631\\u0647 \\u0645\\u0637\\u0627\\u0628\\u0642\\u062A \\u0648\\u0644\\u0631\\u064A`:`${o[i.format]??t.format} \\u0646\\u0627\\u0633\\u0645 \\u062F\\u06CC`}case"not_multiple_of":return`\\u0646\\u0627\\u0633\\u0645 \\u0639\\u062F\\u062F: \\u0628\\u0627\\u06CC\\u062F \\u062F ${t.divisor} \\u0645\\u0636\\u0631\\u0628 \\u0648\\u064A`;case"unrecognized_keys":return`\\u0646\\u0627\\u0633\\u0645 ${t.keys.length>1?"\\u06A9\\u0644\\u06CC\\u0689\\u0648\\u0646\\u0647":"\\u06A9\\u0644\\u06CC\\u0689"}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u0646\\u0627\\u0633\\u0645 \\u06A9\\u0644\\u06CC\\u0689 \\u067E\\u0647 ${t.origin} \\u06A9\\u06D0`;case"invalid_union":return"\\u0646\\u0627\\u0633\\u0645\\u0647 \\u0648\\u0631\\u0648\\u062F\\u064A";case"invalid_element":return`\\u0646\\u0627\\u0633\\u0645 \\u0639\\u0646\\u0635\\u0631 \\u067E\\u0647 ${t.origin} \\u06A9\\u06D0`;default:return"\\u0646\\u0627\\u0633\\u0645\\u0647 \\u0648\\u0631\\u0648\\u062F\\u064A"}}};function qu(){return{localeError:Yl()}}var Ql=()=>{let e={string:{unit:"znak\\xF3w",verb:"mie\\u0107"},file:{unit:"bajt\\xF3w",verb:"mie\\u0107"},array:{unit:"element\\xF3w",verb:"mie\\u0107"},set:{unit:"element\\xF3w",verb:"mie\\u0107"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"liczba";case"object":{if(Array.isArray(t))return"tablica";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"wyra\\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\\u0105g znak\\xF3w zakodowany w formacie base64",base64url:"ci\\u0105g znak\\xF3w zakodowany w formacie base64url",json_string:"ci\\u0105g znak\\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\\u015Bcie"};return t=>{switch(t.code){case"invalid_type":return`Nieprawid\\u0142owe dane wej\\u015Bciowe: oczekiwano ${t.expected}, otrzymano ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Nieprawid\\u0142owe dane wej\\u015Bciowe: oczekiwano ${p(t.values[0])}`:`Nieprawid\\u0142owa opcja: oczekiwano jednej z warto\\u015Bci ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Za du\\u017Ca warto\\u015B\\u0107: oczekiwano, \\u017Ce ${t.origin??"warto\\u015B\\u0107"} b\\u0119dzie mie\\u0107 ${i}${t.maximum.toString()} ${a.unit??"element\\xF3w"}`:`Zbyt du\\u017C(y/a/e): oczekiwano, \\u017Ce ${t.origin??"warto\\u015B\\u0107"} b\\u0119dzie wynosi\\u0107 ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Za ma\\u0142a warto\\u015B\\u0107: oczekiwano, \\u017Ce ${t.origin??"warto\\u015B\\u0107"} b\\u0119dzie mie\\u0107 ${i}${t.minimum.toString()} ${a.unit??"element\\xF3w"}`:`Zbyt ma\\u0142(y/a/e): oczekiwano, \\u017Ce ${t.origin??"warto\\u015B\\u0107"} b\\u0119dzie wynosi\\u0107 ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Nieprawid\\u0142owy ci\\u0105g znak\\xF3w: musi zaczyna\\u0107 si\\u0119 od "${i.prefix}"`:i.format==="ends_with"?`Nieprawid\\u0142owy ci\\u0105g znak\\xF3w: musi ko\\u0144czy\\u0107 si\\u0119 na "${i.suffix}"`:i.format==="includes"?`Nieprawid\\u0142owy ci\\u0105g znak\\xF3w: musi zawiera\\u0107 "${i.includes}"`:i.format==="regex"?`Nieprawid\\u0142owy ci\\u0105g znak\\xF3w: musi odpowiada\\u0107 wzorcowi ${i.pattern}`:`Nieprawid\\u0142ow(y/a/e) ${o[i.format]??t.format}`}case"not_multiple_of":return`Nieprawid\\u0142owa liczba: musi by\\u0107 wielokrotno\\u015Bci\\u0105 ${t.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`Nieprawid\\u0142owy klucz w ${t.origin}`;case"invalid_union":return"Nieprawid\\u0142owe dane wej\\u015Bciowe";case"invalid_element":return`Nieprawid\\u0142owa warto\\u015B\\u0107 w ${t.origin}`;default:return"Nieprawid\\u0142owe dane wej\\u015Bciowe"}}};function Yu(){return{localeError:Ql()}}var Hl=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"n\\xFAmero";case"object":{if(Array.isArray(t))return"array";if(t===null)return"nulo";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"padr\\xE3o",email:"endere\\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\\xE7\\xE3o ISO",ipv4:"endere\\xE7o IPv4",ipv6:"endere\\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return t=>{switch(t.code){case"invalid_type":return`Tipo inv\\xE1lido: esperado ${t.expected}, recebido ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Entrada inv\\xE1lida: esperado ${p(t.values[0])}`:`Op\\xE7\\xE3o inv\\xE1lida: esperada uma das ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Muito grande: esperado que ${t.origin??"valor"} tivesse ${i}${t.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${t.origin??"valor"} fosse ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Muito pequeno: esperado que ${t.origin} tivesse ${i}${t.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${t.origin} fosse ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Texto inv\\xE1lido: deve come\\xE7ar com "${i.prefix}"`:i.format==="ends_with"?`Texto inv\\xE1lido: deve terminar com "${i.suffix}"`:i.format==="includes"?`Texto inv\\xE1lido: deve incluir "${i.includes}"`:i.format==="regex"?`Texto inv\\xE1lido: deve corresponder ao padr\\xE3o ${i.pattern}`:`${o[i.format]??t.format} inv\\xE1lido`}case"not_multiple_of":return`N\\xFAmero inv\\xE1lido: deve ser m\\xFAltiplo de ${t.divisor}`;case"unrecognized_keys":return`Chave${t.keys.length>1?"s":""} desconhecida${t.keys.length>1?"s":""}: ${l(t.keys,", ")}`;case"invalid_key":return`Chave inv\\xE1lida em ${t.origin}`;case"invalid_union":return"Entrada inv\\xE1lida";case"invalid_element":return`Valor inv\\xE1lido em ${t.origin}`;default:return"Campo inv\\xE1lido"}}};function Qu(){return{localeError:Hl()}}function Hu(e,r,n,o){let t=Math.abs(e),i=t%10,a=t%100;return a>=11&&a<=19?o:i===1?r:i>=2&&i<=4?n:o}var ed=()=>{let e={string:{unit:{one:"\\u0441\\u0438\\u043C\\u0432\\u043E\\u043B",few:"\\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0430",many:"\\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432"},verb:"\\u0438\\u043C\\u0435\\u0442\\u044C"},file:{unit:{one:"\\u0431\\u0430\\u0439\\u0442",few:"\\u0431\\u0430\\u0439\\u0442\\u0430",many:"\\u0431\\u0430\\u0439\\u0442"},verb:"\\u0438\\u043C\\u0435\\u0442\\u044C"},array:{unit:{one:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442",few:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430",many:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432"},verb:"\\u0438\\u043C\\u0435\\u0442\\u044C"},set:{unit:{one:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442",few:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0430",many:"\\u044D\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u043E\\u0432"},verb:"\\u0438\\u043C\\u0435\\u0442\\u044C"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0447\\u0438\\u0441\\u043B\\u043E";case"object":{if(Array.isArray(t))return"\\u043C\\u0430\\u0441\\u0441\\u0438\\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0432\\u0432\\u043E\\u0434",email:"email \\u0430\\u0434\\u0440\\u0435\\u0441",url:"URL",emoji:"\\u044D\\u043C\\u043E\\u0434\\u0437\\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u0434\\u0430\\u0442\\u0430 \\u0438 \\u0432\\u0440\\u0435\\u043C\\u044F",date:"ISO \\u0434\\u0430\\u0442\\u0430",time:"ISO \\u0432\\u0440\\u0435\\u043C\\u044F",duration:"ISO \\u0434\\u043B\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C",ipv4:"IPv4 \\u0430\\u0434\\u0440\\u0435\\u0441",ipv6:"IPv6 \\u0430\\u0434\\u0440\\u0435\\u0441",cidrv4:"IPv4 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D",cidrv6:"IPv6 \\u0434\\u0438\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D",base64:"\\u0441\\u0442\\u0440\\u043E\\u043A\\u0430 \\u0432 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0435 base64",base64url:"\\u0441\\u0442\\u0440\\u043E\\u043A\\u0430 \\u0432 \\u0444\\u043E\\u0440\\u043C\\u0430\\u0442\\u0435 base64url",json_string:"JSON \\u0441\\u0442\\u0440\\u043E\\u043A\\u0430",e164:"\\u043D\\u043E\\u043C\\u0435\\u0440 E.164",jwt:"JWT",template_literal:"\\u0432\\u0432\\u043E\\u0434"};return t=>{switch(t.code){case"invalid_type":return`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u0432\\u0432\\u043E\\u0434: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C ${t.expected}, \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u043E ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u0432\\u0432\\u043E\\u0434: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C ${p(t.values[0])}`:`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u0432\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u043E\\u0434\\u043D\\u043E \\u0438\\u0437 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);if(a){let u=Number(t.maximum),s=Hu(u,a.unit.one,a.unit.few,a.unit.many);return`\\u0421\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C, \\u0447\\u0442\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435"} \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0438\\u043C\\u0435\\u0442\\u044C ${i}${t.maximum.toString()} ${s}`}return`\\u0421\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C, \\u0447\\u0442\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435"} \\u0431\\u0443\\u0434\\u0435\\u0442 ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);if(a){let u=Number(t.minimum),s=Hu(u,a.unit.one,a.unit.few,a.unit.many);return`\\u0421\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u043C\\u0430\\u043B\\u0435\\u043D\\u044C\\u043A\\u043E\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C, \\u0447\\u0442\\u043E ${t.origin} \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0438\\u043C\\u0435\\u0442\\u044C ${i}${t.minimum.toString()} ${s}`}return`\\u0421\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u043C\\u0430\\u043B\\u0435\\u043D\\u044C\\u043A\\u043E\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435: \\u043E\\u0436\\u0438\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C, \\u0447\\u0442\\u043E ${t.origin} \\u0431\\u0443\\u0434\\u0435\\u0442 ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u0430\\u044F \\u0441\\u0442\\u0440\\u043E\\u043A\\u0430: \\u0434\\u043E\\u043B\\u0436\\u043D\\u0430 \\u043D\\u0430\\u0447\\u0438\\u043D\\u0430\\u0442\\u044C\\u0441\\u044F \\u0441 "${i.prefix}"`:i.format==="ends_with"?`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u0430\\u044F \\u0441\\u0442\\u0440\\u043E\\u043A\\u0430: \\u0434\\u043E\\u043B\\u0436\\u043D\\u0430 \\u0437\\u0430\\u043A\\u0430\\u043D\\u0447\\u0438\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 "${i.suffix}"`:i.format==="includes"?`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u0430\\u044F \\u0441\\u0442\\u0440\\u043E\\u043A\\u0430: \\u0434\\u043E\\u043B\\u0436\\u043D\\u0430 \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C "${i.includes}"`:i.format==="regex"?`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u0430\\u044F \\u0441\\u0442\\u0440\\u043E\\u043A\\u0430: \\u0434\\u043E\\u043B\\u0436\\u043D\\u0430 \\u0441\\u043E\\u043E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u043E\\u0432\\u0430\\u0442\\u044C \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u0443 ${i.pattern}`:`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E\\u0435 \\u0447\\u0438\\u0441\\u043B\\u043E: \\u0434\\u043E\\u043B\\u0436\\u043D\\u043E \\u0431\\u044B\\u0442\\u044C \\u043A\\u0440\\u0430\\u0442\\u043D\\u044B\\u043C ${t.divisor}`;case"unrecognized_keys":return`\\u041D\\u0435\\u0440\\u0430\\u0441\\u043F\\u043E\\u0437\\u043D\\u0430\\u043D\\u043D${t.keys.length>1?"\\u044B\\u0435":"\\u044B\\u0439"} \\u043A\\u043B\\u044E\\u0447${t.keys.length>1?"\\u0438":""}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0439 \\u043A\\u043B\\u044E\\u0447 \\u0432 ${t.origin}`;case"invalid_union":return"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435 \\u0432\\u0445\\u043E\\u0434\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435";case"invalid_element":return`\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u0438\\u0435 \\u0432 ${t.origin}`;default:return"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435 \\u0432\\u0445\\u043E\\u0434\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435"}}};function ec(){return{localeError:ed()}}var td=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0161tevilo";case"object":{if(Array.isArray(t))return"tabela";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"vnos",email:"e-po\\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \\u010Das",date:"ISO datum",time:"ISO \\u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \\u0161tevilka",jwt:"JWT",template_literal:"vnos"};return t=>{switch(t.code){case"invalid_type":return`Neveljaven vnos: pri\\u010Dakovano ${t.expected}, prejeto ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Neveljaven vnos: pri\\u010Dakovano ${p(t.values[0])}`:`Neveljavna mo\\u017Enost: pri\\u010Dakovano eno izmed ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Preveliko: pri\\u010Dakovano, da bo ${t.origin??"vrednost"} imelo ${i}${t.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\\u010Dakovano, da bo ${t.origin??"vrednost"} ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Premajhno: pri\\u010Dakovano, da bo ${t.origin} imelo ${i}${t.minimum.toString()} ${a.unit}`:`Premajhno: pri\\u010Dakovano, da bo ${t.origin} ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Neveljaven niz: mora se za\\u010Deti z "${i.prefix}"`:i.format==="ends_with"?`Neveljaven niz: mora se kon\\u010Dati z "${i.suffix}"`:i.format==="includes"?`Neveljaven niz: mora vsebovati "${i.includes}"`:i.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${i.pattern}`:`Neveljaven ${o[i.format]??t.format}`}case"not_multiple_of":return`Neveljavno \\u0161tevilo: mora biti ve\\u010Dkratnik ${t.divisor}`;case"unrecognized_keys":return`Neprepoznan${t.keys.length>1?"i klju\\u010Di":" klju\\u010D"}: ${l(t.keys,", ")}`;case"invalid_key":return`Neveljaven klju\\u010D v ${t.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${t.origin}`;default:return"Neveljaven vnos"}}};function tc(){return{localeError:td()}}var rd=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\\xE5lla"},set:{unit:"objekt",verb:"att inneh\\xE5lla"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"antal";case"object":{if(Array.isArray(t))return"lista";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"regulj\\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\\xE4ng",base64url:"base64url-kodad str\\xE4ng",json_string:"JSON-str\\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return t=>{switch(t.code){case"invalid_type":return`Ogiltig inmatning: f\\xF6rv\\xE4ntat ${t.expected}, fick ${n(t.input)}`;case"invalid_value":return t.values.length===1?`Ogiltig inmatning: f\\xF6rv\\xE4ntat ${p(t.values[0])}`:`Ogiltigt val: f\\xF6rv\\xE4ntade en av ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`F\\xF6r stor(t): f\\xF6rv\\xE4ntade ${t.origin??"v\\xE4rdet"} att ha ${i}${t.maximum.toString()} ${a.unit??"element"}`:`F\\xF6r stor(t): f\\xF6rv\\xE4ntat ${t.origin??"v\\xE4rdet"} att ha ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`F\\xF6r lite(t): f\\xF6rv\\xE4ntade ${t.origin??"v\\xE4rdet"} att ha ${i}${t.minimum.toString()} ${a.unit}`:`F\\xF6r lite(t): f\\xF6rv\\xE4ntade ${t.origin??"v\\xE4rdet"} att ha ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Ogiltig str\\xE4ng: m\\xE5ste b\\xF6rja med "${i.prefix}"`:i.format==="ends_with"?`Ogiltig str\\xE4ng: m\\xE5ste sluta med "${i.suffix}"`:i.format==="includes"?`Ogiltig str\\xE4ng: m\\xE5ste inneh\\xE5lla "${i.includes}"`:i.format==="regex"?`Ogiltig str\\xE4ng: m\\xE5ste matcha m\\xF6nstret "${i.pattern}"`:`Ogiltig(t) ${o[i.format]??t.format}`}case"not_multiple_of":return`Ogiltigt tal: m\\xE5ste vara en multipel av ${t.divisor}`;case"unrecognized_keys":return`${t.keys.length>1?"Ok\\xE4nda nycklar":"Ok\\xE4nd nyckel"}: ${l(t.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${t.origin??"v\\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\\xE4rde i ${t.origin??"v\\xE4rdet"}`;default:return"Ogiltig input"}}};function rc(){return{localeError:rd()}}var nd=()=>{let e={string:{unit:"\\u0B8E\\u0BB4\\u0BC1\\u0BA4\\u0BCD\\u0BA4\\u0BC1\\u0B95\\u0BCD\\u0B95\\u0BB3\\u0BCD",verb:"\\u0B95\\u0BCA\\u0BA3\\u0BCD\\u0B9F\\u0BBF\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD"},file:{unit:"\\u0BAA\\u0BC8\\u0B9F\\u0BCD\\u0B9F\\u0BC1\\u0B95\\u0BB3\\u0BCD",verb:"\\u0B95\\u0BCA\\u0BA3\\u0BCD\\u0B9F\\u0BBF\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD"},array:{unit:"\\u0B89\\u0BB1\\u0BC1\\u0BAA\\u0BCD\\u0BAA\\u0BC1\\u0B95\\u0BB3\\u0BCD",verb:"\\u0B95\\u0BCA\\u0BA3\\u0BCD\\u0B9F\\u0BBF\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD"},set:{unit:"\\u0B89\\u0BB1\\u0BC1\\u0BAA\\u0BCD\\u0BAA\\u0BC1\\u0B95\\u0BB3\\u0BCD",verb:"\\u0B95\\u0BCA\\u0BA3\\u0BCD\\u0B9F\\u0BBF\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"\\u0B8E\\u0BA3\\u0BCD \\u0B85\\u0BB2\\u0BCD\\u0BB2\\u0BBE\\u0BA4\\u0BA4\\u0BC1":"\\u0B8E\\u0BA3\\u0BCD";case"object":{if(Array.isArray(t))return"\\u0B85\\u0BA3\\u0BBF";if(t===null)return"\\u0BB5\\u0BC6\\u0BB1\\u0BC1\\u0BAE\\u0BC8";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0BC0\\u0B9F\\u0BC1",email:"\\u0BAE\\u0BBF\\u0BA9\\u0BCD\\u0BA9\\u0B9E\\u0BCD\\u0B9A\\u0BB2\\u0BCD \\u0BAE\\u0BC1\\u0B95\\u0BB5\\u0BB0\\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u0BA4\\u0BC7\\u0BA4\\u0BBF \\u0BA8\\u0BC7\\u0BB0\\u0BAE\\u0BCD",date:"ISO \\u0BA4\\u0BC7\\u0BA4\\u0BBF",time:"ISO \\u0BA8\\u0BC7\\u0BB0\\u0BAE\\u0BCD",duration:"ISO \\u0B95\\u0BBE\\u0BB2 \\u0B85\\u0BB3\\u0BB5\\u0BC1",ipv4:"IPv4 \\u0BAE\\u0BC1\\u0B95\\u0BB5\\u0BB0\\u0BBF",ipv6:"IPv6 \\u0BAE\\u0BC1\\u0B95\\u0BB5\\u0BB0\\u0BBF",cidrv4:"IPv4 \\u0BB5\\u0BB0\\u0BAE\\u0BCD\\u0BAA\\u0BC1",cidrv6:"IPv6 \\u0BB5\\u0BB0\\u0BAE\\u0BCD\\u0BAA\\u0BC1",base64:"base64-encoded \\u0B9A\\u0BB0\\u0BAE\\u0BCD",base64url:"base64url-encoded \\u0B9A\\u0BB0\\u0BAE\\u0BCD",json_string:"JSON \\u0B9A\\u0BB0\\u0BAE\\u0BCD",e164:"E.164 \\u0B8E\\u0BA3\\u0BCD",jwt:"JWT",template_literal:"input"};return t=>{switch(t.code){case"invalid_type":return`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0BC0\\u0B9F\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${t.expected}, \\u0BAA\\u0BC6\\u0BB1\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0BC0\\u0B9F\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${p(t.values[0])}`:`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0BB5\\u0BBF\\u0BB0\\u0BC1\\u0BAA\\u0BCD\\u0BAA\\u0BAE\\u0BCD: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${l(t.values,"|")} \\u0B87\\u0BB2\\u0BCD \\u0B92\\u0BA9\\u0BCD\\u0BB1\\u0BC1`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u0BAE\\u0BBF\\u0B95 \\u0BAA\\u0BC6\\u0BB0\\u0BBF\\u0BAF\\u0BA4\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${t.origin??"\\u0BAE\\u0BA4\\u0BBF\\u0BAA\\u0BCD\\u0BAA\\u0BC1"} ${i}${t.maximum.toString()} ${a.unit??"\\u0B89\\u0BB1\\u0BC1\\u0BAA\\u0BCD\\u0BAA\\u0BC1\\u0B95\\u0BB3\\u0BCD"} \\u0B86\\u0B95 \\u0B87\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:`\\u0BAE\\u0BBF\\u0B95 \\u0BAA\\u0BC6\\u0BB0\\u0BBF\\u0BAF\\u0BA4\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${t.origin??"\\u0BAE\\u0BA4\\u0BBF\\u0BAA\\u0BCD\\u0BAA\\u0BC1"} ${i}${t.maximum.toString()} \\u0B86\\u0B95 \\u0B87\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u0BAE\\u0BBF\\u0B95\\u0B9A\\u0BCD \\u0B9A\\u0BBF\\u0BB1\\u0BBF\\u0BAF\\u0BA4\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${t.origin} ${i}${t.minimum.toString()} ${a.unit} \\u0B86\\u0B95 \\u0B87\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:`\\u0BAE\\u0BBF\\u0B95\\u0B9A\\u0BCD \\u0B9A\\u0BBF\\u0BB1\\u0BBF\\u0BAF\\u0BA4\\u0BC1: \\u0B8E\\u0BA4\\u0BBF\\u0BB0\\u0BCD\\u0BAA\\u0BBE\\u0BB0\\u0BCD\\u0B95\\u0BCD\\u0B95\\u0BAA\\u0BCD\\u0BAA\\u0B9F\\u0BCD\\u0B9F\\u0BA4\\u0BC1 ${t.origin} ${i}${t.minimum.toString()} \\u0B86\\u0B95 \\u0B87\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B9A\\u0BB0\\u0BAE\\u0BCD: "${i.prefix}" \\u0B87\\u0BB2\\u0BCD \\u0BA4\\u0BCA\\u0B9F\\u0B99\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:i.format==="ends_with"?`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B9A\\u0BB0\\u0BAE\\u0BCD: "${i.suffix}" \\u0B87\\u0BB2\\u0BCD \\u0BAE\\u0BC1\\u0B9F\\u0BBF\\u0BB5\\u0B9F\\u0BC8\\u0BAF \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:i.format==="includes"?`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B9A\\u0BB0\\u0BAE\\u0BCD: "${i.includes}" \\u0B90 \\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0B9F\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:i.format==="regex"?`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B9A\\u0BB0\\u0BAE\\u0BCD: ${i.pattern} \\u0BAE\\u0BC1\\u0BB1\\u0BC8\\u0BAA\\u0BBE\\u0B9F\\u0BCD\\u0B9F\\u0BC1\\u0B9F\\u0BA9\\u0BCD \\u0BAA\\u0BCA\\u0BB0\\u0BC1\\u0BA8\\u0BCD\\u0BA4 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`:`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B8E\\u0BA3\\u0BCD: ${t.divisor} \\u0B87\\u0BA9\\u0BCD \\u0BAA\\u0BB2\\u0BAE\\u0BBE\\u0B95 \\u0B87\\u0BB0\\u0BC1\\u0B95\\u0BCD\\u0B95 \\u0BB5\\u0BC7\\u0BA3\\u0BCD\\u0B9F\\u0BC1\\u0BAE\\u0BCD`;case"unrecognized_keys":return`\\u0B85\\u0B9F\\u0BC8\\u0BAF\\u0BBE\\u0BB3\\u0BAE\\u0BCD \\u0BA4\\u0BC6\\u0BB0\\u0BBF\\u0BAF\\u0BBE\\u0BA4 \\u0BB5\\u0BBF\\u0B9A\\u0BC8${t.keys.length>1?"\\u0B95\\u0BB3\\u0BCD":""}: ${l(t.keys,", ")}`;case"invalid_key":return`${t.origin} \\u0B87\\u0BB2\\u0BCD \\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0BB5\\u0BBF\\u0B9A\\u0BC8`;case"invalid_union":return"\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0BC0\\u0B9F\\u0BC1";case"invalid_element":return`${t.origin} \\u0B87\\u0BB2\\u0BCD \\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0BAE\\u0BA4\\u0BBF\\u0BAA\\u0BCD\\u0BAA\\u0BC1`;default:return"\\u0BA4\\u0BB5\\u0BB1\\u0BBE\\u0BA9 \\u0B89\\u0BB3\\u0BCD\\u0BB3\\u0BC0\\u0B9F\\u0BC1"}}};function nc(){return{localeError:nd()}}var id=()=>{let e={string:{unit:"\\u0E15\\u0E31\\u0E27\\u0E2D\\u0E31\\u0E01\\u0E29\\u0E23",verb:"\\u0E04\\u0E27\\u0E23\\u0E21\\u0E35"},file:{unit:"\\u0E44\\u0E1A\\u0E15\\u0E4C",verb:"\\u0E04\\u0E27\\u0E23\\u0E21\\u0E35"},array:{unit:"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23",verb:"\\u0E04\\u0E27\\u0E23\\u0E21\\u0E35"},set:{unit:"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23",verb:"\\u0E04\\u0E27\\u0E23\\u0E21\\u0E35"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"\\u0E44\\u0E21\\u0E48\\u0E43\\u0E0A\\u0E48\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E02 (NaN)":"\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E02";case"object":{if(Array.isArray(t))return"\\u0E2D\\u0E32\\u0E23\\u0E4C\\u0E40\\u0E23\\u0E22\\u0E4C (Array)";if(t===null)return"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E04\\u0E48\\u0E32 (null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E17\\u0E35\\u0E48\\u0E1B\\u0E49\\u0E2D\\u0E19",email:"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25",url:"URL",emoji:"\\u0E2D\\u0E34\\u0E42\\u0E21\\u0E08\\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E27\\u0E25\\u0E32\\u0E41\\u0E1A\\u0E1A ISO",date:"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E41\\u0E1A\\u0E1A ISO",time:"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E41\\u0E1A\\u0E1A ISO",duration:"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E40\\u0E27\\u0E25\\u0E32\\u0E41\\u0E1A\\u0E1A ISO",ipv4:"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48 IPv4",ipv6:"\\u0E17\\u0E35\\u0E48\\u0E2D\\u0E22\\u0E39\\u0E48 IPv6",cidrv4:"\\u0E0A\\u0E48\\u0E27\\u0E07 IP \\u0E41\\u0E1A\\u0E1A IPv4",cidrv6:"\\u0E0A\\u0E48\\u0E27\\u0E07 IP \\u0E41\\u0E1A\\u0E1A IPv6",base64:"\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E41\\u0E1A\\u0E1A Base64",base64url:"\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E41\\u0E1A\\u0E1A Base64 \\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A URL",json_string:"\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E41\\u0E1A\\u0E1A JSON",e164:"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\\u0E28\\u0E31\\u0E1E\\u0E17\\u0E4C\\u0E23\\u0E30\\u0E2B\\u0E27\\u0E48\\u0E32\\u0E07\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E17\\u0E28 (E.164)",jwt:"\\u0E42\\u0E17\\u0E40\\u0E04\\u0E19 JWT",template_literal:"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E17\\u0E35\\u0E48\\u0E1B\\u0E49\\u0E2D\\u0E19"};return t=>{switch(t.code){case"invalid_type":return`\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E04\\u0E27\\u0E23\\u0E40\\u0E1B\\u0E47\\u0E19 ${t.expected} \\u0E41\\u0E15\\u0E48\\u0E44\\u0E14\\u0E49\\u0E23\\u0E31\\u0E1A ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u0E04\\u0E48\\u0E32\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E04\\u0E27\\u0E23\\u0E40\\u0E1B\\u0E47\\u0E19 ${p(t.values[0])}`:`\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E04\\u0E27\\u0E23\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E2B\\u0E19\\u0E36\\u0E48\\u0E07\\u0E43\\u0E19 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"\\u0E44\\u0E21\\u0E48\\u0E40\\u0E01\\u0E34\\u0E19":"\\u0E19\\u0E49\\u0E2D\\u0E22\\u0E01\\u0E27\\u0E48\\u0E32",a=r(t.origin);return a?`\\u0E40\\u0E01\\u0E34\\u0E19\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14: ${t.origin??"\\u0E04\\u0E48\\u0E32"} \\u0E04\\u0E27\\u0E23\\u0E21\\u0E35${i} ${t.maximum.toString()} ${a.unit??"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23"}`:`\\u0E40\\u0E01\\u0E34\\u0E19\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14: ${t.origin??"\\u0E04\\u0E48\\u0E32"} \\u0E04\\u0E27\\u0E23\\u0E21\\u0E35${i} ${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?"\\u0E2D\\u0E22\\u0E48\\u0E32\\u0E07\\u0E19\\u0E49\\u0E2D\\u0E22":"\\u0E21\\u0E32\\u0E01\\u0E01\\u0E27\\u0E48\\u0E32",a=r(t.origin);return a?`\\u0E19\\u0E49\\u0E2D\\u0E22\\u0E01\\u0E27\\u0E48\\u0E32\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14: ${t.origin} \\u0E04\\u0E27\\u0E23\\u0E21\\u0E35${i} ${t.minimum.toString()} ${a.unit}`:`\\u0E19\\u0E49\\u0E2D\\u0E22\\u0E01\\u0E27\\u0E48\\u0E32\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14: ${t.origin} \\u0E04\\u0E27\\u0E23\\u0E21\\u0E35${i} ${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E02\\u0E36\\u0E49\\u0E19\\u0E15\\u0E49\\u0E19\\u0E14\\u0E49\\u0E27\\u0E22 "${i.prefix}"`:i.format==="ends_with"?`\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E25\\u0E07\\u0E17\\u0E49\\u0E32\\u0E22\\u0E14\\u0E49\\u0E27\\u0E22 "${i.suffix}"`:i.format==="includes"?`\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E21\\u0E35 "${i.includes}" \\u0E2D\\u0E22\\u0E39\\u0E48\\u0E43\\u0E19\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E32\\u0E21`:i.format==="regex"?`\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E15\\u0E49\\u0E2D\\u0E07\\u0E15\\u0E23\\u0E07\\u0E01\\u0E31\\u0E1A\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14 ${i.pattern}`:`\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u0E15\\u0E31\\u0E27\\u0E40\\u0E25\\u0E02\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E15\\u0E49\\u0E2D\\u0E07\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E17\\u0E35\\u0E48\\u0E2B\\u0E32\\u0E23\\u0E14\\u0E49\\u0E27\\u0E22 ${t.divisor} \\u0E44\\u0E14\\u0E49\\u0E25\\u0E07\\u0E15\\u0E31\\u0E27`;case"unrecognized_keys":return`\\u0E1E\\u0E1A\\u0E04\\u0E35\\u0E22\\u0E4C\\u0E17\\u0E35\\u0E48\\u0E44\\u0E21\\u0E48\\u0E23\\u0E39\\u0E49\\u0E08\\u0E31\\u0E01: ${l(t.keys,", ")}`;case"invalid_key":return`\\u0E04\\u0E35\\u0E22\\u0E4C\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E43\\u0E19 ${t.origin}`;case"invalid_union":return"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07: \\u0E44\\u0E21\\u0E48\\u0E15\\u0E23\\u0E07\\u0E01\\u0E31\\u0E1A\\u0E23\\u0E39\\u0E1B\\u0E41\\u0E1A\\u0E1A\\u0E22\\u0E39\\u0E40\\u0E19\\u0E35\\u0E22\\u0E19\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E44\\u0E27\\u0E49";case"invalid_element":return`\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E43\\u0E19 ${t.origin}`;default:return"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E44\\u0E21\\u0E48\\u0E16\\u0E39\\u0E01\\u0E15\\u0E49\\u0E2D\\u0E07"}}};function ic(){return{localeError:id()}}var od=e=>{let r=typeof e;switch(r){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return r},ad=()=>{let e={string:{unit:"karakter",verb:"olmal\\u0131"},file:{unit:"bayt",verb:"olmal\\u0131"},array:{unit:"\\xF6\\u011Fe",verb:"olmal\\u0131"},set:{unit:"\\xF6\\u011Fe",verb:"olmal\\u0131"}};function r(o){return e[o]??null}let n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\\u0131\\u011F\\u0131",cidrv6:"IPv6 aral\\u0131\\u011F\\u0131",base64:"base64 ile \\u015Fifrelenmi\\u015F metin",base64url:"base64url ile \\u015Fifrelenmi\\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\\u0131s\\u0131",jwt:"JWT",template_literal:"\\u015Eablon dizesi"};return o=>{switch(o.code){case"invalid_type":return`Ge\\xE7ersiz de\\u011Fer: beklenen ${o.expected}, al\\u0131nan ${od(o.input)}`;case"invalid_value":return o.values.length===1?`Ge\\xE7ersiz de\\u011Fer: beklenen ${p(o.values[0])}`:`Ge\\xE7ersiz se\\xE7enek: a\\u015Fa\\u011F\\u0131dakilerden biri olmal\\u0131: ${l(o.values,"|")}`;case"too_big":{let t=o.inclusive?"<=":"<",i=r(o.origin);return i?`\\xC7ok b\\xFCy\\xFCk: beklenen ${o.origin??"de\\u011Fer"} ${t}${o.maximum.toString()} ${i.unit??"\\xF6\\u011Fe"}`:`\\xC7ok b\\xFCy\\xFCk: beklenen ${o.origin??"de\\u011Fer"} ${t}${o.maximum.toString()}`}case"too_small":{let t=o.inclusive?">=":">",i=r(o.origin);return i?`\\xC7ok k\\xFC\\xE7\\xFCk: beklenen ${o.origin} ${t}${o.minimum.toString()} ${i.unit}`:`\\xC7ok k\\xFC\\xE7\\xFCk: beklenen ${o.origin} ${t}${o.minimum.toString()}`}case"invalid_format":{let t=o;return t.format==="starts_with"?`Ge\\xE7ersiz metin: "${t.prefix}" ile ba\\u015Flamal\\u0131`:t.format==="ends_with"?`Ge\\xE7ersiz metin: "${t.suffix}" ile bitmeli`:t.format==="includes"?`Ge\\xE7ersiz metin: "${t.includes}" i\\xE7ermeli`:t.format==="regex"?`Ge\\xE7ersiz metin: ${t.pattern} desenine uymal\\u0131`:`Ge\\xE7ersiz ${n[t.format]??o.format}`}case"not_multiple_of":return`Ge\\xE7ersiz say\\u0131: ${o.divisor} ile tam b\\xF6l\\xFCnebilmeli`;case"unrecognized_keys":return`Tan\\u0131nmayan anahtar${o.keys.length>1?"lar":""}: ${l(o.keys,", ")}`;case"invalid_key":return`${o.origin} i\\xE7inde ge\\xE7ersiz anahtar`;case"invalid_union":return"Ge\\xE7ersiz de\\u011Fer";case"invalid_element":return`${o.origin} i\\xE7inde ge\\xE7ersiz de\\u011Fer`;default:return"Ge\\xE7ersiz de\\u011Fer"}}};function oc(){return{localeError:ad()}}var ud=()=>{let e={string:{unit:"\\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u0456\\u0432",verb:"\\u043C\\u0430\\u0442\\u0438\\u043C\\u0435"},file:{unit:"\\u0431\\u0430\\u0439\\u0442\\u0456\\u0432",verb:"\\u043C\\u0430\\u0442\\u0438\\u043C\\u0435"},array:{unit:"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0456\\u0432",verb:"\\u043C\\u0430\\u0442\\u0438\\u043C\\u0435"},set:{unit:"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0456\\u0432",verb:"\\u043C\\u0430\\u0442\\u0438\\u043C\\u0435"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0447\\u0438\\u0441\\u043B\\u043E";case"object":{if(Array.isArray(t))return"\\u043C\\u0430\\u0441\\u0438\\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456",email:"\\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 \\u0435\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0457 \\u043F\\u043E\\u0448\\u0442\\u0438",url:"URL",emoji:"\\u0435\\u043C\\u043E\\u0434\\u0437\\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\u0434\\u0430\\u0442\\u0430 \\u0442\\u0430 \\u0447\\u0430\\u0441 ISO",date:"\\u0434\\u0430\\u0442\\u0430 ISO",time:"\\u0447\\u0430\\u0441 ISO",duration:"\\u0442\\u0440\\u0438\\u0432\\u0430\\u043B\\u0456\\u0441\\u0442\\u044C ISO",ipv4:"\\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 IPv4",ipv6:"\\u0430\\u0434\\u0440\\u0435\\u0441\\u0430 IPv6",cidrv4:"\\u0434\\u0456\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D IPv4",cidrv6:"\\u0434\\u0456\\u0430\\u043F\\u0430\\u0437\\u043E\\u043D IPv6",base64:"\\u0440\\u044F\\u0434\\u043E\\u043A \\u0443 \\u043A\\u043E\\u0434\\u0443\\u0432\\u0430\\u043D\\u043D\\u0456 base64",base64url:"\\u0440\\u044F\\u0434\\u043E\\u043A \\u0443 \\u043A\\u043E\\u0434\\u0443\\u0432\\u0430\\u043D\\u043D\\u0456 base64url",json_string:"\\u0440\\u044F\\u0434\\u043E\\u043A JSON",e164:"\\u043D\\u043E\\u043C\\u0435\\u0440 E.164",jwt:"JWT",template_literal:"\\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456"};return t=>{switch(t.code){case"invalid_type":return`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0456 \\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F ${t.expected}, \\u043E\\u0442\\u0440\\u0438\\u043C\\u0430\\u043D\\u043E ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0456 \\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F ${p(t.values[0])}`:`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0430 \\u043E\\u043F\\u0446\\u0456\\u044F: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F \\u043E\\u0434\\u043D\\u0435 \\u0437 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u043E \\u0432\\u0435\\u043B\\u0438\\u043A\\u0435: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F, \\u0449\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u043D\\u044F"} ${a.verb} ${i}${t.maximum.toString()} ${a.unit??"\\u0435\\u043B\\u0435\\u043C\\u0435\\u043D\\u0442\\u0456\\u0432"}`:`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u043E \\u0432\\u0435\\u043B\\u0438\\u043A\\u0435: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F, \\u0449\\u043E ${t.origin??"\\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u043D\\u044F"} \\u0431\\u0443\\u0434\\u0435 ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u043E \\u043C\\u0430\\u043B\\u0435: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F, \\u0449\\u043E ${t.origin} ${a.verb} ${i}${t.minimum.toString()} ${a.unit}`:`\\u0417\\u0430\\u043D\\u0430\\u0434\\u0442\\u043E \\u043C\\u0430\\u043B\\u0435: \\u043E\\u0447\\u0456\\u043A\\u0443\\u0454\\u0442\\u044C\\u0441\\u044F, \\u0449\\u043E ${t.origin} \\u0431\\u0443\\u0434\\u0435 ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 \\u0440\\u044F\\u0434\\u043E\\u043A: \\u043F\\u043E\\u0432\\u0438\\u043D\\u0435\\u043D \\u043F\\u043E\\u0447\\u0438\\u043D\\u0430\\u0442\\u0438\\u0441\\u044F \\u0437 "${i.prefix}"`:i.format==="ends_with"?`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 \\u0440\\u044F\\u0434\\u043E\\u043A: \\u043F\\u043E\\u0432\\u0438\\u043D\\u0435\\u043D \\u0437\\u0430\\u043A\\u0456\\u043D\\u0447\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044F \\u043D\\u0430 "${i.suffix}"`:i.format==="includes"?`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 \\u0440\\u044F\\u0434\\u043E\\u043A: \\u043F\\u043E\\u0432\\u0438\\u043D\\u0435\\u043D \\u043C\\u0456\\u0441\\u0442\\u0438\\u0442\\u0438 "${i.includes}"`:i.format==="regex"?`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 \\u0440\\u044F\\u0434\\u043E\\u043A: \\u043F\\u043E\\u0432\\u0438\\u043D\\u0435\\u043D \\u0432\\u0456\\u0434\\u043F\\u043E\\u0432\\u0456\\u0434\\u0430\\u0442\\u0438 \\u0448\\u0430\\u0431\\u043B\\u043E\\u043D\\u0443 ${i.pattern}`:`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0435 \\u0447\\u0438\\u0441\\u043B\\u043E: \\u043F\\u043E\\u0432\\u0438\\u043D\\u043D\\u043E \\u0431\\u0443\\u0442\\u0438 \\u043A\\u0440\\u0430\\u0442\\u043D\\u0438\\u043C ${t.divisor}`;case"unrecognized_keys":return`\\u041D\\u0435\\u0440\\u043E\\u0437\\u043F\\u0456\\u0437\\u043D\\u0430\\u043D\\u0438\\u0439 \\u043A\\u043B\\u044E\\u0447${t.keys.length>1?"\\u0456":""}: ${l(t.keys,", ")}`;case"invalid_key":return`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0438\\u0439 \\u043A\\u043B\\u044E\\u0447 \\u0443 ${t.origin}`;case"invalid_union":return"\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0456 \\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456";case"invalid_element":return`\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0435 \\u0437\\u043D\\u0430\\u0447\\u0435\\u043D\\u043D\\u044F \\u0443 ${t.origin}`;default:return"\\u041D\\u0435\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u044C\\u043D\\u0456 \\u0432\\u0445\\u0456\\u0434\\u043D\\u0456 \\u0434\\u0430\\u043D\\u0456"}}};function Yt(){return{localeError:ud()}}function ac(){return Yt()}var cd=()=>{let e={string:{unit:"\\u062D\\u0631\\u0648\\u0641",verb:"\\u06C1\\u0648\\u0646\\u0627"},file:{unit:"\\u0628\\u0627\\u0626\\u0679\\u0633",verb:"\\u06C1\\u0648\\u0646\\u0627"},array:{unit:"\\u0622\\u0626\\u0679\\u0645\\u0632",verb:"\\u06C1\\u0648\\u0646\\u0627"},set:{unit:"\\u0622\\u0626\\u0679\\u0645\\u0632",verb:"\\u06C1\\u0648\\u0646\\u0627"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"\\u0646\\u0645\\u0628\\u0631";case"object":{if(Array.isArray(t))return"\\u0622\\u0631\\u06D2";if(t===null)return"\\u0646\\u0644";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0627\\u0646 \\u067E\\u0679",email:"\\u0627\\u06CC \\u0645\\u06CC\\u0644 \\u0627\\u06CC\\u0688\\u0631\\u06CC\\u0633",url:"\\u06CC\\u0648 \\u0622\\u0631 \\u0627\\u06CC\\u0644",emoji:"\\u0627\\u06CC\\u0645\\u0648\\u062C\\u06CC",uuid:"\\u06CC\\u0648 \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC",uuidv4:"\\u06CC\\u0648 \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC \\u0648\\u06CC 4",uuidv6:"\\u06CC\\u0648 \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC \\u0648\\u06CC 6",nanoid:"\\u0646\\u06CC\\u0646\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC",guid:"\\u062C\\u06CC \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC",cuid:"\\u0633\\u06CC \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC",cuid2:"\\u0633\\u06CC \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC 2",ulid:"\\u06CC\\u0648 \\u0627\\u06CC\\u0644 \\u0622\\u0626\\u06CC \\u0688\\u06CC",xid:"\\u0627\\u06CC\\u06A9\\u0633 \\u0622\\u0626\\u06CC \\u0688\\u06CC",ksuid:"\\u06A9\\u06D2 \\u0627\\u06CC\\u0633 \\u06CC\\u0648 \\u0622\\u0626\\u06CC \\u0688\\u06CC",datetime:"\\u0622\\u0626\\u06CC \\u0627\\u06CC\\u0633 \\u0627\\u0648 \\u0688\\u06CC\\u0679 \\u0679\\u0627\\u0626\\u0645",date:"\\u0622\\u0626\\u06CC \\u0627\\u06CC\\u0633 \\u0627\\u0648 \\u062A\\u0627\\u0631\\u06CC\\u062E",time:"\\u0622\\u0626\\u06CC \\u0627\\u06CC\\u0633 \\u0627\\u0648 \\u0648\\u0642\\u062A",duration:"\\u0622\\u0626\\u06CC \\u0627\\u06CC\\u0633 \\u0627\\u0648 \\u0645\\u062F\\u062A",ipv4:"\\u0622\\u0626\\u06CC \\u067E\\u06CC \\u0648\\u06CC 4 \\u0627\\u06CC\\u0688\\u0631\\u06CC\\u0633",ipv6:"\\u0622\\u0626\\u06CC \\u067E\\u06CC \\u0648\\u06CC 6 \\u0627\\u06CC\\u0688\\u0631\\u06CC\\u0633",cidrv4:"\\u0622\\u0626\\u06CC \\u067E\\u06CC \\u0648\\u06CC 4 \\u0631\\u06CC\\u0646\\u062C",cidrv6:"\\u0622\\u0626\\u06CC \\u067E\\u06CC \\u0648\\u06CC 6 \\u0631\\u06CC\\u0646\\u062C",base64:"\\u0628\\u06CC\\u0633 64 \\u0627\\u0646 \\u06A9\\u0648\\u0688\\u0688 \\u0633\\u0679\\u0631\\u0646\\u06AF",base64url:"\\u0628\\u06CC\\u0633 64 \\u06CC\\u0648 \\u0622\\u0631 \\u0627\\u06CC\\u0644 \\u0627\\u0646 \\u06A9\\u0648\\u0688\\u0688 \\u0633\\u0679\\u0631\\u0646\\u06AF",json_string:"\\u062C\\u06D2 \\u0627\\u06CC\\u0633 \\u0627\\u0648 \\u0627\\u06CC\\u0646 \\u0633\\u0679\\u0631\\u0646\\u06AF",e164:"\\u0627\\u06CC 164 \\u0646\\u0645\\u0628\\u0631",jwt:"\\u062C\\u06D2 \\u0688\\u0628\\u0644\\u06CC\\u0648 \\u0679\\u06CC",template_literal:"\\u0627\\u0646 \\u067E\\u0679"};return t=>{switch(t.code){case"invalid_type":return`\\u063A\\u0644\\u0637 \\u0627\\u0646 \\u067E\\u0679: ${t.expected} \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u0627\\u060C ${n(t.input)} \\u0645\\u0648\\u0635\\u0648\\u0644 \\u06C1\\u0648\\u0627`;case"invalid_value":return t.values.length===1?`\\u063A\\u0644\\u0637 \\u0627\\u0646 \\u067E\\u0679: ${p(t.values[0])} \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u0627`:`\\u063A\\u0644\\u0637 \\u0622\\u067E\\u0634\\u0646: ${l(t.values,"|")} \\u0645\\u06CC\\u06BA \\u0633\\u06D2 \\u0627\\u06CC\\u06A9 \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u0627`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u0628\\u06C1\\u062A \\u0628\\u0691\\u0627: ${t.origin??"\\u0648\\u06CC\\u0644\\u06CC\\u0648"} \\u06A9\\u06D2 ${i}${t.maximum.toString()} ${a.unit??"\\u0639\\u0646\\u0627\\u0635\\u0631"} \\u06C1\\u0648\\u0646\\u06D2 \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u06D2`:`\\u0628\\u06C1\\u062A \\u0628\\u0691\\u0627: ${t.origin??"\\u0648\\u06CC\\u0644\\u06CC\\u0648"} \\u06A9\\u0627 ${i}${t.maximum.toString()} \\u06C1\\u0648\\u0646\\u0627 \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u0627`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u0628\\u06C1\\u062A \\u0686\\u06BE\\u0648\\u0679\\u0627: ${t.origin} \\u06A9\\u06D2 ${i}${t.minimum.toString()} ${a.unit} \\u06C1\\u0648\\u0646\\u06D2 \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u06D2`:`\\u0628\\u06C1\\u062A \\u0686\\u06BE\\u0648\\u0679\\u0627: ${t.origin} \\u06A9\\u0627 ${i}${t.minimum.toString()} \\u06C1\\u0648\\u0646\\u0627 \\u0645\\u062A\\u0648\\u0642\\u0639 \\u062A\\u06BE\\u0627`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u063A\\u0644\\u0637 \\u0633\\u0679\\u0631\\u0646\\u06AF: "${i.prefix}" \\u0633\\u06D2 \\u0634\\u0631\\u0648\\u0639 \\u06C1\\u0648\\u0646\\u0627 \\u0686\\u0627\\u06C1\\u06CC\\u06D2`:i.format==="ends_with"?`\\u063A\\u0644\\u0637 \\u0633\\u0679\\u0631\\u0646\\u06AF: "${i.suffix}" \\u067E\\u0631 \\u062E\\u062A\\u0645 \\u06C1\\u0648\\u0646\\u0627 \\u0686\\u0627\\u06C1\\u06CC\\u06D2`:i.format==="includes"?`\\u063A\\u0644\\u0637 \\u0633\\u0679\\u0631\\u0646\\u06AF: "${i.includes}" \\u0634\\u0627\\u0645\\u0644 \\u06C1\\u0648\\u0646\\u0627 \\u0686\\u0627\\u06C1\\u06CC\\u06D2`:i.format==="regex"?`\\u063A\\u0644\\u0637 \\u0633\\u0679\\u0631\\u0646\\u06AF: \\u067E\\u06CC\\u0679\\u0631\\u0646 ${i.pattern} \\u0633\\u06D2 \\u0645\\u06CC\\u0686 \\u06C1\\u0648\\u0646\\u0627 \\u0686\\u0627\\u06C1\\u06CC\\u06D2`:`\\u063A\\u0644\\u0637 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u063A\\u0644\\u0637 \\u0646\\u0645\\u0628\\u0631: ${t.divisor} \\u06A9\\u0627 \\u0645\\u0636\\u0627\\u0639\\u0641 \\u06C1\\u0648\\u0646\\u0627 \\u0686\\u0627\\u06C1\\u06CC\\u06D2`;case"unrecognized_keys":return`\\u063A\\u06CC\\u0631 \\u062A\\u0633\\u0644\\u06CC\\u0645 \\u0634\\u062F\\u06C1 \\u06A9\\u06CC${t.keys.length>1?"\\u0632":""}: ${l(t.keys,"\\u060C ")}`;case"invalid_key":return`${t.origin} \\u0645\\u06CC\\u06BA \\u063A\\u0644\\u0637 \\u06A9\\u06CC`;case"invalid_union":return"\\u063A\\u0644\\u0637 \\u0627\\u0646 \\u067E\\u0679";case"invalid_element":return`${t.origin} \\u0645\\u06CC\\u06BA \\u063A\\u0644\\u0637 \\u0648\\u06CC\\u0644\\u06CC\\u0648`;default:return"\\u063A\\u0644\\u0637 \\u0627\\u0646 \\u067E\\u0679"}}};function uc(){return{localeError:cd()}}var sd=()=>{let e={string:{unit:"k\\xFD t\\u1EF1",verb:"c\\xF3"},file:{unit:"byte",verb:"c\\xF3"},array:{unit:"ph\\u1EA7n t\\u1EED",verb:"c\\xF3"},set:{unit:"ph\\u1EA7n t\\u1EED",verb:"c\\xF3"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"s\\u1ED1";case"object":{if(Array.isArray(t))return"m\\u1EA3ng";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u0111\\u1EA7u v\\xE0o",email:"\\u0111\\u1ECBa ch\\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\\xE0y gi\\u1EDD ISO",date:"ng\\xE0y ISO",time:"gi\\u1EDD ISO",duration:"kho\\u1EA3ng th\\u1EDDi gian ISO",ipv4:"\\u0111\\u1ECBa ch\\u1EC9 IPv4",ipv6:"\\u0111\\u1ECBa ch\\u1EC9 IPv6",cidrv4:"d\\u1EA3i IPv4",cidrv6:"d\\u1EA3i IPv6",base64:"chu\\u1ED7i m\\xE3 h\\xF3a base64",base64url:"chu\\u1ED7i m\\xE3 h\\xF3a base64url",json_string:"chu\\u1ED7i JSON",e164:"s\\u1ED1 E.164",jwt:"JWT",template_literal:"\\u0111\\u1EA7u v\\xE0o"};return t=>{switch(t.code){case"invalid_type":return`\\u0110\\u1EA7u v\\xE0o kh\\xF4ng h\\u1EE3p l\\u1EC7: mong \\u0111\\u1EE3i ${t.expected}, nh\\u1EADn \\u0111\\u01B0\\u1EE3c ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u0110\\u1EA7u v\\xE0o kh\\xF4ng h\\u1EE3p l\\u1EC7: mong \\u0111\\u1EE3i ${p(t.values[0])}`:`T\\xF9y ch\\u1ECDn kh\\xF4ng h\\u1EE3p l\\u1EC7: mong \\u0111\\u1EE3i m\\u1ED9t trong c\\xE1c gi\\xE1 tr\\u1ECB ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`Qu\\xE1 l\\u1EDBn: mong \\u0111\\u1EE3i ${t.origin??"gi\\xE1 tr\\u1ECB"} ${a.verb} ${i}${t.maximum.toString()} ${a.unit??"ph\\u1EA7n t\\u1EED"}`:`Qu\\xE1 l\\u1EDBn: mong \\u0111\\u1EE3i ${t.origin??"gi\\xE1 tr\\u1ECB"} ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`Qu\\xE1 nh\\u1ECF: mong \\u0111\\u1EE3i ${t.origin} ${a.verb} ${i}${t.minimum.toString()} ${a.unit}`:`Qu\\xE1 nh\\u1ECF: mong \\u0111\\u1EE3i ${t.origin} ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`Chu\\u1ED7i kh\\xF4ng h\\u1EE3p l\\u1EC7: ph\\u1EA3i b\\u1EAFt \\u0111\\u1EA7u b\\u1EB1ng "${i.prefix}"`:i.format==="ends_with"?`Chu\\u1ED7i kh\\xF4ng h\\u1EE3p l\\u1EC7: ph\\u1EA3i k\\u1EBFt th\\xFAc b\\u1EB1ng "${i.suffix}"`:i.format==="includes"?`Chu\\u1ED7i kh\\xF4ng h\\u1EE3p l\\u1EC7: ph\\u1EA3i bao g\\u1ED3m "${i.includes}"`:i.format==="regex"?`Chu\\u1ED7i kh\\xF4ng h\\u1EE3p l\\u1EC7: ph\\u1EA3i kh\\u1EDBp v\\u1EDBi m\\u1EABu ${i.pattern}`:`${o[i.format]??t.format} kh\\xF4ng h\\u1EE3p l\\u1EC7`}case"not_multiple_of":return`S\\u1ED1 kh\\xF4ng h\\u1EE3p l\\u1EC7: ph\\u1EA3i l\\xE0 b\\u1ED9i s\\u1ED1 c\\u1EE7a ${t.divisor}`;case"unrecognized_keys":return`Kh\\xF3a kh\\xF4ng \\u0111\\u01B0\\u1EE3c nh\\u1EADn d\\u1EA1ng: ${l(t.keys,", ")}`;case"invalid_key":return`Kh\\xF3a kh\\xF4ng h\\u1EE3p l\\u1EC7 trong ${t.origin}`;case"invalid_union":return"\\u0110\\u1EA7u v\\xE0o kh\\xF4ng h\\u1EE3p l\\u1EC7";case"invalid_element":return`Gi\\xE1 tr\\u1ECB kh\\xF4ng h\\u1EE3p l\\u1EC7 trong ${t.origin}`;default:return"\\u0110\\u1EA7u v\\xE0o kh\\xF4ng h\\u1EE3p l\\u1EC7"}}};function cc(){return{localeError:sd()}}var ld=()=>{let e={string:{unit:"\\u5B57\\u7B26",verb:"\\u5305\\u542B"},file:{unit:"\\u5B57\\u8282",verb:"\\u5305\\u542B"},array:{unit:"\\u9879",verb:"\\u5305\\u542B"},set:{unit:"\\u9879",verb:"\\u5305\\u542B"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"\\u975E\\u6570\\u5B57(NaN)":"\\u6570\\u5B57";case"object":{if(Array.isArray(t))return"\\u6570\\u7EC4";if(t===null)return"\\u7A7A\\u503C(null)";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u8F93\\u5165",email:"\\u7535\\u5B50\\u90AE\\u4EF6",url:"URL",emoji:"\\u8868\\u60C5\\u7B26\\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\\u65E5\\u671F\\u65F6\\u95F4",date:"ISO\\u65E5\\u671F",time:"ISO\\u65F6\\u95F4",duration:"ISO\\u65F6\\u957F",ipv4:"IPv4\\u5730\\u5740",ipv6:"IPv6\\u5730\\u5740",cidrv4:"IPv4\\u7F51\\u6BB5",cidrv6:"IPv6\\u7F51\\u6BB5",base64:"base64\\u7F16\\u7801\\u5B57\\u7B26\\u4E32",base64url:"base64url\\u7F16\\u7801\\u5B57\\u7B26\\u4E32",json_string:"JSON\\u5B57\\u7B26\\u4E32",e164:"E.164\\u53F7\\u7801",jwt:"JWT",template_literal:"\\u8F93\\u5165"};return t=>{switch(t.code){case"invalid_type":return`\\u65E0\\u6548\\u8F93\\u5165\\uFF1A\\u671F\\u671B ${t.expected}\\uFF0C\\u5B9E\\u9645\\u63A5\\u6536 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u65E0\\u6548\\u8F93\\u5165\\uFF1A\\u671F\\u671B ${p(t.values[0])}`:`\\u65E0\\u6548\\u9009\\u9879\\uFF1A\\u671F\\u671B\\u4EE5\\u4E0B\\u4E4B\\u4E00 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u6570\\u503C\\u8FC7\\u5927\\uFF1A\\u671F\\u671B ${t.origin??"\\u503C"} ${i}${t.maximum.toString()} ${a.unit??"\\u4E2A\\u5143\\u7D20"}`:`\\u6570\\u503C\\u8FC7\\u5927\\uFF1A\\u671F\\u671B ${t.origin??"\\u503C"} ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u6570\\u503C\\u8FC7\\u5C0F\\uFF1A\\u671F\\u671B ${t.origin} ${i}${t.minimum.toString()} ${a.unit}`:`\\u6570\\u503C\\u8FC7\\u5C0F\\uFF1A\\u671F\\u671B ${t.origin} ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u65E0\\u6548\\u5B57\\u7B26\\u4E32\\uFF1A\\u5FC5\\u987B\\u4EE5 "${i.prefix}" \\u5F00\\u5934`:i.format==="ends_with"?`\\u65E0\\u6548\\u5B57\\u7B26\\u4E32\\uFF1A\\u5FC5\\u987B\\u4EE5 "${i.suffix}" \\u7ED3\\u5C3E`:i.format==="includes"?`\\u65E0\\u6548\\u5B57\\u7B26\\u4E32\\uFF1A\\u5FC5\\u987B\\u5305\\u542B "${i.includes}"`:i.format==="regex"?`\\u65E0\\u6548\\u5B57\\u7B26\\u4E32\\uFF1A\\u5FC5\\u987B\\u6EE1\\u8DB3\\u6B63\\u5219\\u8868\\u8FBE\\u5F0F ${i.pattern}`:`\\u65E0\\u6548${o[i.format]??t.format}`}case"not_multiple_of":return`\\u65E0\\u6548\\u6570\\u5B57\\uFF1A\\u5FC5\\u987B\\u662F ${t.divisor} \\u7684\\u500D\\u6570`;case"unrecognized_keys":return`\\u51FA\\u73B0\\u672A\\u77E5\\u7684\\u952E(key): ${l(t.keys,", ")}`;case"invalid_key":return`${t.origin} \\u4E2D\\u7684\\u952E(key)\\u65E0\\u6548`;case"invalid_union":return"\\u65E0\\u6548\\u8F93\\u5165";case"invalid_element":return`${t.origin} \\u4E2D\\u5305\\u542B\\u65E0\\u6548\\u503C(value)`;default:return"\\u65E0\\u6548\\u8F93\\u5165"}}};function sc(){return{localeError:ld()}}var dd=()=>{let e={string:{unit:"\\u5B57\\u5143",verb:"\\u64C1\\u6709"},file:{unit:"\\u4F4D\\u5143\\u7D44",verb:"\\u64C1\\u6709"},array:{unit:"\\u9805\\u76EE",verb:"\\u64C1\\u6709"},set:{unit:"\\u9805\\u76EE",verb:"\\u64C1\\u6709"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u8F38\\u5165",email:"\\u90F5\\u4EF6\\u5730\\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \\u65E5\\u671F\\u6642\\u9593",date:"ISO \\u65E5\\u671F",time:"ISO \\u6642\\u9593",duration:"ISO \\u671F\\u9593",ipv4:"IPv4 \\u4F4D\\u5740",ipv6:"IPv6 \\u4F4D\\u5740",cidrv4:"IPv4 \\u7BC4\\u570D",cidrv6:"IPv6 \\u7BC4\\u570D",base64:"base64 \\u7DE8\\u78BC\\u5B57\\u4E32",base64url:"base64url \\u7DE8\\u78BC\\u5B57\\u4E32",json_string:"JSON \\u5B57\\u4E32",e164:"E.164 \\u6578\\u503C",jwt:"JWT",template_literal:"\\u8F38\\u5165"};return t=>{switch(t.code){case"invalid_type":return`\\u7121\\u6548\\u7684\\u8F38\\u5165\\u503C\\uFF1A\\u9810\\u671F\\u70BA ${t.expected}\\uFF0C\\u4F46\\u6536\\u5230 ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\u7121\\u6548\\u7684\\u8F38\\u5165\\u503C\\uFF1A\\u9810\\u671F\\u70BA ${p(t.values[0])}`:`\\u7121\\u6548\\u7684\\u9078\\u9805\\uFF1A\\u9810\\u671F\\u70BA\\u4EE5\\u4E0B\\u5176\\u4E2D\\u4E4B\\u4E00 ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`\\u6578\\u503C\\u904E\\u5927\\uFF1A\\u9810\\u671F ${t.origin??"\\u503C"} \\u61C9\\u70BA ${i}${t.maximum.toString()} ${a.unit??"\\u500B\\u5143\\u7D20"}`:`\\u6578\\u503C\\u904E\\u5927\\uFF1A\\u9810\\u671F ${t.origin??"\\u503C"} \\u61C9\\u70BA ${i}${t.maximum.toString()}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`\\u6578\\u503C\\u904E\\u5C0F\\uFF1A\\u9810\\u671F ${t.origin} \\u61C9\\u70BA ${i}${t.minimum.toString()} ${a.unit}`:`\\u6578\\u503C\\u904E\\u5C0F\\uFF1A\\u9810\\u671F ${t.origin} \\u61C9\\u70BA ${i}${t.minimum.toString()}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u7121\\u6548\\u7684\\u5B57\\u4E32\\uFF1A\\u5FC5\\u9808\\u4EE5 "${i.prefix}" \\u958B\\u982D`:i.format==="ends_with"?`\\u7121\\u6548\\u7684\\u5B57\\u4E32\\uFF1A\\u5FC5\\u9808\\u4EE5 "${i.suffix}" \\u7D50\\u5C3E`:i.format==="includes"?`\\u7121\\u6548\\u7684\\u5B57\\u4E32\\uFF1A\\u5FC5\\u9808\\u5305\\u542B "${i.includes}"`:i.format==="regex"?`\\u7121\\u6548\\u7684\\u5B57\\u4E32\\uFF1A\\u5FC5\\u9808\\u7B26\\u5408\\u683C\\u5F0F ${i.pattern}`:`\\u7121\\u6548\\u7684 ${o[i.format]??t.format}`}case"not_multiple_of":return`\\u7121\\u6548\\u7684\\u6578\\u5B57\\uFF1A\\u5FC5\\u9808\\u70BA ${t.divisor} \\u7684\\u500D\\u6578`;case"unrecognized_keys":return`\\u7121\\u6CD5\\u8B58\\u5225\\u7684\\u9375\\u503C${t.keys.length>1?"\\u5011":""}\\uFF1A${l(t.keys,"\\u3001")}`;case"invalid_key":return`${t.origin} \\u4E2D\\u6709\\u7121\\u6548\\u7684\\u9375\\u503C`;case"invalid_union":return"\\u7121\\u6548\\u7684\\u8F38\\u5165\\u503C";case"invalid_element":return`${t.origin} \\u4E2D\\u6709\\u7121\\u6548\\u7684\\u503C`;default:return"\\u7121\\u6548\\u7684\\u8F38\\u5165\\u503C"}}};function lc(){return{localeError:dd()}}var md=()=>{let e={string:{unit:"\\xE0mi",verb:"n\\xED"},file:{unit:"bytes",verb:"n\\xED"},array:{unit:"nkan",verb:"n\\xED"},set:{unit:"nkan",verb:"n\\xED"}};function r(t){return e[t]??null}let n=t=>{let i=typeof t;switch(i){case"number":return Number.isNaN(t)?"NaN":"n\\u1ECD\\u0301mb\\xE0";case"object":{if(Array.isArray(t))return"akop\\u1ECD";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return i},o={regex:"\\u1EB9\\u0300r\\u1ECD \\xECb\\xE1w\\u1ECDl\\xE9",email:"\\xE0d\\xEDr\\u1EB9\\u0301s\\xEC \\xECm\\u1EB9\\u0301l\\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\\xE0k\\xF3k\\xF2 ISO",date:"\\u1ECDj\\u1ECD\\u0301 ISO",time:"\\xE0k\\xF3k\\xF2 ISO",duration:"\\xE0k\\xF3k\\xF2 t\\xF3 p\\xE9 ISO",ipv4:"\\xE0d\\xEDr\\u1EB9\\u0301s\\xEC IPv4",ipv6:"\\xE0d\\xEDr\\u1EB9\\u0301s\\xEC IPv6",cidrv4:"\\xE0gb\\xE8gb\\xE8 IPv4",cidrv6:"\\xE0gb\\xE8gb\\xE8 IPv6",base64:"\\u1ECD\\u0300r\\u1ECD\\u0300 t\\xED a k\\u1ECD\\u0301 n\\xED base64",base64url:"\\u1ECD\\u0300r\\u1ECD\\u0300 base64url",json_string:"\\u1ECD\\u0300r\\u1ECD\\u0300 JSON",e164:"n\\u1ECD\\u0301mb\\xE0 E.164",jwt:"JWT",template_literal:"\\u1EB9\\u0300r\\u1ECD \\xECb\\xE1w\\u1ECDl\\xE9"};return t=>{switch(t.code){case"invalid_type":return`\\xCCb\\xE1w\\u1ECDl\\xE9 a\\u1E63\\xEC\\u1E63e: a n\\xED l\\xE1ti fi ${t.expected}, \\xE0m\\u1ECD\\u0300 a r\\xED ${n(t.input)}`;case"invalid_value":return t.values.length===1?`\\xCCb\\xE1w\\u1ECDl\\xE9 a\\u1E63\\xEC\\u1E63e: a n\\xED l\\xE1ti fi ${p(t.values[0])}`:`\\xC0\\u1E63\\xE0y\\xE0n a\\u1E63\\xEC\\u1E63e: yan \\u1ECD\\u0300kan l\\xE1ra ${l(t.values,"|")}`;case"too_big":{let i=t.inclusive?"<=":"<",a=r(t.origin);return a?`T\\xF3 p\\u1ECD\\u0300 j\\xF9: a n\\xED l\\xE1ti j\\u1EB9\\u0301 p\\xE9 ${t.origin??"iye"} ${a.verb} ${i}${t.maximum} ${a.unit}`:`T\\xF3 p\\u1ECD\\u0300 j\\xF9: a n\\xED l\\xE1ti j\\u1EB9\\u0301 ${i}${t.maximum}`}case"too_small":{let i=t.inclusive?">=":">",a=r(t.origin);return a?`K\\xE9r\\xE9 ju: a n\\xED l\\xE1ti j\\u1EB9\\u0301 p\\xE9 ${t.origin} ${a.verb} ${i}${t.minimum} ${a.unit}`:`K\\xE9r\\xE9 ju: a n\\xED l\\xE1ti j\\u1EB9\\u0301 ${i}${t.minimum}`}case"invalid_format":{let i=t;return i.format==="starts_with"?`\\u1ECC\\u0300r\\u1ECD\\u0300 a\\u1E63\\xEC\\u1E63e: gb\\u1ECD\\u0301d\\u1ECD\\u0300 b\\u1EB9\\u0300r\\u1EB9\\u0300 p\\u1EB9\\u0300l\\xFA "${i.prefix}"`:i.format==="ends_with"?`\\u1ECC\\u0300r\\u1ECD\\u0300 a\\u1E63\\xEC\\u1E63e: gb\\u1ECD\\u0301d\\u1ECD\\u0300 par\\xED p\\u1EB9\\u0300l\\xFA "${i.suffix}"`:i.format==="includes"?`\\u1ECC\\u0300r\\u1ECD\\u0300 a\\u1E63\\xEC\\u1E63e: gb\\u1ECD\\u0301d\\u1ECD\\u0300 n\\xED "${i.includes}"`:i.format==="regex"?`\\u1ECC\\u0300r\\u1ECD\\u0300 a\\u1E63\\xEC\\u1E63e: gb\\u1ECD\\u0301d\\u1ECD\\u0300 b\\xE1 \\xE0p\\u1EB9\\u1EB9r\\u1EB9 mu ${i.pattern}`:`A\\u1E63\\xEC\\u1E63e: ${o[i.format]??t.format}`}case"not_multiple_of":return`N\\u1ECD\\u0301mb\\xE0 a\\u1E63\\xEC\\u1E63e: gb\\u1ECD\\u0301d\\u1ECD\\u0300 j\\u1EB9\\u0301 \\xE8y\\xE0 p\\xEDp\\xEDn ti ${t.divisor}`;case"unrecognized_keys":return`B\\u1ECDt\\xECn\\xEC \\xE0\\xECm\\u1ECD\\u0300: ${l(t.keys,", ")}`;case"invalid_key":return`B\\u1ECDt\\xECn\\xEC a\\u1E63\\xEC\\u1E63e n\\xEDn\\xFA ${t.origin}`;case"invalid_union":return"\\xCCb\\xE1w\\u1ECDl\\xE9 a\\u1E63\\xEC\\u1E63e";case"invalid_element":return`Iye a\\u1E63\\xEC\\u1E63e n\\xEDn\\xFA ${t.origin}`;default:return"\\xCCb\\xE1w\\u1ECDl\\xE9 a\\u1E63\\xEC\\u1E63e"}}};function dc(){return{localeError:md()}}var eo=Symbol("ZodOutput"),to=Symbol("ZodInput"),je=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(r,...n){let o=n[0];if(this._map.set(r,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,r)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(r){let n=this._map.get(r);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(r),this}get(r){let n=r._zod.parent;if(n){let o={...this.get(n)??{}};delete o.id;let t={...o,...this._map.get(r)};return Object.keys(t).length?t:void 0}return this._map.get(r)}has(r){return this._map.has(r)}};function Qt(){return new je}var q=Qt();function ro(e,r){return new e({type:"string",...v(r)})}function no(e,r){return new e({type:"string",coerce:!0,...v(r)})}function Ht(e,r){return new e({type:"string",format:"email",check:"string_format",abort:!1,...v(r)})}function rt(e,r){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...v(r)})}function er(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...v(r)})}function tr(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...v(r)})}function rr(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...v(r)})}function nr(e,r){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...v(r)})}function nt(e,r){return new e({type:"string",format:"url",check:"string_format",abort:!1,...v(r)})}function ir(e,r){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...v(r)})}function or(e,r){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...v(r)})}function ar(e,r){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...v(r)})}function ur(e,r){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...v(r)})}function cr(e,r){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...v(r)})}function sr(e,r){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...v(r)})}function lr(e,r){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...v(r)})}function dr(e,r){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...v(r)})}function mr(e,r){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...v(r)})}function fr(e,r){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...v(r)})}function pr(e,r){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...v(r)})}function gr(e,r){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...v(r)})}function vr(e,r){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...v(r)})}function hr(e,r){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...v(r)})}function $r(e,r){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...v(r)})}var io={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function oo(e,r){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...v(r)})}function ao(e,r){return new e({type:"string",format:"date",check:"string_format",...v(r)})}function uo(e,r){return new e({type:"string",format:"time",check:"string_format",precision:null,...v(r)})}function co(e,r){return new e({type:"string",format:"duration",check:"string_format",...v(r)})}function so(e,r){return new e({type:"number",checks:[],...v(r)})}function lo(e,r){return new e({type:"number",coerce:!0,checks:[],...v(r)})}function mo(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...v(r)})}function fo(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...v(r)})}function po(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...v(r)})}function go(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...v(r)})}function vo(e,r){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...v(r)})}function ho(e,r){return new e({type:"boolean",...v(r)})}function $o(e,r){return new e({type:"boolean",coerce:!0,...v(r)})}function bo(e,r){return new e({type:"bigint",...v(r)})}function _o(e,r){return new e({type:"bigint",coerce:!0,...v(r)})}function yo(e,r){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...v(r)})}function xo(e,r){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...v(r)})}function ko(e,r){return new e({type:"symbol",...v(r)})}function zo(e,r){return new e({type:"undefined",...v(r)})}function Io(e,r){return new e({type:"null",...v(r)})}function wo(e){return new e({type:"any"})}function So(e){return new e({type:"unknown"})}function jo(e,r){return new e({type:"never",...v(r)})}function Oo(e,r){return new e({type:"void",...v(r)})}function Po(e,r){return new e({type:"date",...v(r)})}function Uo(e,r){return new e({type:"date",coerce:!0,...v(r)})}function No(e,r){return new e({type:"nan",...v(r)})}function H(e,r){return new Rt({check:"less_than",...v(r),value:e,inclusive:!1})}function G(e,r){return new Rt({check:"less_than",...v(r),value:e,inclusive:!0})}function ee(e,r){return new Lt({check:"greater_than",...v(r),value:e,inclusive:!1})}function C(e,r){return new Lt({check:"greater_than",...v(r),value:e,inclusive:!0})}function Zo(e){return ee(0,e)}function Do(e){return H(0,e)}function To(e){return G(0,e)}function Eo(e){return C(0,e)}function $e(e,r){return new Sn({check:"multiple_of",...v(r),value:e})}function Oe(e,r){return new Pn({check:"max_size",...v(r),maximum:e})}function be(e,r){return new Un({check:"min_size",...v(r),minimum:e})}function it(e,r){return new Nn({check:"size_equals",...v(r),size:e})}function Pe(e,r){return new Zn({check:"max_length",...v(r),maximum:e})}function le(e,r){return new Dn({check:"min_length",...v(r),minimum:e})}function Ue(e,r){return new Tn({check:"length_equals",...v(r),length:e})}function ot(e,r){return new En({check:"string_format",format:"regex",...v(r),pattern:e})}function at(e){return new An({check:"string_format",format:"lowercase",...v(e)})}function ut(e){return new Rn({check:"string_format",format:"uppercase",...v(e)})}function ct(e,r){return new Ln({check:"string_format",format:"includes",...v(r),includes:e})}function st(e,r){return new Cn({check:"string_format",format:"starts_with",...v(r),prefix:e})}function lt(e,r){return new Vn({check:"string_format",format:"ends_with",...v(r),suffix:e})}function Ao(e,r,n){return new Fn({check:"property",property:e,schema:r,...v(n)})}function dt(e,r){return new Jn({check:"mime_type",mime:e,...v(r)})}function te(e){return new Mn({check:"overwrite",tx:e})}function mt(e){return te(r=>r.normalize(e))}function ft(){return te(e=>e.trim())}function pt(){return te(e=>e.toLowerCase())}function gt(){return te(e=>e.toUpperCase())}function Ro(e,r,n){return new e({type:"array",element:r,...v(n)})}function fd(e,r,n){return new e({type:"union",options:r,...v(n)})}function pd(e,r,n,o){return new e({type:"union",options:n,discriminator:r,...v(o)})}function gd(e,r,n){return new e({type:"intersection",left:r,right:n})}function vd(e,r,n,o){let t=n instanceof x,i=t?o:n,a=t?n:null;return new e({type:"tuple",items:r,rest:a,...v(i)})}function hd(e,r,n,o){return new e({type:"record",keyType:r,valueType:n,...v(o)})}function $d(e,r,n,o){return new e({type:"map",keyType:r,valueType:n,...v(o)})}function bd(e,r,n){return new e({type:"set",valueType:r,...v(n)})}function _d(e,r,n){let o=Array.isArray(r)?Object.fromEntries(r.map(t=>[t,t])):r;return new e({type:"enum",entries:o,...v(n)})}function yd(e,r,n){return new e({type:"enum",entries:r,...v(n)})}function xd(e,r,n){return new e({type:"literal",values:Array.isArray(r)?r:[r],...v(n)})}function Lo(e,r){return new e({type:"file",...v(r)})}function kd(e,r){return new e({type:"transform",transform:r})}function zd(e,r){return new e({type:"optional",innerType:r})}function Id(e,r){return new e({type:"nullable",innerType:r})}function wd(e,r,n){return new e({type:"default",innerType:r,get defaultValue(){return typeof n=="function"?n():Fr(n)}})}function Sd(e,r,n){return new e({type:"nonoptional",innerType:r,...v(n)})}function jd(e,r){return new e({type:"success",innerType:r})}function Od(e,r,n){return new e({type:"catch",innerType:r,catchValue:typeof n=="function"?n:()=>n})}function Pd(e,r,n){return new e({type:"pipe",in:r,out:n})}function Ud(e,r){return new e({type:"readonly",innerType:r})}function Nd(e,r,n){return new e({type:"template_literal",parts:r,...v(n)})}function Zd(e,r){return new e({type:"lazy",getter:r})}function Dd(e,r){return new e({type:"promise",innerType:r})}function Co(e,r,n){let o=v(n);return o.abort??(o.abort=!0),new e({type:"custom",check:"custom",fn:r,...o})}function Vo(e,r,n){return new e({type:"custom",check:"custom",fn:r,...v(n)})}function Fo(e){let r=mc(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(xe(o,n.value,r._zod.def));else{let t=o;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=r),t.continue??(t.continue=!r._zod.def.abort),n.issues.push(xe(t))}},e(n.value,n)));return r}function mc(e,r){let n=new Z({check:"custom",...v(r)});return n._zod.check=e,n}function Jo(e,r){let n=v(r),o=n.truthy??["true","1","yes","on","y","enabled"],t=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(o=o.map($=>typeof $=="string"?$.toLowerCase():$),t=t.map($=>typeof $=="string"?$.toLowerCase():$));let i=new Set(o),a=new Set(t),u=e.Codec??Qe,s=e.Boolean??Ye,m=e.String??he,f=new m({type:"string",error:n.error}),g=new s({type:"boolean",error:n.error}),y=new u({type:"pipe",in:f,out:g,transform:($,d)=>{let b=$;return n.case!=="sensitive"&&(b=b.toLowerCase()),i.has(b)?!0:a.has(b)?!1:(d.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...a],input:d.value,inst:y,continue:!1}),{})},reverseTransform:($,d)=>$===!0?o[0]||"true":t[0]||"false",error:n.error});return y}function Ne(e,r,n,o={}){let t=v(o),i={...v(o),check:"string_format",type:"string",format:r,fn:typeof n=="function"?n:u=>n.test(u),...t};return n instanceof RegExp&&(i.pattern=n),new e(i)}var vt=class{constructor(r){this.counter=0,this.metadataRegistry=r?.metadata??q,this.target=r?.target??"draft-2020-12",this.unrepresentable=r?.unrepresentable??"throw",this.override=r?.override??(()=>{}),this.io=r?.io??"output",this.seen=new Map}process(r,n={path:[],schemaPath:[]}){var o;let t=r._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(r);if(a)return a.count++,n.schemaPath.includes(r)&&(a.cycle=n.path),a.schema;let u={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(r,u);let s=r._zod.toJSONSchema?.();if(s)u.schema=s;else{let g={...n,schemaPath:[...n.schemaPath,r],path:n.path},y=r._zod.parent;if(y)u.ref=y,this.process(y,g),this.seen.get(y).isParent=!0;else{let $=u.schema;switch(t.type){case"string":{let d=$;d.type="string";let{minimum:b,maximum:_,format:S,patterns:w,contentEncoding:z}=r._zod.bag;if(typeof b=="number"&&(d.minLength=b),typeof _=="number"&&(d.maxLength=_),S&&(d.format=i[S]??S,d.format===""&&delete d.format),z&&(d.contentEncoding=z),w&&w.size>0){let j=[...w];j.length===1?d.pattern=j[0].source:j.length>1&&(u.schema.allOf=[...j.map(A=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:A.source}))])}break}case"number":{let d=$,{minimum:b,maximum:_,format:S,multipleOf:w,exclusiveMaximum:z,exclusiveMinimum:j}=r._zod.bag;typeof S=="string"&&S.includes("int")?d.type="integer":d.type="number",typeof j=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(d.minimum=j,d.exclusiveMinimum=!0):d.exclusiveMinimum=j),typeof b=="number"&&(d.minimum=b,typeof j=="number"&&this.target!=="draft-4"&&(j>=b?delete d.minimum:delete d.exclusiveMinimum)),typeof z=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(d.maximum=z,d.exclusiveMaximum=!0):d.exclusiveMaximum=z),typeof _=="number"&&(d.maximum=_,typeof z=="number"&&this.target!=="draft-4"&&(z<=_?delete d.maximum:delete d.exclusiveMaximum)),typeof w=="number"&&(d.multipleOf=w);break}case"boolean":{let d=$;d.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?($.type="string",$.nullable=!0,$.enum=[null]):$.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{$.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let d=$,{minimum:b,maximum:_}=r._zod.bag;typeof b=="number"&&(d.minItems=b),typeof _=="number"&&(d.maxItems=_),d.type="array",d.items=this.process(t.element,{...g,path:[...g.path,"items"]});break}case"object":{let d=$;d.type="object",d.properties={};let b=t.shape;for(let w in b)d.properties[w]=this.process(b[w],{...g,path:[...g.path,"properties",w]});let _=new Set(Object.keys(b)),S=new Set([..._].filter(w=>{let z=t.shape[w]._zod;return this.io==="input"?z.optin===void 0:z.optout===void 0}));S.size>0&&(d.required=Array.from(S)),t.catchall?._zod.def.type==="never"?d.additionalProperties=!1:t.catchall?t.catchall&&(d.additionalProperties=this.process(t.catchall,{...g,path:[...g.path,"additionalProperties"]})):this.io==="output"&&(d.additionalProperties=!1);break}case"union":{let d=$,b=t.options.map((_,S)=>this.process(_,{...g,path:[...g.path,"anyOf",S]}));d.anyOf=b;break}case"intersection":{let d=$,b=this.process(t.left,{...g,path:[...g.path,"allOf",0]}),_=this.process(t.right,{...g,path:[...g.path,"allOf",1]}),S=z=>"allOf"in z&&Object.keys(z).length===1,w=[...S(b)?b.allOf:[b],...S(_)?_.allOf:[_]];d.allOf=w;break}case"tuple":{let d=$;d.type="array";let b=this.target==="draft-2020-12"?"prefixItems":"items",_=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",S=t.items.map((A,P)=>this.process(A,{...g,path:[...g.path,b,P]})),w=t.rest?this.process(t.rest,{...g,path:[...g.path,_,...this.target==="openapi-3.0"?[t.items.length]:[]]}):null;this.target==="draft-2020-12"?(d.prefixItems=S,w&&(d.items=w)):this.target==="openapi-3.0"?(d.items={anyOf:S},w&&d.items.anyOf.push(w),d.minItems=S.length,w||(d.maxItems=S.length)):(d.items=S,w&&(d.additionalItems=w));let{minimum:z,maximum:j}=r._zod.bag;typeof z=="number"&&(d.minItems=z),typeof j=="number"&&(d.maxItems=j);break}case"record":{let d=$;d.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(d.propertyNames=this.process(t.keyType,{...g,path:[...g.path,"propertyNames"]})),d.additionalProperties=this.process(t.valueType,{...g,path:[...g.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let d=$,b=Ce(t.entries);b.every(_=>typeof _=="number")&&(d.type="number"),b.every(_=>typeof _=="string")&&(d.type="string"),d.enum=b;break}case"literal":{let d=$,b=[];for(let _ of t.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(_))}else b.push(_);if(b.length!==0)if(b.length===1){let _=b[0];d.type=_===null?"null":typeof _,this.target==="draft-4"||this.target==="openapi-3.0"?d.enum=[_]:d.const=_}else b.every(_=>typeof _=="number")&&(d.type="number"),b.every(_=>typeof _=="string")&&(d.type="string"),b.every(_=>typeof _=="boolean")&&(d.type="string"),b.every(_=>_===null)&&(d.type="null"),d.enum=b;break}case"file":{let d=$,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:S,mime:w}=r._zod.bag;_!==void 0&&(b.minLength=_),S!==void 0&&(b.maxLength=S),w?w.length===1?(b.contentMediaType=w[0],Object.assign(d,b)):d.anyOf=w.map(z=>({...b,contentMediaType:z})):Object.assign(d,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let d=this.process(t.innerType,g);this.target==="openapi-3.0"?(u.ref=t.innerType,$.nullable=!0):$.anyOf=[d,{type:"null"}];break}case"nonoptional":{this.process(t.innerType,g),u.ref=t.innerType;break}case"success":{let d=$;d.type="boolean";break}case"default":{this.process(t.innerType,g),u.ref=t.innerType,$.default=JSON.parse(JSON.stringify(t.defaultValue));break}case"prefault":{this.process(t.innerType,g),u.ref=t.innerType,this.io==="input"&&($._prefault=JSON.parse(JSON.stringify(t.defaultValue)));break}case"catch":{this.process(t.innerType,g),u.ref=t.innerType;let d;try{d=t.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}$.default=d;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let d=$,b=r._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");d.type="string",d.pattern=b.source;break}case"pipe":{let d=this.io==="input"?t.in._zod.def.type==="transform"?t.out:t.in:t.out;this.process(d,g),u.ref=d;break}case"readonly":{this.process(t.innerType,g),u.ref=t.innerType,$.readOnly=!0;break}case"promise":{this.process(t.innerType,g),u.ref=t.innerType;break}case"optional":{this.process(t.innerType,g),u.ref=t.innerType;break}case"lazy":{let d=r._zod.innerType;this.process(d,g),u.ref=d;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let m=this.metadataRegistry.get(r);return m&&Object.assign(u.schema,m),this.io==="input"&&T(r)&&(delete u.schema.examples,delete u.schema.default),this.io==="input"&&u.schema._prefault&&((o=u.schema).default??(o.default=u.schema._prefault)),delete u.schema._prefault,this.seen.get(r).schema}emit(r,n){let o={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},t=this.seen.get(r);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=f=>{let g=this.target==="draft-2020-12"?"$defs":"definitions";if(o.external){let b=o.external.registry.get(f[0])?.id,_=o.external.uri??(w=>w);if(b)return{ref:_(b)};let S=f[1].defId??f[1].schema.id??`schema${this.counter++}`;return f[1].defId=S,{defId:S,ref:`${_("__shared")}#/${g}/${S}`}}if(f[1]===t)return{ref:"#"};let $=`#/${g}/`,d=f[1].schema.id??`__schema${this.counter++}`;return{defId:d,ref:$+d}},a=f=>{if(f[1].schema.$ref)return;let g=f[1],{ref:y,defId:$}=i(f);g.def={...g.schema},$&&(g.defId=$);let d=g.schema;for(let b in d)delete d[b];d.$ref=y};if(o.cycles==="throw")for(let f of this.seen.entries()){let g=f[1];if(g.cycle)throw new Error(`Cycle detected: #/${g.cycle?.join("/")}/<root>\n\nSet the \\`cycles\\` parameter to \\`"ref"\\` to resolve cyclical schemas with defs.`)}for(let f of this.seen.entries()){let g=f[1];if(r===f[0]){a(f);continue}if(o.external){let $=o.external.registry.get(f[0])?.id;if(r!==f[0]&&$){a(f);continue}}if(this.metadataRegistry.get(f[0])?.id){a(f);continue}if(g.cycle){a(f);continue}if(g.count>1&&o.reused==="ref"){a(f);continue}}let u=(f,g)=>{let y=this.seen.get(f),$=y.def??y.schema,d={...$};if(y.ref===null)return;let b=y.ref;if(y.ref=null,b){u(b,g);let _=this.seen.get(b).schema;_.$ref&&(g.target==="draft-7"||g.target==="draft-4"||g.target==="openapi-3.0")?($.allOf=$.allOf??[],$.allOf.push(_)):(Object.assign($,_),Object.assign($,d))}y.isParent||this.override({zodSchema:f,jsonSchema:$,path:y.path??[]})};for(let f of[...this.seen.entries()].reverse())u(f[0],{target:this.target});let s={};if(this.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?s.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?s.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),o.external?.uri){let f=o.external.registry.get(r)?.id;if(!f)throw new Error("Schema is missing an `id` property");s.$id=o.external.uri(f)}Object.assign(s,t.def);let m=o.external?.defs??{};for(let f of this.seen.entries()){let g=f[1];g.def&&g.defId&&(m[g.defId]=g.def)}o.external||Object.keys(m).length>0&&(this.target==="draft-2020-12"?s.$defs=m:s.definitions=m);try{return JSON.parse(JSON.stringify(s))}catch{throw new Error("Error converting schema to JSON.")}}};function Mo(e,r){if(e instanceof je){let o=new vt(r),t={};for(let u of e._idmap.entries()){let[s,m]=u;o.process(m)}let i={},a={registry:e,uri:r?.uri,defs:t};for(let u of e._idmap.entries()){let[s,m]=u;i[s]=o.emit(m,{...r,external:a})}if(Object.keys(t).length>0){let u=o.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[u]:t}}return{schemas:i}}let n=new vt(r);return n.process(e),n.emit(e,r)}function T(e,r){let n=r??{seen:new Set};if(n.seen.has(e))return!1;n.seen.add(e);let t=e._zod.def;switch(t.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return T(t.element,n);case"object":{for(let i in t.shape)if(T(t.shape[i],n))return!0;return!1}case"union":{for(let i of t.options)if(T(i,n))return!0;return!1}case"intersection":return T(t.left,n)||T(t.right,n);case"tuple":{for(let i of t.items)if(T(i,n))return!0;return!!(t.rest&&T(t.rest,n))}case"record":return T(t.keyType,n)||T(t.valueType,n);case"map":return T(t.keyType,n)||T(t.valueType,n);case"set":return T(t.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return T(t.innerType,n);case"lazy":return T(t.getter(),n);case"default":return T(t.innerType,n);case"prefault":return T(t.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return T(t.in,n)||T(t.out,n);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw new Error(`Unknown schema type: ${t.type}`)}var fc={};var kr={};pe(kr,{ZodISODate:()=>_r,ZodISODateTime:()=>br,ZodISODuration:()=>xr,ZodISOTime:()=>yr,date:()=>Ko,datetime:()=>Bo,duration:()=>Wo,time:()=>Go});var br=c("ZodISODateTime",(e,r)=>{ii.init(e,r),N.init(e,r)});function Bo(e){return oo(br,e)}var _r=c("ZodISODate",(e,r)=>{oi.init(e,r),N.init(e,r)});function Ko(e){return ao(_r,e)}var yr=c("ZodISOTime",(e,r)=>{ai.init(e,r),N.init(e,r)});function Go(e){return uo(yr,e)}var xr=c("ZodISODuration",(e,r)=>{ui.init(e,r),N.init(e,r)});function Wo(e){return co(xr,e)}var gc=(e,r)=>{Be.init(e,r),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>Ge(e,n)},flatten:{value:n=>Ke(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,_e,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,_e,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ed=c("ZodError",gc),V=c("ZodError",gc,{Parent:Error});var Xo=ke(V),qo=ze(V),Yo=Ie(V),Qo=we(V),Ho=Ot(V),ea=Pt(V),ta=Ut(V),ra=Nt(V),na=Zt(V),ia=Dt(V),oa=Tt(V),aa=Et(V);var k=c("ZodType",(e,r)=>(x.init(e,r),e.def=r,e.type=r.type,Object.defineProperty(e,"_def",{value:r}),e.check=(...n)=>e.clone(h.mergeDefs(r,{checks:[...r.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>R(e,n,o),e.brand=()=>e,e.register=(n,o)=>(n.add(e,o),e),e.parse=(n,o)=>Xo(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>Yo(e,n,o),e.parseAsync=async(n,o)=>qo(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>Qo(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>Ho(e,n,o),e.decode=(n,o)=>ea(e,n,o),e.encodeAsync=async(n,o)=>ta(e,n,o),e.decodeAsync=async(n,o)=>ra(e,n,o),e.safeEncode=(n,o)=>na(e,n,o),e.safeDecode=(n,o)=>ia(e,n,o),e.safeEncodeAsync=async(n,o)=>oa(e,n,o),e.safeDecodeAsync=async(n,o)=>aa(e,n,o),e.refine=(n,o)=>e.check(ts(n,o)),e.superRefine=n=>e.check(rs(n)),e.overwrite=n=>e.check(te(n)),e.optional=()=>Ir(e),e.nullable=()=>wr(e),e.nullish=()=>Ir(wr(e)),e.nonoptional=n=>Jc(e,n),e.array=()=>Pr(e),e.or=n=>Oa([e,n]),e.and=n=>Oc(e,n),e.transform=n=>Sr(e,Na(n)),e.default=n=>Cc(e,n),e.prefault=n=>Fc(e,n),e.catch=n=>Kc(e,n),e.pipe=n=>Sr(e,n),e.readonly=()=>Xc(e),e.describe=n=>{let o=e.clone();return q.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){return q.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return q.get(e);let o=e.clone();return q.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),sa=c("_ZodString",(e,r)=>{he.init(e,r),k.init(e,r);let n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(ot(...o)),e.includes=(...o)=>e.check(ct(...o)),e.startsWith=(...o)=>e.check(st(...o)),e.endsWith=(...o)=>e.check(lt(...o)),e.min=(...o)=>e.check(le(...o)),e.max=(...o)=>e.check(Pe(...o)),e.length=(...o)=>e.check(Ue(...o)),e.nonempty=(...o)=>e.check(le(1,...o)),e.lowercase=o=>e.check(at(o)),e.uppercase=o=>e.check(ut(o)),e.trim=()=>e.check(ft()),e.normalize=(...o)=>e.check(mt(...o)),e.toLowerCase=()=>e.check(pt()),e.toUpperCase=()=>e.check(gt())}),$t=c("ZodString",(e,r)=>{he.init(e,r),sa.init(e,r),e.email=n=>e.check(Ht(la,n)),e.url=n=>e.check(nt(jr,n)),e.jwt=n=>e.check($r(Ia,n)),e.emoji=n=>e.check(ir(da,n)),e.guid=n=>e.check(rt(zr,n)),e.uuid=n=>e.check(er(ne,n)),e.uuidv4=n=>e.check(tr(ne,n)),e.uuidv6=n=>e.check(rr(ne,n)),e.uuidv7=n=>e.check(nr(ne,n)),e.nanoid=n=>e.check(or(ma,n)),e.guid=n=>e.check(rt(zr,n)),e.cuid=n=>e.check(ar(fa,n)),e.cuid2=n=>e.check(ur(pa,n)),e.ulid=n=>e.check(cr(ga,n)),e.base64=n=>e.check(gr(xa,n)),e.base64url=n=>e.check(vr(ka,n)),e.xid=n=>e.check(sr(va,n)),e.ksuid=n=>e.check(lr(ha,n)),e.ipv4=n=>e.check(dr($a,n)),e.ipv6=n=>e.check(mr(ba,n)),e.cidrv4=n=>e.check(fr(_a,n)),e.cidrv6=n=>e.check(pr(ya,n)),e.e164=n=>e.check(hr(za,n)),e.datetime=n=>e.check(Bo(n)),e.date=n=>e.check(Ko(n)),e.time=n=>e.check(Go(n)),e.duration=n=>e.check(Wo(n))});function ua(e){return ro($t,e)}var N=c("ZodStringFormat",(e,r)=>{O.init(e,r),sa.init(e,r)}),la=c("ZodEmail",(e,r)=>{Xn.init(e,r),N.init(e,r)});function Rd(e){return Ht(la,e)}var zr=c("ZodGUID",(e,r)=>{Gn.init(e,r),N.init(e,r)});function Ld(e){return rt(zr,e)}var ne=c("ZodUUID",(e,r)=>{Wn.init(e,r),N.init(e,r)});function Cd(e){return er(ne,e)}function Vd(e){return tr(ne,e)}function Fd(e){return rr(ne,e)}function Jd(e){return nr(ne,e)}var jr=c("ZodURL",(e,r)=>{qn.init(e,r),N.init(e,r)});function Md(e){return nt(jr,e)}function Bd(e){return nt(jr,{protocol:/^https?$/,hostname:K.domain,...h.normalizeParams(e)})}var da=c("ZodEmoji",(e,r)=>{Yn.init(e,r),N.init(e,r)});function Kd(e){return ir(da,e)}var ma=c("ZodNanoID",(e,r)=>{Qn.init(e,r),N.init(e,r)});function Gd(e){return or(ma,e)}var fa=c("ZodCUID",(e,r)=>{Hn.init(e,r),N.init(e,r)});function Wd(e){return ar(fa,e)}var pa=c("ZodCUID2",(e,r)=>{ei.init(e,r),N.init(e,r)});function Xd(e){return ur(pa,e)}var ga=c("ZodULID",(e,r)=>{ti.init(e,r),N.init(e,r)});function qd(e){return cr(ga,e)}var va=c("ZodXID",(e,r)=>{ri.init(e,r),N.init(e,r)});function Yd(e){return sr(va,e)}var ha=c("ZodKSUID",(e,r)=>{ni.init(e,r),N.init(e,r)});function Qd(e){return lr(ha,e)}var $a=c("ZodIPv4",(e,r)=>{ci.init(e,r),N.init(e,r)});function Hd(e){return dr($a,e)}var ba=c("ZodIPv6",(e,r)=>{si.init(e,r),N.init(e,r)});function em(e){return mr(ba,e)}var _a=c("ZodCIDRv4",(e,r)=>{li.init(e,r),N.init(e,r)});function tm(e){return fr(_a,e)}var ya=c("ZodCIDRv6",(e,r)=>{di.init(e,r),N.init(e,r)});function rm(e){return pr(ya,e)}var xa=c("ZodBase64",(e,r)=>{fi.init(e,r),N.init(e,r)});function nm(e){return gr(xa,e)}var ka=c("ZodBase64URL",(e,r)=>{pi.init(e,r),N.init(e,r)});function im(e){return vr(ka,e)}var za=c("ZodE164",(e,r)=>{gi.init(e,r),N.init(e,r)});function om(e){return hr(za,e)}var Ia=c("ZodJWT",(e,r)=>{vi.init(e,r),N.init(e,r)});function am(e){return $r(Ia,e)}var bt=c("ZodCustomStringFormat",(e,r)=>{hi.init(e,r),N.init(e,r)});function um(e,r,n={}){return Ne(bt,e,r,n)}function cm(e){return Ne(bt,"hostname",K.hostname,e)}function sm(e){return Ne(bt,"hex",K.hex,e)}function lm(e,r){let n=r?.enc??"hex",o=`${e}_${n}`,t=K[o];if(!t)throw new Error(`Unrecognized hash format: ${o}`);return Ne(bt,o,t,r)}var _t=c("ZodNumber",(e,r)=>{Bt.init(e,r),k.init(e,r),e.gt=(o,t)=>e.check(ee(o,t)),e.gte=(o,t)=>e.check(C(o,t)),e.min=(o,t)=>e.check(C(o,t)),e.lt=(o,t)=>e.check(H(o,t)),e.lte=(o,t)=>e.check(G(o,t)),e.max=(o,t)=>e.check(G(o,t)),e.int=o=>e.check(ca(o)),e.safe=o=>e.check(ca(o)),e.positive=o=>e.check(ee(0,o)),e.nonnegative=o=>e.check(C(0,o)),e.negative=o=>e.check(H(0,o)),e.nonpositive=o=>e.check(G(0,o)),e.multipleOf=(o,t)=>e.check($e(o,t)),e.step=(o,t)=>e.check($e(o,t)),e.finite=()=>e;let n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function vc(e){return so(_t,e)}var De=c("ZodNumberFormat",(e,r)=>{$i.init(e,r),_t.init(e,r)});function ca(e){return mo(De,e)}function dm(e){return fo(De,e)}function mm(e){return po(De,e)}function fm(e){return go(De,e)}function pm(e){return vo(De,e)}var yt=c("ZodBoolean",(e,r)=>{Ye.init(e,r),k.init(e,r)});function hc(e){return ho(yt,e)}var xt=c("ZodBigInt",(e,r)=>{Kt.init(e,r),k.init(e,r),e.gte=(o,t)=>e.check(C(o,t)),e.min=(o,t)=>e.check(C(o,t)),e.gt=(o,t)=>e.check(ee(o,t)),e.gte=(o,t)=>e.check(C(o,t)),e.min=(o,t)=>e.check(C(o,t)),e.lt=(o,t)=>e.check(H(o,t)),e.lte=(o,t)=>e.check(G(o,t)),e.max=(o,t)=>e.check(G(o,t)),e.positive=o=>e.check(ee(BigInt(0),o)),e.negative=o=>e.check(H(BigInt(0),o)),e.nonpositive=o=>e.check(G(BigInt(0),o)),e.nonnegative=o=>e.check(C(BigInt(0),o)),e.multipleOf=(o,t)=>e.check($e(o,t));let n=e._zod.bag;e.minValue=n.minimum??null,e.maxValue=n.maximum??null,e.format=n.format??null});function gm(e){return bo(xt,e)}var wa=c("ZodBigIntFormat",(e,r)=>{bi.init(e,r),xt.init(e,r)});function vm(e){return yo(wa,e)}function hm(e){return xo(wa,e)}var $c=c("ZodSymbol",(e,r)=>{_i.init(e,r),k.init(e,r)});function $m(e){return ko($c,e)}var bc=c("ZodUndefined",(e,r)=>{yi.init(e,r),k.init(e,r)});function bm(e){return zo(bc,e)}var _c=c("ZodNull",(e,r)=>{xi.init(e,r),k.init(e,r)});function yc(e){return Io(_c,e)}var xc=c("ZodAny",(e,r)=>{ki.init(e,r),k.init(e,r)});function _m(){return wo(xc)}var kc=c("ZodUnknown",(e,r)=>{zi.init(e,r),k.init(e,r)});function Ze(){return So(kc)}var zc=c("ZodNever",(e,r)=>{Ii.init(e,r),k.init(e,r)});function Sa(e){return jo(zc,e)}var Ic=c("ZodVoid",(e,r)=>{wi.init(e,r),k.init(e,r)});function ym(e){return Oo(Ic,e)}var Or=c("ZodDate",(e,r)=>{Si.init(e,r),k.init(e,r),e.min=(o,t)=>e.check(C(o,t)),e.max=(o,t)=>e.check(G(o,t));let n=e._zod.bag;e.minDate=n.minimum?new Date(n.minimum):null,e.maxDate=n.maximum?new Date(n.maximum):null});function xm(e){return Po(Or,e)}var wc=c("ZodArray",(e,r)=>{ji.init(e,r),k.init(e,r),e.element=r.element,e.min=(n,o)=>e.check(le(n,o)),e.nonempty=n=>e.check(le(1,n)),e.max=(n,o)=>e.check(Pe(n,o)),e.length=(n,o)=>e.check(Ue(n,o)),e.unwrap=()=>e.element});function Pr(e,r){return Ro(wc,e,r)}function km(e){let r=e._zod.def.shape;return Ua(Object.keys(r))}var Ur=c("ZodObject",(e,r)=>{Oi.init(e,r),k.init(e,r),h.defineLazy(e,"shape",()=>r.shape),e.keyof=()=>Ua(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ze()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ze()}),e.strict=()=>e.clone({...e._zod.def,catchall:Sa()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>h.extend(e,n),e.safeExtend=n=>h.safeExtend(e,n),e.merge=n=>h.merge(e,n),e.pick=n=>h.pick(e,n),e.omit=n=>h.omit(e,n),e.partial=(...n)=>h.partial(Za,e,n[0]),e.required=(...n)=>h.required(Da,e,n[0])});function zm(e,r){let n={type:"object",shape:e??{},...h.normalizeParams(r)};return new Ur(n)}function Im(e,r){return new Ur({type:"object",shape:e,catchall:Sa(),...h.normalizeParams(r)})}function wm(e,r){return new Ur({type:"object",shape:e,catchall:Ze(),...h.normalizeParams(r)})}var ja=c("ZodUnion",(e,r)=>{Gt.init(e,r),k.init(e,r),e.options=r.options});function Oa(e,r){return new ja({type:"union",options:e,...h.normalizeParams(r)})}var Sc=c("ZodDiscriminatedUnion",(e,r)=>{ja.init(e,r),Pi.init(e,r)});function Sm(e,r,n){return new Sc({type:"union",options:r,discriminator:e,...h.normalizeParams(n)})}var jc=c("ZodIntersection",(e,r)=>{Ui.init(e,r),k.init(e,r)});function Oc(e,r){return new jc({type:"intersection",left:e,right:r})}var Pc=c("ZodTuple",(e,r)=>{Wt.init(e,r),k.init(e,r),e.rest=n=>e.clone({...e._zod.def,rest:n})});function Uc(e,r,n){let o=r instanceof x,t=o?n:r,i=o?r:null;return new Pc({type:"tuple",items:e,rest:i,...h.normalizeParams(t)})}var Pa=c("ZodRecord",(e,r)=>{Ni.init(e,r),k.init(e,r),e.keyType=r.keyType,e.valueType=r.valueType});function Nc(e,r,n){return new Pa({type:"record",keyType:e,valueType:r,...h.normalizeParams(n)})}function jm(e,r,n){let o=R(e);return o._zod.values=void 0,new Pa({type:"record",keyType:o,valueType:r,...h.normalizeParams(n)})}var Zc=c("ZodMap",(e,r)=>{Zi.init(e,r),k.init(e,r),e.keyType=r.keyType,e.valueType=r.valueType});function Om(e,r,n){return new Zc({type:"map",keyType:e,valueType:r,...h.normalizeParams(n)})}var Dc=c("ZodSet",(e,r)=>{Di.init(e,r),k.init(e,r),e.min=(...n)=>e.check(be(...n)),e.nonempty=n=>e.check(be(1,n)),e.max=(...n)=>e.check(Oe(...n)),e.size=(...n)=>e.check(it(...n))});function Pm(e,r){return new Dc({type:"set",valueType:e,...h.normalizeParams(r)})}var ht=c("ZodEnum",(e,r)=>{Ti.init(e,r),k.init(e,r),e.enum=r.entries,e.options=Object.values(r.entries);let n=new Set(Object.keys(r.entries));e.extract=(o,t)=>{let i={};for(let a of o)if(n.has(a))i[a]=r.entries[a];else throw new Error(`Key ${a} not found in enum`);return new ht({...r,checks:[],...h.normalizeParams(t),entries:i})},e.exclude=(o,t)=>{let i={...r.entries};for(let a of o)if(n.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new ht({...r,checks:[],...h.normalizeParams(t),entries:i})}});function Ua(e,r){let n=Array.isArray(e)?Object.fromEntries(e.map(o=>[o,o])):e;return new ht({type:"enum",entries:n,...h.normalizeParams(r)})}function Um(e,r){return new ht({type:"enum",entries:e,...h.normalizeParams(r)})}var Tc=c("ZodLiteral",(e,r)=>{Ei.init(e,r),k.init(e,r),e.values=new Set(r.values),Object.defineProperty(e,"value",{get(){if(r.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return r.values[0]}})});function Nm(e,r){return new Tc({type:"literal",values:Array.isArray(e)?e:[e],...h.normalizeParams(r)})}var Ec=c("ZodFile",(e,r)=>{Ai.init(e,r),k.init(e,r),e.min=(n,o)=>e.check(be(n,o)),e.max=(n,o)=>e.check(Oe(n,o)),e.mime=(n,o)=>e.check(dt(Array.isArray(n)?n:[n],o))});function Zm(e){return Lo(Ec,e)}var Ac=c("ZodTransform",(e,r)=>{Ri.init(e,r),k.init(e,r),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new ie(e.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(h.issue(i,n.value,r));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=e),n.issues.push(h.issue(a))}};let t=r.transform(n.value,n);return t instanceof Promise?t.then(i=>(n.value=i,n)):(n.value=t,n)}});function Na(e){return new Ac({type:"transform",transform:e})}var Za=c("ZodOptional",(e,r)=>{Li.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Ir(e){return new Za({type:"optional",innerType:e})}var Rc=c("ZodNullable",(e,r)=>{Ci.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function wr(e){return new Rc({type:"nullable",innerType:e})}function Dm(e){return Ir(wr(e))}var Lc=c("ZodDefault",(e,r)=>{Vi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Cc(e,r){return new Lc({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():h.shallowClone(r)}})}var Vc=c("ZodPrefault",(e,r)=>{Fi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Fc(e,r){return new Vc({type:"prefault",innerType:e,get defaultValue(){return typeof r=="function"?r():h.shallowClone(r)}})}var Da=c("ZodNonOptional",(e,r)=>{Ji.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Jc(e,r){return new Da({type:"nonoptional",innerType:e,...h.normalizeParams(r)})}var Mc=c("ZodSuccess",(e,r)=>{Mi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Tm(e){return new Mc({type:"success",innerType:e})}var Bc=c("ZodCatch",(e,r)=>{Bi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Kc(e,r){return new Bc({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}var Gc=c("ZodNaN",(e,r)=>{Ki.init(e,r),k.init(e,r)});function Em(e){return No(Gc,e)}var Ta=c("ZodPipe",(e,r)=>{Gi.init(e,r),k.init(e,r),e.in=r.in,e.out=r.out});function Sr(e,r){return new Ta({type:"pipe",in:e,out:r})}var Ea=c("ZodCodec",(e,r)=>{Ta.init(e,r),Qe.init(e,r)});function Am(e,r,n){return new Ea({type:"pipe",in:e,out:r,transform:n.decode,reverseTransform:n.encode})}var Wc=c("ZodReadonly",(e,r)=>{Wi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Xc(e){return new Wc({type:"readonly",innerType:e})}var qc=c("ZodTemplateLiteral",(e,r)=>{Xi.init(e,r),k.init(e,r)});function Rm(e,r){return new qc({type:"template_literal",parts:e,...h.normalizeParams(r)})}var Yc=c("ZodLazy",(e,r)=>{Qi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.getter()});function Qc(e){return new Yc({type:"lazy",getter:e})}var Hc=c("ZodPromise",(e,r)=>{Yi.init(e,r),k.init(e,r),e.unwrap=()=>e._zod.def.innerType});function Lm(e){return new Hc({type:"promise",innerType:e})}var es=c("ZodFunction",(e,r)=>{qi.init(e,r),k.init(e,r)});function Cm(e){return new es({type:"function",input:Array.isArray(e?.input)?Uc(e?.input):e?.input??Pr(Ze()),output:e?.output??Ze()})}var Nr=c("ZodCustom",(e,r)=>{Hi.init(e,r),k.init(e,r)});function Vm(e){let r=new Z({check:"custom"});return r._zod.check=e,r}function Fm(e,r){return Co(Nr,e??(()=>!0),r)}function ts(e,r={}){return Vo(Nr,e,r)}function rs(e){return Fo(e)}function Jm(e,r={error:`Input not instance of ${e.name}`}){let n=new Nr({type:"custom",check:"custom",fn:o=>o instanceof e,abort:!0,...h.normalizeParams(r)});return n._zod.bag.Class=e,n}var Mm=(...e)=>Jo({Codec:Ea,Boolean:yt,String:$t},...e);function Bm(e){let r=Qc(()=>Oa([ua(e),vc(),hc(),yc(),Pr(r),Nc(ua(),r)]));return r}function Km(e,r){return Sr(Na(e),r)}var Gm={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Wm(e){D({customError:e})}function Xm(){return D().customError}var Aa;Aa||(Aa={});var Ra={};pe(Ra,{bigint:()=>Hm,boolean:()=>Qm,date:()=>ef,number:()=>Ym,string:()=>qm});function qm(e){return no($t,e)}function Ym(e){return lo(_t,e)}function Qm(e){return $o(yt,e)}function Hm(e){return _o(xt,e)}function ef(e){return Uo(Or,e)}D(Xt());var rv=Te.union([Te.enum(["low","medium","high","always-visible"]),Te.number()]);var Zr=5;var tf=9,de=200,Dr=10;function ns(e,r,n,o,t,i,a="-1"){let u=1/0,s=1/0,m=-1/0,f=-1/0,g=new U(-Dr,0,5,n),y=new U(-Dr,0,r,5),$=new U(r-5,0,r+Dr,n),d=new U(0,n-5,r,n+Dr),b=rf(r,n,o,t,i),_=[g,y,$,d],S=new U(-de,-de,r+de*2,n+de*2);for(let P of e){let Y,Ee;for(let M=0;M<P.bboxes.length;M++){if(P.bboxes[M]==null||(Y=P.bboxes[M].boundingBox,Ee=P.bboxes[M].index,P.lockedToStrategyIndex!==-1&&Ee!==P.lockedToStrategyIndex))continue;let[kt,B,me,La]=Y,[fe,os,Ca,as]=[P.y-kt,P.y+B,P.x-me,P.x+La],Tr=Ca,Er=fe,Va=as-Ca,Fa=os-fe;u=Math.min(u,Tr)-de,s=Math.min(s,Er)-de,m=Math.max(m,Tr+Va)+de,f=Math.max(f,Er+Fa)+de,P.bboxes[M].boundingRect=new U(Tr,Er,Va,Fa)}}let w=new Ae(new U(u,s,m-u,f-s)),z={msgId:a,colliders:new Array(e.length),staticColliders:[],debug:[]},j=0;for(let P=0;P<e.length;P++){let Y=e[P];Y.bboxes?.[0]?.index===tf&&(z.staticColliders.push(Y.bboxes[0].boundingRect),w.insert(Y.bboxes[0].boundingRect),j++)}e=e.slice(j,e.length);let A;for(let P=0;P<e.length;P++)if(A=e[P],z.colliders[P]=[-1,0],A.enabledAndVisible){let[Y,Ee,M]=[1/0,-1,void 0];for(let{index:kt,boundingRect:B}of A.bboxes){if(B==null)continue;let me=[];if(me=w.queryRect(B).filter(fe=>B.intersects(fe)),A.shouldCollideWithScreenEdges&&_.forEach(fe=>{B.intersects(fe)&&me.push(fe)}),B.intersects(b)){z.colliders[P]=[-1,0,B];break}if(me.length<=Y&&(M=B,Ee=kt,Y=me.length),me.length===0){w.insert(B),z.colliders[P]=[kt,S.contains(B)?0:1,B];break}}A.rank===Zr&&M!=null&&(w.insert(M),z.colliders[P]=[Ee,S.contains(M)?0:1,M])}else z.colliders[P]=[-1,0];return z}function rf(e,r,n,o,t){switch(t){case"top-left":return new U(0,0,n,o);case"top-right":return new U(e-n,0,n,o);case"bottom-left":return new U(0,r-o,n,o);case"bottom-right":return new U(e-n,r-o,n,o);case"center":return new U((e-n)/2,(r-o)/2,n,o);case"top":return new U((e-n)/2,0,n,o);case"bottom":return new U((e-n)/2,r-o,n,o);case"left":return new U(0,(r-o)/2,n,o);case"right":return new U(e-n,(r-o)/2,n,o);default:return new U(0,r-o,n,o)}}function is(e){let r=e[0].map(n=>{let o=n[0].map(t=>({index:t[4],boundingBox:[t[0],t[1],t[2],t[3]]}));return{enabledAndVisible:n[1]===1,rank:n[2]===1?Zr:0,x:n[3],y:n[4],shouldCollideWithScreenEdges:n[5]===1,bboxes:o,lockedToStrategyIndex:n[6]}});return{msgId:"-1",totalWidth:e[3],totalHeight:e[2],watermarkWidth:e[4],watermarkHeight:e[5],watermarkPosition:e[6],colliders:r,devicePixelRatio:e[1]}}self.onmessage=e=>{let r=is(e.data);self.postMessage(ns(r.colliders,r.totalWidth,r.totalHeight,r.watermarkWidth,r.watermarkHeight,r.watermarkPosition,r.msgId))};})();\n';
$i();
$i();
$i();
$i();
$i();
function WF(e6, r6) {
  return r6.x + r6.w < e6.x + e6.w && r6.x > e6.x && r6.y > e6.y && r6.y + r6.h < e6.y + e6.h;
}
$i();
function XF(e6, r6) {
  let [t6, n] = r6;
  return t6 >= e6.x && t6 <= e6.x + e6.w && n >= e6.y && n <= e6.y + e6.h;
}
$i();
function JF(e6, r6) {
  let t6 = r6.x, n = r6.y, o = r6.x + r6.w, i = r6.y + r6.h, s6 = e6.x, u6 = e6.y, l = e6.x + e6.w, c = e6.y + e6.h;
  return t6 < l && s6 < o && n < c && u6 < i;
}
$i();
function bs(e6, r6) {
  for (let t6 = 0; t6 < r6.length; t6++) e6.push(r6[t6]);
}
$i();
var _e = class {
  constructor(r6, t6, n, o, i) {
    t(this, "x");
    t(this, "y");
    t(this, "w");
    t(this, "h");
    t(this, "userData");
    this.userData = typeof i > "u" ? null : i, this.x = r6, this.y = t6, this.w = n, this.h = o;
  }
  contains(r6) {
    return r6 === this ? false : WF(this, r6);
  }
  intersects(r6) {
    return JF(this, r6);
  }
  intersectsPoint(r6) {
    return XF(this, r6);
  }
  draw(r6) {
    r6.fillStyle = "rgba(123,222,26, 0.8)", r6.fillRect(this.x, this.y, this.w, this.h);
  }
};
var Go = class e4 {
  constructor(r6, t6) {
    t(this, "topLeft");
    t(this, "topRight");
    t(this, "bottomLeft");
    t(this, "bottomRight");
    t(this, "divided", false);
    t(this, "boundary");
    t(this, "capacity", 16);
    t(this, "objects", []);
    t(this, "parent");
    this.parent = t6, this.boundary = r6;
  }
  getSize() {
    return this.divided ? this.objects.length + this.topLeft.getSize() + this.topRight.getSize() + this.bottomLeft.getSize() + this.bottomRight.getSize() : this.objects.length;
  }
  subdivide() {
    let { x: r6, y: t6, w: n, h: o } = this.boundary;
    this.topLeft = new e4(new _e(r6, t6, n / 2, o / 2), this), this.topRight = new e4(new _e(r6 + n / 2, t6, n / 2, o / 2), this), this.bottomLeft = new e4(new _e(r6, t6 + o / 2, n / 2, o / 2), this), this.bottomRight = new e4(new _e(r6 + n / 2, t6 + o / 2, n / 2, o / 2), this), this.divided = true;
  }
  queryRect(r6) {
    let t6 = [];
    if (this.boundary.intersects(r6)) t6.push(...this.objects);
    else return [];
    return this.divided && (bs(t6, this.topLeft.queryRect(r6)), bs(t6, this.topRight.queryRect(r6)), bs(t6, this.bottomLeft.queryRect(r6)), bs(t6, this.bottomRight.queryRect(r6))), t6;
  }
  queryPoint(r6) {
    let t6 = [];
    if (this.boundary.intersectsPoint(r6)) t6.push(...this.objects);
    else return [];
    return this.divided && (bs(t6, this.topLeft.queryPoint(r6)), bs(t6, this.topRight.queryPoint(r6)), bs(t6, this.bottomLeft.queryPoint(r6)), bs(t6, this.bottomRight.queryPoint(r6))), t6;
  }
  insert(r6) {
    return (this.parent ? !this.boundary.contains(r6) : !this.boundary.intersects(r6)) ? false : this.objects.length < this.capacity ? (this.objects.push(r6), true) : (this.divided || this.subdivide(), (this.topLeft.insert(r6) || this.topRight.insert(r6) || this.bottomLeft.insert(r6) || this.bottomRight.insert(r6)) === false && this.objects.push(r6), true);
  }
  drawObjects(r6) {
    this.objects.forEach((t6) => t6.draw(r6)), this.divided && (this.topLeft.drawObjects(r6), this.topRight.drawObjects(r6), this.bottomLeft.drawObjects(r6), this.bottomRight.drawObjects(r6));
  }
  draw(r6) {
    r6.rect(this.boundary.x, this.boundary.y, this.boundary.w, this.boundary.h), this.divided && (this.topLeft.draw(r6), this.topRight.draw(r6), this.bottomLeft.draw(r6), this.bottomRight.draw(r6)), r6.strokeStyle = "black", r6.lineWidth = 4, r6.stroke();
  }
};
$i();
function YF(e6, r6, t6) {
  let n, o, i, s6 = null, u6 = 0;
  t6 || (t6 = {});
  let l = function() {
    u6 = t6.leading === false ? 0 : Date.now(), s6 = null, i = e6.apply(n, o), s6 || (n = o = null);
  };
  return function() {
    let c = Date.now();
    !u6 && t6.leading === false && (u6 = c);
    let d = r6 - (c - u6);
    return n = globalThis, o = arguments, d <= 0 || d > r6 ? (s6 && (clearTimeout(s6), s6 = null), u6 = c, i = e6.apply(n, o), s6 || (n = o = null)) : !s6 && t6.trailing !== false && (s6 = setTimeout(l, d)), i;
  };
}
function KF(e6) {
  let r6 = e6[0].map((t6) => {
    let n = t6[0].map((o) => ({ index: o[4], boundingBox: [o[0], o[1], o[2], o[3]] }));
    return { enabledAndVisible: t6[1] === 1, rank: t6[2] === 1 ? rz : 0, x: t6[3], y: t6[4], shouldCollideWithScreenEdges: t6[5] === 1, bboxes: n, lockedToStrategyIndex: t6[6] };
  });
  return { msgId: "-1", totalWidth: e6[3], totalHeight: e6[2], watermarkWidth: e6[4], watermarkHeight: e6[5], watermarkPosition: e6[6], colliders: r6, devicePixelRatio: e6[1] };
}
$i();
var c2 = 9;
var bu = 200;
var s1 = 10;
function qF(e6, r6, t6, n, o, i, s6 = "-1") {
  let u6 = 1 / 0, l = 1 / 0, c = -1 / 0, d = -1 / 0, f = new _e(-s1, 0, 5, t6), h = new _e(-s1, 0, r6, 5), b = new _e(r6 - 5, 0, r6 + s1, t6), I = new _e(0, t6 - 5, r6, t6 + s1), E = Rz(r6, t6, n, o, i), v6 = [f, h, b, I], x6 = new _e(-bu, -bu, r6 + bu * 2, t6 + bu * 2);
  for (let P of e6) {
    let L, N;
    for (let $ = 0; $ < P.bboxes.length; $++) {
      if (P.bboxes[$] == null || (L = P.bboxes[$].boundingBox, N = P.bboxes[$].index, P.lockedToStrategyIndex !== -1 && N !== P.lockedToStrategyIndex)) continue;
      let [W, V, q4, se] = L, [ue, ce, de2, Ee2] = [P.y - W, P.y + V, P.x - q4, P.x + se], he = de2, ne = ue, Ce = Ee2 - de2, xe3 = ce - ue;
      u6 = Math.min(u6, he) - bu, l = Math.min(l, ne) - bu, c = Math.max(c, he + Ce) + bu, d = Math.max(d, ne + xe3) + bu, P.bboxes[$].boundingRect = new _e(he, ne, Ce, xe3);
    }
  }
  let D = new Go(new _e(u6, l, c - u6, d - l)), w6 = { msgId: s6, colliders: new Array(e6.length), staticColliders: [], debug: [] }, S = 0;
  for (let P = 0; P < e6.length; P++) {
    let L = e6[P];
    L.bboxes?.[0]?.index === c2 && (w6.staticColliders.push(L.bboxes[0].boundingRect), D.insert(L.bboxes[0].boundingRect), S++);
  }
  e6 = e6.slice(S, e6.length);
  let F;
  for (let P = 0; P < e6.length; P++) if (F = e6[P], w6.colliders[P] = [-1, 0], F.enabledAndVisible) {
    let [L, N, $] = [1 / 0, -1, void 0];
    for (let { index: W, boundingRect: V } of F.bboxes) {
      if (V == null) continue;
      let q4 = [];
      if (q4 = D.queryRect(V).filter((ue) => V.intersects(ue)), F.shouldCollideWithScreenEdges && v6.forEach((ue) => {
        V.intersects(ue) && q4.push(ue);
      }), V.intersects(E)) {
        w6.colliders[P] = [-1, 0, V];
        break;
      }
      if (q4.length <= L && ($ = V, N = W, L = q4.length), q4.length === 0) {
        D.insert(V), w6.colliders[P] = [W, x6.contains(V) ? 0 : 1, V];
        break;
      }
    }
    F.rank === rz && $ != null && (D.insert($), w6.colliders[P] = [N, x6.contains($) ? 0 : 1, $]);
  } else w6.colliders[P] = [-1, 0];
  return w6;
}
function Rz(e6, r6, t6, n, o) {
  switch (o) {
    case "top-left":
      return new _e(0, 0, t6, n);
    case "top-right":
      return new _e(e6 - t6, 0, t6, n);
    case "bottom-left":
      return new _e(0, r6 - n, t6, n);
    case "bottom-right":
      return new _e(e6 - t6, r6 - n, t6, n);
    case "center":
      return new _e((e6 - t6) / 2, (r6 - n) / 2, t6, n);
    case "top":
      return new _e((e6 - t6) / 2, 0, t6, n);
    case "bottom":
      return new _e((e6 - t6) / 2, r6 - n, t6, n);
    case "left":
      return new _e(0, (r6 - n) / 2, t6, n);
    case "right":
      return new _e(e6 - t6, (r6 - n) / 2, t6, n);
    default:
      return new _e(0, r6 - n, t6, n);
  }
}
$i();
var Lf = class {
  constructor() {
    t(this, "onerror", () => {
    });
    t(this, "onmessage", () => {
    });
    t(this, "postMessage", (r6) => {
      let t6 = KF(r6);
      this.onmessage({ data: qF(t6.colliders, t6.totalWidth, t6.totalHeight, t6.watermarkWidth, t6.watermarkHeight, t6.watermarkPosition, t6.msgId) });
    });
    t(this, "terminate", () => {
    });
  }
};
var Id = false;
var Nz = 150;
var u1 = class extends Ka {
  constructor(t6, n, o = true) {
    super();
    t(this, "worker");
    t(this, "debugContext");
    t(this, "debugCanvas");
    t(this, "collidersDirty", true);
    t(this, "packedMessage", [[], 0, 0, 0, 0, 0, "bottom-left"]);
    t(this, "visibleCollidersQTree", new Go(new _e(0, 0, 0, 0)));
    t(this, "interactiveCollidersQTree", new Go(new _e(0, 0, 0, 0)));
    t(this, "coreState");
    t(this, "postMessage");
    t(this, "showCollisionBoxes", () => {
      Id = true, this.debugCanvas.style.display = "block";
    });
    t(this, "hideCollisionBoxes", () => {
      Id = false, this.debugContext.clearRect(0, 0, this.debugCanvas.width, this.debugCanvas.height), this.debugCanvas.style.display = "none";
    });
    t(this, "currentMsgId", "");
    t(this, "working", false);
    t(this, "_postMessage", () => {
      this.worker.postMessage(this.packedMessage);
    });
    t(this, "componentArray", []);
    t(this, "update", (t10, n6, o6 = "bottom-left", i = false, s6 = []) => {
      let u6 = false;
      if (this.collidersDirty) {
        this.packedMessage = [[], 0, 0, 0, 0, 0, "bottom-left"], this.componentArray = [];
        let d;
        for (let f of this.coreState.geometry2DIdsInScene) {
          let h = this.coreState.geometry2DMap.get(f);
          h && (d = h.components[0], this.componentArray.push(d));
        }
        this.resize(t10, n6, o6), this.collidersDirty = false, u6 = true;
      } else u6 = this.componentArray.some((d) => d.collisionDirty === true);
      u6 && this.componentArray.sort((d, f) => f.rank - d.rank);
      let l = 0;
      for (let d of s6) this.packedMessage[0][l] == null && (this.packedMessage[0][l] = []), this.packedMessage[0][l][0] == null && (this.packedMessage[0][l][0] = []), this.packedMessage[0][l][0] = [[d.h / 2, d.h / 2, d.w / 2, d.w / 2, c2]], this.packedMessage[0][l][1] = 1, this.packedMessage[0][l][2] = 1, this.packedMessage[0][l][3] = d.x, this.packedMessage[0][l][4] = d.y, this.packedMessage[0][l][5] = 0, this.packedMessage[0][l][6] = -1, l++;
      let c = 0;
      for (; l < this.componentArray.length + s6.length; ) {
        if (this.packedMessage) {
          let d = this.componentArray[c].toPackedMessage(i && !u6);
          this.packedMessage[0][l] == null && (this.packedMessage[0][l] = []), this.packedMessage[0][l][0] == null && (this.packedMessage[0][l][0] = []), this.packedMessage[0][l][0] = d.bboxes, this.packedMessage[0][l][1] = d.enabled && this.componentArray[c].visible && !this.componentArray[c].isOccluded ? 1 : 0, this.packedMessage[0][l][2] = d.rank === rz ? 1 : 0, this.packedMessage[0][l][3] = d.x, this.packedMessage[0][l][4] = d.y, this.packedMessage[0][l][5] = d.shouldCollideWithScreenEdges ? 1 : 0, this.packedMessage[0][l][6] = d.lockedToStrategyIndex;
        }
        l++, c++;
      }
      this.working || this.postMessage();
    });
    t(this, "resolve", (t10) => {
      if (this.working = false, this.collidersDirty || !t10.data) return;
      let n6 = t10.data.colliders, o6 = -1, i, s6, u6, l = new _e(0, 0, this.debugCanvas.width, this.debugCanvas.height);
      if (this.visibleCollidersQTree = new Go(l), this.interactiveCollidersQTree = new Go(l), Id) for (let c of t10.data.staticColliders) this.visibleCollidersQTree.insert(new _e(c.x, c.y, c.w, c.h));
      for (let c = 0; c < this.componentArray.length; c++) {
        let d = this.componentArray[c];
        n6[c] != null && (o6 = n6[c][0], i = n6[c][2], d.offscreen = n6[c][1] === 1, o6 !== -1 && i != null ? (u6 = new _e(i.x, i.y, i.w, i.h, { entityId: d.id }), this.visibleCollidersQTree.insert(u6), s6 = this.coreState.geometry2DMap.get(d.id), s6?.components[1] != null && this.interactiveCollidersQTree.insert(u6), (d.canShow === false || d.visibilityNeedsUpdate !== false) && "visibilityNeedsUpdate" in d && (d.visibilityNeedsUpdate = "show"), o6 !== -1 && o6 !== d.currentStrategyIndex && (d.activeBoundingBox = u6, d.onStrategySelected(o6))) : ((d.canShow === true || d.visibilityNeedsUpdate !== false) && "visibilityNeedsUpdate" in d && (d.visibilityNeedsUpdate = "hide"), o6 !== -1 && o6 !== d.currentStrategyIndex && d.onStrategySelected(o6)));
      }
      Id && this.drawDebug(), this.publish("visibility-changed");
    });
    t(this, "drawDebug", () => {
      Id && this.visibleCollidersQTree && (this.debugContext.clearRect(0, 0, this.debugCanvas.width, this.debugCanvas.height), this.debugContext.beginPath(), this.visibleCollidersQTree.drawObjects(this.debugContext));
    });
    t(this, "destroy", () => {
      this.worker.terminate();
    });
    this.worker = o === false ? new Lf() : $l !== "" ? new Worker($l) : new Worker(URL.createObjectURL(new Blob([ZF], { type: "text/javascript" }))), this.worker.onerror = () => {
      this.worker = new Lf(), this.worker.onmessage = (i) => this.resolve(i);
    }, this.coreState = n, this.debugCanvas = t6, this.debugContext = t6.getContext("2d"), this.worker.onmessage = (i) => this.resolve(i), this.postMessage = YF(this._postMessage, Nz, false), Id ? this.showCollisionBoxes() : this.hideCollisionBoxes();
  }
  resize(t6, n, o) {
    this.packedMessage[6] = o, this.packedMessage[5] = n, this.packedMessage[4] = t6, this.packedMessage[3] = this.debugCanvas.width, this.packedMessage[2] = this.debugCanvas.height;
  }
};
$i();
$i();
$i();
$i();
var l1 = class {
  constructor(r6) {
    t(this, "type");
    t(this, "event");
    this.type = 0, this.event = r6;
  }
  get timestamp() {
    return this.event.timeStamp;
  }
};
var c1 = class {
  constructor() {
    t(this, "taps", []);
  }
  add(r6) {
    this.lastPointerDown && r6.timestamp - this.lastPointerDown.timestamp < 50 ? this.lastPointerDown.type = 1 : this.taps.push(r6);
  }
  get lastPointerDown() {
    return this.taps.length >= 1 ? this.taps[this.taps.length - 1] : void 0;
  }
  get isSingleTapWithTwoFingers() {
    return this.isSingleTap && this.lastPointerDown?.type === 1;
  }
  get isSingleTapWithOneFinger() {
    return this.isSingleTap && this.lastPointerDown?.type === 0;
  }
  get isDoubleTapWithOneFinger() {
    return this.isDoubleTap && this.taps[0]?.type === 0 && this.taps[1]?.type === 0;
  }
  get isSingleTap() {
    return this.taps.length === 1;
  }
  get isDoubleTap() {
    return this.taps.length === 2;
  }
  discardOutsideOfWaitWindow(r6) {
    this.taps = this.taps.filter((t6) => r6 - t6.timestamp < 300);
  }
  flush() {
    this.taps = [];
  }
  get _taps() {
    return this.taps;
  }
  destroy() {
    this.flush();
  }
};
$i();
function d2(e6) {
  let r6 = /* @__PURE__ */ new Set();
  for (let t6 of e6) {
    let n = t6.object;
    for (; n.visible && n.parent && n.parent.visible === true && !r6.has(n.parent); ) n = n.parent, n instanceof ur && n.type === "group-container" && n.visible && n.components[0] && r6.add(n);
  }
  return Array.from(r6);
}
var Ed;
var Rf = class extends Ka {
  constructor(t6, n, o, i, s6) {
    super();
    t(this, "raycaster", new El());
    t(this, "state", { hovered3DEntity: void 0, hovered2DEntity: void 0, hovered3DContainers: void 0, lastHover: void 0, interaction: { mouseDownStart: void 0, distanceFromMouseDown: void 0, isPanning: false } });
    t(this, "coreState");
    t(this, "camera");
    t(this, "worldPlane");
    t(this, "_quadtree", new Go(new _e(0, 0, 0, 0)));
    t(this, "_container");
    t(this, "lastPointerEvent");
    t(this, "cursor", "grab");
    t(this, "touchesCount", 0);
    t(this, "isUserInteracting");
    t(this, "hasTouched", false);
    v(this, Ed);
    t(this, "onPointerMoveRaf", (t10) => {
      this.lastPointerEvent = t10, u(this, Ed) && cancelAnimationFrame(u(this, Ed)), w(this, Ed, requestAnimationFrame(() => {
        this.onPointerMove(t10);
      }));
    });
    t(this, "onPointerMove", (t10) => {
      t10.preventDefault(), this.updateInteractionStateIfPanning(t10), (t10.pointerType !== "touch" || t10.pointerType === void 0 && this.hasTouched) && this.handleHover(t10), this.handleCursor();
    });
    t(this, "tapsControl", new c1());
    t(this, "onPointerDown", (t10) => {
      t10.target === this._container && (this._container.addEventListener("pointerup", this.onPointerUp, false), this._container.addEventListener("pointercancel", this.onPointerUp, false), this.state.interaction.mouseDownStart = { time: Date.now(), timestamp: t10.timeStamp, offsetX: t10.offsetX, offsetY: t10.offsetY }, this.lastPointerEvent = t10, this.state.interaction.distanceFromMouseDown = 0, this.handleCursor(), t10.pointerType === "touch" && (this.tapsControl.add(new l1(t10)), this.touchesCount = Math.max(0, this.touchesCount + 1)));
    });
    t(this, "clickTimeout");
    t(this, "onPointerUp", (t10) => {
      this.tapsControl.discardOutsideOfWaitWindow(t10.timeStamp), this.lastPointerEvent = t10, this.touchesCount = Math.max(0, this.touchesCount - 1), this.touchesCount === 0 && (this._container.removeEventListener("pointerup", this.onPointerUp, false), this._container.removeEventListener("pointercancel", this.onPointerUp, false)), this.updateInteractionStateIfPanning(t10);
      let { mouseDownStart: n6 } = this.state.interaction;
      !n6 || this.state.interaction.distanceFromMouseDown == null || (Date.now() < n6.time + 300 && (this.tapsControl.isSingleTapWithTwoFingers || this.state.interaction.distanceFromMouseDown <= 15) && (t10.pointerType === "touch" ? this.tapsControl.isSingleTapWithTwoFingers ? (this.publish("singletap-with-twofinger", t10), this.flush()) : this.tapsControl.isSingleTapWithOneFinger && this.touchesCount === 0 ? (this.clickTimeout && clearTimeout(this.clickTimeout), this.clickTimeout = window.setTimeout(() => {
        this.handleClick(t10), this.flush();
      }, 300)) : this.tapsControl.isDoubleTapWithOneFinger && (this.publish("doubletap-with-onefinger", t10), this.flush()) : this.handleClick(t10)), this.state.interaction.mouseDownStart = void 0, this.state.interaction.distanceFromMouseDown = void 0, this.state.interaction.isPanning = false, this.handleCursor());
    });
    t(this, "dirty3D", true);
    t(this, "cachedHitBoxes", { entities: [] });
    t(this, "ndcPoint", new at());
    t(this, "debugPanel");
    this.isUserInteracting = s6, this.raycaster.layers.enableAll(), this.raycaster.layers.disable(1), this.camera = o, this._container = t6, this.coreState = n, this.worldPlane = i, this._container.addEventListener("pointerdown", this.onPointerDown, false), this._container.addEventListener("pointermove", this.onPointerMoveRaf, false), this._container.classList.add("mappedin-interactive");
  }
  updateQuadtree(t6) {
    this._quadtree = t6;
  }
  setHovered3DEntityInteractionComponentDirty() {
    if (this.state.hovered3DEntity) {
      let t6 = this.state.hovered3DEntity.components[2];
      t6 && (t6.dirty = true);
    }
  }
  getThreeDIntersectsFromXY(t6) {
    this.raycaster.setFromCamera(t6, this.camera), this.raycaster.layers.enable(0);
    let n = this.raycaster.intersectObjects(this._hitBoxes.entities, true).filter((i) => i.object?.name === "worldPlane" || i.object?.visible), o = n.findIndex((i) => i.object?.name === "worldPlane");
    return o !== -1 && n.push(n.splice(o, 1)[0]), n;
  }
  getGroupContainerIntersectsFromXY(t6) {
    let n = this.getThreeDIntersectsFromXY(t6), o;
    return n != null && n.length > 0 && (o = d2(n)), o;
  }
  flush() {
    this.tapsControl.flush(), this.clickTimeout != null && (clearTimeout(this.clickTimeout), this.clickTimeout = void 0);
  }
  handleHover(t6) {
    let n = t6 || this.lastPointerEvent;
    if (this.state.interaction.mouseDownStart || !n || this.isUserInteracting()) return;
    let { entity3D: o, entity2D: i, position: s6, groupContainers: u6 } = this.intersect(n);
    (this.detect3DEntityHover(o) || this.detect2DEntityHover(i) || this.detect3DContainerHover(u6)) && (this.state.hovered3DEntity = o, this.state.lastHover = o, this.state.hovered2DEntity = i, this.state.hovered3DContainers = u6, this.publish("hover", { entity2D: this.state.hovered2DEntity, entity3D: this.state.hovered3DEntity, position: s6, groupContainers: u6 })), this.handleCursor();
  }
  handleCursor() {
    let t6 = !!(this.state.hovered3DEntity && this.state.hovered3DEntity?.components[2] || this.state.hovered2DEntity), n = !!this.state.interaction.mouseDownStart, o = this.state.interaction.isPanning, i = Uz(t6, o, n);
    this.cursor !== i && (this.cursor = i, i === "pointer" ? this._container.classList.add("mappedin-interaction-hover") : this._container.classList.remove("mappedin-interaction-hover"));
  }
  detect2DEntityHover(t6) {
    return this.state.hovered2DEntity !== t6;
  }
  handleClick(t6) {
    let n = this.intersect(t6);
    this.publish("click", { entity2D: n.entity2D, entity3D: n.entity3D, position: n.position, groupContainers: n.groupContainers, pointerEvent: { button: t6.button } });
  }
  get _hitBoxes() {
    if (this.dirty3D) {
      this.cachedHitBoxes.entities = [];
      let t6;
      for (let n of this.coreState.geometry3DIdsInScene) t6 = this.coreState.geometry3DMap.get(n), (t6?.type === "geometry" || t6?.type === "model" || t6?.type === "path" || t6?.type === "custom-geometry") && t6.components[0].mesh && !this.cachedHitBoxes.entities.includes(t6.components[0].mesh) && this.cachedHitBoxes.entities.push(t6.components[0].mesh);
      return this.dirty3D = false, this.cachedHitBoxes.entities.push(this.worldPlane), this.cachedHitBoxes;
    }
    return this.cachedHitBoxes;
  }
  intersect(t6) {
    let { offsetX: n, offsetY: o } = t6, i = [n, o], s6 = this._quadtree.queryPoint(i), [u6] = s6.filter((x6) => x6.intersectsPoint(i));
    this.ndcPoint.x = n / this._container.clientWidth * 2 - 1, this.ndcPoint.y = -(o / this._container.clientHeight) * 2 + 1;
    let l = this.getThreeDIntersectsFromXY(this.ndcPoint), c = l[0]?.point, d = [], f = [], h = l.filter((x6) => x6.object.name !== "worldPlane");
    for (let x6 of h) x6.object instanceof ve && x6.object.material.depthTest === false ? d.push(x6) : f.push(x6);
    let b = d[0] ?? f[0] ?? void 0, I, E;
    if (b != null) {
      if (I = zz(b.object, this.coreState.geometry3DMap), !I) {
        let x6 = b?.instanceId ?? b?.batchId;
        I = x6 != null && b?.object.userData.entities ? this.coreState.geometry3DMap.get(b?.object.userData.entities[x6]) : this.coreState.geometry3DMap.get(b?.object.userData.entityId);
      }
      I?.components[2] && (E = I);
    }
    let v6 = d2(h);
    return { entity2D: u6?.userData?.entityId === "watermark" ? { id: "watermark" } : this.coreState.geometry2DMap.get(u6?.userData.entityId), entity3D: E, position: c, groupContainers: v6.length > 0 ? v6 : void 0 };
  }
  detect3DEntityHover(t6) {
    return this.state.lastHover !== t6 && (this.state.lastHover && tM2(this.state.lastHover, false, this.coreState), t6 && tM2(t6, true, this.coreState)), this.state.hovered3DEntity !== t6;
  }
  detect3DContainerHover(t6) {
    return !ZM(this.state.hovered3DContainers, t6);
  }
  updateInteractionStateIfPanning(t6) {
    this.state.interaction.mouseDownStart && (this.state.interaction.distanceFromMouseDown = Math.sqrt(Math.pow(t6.offsetX - this.state.interaction.mouseDownStart.offsetX, 2) + Math.pow(t6.offsetY - this.state.interaction.mouseDownStart.offsetY, 2)), !this.state.interaction.isPanning && this.state.interaction.distanceFromMouseDown > 15 && (this.state.interaction.isPanning = true));
  }
  getMouseRayIntersects() {
    return this.raycaster.intersectObjects([this.worldPlane], false);
  }
  destroy() {
    this._container.removeEventListener("pointerdown", this.onPointerDown, false), this._container.removeEventListener("pointermove", this.onPointerMoveRaf, false), this._container.removeEventListener("pointerup", this.onPointerUp, false), this._container.removeEventListener("pointercancel", this.onPointerUp, false);
  }
  enableDebug() {
    let t6 = document.createElement("div");
    t6.style.position = "absolute", t6.style.top = "0", t6.style.right = "0", t6.style.backgroundColor = "white", t6.style.padding = "10px", document.body.append(t6), t6.id = "interaction-debug-panel", this.debugPanel = t6, this.on("doubletap-with-onefinger", () => {
      this.queueDebugMessage("doubletap-with-onefinger", "#ffadad");
    }), this.on("singletap-with-twofinger", () => {
      this.queueDebugMessage("singletap-with-twofinger", "#ffd6a5");
    }), this.on("click", (n) => {
      this.queueDebugMessage(`CLICK 
3D: ${n.entity3D?.id} 
2D: ${n.entity2D?.id} 
Pos: ${n.position?.toArray().join(", ")}`, "#fdffb6");
    }), this.on("hover", (n) => {
      this.queueDebugMessage(`HOVER 
3D: ${n.entity3D?.id} 
2D: ${n.entity2D?.id} 
Pos: ${n.position?.toArray().join(", ")}`, "#caffbf");
    });
  }
  get _state() {
    return this.state;
  }
  queueDebugMessage(t6, n) {
    let o = document.createElement("pre");
    o.style.maxWidth = "300px", o.style.transition = "opacity 500ms cubic-bezier(0.4, 0, 0.2, 1)", o.style.backgroundColor = n, o.textContent = t6, this.debugPanel?.prepend(o), setTimeout(() => {
      o.style.opacity = "0", setTimeout(() => {
        o.remove();
      }, 500);
    }, 2500);
  }
  getCursor() {
    return this.cursor;
  }
};
Ed = /* @__PURE__ */ new WeakMap();
function tM2(e6, r6, t6) {
  let n = e6.components[2];
  n && n.hover !== true && (n.hover = r6 ? "user-interaction" : false, n.dirty = true);
  let o = e6.components[0].textMesh?.userData.entityId;
  if (!o) return;
  let i = t6.geometry3DMap.get(o);
  i?.type === "text3d" && (i.components[1].hoverByPolygon = r6, i.components[1].dirty = true);
}
function Uz(e6, r6, t6) {
  return r6 ? "grabbing" : e6 ? "pointer" : t6 ? "grabbing" : "grab";
}
function Gz(e6) {
  let r6 = e6;
  for (; r6?.parent; ) {
    if (r6 instanceof Ho) return;
    if (r6.userData.isSingleModel) return r6;
    r6 = r6.parent;
  }
}
function zz(e6, r6) {
  let t6 = Gz(e6);
  return t6 ? r6.get(t6.userData.entityId) : void 0;
}
$i();
$i();
var jl;
var ba;
var p1;
var xu;
var rM2;
var $f2;
var d1;
var nM2;
var oM;
var jf;
var m1;
var Uf;
var Gf;
var f1;
var Nf = class {
  constructor(r6) {
    v(this, xu);
    v(this, jl, null);
    v(this, ba);
    t(this, "getCurrentSceneGLTF", async (r8) => {
      let t6 = { onlyVisible: true, binary: true, light: true, scale: 1, ...r8 }, n = await x(this, xu, rM2).call(this), o = u(this, p1).call(this, t6), i = await n.parseAsync(o, { trs: false, maxTextureSize: 1 / 0, onlyVisible: t6.onlyVisible, binary: t6.binary, scale: t6.scale }), s6;
      if (i instanceof ArrayBuffer) s6 = new Blob([i], { type: "application/octet-stream" });
      else {
        let u6 = JSON.stringify(i, null, 2);
        s6 = new Blob([u6], { type: "text/plain" });
      }
      return s6;
    });
    v(this, p1, (r8) => {
      let { scale: t6, light: n, onlyVisible: o } = r8, i = new Ho(), s6 = new Ie().setFromObject(u(this, ba).entityScene);
      if (u(this, $f2).call(this, u(this, ba).entityScene, i, o), n) {
        let u6 = new _l(16777215, 0.3 * Math.PI);
        u6.position.set(0, Math.max(s6.max.x, s6.max.y) * t6 * 0.5, s6.max.y * t6 * 4), u6.lookAt(0, 0, -1), u6.target.position.set(0, 0, -1), u6.add(u6.target), i.add(u6);
      }
      return i;
    });
    v(this, $f2, (r8, t6, n) => {
      r8.material && (r8 instanceof Jo ? x(this, xu, nM2).call(this, r8).forEach((o) => t6.add(o)) : r8 instanceof kr && t6.add(x(this, xu, oM).call(this, r8))), r8.children.forEach((o) => {
        (!n || o.visible) && u(this, $f2).call(this, o, t6, n);
      });
    });
    v(this, d1, (r8, t6, n) => {
      let o = new Jr({ color: new Nt(r8), metalness: 0 });
      return o.opacity = t6, o.transparent = n, o;
    });
    v(this, jf, (r8) => {
      let { geometry: t6, material: n, position: o, rotation: i, quaternion: s6, scale: u6 } = r8;
      if (!t6?.isBufferGeometry) return r8;
      let l = t6.attributes.position, c = t6.attributes.normal, d = t6.attributes.uv;
      return u(this, m1).call(this, l, c), u(this, Gf).call(this, o, u6, i, s6), d && u(this, f1).call(this, d), n?.map && t6.type === "PlaneGeometry" && (r8.side = ln), r8;
    });
    v(this, m1, (r8, t6) => {
      let n = new C(), o = new C();
      for (let i = 0; i < r8.count; i++) n.fromBufferAttribute(r8, i), u(this, Uf).call(this, n), r8.setXYZ(i, n.x, n.y, n.z), t6 && (o.fromBufferAttribute(t6, i), u(this, Uf).call(this, o), t6.setXYZ(i, o.x, o.y, o.z));
    });
    v(this, Uf, (r8) => {
      let t6 = r8.y;
      r8.y = r8.z, r8.z = -t6;
    });
    v(this, Gf, (r8, t6, n, o) => {
      let i = r8.y;
      r8.y = r8.z, r8.z = -i;
      let s6 = t6.y;
      if (t6.y = t6.z, t6.z = s6, n instanceof Ye) n.order = "YXZ", n.set(n.x, n.y, n.z, n.order);
      else {
        let u6 = o.y;
        o.set(o.x, o.z, -u6, o.w);
      }
    });
    v(this, f1, (r8) => {
      for (let t6 = 0; t6 < r8.count; t6++) {
        let n = r8.getX(t6), o = r8.getY(t6);
        r8.setXY(t6, n, o);
      }
    });
    w(this, ba, r6), u(this, ba).entityScene = r6.entityScene, u(this, ba).geometry3DMap = r6.geometry3DMap;
  }
  destroy() {
    w(this, jl, null);
  }
};
jl = /* @__PURE__ */ new WeakMap(), ba = /* @__PURE__ */ new WeakMap(), p1 = /* @__PURE__ */ new WeakMap(), xu = /* @__PURE__ */ new WeakSet(), rM2 = async function() {
  if (!u(this, jl)) {
    let { GLTFExporter: r6 } = await import("./GLTFExporter-O4OUZTHE-453TDWLH.js");
    w(this, jl, new r6());
  }
  return u(this, jl);
}, $f2 = /* @__PURE__ */ new WeakMap(), d1 = /* @__PURE__ */ new WeakMap(), nM2 = function(r6) {
  let t6 = [], o = (r6.userData?.entities ? Object.values(r6.userData?.entities) : []).map((s6) => u(this, ba).geometry3DMap.get(s6)), i = /* @__PURE__ */ new Map();
  return o.forEach((s6) => {
    if (!s6 || !(s6 instanceof Sr)) return;
    let u6 = s6.components[1], l = s6.components[2];
    if (!u6.visible || u6 instanceof sx && u6.opacity === 0 || u6 instanceof lx || u6 instanceof ux) return;
    let d = `${l?.hover ? u6.hoverColor || u(this, ba).hoverColor : u6.color}-${u6.opacity}-${Number(u6.visible)}`;
    i.has(d) || i.set(d, []), i.get(d)?.push(s6);
  }), i.forEach((s6, u6) => {
    let [l, c, d] = u6.split("-"), f = s6.reduce((E, v6) => {
      if (v6.type === "custom-geometry") return E;
      let x6 = v6.components[0];
      return "geometry" in x6 && x6.geometry instanceof ge && E.push(x6.geometry), E;
    }, []), h = u(this, d1).call(this, l, Number(c), r6.material.transparent), b = M(f, true), I = new ve(b, h);
    I.position.copy(r6.position), I.rotation.copy(r6.rotation), I.scale.copy(r6.scale), I.visible = !!d, u(this, Gf).call(this, I.position, I.scale, I.rotation, I.quaternion), t6.push(u(this, jf).call(this, I));
  }), t6;
}, oM = function(r6) {
  let t6 = r6.geometry.clone(), n = r6.material, o = new ps({ color: n.color, side: ln });
  o.opacity = n.opacity, o.transparent = n.transparent;
  let i = new kr(t6, o);
  return i.position.copy(r6.position), i.rotation.copy(r6.rotation), i.scale.copy(r6.scale), i.visible = r6.visible, u(this, jf).call(this, i);
}, jf = /* @__PURE__ */ new WeakMap(), m1 = /* @__PURE__ */ new WeakMap(), Uf = /* @__PURE__ */ new WeakMap(), Gf = /* @__PURE__ */ new WeakMap(), f1 = /* @__PURE__ */ new WeakMap();
$i();
$i();
var Vz = "gray";
var Hz = 0.1;
var zf = 100;
var m2 = new jn.ClipperOffset();
function Zz(e6, r6) {
  m2.Clear(), r6 /= 2;
  let t6 = e6.map((o) => ({ X: o.x * zf, Y: o.y * zf }));
  m2.AddPath(t6, jn.JoinType.jtMiter, jn.EndType.etClosedPolygon);
  let n = new jn.Paths();
  return m2.Execute(n, r6 * zf), n.length ? n.map((i) => i.map((s6) => ({ x: s6.X / zf, y: s6.Y / zf }))) : [e6];
}
function g1(e6, r6, t6) {
  let { color: n = Vz, opacity: o = 1, altitude: i = 0, height: s6 = Hz } = t6 || {};
  Array.isArray(o) && (o = 1);
  let u6 = { min: { x: 1 / 0, y: 1 / 0, z: i }, max: { x: -1 / 0, y: -1 / 0, z: s6 + i }, center: { x: 0, y: 0, z: (s6 + i) / 2 } }, c = e6.geometry.coordinates[0].map((b) => {
    let I = r6(b[1], b[0]);
    return u6.min.x = Math.min(u6.min.x, I.x), u6.min.y = Math.min(u6.min.y, I.y), u6.max.x = Math.max(u6.max.x, I.x), u6.max.y = Math.max(u6.max.y, I.y), I;
  });
  e6.properties?.style?.edgeOffset != null && e6.properties.style.edgeOffset !== 0 || e6.properties?.image != null ? c = Zz(c, e6.properties?.style?.edgeOffset || 0) : c = [c];
  let d = [];
  for (let b of c) {
    let I = new Zr();
    I.moveTo(b[0].x, b[0].y), b.slice(1).forEach((D) => I.lineTo(D.x, D.y)), I.lineTo(b[0].x, b[0].y);
    let E = e6.geometry.coordinates.slice(1);
    I.holes = E.map((D) => {
      let w6 = D.map((F) => r6(F[1], F[0])), S = new Cs();
      return S.moveTo(w6[0].x, w6[0].y), w6.slice(1).forEach((F) => S.lineTo(F.x, F.y)), S.lineTo(w6[0].x, w6[0].y), S;
    });
    let v6 = d0e(t6?.bevel, s6), x6 = new il(I, v6);
    x6.userData = { style: { color: n, opacity: o }, usedBevelSettings: v6 }, d.push(x6);
  }
  if (d.length === 1) return d[0];
  let f = M(d);
  d.forEach((b) => b.dispose());
  let h = d0e(t6?.bevel, s6);
  return f.userData = { style: { color: n, opacity: o }, usedBevelSettings: h, _split: true }, f;
}
$i();
var Wz = "gray";
var Xz = 0.1;
function y1(e6, r6, t6) {
  let { color: n = Wz, opacity: o = 1, altitude: i = 0, height: s6 = Xz } = t6 || {};
  Array.isArray(o) && (o = 1);
  let u6 = { min: { x: 1 / 0, y: 1 / 0, z: i }, max: { x: -1 / 0, y: -1 / 0, z: s6 + i } }, l = d0e(t6?.bevel, s6), c = [];
  e6.geometry.coordinates.forEach((f) => {
    let h = new Zr(), b = f[0].map((v6) => {
      let x6 = r6(v6[1], v6[0]);
      return u6.min.x = Math.min(u6.min.x, x6.x), u6.min.y = Math.min(u6.min.y, x6.y), u6.max.x = Math.max(u6.max.x, x6.x), u6.max.y = Math.max(u6.max.y, x6.y), x6;
    });
    h.moveTo(b[0].x, b[0].y), b.slice(1).forEach((v6) => h.lineTo(v6.x, v6.y)), h.lineTo(b[0].x, b[0].y);
    let I = f.slice(1);
    h.holes = I.map((v6) => {
      let x6 = v6.map((w6) => r6(w6[1], w6[0])), D = new Cs();
      return D.moveTo(x6[0].x, x6[0].y), x6.slice(1).forEach((w6) => D.lineTo(w6.x, w6.y)), D.lineTo(x6[0].x, x6[0].y), D;
    });
    let E = new il(h, l);
    c.push(E);
  });
  let d = M(c);
  return c.forEach((f) => f.dispose()), d.translate(0, 0, i || 0), d.userData = { style: { color: n, opacity: o }, usedBevelSettings: l }, d;
}
$i();
var In = 100;
var Jz = 0.22;
var Yz = 0.01;
function iM(e6, r6, t6 = {}) {
  let { width: n = Jz, height: o = Yz, color: i = "gray", opacity: s6 = 1, altitude: u6 = 0 } = t6, l = { min: { x: 1 / 0, y: 1 / 0, z: u6 }, max: { x: -1 / 0, y: -1 / 0, z: u6 + o } }, c = { bevelEnabled: false, depth: o }, d = new jn.ClipperOffset(), f = e6.geometry.coordinates.map((E) => E.map((v6) => r6(v6[1], v6[0])));
  d.AddPaths(f.map((E) => E.map((v6) => ({ X: v6.x * In, Y: v6.y * In }))), jn.JoinType.jsMiter, jn.EndType.etOpenRound);
  let h = new jn.PolyTree();
  d.Execute(h, n / 2 * In);
  let b = [];
  for (let E of h.m_AllPolys) {
    let v6 = new Zr();
    if (E.IsHole()) continue;
    l.min.x = Math.min(l.min.x, E.m_polygon[0].X), l.min.y = Math.min(l.min.y, E.m_polygon[0].Y), l.max.x = Math.max(l.max.x, E.m_polygon[0].X), l.max.y = Math.max(l.max.y, E.m_polygon[0].Y);
    let x6 = E.m_polygon;
    v6.moveTo(x6[0].X / In, x6[0].Y / In), x6.slice(1).forEach((D) => v6.lineTo(D.X / In, D.Y / In)), v6.lineTo(x6[0].X / In, x6[0].Y / In), v6.holes = E.m_Childs.map((D) => {
      let w6 = new Cs(), S = D.m_polygon;
      return w6.moveTo(S[0].X / In, S[0].Y / In), S.slice(1).forEach((F) => w6.lineTo(F.X / In, F.Y / In)), w6.lineTo(S[0].X / In, S[0].Y / In), w6;
    }), b.push(new il(v6, c));
  }
  let I = M(b);
  return I.translate(0, 0, u6 || 0), I.userData = { style: { color: i, opacity: s6 } }, d.Clear(), I;
}
$i();
$i();
var Cd = external_exports.object({ type: external_exports.enum(["Point"]), coordinates: external_exports.array(external_exports.number()).min(2).max(3) });
var f2 = external_exports.object({ rotation: external_exports.array(external_exports.number()).length(3).optional(), altitude: external_exports.number().optional(), scale: external_exports.array(external_exports.number()).length(3).optional(), interactive: external_exports.boolean().optional(), verticalOffset: external_exports.number().optional(), id: external_exports.union([external_exports.number(), external_exports.string()]).optional() });
var Kz = external_exports.object({ type: external_exports.enum(["Feature"]), geometry: Cd, properties: f2 });
var qz = external_exports.object({ type: external_exports.enum(["FeatureCollection"]), features: external_exports.array(Kz) });
var h2 = external_exports.object({ color: external_exports.string() });
var Qz = external_exports.object({ url: external_exports.string(), color: external_exports.string().optional(), opacity: external_exports.number().optional(), material: external_exports.record(external_exports.string(), h2).optional() });
function sM(e6, r6, t6) {
  external_exports.union([external_exports.number(), external_exports.string()]).parse(e6), qz.parse(r6), Qz.parse(t6);
}
var Vf;
var Hf;
var Zf;
var Sd;
var xi;
var Iu = class {
  constructor(r6) {
    t(this, "mesh");
    t(this, "type", "model");
    t(this, "positionDirty", true);
    t(this, "outline");
    t(this, "geometry");
    t(this, "material");
    t(this, "feature");
    t(this, "instanceIndex", -1);
    v(this, Vf, true);
    t(this, "color", new Nt());
    t(this, "clippingPlane");
    t(this, "position", new C());
    v(this, Hf, 0);
    v(this, Zf, 1);
    v(this, Sd, rM.GEOMETRY);
    v(this, xi, false);
    this.feature = r6;
  }
  get visible() {
    return this.mesh?.visible ?? u(this, Vf);
  }
  set visible(r6) {
    w(this, Vf, r6), this.mesh && (this.mesh.visible = r6);
  }
  setOpacity() {
  }
  setColor() {
  }
  get altitude() {
    return u(this, Hf);
  }
  set altitude(r6) {
    this.mesh && (this.mesh.position.z = r6, w(this, Hf, r6));
  }
  getRotation() {
    return this.mesh ? [this.mesh.rotation.x, this.mesh.rotation.y, this.mesh.rotation.z] : void 0;
  }
  setRotation(r6) {
    this.mesh && this.mesh.rotation.set(yd.degToRad(r6[0]), yd.degToRad(r6[1]), yd.degToRad(r6[2]));
  }
  getScale() {
    return this.mesh ? [this.mesh.scale.x, this.mesh.scale.y, this.mesh.scale.z] : void 0;
  }
  setScale(r6) {
    this.mesh && this.mesh.scale.set(r6[0], r6[1], r6[2]);
  }
  get opacity() {
    return u(this, Zf);
  }
  set opacity(r6) {
    if (this.mesh) {
      if (this.mesh.children[0] instanceof Yo) {
        for (let t6 of this.mesh.children) if (t6 instanceof Yo) {
          t6.userData?.originalOpacity === void 0 && (t6.userData.originalOpacity = t6.material.opacity);
          let n = aN(r6, 0, t6.userData?.originalOpacity, 0, 1);
          t6.material.opacity = n, t6.material.transparent = n < 1, t6.material.needsUpdate = true;
        }
      } else this.mesh?.traverse((t6) => {
        t6 instanceof ve && t6.material && (Array.isArray(t6.material) ? t6.material.forEach((n) => {
          aM2(n, r6);
        }) : aM2(t6.material, r6));
      });
      w(this, Zf, r6);
    }
  }
  get renderOrder() {
    return u(this, Sd);
  }
  set renderOrder(r6) {
    if (!(!this.mesh || r6 === u(this, Sd))) if (w(this, Sd, r6), this.mesh.children[0] instanceof Yo) {
      this.mesh.renderOrder = r6;
      for (let t6 of this.mesh.children) t6 instanceof Yo && (t6.material.depthWrite = !u(this, xi), t6.material.depthTest = !u(this, xi), t6.material.needsUpdate = true);
    } else this.mesh?.traverse((t6) => {
      t6 instanceof ve && t6.material && (t6.renderOrder = r6, Array.isArray(t6.material) ? t6.material.forEach((n) => {
        n.depthWrite = !u(this, xi), n.depthTest = !u(this, xi), n.needsUpdate = true;
      }) : (t6.material.depthWrite = !u(this, xi), t6.material.depthTest = !u(this, xi), t6.material.needsUpdate = true));
    });
  }
  get visibleThroughGeometry() {
    return u(this, xi);
  }
  set visibleThroughGeometry(r6) {
    w(this, xi, r6);
  }
};
Vf = /* @__PURE__ */ new WeakMap(), Hf = /* @__PURE__ */ new WeakMap(), Zf = /* @__PURE__ */ new WeakMap(), Sd = /* @__PURE__ */ new WeakMap(), xi = /* @__PURE__ */ new WeakMap();
function aM2(e6, r6) {
  e6.opacity !== r6 && (r6 === 1 ? (e6.opacity = 1, e6.transparent = false) : (e6.opacity = r6, e6.transparent = true), e6.needsUpdate = true);
}
$i();
function v1(e6) {
  let r6 = e6.components[0], t6 = e6.components[1];
  t6.opacity != null && t6.opacity !== r6.opacity && (r6.opacity = t6.opacity);
  let n = t6.material, o = t6.color;
  if (n || o) {
    let u6 = eV(o, n);
    r6.mesh?.traverse((l) => {
      l instanceof ve && l.material && (Array.isArray(l.material) ? l.material.forEach((c) => {
        u6[c.name] ? (c.color.set(u6[c.name].color), c.vertexColors = false) : c.color.set(o);
      }) : u6[l.material.name] ? (l.material.color.set(u6[l.material.name].color), l.material.vertexColors = false) : l.material.color.set(o));
    });
  }
  let i = r6.feature.geometry.coordinates[2] ?? 0, s6 = t6.verticalOffset + i;
  r6.altitude !== s6 && (r6.altitude = s6), t6.visible !== r6.visible && (r6.visible = t6.visible), t6.rotation && r6.setRotation(t6.rotation), t6.scale && r6.setScale(t6.scale), t6.visibleThroughGeometry !== r6.visibleThroughGeometry && (r6.visibleThroughGeometry = t6.visibleThroughGeometry);
}
function eV(e6, r6) {
  let t6 = {};
  if (r6) for (let n in r6) r6[n].color && (t6[n] = { color: r6[n].color });
  if (e6) {
    let n = ["Default", "Fabric", "Mpdn_Logo", "CouchLogo"];
    for (let o of n) t6[o] || (t6[o] = { color: e6 });
  }
  return t6;
}
function uM(e6, r6) {
  let t6 = e6.components[0], o = e6.components[1].verticalOffset ?? 0, i = t6.feature.geometry.coordinates.slice();
  i[2] = (i[2] ?? 0) + o, t6.mesh ? t6.mesh.position.copy(r6(i)) : t6.position.copy(r6(i));
}
function vs(e6) {
  return e6 instanceof Mi ? e6.material : null;
}
function lM(e6) {
  return e6.side === Le ? "back" : e6.side === Mn ? "front" : "double";
}
function cM(e6, r6) {
  e6.side = r6 === "back" ? Le : r6 === "front" ? Mn : ln;
}
function tV(e6) {
  let { color: r6, opacity: t6, topColor: n, texture: o, topTexture: i } = e6;
  return `${r6}${t6}${n || ""}${o || ""}${i || ""}`;
}
var x1 = class extends Ka {
  constructor(t6, n) {
    super();
    t(this, "state");
    t(this, "convertTo3DMapPosition");
    t(this, "loader");
    t(this, "optimizePromise", []);
    this.state = t6, this.convertTo3DMapPosition = n;
  }
  async getGLTFLoader() {
    if (this.loader) return this.loader;
    let { GLTFLoader: t6 } = await import("./GLTFLoader-TLLNLQ5Y-QHVCG2AU.js");
    return this.loader = new t6(), this.loader;
  }
  createEntityFromFeature(t6, n, o) {
    let i = new Mi(n), s6 = n?.properties?.bevel, u6 = o && "bevel" in o ? o.bevel : void 0, l;
    u6 ? l = { ...s6, ...u6 } : s6 && (l = s6);
    let c = new Sr(i, new sx({ ...o, url: n.properties?.image?.path, bevel: l }));
    return o?.outline && (c.components[3] = new cm($g(o.color))), o?.focusable && (c.components[4] = new hm()), n.properties?.textures != null && Array.isArray(n.properties.textures) && n.properties.textures.length > 0 ? c.components[6] = new fm(n.properties.textures.find((d) => d.face === "side"), n.properties.textures.find((d) => d.face === "top")) : (o != null && "texture" in o && o.texture != null || o != null && "topTexture" in o && o.topTexture != null) && (c.components[6] = new fm(o.texture, o.topTexture)), c.id = t6, c;
  }
  createModelFromFeature(t6, n, o) {
    let i = new Iu(n), s6 = { ...o };
    n.properties.verticalOffset != null && (s6.verticalOffset = n.properties.verticalOffset), n.properties.rotation != null && (s6.rotation = n.properties.rotation), n.properties.scale != null && (s6.scale = n.properties.scale);
    let u6 = new ux(s6), l = new Sr(i, u6);
    return l.id = t6, l;
  }
  populateEntityMesh(t6, n) {
    let o = t6.components[0];
    o.geometry = n, o.batchedProps = { range: { start: 0, count: 1 / 0, indexCount: 1 / 0, indexStart: 0, vertexCount: 1 / 0, vertexStart: 0, reservedVertexCount: 1 / 0, reservedIndexCount: 1 / 0 }, geometryId: -1, positionCount: n.attributes.position.count }, o.currentHeight = t6.components[1].height, o.dirty = false;
  }
  async populateModelGroup(t6, n, o) {
    let i = new kt(), s6 = new Ye(), u6 = new bn(), l = new C(), c = new Co(), d = await this.getGLTFLoader(), f = new Promise((h) => {
      let b = (E) => {
        "entities3D" in o.userData && (o.userData.entities3D.size > 1 ? E.scene.traverse((v6) => {
          let x6 = v6;
          if ("isMesh" in x6 && x6.isMesh === true) {
            let D = new Yo(x6.geometry, x6.material, t6.size);
            D.userData = { entities: {} }, c.add(D), o.add(c);
          }
        }) : (E.scene.traverse((v6) => {
          "isMesh" in v6 && v6.isMesh === true && (v6.position.set(0, 0, 0), v6.rotation.set(0, 0, 0), v6.scale.set(1, 1, 1), v6.updateMatrix());
        }), c.add(E.scene), o.add(c), c.userData.isSingleModel = true, c.userData.entityId = t6.values().next().value, c.userData.type = "model")), h();
      };
      if (n.trimStart().startsWith("{") || n.startsWith("data:") && n.includes("application/json")) {
        let E = n.startsWith("data:") ? atob(n.split(",")[1]) : n;
        d.parse(E, "", b);
      } else d.load(n, b);
    });
    return this.optimizePromise.push(f.then(() => {
      let h = 0, b;
      for (let I of t6.values()) {
        if (b = this.state.geometry3DMap.get(I), !b || b?.type !== "model") continue;
        let E = b.components[0], v6 = b.components[1], x6 = b.components[0].feature;
        E.mesh = c, E.instanceIndex = h, v1(b), b.components[1].dirty = false;
        let { x: D, y: w6 } = this.convertTo3DMapPosition(x6.geometry.coordinates[1], x6.geometry.coordinates[0], 0);
        E.position.set(D, w6, E.altitude), s6.set(yd.degToRad(v6.rotation?.[0] ?? l5[0]), yd.degToRad(v6.rotation?.[1] ?? l5[1]), yd.degToRad(v6.rotation?.[2] ?? l5[2])), l.set(v6.scale?.[0] ?? s5[0], v6.scale?.[1] ?? s5[1], v6.scale?.[2] ?? s5[2]), u6.setFromEuler(s6), i.compose(E.position, u6, l), c.children.forEach((S) => {
          !b || b?.type !== "model" || !(S instanceof Yo) || (S.setMatrixAt(h, i), S.userData.entities[h] = b.id);
        }), E.mesh.userData.isSingleModel && (E.mesh.matrix.copy(i), E.mesh.matrix.decompose(E.mesh.position, E.mesh.quaternion, E.mesh.scale)), h++;
      }
      this.publish("model-loaded");
    })), c;
  }
  populateEntityGroup(t6) {
    let n, o, i, s6;
    for (let u6 of t6.values()) s6 = this.state.geometry3DMap.get(u6), s6.components[0] instanceof Mi && (o = s6.components[0].feature, i = s6.components[1], o.geometry.type === "Polygon" ? (n = g1(o, this.convertTo3DMapPosition, i), o.properties?.textures && o.properties.textures.length > 0 && F0e(n, o.properties.textures, this.state.naturalBearing, this.convertTo3DMapPosition), this.populateEntityMesh(s6, n)) : o.geometry.type === "MultiPolygon" ? (n = y1(o, this.convertTo3DMapPosition, i), this.populateEntityMesh(s6, n)) : o.geometry.type === "LineString" ? (n = nx(o, this.convertTo3DMapPosition, i), this.populateEntityMesh(s6, n)) : o.geometry.type === "MultiLineString" && (n = iM(o, this.convertTo3DMapPosition, i), this.populateEntityMesh(s6, n)));
    return t6;
  }
  update() {
    for (let t6 of this.state.geometryGroupIdsToLoad.values()) {
      let n = this.state.geometry3DMap.get(t6);
      if (n instanceof lr && n.userData.dirty) {
        if (n.userData.modelURL) n.userData.modelURL && (this.populateModelGroup(n.userData.entities3D, n.userData.modelURL, n), n.userData.dirty = false);
        else try {
          this.populateEntityGroup(n.userData.entities3D);
        } catch (s6) {
          Pt.warn(s6);
        }
        let o, i = {};
        for (let s6 of n.userData.entities3D.values()) {
          o = this.state.geometry3DMap.get(s6);
          let u6 = o?.components[0];
          if (o?.type === "geometry") {
            let l = o.components[1], c = tV(l);
            i[c] === void 0 && (i[c] = { style: l, entities: [] }), i[c].entities.push(o);
          } else u6 && "mesh" in u6 && u6.mesh && u6.mesh?.parent !== n && n.add(u6.mesh);
        }
        for (let s6 in i) {
          let u6 = k0e(i[s6].entities, i[s6].style);
          n.add(u6);
        }
        for (let s6 of n.userData.entities3D.values()) if (o = this.state.geometry3DMap.get(s6), o != null && o.entities2D.size > 0) for (let u6 of o.entities2D.values()) u6 && (o.attach(u6), this.publish("geometry-2d-added"));
        this.publish("geometry-group-added"), n.userData.dirty = false;
      }
    }
    return Promise.resolve();
  }
};
$i();
var I1 = class {
  constructor(r6, t6) {
    t(this, "state");
    t(this, "dirty", true);
    t(this, "domTree");
    this.state = r6, this.domTree = t6;
  }
  update() {
    if (this.dirty) {
      let r6;
      for (let t6 of Array.from(this.domTree.children)) if (r6 = this.state.geometry2DMap.get(t6.userData.entityId), r6) {
        let n = r6.components[0];
        (!n.enabled || !n.visible || !this.state.geometry2DIdsInScene.has(t6.userData.entityId)) && this.domTree.removeChild(t6);
      } else this.domTree.removeChild(t6);
      for (let t6 of this.state.geometry2DIdsInScene) if (r6 = this.state.geometry2DMap.get(t6), r6) {
        let n = r6.components[0];
        n instanceof qC && n.enabled && n.markerContainer && !this.domTree.contains(n.markerContainer) && (n.markerContainer.userData = { entityId: r6.id }, this.domTree.appendChild(n.markerContainer), n.updateDimensions());
      }
      this.dirty = false;
    }
  }
};
$i();
var E1 = class {
  constructor(r6, t6) {
    t(this, "state");
    t(this, "project");
    this.state = r6, this.project = t6;
  }
  update() {
    let r6, t6 = 0, n = 0, o, i;
    for (let s6 of this.state.geometry2DIdsInScene) if (r6 = this.state.geometry2DMap.get(s6), r6) {
      i = r6.components[0];
      let u6 = r6.attachedTo ? this.state.geometry3DMap.get(r6.attachedTo) : void 0;
      if (u6 instanceof Sr) if (this.state.geometry3DIdsInScene.has(u6.id)) {
        o = u6.components[1], i = r6.components[0], (o.dirty || r6.components[0].attachedDirty) && (t6 = o.height, n = o.altitude, r6.setAltitude(t6 + n));
        let l = o.visible;
        i.visible !== l && (i.visible = l);
      } else i.visible === true && (i.visible = false);
      this.project(r6.components[0].projection, r6.position), r6.components[0].attachedDirty = false;
    }
  }
};
$i();
$i();
$i();
var rV = /* @__PURE__ */ (function() {
  let r6, t6;
  return (n) => {
    if ((!t6 || !t6) && (r6 = document.createElement("canvas"), r6.width = 500 * n, r6.height = 500 * n, r6.style.width = "500px", r6.style.height = "500px", t6 = r6.getContext("2d")), !t6) throw new Error("Could not get 2D context");
    return { measureCanvas: r6, measureCanvasContext: t6 };
  };
})();
var pM = ({ text: e6, size: r6, maxWidth: t6, pixelRatio: n, maxLines: o = 2, lineHeight: i = 1.2, options: s6 = { strokeText: true } }) => {
  let u6 = `bold ${r6 * n}px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif`, { measureCanvasContext: l } = rV(n);
  l.font = u6;
  let c = [], d = e6.split(" "), f = 0, h = 0, b = 0;
  for (; h < d.length; ) {
    let x6 = d[h];
    if (f === o && f > 0) {
      c[f - 1] += "...";
      break;
    }
    if (c[f] == null && (c[f] = x6, h++), d.length === 1) {
      c[f] = x6;
      break;
    }
    if (d[h] == null) break;
    let { width: D } = l.measureText(c[f] + " " + d[h]);
    D <= t6 * n ? (c[f] += " " + d[h], h++) : f++;
  }
  c.forEach((x6) => {
    let { width: D } = l.measureText(x6);
    b = Math.max(D, b);
  });
  let I = r6 * n * i, E = c.length * I;
  return { maxWidth: b, maxHeight: E, lines: c.length, draw: (x6, D, w6) => {
    c.length === 1 ? (s6.strokeText && x6.strokeText(c[0], D, w6), x6.fillText(c[0], D, w6)) : (s6.strokeText && (x6.strokeText(c[0], D, w6 - I / 2), x6.strokeText(c[1], D, w6 + I / 2)), x6.fillText(c[0], D, w6 - I / 2), x6.fillText(c[1], D, w6 + I / 2));
  } };
};
$i();
function dM(e6) {
  let r6 = new Image();
  return e6 && (/<svg[\s\S]*>/i.test(e6) ? r6.src = `data:image/svg+xml;base64,${btoa(e6)}` : r6.src = e6), r6;
}
var C1 = class extends Ka {
  constructor(t6, n, o) {
    super();
    t(this, "dirty", false);
    t(this, "state");
    t(this, "colliderContext");
    t(this, "colliderCanvas");
    t(this, "transformRequestFunc");
    t(this, "transformRequest", async (t10) => this.transformRequestFunc ? await this.transformRequestFunc(t10) : { url: t10 });
    t(this, "pinCache", {});
    t(this, "imageCache", {});
    t(this, "imagePromiseCache", {});
    t(this, "imageDimensionsCache", {});
    t(this, "textCache", {});
    t(this, "update", (t10) => {
      let n6 = this.state.pixelRatio;
      this.colliderContext.clearRect(0, 0, this.colliderCanvas.width, this.colliderCanvas.height);
      let o6, i, s6, u6, l, c, d;
      for (let f of this.state.geometry2DIdsInScene) if (d = this.state.geometry2DMap.get(f), d != null && (c = d.components[0], c instanceof mC && !d.disposed)) {
        if (l = c.appearance.iconVisible, c.appearance.icon != null && l != null) {
          let b = typeof l == "boolean" ? l : t10 >= l;
          b !== c.iconVisible && (c.iconVisible = b, c.dirty = true);
        }
        if ((c.dirty || this.dirty) && c.calculatePinSize(), i = { active: c.appearance.pinColor, inactive: c.appearance.pinColorInactive }, s6 = { active: c.appearance.pinOutlineColor, inactive: c.appearance.pinOutlineColorInactive }, u6 = S5(c.pinSize, 2), o6 = `${i.active}-${i.inactive}-${s6.active}-${s6.inactive}-${u6}-${c.iconVisible}`, c.labelCacheId = o6, (!this.pinCache[o6] || this.dirty) && (this.prepare(c, o6, this.colliderContext), c.dirty = true), (c.appearance.icon && (!c.imageHash || c.pinDirty) || this.dirty) && this.cacheImage(c), this.textCache[c.id] == null || c.textDirty || this.dirty) {
          c.dirty = true, this.textCache[c.id] = {};
          let { textDrawFn: b, width: I, height: E } = this.processText(c.text, c.appearance.textSize, c.appearance.maxWidth, c.appearance.maxLines, c.appearance.lineHeight);
          ["left", "center", "right"].forEach((v6) => {
            this.textCache[c.id][v6] = this.textToCanvas(b, c.appearance.textSize, v6, I, E, c.appearance.textColor, c.appearance.textOutlineColor);
          }), c.dimensions = { width: Math.ceil(I / n6), height: Math.ceil(E / n6) };
        }
        let h = 1;
        if (c.appearance.iconScale) if (typeof c.appearance.iconScale == "number") h = c.appearance.iconScale;
        else {
          let { on: b, input: I, output: E, easing: v6 } = c.appearance.iconScale;
          b === "zoom-level" ? h = sN(t10, I, E, v6 ?? "linear") : Pt.warn(`Unsupported interpolation property: ${b}`);
        }
        c.recomputeCurrentStrategy(c.iconVisible ? h : 1), c.canShow && c.visible && (c.enabled || c.visibilityNeedsUpdate !== false) && this.draw(c, o6, this.colliderContext), c.textDirty = false, c.pinDirty = false;
      }
      this.dirty = false;
    });
    t(this, "processText", (t10, n6, o6, i, s6) => {
      let u6 = this.state.pixelRatio, { draw: l, maxWidth: c, maxHeight: d } = pM({ text: t10, size: n6, pixelRatio: u6, maxWidth: o6, maxLines: i, lineHeight: s6 });
      return { textDrawFn: l, width: c + 2.5 * u6 * 2, height: d + 2.5 * u6 * 2 };
    });
    t(this, "textToCanvas", (t10, n6, o6, i, s6, u6, l) => {
      let c = this.state.pixelRatio, d, f = i, h = s6;
      window.OffscreenCanvas != null && !t5() ? d = new OffscreenCanvas(f, h) : (d = document.createElement("canvas"), d.width = f, d.height = h, d.style.width = f + "px", d.style.height = h + "px");
      let b = d.getContext("2d", { willReadFrequently: true });
      if (!b) return;
      let I = 2.5 * c;
      b.textAlign = o6, b.font = `bold ${n6 * c}px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif`, b.textBaseline = "middle", b.lineJoin = "miter", b.miterLimit = 2, b.strokeStyle = "white", b.lineWidth = I, b.fillStyle = u6, b.strokeStyle = l;
      let E = o6 === "left" ? I / 2 : o6 === "center" ? f / 2 : f - I / 2;
      return t10(b, E, (h + I / 2) / 2), d;
    });
    t(this, "cacheImage", (t10) => {
      if (!t10.appearance.icon) return;
      let n6 = Pwe(t10.appearance.icon);
      this.imagePromiseCache[n6] || (this.imagePromiseCache[n6] = new Promise((o6) => {
        this.transformRequest(t10.appearance.icon).then((i) => {
          let s6 = dM(i.url);
          s6.onload = () => {
            this.imageCache[n6] = s6, this.publish("img:loaded"), o6(s6);
          };
        });
      })), t10.imageHash !== n6 && (t10.imageHash = n6, this.imagePromiseCache[n6].then(() => {
        t10.dirty = true;
      }));
    });
    t(this, "createPinCanvas", (t10, n6, o6, i, s6 = 1) => {
      let u6, l = this.state.pixelRatio, c = t10.totalPinSize * 2 * l * s6;
      window.OffscreenCanvas != null ? u6 = new OffscreenCanvas(c, c) : (u6 = document.createElement("canvas"), u6.width = c, u6.height = c, u6.style.width = c / l + "px", u6.style.height = c / l + "px");
      let d = u6.getContext("2d");
      return d.shadowColor = "rgba(0,0,0,0.3)", d.shadowOffsetY = 2 * l, d.shadowBlur = 5 * l, d.beginPath(), d.arc(c / 2, c / 2, (n6 / 2 + 2.5 * l / 2) * s6, 0, 2 * Math.PI), d.fillStyle = o6, d.fill(), d.beginPath(), d.arc(c / 2, c / 2, n6 / 2 * s6, 0, 2 * Math.PI), d.shadowColor = "transparent", d.fillStyle = i, d.fill(), u6;
    });
    t(this, "prepare", (t10, n6, o6) => {
      let i = this.state.pixelRatio;
      o6.lineWidth = 4 * i;
      let s6 = typeof t10.appearance.iconScale == "number" ? [t10.appearance.iconScale] : t10.appearance.iconScale == null ? [] : t10.appearance.iconScale.output, u6 = s6.length > 0 ? Math.max(...s6) : void 0, l = this.createPinCanvas(t10, t10.pinSize, t10.appearance.pinOutlineColor, t10.appearance.pinColor, u6), c = this.createPinCanvas(t10, 3.5 * i, t10.appearance.pinOutlineColorInactive, t10.appearance.pinColorInactive, u6);
      this.pinCache[n6] = [l, c];
    });
    this.state = t6, this.colliderCanvas = n, this.colliderContext = n.getContext("2d"), this.transformRequestFunc = o;
  }
  draw(t6, n, o) {
    if (!t6.canShow || !t6.visible) return;
    o.save(), o.globalAlpha = t6.currentOpacity;
    let i = this.state.pixelRatio, s6 = t6.projection.x * i, u6 = t6.projection.y * i, l = t6.style.pinVisibility === 1 ? this.pinCache[n][0] : this.pinCache[n][1], c = t6.style.pinVisibility === 1 ? t6.scaledPinSize * i : t6.totalPinSize * i;
    if (t6.style.pinVisibility !== 0 && o.drawImage(l, s6 - c, u6 - c, c * 2, c * 2), t6.appearance.icon && t6.iconVisible && t6.imageHash && t6.appearance.iconSize && this.imageCache[t6.imageHash] && t6.style.pinVisibility === 1) {
      let d = this.imageCache[t6.imageHash], f = (t6.scaledPinSize - t6.scaledIconPadding) * i, h = t6.appearance.iconFit, b = f, I = f, E = `${t6.imageHash}_${h}`;
      if (this.imageDimensionsCache[E]) b = this.imageDimensionsCache[E].width, I = this.imageDimensionsCache[E].height;
      else {
        let v6 = d.width * i, x6 = d.height * i;
        if (h === "contain") {
          let D = Math.sqrt(v6 ** 2 + x6 ** 2), w6 = f / D;
          b = v6 * w6, I = x6 * w6;
        }
        if (h === "cover") {
          let D = f / v6, w6 = f / x6, S = Math.max(D, w6);
          b = v6 * S, I = x6 * S;
        }
      }
      o.save(), o.beginPath(), o.arc(s6, u6, f / 2, 0, 2 * Math.PI), o.closePath(), t6?.appearance?.iconOverflow !== "visible" && o.clip(), o.drawImage(d, s6 - b / 2, u6 - I / 2, b, I), o.restore();
    }
    t6.style.textLabelVisible && t6.style.textAlign != null && t6.style.left != null && t6.style.top != null && o.drawImage(this.textCache[t6.id][t6.style.textAlign], s6 + t6.style.left * i, u6 + t6.style.top * i), o.restore();
  }
};
$i();
function sV(e6, r6) {
  let t6 = e6.components[2], n = e6.components[1];
  return t6?.hover ? [n.hoverColor || r6, n.hoverColor || r6] : [n.color, n.topColor || n.color];
}
var S1 = class {
  constructor(r6, t6) {
    t(this, "state");
    t(this, "convertTo3DMapPosition");
    this.convertTo3DMapPosition = t6, this.state = r6;
  }
  determineTextureVisiblity(r6, t6, n) {
    let o = vs(r6);
    (o?.texture != null || o?.topTexture != null) && (n?.hover && o.texturesVisible ? o.hideTextures(r6.instanceIndex) : o.texturesVisible || o.showTextures(r6.instanceIndex), t6.texture == null && o.removeSideTexture(r6.instanceIndex), t6.topTexture == null && o.removeTopTexture(r6.instanceIndex));
  }
  update() {
    let r6, t6, n;
    for (let o of this.state.geometry3DIdsInScene) if (n = this.state.geometry3DMap.get(o), n && (n.type === "geometry" || n.type === "custom-geometry") && (n.components[1]?.dirty || n.components[2]?.dirty)) {
      let i = n.components[0], s6 = n.components[1];
      t6 = n.components[2];
      let u6 = sV(n, this.state.hoverColor);
      i.setColor(u6[0], u6[1]);
      let l = vs(i);
      if (s6.visible !== i.visible && (i.visible = s6.visible, i instanceof Mi && i.textMesh)) {
        let d = this.state.geometry3DMap.get(i.textMesh.userData.entityId);
        d?.type === "text3d" && d.components[0].polygonEntityId != null && (d.components[0].visible = s6.visible);
      }
      s6.altitude !== i.altitude && (i.altitude = s6.altitude);
      let c = s6.opacity * Cwe(n);
      if (c !== i.opacity && (i.opacity = c), s6.renderOrder !== i.renderOrder && (i.renderOrder = s6.renderOrder), l && s6.side !== lM(l) && cM(l, s6.side), i instanceof Mi && s6.shading != null && (s6.shading?.start !== vs(i)?.getGradientShading().start || s6.shading?.end !== vs(i)?.getGradientShading().end || s6.shading?.intensity !== vs(i)?.getGradientShading().intensity) && vs(i)?.setGradientShading(s6.shading?.start ?? 0, s6.shading?.end ?? 0, s6.shading?.intensity ?? 0), s6.dirty = false, i instanceof Mi) {
        let d = n.components[6];
        d instanceof fm && this.determineTextureVisiblity(i, d, t6);
      }
      n.components[2] && (n.components[2].dirty = false);
    } else if (n?.type === "model") n.components[1].dirty && (v1(n), n.components[1].dirty = false), n.components[0].positionDirty && (uM(n, this.convertTo3DMapPosition), n.components[0].positionDirty = false);
    else if (n?.type === "image" && n.components[1]?.dirty) {
      r6 = n.components[0];
      let i = n.components[1];
      i.visible !== r6.visible && (r6.visible = i.visible), i.dirty = false;
    } else if (n?.type === "text3d" && n.components[1]?.dirty && n.components[0].polygonEntityId != null) {
      r6 = n.components[0];
      let i = n.components[1];
      i.visible != null && i.visible !== r6.visible && (r6.visible = i.visible);
      let { textMesh: s6 } = r6;
      if (s6) {
        Object.assign(s6, i.getState());
        let u6 = i.hoverColor ?? this.state.text3dHoverColor;
        s6.color = i.hoverByPolygon ? u6 : i.color ?? FM.color, s6.outlineColor = i.hoverByPolygon ? u6 : i.outlineColor ?? FM.outlineColor, s6.strokeColor = i.hoverByPolygon ? u6 : i.strokeColor ?? FM.strokeColor;
      }
      i.dirty = false;
    }
  }
};
$i();
var D1 = class extends Ka {
  constructor(t6) {
    super();
    t(this, "state");
    t(this, "animating", /* @__PURE__ */ new Map());
    t(this, "isAnimating", false);
    t(this, "startTime", -1);
    t(this, "showDuration", 300);
    t(this, "hideDuration", 250);
    t(this, "update", () => {
      this.animating.clear();
      let t10, n;
      for (let o of this.state.geometry2DIdsInScene) t10 = this.state.geometry2DMap.get(o), t10 && (n = t10.components[0], n instanceof mC && (n.visibilityNeedsUpdate === "show" ? (n.canShow = true, this.animating.set(n, [n.currentOpacity, n.appearance.opacity ?? 1])) : n.visibilityNeedsUpdate === "hide" && this.animating.set(n, [n.currentOpacity, 0])));
      this.startTime = performance.now(), this.publish("animate:2d");
    });
    t(this, "playAnimations");
    this.state = t6, this.playAnimations = this._playAnimations;
  }
  _playAnimations() {
    let t6 = performance.now();
    for (let [n, [o, i]] of this.animating.entries()) {
      let s6 = i === 1 ? this.showDuration : this.hideDuration, u6 = (t6 - this.startTime) / s6;
      n.currentOpacity = aN(u6, 0, 1, o, i, i === 0 ? Ox : tI), t6 - this.startTime >= s6 && (i === 1 ? n.canShow = true : i === 0 && (n.canShow = false), n.visibilityNeedsUpdate = false, this.animating.delete(n));
    }
    this.publish("draw:2d"), this.animating.size > 0 && this.publish("animate:2d");
  }
};
$i();
var T1 = class extends Ka {
  constructor(t6, n, o, i, s6, u6, l) {
    super();
    t(this, "state");
    t(this, "renderer");
    t(this, "mode");
    t(this, "scene");
    t(this, "cameraObject");
    t(this, "viewCamera");
    t(this, "systems");
    t(this, "needs2DRecompute", false);
    t(this, "twoDdirty", true);
    t(this, "threeDdirty", true);
    t(this, "frameId", null);
    t(this, "twoDFrameId", null);
    t(this, "animationFrameId", null);
    t(this, "nextFrame", null);
    t(this, "update", (t10 = false) => {
      if (this.renderer?.renderer == null) return Promise.resolve();
      if (t10) {
        let n6 = this.commitRenderState();
        return this.paint(), n6;
      } else return this.frameId ? Promise.resolve() : new Promise((n6, o6) => {
        this.frameId = requestAnimationFrame(() => this.renderer?.renderer == null ? n6() : this.mode === "standalone" ? this.commitRenderState()?.then(() => {
          this.paint(), n6();
        }).catch((i6) => {
          o6(i6);
        }) : n6());
      });
    });
    t(this, "animate2D", () => {
      this.animationFrameId = requestAnimationFrame(() => {
        this.animationFrameId = null, this.systems.twoDVisiblitySystem.playAnimations();
      });
    });
    t(this, "drawEntities2D", () => {
      this.twoDFrameId || (this.twoDFrameId = requestAnimationFrame(() => {
        this.twoDFrameId = null, this.systems.twoDDrawSystem.update(this.systems.cameraSystem.getZoomLevel());
      }));
    });
    t(this, "updateEntities2D", () => {
      this.twoDFrameId && (cancelAnimationFrame(this.twoDFrameId), this.twoDFrameId = null), this.twoDFrameId = requestAnimationFrame(() => {
        this.twoDFrameId = null, this.systems.watermarkSystem.insertIntoQuadTree(this.systems.collisionSystem.interactiveCollidersQTree), this.systems.interactionSystem.updateQuadtree(this.systems.collisionSystem.interactiveCollidersQTree), this.systems.twoDVisiblitySystem.update(), this.systems.twoDDrawSystem.update(this.systems.cameraSystem.getZoomLevel()), this.systems.domDrawSystem.update(this.systems.cameraSystem.isUserInteracting());
      });
    });
    t(this, "commitRenderState", () => {
      try {
        let t10 = [];
        this.frameId = null, this.publish("pre-render"), this.state.internalTweenGroup.update(), this.state.externalTweenGroup.update(), (this.mode === "outdoors-interleaved" || this.mode === "standalone") && this.systems.cameraSystem.update(), this.state.shouldMeasureCanvas && (this.state.shouldMeasureCanvas = false, this.publish("measure-canvas")), this.twoDdirty && (this.state.geometry2DIdsInScene.clear(), i5(this.state.entityScene, this.state.geometry2DIdsInScene), this.systems.domVisiblitySystem.dirty = true, this.systems.collisionSystem.collidersDirty = true, this.systems.domMutationSystem.dirty = true, this.systems.panBoundsSystem.dirty = true, this.twoDdirty = false), this.threeDdirty && (this.state.geometry3DIdsInScene.clear(), this.state.geometryGroupIdsToLoad.clear(), n5(this.state.entityScene, this.state.geometry3DIdsInScene, this.state.geometryGroupIdsToLoad), this.threeDdirty = false, this.systems.interactionSystem.dirty3D = true, this.systems.panBoundsSystem.dirty = true, this.systems.outlineInterpolationSystem.geometries3DDirty = true, this.systems.geometryInFocusSystem.focusablesDirty = true);
        let n6 = this.systems.meshOptimizationSystem.update();
        n6 && t10.push(n6), this.systems.borderSystem.update(), this.systems.meshModificationSystem.update(), this.systems.meshDetachmentSystem.update(), this.systems.renderOrderSystem.update(), this.systems.clippingPlaneSystem.update(), this.systems.imageSystem.update(this.systems.cameraSystem.getRotation()), t10.push(this.systems.text3DSystem.update(this.systems.cameraSystem.getRotation())), this.systems.customGeometrySystem.update(), this.systems.panBoundsSystem.update(), this.systems.geometryInFocusSystem.update(this.systems.cameraSystem.isCameraMoving(), this.systems.cameraSystem.lastCameraStoppedMovingTime()), this.systems.outlineInterpolationSystem.update(this.systems.cameraSystem.getZoomLevel(), this.systems.cameraSystem.zoomDirty), this.systems.pathSystem.update(this.systems.cameraSystem.minZoomAltitude, this.systems.cameraSystem.maxZoomAltitude, this.systems.cameraSystem.getZoomAltitude()), this.systems.cameraSystem.postRender(), this.systems.domVisiblitySystem.update(), this.systems.domMutationSystem.update(), this.systems.twoDProjectionSystem.update(), this.systems.occlusion2DSystem.update(), this.systems.twoDDrawSystem.update(this.systems.cameraSystem.getZoomLevel()), this.systems.domDrawSystem.update(this.systems.cameraSystem.isUserInteracting()), this.systems.watermarkSystem.update();
        let o6 = this.needs2DRecompute;
        return this.nextFrame = requestAnimationFrame(() => {
          this.systems.collisionSystem.update(this.systems.watermarkSystem.width, this.systems.watermarkSystem.height, this.systems.watermarkSystem.options.position, !o6, this.systems.imageSystem.currentImageScreenBBoxes);
        }), this.systems.textureSystem.update(), this.systems.drawSystem.update(), this.systems.geometryDisposalSystem.update(), this.systems.cameraSystem.dirty = false, this.systems.cameraSystem.zoomDirty = false, this.systems.cameraSystem.rotationDirty = false, this.systems.cameraSystem.stateDirty && (this.publish("camera-state-change"), this.systems.cameraSystem.stateDirty = false), this.publish("post-render"), this.needs2DRecompute = false, Promise.all(t10);
      } catch (t10) {
        return Promise.reject(t10);
      }
    });
    this.renderer = t6, this.state = n, this.mode = o, this.scene = i, this.cameraObject = s6, this.viewCamera = u6, this.systems = l, this.systems.collisionSystem.on("visibility-changed", this.updateEntities2D), this.systems.twoDVisiblitySystem.on("draw:2d", this.drawEntities2D), this.systems.twoDVisiblitySystem.on("animate:2d", this.animate2D), this.systems.cameraSystem.on("pan-start", () => this.needs2DRecompute = false), this.systems.cameraSystem.on("zoom-start", () => this.needs2DRecompute = false), this.systems.cameraSystem.on("zoom-end", () => this.needs2DRecompute = true), this.systems.cameraSystem.on("rotate-start", () => this.needs2DRecompute = false), this.systems.cameraSystem.on("rotate-end", () => this.needs2DRecompute = true);
  }
  paint() {
    this.renderer?.renderer && (this.mode === "standalone" && this.renderer.clear(), this.renderer.render(this.scene, this.state.useStandaloneCamera || this.mode === "standalone" ? this.cameraObject : this.viewCamera));
  }
  destroy() {
    this.frameId && cancelAnimationFrame(this.frameId), this.twoDFrameId && cancelAnimationFrame(this.twoDFrameId), this.animationFrameId && cancelAnimationFrame(this.animationFrameId), this.nextFrame && cancelAnimationFrame(this.nextFrame), this.state.geometry2DIdsInScene.clear(), this.state.geometry3DIdsInScene.clear(), this.systems.domVisiblitySystem.dirty = true, this.systems.collisionSystem.collidersDirty = true, this.update(), this.systems.collisionSystem.off("visibility-changed", this.updateEntities2D), this.systems.twoDVisiblitySystem.off("draw:2d", this.drawEntities2D), this.systems.twoDVisiblitySystem.off("animate:2d", this.animate2D);
  }
};
$i();
var uV = external_exports.object({ interactive: external_exports.boolean().optional(), id: external_exports.string().optional(), width: external_exports.union([external_exports.number(), external_exports.object({ on: external_exports.literal("zoom-level").optional(), input: external_exports.array(external_exports.number()).nonempty(), output: external_exports.array(external_exports.number()).nonempty(), easing: external_exports.string().optional() })]).optional(), accentColor: external_exports.string().optional(), displayArrowsOnPath: external_exports.boolean().optional(), animateArrowsOnPath: external_exports.boolean().optional(), visibleThroughGeometry: external_exports.boolean().optional(), dashed: external_exports.boolean().optional() });
var lV = external_exports.object({ type: external_exports.enum(["Feature"]), geometry: Cd, properties: external_exports.object({ parentId: external_exports.any().optional() }) });
function mM(e6, r6) {
  external_exports.object({ features: external_exports.array(lV) }).parse(e6), uV.parse(r6);
}
var Wf;
var Eu = class {
  constructor(r6, t6) {
    t(this, "type", "path");
    t(this, "mesh", new Co());
    t(this, "material");
    t(this, "geometry");
    t(this, "outline");
    t(this, "feature");
    t(this, "options");
    t(this, "width", { on: "zoom-level", input: [17, 22], output: [0.8, 0.4] });
    t(this, "breakpoint", 0);
    t(this, "altitudeBreakpoints");
    t(this, "accentColor", "blue");
    t(this, "completeFraction", 1);
    t(this, "altitudeAdjustment", 1);
    t(this, "displayArrowsOnPath", false);
    t(this, "animateArrowsOnPath", false);
    t(this, "visibleThroughGeometry", false);
    t(this, "highlightStartFraction", 0);
    t(this, "highlightEndFraction", 0);
    t(this, "highlightCompleteFraction", 1);
    t(this, "highlightWidthMultiplier", 1.1);
    t(this, "highlightColor", "red");
    t(this, "dashed", false);
    t(this, "isVertical", false);
    t(this, "dirty", true);
    t(this, "materialDirty", true);
    t(this, "position", new C());
    v(this, Wf, 0);
    this.feature = r6, this.options = t6 || {}, this.width = t6?.width ?? this.width, this.accentColor = t6?.accentColor ?? this.accentColor, this.displayArrowsOnPath = t6?.displayArrowsOnPath ?? this.displayArrowsOnPath, this.animateArrowsOnPath = t6?.animateArrowsOnPath ?? this.animateArrowsOnPath, this.visibleThroughGeometry = t6?.visibleThroughGeometry ?? this.visibleThroughGeometry, this.dashed = t6?.dashed ?? this.dashed;
  }
  setColor() {
  }
  setOpacity() {
  }
  set visible(r6) {
    this.mesh && (this.mesh.visible = r6);
  }
  get visible() {
    return this.mesh ? this.mesh.visible : false;
  }
  get altitude() {
    return u(this, Wf);
  }
  set altitude(r6) {
    this.mesh && (this.mesh.position.z = r6, w(this, Wf, r6));
  }
  set complete(r6) {
    this.material && (this.material.uniforms.complete.value = r6, this.material.needsUpdate = true);
  }
};
Wf = /* @__PURE__ */ new WeakMap();
$i();
$i();
$i();
var zo = Object.freeze({ Linear: Object.freeze({ None: function(e6) {
  return e6;
}, In: function(e6) {
  return e6;
}, Out: function(e6) {
  return e6;
}, InOut: function(e6) {
  return e6;
} }), Quadratic: Object.freeze({ In: function(e6) {
  return e6 * e6;
}, Out: function(e6) {
  return e6 * (2 - e6);
}, InOut: function(e6) {
  return (e6 *= 2) < 1 ? 0.5 * e6 * e6 : -0.5 * (--e6 * (e6 - 2) - 1);
} }), Cubic: Object.freeze({ In: function(e6) {
  return e6 * e6 * e6;
}, Out: function(e6) {
  return --e6 * e6 * e6 + 1;
}, InOut: function(e6) {
  return (e6 *= 2) < 1 ? 0.5 * e6 * e6 * e6 : 0.5 * ((e6 -= 2) * e6 * e6 + 2);
} }), Quartic: Object.freeze({ In: function(e6) {
  return e6 * e6 * e6 * e6;
}, Out: function(e6) {
  return 1 - --e6 * e6 * e6 * e6;
}, InOut: function(e6) {
  return (e6 *= 2) < 1 ? 0.5 * e6 * e6 * e6 * e6 : -0.5 * ((e6 -= 2) * e6 * e6 * e6 - 2);
} }), Quintic: Object.freeze({ In: function(e6) {
  return e6 * e6 * e6 * e6 * e6;
}, Out: function(e6) {
  return --e6 * e6 * e6 * e6 * e6 + 1;
}, InOut: function(e6) {
  return (e6 *= 2) < 1 ? 0.5 * e6 * e6 * e6 * e6 * e6 : 0.5 * ((e6 -= 2) * e6 * e6 * e6 * e6 + 2);
} }), Sinusoidal: Object.freeze({ In: function(e6) {
  return 1 - Math.sin((1 - e6) * Math.PI / 2);
}, Out: function(e6) {
  return Math.sin(e6 * Math.PI / 2);
}, InOut: function(e6) {
  return 0.5 * (1 - Math.sin(Math.PI * (0.5 - e6)));
} }), Exponential: Object.freeze({ In: function(e6) {
  return e6 === 0 ? 0 : Math.pow(1024, e6 - 1);
}, Out: function(e6) {
  return e6 === 1 ? 1 : 1 - Math.pow(2, -10 * e6);
}, InOut: function(e6) {
  return e6 === 0 ? 0 : e6 === 1 ? 1 : (e6 *= 2) < 1 ? 0.5 * Math.pow(1024, e6 - 1) : 0.5 * (-Math.pow(2, -10 * (e6 - 1)) + 2);
} }), Circular: Object.freeze({ In: function(e6) {
  return 1 - Math.sqrt(1 - e6 * e6);
}, Out: function(e6) {
  return Math.sqrt(1 - --e6 * e6);
}, InOut: function(e6) {
  return (e6 *= 2) < 1 ? -0.5 * (Math.sqrt(1 - e6 * e6) - 1) : 0.5 * (Math.sqrt(1 - (e6 -= 2) * e6) + 1);
} }), Elastic: Object.freeze({ In: function(e6) {
  return e6 === 0 ? 0 : e6 === 1 ? 1 : -Math.pow(2, 10 * (e6 - 1)) * Math.sin((e6 - 1.1) * 5 * Math.PI);
}, Out: function(e6) {
  return e6 === 0 ? 0 : e6 === 1 ? 1 : Math.pow(2, -10 * e6) * Math.sin((e6 - 0.1) * 5 * Math.PI) + 1;
}, InOut: function(e6) {
  return e6 === 0 ? 0 : e6 === 1 ? 1 : (e6 *= 2, e6 < 1 ? -0.5 * Math.pow(2, 10 * (e6 - 1)) * Math.sin((e6 - 1.1) * 5 * Math.PI) : 0.5 * Math.pow(2, -10 * (e6 - 1)) * Math.sin((e6 - 1.1) * 5 * Math.PI) + 1);
} }), Back: Object.freeze({ In: function(e6) {
  var r6 = 1.70158;
  return e6 === 1 ? 1 : e6 * e6 * ((r6 + 1) * e6 - r6);
}, Out: function(e6) {
  var r6 = 1.70158;
  return e6 === 0 ? 0 : --e6 * e6 * ((r6 + 1) * e6 + r6) + 1;
}, InOut: function(e6) {
  var r6 = 2.5949095;
  return (e6 *= 2) < 1 ? 0.5 * (e6 * e6 * ((r6 + 1) * e6 - r6)) : 0.5 * ((e6 -= 2) * e6 * ((r6 + 1) * e6 + r6) + 2);
} }), Bounce: Object.freeze({ In: function(e6) {
  return 1 - zo.Bounce.Out(1 - e6);
}, Out: function(e6) {
  return e6 < 0.36363636363636365 ? 7.5625 * e6 * e6 : e6 < 0.7272727272727273 ? 7.5625 * (e6 -= 0.5454545454545454) * e6 + 0.75 : e6 < 0.9090909090909091 ? 7.5625 * (e6 -= 0.8181818181818182) * e6 + 0.9375 : 7.5625 * (e6 -= 0.9545454545454546) * e6 + 0.984375;
}, InOut: function(e6) {
  return e6 < 0.5 ? zo.Bounce.In(e6 * 2) * 0.5 : zo.Bounce.Out(e6 * 2 - 1) * 0.5 + 0.5;
} }), generatePow: function(e6) {
  return e6 === void 0 && (e6 = 4), e6 = e6 < Number.EPSILON ? Number.EPSILON : e6, e6 = e6 > 1e4 ? 1e4 : e6, { In: function(r6) {
    return Math.pow(r6, e6);
  }, Out: function(r6) {
    return 1 - Math.pow(1 - r6, e6);
  }, InOut: function(r6) {
    return r6 < 0.5 ? Math.pow(r6 * 2, e6) / 2 : (1 - Math.pow(2 - r6 * 2, e6)) / 2 + 0.5;
  } };
} });
var Xf = function() {
  return performance.now();
};
var w1 = (function() {
  function e6() {
    for (var r6 = [], t6 = 0; t6 < arguments.length; t6++) r6[t6] = arguments[t6];
    this._tweens = {}, this._tweensAddedDuringUpdate = {}, this.add.apply(this, r6);
  }
  return e6.prototype.getAll = function() {
    var r6 = this;
    return Object.keys(this._tweens).map(function(t6) {
      return r6._tweens[t6];
    });
  }, e6.prototype.removeAll = function() {
    this._tweens = {};
  }, e6.prototype.add = function() {
    for (var r6, t6 = [], n = 0; n < arguments.length; n++) t6[n] = arguments[n];
    for (var o = 0, i = t6; o < i.length; o++) {
      var s6 = i[o];
      (r6 = s6._group) === null || r6 === void 0 || r6.remove(s6), s6._group = this, this._tweens[s6.getId()] = s6, this._tweensAddedDuringUpdate[s6.getId()] = s6;
    }
  }, e6.prototype.remove = function() {
    for (var r6 = [], t6 = 0; t6 < arguments.length; t6++) r6[t6] = arguments[t6];
    for (var n = 0, o = r6; n < o.length; n++) {
      var i = o[n];
      i._group = void 0, delete this._tweens[i.getId()], delete this._tweensAddedDuringUpdate[i.getId()];
    }
  }, e6.prototype.allStopped = function() {
    return this.getAll().every(function(r6) {
      return !r6.isPlaying();
    });
  }, e6.prototype.update = function(r6, t6) {
    r6 === void 0 && (r6 = Xf()), t6 === void 0 && (t6 = true);
    var n = Object.keys(this._tweens);
    if (n.length !== 0) for (; n.length > 0; ) {
      this._tweensAddedDuringUpdate = {};
      for (var o = 0; o < n.length; o++) {
        var i = this._tweens[n[o]], s6 = !t6;
        i && i.update(r6, s6) === false && !t6 && this.remove(i);
      }
      n = Object.keys(this._tweensAddedDuringUpdate);
    }
  }, e6;
})();
var Dd = { Linear: function(e6, r6) {
  var t6 = e6.length - 1, n = t6 * r6, o = Math.floor(n), i = Dd.Utils.Linear;
  return r6 < 0 ? i(e6[0], e6[1], n) : r6 > 1 ? i(e6[t6], e6[t6 - 1], t6 - n) : i(e6[o], e6[o + 1 > t6 ? t6 : o + 1], n - o);
}, Bezier: function(e6, r6) {
  for (var t6 = 0, n = e6.length - 1, o = Math.pow, i = Dd.Utils.Bernstein, s6 = 0; s6 <= n; s6++) t6 += o(1 - r6, n - s6) * o(r6, s6) * e6[s6] * i(n, s6);
  return t6;
}, CatmullRom: function(e6, r6) {
  var t6 = e6.length - 1, n = t6 * r6, o = Math.floor(n), i = Dd.Utils.CatmullRom;
  return e6[0] === e6[t6] ? (r6 < 0 && (o = Math.floor(n = t6 * (1 + r6))), i(e6[(o - 1 + t6) % t6], e6[o], e6[(o + 1) % t6], e6[(o + 2) % t6], n - o)) : r6 < 0 ? e6[0] - (i(e6[0], e6[0], e6[1], e6[1], -n) - e6[0]) : r6 > 1 ? e6[t6] - (i(e6[t6], e6[t6], e6[t6 - 1], e6[t6 - 1], n - t6) - e6[t6]) : i(e6[o ? o - 1 : 0], e6[o], e6[t6 < o + 1 ? t6 : o + 1], e6[t6 < o + 2 ? t6 : o + 2], n - o);
}, Utils: { Linear: function(e6, r6, t6) {
  return (r6 - e6) * t6 + e6;
}, Bernstein: function(e6, r6) {
  var t6 = Dd.Utils.Factorial;
  return t6(e6) / t6(r6) / t6(e6 - r6);
}, Factorial: /* @__PURE__ */ (function() {
  var e6 = [1];
  return function(r6) {
    var t6 = 1;
    if (e6[r6]) return e6[r6];
    for (var n = r6; n > 1; n--) t6 *= n;
    return e6[r6] = t6, t6;
  };
})(), CatmullRom: function(e6, r6, t6, n, o) {
  var i = (t6 - e6) * 0.5, s6 = (n - r6) * 0.5, u6 = o * o, l = o * u6;
  return (2 * r6 - 2 * t6 + i + s6) * l + (-3 * r6 + 3 * t6 - 2 * i - s6) * u6 + i * o + r6;
} } };
var fM = (function() {
  function e6() {
  }
  return e6.nextId = function() {
    return e6._nextId++;
  }, e6._nextId = 0, e6;
})();
var y2 = new w1();
var Ii = (function() {
  function e6(r6, t6) {
    this._isPaused = false, this._pauseStart = 0, this._valuesStart = {}, this._valuesEnd = {}, this._valuesStartRepeat = {}, this._duration = 1e3, this._isDynamic = false, this._initialRepeat = 0, this._repeat = 0, this._yoyo = false, this._isPlaying = false, this._reversed = false, this._delayTime = 0, this._startTime = 0, this._easingFunction = zo.Linear.None, this._interpolationFunction = Dd.Linear, this._chainedTweens = [], this._onStartCallbackFired = false, this._onEveryStartCallbackFired = false, this._id = fM.nextId(), this._isChainStopped = false, this._propertiesAreSetUp = false, this._goToEnd = false, this._object = r6, typeof t6 == "object" ? (this._group = t6, t6.add(this)) : t6 === true && (this._group = y2, y2.add(this));
  }
  return e6.prototype.getId = function() {
    return this._id;
  }, e6.prototype.isPlaying = function() {
    return this._isPlaying;
  }, e6.prototype.isPaused = function() {
    return this._isPaused;
  }, e6.prototype.getDuration = function() {
    return this._duration;
  }, e6.prototype.to = function(r6, t6) {
    if (t6 === void 0 && (t6 = 1e3), this._isPlaying) throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");
    return this._valuesEnd = r6, this._propertiesAreSetUp = false, this._duration = t6 < 0 ? 0 : t6, this;
  }, e6.prototype.duration = function(r6) {
    return r6 === void 0 && (r6 = 1e3), this._duration = r6 < 0 ? 0 : r6, this;
  }, e6.prototype.dynamic = function(r6) {
    return r6 === void 0 && (r6 = false), this._isDynamic = r6, this;
  }, e6.prototype.start = function(r6, t6) {
    if (r6 === void 0 && (r6 = Xf()), t6 === void 0 && (t6 = false), this._isPlaying) return this;
    if (this._repeat = this._initialRepeat, this._reversed) {
      this._reversed = false;
      for (var n in this._valuesStartRepeat) this._swapEndStartRepeatValues(n), this._valuesStart[n] = this._valuesStartRepeat[n];
    }
    if (this._isPlaying = true, this._isPaused = false, this._onStartCallbackFired = false, this._onEveryStartCallbackFired = false, this._isChainStopped = false, this._startTime = r6, this._startTime += this._delayTime, !this._propertiesAreSetUp || t6) {
      if (this._propertiesAreSetUp = true, !this._isDynamic) {
        var o = {};
        for (var i in this._valuesEnd) o[i] = this._valuesEnd[i];
        this._valuesEnd = o;
      }
      this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, t6);
    }
    return this;
  }, e6.prototype.startFromCurrentValues = function(r6) {
    return this.start(r6, true);
  }, e6.prototype._setupProperties = function(r6, t6, n, o, i) {
    for (var s6 in n) {
      var u6 = r6[s6], l = Array.isArray(u6), c = l ? "array" : typeof u6, d = !l && Array.isArray(n[s6]);
      if (!(c === "undefined" || c === "function")) {
        if (d) {
          var f = n[s6];
          if (f.length === 0) continue;
          for (var h = [u6], b = 0, I = f.length; b < I; b += 1) {
            var E = this._handleRelativeValue(u6, f[b]);
            if (isNaN(E)) {
              d = false, console.warn("Found invalid interpolation list. Skipping.");
              break;
            }
            h.push(E);
          }
          d && (n[s6] = h);
        }
        if ((c === "object" || l) && u6 && !d) {
          t6[s6] = l ? [] : {};
          var v6 = u6;
          for (var x6 in v6) t6[s6][x6] = v6[x6];
          o[s6] = l ? [] : {};
          var f = n[s6];
          if (!this._isDynamic) {
            var D = {};
            for (var x6 in f) D[x6] = f[x6];
            n[s6] = f = D;
          }
          this._setupProperties(v6, t6[s6], f, o[s6], i);
        } else (typeof t6[s6] > "u" || i) && (t6[s6] = u6), l || (t6[s6] *= 1), d ? o[s6] = n[s6].slice().reverse() : o[s6] = t6[s6] || 0;
      }
    }
  }, e6.prototype.stop = function() {
    return this._isChainStopped || (this._isChainStopped = true, this.stopChainedTweens()), this._isPlaying ? (this._isPlaying = false, this._isPaused = false, this._onStopCallback && this._onStopCallback(this._object), this) : this;
  }, e6.prototype.end = function() {
    return this._goToEnd = true, this.update(this._startTime + this._duration), this;
  }, e6.prototype.pause = function(r6) {
    return r6 === void 0 && (r6 = Xf()), this._isPaused || !this._isPlaying ? this : (this._isPaused = true, this._pauseStart = r6, this);
  }, e6.prototype.resume = function(r6) {
    return r6 === void 0 && (r6 = Xf()), !this._isPaused || !this._isPlaying ? this : (this._isPaused = false, this._startTime += r6 - this._pauseStart, this._pauseStart = 0, this);
  }, e6.prototype.stopChainedTweens = function() {
    for (var r6 = 0, t6 = this._chainedTweens.length; r6 < t6; r6++) this._chainedTweens[r6].stop();
    return this;
  }, e6.prototype.group = function(r6) {
    return r6 ? (r6.add(this), this) : (console.warn("tween.group() without args has been removed, use group.add(tween) instead."), this);
  }, e6.prototype.remove = function() {
    var r6;
    return (r6 = this._group) === null || r6 === void 0 || r6.remove(this), this;
  }, e6.prototype.delay = function(r6) {
    return r6 === void 0 && (r6 = 0), this._delayTime = r6, this;
  }, e6.prototype.repeat = function(r6) {
    return r6 === void 0 && (r6 = 0), this._initialRepeat = r6, this._repeat = r6, this;
  }, e6.prototype.repeatDelay = function(r6) {
    return this._repeatDelayTime = r6, this;
  }, e6.prototype.yoyo = function(r6) {
    return r6 === void 0 && (r6 = false), this._yoyo = r6, this;
  }, e6.prototype.easing = function(r6) {
    return r6 === void 0 && (r6 = zo.Linear.None), this._easingFunction = r6, this;
  }, e6.prototype.interpolation = function(r6) {
    return r6 === void 0 && (r6 = Dd.Linear), this._interpolationFunction = r6, this;
  }, e6.prototype.chain = function() {
    for (var r6 = [], t6 = 0; t6 < arguments.length; t6++) r6[t6] = arguments[t6];
    return this._chainedTweens = r6, this;
  }, e6.prototype.onStart = function(r6) {
    return this._onStartCallback = r6, this;
  }, e6.prototype.onEveryStart = function(r6) {
    return this._onEveryStartCallback = r6, this;
  }, e6.prototype.onUpdate = function(r6) {
    return this._onUpdateCallback = r6, this;
  }, e6.prototype.onRepeat = function(r6) {
    return this._onRepeatCallback = r6, this;
  }, e6.prototype.onComplete = function(r6) {
    return this._onCompleteCallback = r6, this;
  }, e6.prototype.onStop = function(r6) {
    return this._onStopCallback = r6, this;
  }, e6.prototype.update = function(r6, t6) {
    var n = this, o;
    if (r6 === void 0 && (r6 = Xf()), t6 === void 0 && (t6 = e6.autoStartOnUpdate), this._isPaused) return true;
    var i;
    if (!this._goToEnd && !this._isPlaying) if (t6) this.start(r6, true);
    else return false;
    if (this._goToEnd = false, r6 < this._startTime) return true;
    this._onStartCallbackFired === false && (this._onStartCallback && this._onStartCallback(this._object), this._onStartCallbackFired = true), this._onEveryStartCallbackFired === false && (this._onEveryStartCallback && this._onEveryStartCallback(this._object), this._onEveryStartCallbackFired = true);
    var s6 = r6 - this._startTime, u6 = this._duration + ((o = this._repeatDelayTime) !== null && o !== void 0 ? o : this._delayTime), l = this._duration + this._repeat * u6, c = function() {
      if (n._duration === 0 || s6 > l) return 1;
      var E = Math.trunc(s6 / u6), v6 = s6 - E * u6, x6 = Math.min(v6 / n._duration, 1);
      return x6 === 0 && s6 === n._duration ? 1 : x6;
    }, d = c(), f = this._easingFunction(d);
    if (this._updateProperties(this._object, this._valuesStart, this._valuesEnd, f), this._onUpdateCallback && this._onUpdateCallback(this._object, d), this._duration === 0 || s6 >= this._duration) if (this._repeat > 0) {
      var h = Math.min(Math.trunc((s6 - this._duration) / u6) + 1, this._repeat);
      isFinite(this._repeat) && (this._repeat -= h);
      for (i in this._valuesStartRepeat) !this._yoyo && typeof this._valuesEnd[i] == "string" && (this._valuesStartRepeat[i] = this._valuesStartRepeat[i] + parseFloat(this._valuesEnd[i])), this._yoyo && this._swapEndStartRepeatValues(i), this._valuesStart[i] = this._valuesStartRepeat[i];
      return this._yoyo && (this._reversed = !this._reversed), this._startTime += u6 * h, this._onRepeatCallback && this._onRepeatCallback(this._object), this._onEveryStartCallbackFired = false, true;
    } else {
      this._onCompleteCallback && this._onCompleteCallback(this._object);
      for (var b = 0, I = this._chainedTweens.length; b < I; b++) this._chainedTweens[b].start(this._startTime + this._duration, false);
      return this._isPlaying = false, false;
    }
    return true;
  }, e6.prototype._updateProperties = function(r6, t6, n, o) {
    for (var i in n) if (t6[i] !== void 0) {
      var s6 = t6[i] || 0, u6 = n[i], l = Array.isArray(r6[i]), c = Array.isArray(u6), d = !l && c;
      d ? r6[i] = this._interpolationFunction(u6, o) : typeof u6 == "object" && u6 ? this._updateProperties(r6[i], s6, u6, o) : (u6 = this._handleRelativeValue(s6, u6), typeof u6 == "number" && (r6[i] = s6 + (u6 - s6) * o));
    }
  }, e6.prototype._handleRelativeValue = function(r6, t6) {
    return typeof t6 != "string" ? t6 : t6.charAt(0) === "+" || t6.charAt(0) === "-" ? r6 + parseFloat(t6) : parseFloat(t6);
  }, e6.prototype._swapEndStartRepeatValues = function(r6) {
    var t6 = this._valuesStartRepeat[r6], n = this._valuesEnd[r6];
    typeof n == "string" ? this._valuesStartRepeat[r6] = this._valuesStartRepeat[r6] + parseFloat(n) : this._valuesStartRepeat[r6] = this._valuesEnd[r6], this._valuesEnd[r6] = t6;
  }, e6.autoStartOnUpdate = false, e6;
})();
var w7e = fM.nextId;
var va = y2;
var F7e = va.getAll.bind(va);
var M7e = va.removeAll.bind(va);
var A7e = va.add.bind(va);
var O7e = va.remove.bind(va);
var B7e = va.update.bind(va);
$i();
$i();
$i();
var hM = (e6, r6) => (r6 - e6 + Math.PI) % (Math.PI * 2) + Math.PI * 2 % (Math.PI * 2) - Math.PI;
var gM = (e6, r6) => new at(e6.clientX - r6.offsetLeft, e6.clientY - r6.offsetTop);
var b2 = (e6, r6) => Math.atan2(r6.y - e6.y, r6.x - e6.x);
var Jf = (e6, r6) => Math.sqrt((r6.y - e6.y) ** 2 + (r6.x - e6.x) ** 2);
var v2 = (e6, r6) => new at((e6.x + r6.x) / 2, (e6.y + r6.y) / 2);
var x2 = (e6) => {
  let r6 = 0, { wheelDelta: t6, detail: n } = e6;
  return t6 !== void 0 ? r6 = t6 : n !== void 0 && (r6 = -n), r6;
};
var F1 = class {
  constructor(r6, t6) {
    t(this, "input1");
    t(this, "input2");
    t(this, "lastAngle");
    t(this, "lastDistance");
    t(this, "totalDistance");
    t(this, "first");
    t(this, "second");
    this.input1 = r6, this.input2 = t6, this.lastAngle = b2(r6, t6), this.lastDistance = Jf(r6, t6), this.totalDistance = 0, this.first = r6, this.second = t6;
  }
  update(r6, t6) {
    let n = Jf(r6, t6);
    this.input1 = r6, this.input2 = t6;
    let o = b2(r6, t6);
    this.lastAngle = o, this.lastDistance = n, this.totalDistance += (Jf(this.first, r6) + Jf(this.second, t6)) / 2, this.first = v2(this.first, r6), this.second = v2(this.second, t6);
  }
};
$i();
var Yf = class {
  constructor(r6, t6, n) {
    t(this, "touch");
    t(this, "camera");
    t(this, "cameraPlane");
    t(this, "viewCoordinate");
    t(this, "snapHolderMatrix");
    t(this, "snapCamera");
    t(this, "cameraPosition");
    t(this, "raycaster");
    t(this, "worldCoordinate");
    t(this, "snapshotted", false);
    this.touch = r6, this.camera = t6, this.cameraPlane = n, this.viewCoordinate = { x: r6.x, y: r6.y }, this.camera.updateMatrixWorld(), this.camera.updateMatrix(), this.snapHolderMatrix = this.camera.matrixWorld.clone(), this.snapCamera = this.camera.clone(), this.snapshotCameraState();
  }
  snapshotCameraState() {
    this.camera.updateMatrix(), this.camera.updateMatrixWorld(), this.cameraPosition = this.camera.position.clone();
    let r6 = new at(this.viewCoordinate.x, this.viewCoordinate.y);
    this.raycaster = this.raycaster || new El(), this.raycaster.setFromCamera(r6, this.snapCamera);
    let t6 = this.raycaster.intersectObject(this.cameraPlane, true);
    this.worldCoordinate = t6 && t6.length > 0 ? t6[0].point : null, this.snapshotted = true;
  }
  updateAnchorState(r6, t6) {
    this.camera = r6, this.snapCamera = r6.clone(), this.snapHolderMatrix = r6.matrixWorld.clone(), this.updateViewCoordinate(t6), this.snapshotCameraState();
  }
  updateViewCoordinate(r6) {
    this.viewCoordinate = { x: r6.x, y: r6.y };
  }
  reUnproject() {
    let r6 = new at(this.viewCoordinate.x, this.viewCoordinate.y);
    this.raycaster?.setFromCamera(r6, this.snapCamera);
    let t6 = this.raycaster?.intersectObject(this.cameraPlane, true)[0];
    return t6 ? t6.point : void 0;
  }
};
var Ei = {};
r(Ei, { BLOCK_MERCATOR_ZOOM_LEVEL: () => pV, CLIPPING_RADIUS: () => Kf, CONTROL_OPTIONS: () => cV, DEFAULT_ANIMATION_DURATION: () => D2, DEFAULT_BEARING: () => gV, DEFAULT_MAX_ZOOM_LEVEL: () => fV, DEFAULT_MIN_ZOOM_LEVEL: () => T2, DEFAULT_PITCH: () => hV, DEFAULT_ZOOM_LEVEL: () => mV, EVENTS: () => B1, MAPLIBRE_TILE_SIZE: () => M1, MAX_LAT: () => E2, MAX_MERCATOR_ZOOM_LEVEL: () => O1, MIN_LAT: () => I2, MIN_MERCATOR_ZOOM_LEVEL: () => A1, ROOM_MERCATOR_ZOOM_LEVEL: () => dV, TWO_PI: () => C2, WHEEL_ZOOM_MULTIPLIER: () => S2, ZRANGE: () => Td });
$i();
var M1 = 512;
var I2 = -85.051129;
var E2 = 85.051129;
var Kf = 1e4;
var cV = { chain: "chain", cancel: "cancel" };
var C2 = Math.PI * 2;
var Td = 100;
var S2 = 1e4;
var A1 = 0;
var O1 = 24;
var pV = 17;
var dV = 20;
var D2 = 200;
var B1 = ["change", "pan-start", "pan-end", "rotate-start", "rotate-end", "zoom-start", "zoom-end", "multi-start", "multi-end", "multi-cancel", "pedestal-start", "pedestal-change", "pedestal-end", "user-pan-start", "user-pedestal-start", "user-rotate-start", "user-dolly-start", "user-zoom-start", "user-tilt-start", "user-pan-end", "user-pedestal-end", "user-rotate-end", "user-dolly-end", "user-zoom-end", "user-tilt-end", "position-updated", "zoom-updated", "tilt-updated", "rotation-updated"];
var mV = 18;
var T2 = 12;
var fV = 22;
var hV = 0;
var gV = 0;
var P1 = false;
var yV = false;
var k1;
var Ul = class extends Ka {
  constructor(t6, n, o, i, s6) {
    super();
    t(this, "dirty", false);
    t(this, "zoomDirty", false);
    t(this, "rotationDirty", false);
    t(this, "panDirty", false);
    t(this, "stateDirty", false);
    v(this, k1, T2);
    t(this, "zoomSpeed", 5);
    t(this, "rotateSpeed", 100);
    t(this, "enabled", true);
    t(this, "enableZoom", true);
    t(this, "enablePan", true);
    t(this, "enablePedestal", false);
    t(this, "maxPedestal", 1 / 0);
    t(this, "minPedestal", 0);
    t(this, "enableRotate", true);
    t(this, "minZoomAltitude", 0);
    t(this, "maxZoomAltitude", 1 / 0);
    t(this, "ignoreZoomLimits", false);
    t(this, "zoomFactor", 1);
    t(this, "panBounds", { min: new C(1 / 0, 1 / 0), max: new C(-1 / 0, -1 / 0), center: new C(0, 0, 0), radius: 1 / 0 });
    t(this, "minTilt", 0);
    t(this, "maxTilt", 1.2);
    t(this, "MOUSE_BUTTONS", { ORBIT: Ju.RIGHT, ZOOM: Ju.MIDDLE, PAN: Ju.LEFT });
    t(this, "camera");
    t(this, "scene");
    t(this, "renderer");
    t(this, "elevation");
    t(this, "orbit");
    t(this, "cameraPlane");
    t(this, "raycaster", new El());
    t(this, "rendererState");
    t(this, "options");
    t(this, "state", -1);
    t(this, "intersection");
    t(this, "viewState", null);
    t(this, "tweens", /* @__PURE__ */ new Map());
    t(this, "clock", new Sl(true));
    t(this, "coords", { mouse: new at(), rotateStart: new at(), rotateEnd: new at(), rotateDelta: new at(), panStart: new C(), panCameraStart: new C(), panEnd: new C(), panDelta: new C(), initialShiftPos: new at(), initialPedestal: 0, floorAnchor: new C() });
    t(this, "touch", { origin: { offsetLeft: 0, offsetTop: 0 }, touches: [], anchor1: null, anchor2: null, inputs: null });
    t(this, "scrollTimer", null);
    t(this, "lastWheelTime", 0);
    t(this, "resetZoom", false);
    t(this, "zoomStart");
    t(this, "pedestalScaleFactor", 1);
    t(this, "isUserZooming", false);
    t(this, "stayInsideBounds", true);
    t(this, "userInteracting", false);
    t(this, "cameraMoving", false);
    t(this, "lastCameraMoveTime", Date.now());
    t(this, "raycastToFloor", (t10) => {
      this.raycaster.setFromCamera(t10, this.camera);
      let n6 = this.raycaster.intersectObject(this.cameraPlane, false)[0];
      return n6 ? n6.point : new C();
    });
    t(this, "isUserInteracting", () => this.userInteracting);
    t(this, "getPosition", () => new C(this.orbit.position.x, this.orbit.position.y, this.orbit.position.z));
    t(this, "getPedestal", () => this.orbit.position.z);
    t(this, "pan", (t10, n6) => {
      isNaN(t10) || isNaN(n6) || (this.setPosition(this.orbit.position.x + t10, this.orbit.position.y + n6), this.publish("position-updated"));
    });
    t(this, "postRender", () => {
      (this.state === 2 || this.state === 6) && (this.raycaster.setFromCamera(this.coords.mouse, this.camera), this.intersection = this.raycaster.intersectObject(this.cameraPlane, false)[0], this.intersection && (this.coords.panStart.set(this.intersection.point.x, this.intersection.point.y, 0), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0))), this.state === 3 && this.resetZoom && (this.resetZoom = false, this.zoomStart = this.getZoomAltitude(), this.coords.floorAnchor = this.raycastToFloor(this.coords.mouse), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0)), this.state === 7 && this.isAnimating === false && (this.state = -1, this.publish("multi-end"));
    });
    t(this, "isCameraMoving", () => this.cameraMoving);
    t(this, "lastCameraStoppedMovingTime", () => this.lastCameraMoveTime);
    t(this, "setPosition", (t10, n6) => {
      t10 === void 0 || n6 === void 0 || isNaN(t10) || isNaN(n6) || (this.state === -1 && this.publish("pan-start"), this.updateCameraPosition(t10, n6), this.publish("position-updated"), this.publish("change"), this.state === -1 && this.publish("pan-end"), this.dirty = true, this.stateDirty = true);
    });
    t(this, "updateCameraPosition", (t10, n6) => {
      let o6 = t10 - this.panBounds.center.x, i6 = n6 - this.panBounds.center.y, s8 = Math.sqrt(o6 * o6 + i6 * i6);
      if (this.stayInsideBounds && s8 > this.panBounds.radius) {
        let u6 = Math.atan2(i6, o6), l = { x: Math.cos(u6) * this.panBounds.radius + this.panBounds.center.x, y: Math.sin(u6) * this.panBounds.radius + this.panBounds.center.y };
        this.orbit.position.x = l.x, this.orbit.position.y = l.y;
      } else this.orbit.position.x = t10, this.orbit.position.y = n6;
    });
    t(this, "tilt", (t10) => {
      if (isNaN(t10)) return;
      this.state === -1 && this.publish("rotate-start");
      let n6 = this.stayInsideBounds ? Math.max(Math.min(t10 + this.getTilt(), this.maxTilt), this.minTilt) : t10 + this.getTilt();
      n6 !== this.elevation.rotation.x && (this.elevation.rotation.x = n6, this.publish("tilt-updated")), this.publish("change"), this.state === -1 && this.publish("rotate-end"), this.stateDirty = true;
    });
    t(this, "zoomIn", (t10, n6, o6) => {
      let i6 = this.getZoomAltitude();
      this.animateCamera({ zoom: i6 / 1.5 }, t10, n6, o6);
    });
    t(this, "zoomOut", (t10, n6, o6) => {
      let i6 = this.getZoomAltitude();
      this.animateCamera({ zoom: i6 * 1.5 }, t10, n6, o6);
    });
    t(this, "getRotation", () => (-this.orbit.rotation.z + Math.PI * 2) % (Math.PI * 2));
    t(this, "cancelAnimation", () => {
      let t10 = Array.from(this.tweens.keys());
      if (t10.length < 1) return;
      let n6 = t10[t10.length - 1];
      n6.state === 7 && this.publish("multi-cancel", { zooming: true, rotating: true, tilting: true }), this.completeTween(n6);
    });
    t(this, "animateCamera", (t10, n6, o6, i6, s8, u6) => {
      let l = { interruptible: true, ...u6 }, c = {}, d = {}, f = this.getPosition();
      if (t10.position != null && (t10.position.x !== void 0 && (c.x = f.x, d.x = t10.position.x), t10.position.y !== void 0 && (c.y = f.y, d.y = t10.position.y), t10.position.z !== void 0 && (c.z = f.z, d.z = t10.position.z)), t10.zoom !== void 0 && (c.zoom = this.stayInsideBounds ? Math.min(Math.max(this.getZoomAltitude(), this.getZoomScaledMin()), this.getZoomScaledMax()) : this.getZoomAltitude(), this.viewState === "multi_floor" || !this.stayInsideBounds ? d.zoom = t10.zoom : d.zoom = Math.min(Math.max(t10.zoom, this.getZoomScaledMin()), this.getZoomScaledMax())), t10.rotation !== void 0) {
        let { start: w6, end: S } = C5(this.getRotation(), t10.rotation);
        c.rotation = w6, d.rotation = S;
      }
      t10.tilt !== void 0 && (c.tilt = this.getTilt(), this.viewState === "multi_floor" || !this.stayInsideBounds ? d.tilt = t10.tilt : d.tilt = Math.max(Math.min(t10.tilt, this.maxTilt), this.minTilt));
      let h = c.zoom !== d.zoom, b = c.rotation !== d.rotation, I = c.tilt !== d.tilt, E = new Ii(c).to(d, yc.env.TESTING ? 0 : n6).onUpdate((w6) => {
        this.setMulti({ x: w6.x, y: w6.y, z: w6.z }, w6.zoom, w6.rotation, w6.tilt);
      }).onComplete(() => {
        this.completeTween(E), this.publish("multi-end", { zooming: h, rotating: b, tilting: I }), i6 && i6();
      }).onStart(() => {
        this.state !== 7 && (this.state = 7, E.state = 7, this.publish("multi-start", { zooming: h, rotating: b, tilting: I })), this.publish("change");
      });
      this.rendererState.internalTweenGroup.add(E);
      let v6 = Array.from(this.tweens.entries()), x6 = v6[v6.length - 1], D = false;
      return x6 != null && (x6[1].interruptible ? (typeof x6[1].cancelledCallback == "function" && x6[1].cancelledCallback(), this.completeTween(x6[0])) : (D = true, x6[0].chain(E))), this.tweens.set(E, { cancelledCallback: s8, interruptible: l.interruptible }), o6 ? E.easing(o6) : E.easing(zo.Quadratic.In), !t10.doNotAutoStart && !D && (E.start(), this.publish("change")), E.cameraAnimation = true, E;
    });
    t(this, "setMulti", (t10, n6, o6, i6, s8 = true) => {
      this.state === -1 && this.publish("multi-start");
      let u6 = false;
      t10 != null && (t10.x !== void 0 && !isNaN(t10.x) && t10.y !== void 0 && !isNaN(t10.y) && (this.updateCameraPosition(t10.x, t10.y), u6 = true), t10.z !== void 0 && !isNaN(t10.z) && (this.setPedestal(t10.z, true, false), u6 = true)), u6 && this.publish("position-updated");
      let l = { zooming: false, tilting: !!n6, rotating: false };
      if (n6 !== void 0 && !isNaN(n6)) {
        let c = this.stayInsideBounds ? Math.min(Math.max(n6, this.getZoomScaledMin()), this.getZoomScaledMax()) : n6;
        c !== this.camera.position.z && (l.zooming = true, this.camera.position.z = c, this.publish("zoom-updated"), this.zoomDirty = true, this.viewState === "multi_floor" ? n6 > Kf && (this.camera.near = n6 - Kf, this.camera.far = n6 + Kf) : (this.camera.near = n6 / Td, this.camera.far = n6 * Td), this.camera.updateProjectionMatrix());
      }
      if (o6 !== void 0 && !isNaN(o6) && o6 !== this.getRotation() && (l.rotating = true, this.orbit.rotation.z = -o6, this.publish("rotation-updated")), i6 !== void 0 && !isNaN(i6)) {
        let c = this.stayInsideBounds ? Math.max(Math.min(i6, this.maxTilt), this.minTilt) : i6;
        c !== this.elevation.rotation.x && (l.tilting = true, this.elevation.rotation.x = c, this.publish("tilt-updated"));
      }
      s8 && this.publish("change"), this.state === -1 && this.publish("multi-end", l), this.stateDirty = true;
    });
    t(this, "getZoomScaledMin", () => this.minZoomAltitude * this.zoomFactor);
    t(this, "getZoomScaledMax", () => {
      let t10 = this.minZoomAltitude * this.zoomFactor;
      return Math.max(this.maxZoomAltitude, t10);
    });
    t(this, "setRotation", (t10, n6) => {
      if (isNaN(t10)) return;
      this.state === -1 && !n6 && this.publish("rotate-start");
      let o6 = -(t10 % C2);
      o6 !== this.orbit.rotation.z && (this.orbit.rotation.z = o6, n6 || this.publish("rotation-updated")), n6 || this.publish("change"), this.state === -1 && !n6 && this.publish("rotate-end"), this.dirty = true, this.rotationDirty = true, n6 || (this.stateDirty = true);
    });
    t(this, "setZoomAltitude", (t10) => {
      if (isNaN(t10)) return;
      this.state === -1 && this.publish("zoom-start");
      let n6 = this.stayInsideBounds ? Math.min(Math.max(t10, this.getZoomScaledMin()), this.getZoomScaledMax()) : t10;
      n6 !== this.camera.position.z && (this.camera.position.z = n6, this.publish("zoom-updated"), this.zoomDirty = true), this.camera.near = n6 / Td, this.camera.far = n6 * Td, this.camera.updateProjectionMatrix(), this.publish("change"), this.state === -1 && this.publish("zoom-end"), this.dirty = true, this.stateDirty = true;
    });
    t(this, "setZoomLevel", (t10) => {
      this.setZoomAltitude(this.convertZoomLevelToAltitude(t10));
    });
    t(this, "getZoomAltitude", () => this.camera.position.z);
    t(this, "getZoomLevel", () => this.convertAltitudeToZoomLevel(this.getZoomAltitude()));
    t(this, "setTilt", (t10, n6) => {
      if (isNaN(t10)) return;
      this.state === -1 && !n6 && this.publish("rotate-start");
      let o6 = this.stayInsideBounds ? Math.max(Math.min(t10, this.maxTilt), this.minTilt) : t10;
      o6 !== this.elevation.rotation.x && (this.elevation.rotation.x = o6, n6 || this.publish("tilt-updated")), n6 || this.publish("change"), this.state === -1 && !n6 && this.publish("rotate-end"), this.dirty = true, n6 || (this.stateDirty = true);
    });
    t(this, "getTilt", () => this.elevation.rotation.x);
    t(this, "setCameraPlaneElevation", (t10) => {
      this.cameraPlane.position.z = t10;
    });
    t(this, "zoom", (t10) => {
      if (isNaN(t10)) return;
      this.state === -1 && this.publish("zoom-start");
      let n6 = this.getZoomAltitude() - t10;
      this.camera.position.z = this.stayInsideBounds ? Math.min(Math.max(n6, this.minZoomAltitude * this.zoomFactor), this.maxZoomAltitude * this.zoomFactor) : n6, this.publish("zoom-updated"), this.zoomDirty = true, this.publish("change"), this.state === -1 && this.publish("zoom-end"), this.stateDirty = true;
    });
    t(this, "getProjectionScaleFactor", (t10, n6, o6) => wwe(t10, n6, o6));
    t(this, "update", () => {
      this.orbit.updateMatrixWorld(), this.lastWheelTime > 0 && this.state === 3 && this.clock.getElapsedTime() - this.lastWheelTime > 0.2 && (this.lastWheelTime = 0, this.state = -1, this.publish("zoom-end"), this.removeMouseMoveEventListeners());
    });
    t(this, "setPedestal", (t10, n6 = false, o6 = true) => {
      typeof t10 == "number" && !isNaN(t10) && (this.orbit.position.z = t10, n6 && (this.publishPedestalChangeEvent(t10), this.publish("pedestal-change", { pedestal: t10 })), this.publish("change"), this.dirty = true, o6 && (this.stateDirty = true));
    });
    t(this, "dispose", () => {
      for (let t10 of B1) t10.endsWith("start") ? (this.off(t10, this.setCameraMoving), t10.startsWith("user") && this.off(t10, this.setUserInteracting)) : (t10.endsWith("end") || t10.endsWith("cancel")) && (this.off(t10, this.unsetCameraMoving), t10.startsWith("user") && this.off(t10, this.unsetUserInteracting));
      this.removeEventListeners(), this.scene.remove(this.cameraPlane), this.destroy();
    });
    t(this, "createCameraPlane", () => {
      let t10 = P1 ? 2e3 : 1e10, n6 = P1 ? 100 : 1, o6 = new Ls(t10, t10, n6, n6), i6 = new ps({ color: 0, wireframe: P1, visible: P1 }), s8 = new ve(o6, i6);
      return this.scene.add(s8), s8;
    });
    t(this, "addEventListeners", () => {
      let { domElement: t10 } = this.renderer;
      for (let n6 of B1) n6.endsWith("start") ? (this.on(n6, this.setCameraMoving), n6.startsWith("user") && this.on(n6, this.setUserInteracting)) : (n6.endsWith("end") || n6.endsWith("cancel")) && (this.on(n6, this.unsetCameraMoving), n6.startsWith("user") && this.on(n6, this.unsetUserInteracting));
      t10.addEventListener("contextmenu", this.onContextMenu, false), t10.addEventListener("mousedown", this.onMouseDown, false), t10.addEventListener("wheel", this.onMouseWheel, { passive: false }), t10.addEventListener("touchstart", this.onTouchStart, false), t10.addEventListener("touchend", this.onTouchEnd, false), t10.addEventListener("touchmove", this.onTouchMove, false);
    });
    t(this, "addMouseEventListeners", () => {
      this.addMouseMoveEventListeners(), window.addEventListener("mouseup", this.onMouseUp, false), window.addEventListener("mouseout", this.onMouseUp, false);
    });
    t(this, "addMouseMoveEventListeners", () => {
      this.renderer.domElement.addEventListener("mousemove", this.onMouseMove, false);
    });
    t(this, "removeMouseMoveEventListeners", () => {
      this.renderer.domElement.removeEventListener("mousemove", this.onMouseMove, false);
    });
    t(this, "removeEventListeners", () => {
      let { domElement: t10 } = this.renderer;
      t10.removeEventListener("contextmenu", this.onContextMenu, false), t10.removeEventListener("mousedown", this.onMouseDown, false), t10.removeEventListener("wheel", this.onMouseWheel, false), t10.removeEventListener("touchstart", this.onTouchStart, false), t10.removeEventListener("touchend", this.onTouchEnd, false), t10.removeEventListener("touchmove", this.onTouchMove, false), t10.removeEventListener("mousemove", this.onMouseMove, false), window.removeEventListener("mouseup", this.onMouseUp, false), window.removeEventListener("mouseout", this.onMouseUp, false);
    });
    t(this, "removeMouseUpEventListeners", () => {
      this.renderer.domElement.removeEventListener("mousemove", this.onMouseMove, false), window.removeEventListener("mouseup", this.onMouseUp, false), window.removeEventListener("mouseout", this.onMouseUp, false);
    });
    t(this, "onContextMenu", (t10) => {
      t10.preventDefault();
    });
    t(this, "onMouseUp", () => {
      if (this.enabled !== false) {
        switch (this.removeMouseUpEventListeners(), this.state) {
          case 2:
            this.publish("pan-end"), this.publish("user-pan-end");
            break;
          case 1:
            this.publish("zoom-end"), this.publish("user-dolly-end");
            break;
          case 0:
            this.publish("rotate-end"), this.publish("user-rotate-end");
            break;
          case 8:
            this.publish("pedestal-end"), this.publish("user-pedestal-end");
            break;
        }
        this.state = -1, this.panDirty = false;
      }
    });
    t(this, "onMouseMove", (t10) => {
      if (this.enabled !== false) if (t10.preventDefault(), this.mouseToScene(t10), this.state === 0) {
        if (this.enableRotate === false) return;
        this.handleMouseMoveRotate(t10);
      } else if (this.state === 2) {
        if (this.enablePan === false) return;
        this.handleMouseMovePan();
      } else this.state === 3 ? (this.resetZoom = true, this.state = -1) : this.state === 8 && this.handleMouseMovePedestal(t10);
    });
    t(this, "onTouchStart", (t10) => {
      if (this.enabled !== false) {
        switch (this.updateTouchOrigin(), this.touchToScene(t10), t10.touches.length) {
          case 1:
            this.enablePedestal ? (this.handleTouchStartPedestal(t10), this.state = 9) : this.enablePan && (this.handleTouchStartPan(t10), this.state = 6);
            break;
          case 2:
            this.touch.inputs = new F1(this.touch.touches[0], this.touch.touches[1]);
            break;
          default:
            this.state = -1;
        }
        this.state;
      }
    });
    t(this, "onTouchMove", (t10) => {
      if (this.enabled !== false) switch (this.touchToScene(t10), t10.touches.length) {
        case 2:
          t10.preventDefault(), t10.stopPropagation();
          let n6 = { ...this.touch.inputs.first }, o6 = { ...this.touch.inputs.second }, i6 = new at(this.touch.touches[0].x, this.touch.touches[0].y), s8 = new at(this.touch.touches[1].x, this.touch.touches[1].y);
          if (this.touch.inputs.update(this.touch.touches[0], this.touch.touches[1]), this.enableRotate && this.state === 4) this.handleTouchMoveTilt(t10);
          else if (this.state === 5) this.handleTouchMoveDolly();
          else if (this.state !== 5 && this.touch.inputs.totalDistance > 0.05) {
            let u6 = n6.y < i6.y && o6.y < s8.y, l = n6.y > i6.y && o6.y > s8.y;
            this.enableRotate && this.state !== 4 && (l || u6) ? (this.handleTouchStartTilt(t10), this.state = 4) : (this.handleTouchStartDolly(), this.state = 5);
          }
          break;
        case 1:
          (this.enablePedestal || this.enablePan) && (t10.preventDefault(), t10.stopPropagation()), this.enablePedestal && this.state === 9 ? this.handleTouchMovePedestal(t10) : this.enablePan && this.state === 6 && this.handleTouchMovePan(t10);
          break;
        default:
          this.state = -1;
      }
    });
    t(this, "onTouchEnd", (t10) => {
      if (this.enabled !== false) {
        switch (this.handleTouchEnd(), this.state) {
          case 2:
          case 6:
            this.publish("user-pan-end");
            break;
          case 4:
            this.publish("pan-end"), this.publish("user-tilt-end");
            break;
          case 1:
          case 5:
            this.publish("zoom-end"), this.publish("user-dolly-end");
            break;
          case 0:
            this.publish("rotate-end"), this.publish("user-rotate-end");
            break;
          case 8:
          case 9:
            this.publish("pedestal-end"), this.publish("user-pedestal-end");
            break;
        }
        t10.touches.length ? this.onTouchStart(t10) : this.state = -1;
      }
    });
    t(this, "handleTouchMovePan", (t10) => {
      let n6 = Object.hasOwn(t10, "x") ? new at(t10.x, t10.y) : this.touch.touches[0], o6 = this.raycastToFloor(n6);
      this.coords.panEnd.set(o6.x, o6.y, 0), this.coords.panDelta.subVectors(this.coords.panEnd, this.coords.panStart), this.setPosition(this.coords.panCameraStart.x - this.coords.panDelta.x, this.coords.panCameraStart.y - this.coords.panDelta.y), this.publish("change"), this.panDirty = true;
    });
    t(this, "handleTouchStartDolly", () => {
      let t10 = this.touch.touches[0].x - this.touch.touches[1].x, n6 = this.touch.touches[0].y - this.touch.touches[1].y;
      this.zoomStart = this.getZoomAltitude();
      let o6 = new at(this.touch.touches[0].x - t10 / 2, this.touch.touches[0].y - n6 / 2);
      this.coords.floorAnchor = this.raycastToFloor(o6), this.orbit.updateMatrixWorld(), this.touch.anchor1 = new Yf(this.touch.touches[0], this.camera, this.cameraPlane), this.touch.anchor2 = new Yf(this.touch.touches[1], this.camera, this.cameraPlane), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0), this.publish("user-dolly-start"), this.publish("zoom-start"), this.publish("multi-start");
    });
    t(this, "handleMouseMovePan", () => {
      let t10 = this.raycastToFloor(this.coords.mouse);
      this.coords.panEnd.set(t10.x, t10.y, 0), this.coords.panDelta.subVectors(this.coords.panEnd, this.coords.panStart), this.setPosition(this.coords.panCameraStart.x - this.coords.panDelta.x, this.coords.panCameraStart.y - this.coords.panDelta.y), this.publish("change"), this.panDirty = true;
    });
    t(this, "handleTouchStartTilt", (t10) => {
      this.coords.rotateStart.set(t10.touches[1].clientX, t10.touches[1].clientY), this.publish("user-tilt-start"), this.publish("rotate-start");
    });
    t(this, "handleTouchMovePedestal", (t10) => {
      this.handleMouseMovePedestal(t10.touches[0]);
    });
    t(this, "handleTouchMoveTilt", (t10) => {
      this.coords.rotateEnd.set(t10.touches[1].clientX, t10.touches[1].clientY), this.coords.rotateDelta.subVectors(this.coords.rotateEnd, this.coords.rotateStart), this.setTilt(this.getTilt() - this.coords.rotateDelta.y / this.rotateSpeed), this.coords.rotateStart.copy(this.coords.rotateEnd);
    });
    t(this, "handleTouchMoveDolly", () => {
      let t10 = this.touch.inputs.first, n6 = this.touch.inputs.second;
      this.touch.anchor1.viewCoordinate = { x: t10.x, y: t10.y }, this.touch.anchor2.viewCoordinate = { x: n6.x, y: n6.y };
      let o6 = this.makeTransformFromTouchAnchors(this.touch.anchor1, this.touch.anchor2);
      o6 && this.setCameraFromTransformMatrix(o6), this.orbit.updateMatrixWorld(), this.touch.anchor1.updateAnchorState(this.camera, t10), this.touch.anchor2.updateAnchorState(this.camera, n6);
    });
    t(this, "handleTouchEnd", () => {
      this.state === 4 || this.state === 5 ? this.publish("multi-end") : this.state === 6 && this.publish("pan-end"), this.panDirty = false;
    });
    t(this, "handleTouchStartPan", (t10) => {
      let n6 = Object.hasOwn(t10, "x") ? new at(t10.x, t10.y) : this.touch.touches[0], o6 = this.raycastToFloor(n6);
      this.coords.panStart.set(o6.x, o6.y, 0), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0), this.publish("user-pan-start"), this.publish("pan-start");
    });
    t(this, "handleTouchStartPedestal", (t10) => {
      this.handleMouseDownPedestal(t10.touches[0]);
    });
    t(this, "onMouseDown", (t10) => {
      if (this.enabled !== false) {
        if (this.mouseToScene(t10), t10.preventDefault(), this.state === 3 && this.publish("zoom-end"), t10.button === this.MOUSE_BUTTONS.ORBIT) {
          if (this.enableRotate === false) return;
          this.handleMouseDownRotate(t10), this.state = 0;
        } else t10.button === this.MOUSE_BUTTONS.PAN && (this.enablePan ? (this.handleMouseDownPan(), this.state = 2) : this.enablePedestal && (this.handleMouseDownPedestal(t10), this.state = 8));
        this.state !== -1 && this.addMouseEventListeners();
      }
    });
    t(this, "onMouseWheel", (t10) => {
      this.enabled === false || this.enableZoom === false || this.state !== -1 && this.state !== 3 || (t10.preventDefault(), t10.stopPropagation(), this.mouseToScene(t10), this.canScrollZoom(t10) && (this.lastWheelTime = this.clock.getElapsedTime(), this.publishUserZoomEvent()), this.state !== 3 && this.canScrollZoom(t10) && (this.addMouseMoveEventListeners(), this.state = 3, this.zoomStart = this.getZoomAltitude(), this.coords.floorAnchor = this.raycastToFloor(this.coords.mouse), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0), this.publish("zoom-start")), this.scrollTimer != null && clearTimeout(this.scrollTimer), this.scrollTimer = setTimeout(() => {
        this.publish("zoom-end");
      }, 50), this.handleMouseWheel(t10));
    });
    t(this, "handleMouseWheel", (t10) => {
      if (this.publish("zoom-start"), !this.canScrollZoom(t10)) {
        this.lastWheelTime > 0 && this.publish("zoom-end"), this.lastWheelTime = 0, this.state = -1;
        return;
      }
      let n6 = this.getZoomAltitude(), o6 = n6 - x2(t10) * n6 / S2 * this.zoomSpeed;
      if (this.setZoomAltitude(o6), this.enablePan) {
        let i6 = o6 / this.zoomStart;
        this.coords.panDelta.subVectors(this.coords.floorAnchor, this.coords.panCameraStart).multiplyScalar(1 - i6), this.setPosition(this.coords.panCameraStart.x + this.coords.panDelta.x, this.coords.panCameraStart.y + this.coords.panDelta.y);
      }
      this.publish("change");
    });
    t(this, "setCameraFromTransformMatrix", (t10) => {
      this.orbit.updateMatrixWorld();
      let n6 = new Ye();
      n6.setFromRotationMatrix(t10, "ZYX");
      let o6 = (t10.elements[14] - this.cameraPlane.position.z) / Math.cos(n6.x), i6 = n6.z, s8 = new C(0, 0, 1);
      s8.applyEuler(n6), s8.setLength(o6);
      let u6 = new C();
      u6.setFromMatrixPosition(t10), u6.sub(s8), this.enablePan && this.setPosition(u6.x, u6.y), this.enableZoom && this.setZoomAltitude(o6), this.enableRotate && this.setRotation(-i6);
    });
    t(this, "makeTransformFromTouchAnchors", (t10, n6) => {
      this.orbit.updateMatrixWorld(), this.camera.updateProjectionMatrix();
      let o6 = this.camera.projectionMatrix.clone(), i6 = t10.worldCoordinate, s8 = n6.worldCoordinate, u6 = t10.reUnproject(), l = n6.reUnproject();
      if (!u6 || !l || !i6 || !s8) return null;
      let c = t10.viewCoordinate, d = n6.viewCoordinate, f = s8.x - i6.x, h = s8.y - i6.y, b = Math.atan2(h, f), I = l.x - u6.x, E = l.y - u6.y, v6 = Math.atan2(E, I), x6 = hM(b, v6), D = new kt();
      D.makeRotationZ(-x6);
      let w6 = D.clone();
      w6.multiply(t10.snapHolderMatrix);
      let S = (mh, mc, fc) => mh.elements[(mc - 1) * 4 + fc - 1], F = S(o6, 1, 1) * S(w6, 1, 1) - c.x * S(o6, 3, 4) * S(w6, 3, 1), P = S(o6, 1, 1) * S(w6, 1, 2) - c.x * S(o6, 3, 4) * S(w6, 3, 2), L = S(o6, 1, 1) * S(w6, 1, 3) - c.x * S(o6, 3, 4) * S(w6, 3, 3), N = i6.x * F + i6.y * P + i6.z * L, $ = S(o6, 2, 2) * S(w6, 2, 1) - c.y * S(o6, 3, 4) * S(w6, 3, 1), W = S(o6, 2, 2) * S(w6, 2, 2) - c.y * S(o6, 3, 4) * S(w6, 3, 2), V = S(o6, 2, 2) * S(w6, 2, 3) - c.y * S(o6, 3, 4) * S(w6, 3, 3), q4 = i6.x * $ + i6.y * W + i6.z * V, se = S(o6, 1, 1) * S(w6, 1, 1) - d.x * S(o6, 3, 4) * S(w6, 3, 1), ue = S(o6, 1, 1) * S(w6, 1, 2) - d.x * S(o6, 3, 4) * S(w6, 3, 2), ce = S(o6, 1, 1) * S(w6, 1, 3) - d.x * S(o6, 3, 4) * S(w6, 3, 3), de2 = s8.x * se + s8.y * ue + s8.z * ce, Ee2 = S(o6, 2, 2) * S(w6, 2, 1) - d.y * S(o6, 3, 4) * S(w6, 3, 1), he = S(o6, 2, 2) * S(w6, 2, 2) - d.y * S(o6, 3, 4) * S(w6, 3, 2), ne = S(o6, 2, 2) * S(w6, 2, 3) - d.y * S(o6, 3, 4) * S(w6, 3, 3), Ce = s8.x * Ee2 + s8.y * he + s8.z * ne, xe3 = Math.abs(se - F), Re = Math.abs(ue - P), we = Math.abs(ce - L), Ve = Math.abs(se - $), me = Math.abs(ue - W), at2 = Math.abs(ce - V), xt = Math.abs(Ee2 - F), Ot = Math.abs(he - P), A = Math.abs(ne - L), Z = Math.abs(Ee2 - $), O = Math.abs(he - W), Q = Math.abs(ne - V), X = Math.min(xe3 + Re + we, Ve + me + at2), Y = Math.min(xt + Ot + A, Z + O + Q);
      X < Y && (se = Ee2, ue = he, ce = ne, de2 = Ce);
      let K = $ * L - F * V, ae = W * L - P * V, $e = q4 * L - N * V, Rt = se * V - $ * ce, ir = ue * V - W * ce, ho = de2 * V - q4 * ce, Ni = (ho * ae - $e * ir) / (Rt * ae - K * ir), em = (ho * K - $e * Rt) / (ir * K - ae * Rt), dc = W * F - P * $, Ru2 = V * F - L * $, Rs = q4 * F - N * $, Aa = ue * $ - W * se, dh = ce * $ - V * se, tm = ((de2 * $ - q4 * se) * dc - Rs * Aa) / (dh * dc - Ru2 * Aa), Ns = w6.clone();
      return Ns.elements[12] = Ni, Ns.elements[13] = em, Ns.elements[14] = tm, tm > 0 ? Ns : null;
    });
    t(this, "updateTouchOrigin", () => {
      let t10 = this.renderer.domElement;
      this.touch.origin.offsetLeft = t10.getBoundingClientRect().left, this.touch.origin.offsetTop = t10.getBoundingClientRect().top;
    });
    t(this, "touchToScene", (t10) => {
      this.touch.touches = [];
      for (let n6 = 0, o6 = t10.touches.length; n6 < o6; n6++) {
        let i6 = t10.touches[n6], s8 = gM(i6, this.touch.origin);
        this.touch.touches.push(new at(s8.x / this.renderer.domElement.width * this.rendererState.pixelRatio * 2 - 1, -(s8.y / this.renderer.domElement.height * this.rendererState.pixelRatio) * 2 + 1));
      }
      this.coords.mouse = this.touch.touches[0];
    });
    t(this, "canScrollZoom", (t10) => {
      let n6 = x2(t10), o6 = this.getZoomAltitude();
      return !(n6 < 0 && o6 === this.getZoomScaledMax() || n6 > 0 && o6 === this.getZoomScaledMin());
    });
    t(this, "mouseToScene", (t10) => {
      let n6 = this.getMousePos(t10);
      return this.coords.mouse.x = n6.x / this.renderer.domElement.width * this.rendererState.pixelRatio * 2 - 1, this.coords.mouse.y = -(n6.y / this.renderer.domElement.height * this.rendererState.pixelRatio) * 2 + 1, this.coords.mouse;
    });
    t(this, "getMousePos", (t10) => ({ x: t10.offsetX, y: t10.offsetY }));
    t(this, "handleMouseDownRotate", (t10) => {
      this.coords.rotateStart.set(t10.clientX, t10.clientY), this.publish("rotate-start"), this.publish("user-rotate-start");
    });
    t(this, "handleMouseDownPan", () => {
      let t10 = this.raycastToFloor(this.coords.mouse);
      this.coords.panStart.set(t10.x, t10.y, 0), this.coords.panCameraStart.set(this.orbit.position.x, this.orbit.position.y, 0), this.publish("pan-start"), this.publish("user-pan-start");
    });
    t(this, "handleMouseDownPedestal", (t10) => {
      let n6 = new at(t10.clientX, t10.clientY);
      this.coords.initialShiftPos = n6, this.coords.initialPedestal = this.getPedestal(), this.pedestalScaleFactor = wwe(this.camera.fov, this.renderer.domElement.clientHeight, this.getZoomAltitude()), this.publish("pedestal-start"), this.publish("user-pedestal-start");
    });
    t(this, "handleMouseMovePedestal", (t10) => {
      let n6 = { x: t10.clientX, y: t10.clientY }, o6 = this.coords.initialPedestal + this.pedestalScaleFactor * (n6.y - this.coords.initialShiftPos.y);
      this.stayInsideBounds && (o6 < this.minPedestal ? o6 = Math.max(o6, this.minPedestal) : o6 > this.maxPedestal && (o6 = Math.min(o6, this.maxPedestal))), o6 !== this.getPedestal() && this.setPedestal(o6, true);
    });
    t(this, "handleMouseMoveRotate", (t10) => {
      this.coords.rotateEnd.set(t10.clientX, t10.clientY), this.coords.rotateDelta.subVectors(this.coords.rotateEnd, this.coords.rotateStart), this.setRotation(this.getRotation() + this.coords.rotateDelta.x / this.rotateSpeed), this.setTilt(this.getTilt() - this.coords.rotateDelta.y / this.rotateSpeed), this.coords.rotateStart.copy(this.coords.rotateEnd), this.publish("change");
    });
    t(this, "publishUserZoomDebounced", J4(() => {
      this.isUserZooming = false, this.publish("user-zoom-end");
    }, 250));
    t(this, "publishUserZoomEvent", () => {
      this.isUserZooming ? this.publishUserZoomDebounced() : (this.publish("user-zoom-start"), this.isUserZooming = true, this.publishUserZoomDebounced());
    });
    t(this, "setCameraMoving", () => {
      this.cameraMoving = true;
    });
    t(this, "unsetCameraMoving", () => {
      this.cameraMoving = false, this.lastCameraMoveTime = Date.now();
    });
    t(this, "setUserInteracting", () => {
      this.userInteracting = true;
    });
    t(this, "unsetUserInteracting", () => {
      this.userInteracting = false;
    });
    t(this, "publishPedestalChangeEvent", (t10) => {
      this.publish("pedestal-change", { pedestal: t10, scrolledToTop: this.scrolledToTop, scrolledToBottom: this.scrolledToBottom, scrollPercent: this.scrollPercent });
    });
    t(this, "convertAltitudeToZoomLevel", (t10) => {
      let [, n6] = this.center, o6 = this.computeMetersPerPixelFromAltitude(t10), i6 = Math.cos(yd.degToRad(n6)) * 2 * Math.PI * Zn / o6;
      return yd.clamp(Math.log2(i6 / 512), A1, O1);
    });
    t(this, "convertZoomLevelToAltitude", (t10) => this.computeMetersPerPixelFromZoomLevel(t10) * this.options.canvasHeight / 2 / Math.tan(yd.degToRad(this.camera.fov) / 2));
    t(this, "completeTween", (t10) => {
      t10.isPlaying() && t10.stop(), this.rendererState.internalTweenGroup.remove(t10), this.tweens.delete(t10);
    });
    t(this, "debugContainer", new de());
    this.camera = t6, this.renderer = o, this.rendererState = i, this.scene = n, this.options = s6, this.elevation = t6.parent, this.orbit = this.elevation.parent, this.cameraPlane = this.createCameraPlane(), this.zoomStart = t6.position.z, s6.mode !== "outdoors-overlay" && this.addEventListeners();
  }
  get maxZoomLevel() {
    return this.convertAltitudeToZoomLevel(this.minZoomAltitude);
  }
  setMaxZoomLevel(t6) {
    this.minZoomAltitude = this.convertZoomLevelToAltitude(t6), this.stateDirty = true;
  }
  get defaultMinZoomLevel() {
    return u(this, k1);
  }
  get minZoomLevel() {
    return this.convertAltitudeToZoomLevel(this.maxZoomAltitude);
  }
  setMinZoomLevel(t6) {
    this.maxZoomAltitude = this.convertZoomLevelToAltitude(t6), this.stateDirty = true;
  }
  get scrollPercent() {
    let t6 = this.minPedestal, n = this.maxPedestal, o = this.getPedestal();
    return o = Math.min(o, n), o = Math.max(o, t6), (o - t6) / (n - t6) * 100;
  }
  get fov() {
    return this.camera.fov;
  }
  get scrolledToBottom() {
    return this.minPedestal === 0 || Math.floor(this.getPedestal()) <= this.minPedestal;
  }
  get scrolledToTop() {
    return this.maxPedestal === 0 || Math.ceil(this.getPedestal()) >= this.maxPedestal;
  }
  get center() {
    let t6 = this.getPosition(), { lat: n, lon: o } = xwe(this.rendererState.center?.[1] ?? 0, this.rendererState.center?.[0] ?? 0, t6.x, t6.y);
    return [o, n];
  }
  setCenter(t6, n) {
    let { x: o, y: i } = bwe(this.rendererState.center?.[1] ?? 0, this.rendererState.center?.[0] ?? 0, n, t6);
    this.setPosition(o, i);
  }
  get isAnimating() {
    return this.rendererState.internalTweenGroup.getAll().some((t6) => t6.cameraAnimation);
  }
  getCameraFrameForCoordinates(t6, n) {
    let o = n.minZoom !== void 0 ? n.minZoom : this.minZoomAltitude, i = n.maxZoom !== void 0 ? n.maxZoom : this.maxZoomAltitude, s6 = this.options.canvasWidth, u6 = this.options.canvasHeight, l = this.getRotation(), c = this.getTilt(), d = this.getPosition();
    this.setRotation(n.rotation ?? l, true), this.setTilt(n.tilt ?? c, true);
    let f = yM(t6, { canvasWidth: s6, canvasHeight: u6, paddingOption: n.padding, verticalPadding: n.verticalPadding, minZoom: o, maxZoom: i, position: d, camera: this.camera, orbit: this.orbit });
    return this.setRotation(l, true), this.setTilt(c, true), { center: f.position, zoomLevel: this.convertAltitudeToZoomLevel(f.zoom) };
  }
  focusOn(t6, n) {
    if (yV) {
      this.debugContainer && ox(this.debugContainer);
      let v6 = new ki(4, 4, 4), x6 = new ps({ color: 65280, depthTest: false }), D = new Yo(v6, x6, t6.length), w6 = new kt();
      t6.forEach((S, F) => {
        w6.setPosition(S), D.setMatrixAt(F, w6);
      }), D.instanceMatrix.needsUpdate = true, this.debugContainer.add(D), this.scene.add(this.debugContainer);
    }
    let o = n.curve, i = n.callback, s6 = n.cancelledCallback, u6 = n.minZoom !== void 0 ? n.minZoom : this.minZoomAltitude, l = n.maxZoom !== void 0 ? n.maxZoom : this.maxZoomAltitude, c = this.options.canvasWidth, d = this.options.canvasHeight, f;
    n.duration !== void 0 ? f = n.duration : yc.env.TESTING === "true" ? f = 0 : f = D2;
    let h = n.padding, b = this.getRotation(), I = this.getTilt();
    n.rotation != null && this.setRotation(n.rotation), n.tilt != null && this.setTilt(n.tilt);
    let E = yM(t6, { canvasHeight: d, paddingOption: h, canvasWidth: c, minZoom: u6, maxZoom: l, camera: this.camera, orbit: this.orbit, position: this.getPosition(), verticalPadding: n.verticalPadding });
    this.setRotation(b), this.setTilt(I), this.animateCamera({ position: E.position, tilt: n.tilt, rotation: n.rotation, zoom: E.zoom }, f, o, i, s6, n);
  }
  resize(t6, n) {
    this.options.canvasWidth = t6, this.options.canvasHeight = n;
  }
  computeMetersPerPixelFromZoomLevel(t6) {
    let [, n] = this.center, o = yd.clamp(t6, A1, O1), i = Math.pow(2, o), s6 = yd.clamp(n, I2, E2), u6 = i * 512;
    return Math.cos(yd.degToRad(s6)) * Math.PI * 2 * Zn / u6;
  }
  computeMetersPerPixelFromAltitude(t6) {
    return t6 * 2 * Math.tan(yd.degToRad(this.camera.fov) / 2) / this.options.canvasHeight;
  }
  getCurrentMetersPerPixel() {
    return this.computeMetersPerPixelFromAltitude(this.getZoomAltitude());
  }
};
k1 = /* @__PURE__ */ new WeakMap(), t(Ul, "CAMERA_FRAME_PADDING_SIDES", ["top", "bottom", "left", "right"]);
function yM(e6, { canvasWidth: r6, orbit: t6, paddingOption: n, verticalPadding: o = 0, canvasHeight: i, minZoom: s6, maxZoom: u6, camera: l, position: c }) {
  let d = { zoom: s6, position: c };
  if (e6.length === 0) return d;
  for (let K of Ul.CAMERA_FRAME_PADDING_SIDES) typeof n[K] != "number" && (n[K] = 0);
  let f = n.type === "portion" ? { top: n.top * i, bottom: n.bottom * i, left: n.left * r6, right: n.right * r6, type: "pixel" } : n;
  if (f.left + f.right >= r6 || f.top + f.bottom >= i) return d;
  t6.updateMatrixWorld();
  let h = l.matrixWorldInverse, b = l.fov * (Math.PI / 180) / 2, I = b, v6 = Math.atan(Math.tan(b) * (r6 / i)), x6 = new C(1 / 0, 1 / 0, 1 / 0), D = new C(-1 / 0, -1 / 0, -1 / 0), w6 = new Ie(), S = new C();
  for (let K = 0, ae = e6.length; K < ae; K++) S.copy(e6[K]), w6.expandByPoint(S), S.applyMatrix4(h), x6.min(S), D.max(S), S.copy(e6[K]), S.z -= o, S.applyMatrix4(h), x6.min(S), D.max(S), S.copy(e6[K]), S.z += o, S.applyMatrix4(h), x6.min(S), D.max(S);
  let F = D.x - x6.x, P = D.y - x6.y, L = r6 - f.left - f.right, N = i - f.top - f.bottom, $ = (D.x + x6.x) / 2, W = (D.y + x6.y) / 2, V = F / L, q4 = P / N, se = s6, ue = u6, ce = se * Math.tan(v6) * 2, de2 = ue * Math.tan(v6) * 2, Ee2 = ce / r6, he = de2 / r6, ne = Math.max(V, q4);
  ne = yd.clamp(ne, Ee2, he);
  let Ce = L * ne, xe3 = N * ne, Re = { min: { x: $ - Ce / 2 - f.left * ne, y: W - xe3 / 2 - f.bottom * ne }, max: { x: $ + Ce / 2 + f.right * ne, y: W + xe3 / 2 + f.top * ne } }, we = (Re.min.x + Re.max.x) / 2, Ve = (Re.min.y + Re.max.y) / 2, me = w6.getCenter(new C()), at2 = Math.abs(we - Re.min.x), xt = Math.abs(Ve - Re.min.y), Ot = at2 / Math.tan(v6), A = xt / Math.tan(I), Z = new C();
  Z.set(we, Ve, D.z + Math.max(Ot, A)), Z.applyMatrix4(l.matrixWorld);
  let O = new C();
  O.set(we, Ve, D.z), O.applyMatrix4(l.matrixWorld);
  let Q = new C().subVectors(O, Z), X = (me.z - Z.z) / Q.z, Y = new C().copy(Z).add(Q.clone().multiplyScalar(X));
  return O.set(Y.x, Y.y, Y.z), Z.sub(O), { position: Y, zoom: Z.length() };
}
$i();
var bV = 300;
var qf;
var Qf;
var _1 = class {
  constructor(r6) {
    t(this, "state");
    v(this, qf, new C());
    v(this, Qf, new C());
    this.state = r6;
  }
  update(r6) {
    let t6, n;
    this.state.cameraObject.getWorldPosition(u(this, Qf));
    for (let o of this.state.geometry2DIdsInScene) if (t6 = this.state.geometry2DMap.get(o), t6 && (n = t6.components[0], n && "containerEl" in n && n.markerContainer != null)) {
      if (n.visibilityNeedsUpdate !== false && (n.visibilityNeedsUpdate === "show" ? n.canShow = true : n.canShow = false), (n.canShow && n.visible === true || n.animation?.pending === true) && !n.offscreen) if (n.options.zIndex != null) n.markerContainer.style.transform = `translate3D(${n.projection.x}px, ${n.projection.y}px, ${n.options.zIndex}px)`;
      else {
        t6.object3d.getWorldPosition(u(this, qf));
        let i = u(this, Qf).distanceTo(u(this, qf));
        n.markerContainer.style.transform = `translate3D(${n.projection.x}px, ${n.projection.y}px, ${-i}px)`;
      }
      if (n.canShow === true && n.visible === true ? n.markerContainer.style.pointerEvents = r6 ? "none" : n.pointerEvents : n.markerContainer.style.pointerEvents = "none", n.currentStrategyIndex === -1 && n.visible && n.visibilityNeedsUpdate === "show") continue;
      n.visibilityNeedsUpdate !== false && !n.offscreen && (n.visibilityNeedsUpdate === "show" && (n.markerContainer.style.opacity = "0"), n.animation && n.animation.cancel(), n.animation = n.markerContainer.animate([{ opacity: n.canShow && n.visible ? "1" : "0" }], { duration: bV, easing: "ease-in-out", fill: "forwards" }), n.visibilityNeedsUpdate = false);
    }
  }
};
qf = /* @__PURE__ */ new WeakMap(), Qf = /* @__PURE__ */ new WeakMap();
$i();
var L1 = class extends Ka {
  constructor(t6, n) {
    super();
    t(this, "state");
    t(this, "dirty", true);
    t(this, "domTree");
    t(this, "observers", /* @__PURE__ */ new Map());
    t(this, "updateDimensions", (t10) => {
      t10.forEach((n6) => {
        let i = n6.target.parentElement?.getAttribute("data-marker-id");
        if (i) {
          let s6 = this.state.geometry2DMap.get(i), u6 = s6?.components[0];
          s6 && u6 instanceof qC && (u6.updateDimensions(n6.contentRect.width, n6.contentRect.height), u6.collisionDirty = true);
        }
      }), this.publish("dimensions-update");
    });
    this.state = t6, this.domTree = n;
  }
  setupObserver() {
    if (this.observers) {
      for (let o of this.observers.values()) o.disconnect();
      this.observers.clear();
    }
    let t6, n;
    for (let o of this.domTree.children) {
      let i = o.getAttribute("data-marker-id");
      if (i != null && (t6 = this.state.geometry2DMap.get(i), n = t6.components[0], n.options?.dynamicResize)) {
        let s6 = new ResizeObserver(this.updateDimensions);
        s6.observe(n.containerEl), this.observers.set(o.userData.entityId, s6);
      }
    }
  }
  update() {
    this.dirty && (this.setupObserver(), this.dirty = false);
  }
  destroy() {
    for (let t6 of this.observers.values()) t6.disconnect();
    this.observers.clear();
  }
};
$i();
var vV = 0;
var xV = 90;
var IV2 = (yc.env.NODE_ENV === "test", false);
var xa = { linear: zo.Linear.None, "ease-in": zo.Quadratic.In, "ease-out": zo.Quadratic.Out, "ease-in-out": zo.Quadratic.InOut };
var EV2 = -50;
var fe;
var Fe;
var xs;
var e0;
var t0;
var F2;
var R1 = class {
  constructor(r6, t6, n) {
    v(this, t0);
    v(this, fe);
    v(this, Fe);
    v(this, xs);
    v(this, e0);
    w(this, fe, r6), w(this, Fe, t6), w(this, xs, n), u(this, fe).map && u(this, fe).map.transform.setMinElevationForCurrentTile(EV2), u(this, Fe).cameraSystem.on("pedestal-change", ({ pedestal: o }) => {
      u(this, Fe).cameraSystem.setCameraPlaneElevation(o);
    });
  }
  get center() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map.getCenter?.().toArray() : u(this, Fe).cameraSystem.center;
  }
  setCenter(r6) {
    if (u(this, fe).mode === "outdoors-overlay" && u(this, fe).map) {
      u(this, fe).map?.setCenter(r6), u(this, Fe).interactionSystem.handleHover();
      return;
    }
    u(this, Fe).cameraSystem.setCenter(r6[0], r6[1]), u(this, Fe).interactionSystem.handleHover();
  }
  get zoomLevel() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map?.getZoom() : u(this, Fe).cameraSystem.getZoomLevel();
  }
  setZoomLevel(r6) {
    u(this, fe).mode === "outdoors-overlay" && u(this, fe).map && u(this, fe).map?.setZoom(r6), u(this, Fe).cameraSystem.setZoomLevel(XM(r6, this.minZoomLevel, this.maxZoomLevel, "zoomLevel was clamped to minZoomLevel/maxZoomLevel bounds. Use mapView.Camera.setMinZoomLevel() and mapView.Camera.setMaxZoomLevel() to adjust limits."));
  }
  getState() {
    return { zoomLevel: this.zoomLevel, minZoomLevel: this.minZoomLevel, maxZoomLevel: this.maxZoomLevel, minPitch: this.minPitch, maxPitch: this.maxPitch, autoMinZoomLevel: this.autoMinZoomLevel, panMode: this.panMode, screenOffsets: this.insetsPadding, center: this.center, bearing: this.bearing, pitch: this.pitch, elevation: this.elevation };
  }
  get isAnimating() {
    return u(this, Fe).cameraSystem.isAnimating;
  }
  cancelAnimation() {
    u(this, Fe).cameraSystem.cancelAnimation();
  }
  get maxZoomLevel() {
    return u(this, Fe).cameraSystem.maxZoomLevel;
  }
  get minZoomLevel() {
    return u(this, Fe).cameraSystem.minZoomLevel;
  }
  setAutoMinZoomLevel(r6) {
    u(this, Fe).panBoundsSystem.autoMinZoomLevel = r6, r6 && (u(this, Fe).panBoundsSystem.dirty = true, u(this, Fe).panBoundsSystem.update());
  }
  get autoMinZoomLevel() {
    return u(this, Fe).panBoundsSystem.autoMinZoomLevel;
  }
  setMinZoomLevel(r6, t6 = false) {
    t6 && this.setAutoMinZoomLevel(false);
    let n = XM(r6, Ei.MIN_MERCATOR_ZOOM_LEVEL, this.maxZoomLevel, `setMinZoomLevel was clamped. minZoomLevel must be between ${Ei.MIN_MERCATOR_ZOOM_LEVEL} and maxZoomLevel.`);
    u(this, Fe).cameraSystem.setMinZoomLevel(n), this.zoomLevel < n && this.setZoomLevel(n), u(this, fe).map?.setMinZoom(n);
  }
  setMaxZoomLevel(r6) {
    let t6 = XM(r6, this.minZoomLevel, Ei.MAX_MERCATOR_ZOOM_LEVEL, `setMaxZoomLevel was clamped. maxZoomLevel must be between minZoomLevel and ${Ei.MAX_MERCATOR_ZOOM_LEVEL}.`);
    u(this, Fe).cameraSystem.setMaxZoomLevel(t6), this.zoomLevel > t6 && this.setZoomLevel(t6), u(this, fe).map?.setMaxZoom(t6);
  }
  get maxPitch() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map?.getMaxPitch?.() : yd.radToDeg(u(this, Fe).cameraSystem.maxTilt);
  }
  get minPitch() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map?.getMinPitch?.() : yd.radToDeg(u(this, Fe).cameraSystem.minTilt);
  }
  setMinPitch(r6) {
    let t6 = Math.max(vV, r6);
    u(this, fe).map?.setMinPitch(t6), u(this, Fe).cameraSystem.minTilt = yd.degToRad(t6);
  }
  setMaxPitch(r6) {
    let t6 = Math.min(xV, r6);
    u(this, fe).map?.setMaxPitch(t6), u(this, Fe).cameraSystem.maxTilt = yd.degToRad(t6);
  }
  get bearing() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map?.getBearing() : yd.radToDeg(u(this, Fe).cameraSystem.getRotation());
  }
  setBearing(r6) {
    if (u(this, fe).mode === "outdoors-overlay" && u(this, fe).map) {
      u(this, fe).map?.setBearing(r6);
      return;
    }
    u(this, Fe).cameraSystem.setRotation(yd.degToRad(r6));
  }
  get pitch() {
    return u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? u(this, fe).map?.getPitch() : yd.radToDeg(u(this, Fe).cameraSystem.getTilt());
  }
  setPitch(r6) {
    if (u(this, fe).mode === "outdoors-overlay" && u(this, fe).map) {
      u(this, fe).map?.setPitch(r6);
      return;
    }
    u(this, Fe).cameraSystem.setTilt(yd.degToRad(XM(r6, this.minPitch, this.maxPitch, "pitch was clamped to minPitch/maxPitch bounds. Use mapView.Camera.setMinPitch() and mapView.Camera.setMaxPitch() to adjust limits.")));
  }
  get elevation() {
    return u(this, Fe).cameraSystem.getPedestal();
  }
  setElevation(r6) {
    u(this, Fe).cameraSystem.setPedestal(r6, true);
  }
  animateElevation(r6, t6) {
    return u(this, e0) && u(this, e0).stop(), new Promise((n) => {
      u(this, Fe).cameraSystem.animateCamera({ position: { z: r6 } }, t6?.duration || 300, xa[t6?.easing || "ease-in-out"], n, n, { interruptible: t6?.interruptible ?? true });
    });
  }
  get insetsPadding() {
    return u(this, xs).insetsPadding;
  }
  get panMode() {
    return u(this, Fe).cameraSystem.enablePan === false && u(this, Fe).cameraSystem.enablePedestal === true ? "elevation" : "default";
  }
  setPanMode(r6) {
    if (r6 !== "default" && r6 !== "elevation") throw new Error("Invalid pan mode");
    r6 !== this.panMode && (r6 === "default" ? (u(this, Fe).cameraSystem.enablePan = true, u(this, Fe).cameraSystem.enablePedestal = false) : (u(this, Fe).cameraSystem.enablePan = false, u(this, Fe).cameraSystem.enablePedestal = true));
  }
  setInsetPadding(r6) {
    u(this, xs).insetsPadding = Object.assign({}, u(this, xs).insetsPadding, r6);
  }
  animateTo(r6) {
    if (u(this, fe).mode === "outdoors-overlay" && u(this, fe).map) return u(this, fe).map?.flyTo({ center: r6.center ?? this.center, zoom: r6.zoomLevel ?? this.zoomLevel, bearing: r6.bearing ?? this.bearing, pitch: r6.pitch ?? this.pitch, duration: r6.duration ?? 600 }), Promise.resolve();
    let t6 = r6.center ? u(this, fe).convertTo3DMapPosition(r6.center[1], r6.center[0], r6.center[2] || this.elevation) : void 0, n = r6.zoomLevel !== void 0 ? u(this, Fe).cameraSystem.convertZoomLevelToAltitude(XM(r6.zoomLevel, this.minZoomLevel, this.maxZoomLevel, "zoomLevel was clamped to minZoomLevel/maxZoomLevel bounds. Use mapView.Camera.setMinZoomLevel() and mapView.Camera.setMaxZoomLevel() to adjust limits.")) : void 0, o = r6.bearing !== void 0 ? yd.degToRad(r6.bearing) : void 0, i = r6.pitch !== void 0 ? yd.degToRad(XM(r6.pitch, this.minPitch, this.maxPitch, "pitch was clamped to minPitch/maxPitch bounds. Use mapView.Camera.setMinPitch() and mapView.Camera.setMaxPitch() to adjust limits.")) : void 0;
    return new Promise((s6) => {
      u(this, Fe).cameraSystem.animateCamera({ position: t6, zoom: n, rotation: o, tilt: i }, r6.duration || 0, xa[r6.easing || "ease-in-out"], () => {
        u(this, Fe).interactionSystem.handleHover(), s6();
      }, s6, { interruptible: r6?.interruptible ?? true });
    });
  }
  getCameraFrameForCoordinates(r6, t6) {
    let n = x(this, t0, F2).call(this, t6 || {}, () => Promise.resolve()), { pointCloud: o } = bM(r6, u(this, fe), u(this, xs).geometry3DMap);
    if (o.length === 0) return Pt.error("No valid coordinates found in targets:", r6), { center: this.center, zoomLevel: this.zoomLevel };
    let { center: i, zoomLevel: s6 } = u(this, Fe).cameraSystem.getCameraFrameForCoordinates(o, n);
    return { center: u(this, fe).convert3DMapPositionToCoordinate(i), zoomLevel: s6 };
  }
  focusOn(r6, t6) {
    let { pointCloud: n, geoBounds: o, firstPosition: i } = bM(r6, u(this, fe), u(this, xs).geometry3DMap);
    return n.length === 0 ? (Pt.error("No valid coordinates found in targets:", r6), Promise.resolve()) : u(this, fe).mode === "outdoors-overlay" && u(this, fe).map ? (n.length === 1 && i ? u(this, fe).map?.flyTo({ center: [i[0], i[1]], duration: t6?.duration || u(this, fe).map.getBearing(), animate: true, bearing: t6?.bearing === void 0 ? u(this, fe).map.getBearing() : t6?.bearing, pitch: t6?.pitch === void 0 ? u(this, fe).map.getPitch() : t6?.pitch, zoom: t6?.maxZoomLevel || u(this, fe).map.getMaxZoom() }) : (IV2 && CV(u(this, fe), o), u(this, fe).map?.fitBounds(o, { duration: t6?.duration ?? Ei.DEFAULT_ANIMATION_DURATION, bearing: t6?.bearing === void 0 ? u(this, fe).map.getBearing() : t6?.bearing, pitch: t6?.pitch === void 0 ? u(this, fe).map.getPitch() : t6?.pitch, maxZoom: t6?.maxZoomLevel ?? u(this, fe).map.getMaxZoom() })), u(this, Fe).interactionSystem.handleHover(), Promise.resolve()) : new Promise((s6) => {
      u(this, Fe).cameraSystem.focusOn(n, x(this, t0, F2).call(this, t6 || {}, s6));
    });
  }
};
fe = /* @__PURE__ */ new WeakMap(), Fe = /* @__PURE__ */ new WeakMap(), xs = /* @__PURE__ */ new WeakMap(), e0 = /* @__PURE__ */ new WeakMap(), t0 = /* @__PURE__ */ new WeakSet(), F2 = function(r6, t6) {
  return { minZoom: r6?.maxZoomLevel === void 0 ? void 0 : u(this, Fe).cameraSystem.convertZoomLevelToAltitude(XM(r6.maxZoomLevel, this.minZoomLevel, this.maxZoomLevel, "maxZoomLevel was clamped to minZoomLevel/maxZoomLevel bounds. Use mapView.Camera.setMaxZoomLevel() to adjust limits.")), maxZoom: r6?.minZoomLevel === void 0 ? void 0 : u(this, Fe).cameraSystem.convertZoomLevelToAltitude(XM(r6.minZoomLevel, this.minZoomLevel, this.maxZoomLevel, "minZoomLevel was clamped to minZoomLevel/maxZoomLevel bounds. Use mapView.Camera.setMinZoomLevel() to adjust limits.")), padding: r6?.padding ? Object.assign({}, m0e, r6?.padding) : this.insetsPadding, curve: xa[r6?.easing || "ease-in-out"], rotation: r6?.bearing === void 0 ? void 0 : yd.degToRad(r6.bearing), tilt: r6?.pitch !== void 0 ? yd.degToRad(XM(r6.pitch, this.minPitch, this.maxPitch, "pitch was clamped to minPitch/maxPitch bounds. Use mapView.Camera.setMinPitch() and mapView.Camera.setMaxPitch() to adjust limits.")) : void 0, duration: r6?.duration, callback: () => {
    u(this, Fe).interactionSystem.handleHover(), t6();
  }, cancelledCallback: t6, interruptible: r6?.interruptible ?? true, verticalPadding: r6?.verticalPadding };
};
function w2(e6, r6) {
  e6[0] = Math.min(e6[0], r6[0]), e6[1] = Math.min(e6[1], r6[1]), e6[2] = Math.max(e6[2], r6[0]), e6[3] = Math.max(e6[3], r6[1]);
}
function bM(e6, r6, t6) {
  let n = [], o = [1 / 0, 1 / 0, -1 / 0, -1 / 0], i = null;
  if (!e6 || !Array.isArray(e6) || e6.length === 0) return { pointCloud: n, geoBounds: o, firstPosition: i };
  let s6 = r6.getSystems().renderSystem;
  for (let u6 of e6) if (typeof u6 == "string") {
    (s6.threeDdirty || s6.twoDdirty) && r6.renderSync();
    let l = t6.get(u6);
    if (!l) {
      Pt.error("Entity not found with id:", u6);
      continue;
    }
    let c = new Ie();
    $Pe(r6, "userData" in l ? l.userData.entityId ?? l.id : l.id, n, c, l instanceof ur ? l.position.z : void 0);
    let d = r6.convert3DMapPositionToCoordinate(c.min), f = r6.convert3DMapPositionToCoordinate(c.max);
    w2(o, d), w2(o, f), i || (i = r6.convert3DMapPositionToCoordinate(c.getCenter(new C())));
  } else n.push(r6.convertTo3DMapPosition(u6[1], u6[0], u6[2] || 0)), w2(o, u6), i || (i = u6);
  return { pointCloud: n, geoBounds: o, firstPosition: i };
}
function CV(e6, r6) {
  let t6 = [[r6[0], r6[1]], [r6[0], r6[3]], [r6[2], r6[3]], [r6[2], r6[1]], [r6[0], r6[1]]];
  e6.map?.getLayer("bounds-outline") && e6.map.removeLayer("bounds-outline"), e6.map?.getSource("bounds-source") && e6.map.removeSource("bounds-source"), e6.map?.addSource("bounds-source", { type: "geojson", data: { type: "Feature", properties: {}, geometry: { type: "LineString", coordinates: t6 } } }), e6.map?.addLayer({ id: "bounds-outline", type: "line", source: "bounds-source", layout: {}, paint: { "line-color": "#FF0000", "line-width": 2, "line-opacity": 0.8 } });
}
$i();
$i();
var vM = `uniform vec4 uSize;
varying vec2 vUv;
void main() {
  vUv = uv;
  // Scale the position by the size of the quad
  // and shift to top left corner for 0,0
	vec2 transformed = position.xy * uSize.xy - vec2(1.0, -1.0);
  // Apply width .x and height .y of image
  transformed += vec2(uSize.x, -uSize.y);
  // Apply left .w and top .z offset
  transformed += vec2(uSize.w, -uSize.z) * 2.0;
  gl_Position = vec4(transformed, 1.0, 1.0);
}`;
$i();
var xM = `varying vec2 vUv;
uniform sampler2D uTexture;
uniform float uOpacity;
void main() {
  #ifndef debug
  vec4 texture = texture2D(uTexture, vUv);
  gl_FragColor = vec4(texture.rgb, texture.a * uOpacity);
  #else
  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
  #endif
}`;
$i();
var IM = 4.291666666666667;
var EM = 15;
var CM = 25;
var SM = 43 / 60;
$i();
var DM = ["horizontal", "icon"];
var SV = /* @__PURE__ */ new Map([[DM[0], `<svg viewBox="0 0 206 48">
      <path d="M27.2678 14.2261H22.3187C21.0695 14.2261 20.4695 14.7801 20.4695 15.9852V31.142L10.3966 15.5591C9.69665 14.4784 9.2475 14.2773 7.8475 14.2261H2.97462C1.67462 14.2261 1.07631 14.7801 1.07631 15.9852V44.7665C1.07631 45.9716 1.67462 46.5256 2.97462 46.5256H7.92377C9.22207 46.5256 9.82207 45.9716 9.82207 44.7665V29.6847L19.9441 45.1926C20.695 46.3244 21.095 46.5256 22.4933 46.5256H27.2933C28.5916 46.5256 29.1916 45.9716 29.1916 44.7665V15.9852C29.1407 14.7801 28.5424 14.2261 27.2678 14.2261Z"/>
      <path d="M5.44915 10.9602C8.45863 10.9602 10.8983 8.50669 10.8983 5.48011C10.8983 2.45353 8.45863 0 5.44915 0C2.43967 0 0 2.45353 0 5.48011C0 8.50669 2.43967 10.9602 5.44915 10.9602Z"/>
      <path d="M61.7899 25.0449C63.2306 23.1903 65.078 22.2051 67.556 22.2051C72.0526 22.2051 74.7611 25.3347 74.7611 29.4511V39.2489C74.8187 39.7125 74.5306 39.9443 74.0695 39.9443H72.5136C72.0526 39.9443 71.7645 39.7125 71.8221 39.2489V29.5091C71.8221 27.1909 69.9187 25.2187 67.4984 25.2187C65.1339 25.2187 63.2323 27.1329 63.2323 29.2773V39.2489C63.2899 39.7125 63.0018 39.9443 62.5407 39.9443H60.9831C60.5221 39.9443 60.2916 39.7125 60.2916 39.2489V29.4511C60.2916 27.1329 58.3899 25.2187 56.0255 25.2187C53.7204 25.2187 51.7594 27.075 51.7594 29.2773V39.3068C51.817 39.7705 51.5289 40.0023 51.0102 40.0023H49.5119C49.0509 40.0023 48.7628 39.7705 48.7628 39.3068V23.25C48.7051 22.7864 48.9933 22.4966 49.5119 22.4966H50.9526C51.356 22.4966 51.5289 22.6704 51.5289 23.0182V24.2352C52.7407 22.9602 54.239 22.2648 56.0255 22.2648C58.4475 22.2068 60.3492 23.192 61.7899 25.0466V25.0449ZM77.1255 31.2477C77.1255 26.3216 81.1018 22.2051 86.1187 22.2051C88.539 22.2051 90.6136 23.1903 92.3441 25.1608V23.1903C92.3441 22.7267 92.5746 22.5528 93.0357 22.5528H94.4187C94.8797 22.5528 95.1102 22.7847 95.1102 23.3062V39.3648C95.1102 39.8284 94.8797 40.0602 94.4187 40.0602H93.0357C92.5746 40.0602 92.3441 39.8284 92.3441 39.4227V37.4523C90.6712 39.3648 88.5967 40.35 86.1746 40.35C81.1018 40.2341 77.1238 36.1773 77.1238 31.2477H77.1255ZM92.1136 31.2477C92.1136 27.8284 89.4611 25.2187 86.0594 25.2187C82.7746 25.2187 80.1221 27.8864 80.1221 31.2477C80.1221 34.6687 82.7746 37.2784 86.1187 37.2784C86.9062 37.2789 87.6861 37.1232 88.4138 36.8202C89.1414 36.5173 89.8026 36.0731 90.3593 35.513C90.9161 34.9528 91.3577 34.2878 91.6587 33.556C91.9597 32.8241 92.1143 32.0397 92.1136 31.2477ZM100.992 37.3943V46.3807C101.049 46.8443 100.761 47.1341 100.298 47.1341H98.7424C98.2814 47.1341 97.9933 46.9023 97.9933 46.3807V23.1903C97.9933 22.7267 98.2238 22.4369 98.7424 22.4369H100.183C100.646 22.379 100.934 22.6687 100.934 23.0744V24.9869C102.605 23.0744 104.68 22.1472 107.044 22.1472C112.002 22.1472 116.037 26.2619 116.037 31.1898C116.037 36.1176 112.059 40.2341 107.044 40.2341C104.622 40.2341 102.603 39.3068 100.992 37.3943ZM106.987 25.2187C103.7 25.2187 101.049 27.8864 101.049 31.2477C101.049 34.6687 103.7 37.2784 107.044 37.2784C110.446 37.2784 113.039 34.6108 113.039 31.2477C113.039 27.8864 110.388 25.2187 106.987 25.2187ZM121.11 37.3943V46.3807C121.168 46.8443 120.88 47.1341 120.419 47.1341H118.861C118.4 47.1341 118.112 46.9023 118.112 46.3807V23.1903C118.112 22.7267 118.342 22.4369 118.861 22.4369H120.302C120.764 22.379 121.053 22.6687 121.053 23.0744V24.9869C122.724 23.0744 124.798 22.1472 127.163 22.1472C132.12 22.1472 136.156 26.2619 136.156 31.1898C136.156 36.1176 132.178 40.2341 127.163 40.2341C124.742 40.2341 122.781 39.3068 121.11 37.3943ZM127.105 25.2187C123.819 25.2187 121.168 27.8864 121.168 31.2477C121.168 34.6687 123.819 37.2784 127.163 37.2784C130.564 37.2784 133.158 34.6108 133.158 31.2477C133.158 27.8864 130.507 25.2187 127.107 25.2187H127.105ZM153.97 32.3506H141.054C141.342 35.2483 143.995 37.4523 147.164 37.4523C148.893 37.4523 150.393 37.0466 151.719 36.0597C152.007 35.8858 152.295 35.7699 152.353 35.7699C152.583 35.7699 152.756 35.8858 152.929 36.1773L153.505 37.1625C153.622 37.3364 153.68 37.4523 153.68 37.5682C153.68 37.8 153.507 38.0318 153.103 38.3216C151.258 39.5966 149.183 40.292 146.992 40.292C141.688 40.292 137.883 36.3511 137.883 31.2477C137.883 26.204 141.803 22.2051 146.703 22.2051C151.546 22.2051 154.717 25.7983 154.717 31.0176C154.717 31.5972 154.717 32.3506 153.968 32.3506H153.97ZM141.056 30.0324H151.72C151.432 26.8432 149.473 24.929 146.648 24.929C145.241 24.8904 143.875 25.3995 142.833 26.3501C141.791 27.3007 141.154 28.6194 141.056 30.0307V30.0324ZM156.332 31.2477C156.332 26.3216 160.31 22.2051 165.326 22.2051C167.748 22.2051 169.707 23.1324 171.32 25.0449V16.2324C171.263 15.7687 171.551 15.479 172.012 15.479H173.57C174.031 15.479 174.319 15.7108 174.319 16.2324V39.3068C174.319 39.7705 174.088 40.0023 173.57 40.0023H172.129C171.666 40.0602 171.378 39.7705 171.378 39.3648V37.3943C169.649 39.3068 167.632 40.292 165.268 40.292C160.31 40.2341 156.332 36.1773 156.332 31.2477ZM171.264 31.2477C171.264 27.8284 168.612 25.2187 165.21 25.2187C161.924 25.2187 159.273 27.8864 159.273 31.2477C159.273 34.6687 161.924 37.2784 165.268 37.2784C166.057 37.2838 166.839 37.1316 167.569 36.8304C168.299 36.5292 168.962 36.0852 169.52 35.5241C170.077 34.963 170.519 34.296 170.818 33.5619C171.117 32.8277 171.268 32.0411 171.263 31.2477H171.264ZM177.72 19.0739C177.715 18.8594 177.754 18.646 177.833 18.4468C177.912 18.2476 178.031 18.0667 178.182 17.915C178.333 17.7633 178.512 17.6439 178.71 17.5642C178.909 17.4845 179.121 17.446 179.334 17.4511C179.546 17.4507 179.756 17.4923 179.952 17.5737C180.148 17.6551 180.326 17.7746 180.476 17.9254C180.626 18.0762 180.745 18.2553 180.826 18.4523C180.907 18.6494 180.948 18.8606 180.948 19.0739C180.953 19.2884 180.914 19.5017 180.835 19.7009C180.756 19.9001 180.637 20.081 180.486 20.2327C180.335 20.3845 180.156 20.5038 179.957 20.5835C179.759 20.6633 179.547 20.7017 179.334 20.6966C178.412 20.7545 177.72 20.0591 177.72 19.0739ZM177.836 39.2489V23.1903C177.836 22.7267 178.066 22.4369 178.527 22.4369H180.083C180.544 22.4369 180.832 22.6687 180.775 23.1903V39.2489C180.832 39.7125 180.544 39.9443 180.083 39.9443H178.527C178.066 39.9443 177.836 39.7125 177.836 39.2489ZM186.944 23.0165V24.1756C188.212 22.8426 189.71 22.2051 191.497 22.2051C195.937 22.2051 198.646 25.2767 198.646 29.3932V39.2489C198.703 39.7125 198.415 39.9443 197.954 39.9443H196.398C195.936 39.9443 195.705 39.7125 195.705 39.2489V29.4511C195.705 27.1329 193.803 25.2187 191.439 25.2187C189.134 25.2187 187.175 27.075 187.175 29.2773V39.3068C187.232 39.7705 186.944 40.0023 186.424 40.0023H184.868C184.407 40.0023 184.119 39.7705 184.119 39.3068V23.1903C184.061 22.7267 184.349 22.4949 184.868 22.4949H186.309C186.712 22.4949 186.944 22.6687 186.944 23.0165Z"/>
      <path d="M204 40C205.115 40 206 39.0857 206 38V37.9886C206 36.9029 205.126 36 204 36C202.885 36 202 36.9143 202 38V38.0114C202 39.0971 202.874 40 204 40ZM204 39.7829C202.989 39.7829 202.23 38.9829 202.23 38.0114V38C202.23 37.0286 203 36.2171 204 36.2171C205.011 36.2171 205.77 37.0171 205.77 37.9886V38C205.77 38.9714 205 39.7829 204 39.7829ZM203.218 38.9714H203.609V38.2743H204.034L204.517 38.9714H204.989L204.448 38.2057C204.724 38.1257 204.92 37.92 204.92 37.5886C204.92 37.1657 204.586 36.9486 204.138 36.9486H203.218V38.9714ZM203.609 37.9543V37.2914H204.103C204.368 37.2914 204.517 37.4057 204.517 37.6229C204.517 37.8171 204.368 37.9543 204.103 37.9543H203.609Z"/>
    </svg>`], [DM[1], `<svg viewBox="0 0 43 60">
      <path d="M14.0291 7.06645C14.0291 10.9691 10.8885 14.1329 7.01453 14.1329C3.14051 14.1329 0 10.9691 0 7.06645C0 3.16376 3.14051 0 7.01453 0C10.8885 0 14.0291 3.16376 14.0291 7.06645Z"/>
      <path d="M28.7335 18.3468H35.1045C36.7455 18.3468 37.5178 19.0599 37.5821 20.6158V57.7309C37.5821 59.2868 36.8099 60 35.1367 60H28.9588C27.1569 60 26.642 59.7406 25.6767 58.282L12.6452 38.282V57.7309C12.6452 59.2868 11.8729 60 10.1997 60H3.82873C2.15554 60 1.3833 59.2868 1.3833 57.7309V20.6158C1.3833 19.0599 2.15554 18.3468 3.82873 18.3468H10.1032C11.9051 18.4116 12.4843 18.671 13.3852 20.0648L26.3524 40.162V20.6158C26.3524 19.0599 27.1247 18.3468 28.7335 18.3468Z"/>
      <path d="M41.5 60C42.3362 60 43 59.3143 43 58.5V58.4914C43 57.6771 42.3448 57 41.5 57C40.6638 57 40 57.6857 40 58.5V58.5086C40 59.3229 40.6552 60 41.5 60ZM41.5 59.8371C40.7414 59.8371 40.1724 59.2371 40.1724 58.5086V58.5C40.1724 57.7714 40.75 57.1629 41.5 57.1629C42.2586 57.1629 42.8276 57.7629 42.8276 58.4914V58.5C42.8276 59.2286 42.25 59.8371 41.5 59.8371ZM40.9138 59.2286H41.2069V58.7057H41.5259L41.8879 59.2286H42.2414L41.8362 58.6543C42.0431 58.5943 42.1897 58.44 42.1897 58.1914C42.1897 57.8743 41.9397 57.7114 41.6034 57.7114H40.9138V59.2286ZM41.2069 58.4657V57.9686H41.5776C41.7759 57.9686 41.8879 58.0543 41.8879 58.2171C41.8879 58.3629 41.7759 58.4657 41.5776 58.4657H41.2069Z"/>
    </svg>`]]);
var DV = /<svg([^>]*)>/g;
function TM(e6, r6, t6, n) {
  let o = SV.get(e6);
  return o ? o.replace(DV, `<svg$1 width="${t6}" height="${n}" xmlns="http://www.w3.org/2000/svg" style="fill: ${r6};">`) : "";
}
$i();
var Gl = class Gl2 {
  constructor() {
    t(this, "loader");
    this.loader = new ul();
  }
  static getInstance() {
    return Gl2.instance || (Gl2.instance = new Gl2()), Gl2.instance;
  }
  getLoader() {
    return this.loader;
  }
  load(r6) {
    return new Promise((t6, n) => {
      this.loader.load(r6, t6, void 0, n);
    });
  }
};
t(Gl, "instance");
var M22 = Gl;
var Cu = M22.getInstance();
var wM = false;
var Dt;
var Is;
var wd;
var Dr;
var En;
var zl;
var Ci2;
var Ia;
var N1 = class extends Ka {
  constructor(t6, n, o) {
    super();
    v(this, Dt, { padding: 16, scale: 1, iconOnly: false, position: "bottom-left", color: "dark", onClick: () => {
      window?.open("https://www.mappedin.com");
    }, interactive: true, visible: true });
    v(this, Is);
    v(this, wd);
    v(this, Dr);
    v(this, En);
    v(this, zl);
    v(this, Ci2, 0);
    v(this, Ia, 0);
    t(this, "dirty", true);
    t(this, "getPositionAlignedCanvasCoordinates", (t10, n6) => ({ "top-left": { x: 0, y: 0 }, "top-right": { x: t10, y: 0 }, "bottom-left": { x: 0, y: n6 }, "bottom-right": { x: t10, y: n6 }, center: { x: t10 / 2, y: n6 / 2 }, top: { x: t10 / 2, y: 0 }, bottom: { x: t10 / 2, y: n6 }, left: { x: 0, y: n6 / 2 }, right: { x: t10, y: n6 / 2 } })[u(this, Dt).position]);
    t(this, "getPositionAlignedPadding", () => {
      let t10 = u(this, Dt).padding;
      if (typeof t10 == "number") return { "top-left": { x: t10, y: t10 }, "top-right": { x: -t10, y: t10 }, "bottom-left": { x: t10, y: -t10 }, "bottom-right": { x: -t10, y: -t10 }, center: { x: 0, y: 0 }, top: { x: 0, y: t10 }, bottom: { x: 0, y: -t10 }, left: { x: t10, y: 0 }, right: { x: -t10, y: 0 } }[u(this, Dt).position];
      let n6 = { top: t10.top ?? 0, right: t10.right ?? 0, bottom: t10.bottom ?? 0, left: t10.left ?? 0 };
      return { x: n6.left - n6.right, y: n6.top - n6.bottom };
    });
    o && Object.entries(o).forEach(([i, s6]) => {
      s6 !== void 0 && (u(this, Dt)[i] = s6);
    }), w(this, wd, t6), w(this, Is, n);
  }
  get color() {
    return u(this, Dt).color === "light" ? "white" : "#293136";
  }
  get iconName() {
    return u(this, Dt).iconOnly ? "icon" : "horizontal";
  }
  get minWidth() {
    return u(this, Dt).iconOnly ? EM : 75;
  }
  get defaultWidth() {
    return u(this, Dt).iconOnly ? CM : 150;
  }
  get aspectRatio() {
    return u(this, Dt).iconOnly ? SM : IM;
  }
  get options() {
    return { ...u(this, Dt) };
  }
  set options(t6) {
    w(this, Dt, { padding: t6.padding || u(this, Dt).padding, position: t6.position || u(this, Dt).position, iconOnly: t6.iconOnly || u(this, Dt).iconOnly, color: t6.color || u(this, Dt).color, scale: t6.scale || u(this, Dt).scale, onClick: u(this, Dt).onClick, interactive: t6.interactive ?? u(this, Dt).interactive, visible: t6.visible ?? u(this, Dt).visible });
  }
  get icon() {
    return TM(this.iconName, this.color, u(this, Ci2) * u(this, Is).pixelRatio, u(this, Ia) * u(this, Is).pixelRatio);
  }
  setSize(t6, n) {
    u(this, En) && (u(this, En).uniforms.uSize.value.x = t6, u(this, En).uniforms.uSize.value.y = n);
  }
  setXY(t6, n) {
    u(this, En) && (u(this, En).uniforms.uSize.value.w = t6, u(this, En).uniforms.uSize.value.z = n);
  }
  get width() {
    return u(this, Ci2);
  }
  get height() {
    return u(this, Ia);
  }
  getPositionAlignedOffset(t6, n) {
    return { "top-left": { x: 0, y: 0 }, "top-right": { x: -t6, y: 0 }, "bottom-left": { x: 0, y: -n }, "bottom-right": { x: -t6, y: -n }, center: { x: -(t6 / 2), y: -(n / 2) }, top: { x: -(t6 / 2), y: 0 }, bottom: { x: -(t6 / 2), y: -n }, left: { x: 0, y: -(n / 2) }, right: { x: -t6, y: -(n / 2) } }[u(this, Dt).position];
  }
  insertIntoQuadTree(t6) {
    u(this, zl) != null && typeof u(this, Dt).onClick == "function" && u(this, Dt).interactive && t6.insert(u(this, zl));
  }
  resize(t6, n) {
    if (u(this, Dt).visible !== true) return;
    let o = this.getPositionAlignedCanvasCoordinates(t6, n), i = this.getPositionAlignedPadding(), s6 = this.getPositionAlignedOffset(u(this, Ci2), u(this, Ia)), u6 = Math.min(t6 - u(this, Ci2), Math.max(0, o.x + i.x + s6.x)), l = Math.min(n - u(this, Ia), Math.max(0, o.y + i.y + s6.y));
    this.setSize(u(this, Ci2) / t6, u(this, Ia) / n), this.setXY(u6 / t6, l / n), w(this, zl, new _e(u6, l, u(this, Ci2), u(this, Ia), { entityId: "watermark" }));
  }
  update() {
    this.dirty && (u(this, Dt).visible === true ? (w(this, Ci2, Math.min(u(this, Is).canvasWidth, Math.max(this.minWidth, this.defaultWidth * u(this, Dt).scale))), w(this, Ia, u(this, Ci2) / this.aspectRatio), Cu.getLoader().load(`data:image/svg+xml;base64,${btoa(this.icon)}`, (t6) => {
      if (w(this, En, new nn({ uniforms: { uTexture: { value: t6 }, uSize: { value: new Jt(0, 0, 0, 0) }, uOpacity: { value: 0.7 } }, vertexShader: vM, fragmentShader: xM, depthWrite: false, depthTest: false, defines: { debug: wM }, wireframe: wM, transparent: true, visible: true })), u(this, Dr)) u(this, Dr).visible = true, u(this, Dr).material = u(this, En), u(this, Dr).material.needsUpdate = true;
      else {
        let n = new Ls(2, 2, 1, 1);
        w(this, Dr, new ve(n, u(this, En))), u(this, Dr).position.set(0, 0, -1), u(this, Dr).frustumCulled = false, u(this, Dr).renderOrder = 999;
        let o = new ki(1, 1, 1), i = new ve(o, new ps({ transparent: true, opacity: 0, depthTest: false, depthWrite: false }));
        i.frustumCulled = false, i.layers.set(1), u(this, Dr).add(i), u(this, wd).add(u(this, Dr));
      }
      this.resize(u(this, Is).canvasWidth, u(this, Is).canvasHeight), this.publish("texture-loaded");
    })) : u(this, Dr) && (u(this, Dr).visible = false), this.dirty = false);
  }
  destroy() {
    u(this, Dr) && (u(this, wd).remove(u(this, Dr)), ox(u(this, Dr))), w(this, Dr, void 0), u(this, En) && u(this, En).dispose(), w(this, En, void 0), w(this, zl, void 0);
  }
};
Dt = /* @__PURE__ */ new WeakMap(), Is = /* @__PURE__ */ new WeakMap(), wd = /* @__PURE__ */ new WeakMap(), Dr = /* @__PURE__ */ new WeakMap(), En = /* @__PURE__ */ new WeakMap(), zl = /* @__PURE__ */ new WeakMap(), Ci2 = /* @__PURE__ */ new WeakMap(), Ia = /* @__PURE__ */ new WeakMap();
$i();
var $1 = 100;
var FV = false;
var U1 = class extends Ka {
  constructor(t6, n) {
    super();
    t(this, "currentTotalBoundingBox");
    t(this, "state");
    t(this, "cameraSystem");
    t(this, "debugMesh", null);
    t(this, "dirty", true);
    t(this, "autoMinZoomLevel", true);
    this.state = t6, this.cameraSystem = n;
  }
  update() {
    if (this.dirty) {
      this.currentTotalBoundingBox == null && (this.currentTotalBoundingBox = new Ie(), this.state.entityScene.children.length === 0 ? this.currentTotalBoundingBox.setFromCenterAndSize(new C(0, 0, 0), new C($1 * 2, $1 * 2, 0)) : (this.currentTotalBoundingBox.setFromObject(this.state.entityScene), this.currentTotalBoundingBox.expandByScalar($1)));
      let t6 = new Ie().setFromObject(this.state.entityScene);
      this.currentTotalBoundingBox.union(t6);
      let n = t6.getSize(new C()), o = Math.max(n.x, n.y, n.z);
      for (let s6 of this.state.geometry2DMap.values()) s6.positionDirty === true && (this.currentTotalBoundingBox.expandByPoint(s6.position), s6.positionDirty = false);
      let i = j1.copy(this.currentTotalBoundingBox).expandByScalar(Math.max(o, $1)).getBoundingSphere(MV).radius;
      if (this.cameraSystem.panBounds = { center: this.currentTotalBoundingBox.getCenter(new C()), min: j1.min, max: j1.max, radius: i }, this.publish("update"), this.cameraSystem.dirty = true, this.dirty = false, FV && this.state.entityScene.parent instanceof Ho) {
        this.debugMesh && (this.state.entityScene.parent.remove(this.debugMesh), this.debugMesh = null), this.debugMesh = new de(), this.debugMesh.add(new ve(new sl(this.cameraSystem.panBounds.radius), new ps({ color: 16711680, transparent: true, opacity: 0.2 }))), this.debugMesh.position.copy(this.cameraSystem.panBounds.center), this.state.entityScene.parent.add(this.debugMesh);
        let s6 = new C();
        j1.getSize(s6);
        let u6 = new ki(s6.x, s6.y, s6.z), l = new ps({ color: 65280, wireframe: true, transparent: true, opacity: 0.5 }), c = new ve(u6, l);
        c.position.copy(this.currentTotalBoundingBox.getCenter(new C())), this.debugMesh.add(c);
      }
    }
  }
};
var j1 = new Ie();
var MV = new Te();
$i();
var A2 = " Mappedin";
var AV = "https://info.mappedin.com/feedback";
var B2 = ["top-left", "top-right", "bottom-left", "bottom-right"];
var OV2 = 640;
var BV = () => `<svg xmlns='http://www.w3.org/2000/svg' width='15' height='15' fill-rule='evenodd' viewBox='0 0 20 20'>
						<circle cx='10' cy='10' r='5.9' style='fill:rgba(255,255,255,1);'/>
						<path style='fill:rgba(0,0,0,0.7);' d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/>
					</svg>`;
var O2 = { custom: [], position: "bottom-right", feedback: true };
var Fd;
var G1 = class {
  constructor(r6, t6 = {}) {
    t(this, "controlContainerEl");
    t(this, "controlPositions");
    t(this, "compact");
    v(this, Fd);
    t(this, "attribContainerEl");
    t(this, "attribInnerEl");
    t(this, "attribButtonEl");
    t(this, "feedbackLinkEl");
    t(this, "attribHTML", A2);
    t(this, "customAttributions", []);
    t(this, "toggleAttribution", (r8) => {
      this.attribContainerEl != null && (r8.preventDefault(), this.attribContainerEl.classList.contains("mappedin-compact") && (this.attribContainerEl.classList.contains("mappedin-compact-show") ? (this.attribContainerEl.removeAttribute("open"), this.attribContainerEl.classList.remove("mappedin-compact-show")) : (this.attribContainerEl.classList.add("mappedin-compact-show"), this.attribContainerEl.setAttribute("open", ""))));
    });
    w(this, Fd, !!t6.outdoorEnabled), this.controlContainerEl = document.createElement("div"), this.controlContainerEl.classList.add("mappedin-control-container"), r6.appendChild(this.controlContainerEl), this.controlPositions = B2.reduce((n, o) => {
      let i = document.createElement("div");
      return i.classList.add(`mappedin-ctrl-${o}`), this.controlContainerEl.appendChild(i), n[o] = i, n;
    }, {});
  }
  addAttributionControl(r6 = O2) {
    let t6 = r6.position && B2.includes(r6.position) ? r6.position : O2.position;
    this.attribContainerEl = document.createElement("details"), this.attribContainerEl.classList.add("mappedin-ctrl-attrib", `mappedin-ctrl-attrib-${t6}`), this.attribContainerEl.open = true, this.attribContainerEl.ariaLabel = "Attribution", this.controlPositions[t6].appendChild(this.attribContainerEl), this.attribButtonEl = document.createElement("summary"), this.attribButtonEl.addEventListener("click", this.toggleAttribution), this.attribButtonEl.classList.add("mappedin-ctrl-attrib-button"), this.attribButtonEl.title = "Toggle attribution", this.attribButtonEl.ariaLabel = "Toggle attribution", this.attribButtonEl.tabIndex = 0, this.attribButtonEl.innerHTML = BV(), this.attribContainerEl.appendChild(this.attribButtonEl), this.attribInnerEl = document.createElement("div"), this.attribInnerEl.classList.add("mappedin-ctrl-attrib-inner"), this.attribHTML = u(this, Fd) ? A2 : "", this.attribInnerEl.innerHTML = this.attribHTML, this.attribContainerEl.appendChild(this.attribInnerEl), (r6.feedback ?? O2.feedback) && (this.feedbackLinkEl = document.createElement("a"), this.feedbackLinkEl.href = AV, this.feedbackLinkEl.target = "_blank", this.feedbackLinkEl.rel = "noopener", this.feedbackLinkEl.textContent = "Provide Feedback", this.feedbackLinkEl.classList.add("mappedin-ctrl-attrib-inner"), this.feedbackLinkEl.classList.add("mappedin-ctrl-attrib-inner-bold"), this.attribContainerEl.appendChild(this.feedbackLinkEl)), r6.custom && (this.customAttributions = r6.custom), this.updateAttributionDisplay();
  }
  updateAttribution(r6) {
    if (!r6.style || !this.attribInnerEl || !this.attribContainerEl) return;
    let t6 = u(this, Fd) ? [A2] : [], n = r6.style.sourceCaches;
    for (let o in n) {
      let i = n[o];
      if (i.used || i.usedForTerrain) {
        let s6 = i.getSource();
        s6.attribution && t6.indexOf(s6.attribution) < 0 && t6.push(s6.attribution);
      }
    }
    t6 = t6.filter((o) => String(o).trim()), t6 = t6.filter((o, i) => {
      for (let s6 = i + 1; s6 < t6.length; s6++) if (t6[s6].indexOf(o) >= 0) return false;
      return true;
    }), this.attribHTML = t6.join(" "), this.updateAttributionDisplay();
  }
  updateAttributionDisplay() {
    let r6 = [.../* @__PURE__ */ new Set([this.attribHTML, ...this.customAttributions])].filter(Boolean).join(" ");
    this.attribInnerEl && (this.attribInnerEl.innerHTML = r6);
  }
  resizeAttribution(r6) {
    this.attribContainerEl && (r6 <= OV2 || this.compact ? this.compact === false ? this.attribContainerEl.setAttribute("open", "") : !this.attribContainerEl.classList.contains("mappedin-compact") && !this.attribContainerEl.classList.contains("mappedin-attrib-empty") && (this.attribContainerEl.setAttribute("open", ""), this.attribContainerEl.classList.add("mappedin-compact", "mappedin-compact-show")) : (this.attribContainerEl.setAttribute("open", ""), this.attribContainerEl.classList.contains("mappedin-compact") && this.attribContainerEl.classList.remove("mappedin-compact", "mappedin-compact-show")));
  }
  destroyAttributionControl() {
    this.attribButtonEl && this.attribButtonEl.removeEventListener("click", this.toggleAttribution), this.attribContainerEl && (this.attribContainerEl.remove(), this.attribContainerEl = void 0, this.attribInnerEl = void 0, this.attribButtonEl = void 0);
  }
  resize(r6) {
    this.resizeAttribution(r6);
  }
  updateData(r6) {
    this.updateAttribution(r6);
  }
  destroy() {
    this.destroyAttributionControl(), this.controlContainerEl.remove(), this.compact = void 0;
  }
};
Fd = /* @__PURE__ */ new WeakMap();
$i();
var r0;
var n0;
var Md = class {
  constructor(r6, t6) {
    t(this, "mesh");
    t(this, "type", "custom-geometry");
    t(this, "dirty", true);
    t(this, "feature");
    t(this, "builder");
    t(this, "outline");
    v(this, r0, 1);
    t(this, "color", new Nt());
    v(this, n0, 0);
    this.mesh = new Co(), this.feature = r6, this.builder = t6;
  }
  get visible() {
    return this.mesh.visible;
  }
  set visible(r6) {
    this.mesh.visible = r6;
  }
  set opacity(r6) {
    w(this, r0, r6);
  }
  get opacity() {
    return u(this, r0);
  }
  setColor(r6) {
    this.color.set(r6);
  }
  get position() {
    return this.mesh?.position;
  }
  get altitude() {
    return u(this, n0);
  }
  set altitude(r6) {
    this.mesh && (this.mesh.position.z = r6, w(this, n0, r6));
  }
  get renderOrder() {
    return this.mesh ? this.mesh.renderOrder : 0;
  }
  set renderOrder(r6) {
    this.mesh && (this.mesh.renderOrder = r6);
  }
};
r0 = /* @__PURE__ */ new WeakMap(), n0 = /* @__PURE__ */ new WeakMap();
$i();
var z1 = class {
  constructor(r6, t6) {
    t(this, "state");
    t(this, "convertTo3DMapPosition");
    this.state = r6, this.convertTo3DMapPosition = t6;
  }
  update() {
    let r6, t6;
    for (let n of this.state.geometry3DIdsInScene) {
      let o = this.state.geometry3DMap.get(n);
      o?.type === "custom-geometry" && (r6 = o.components[0], t6 = o.components[1], r6.dirty && t6.visible !== false && (r6.position.copy(this.convertTo3DMapPosition(r6.feature.geometry.coordinates[1], r6.feature.geometry.coordinates[0], t6.altitude)), r6.builder.setup(r6.mesh), r6.mesh.traverse((i) => {
        i.userData = { ...i.userData, entityId: n, type: "custom-geometry" };
      }), r6.dirty = false), t6.visible !== false && r6.builder.update(r6.mesh));
    }
  }
};
$i();
$i();
function FM2(e6) {
  return e6.children.some((r6) => r6.userData.isOutline);
}
function MM2(e6, r6) {
  let t6 = e6.userData.entities3D.values().next().value;
  return t6 ? r6.geometry3DMap.get(t6)?.components[3] !== void 0 : false;
}
function V1(e6, r6, t6, n) {
  let i = e6.getAttribute("position").array, s6 = -1 / 0;
  for (let u6 = 0; u6 < r6.count; u6++) {
    let c = (r6.start + u6) * 3, d = i[c + 2];
    s6 = Math.max(s6, d);
  }
  for (let u6 = 0; u6 < r6.count; u6++) {
    let c = (r6.start + u6) * 3, d = i[c + 2];
    Math.abs(d - s6) < 1e-4 ? i[c + 2] = Math.max(t6 + n, 2e-4 + n) : i[c + 2] = n;
  }
  e6.attributes.position.needsUpdate = true;
}
$i();
function P2(e6) {
  let r6 = new ge(), t6 = e6.mesh?.geometry;
  if (!t6 || !e6.batchedProps?.range) return;
  let n = e6.batchedProps.range, o = n.start, i = n.count, s6 = t6.getAttribute("position");
  if (s6) {
    let c = new Float32Array(i * 3);
    for (let d = 0; d < i; d++) {
      let f = o + d;
      c[d * 3] = s6.array[f * 3], c[d * 3 + 1] = s6.array[f * 3 + 1], c[d * 3 + 2] = s6.array[f * 3 + 2];
    }
    r6.setAttribute("position", new xe(c, 3));
  }
  let u6 = t6.getAttribute("normal");
  if (u6) {
    let c = new Float32Array(i * 3);
    for (let d = 0; d < i; d++) {
      let f = o + d;
      c[d * 3] = u6.array[f * 3], c[d * 3 + 1] = u6.array[f * 3 + 1], c[d * 3 + 2] = u6.array[f * 3 + 2];
    }
    r6.setAttribute("normal", new xe(c, 3));
  }
  let l = t6.getAttribute("uv");
  if (l) {
    let c = new Float32Array(i * 2);
    for (let d = 0; d < i; d++) {
      let f = o + d;
      c[d * 2] = l.array[f * 2], c[d * 2 + 1] = l.array[f * 2 + 1];
    }
    r6.setAttribute("uv", new xe(c, 2));
  }
  if (t6.index) {
    let c = t6.index, d = new Uint32Array(i);
    for (let f = 0; f < i; f++) d[f] = c.array[o + f];
    r6.setIndex(new xe(d, 1));
  }
  return r6;
}
function AM2(e6, r6, t6) {
  let n = P2(e6);
  if (!n || !e6.mesh) return;
  e6.mesh.getMatrixAt(e6.instanceIndex, t6), e6.mesh.deleteInstance(e6.instanceIndex), e6.mesh.optimize();
  let o = r6.addGeometry(n);
  r6.addInstance(o), r6.setMatrixAt(o, t6);
  let i = r6.getGeometryIdAt(o), s6 = r6.getGeometryRangeAt(i);
  return s6 && e6.batchedProps && (e6.batchedProps.range = s6), n.dispose(), o;
}
$i();
$i();
var OM = `// Modified from https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderLib/linedashed.glsl.js
uniform float scale;
attribute float lineDistance;

varying float vLineDistance;
attribute float visibility;
varying vec4 v_color;

#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {

	vLineDistance = scale * lineDistance;
	v_color = color;

	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
    if (visibility < 0.5) {
        gl_Position = vec4(-2.0, -2.0, -2.0, 1.0);
    }
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>

}`;
$i();
var BM = `// Modified from https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderLib/linedashed.glsl.js
uniform vec3 diffuse;
uniform float opacity;

uniform float dashSize;
uniform float totalSize;

varying float vLineDistance;
varying vec4 v_color;

#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>

	if ( mod( vLineDistance, totalSize ) > dashSize ) {

		discard;

	}

	vec3 outgoingLight = vec3( 0.0 );

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>

	outgoingLight = diffuseColor.rgb; // simple shader

	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>

	// Discard alpha lower than 0.01 to avoid opacity fighting
    if (v_color.a <= 0.01) { 
		discard;
	}
}
`;
var H1 = class extends ys {
  constructor(r6) {
    super(r6), this.onBeforeCompile = (t6) => {
      t6.vertexShader = OM, t6.fragmentShader = BM;
    };
  }
};
$i();
var Si;
var Vl;
var Su;
var Du;
var o0;
var k2;
var Hl = class {
  constructor() {
    v(this, o0);
    v(this, Si, []);
    v(this, Vl, false);
    v(this, Su);
    v(this, Du);
  }
  get size() {
    return u(this, Si).length;
  }
  add(r6) {
    u(this, Si).push(r6), u(this, Vl) || x(this, o0, k2).call(this);
  }
  onComplete(r6) {
    w(this, Su, r6);
  }
  clearOnComplete() {
    w(this, Su, void 0);
  }
  clearAll() {
    w(this, Si, []), w(this, Vl, false), w(this, Su, void 0), u(this, Du) !== void 0 && (cancelIdleCallback(u(this, Du)), w(this, Du, void 0));
  }
};
Si = /* @__PURE__ */ new WeakMap(), Vl = /* @__PURE__ */ new WeakMap(), Su = /* @__PURE__ */ new WeakMap(), Du = /* @__PURE__ */ new WeakMap(), o0 = /* @__PURE__ */ new WeakSet(), k2 = function() {
  w(this, Vl, true), w(this, Du, requestIdleCallback((r6) => {
    let t6 = 0;
    for (; u(this, Si).length > 0 && r6.timeRemaining() > 2; ) {
      let n = u(this, Si).shift();
      n && (n(), t6++);
    }
    if (t6 === 0 && u(this, Si).length > 0 && r6.timeRemaining() < 2) {
      let n = u(this, Si).shift();
      n && n();
    }
    w(this, Du, void 0), u(this, Si).length > 0 ? x(this, o0, k2).call(this) : (w(this, Vl, false), u(this, Su) && u(this, Su).call(this));
  }, { timeout: 3e3 }));
};
var _V = 80;
var Zl;
var Ad;
var W1;
var X1;
var J1;
var Z1 = class extends Ka {
  constructor(t6) {
    super();
    t(this, "rendererState");
    t(this, "outlineOpacitiesDirty", true);
    t(this, "useIdleFramesOnly", true);
    v(this, Zl, true);
    v(this, Ad, -1 / 0);
    t(this, "idleBuildQueue", new Hl());
    t(this, "idleComputeBoundingSphereQueue", new Hl());
    v(this, W1, /* @__PURE__ */ new Map());
    v(this, X1, new H1({ vertexColors: true, linewidth: 1, transparent: true, opacity: 1, side: Mn }));
    v(this, J1, () => {
      this.publish("needs-render");
    });
    this.rendererState = t6, this.idleBuildQueue.onComplete(u(this, J1));
  }
  get geometries3DDirty() {
    return u(this, Zl);
  }
  set geometries3DDirty(t6) {
    w(this, Zl, t6);
  }
  buildOutlines(t6) {
    let n = [];
    for (let h of t6.userData.entities3D.values()) {
      let b = this.rendererState.geometry3DMap.get(h);
      if (b instanceof Sr && b.type === "geometry" && b.components[3] && b.components[3].dirty === true && b.components[0].material != null) {
        let I = b.components[0].geometry, E = false;
        I || (I = P2(b.components[0]), E = true);
        let v6 = b.components[1];
        n.push([b.components[3], new tl(I, v6.bevel?.enabled ? 1 : _V)]), E && (I?.dispose(), I = void 0);
      }
    }
    if (n.length === 0) return;
    let o = M(n.map((h) => h[1]), false);
    if (o == null) return;
    let i = o.getAttribute("position"), s6 = new Float32Array(i.count * 4), u6 = new xe(s6, 4);
    o.setAttribute("color", u6);
    let l = new Uint8Array(i.count);
    l.fill(0);
    let c = new xe(l, 1, false);
    o.setAttribute("visibility", c);
    let d = 0;
    for (let h = 0; h < n.length; h++) {
      let [b, I] = n[h], E = I.getAttribute("position").count;
      b.edgeColors = u6, b.edgeVisibility = c, b.geometry = o, b.ranges = { count: E, start: d }, d += E, I.dispose();
    }
    let f = new kr(o, u(this, X1));
    f.userData.isOutline = true, t6.add(f);
  }
  update(t6, n = true) {
    let o;
    if (this.geometries3DDirty) {
      for (let s6 of this.rendererState.geometry3DIdsInScene) {
        let u6 = this.rendererState.geometry3DMap.get(s6);
        u6 instanceof lr && MM2(u6, this.rendererState) && !FM2(u6) && u6.userData.entities3D.size > 0 && (this.useIdleFramesOnly ? this.idleBuildQueue.add(() => this.buildOutlines(u6)) : this.buildOutlines(u6));
      }
      w(this, Zl, false), this.outlineOpacitiesDirty = true;
    }
    for (let s6 of this.rendererState.geometry3DIdsInScene) {
      let u6 = this.rendererState.geometry3DMap.get(s6);
      if (u6 instanceof Sr && u6.type === "geometry" && u6.components[3] && u6.components[3].dirty === true && u6.components[0].material != null && u6.parentObject3D instanceof lr) {
        let l = u6.components[3].geometry;
        if (!l) continue;
        let c = u6.components[3];
        if (!c) continue;
        let d = c.enabled && u6.components[1].visible;
        if (c.visible !== d && (c.visible = d), !c.visible) continue;
        let f = c.edgeColors;
        if (!f || !c.ranges) continue;
        let h = new Nt(c.color);
        for (let v6 = 0; v6 < c.ranges.count; v6++) {
          let x6 = c.ranges.start + v6;
          f.setXYZ(x6, h.r, h.g, h.b);
        }
        let b = u6.components[1].height, I = u6.components[1].altitude;
        u6.components[1]?.bevel?.enabled || V1(l, c.ranges, b, I), l.attributes.color.needsUpdate = true, this.idleComputeBoundingSphereQueue.add(() => l.computeBoundingSphere()), c.dirty = false;
      }
    }
    let i = n ? aN(t6, 16, 19, 0, 1) : u(this, Ad);
    if ((i !== u(this, Ad) || this.outlineOpacitiesDirty) && this.rendererState.geometry3DIdsInScene.size > 0) {
      for (let s6 of this.rendererState.geometry3DIdsInScene) if (o = this.rendererState.geometry3DMap.get(s6), o?.type === "geometry" && o.components[0] instanceof Mi) {
        let u6 = o.components[3];
        if (u6 && u6.edgeColors && u6.geometry && u6.visible) {
          let l = Math.min(i, o.components[1].opacity * Cwe(o));
          if (u6.currentOpacity !== l) {
            for (let c = 0; c < u6.ranges.count; c++) {
              let d = u6.ranges.start + c;
              u6.edgeColors.setW(d, l);
            }
            u6.geometry.attributes.color.needsUpdate = true;
          }
        }
      }
    }
    w(this, Ad, i), w(this, Zl, false), this.outlineOpacitiesDirty = false;
  }
  destroy() {
    u(this, W1).clear(), this.idleBuildQueue.clearAll(), this.idleComputeBoundingSphereQueue.clearAll();
  }
};
Zl = /* @__PURE__ */ new WeakMap(), Ad = /* @__PURE__ */ new WeakMap(), W1 = /* @__PURE__ */ new WeakMap(), X1 = /* @__PURE__ */ new WeakMap(), J1 = /* @__PURE__ */ new WeakMap();
$i();
$i();
var Y1 = class extends ve {
  constructor() {
    super(...arguments);
    t(this, "userData", { entityId: "" });
  }
};
var LV = external_exports.object({ flipImageToFaceCamera: external_exports.boolean().optional(), url: external_exports.string() });
var RV = external_exports.object({ type: external_exports.enum(["Feature"]), properties: external_exports.object({ width: external_exports.number(), height: external_exports.number(), rotation: external_exports.number().min(0).max(360).optional(), verticalOffset: external_exports.number().optional() }), geometry: Cd });
function PM(e6, r6, t6) {
  external_exports.union([external_exports.number(), external_exports.string()]).parse(e6), RV.parse(r6), LV.parse(t6);
}
var K1 = class {
  constructor(r6) {
    t(this, "mesh", new Co());
    t(this, "imageMesh");
    t(this, "outline");
    t(this, "type", "image");
    t(this, "instanceIndex", -1);
    t(this, "geometry");
    t(this, "material");
    t(this, "feature");
    t(this, "position", new C());
    this.feature = r6;
  }
  get visible() {
    return this.mesh?.visible ?? false;
  }
  set visible(r6) {
    this.mesh && (this.mesh.visible = r6);
  }
};
$i();
function _2(e6, r6) {
  return { x: e6.x * Math.cos(r6) - e6.y * Math.sin(r6), y: e6.x * Math.sin(r6) + e6.y * Math.cos(r6) };
}
function NV2(e6, r6) {
  return e6.map((t6) => _2(t6, r6));
}
function $V(e6) {
  let r6 = 1 / 0, t6 = 1 / 0, n = -1 / 0, o = -1 / 0;
  for (let i of e6) r6 = Math.min(r6, i.x), t6 = Math.min(t6, i.y), n = Math.max(n, i.x), o = Math.max(o, i.y);
  return { minX: r6, minY: t6, maxX: n, maxY: o };
}
function jV2(e6, r6) {
  let t6 = false;
  for (let n = 0, o = r6.length - 1; n < r6.length; o = n++) {
    let i = r6[n].x, s6 = r6[n].y, u6 = r6[o].x, l = r6[o].y;
    s6 > e6.y != l > e6.y && e6.x < (u6 - i) * (e6.y - s6) / (l - s6) + i && (t6 = !t6);
  }
  return t6;
}
function kM(e6, r6, t6, n, o) {
  for (let i = 0; i < o; i++) for (let s6 = 0; s6 < n; s6++) if (e6[t6 + i][r6 + s6] !== 1) return false;
  return true;
}
function UV2(e6, r6, t6) {
  let n = e6.maxX - e6.minX, o = e6.maxY - e6.minY, i, s6, u6 = { ...e6 };
  return n / o > r6 ? (s6 = o / t6, i = s6 * r6, u6.minX += (n - i * t6) / 2) : (i = n / t6, s6 = i / r6, u6.minY += (o - s6 * t6) / 2), { dx: i, dy: s6, gridBounds: u6 };
}
function GV2(e6, r6, t6, n, o) {
  let i = Array(t6).fill(0).map(() => Array(t6).fill(0));
  for (let s6 = 0; s6 < t6; s6++) for (let u6 = 0; u6 < t6; u6++) {
    let l = { x: r6.minX + u6 * n, y: r6.minY + s6 * o };
    jV2(l, e6) && (i[s6][u6] = 1);
  }
  return i;
}
function zV2(e6, r6) {
  let t6 = Array(r6).fill(0).map(() => Array(r6).fill(0));
  for (let n = 0; n < r6; n++) for (let o = 0; o < r6; o++) if (e6[n][o] === 1) {
    let i = 0;
    for (let s6 = 1; s6 <= Math.min(r6 - o, r6 - n) && kM(e6, o, n, s6, s6); s6++) i = s6;
    t6[n][o] = i;
  }
  return t6;
}
function VV2(e6, r6, t6, n, o, i) {
  let s6 = 0, u6 = 0, l = 0;
  for (let c = 0; c < n; c++) for (let d = 0; d < n; d++) if (e6[c][d] === 1) {
    let f = Math.pow(r6[c][d], 2), h = t6.minX + d * o, b = t6.minY + c * i;
    s6 += f, u6 += h * f, l += b * f;
  }
  return { x: u6 / s6, y: l / s6 };
}
function HV(e6, r6, t6, n, o, i, s6) {
  let u6 = -1 / 0, l = null, c = e6.length, d = Math.sqrt(Math.pow(r6.maxX - r6.minX, 2) + Math.pow(r6.maxY - r6.minY, 2));
  for (let f = 0; f < c; f++) for (let h = 0; h < c; h++) if (e6[f][h] === 1) for (let b = 1; b <= c - h; b++) {
    let I = b;
    if (!(I > c - f) && kM(e6, h, f, b, I)) {
      let E = b * I, v6 = r6.minX + (h + b / 2) * t6, x6 = r6.minY + (f + I / 2) * n, D = { x: v6, y: x6 }, S = Math.sqrt(Math.pow(D.x - o.x, 2) + Math.pow(D.y - o.y, 2)) / d, F = E * (1 - i) - S * i * E;
      F > u6 && (u6 = F, l = { center: D, width: b * t6 * s6, height: b * n * s6 });
    }
  }
  return l;
}
function L2(e6, r6, t6, n = {}) {
  let { scaleFactor: o = 0.9, centerPriority: i = 0.5, resolution: s6 = 100, minimumSizeRatio: u6 = 0.5 } = n, l = Hu(t6), c = e6.width / e6.height, d = NV2(r6, l), f = $V(d), { dx: h, dy: b, gridBounds: I } = UV2(f, c, s6), E = GV2(d, I, s6, h, b), v6 = zV2(E, s6), x6 = VV2(E, v6, I, s6, h, b), D = HV(E, I, h, b, x6, i, o);
  return !D || D.width < e6.width * u6 || D.height < e6.height * u6 ? e6 : { ...D, center: _2(D.center, -l), rotation: t6, polygonCenter: _2(x6, -l) };
}
var i0 = Math.PI * 2;
var ZV = Math.PI / 2;
var WV = Math.PI * 1.5;
var XV = S5(ZV, 2);
var JV = S5(WV, 2);
var YV = 0.01;
var _M = false;
var q1 = class extends Ka {
  constructor(t6, n, o, i = 0, s6 = 0, u6 = {}) {
    super();
    t(this, "rendererState");
    t(this, "convertTo3DMapPosition");
    t(this, "projectToScreen");
    t(this, "initialBearing", 0);
    t(this, "naturalBearing", 0);
    t(this, "imagePlacementOptions");
    t(this, "cameraFrustum", new si());
    t(this, "imageLoadingCache", /* @__PURE__ */ new Map());
    t(this, "currentImageScreenBBoxes", []);
    t(this, "viewProjectionMatrix", new kt());
    this.rendererState = t6, this.convertTo3DMapPosition = n, this.projectToScreen = o, this.initialBearing = i, this.naturalBearing = s6, this.imagePlacementOptions = u6;
  }
  createImageMesh(t6, n, o, i = 0, s6, u6) {
    let l = { width: o.width, height: o.height, center: this.convertTo3DMapPosition(s6), rotation: o.rotation ?? 0 }, c = this.imagePlacementOptions.mode ?? "default", d = (() => {
      switch (c) {
        case "fit-nearest-90":
          let I = (this.initialBearing - this.naturalBearing + 360) % 180;
          return I >= 45 && I <= 135 ? L2(l, u6, l.rotation + 90, this.imagePlacementOptions) : l;
        case "fit-initial-bearing":
          return L2(l, u6, this.initialBearing, this.imagePlacementOptions);
        case "default":
        case "none":
        default:
          return l;
      }
    })();
    if (_M && d.polygonCenter) {
      let I = new ve(new sl(1), new ol({ color: 65280 }));
      I.position.set(d.polygonCenter.x, d.polygonCenter.y, i), this.rendererState.entityScene.add(I);
    }
    let f = new ol({ transparent: true, depthWrite: false, side: ln }), h = new Ls(d.width, d.height), b = new Y1(h);
    if (b.visible = false, b.renderOrder = rM.IMAGE_MESH, this.getOrDownloadImage(n)?.then((I) => {
      f.map = I, f.needsUpdate = true, f.map.colorSpace = ke, b.visible = true, this.publish("image-loaded");
    }), b.userData.entityId = t6, b.material = f, _M) {
      let I = new ve(new Ls(o.width, o.height), new ol({ color: "gray" }));
      b.add(I);
      let E = new wl();
      b.add(E), E.scale.set(10, 10, 10);
    }
    return b.position.set(d.center.x, d.center.y, i + YV), b.rotation.z = (-yd.degToRad(d.rotation) + i0) % i0, b;
  }
  getOrDownloadImage(t6) {
    if (this.imageLoadingCache.has(t6)) return this.imageLoadingCache.get(t6)?.promise;
    {
      let n = new Promise((o) => {
        Cu.getLoader().load(t6, (i) => {
          let s6 = this.imageLoadingCache.get(t6);
          s6 && !s6.loaded && (s6.loaded = true), o(i);
        });
      });
      return this.imageLoadingCache.set(t6, { loaded: false, promise: n }), n;
    }
  }
  flipIfNeeded(t6, n) {
    if (t6.imageMesh == null) return;
    let o = -n, i = t6.imageMesh.rotation.z, s6 = S5((i - o + i0) % i0, 2);
    s6 > XV && s6 < JV && (t6.imageMesh.rotation.z = (i + Math.PI) % i0);
  }
  update(t6) {
    this.currentImageScreenBBoxes = [], this.viewProjectionMatrix.identity().multiply(this.rendererState.cameraObject.projectionMatrix).multiply(this.rendererState.cameraObject.matrixWorldInverse), this.cameraFrustum.setFromProjectionMatrix(this.viewProjectionMatrix);
    let n, o, i;
    for (let s6 of this.rendererState.geometry3DIdsInScene) if (n = this.rendererState.geometry3DMap.get(s6), n?.type === "image") {
      if (o = n.components[0], i = n.components[1], i.url && o.imageMesh == null) {
        let u6 = this.convertTo3DMapPosition(o.feature.geometry.coordinates), l = { x: u6.x, y: u6.y };
        o.imageMesh = this.createImageMesh(n.id, i.url, o.feature.properties, o.feature.properties.verticalOffset, o.feature.geometry.coordinates, [l]), o.mesh.add(o.imageMesh), o.position.copy(o.imageMesh.position);
      }
      o.imageMesh && (i.flipImageToFaceCamera && this.flipIfNeeded(o, t6), o.imageMesh.material instanceof ol && i.dirty && (o.imageMesh.material.opacity = i.opacity));
    } else if (n?.type === "geometry") {
      if (o = n.components[0], i = n.components[1], i.showImage && o.feature.properties?.image && o.imageMesh == null && o.visible && o.mesh != null && o.mesh.parent != null && o.feature.properties?.image.position != null && o.feature.geometry.coordinates != null && o.feature.geometry.coordinates.length > 0) {
        let u6 = o.feature.geometry.coordinates[0].map((c) => {
          let d = this.convertTo3DMapPosition(c);
          return { x: d.x, y: d.y };
        }), l = this.createImageMesh(s6, o.feature.properties?.image.path, o.feature.properties?.image, i.height, o.feature.properties?.image.position, u6);
        o.mesh.parent.add(l), o.imageMesh = l;
      }
      if (o.imageMesh) {
        if (!o.visible) o.imageMesh.visible = false;
        else if (i.showImage && !o.imageMesh.visible) if (i.url) {
          let u6 = this.imageLoadingCache.get(i.url);
          u6 && u6.loaded && (o.imageMesh.visible = true);
        } else o.imageMesh.visible = true;
        else !i.showImage && o.imageMesh.visible && (o.imageMesh.visible = false);
        i.flipImageToFaceCamera && this.flipIfNeeded(o, t6), i.enableImageCollisions === true && this.updateImageScreenBBoxes(o);
      }
    }
  }
  updateImageScreenBBoxes(t6) {
    if (t6.imageMesh == null) return;
    let n = t6.imageMesh.geometry.boundingBox;
    if (n != null) {
      let o = new C();
      if (t6.imageMesh.getWorldPosition(o), !this.cameraFrustum.containsPoint(o)) return;
      let i = new at();
      this.projectToScreen(i, o);
      let s6 = [new C(n.min.x, n.min.y, n.min.z), new C(n.max.x, n.min.y, n.min.z), new C(n.min.x, n.max.y, n.min.z), new C(n.max.x, n.max.y, n.min.z), new C(n.min.x, n.min.y, n.max.z), new C(n.max.x, n.min.y, n.max.z), new C(n.min.x, n.max.y, n.max.z), new C(n.max.x, n.max.y, n.max.z)], u6 = [];
      for (let b of s6) {
        let I = b.clone().applyMatrix4(t6.imageMesh.matrixWorld), E = new at();
        this.projectToScreen(E, I), u6.push(E);
      }
      let l = 1 / 0, c = 1 / 0, d = -1 / 0, f = -1 / 0;
      for (let b of u6) l = Math.min(l, b.x), c = Math.min(c, b.y), d = Math.max(d, b.x), f = Math.max(f, b.y);
      let h = new _e(i.x, i.y, d - l, f - c);
      this.currentImageScreenBBoxes.push(h);
    }
  }
};
$i();
var KV = 250;
var Tu;
var Q1 = class extends Ka {
  constructor(t6, n) {
    super();
    t(this, "cameraDirty", true);
    t(this, "focusablesDirty", true);
    t(this, "state");
    t(this, "camera");
    t(this, "debugEl", null);
    t(this, "raycasters", []);
    t(this, "collisions", /* @__PURE__ */ new Map());
    t(this, "focusableEntities", /* @__PURE__ */ new Set());
    t(this, "debugRaycasters", false);
    v(this, Tu);
    t(this, "update", (t10 = false, n6 = Date.now()) => {
      this.focusablesDirty && this.updateFocusableEntities(), !t10 && (Date.now() - n6 > KV || (u(this, Tu) && cancelAnimationFrame(u(this, Tu)), w(this, Tu, requestAnimationFrame(() => {
        this.updateRaf();
      }))));
    });
    this.state = t6, this.camera = n, this.buildRaycasters();
  }
  resize() {
    this.buildRaycasters();
  }
  buildRaycasters() {
    this.debugEl && this.debugEl.remove();
    let t6 = new at(this.state.canvasWidth / 2, this.state.canvasHeight / 2), n = new at(t6.x / 1.2, t6.y / 1.2), o = new at(t6.x + (t6.x - n.x), n.y), i = new at(n.x, t6.y + (t6.y - n.y)), s6 = new at(o.x, i.y), u6 = new at(t6.x, t6.y / 1.5), l = new at(t6.x, t6.y + (t6.y - u6.y));
    this.debugEl = document.createElement("div"), Object.assign(this.debugEl.style, { position: "absolute", top: "0", left: "0", width: "100%", height: "100%", pointerEvents: "none" }), document.body.append(this.debugEl), this.raycasters = [t6, u6, l, n, o, i, s6].map((c, d) => {
      if (this.debugRaycasters) {
        let E = document.createElement("div");
        E.style.position = "absolute", E.style.top = c.y + "px", E.style.left = c.x + "px", E.style.width = "10px", E.style.height = "10px", E.style.backgroundColor = "red", this.debugEl.append(E);
      }
      let f = c.x / this.state.canvasWidth * 2 - 1, h = -(c.y / this.state.canvasHeight) * 2 + 1, b = new at(f, h), I = new El();
      return I.setFromCamera(b, this.camera), [I, b, d === 0 ? 10 : d < 7 ? 2 : 1];
    });
  }
  updateFocusableEntities() {
    this.focusableEntities.clear();
    let t6, n, o;
    for (let i of this.state.geometry3DIdsInScene) if (o = this.state.geometry3DMap.get(i), o != null) {
      if (o.type === "group-container" && o.components[1] !== void 0 && o.components[1] instanceof hm) {
        if (n = o.components[1], n.dirty === true || n.focusMesh == null) {
          n.focusMesh && ox(n.focusMesh);
          let s6 = new Ie();
          s6.setFromObject(o);
          let u6 = s6.max.x - s6.min.x, l = s6.max.y - s6.min.y, c = s6.max.z - s6.min.z;
          if (!isFinite(u6) || !isFinite(l) || !isFinite(c) || isNaN(u6) || isNaN(l) || isNaN(c) || u6 <= 0 || l <= 0 || c <= 0) continue;
          let d = new ki(u6, l, c), f = { transparent: true, opacity: this.debugRaycasters ? 1 : 0, visible: this.debugRaycasters };
          if (this.debugRaycasters) {
            let I = ["red", "green", "blue", "yellow", "purple", "orange", "pink", "brown", "gray", "black"];
            f.color = I[Math.floor(Math.random() * I.length)];
          }
          let h = new ps(f), b = new ve(d, h);
          b.position.set((s6.min.x + s6.max.x) / 2, (s6.min.y + s6.max.y) / 2, 0), b.userData = { entityId: o.userData.entityId }, n.focusMesh = b, o.add(b), o.components[1].dirty = false;
        }
        this.focusableEntities.add(n.focusMesh);
      } else if (o.type === "geometry" && o.components[4] && o.components[4] instanceof hm && (t6 = o.components[0], n = o.components[4], t6 instanceof Mi && t6.geometry != null && (n.dirty === true || n.focusMesh == null))) {
        if (n.focusMesh == null) {
          let s6 = new ve(t6.geometry);
          s6.userData = { entityId: o.id }, n.focusMesh = s6;
        }
        this.focusableEntities.add(n.focusMesh);
      }
    }
    this.focusablesDirty = false;
  }
  updateRaf() {
    if (this.focusableEntities.size === 0) {
      this.publish("geometry-in-focus", []);
      return;
    }
    this.cameraDirty && this.raycast();
  }
  raycast() {
    this.collisions.clear();
    for (let [n, o] of this.raycasters) n.setFromCamera(o, this.camera);
    for (let [n, o, i] of this.raycasters) n.intersectObjects(Array.from(this.focusableEntities.values())).forEach((u6) => {
      if (u6?.object != null && "isMesh" in u6.object && u6?.object.isMesh) {
        let l = u6.object.userData.entityId, c = this.collisions.get(l) ?? 0;
        this.collisions.set(l, c + i);
      }
    });
    let t6 = Array.from(this.collisions, ([n, o]) => ({ entityId: n, weight: o })).sort((n, o) => o.weight - n.weight).map(({ entityId: n }) => n);
    this.publish("geometry-in-focus", t6), this.cameraDirty = false;
  }
  showRaycasters() {
    this.debugRaycasters = true, this.buildRaycasters();
  }
  hideRaycasters() {
    this.debugRaycasters = false, this.buildRaycasters();
  }
  destroy() {
    u(this, Tu) && cancelAnimationFrame(u(this, Tu)), this.debugEl && this.debugEl.remove(), this.collisions.clear(), this.focusableEntities.clear(), this.raycasters = [];
  }
};
Tu = /* @__PURE__ */ new WeakMap();
$i();
$i();
$i();
$i();
function e42(e6, r6) {
  r6 === void 0 && (r6 = {});
  var t6 = wp(e6);
  switch (!r6.properties && e6.type === "Feature" && (r6.properties = e6.properties), t6.type) {
    case "Polygon":
      return qV(t6, r6);
    case "MultiPolygon":
      return QV(t6, r6);
    default:
      throw new Error("invalid poly");
  }
}
function qV(e6, r6) {
  r6 === void 0 && (r6 = {});
  var t6 = wp(e6), n = t6.coordinates, o = r6.properties ? r6.properties : e6.type === "Feature" ? e6.properties : {};
  return LM(n, o);
}
function QV(e6, r6) {
  r6 === void 0 && (r6 = {});
  var t6 = wp(e6), n = t6.coordinates, o = r6.properties ? r6.properties : e6.type === "Feature" ? e6.properties : {}, i = [];
  return n.forEach(function(s6) {
    i.push(LM(s6, o));
  }), s_e(i);
}
function LM(e6, r6) {
  return e6.length > 1 ? l_e(e6, r6) : jS(e6[0], r6);
}
function eH(e6, r6) {
  var t6 = true;
  return JB(e6, function(n) {
    JB(r6, function(o) {
      if (t6 === false) return false;
      t6 = tH(n.geometry, o.geometry);
    });
  }), t6;
}
function tH(e6, r6) {
  switch (e6.type) {
    case "Point":
      switch (r6.type) {
        case "Point":
          return !iH(e6.coordinates, r6.coordinates);
        case "LineString":
          return !RM(r6, e6);
        case "Polygon":
          return !gs(e6, r6);
      }
      break;
    case "LineString":
      switch (r6.type) {
        case "Point":
          return !RM(e6, r6);
        case "LineString":
          return !rH(e6, r6);
        case "Polygon":
          return !NM(r6, e6);
      }
      break;
    case "Polygon":
      switch (r6.type) {
        case "Point":
          return !gs(r6, e6);
        case "LineString":
          return !NM(e6, r6);
        case "Polygon":
          return !nH(r6, e6);
      }
  }
  return false;
}
function RM(e6, r6) {
  for (var t6 = 0; t6 < e6.coordinates.length - 1; t6++) if (oH(e6.coordinates[t6], e6.coordinates[t6 + 1], r6.coordinates)) return true;
  return false;
}
function rH(e6, r6) {
  var t6 = Ap(e6, r6);
  return t6.features.length > 0;
}
function NM(e6, r6) {
  for (var t6 = 0, n = r6.coordinates; t6 < n.length; t6++) {
    var o = n[t6];
    if (gs(o, e6)) return true;
  }
  var i = Ap(r6, e42(e6));
  return i.features.length > 0;
}
function nH(e6, r6) {
  for (var t6 = 0, n = e6.coordinates[0]; t6 < n.length; t6++) {
    var o = n[t6];
    if (gs(o, r6)) return true;
  }
  for (var i = 0, s6 = r6.coordinates[0]; i < s6.length; i++) {
    var u6 = s6[i];
    if (gs(u6, e6)) return true;
  }
  var l = Ap(e42(e6), e42(r6));
  return l.features.length > 0;
}
function oH(e6, r6, t6) {
  var n = t6[0] - e6[0], o = t6[1] - e6[1], i = r6[0] - e6[0], s6 = r6[1] - e6[1], u6 = n * s6 - o * i;
  return u6 !== 0 ? false : Math.abs(i) >= Math.abs(s6) ? i > 0 ? e6[0] <= t6[0] && t6[0] <= r6[0] : r6[0] <= t6[0] && t6[0] <= e6[0] : s6 > 0 ? e6[1] <= t6[1] && t6[1] <= r6[1] : r6[1] <= t6[1] && t6[1] <= e6[1];
}
function iH(e6, r6) {
  return e6[0] === r6[0] && e6[1] === r6[1];
}
var $M = eH;
function R2(e6, r6) {
  var t6 = false;
  return JB(e6, function(n) {
    JB(r6, function(o) {
      if (t6 === true) return true;
      t6 = !$M(n.geometry, o.geometry);
    });
  }), t6;
}
var aH = 5e3;
var N2 = "outdoor-system-debug-container";
var jM = false;
var Es;
var cr;
var a0;
var Od;
var Cs2;
var wu;
var Wl2;
var Vo2;
var Bd;
var s0;
var r4;
var n4;
var Di;
var $2;
var Pd;
var Xl;
var UM;
var o4;
var u0;
var GM;
var zM;
var t4 = class {
  constructor(r6) {
    v(this, Di);
    v(this, Es, true);
    v(this, cr);
    t(this, "idleQueue", new Hl());
    v(this, a0, "");
    v(this, Od, /* @__PURE__ */ new Set());
    v(this, Cs2, /* @__PURE__ */ new Set());
    v(this, wu);
    v(this, Wl2);
    v(this, Vo2, null);
    v(this, Bd, false);
    v(this, s0, (r8) => {
      if (!u(this, cr)) throw new Error("Map not initialized");
      let n = [[r8[0], r8[1]], [r8[2], r8[1]], [r8[2], r8[3]], [r8[0], r8[3]]].map((l) => u(this, cr).project(l)), o = Math.max(...n.map((l) => l.x)), i = Math.min(...n.map((l) => l.x)), s6 = Math.max(...n.map((l) => l.y)), u6 = Math.min(...n.map((l) => l.y));
      return [new WB.default(i, u6), new WB.default(o, s6)];
    });
    v(this, r4, () => {
      u(this, Vo2) && (clearTimeout(u(this, Vo2)), w(this, Vo2, null), w(this, Es, false));
    });
    v(this, n4, () => {
      u(this, Vo2) && (clearTimeout(u(this, Vo2)), w(this, Vo2, null)), w(this, Vo2, setTimeout(() => {
        u(this, r4).call(this);
      }, aH));
    });
    v(this, Pd, async () => {
      if (jM && u(this, wu)) {
        let r8 = u(this, s0).call(this, u(this, wu));
        x(this, Di, zM).call(this, r8);
      }
      if (!(!u(this, cr) || !u(this, Bd)) && u(this, Es) && !(!u(this, Cs2) || u(this, Cs2).size === 0) && (u(this, Di, UM) && u(this, o4).call(this), u(this, wu) && u(this, Wl2))) {
        let r8 = u(this, s0).call(this, u(this, wu)), t6 = u(this, cr).queryRenderedFeatures(r8, { layers: Array.from(u(this, Cs2)) });
        if (t6.length > 0) {
          this.idleQueue.onComplete(() => {
            u(this, Xl).length > 0 && (u(this, Cs2).forEach((n) => {
              u(this, cr)?.setFilter(n, ["all", ...u(this, Xl)]);
            }), w(this, Es, false)), w(this, Xl, []);
          });
          for (let n of t6) this.idleQueue.add(() => {
            if (n.geometry != null && "coordinates" in n.geometry) {
              if (u(this, Wl2) == null) return;
              let o;
              if (n.geometry.type === "Polygon" ? o = a_e(n.geometry.coordinates) : n.geometry.type === "MultiPolygon" && (o = u_e(n.geometry.coordinates)), !o) return;
              for (let i of u(this, Wl2)) if (R2(i, o)) {
                u(this, Xl).push(["!=", ["id"], n.id]);
                return;
              }
            }
          });
        }
      }
    });
    v(this, Xl, []);
    v(this, o4, () => {
      this.idleQueue.clearAll();
    });
    v(this, u0, (r8) => {
      if (u(this, cr) && r8 && r8.dataType === "style" && r8.type === "styledata" && u(this, Od).size > 0) {
        let t6 = r8?.style?.stylesheet?.id;
        (!t6 || t6 !== u(this, a0)) && (w(this, a0, t6), x(this, Di, $2).call(this), w(this, Es, true));
      }
    });
    r6 && (w(this, cr, r6), u(this, cr).on("styledata", u(this, u0)), u(this, cr).on("render", u(this, Pd)), w(this, Bd, u(this, cr).loaded()), u(this, cr).on("load", () => {
      w(this, Bd, true);
    })), jM && x(this, Di, GM).call(this);
  }
  hideLayersIntersectingPolygons(r6, t6, n) {
    u(this, Vo2) && clearTimeout(u(this, Vo2)), u(this, n4).call(this), w(this, wu, r6), w(this, Wl2, t6.reduce((o, i) => {
      if (i.geometry.type === "Polygon") {
        let s6 = a_e(i.geometry.coordinates);
        o.push(s6);
      } else i.geometry.type === "MultiPolygon" && o.push(...i.geometry.coordinates.map((s6) => a_e(s6)));
      return o;
    }, []));
    for (let o of n) u(this, Od).add(o);
    w(this, Es, true), x(this, Di, $2).call(this), u(this, Pd).call(this);
  }
  destroy() {
    u(this, cr) && (u(this, cr).off("styledata", u(this, u0)), u(this, cr).off("render", u(this, Pd))), this.idleQueue.clearAll();
  }
};
Es = /* @__PURE__ */ new WeakMap(), cr = /* @__PURE__ */ new WeakMap(), a0 = /* @__PURE__ */ new WeakMap(), Od = /* @__PURE__ */ new WeakMap(), Cs2 = /* @__PURE__ */ new WeakMap(), wu = /* @__PURE__ */ new WeakMap(), Wl2 = /* @__PURE__ */ new WeakMap(), Vo2 = /* @__PURE__ */ new WeakMap(), Bd = /* @__PURE__ */ new WeakMap(), s0 = /* @__PURE__ */ new WeakMap(), r4 = /* @__PURE__ */ new WeakMap(), n4 = /* @__PURE__ */ new WeakMap(), Di = /* @__PURE__ */ new WeakSet(), $2 = function() {
  if (w(this, Cs2, /* @__PURE__ */ new Set()), u(this, cr)) for (let r6 of u(this, Od)) u(this, cr).getLayer(r6) && u(this, Cs2).add(r6);
}, Pd = /* @__PURE__ */ new WeakMap(), Xl = /* @__PURE__ */ new WeakMap(), UM = function() {
  return this.idleQueue.size !== 0;
}, o4 = /* @__PURE__ */ new WeakMap(), u0 = /* @__PURE__ */ new WeakMap(), GM = function() {
  if (!document.getElementById(N2) && u(this, cr)) {
    let r6 = document.createElement("div");
    r6.id = N2, r6.style.position = "absolute", r6.style.top = "0", r6.style.left = "0", r6.style.bottom = "0", r6.style.right = "0", r6.style.pointerEvents = "none", r6.style.zIndex = "1000", u(this, cr).getContainer().appendChild(r6);
  }
}, zM = function(r6) {
  let t6 = document.getElementById(N2);
  if (!t6) return;
  let n = document.getElementById("bbox");
  n == null && (n = document.createElement("div"), n.id = "bbox", n.style.position = "absolute", t6.appendChild(n));
  let o = [Math.min(r6[0].x, r6[1].x), Math.min(r6[0].y, r6[1].y)], i = [Math.max(r6[0].x, r6[1].x), Math.max(r6[0].y, r6[1].y)];
  n.style.top = o[1] + "px", n.style.left = o[0] + "px", n.style.width = i[0] - o[0] + "px", n.style.height = i[1] - o[1] + "px", n.style.border = `2px solid ${u(this, Es) ? "red" : "blue"}`;
};
$i();
$i();
$i();
$i();
var i4 = `attribute float pathDistance;
attribute vec3 pathNormal;
attribute vec3 pathTangent;


uniform vec2 uvScale;
uniform float vertexes;
uniform float complete;
uniform float nearRadius;
uniform float farRadius;
uniform float nearZoom;
uniform float farZoom;
uniform float pulse;
uniform float pulseLength;
uniform bool pathIsVertical;
uniform bool displayArrowsOnPath;
uniform vec2 cameraParameters;

varying float zoomLevel;
varying float radius;
varying vec2 fragTexcoord;
varying float fragTopTextureU;
varying float fragPathDistance;

uniform float highlightStartFraction;
uniform float highlightEndFraction;
uniform float highlightCompleteFraction;
uniform float highlightWidthMultiplier;
uniform vec3 highlightColor;

float flattenFactor = 0.0;
// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using
// linear interpolation/extrapolation.
//
// This performs a pure linear mapping y = mx + b where
// 'm = (yMax - yMin) / (xMax - xMin)',
// 'b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin'.
float remap(float x, float xMin, float xMax, float yMin, float yMax) {
	return (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;
}

// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear
// interpolation, clamping result values outside [yMin, yMax].
float clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {
	return clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);
}

void main() {
	fragPathDistance = pathDistance;

	// We can get an origin point for the cross-section of the path by
	// subtracting the surface normal times the radius, since the surface normal
	// points strictly away from the centre.
	vec3 origin = position - nearRadius * normal;
	
	// Inflate the path along its surface normal to increase its radius from
	// 'nearRadius' to 'farRadius' when the camera is at 'farZoom'.
	vec3 adjustedPosition = position;
	zoomLevel = clampRemap(cameraParameters.x, nearZoom, farZoom, 0.0, 1.0);

	// expansion factor uses the zoom level to increase/decrease the radius
	// for fixed widths, this number is ZERO
	float expansionFactor = (farRadius - nearRadius) * zoomLevel;

	adjustedPosition += normal * expansionFactor;


	// TODO: optimize by removing branching
	bool isHighlighted = fragPathDistance >= highlightStartFraction && fragPathDistance <= (highlightEndFraction * highlightCompleteFraction);
	// adjust the color based on the highlight but only if the fragment is within the highlight start and end
	if (isHighlighted) {
		// we have to subtract 1., don't ask why
		adjustedPosition += normal * (highlightWidthMultiplier - 1.) / 2.;
	}
	

	// Determine how far the path extends "up" or "down" in the direction of the
	// path normal.
	float height = dot(adjustedPosition - origin, pathNormal);

	// For horizontal paths, flatten the bottom half entirely so that it's flat
	// against the floor. This makes the path look nicer when it's
	// semitransparent behind opaque geometry, so you don't see it
	// peeking through. For vertical paths, preserve the full tube geometry.
	if (!pathIsVertical) {
		float desiredHeight = max(height, 0.0);
		desiredHeight = desiredHeight * flattenFactor;
		float flattenMagnitude = height - desiredHeight;
		adjustedPosition = adjustedPosition - pathNormal * flattenMagnitude;
	}

	// Transform the vertices into NDC.
	vec4 mvPosition = modelViewMatrix * vec4(adjustedPosition, 1.0);
	gl_Position = projectionMatrix * mvPosition;

	fragTexcoord = uv;

	// Compute a texture coordinate for mapping the arrow texture to the path.
	// We don't want to use the u-value that Three.js provides, because the
	// path may end up twisting arbitrarily -- but we want the arrow texture to
	// always be on the top of the path.
	vec3 bitangent = cross(normal, pathTangent);
	fragTopTextureU = -dot(bitangent, pathNormal) * 0.5 + 0.5;
	// adjust the color based on the highlight but only if the fragment is within the highlight start and end
	if (isHighlighted) {
		// TODO: fix scaling
		fragTopTextureU = -dot(bitangent, pathNormal * highlightWidthMultiplier) * 0.5 + 0.5;
	}

	radius = mix(nearRadius, farRadius, zoomLevel);
}
`;
$i();
var j2 = `#define ARROW_FADING_POINT 0.15

uniform float complete;
uniform float nearRadius;
uniform float farRadius;
uniform vec2 resolution;
uniform vec2 cameraParameters;
uniform vec3 color;
uniform float pathLength;
uniform bool showPulse;
uniform vec3 pulseColor;
uniform float pulse;
uniform float pulseLength;
uniform bool pathIsVertical;
uniform bool displayArrowsOnPath;
uniform float arrowAnimationTimer;
uniform float opacityMultiplier;
uniform bool dashed;
uniform sampler2D arrowTexture;

varying float zoomLevel;
varying float radius;
varying vec2 fragTexcoord;
varying float fragTopTextureU;
varying float fragPathDistance;


uniform float highlightStartFraction;
uniform float highlightEndFraction;
uniform float highlightCompleteFraction;
uniform vec3 highlightColor;

// How long the arrow should be, as a factor of pathRadius. Since we've
// mostly flattened the top of the path, values near 2.0 (the diameter)
// will probably look best.
const float arrowLength = 2.0;

// How much of a relative margin the arrow texture should have inside the
// area laid out for it. Useful to pull the arrow away from the edges of the
// path, which slope down.
const float arrowMargin = 0.1;

// How many arrow-lengths of space should be between arrows on a short path.
const float arrowSpacingOnShortPath = 6.0;

// How many arrow-lengths of space should be between arrows on a long path.
const float arrowSpacingOnLongPath = 7.5;

// How long a path must be to be considered "long", as a factor of
// the path radius.
const float longPathLength = 200.;

// How long a path must be to be considered "short", as a factor of the
// path radius.
const float shortPathLength = 75.;

// How much of the path's length the fade-in should comprise when going from
// zero opacity to full opacity.
const float completeLength = 0.1;

// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using
// linear interpolation/extrapolation.
//
// This performs a pure linear mapping 'y = mx + b' where
// 'm = (yMax - yMin) / (xMax - xMin)',
// 'b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin'.
float remap(float x, float xMin, float xMax, float yMin, float yMax) {
	return (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;
}

// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear
// interpolation, clamping result values outside [yMin, yMax].
float clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {
	return clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);
}

void main(void) {
	// Compute the opacity of the path based on the distance from the current
	// fragment to the 'complete' value as it varies from 0.0 to 1.0.
	// Fragments that are at the 'complete' value or past it will be fully
	// transparent, while fragments that are at 'complete - completeLength'
	// or before it will be fully opaque. However, we adjust the 'complete'
	// value here so that it overshoots by one full 'completeLength', so that
	// the entire path will be opaque when the 'complete' value is at 1.0.
	float completeLocation = complete * (1.0 + completeLength);
	float completeAmount = clampRemap(
		fragPathDistance,
		completeLocation - completeLength,
		completeLocation,
		0.0,
		1.0
	);
	float opacity = 1.0 - smoothstep(0.0, 1.0, completeAmount);

	// 2020/01/09 Terence Dickson
	// When we render the background and overlay for the mapbox outdoor context
	// behind everything else in single-buffer rendering, the fact that the path
	// writes to the depth buffer means that the background and overlay will not
	// be drawn behind the path even when the path is still fading in. The effect
	// is subtle and is only visible in single-buffer rendering so this quick fix
	// prevents writes to the depth buffer for zero opacity fragments, which gets
	// rid of the most visually-offensive ghosting.
	if (opacity <= 0.0) {
		discard;
	}

	// Push in the texture coordinates so that they ramp up
	// at 'arrowMargin' instead of at zero; this remapping looks somewhat
	// like this:
	// 1 ^        ___
	//   |       /
	//   |      /
	//   |     /
	//   |    /
	//   |___/
	// 0 +---------->
	//   0   ^      1
	//       arrowMargin
	// Making the arrows narrower on the path.
	float u = fragTopTextureU;
	u = clamp(
		u * (1. / (1. - arrowMargin * 2.)) - (1. / (1. - arrowMargin * 2.) - 1.) / 2.,
		0.0,
		1.0
	);

	float arrowSpacing = clampRemap(
		pathLength,
		shortPathLength * radius,
		longPathLength * radius,
		arrowSpacingOnShortPath,
		arrowSpacingOnLongPath
	);

	// Reduce the spacing between arrows when the camera zooms out, as increasing
	// the path radius will increase the arrow size and thus be able to fit
	// fewer arrows on in total, and this secondary movement of the arrows
	// "zooming off" the end of the path is unpleasant
	float expandAmount = mix(1.0, farRadius / nearRadius, zoomLevel);
	float effectiveArrowSpacing =
		arrowSpacing * 1.0 / expandAmount +
		arrowMargin * 2.0;

	float effectiveArrowLength = arrowLength * radius * (1. - arrowMargin * 2.0);

	// Adjust the slope of the vertical texture coordinate so that it goes
	// from 0 to 1 along the length of the arrow plus the spacing between
	// arrows, and adjust its x-intercept so that one arrow moves to the
	// exact position of the next arrow as 'arrowAnimationTimer' goes
	// from 0 to 1
	float v = (
		fragTexcoord.x * (pathLength / effectiveArrowLength)
		- arrowAnimationTimer * (1. + effectiveArrowSpacing)
	);

	// Compute a "looping sawtooth" wave for determining the vertical texture
	// coordinates of the arrow texture, roughly as follows:
	// 3 ^              /
	//   |          ___/
	// 2 |         /
	//   |     ___/
	// 1 |    /
	//   |___/
	// 0 +--------------->
	//   0   ^ ^
	//   ^   |_|
	//   |   effectiveArrowLength
	//   |___|
	//   effectiveArrowSpacing
	//
	// This is effectively equivalent to this sort of sawtooth wave:
	//   ^
	// 1 |    /    /    /
	//   |___/ ___/ ___/
	// 0 +--------------->
	//
	// Causing the image of the arrow to repeat, with dead space (the bottom
	// edge of the texture stretched out) between the arrows at the provided
	// spacing. The reason why the "looping" design is preferred is because
	// it takes advantage of WebGL's 'GL_REPEAT' texture wrapping behaviour
	// to avoid the discontinuity that can end up causing visual artifacts.
	if (mod(v, (1. + effectiveArrowSpacing)) < 1.) {
		v = v - effectiveArrowSpacing * floor(v / (1. + effectiveArrowSpacing));
	} else {
		v = ceil(v / (1. + effectiveArrowSpacing));
	}

	// Use the r-component of the texture to determine whether the arrow covers
	// this fragment or not
	vec2 sampleTexcoord = vec2(u, v);
	float arrowAmount = 0.0;
	vec3 secondColor = pulseColor;

	vec3 finalColor = color;


	
	// adjust the color based on the highlight but only if the fragment is within the highlight start and end
	// [Anzor] I added 0.005 to make the highlight transition a little smoother when the width multiplier is too high
	if (fragPathDistance >= highlightStartFraction - 0.005 && fragPathDistance <= (highlightEndFraction * highlightCompleteFraction)) {
		finalColor = highlightColor;
	}


	if (displayArrowsOnPath) {
		arrowAmount = texture2D(arrowTexture, sampleTexcoord).r;
		float delta = 1.0 - abs(fragPathDistance * 2.0 - 1.0);
		secondColor = mix(finalColor, pulseColor, 1.0 - smoothstep(ARROW_FADING_POINT, 0.0, delta));
	}

	if (dashed) {
		float dashLength = 0.1; // Adjust this value to change the dash length
		float gapLength = 0.1; // Adjust this value to change the gap length
		float totalLength = dashLength + gapLength;
		float numSegments = ceil(1.0 / totalLength);
		float adjustedTotalLength = 1.0 / numSegments;
		float adjustedDashLength = adjustedTotalLength * (dashLength / (dashLength + gapLength));
		float pattern = mod(fragPathDistance, adjustedTotalLength);
		opacity = pattern < adjustedDashLength ? 1.0 : 0.0;
	}



	if (showPulse) {
		// Add the pulse color to the path by determining how far the current fragment
		// is from 'pulse'
		float pulseLocation = remap(
		pulse,
		0.0,
		1.0,
		-pulseLength,
		1.0 + pulseLength
		);
		float pulseDistance = smoothstep(
		0.0,
		pulseLength,
		abs(fragPathDistance - pulseLocation)
		);

		// Blend the pulse color to the path based on how close this fragment is to
		// the 'pulse' value and whether it's covered by an arrow -- but if it's
		// covered by *both*, then we go back to using the regular path color
		// (making arrows look like "holes" when they're overlapping the pulse.)
		float pulseLevel = abs(1.0 - pulseDistance - arrowAmount);

		
		gl_FragColor = vec4(mix(finalColor, secondColor, pulseLevel), opacity * opacityMultiplier);
	} else if (displayArrowsOnPath) {
		gl_FragColor = vec4(mix(finalColor, pulseColor, arrowAmount), opacity * opacityMultiplier);
	} else {
		
		gl_FragColor = vec4(finalColor, opacity * opacityMultiplier);
	}
	#include <colorspace_fragment>
}
`;
$i();
var VM = `uniform float complete;
uniform float nearRadius;
uniform float farRadius;
varying float fragPathDistance;
const float completeLength = 0.1;

// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using
// linear interpolation/extrapolation.
//
// This performs a pure linear mapping 'y = mx + b' where
// 'm = (yMax - yMin) / (xMax - xMin)',
// 'b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin'.
float remap(float x, float xMin, float xMax, float yMin, float yMax) {
	return (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;
}

// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear
// interpolation, clamping result values outside [yMin, yMax].
float clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {
	return clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);
}

void main(void) {
	// this ensures that the stencil mask moves along with the path above it, to avoid the progress bar effect
	float completeLocation = complete * (1.0 + completeLength);
	float completeAmount = clampRemap(
		fragPathDistance,
		completeLocation - completeLength,
		completeLocation,
		0.0,
		1.0
	);
	float opacity = 1.0 - smoothstep(0.0, 1.0, completeAmount);

	// 2020/01/09 Terence Dickson
	// When we render the background and overlay for the mapbox outdoor context
	// behind everything else in single-buffer rendering, the fact that the path
	// writes to the depth buffer means that the background and overlay will not
	// be drawn behind the path even when the path is still fading in. The effect
	// is subtle and is only visible in single-buffer rendering so this quick fix
	// prevents writes to the depth buffer for zero opacity fragments, which gets
	// rid of the most visually-offensive ghosting.
	if (opacity <= 0.0) {
		discard;
	}

	gl_FragColor = vec4(0.0, 1.0, 0.0, opacity);
}`;
var HM = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAAAAAB5Gfe6AAAQkHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZpZciQ7rkT/uYpeAicQ5HI4mr0dvOX3ATOl0li3q3SVJkUqFMEBcHc4IuX2///fcf/hK7cSXRatpZXi+cott9h5U/3j63EMPt+fL1/h+fPdeff6NnJMHNPjD2U/7+qcl183aH6eH+/PO52PN7E+B3qZ+Tlgspkjb57X1edAKT7Oh+fvrj3v6/nNdp7ftd057abHnz78npVgLGG8FF3cKSTPz2oXJFaQWuocCz9D0mhnEu8Tx54k6dexc98F77vY+f48n96HwvnyvKB8iNHzfJCvY3cj9HZF4dfM7/6QZ4j+7deb2J2z6jn7sbueC5Eq7rmpl63cd1w4GCrd2wov5Vt4r/fVeFW2OMnYIpuD13ShhUi0T8hhhR5O2Pc4w2SJOe5IuGOMM6Z7rhL+FudNSrZXOFFJz3KpkqtJ1hKn4+tawp233flmqMy8AlfGwGCBOz693Fcn/+b1OtA5Bt0QfH2NFeuKFnCWYZmzn1xFQsJ5xlRufO/LvcGNf5PYRAblhrmywe7HY4gh4Re20s1z4jrx2fkHNYKu5wCEiLmFxYREBnwJSUIJXmPUEIhjJT+dlceU4yADQSSu4A65SamQnBptbu7RcK+NEh+nkRYSIZBGSQ0EIlk5C/jRXMFQlyTZiUgRlSpNekklFymlaDGN6po0q2hR1apNe001V6mlaq211d5iS0iYtNLUtdpa651JO0N37u5c0fuII408ZJSho442+gQ+M0+ZZeqss82+4koL+q+y1K262uo7bKC085Zdtu662+4HrJ108pFTjp562umvWXtm9X3WwofM/T5r4Zk1y1i+1+mvrHFa9WWIYHIiljMyFnMg42oZANDRcuZryDla5ixnvkVIIZGsBbHkrGAZI4N5hygnvObuV+Z+mzcn+Y/yFr/LnLPU/RuZc5a6Z+Y+5+2LrK1+K0q6CTIWWkx9OggbF+zaY+1Wk/766H46wF8ONFY+O8hBMEc7oc4Vdh+8JsE+PUSrVjr70Zz1+H56PH3o9sRR1ql5Ha8bUMQxpe89Tki8Sb0tE23cw3DcfEo+ugnj2G3WEmononVfoag71pVjR+EmAE53eT5tqYfEHl/7ThMusaI+St0jktFa9gKnreiQqCNpZ2mJdSkbaiK6DrovYR4/JhJfRsx5d5EVZnEIPetHnU5KynJPTSuCPuC0lOuXH7n1DNq7DpUtHbhM5lDA0c2bnDCJoOObMnyj+aPjPwx0yiDUxKKsg35VnRnBEVhonKwK5hOk5NttUrhr2+tMOXkPJb1RZ+iAelYjL2MuO3pGRQ78GdxwOOaTAcJZcewq7ilB1RJCSozUdSEdwVJVb6asiBsHH1Bqgbiv3Cmkkis6ktVnZGRRwMNJjUA3Ao2127YWdhAIblxF51hzMcZsVZc0r0dJo5Liqfn41Q+q193SGhhkMkgaLJRNnEpqBtyVvbcVffIk+LE9QPFBTMTQe0aWkMXMnx3dy5sfHreDE60Ql50E+SqRcmfK16L2p0Ol8JFATu3qASXy7SvmiGW2cdMBxsty44CvtLogfGlv7WkCSV0WId2270EaD5Ym40cs+SAwZuNjPSTywAvEfLmzQhtLDntfCnhl/fNmUNnzyA2g76Zn0SP+c+I6bCC0FONUQ4L50e95dif+DH/m9htQjBEhPPpOjYjmm2ChbfEMIUaYtAIxmWJHlilLU8ZRs9pCsHbDpFaRgZljz2QandjDIBPZDGTuoZW1KdlYh52ALzisKJRNWSQmLAWx8iv9mGttT15bBc2oxd57bZtVF98CYtK3UH22Yd/A7WaKa+ZjNTOXEzNhMJ5kmQOvfzsbxbZALJ2xwGBjX2HFQybhi7kpbA7DVpS3RxMJwFyHwGk5gs6a4lrRHVqhYT0QTJC9UZcC9Yrelkn6yXch68NKNtG7CiU3vf/zMZAYXPWdrR9XZ/ctMV1sJQ2wJEGxzaHs7LmmHIwnUwbwnNAapBY9xhE19DNJW3ua0dDk/AjwITacR0PqZxkbyJ+E5jYbxI84x1TBE+y90hwDCYZIM0tqAKPZfCzFrbH8kYCm3eqQkZ2+2GovcL8Suokyg8yyCJes6dcouSLiNSLb0ETJU+/N/WFsBBSOXBbm9Cwp4CzlOag7ro7R2vC19nSsCPmAjIEMiobFwaoVXhjTU2XMpgEsDH/L3Sx54OCTMUSXI/IIA2V4QcLQpwVz12pInI0bY56pIQ2BSGRLL+yLfZ7JkiimbK+aepsbwRStpokx5gCqe1hjdMAwcINbkk5jmedrNRAG5pUXPe0sZIoXy1h7lSDxApzheg24JeDNtDS1oBDBUC4iWZFilBPhZx0Kqx2lihpbG9q4sYidksCN4yRYhNM4nxfBbTi4E3AT6B3igbvs9Gv8ZkHsIfdlep+2HelEDbkJdNjqZQ90B7k6OIoFfkkPNoY+z0gzACa1f2qcBYxVJpT2QQgS19dKQlbC24S92xiEAFRKB5Uy1qrBgOtwIge55G0kRPfIytGx0tMOrGfrijB2FHOk/TKcMjDTMPeBo4FnXD5cQ8vtdgoAN0yuzZQHQI09wm/5vAB6RHyI9rYKiZ6YWC6rbaiLmDtoaToC1bViXQFNtgWsOfEEKCleC3GWPSfgQWRQWMgw/9FDgvOZrFAT3SmsA3DLbqlsSppQG5QeOjPXavUUkxF/qgLM05vW5o7UakuBqo2ZW8Nj0LB7imVJC9QSA+wd7RPztIUZ80xQZq0ROrc8CSVncWzkTA/RwmunldCPAQKjqVC7bhRuTIv0plbk7gOX4m5OAi2YesYZ0KBQRToG8iv9x8dgGtgECYRBeEU87OxoSc8epu+s7Mq/MN0VbBT19dii7ekO66UZwdAMtoAVQd13J5nwZe98OgGslmVqAGBkeLZNVNVlWpV18qihntXKnBZvrDIVgFpx4q5poLqREOVplMPSpTF2KvjBAzDpprkruXIaaUmUD4Xo2yrGWcYlixKIwRFjl0jPQhKznUXZAoSjlg9c/NwAI4p3Q/w5bCNfhUZS7bGfqesHqKAlyZZxZgNrhGevZXccaqBys4NEqB3Vqfptji9uUrhCL6yXFqxtm0hhLyYU3Tjd8I/HZaWD1oyVjnG5hhpCN5yHSf8BQUZlVNd00OP4M0TK+JSM7iqWi01SinFkCQXWxiZJLqqAHiEt3G3I2WYd46KU9pIJIOkoRQYCcEAAPguHo0Y4k8Hl6SW50MoW0uZU8jJOUghKo38Nl5ZSwsJNAUC2/lFZWkfMjrU8dFrTjHpJnUrLCILQIxINiYdQlDXaE/razQ4jjQluN5jW1Eh/S7yYvI5gigSjdLYU9TiFXAcHjISiLhQd9obb3OQmwY+YqVwiBMCkOGLXaK/ljBShh56c1g0uyIb2lBRKO7ZTAFncw5c5UGjGSy3CsI1Jt2mtruZkfhBZmbR+842Yu1eDiWEl0V6LZcGem6Ct+LW4Wy3oAjyNObazKBHomhJ3HMKEKHgiGksH+Ig1nTidfNMyA+oYHqVFaRGLiQreVLc9GvQgftKjW9cfUSKNYL80rqU7Um2rwqQJR1ai31Wq7vzKJEsFHDj0bAEMUKXgvfD5bWbaLPBTKz1Nk/Fg+GUZvUzFw80CLaKtPAACVAWrismh863FU4IJ0716SXBUNVb/SDMVvZgDt34CXoOq1JKvg0n08gPHTwXBNgD5W8pZZ8E9EVWcv1DZMB2NFysIwkqBSaH5QRmsAHdkHB+UANvLJvFpQKAahSmYTLEd2AFO+5rsqRRU6sVv5IP0wsSPLcWsbC1Y95mte71CUm6RJJWwkg6Q4k+xWMM0ByElJPQ6j2ED5hY42ALpZRytx9RlgQlJLijzhKi5eX5JBSIRGfo9o2xhd/0aWku8OS+4D9ZnovHDQMPaYo4qm2mlZbUnd7pR6oQj29Z2BqJ9n3LRT+MTLu3IR+ZP2TCPh3EDw8H1NHpoT7FibNYU8WHd9ESHcY12aDOQCUBddi4Ucp+4yuzz8ybcCCu1h8zvzXhDN4HYLq1R+U0xzUqg5QSA3iSBgdDouy55Ifx0DaeEhgezxBRGmoEJ6AJitVuzwtKPlUskHgU2F0LS7AFIwW5jPu0RUL7sp+fkNk0ee8P6uXYgl40WM+cdCOW21r13e0ivt0ff/mYcUfrQZWs2BiN6G+MDTGz1BKORmUTNQp9YGSHFxAeTkQrKd6FoVUogyytW25OLy3OpaO5oZCQp46aPzb5LnJiFEIwAKkmbYVYIjzVv3vj7rA6HignEeQAXTAHKDhoD7Uujh0QjtsB6fTP1NzO7T1Nzq4F1GnfHdXCG1Yxjwdtjf+PGRGTzEtEAUCz7KLfTdItLwCXuSOAzVjaZB6LvbUZhYGWmifSZlcMDnGHPd6gPeiK9erhpiw7ZP9ahTrMhFDa1J53m9ri2DloziqGETTcVSppCbTDDjExg6RrZ6cPEzB8XArEjQSB29odrUoLyoS/65RfM9fprGGjlHpbhGgbYD8MtmW1eFcAWX5dbcMHcl8sUI2k+H7GPW9VrArw3G+BefcCrCaAT/N53YLvP26Uy0kMFnDEZz0DJkmQqEOlL7SlKweYhH8gxpYeAYi0f9magqPbMYZuUI6007lSZQoyoGfYQHsNRzHXR3MMINTSMZpq1KD2A5MDJgtMLdRU6R4CEOJcKGiIJ7K6P/vAM6xpECHI8rRHsaEj6smkngAUjXTzrRoSI48ZpHOqgOY5OejKVdpnmiYUChQnVdIPa6ekGqRSRgEO119oDHOiIUQ5ciYVgaF1oG8Udo8WYtD+DEi8D/w8rAJE2k2PoyV0oMtpauxreaFjpujAvxFlwBhjuNqM9P0IfI5iD8Nh8y1kG4igjJkDNkOijnlLhItAd9lhRd670yNRTu95cR/Xuu0c5WO4DEFk5YQAPtLvU4TYPGRh4APPEDNiuuwR6SC21JoFbQBBMr+zJmT32QplNI6p16PbculN/pCX1wAyTWGTeJ774aln0gvQikw7TmkfsNbdQNs0adutYUDqNtGc0RqngUYdhUYuHSL1/eLrgvqDTC5neu++vufRkEgP9D2T64Kg/c4n+s7k3dDr3me8nOr0c72MRNmgF7D4WySPP0YAI/bI4eixwc7K13QiRiL85A8fnSsUj+mvTrsZtVUEQZ6sTpVafW8nYJZyaZS0U+0xIb6et9PhhtoObozQbjKAoDf6eiFgx1UUvpUYj1GweH0MNMrofhynfWn7+KYu7n5r83hN9aqm+6qjcH7dUlgvZVLV3xqq4fbP16qv+eofuTz43eomAqfS7GBAB9zEE31WJ37eVIPtdGN5A8nMYPvvLt8t2/V/6gM19G4g/hIL7UXf9JgbuLRZ+AoW//AzyMxTcWyz8BAruLRZ+AgX3r3y2+mT/PwfiN1DoVI+QT3CZDmvb8022JeYb6HiQPQpPPvboFB+i1MZdcqWZqthHmix6vttw0UAI1z8oEnGwVe++c7JamxslC+8xKJE41XJmug1npz+6CUAKyURd9gSxo+kWxvtZth848GBlws/0SKjYhmbZ9IiV+mcGBSdWHk8sqSr2zz5J7QME/0yD+z4Pe+JuGn1MV/vUyZwOHojWPlmPXgf9CuoeN9UAT+FGwaLg44v3dWe6QpvuL3Ln/p3k/2AgqNDcfwHgqUmIIqn+hwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4wYRESAMujenGAAAB9FJREFUeNrtnWlsFVUUx899fS1gUoKioEY+WBRUEohGkUhAKxgEjSgGoRGB4AJCNKAIJBJZJSiyGYMKKkIoLlEUKhUraxFkKUE2kU1aCrRgW2jpg9f29R2/sBTo67v3zL2zvfP73MzM+XU6mf+5504BGIZhGIZhGIZhGIZhGMZGGq3JvSmR62++BXHH7Ylbf9ouRMT99yVq/e0PICIiHumUmPV3PooXOf5EItafXoCXOdUn8ep/pgjrUDY40ervX4JXUTEiocoXL5/FawiNEwlU/6hzeB3hqQljQIwJYT3UzEkQA2JiGOslsiAhDIgZ1RiD6NIEMBD8NIKxyQr6vv7FtdgQa31uILg0ig2zsZmv4//yePUj7rjNv/U3yUEJ/r7Xr/XfvBmlOPKwT+vfhpIUdvdj/Wm7UZpTz/mv/g4HUYGyQb5r/+SjEhXD/VV/j5OoSGisj16LRe9iVCY8xTcGxIulSKBmtk8MiKHlSMIn8ViMqkQivojHgfcuIJ0VAc/XPzmMVljrcQOBmdVojY1NvVx/8mcRtEqeh+NxypJatM6+ezxb/7Io6uBwR4/e/1moicJunvz956A2ip/1Xv3Nt6JGSgd6rf47/0KtlHssHrfZi5rxVDwWDx5C7XgoHotHC9AANbO8YqBXERohMt8bv/8X/kNDRDM9cA+IgWVojhWuNxAYXo4mWePyeBwYHUKz5Lo6HidNvICmybvVxfXPqEbz7Gvr2vrn1KAdHH7IpX//8yNoD8dcGY+TM6NoF26MxzLTL26Mx0majtM4q5ed7yhNulVsd5WAxqset/mGS6/d5CIBLXI62/7I6ZKyzjUC0rIfsP+hE3zkxt9c8vy7tPnJbiKfuyP+Xdn8ZDeuiMei+zF0juWOGyBNv+iMxw4bEBkl6CzOxmPx6ll0mryWDtb/ViU6z17H4rEYG0I3cMiheByYFEZ34Ew8Dn5UjW7BiXisY/rFDfGYmgWCCwcngXto0q08z1YBSUsy3NWgb5Qe2WSjgJRlfdy2RJPcNXm9bQIarexpsP5VdxHjcbMcm2Q3/5P64i71U8k/ELuLNsVjcct2cnST+rGg+Jo4XmhLPBZ376GOfoOkAIB5NWTHxuu/nzj9ElkA8gLgA+pLlvF43IU4/VI9G1QEAHnIPjfVaP1PnqRdVngKqAkActDMa2Hw/u9zijjjNg5UBcBr1FbD3jbG6h9QSruk8ovfyFESABnUWSNT8VgMI06/lF7aBqomAJ4n3m+G4nHgbeJfZfHljcCKAqDHcWo87m2g/gnE53LhlS+lqQqATv9S4/FL2u//qcT2T34XoAuAdvuJBspf11z/LOKbyYG6q4bqAqDVTqKByjFa21/U6ZfdaWBNADTdTDQQnqSv/pRMYjrZevVLCUUAiF+JBqpnaqv/J2I+zb3mxZwkAMTPDq8ep1A3P/1y3ZOEJABgiaPxuOnvxLN/B7oEwELq/sPl1utvSdz8VPsl6BMAn1AbBKut1t96F+3ENXOFTgFiehXRwAZL8Vi0JW5+qppW7+HIAgDGnyca2G4hHouOh2knvTARdAuAkedsj8cinTj9Ujka9AuAV87YHI/F08TNT2eHgQkB0I/aIDhGmuIU/YnnKxkAZgTAU8SGHC0eDyJufiqKfTKrAqBrPtFAiXo8HlFBO1VBA7ebZQHQifhUVo7H4p2QgQeOdQHQbp8t8Tg4idj+2dPgwJIGAdBqhw3xmDz9EuelQ4cASP3DeDwOziW+ecdbldEiACDbcDxOWkBs/8QNHpoEAPXjLNFMmfpv+IZ4+PjRU5cAWGwwHqcQNz/J2NUmAMgjavHjMfEPTGpvvz4BQH1MrzMkoHoW2CsAppEaBFskemQUA+HJYLcAeJfQINgpNVuvbiA0FuwXAG8qNwh2S07WqxqQ/saPXgEwRDGu7W8te2Q1A6XSH0HWLAD6nVa5zoPS9asZKJb/DLZuAdDzhPx1Hu2gkobkDRQq/J8w7QJAfstevuI3+WQN1F39dkAAtP9H7jpPdFVtiMgZOKC0Z9aAAEiT+mrbScLQjIyBXWngtABokRf/kKefonRF4xvYqrjmYEQApG6Md8SyvrS+eDwDG5QbzUYExL3QMxnUlZGGD5wFbhEADQ7YVwyhr401YCD6LbhHACyK3SA4N9TK6mhMA5EvwE0CYF6sBkFopLXl8exYq9/gLgHwYf3x+PxoqwMC9RoIvw9uE1D/gH3VeOsjItnSq9/OCqhvwL5qAoABA5XU28qsAHjj2tW8mukABgzEXP12WgAMvrpBEPkYwICB2KvfjguAvnUH7GvnARgwUGRhEt24gLoD9tGvAAwYKLDyySzzAqDzpQH76CIAAwYOWtqNYoMAaH9xwP57AAMG9ljbj2SHALhjJyLijwAGDGyzuCPNFgGQuhlxpfw1yR94dfAxi5cmojI/lRyx+rtaX9XDhADr2CVABc//JycWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAtgASyABbAAFsACWIDToH8FyJUWtVWAALedDoFhGIZhGIZhGIZhGIYxyf+YwEMsIhMo/AAAAABJRU5ErkJggg==";
var uH = new ul();
function ZM2(e6, r6, t6) {
  let { breakpoint: n, width: o, accentColor: i, completeFraction: s6, isVertical: u6, visibleThroughGeometry: l, dashed: c, highlightCompleteFraction: d, highlightStartFraction: f, highlightEndFraction: h, highlightColor: b, highlightWidthMultiplier: I } = r6, { color: E } = t6, v6 = true, x6 = 0, D = 1 / 0, w6 = r6.displayArrowsOnPath, S = true, F = w6, P = typeof o == "object" ? Number(o.output[n]) / 2 : o / 2, L = typeof o == "object" ? Number(o.output[n + 1] ?? o.output[n]) / 2 : o / 2, N = (t6.altitude ?? 0) + lH, $ = 0;
  e6[0].z += N;
  for (let K = 1; K < e6.length; ++K) {
    e6[K].z += N;
    let ae = e6[K].x - e6[K - 1].x, $e = e6[K].z - e6[K - 1].z;
    if (u6) $ += Math.sqrt(ae * ae + $e * $e);
    else {
      let Rt = e6[K].y - e6[K - 1].y;
      $ += Math.sqrt(ae * ae + Rt * Rt + $e * $e);
    }
  }
  if (!u6) {
    let K = e6[0], ae = e6[e6.length - 1];
    e6.push(ae.clone().setZ(ae.z - 0.01)), e6.unshift(K.clone().setZ(K.z - 0.01));
  }
  let W = new Ae();
  F && (W = uH.load(HM), W.colorSpace = ke);
  let V = new Nt(E), q4 = new Nt(i), se = { vertexes: { type: "f", value: 1 }, resolution: { type: "v2", value: new at(1, 1) }, cameraParameters: { type: "v2", value: new at(x6, 0) }, complete: { type: "f", value: v6 ? 0 : 1 }, color: { type: "c", value: V }, pathLength: { type: "f", value: $ }, nearRadius: { type: "f", value: P }, farRadius: { type: "f", value: L }, nearZoom: { type: "f", value: x6 }, farZoom: { type: "f", value: D }, pulseColor: { type: "c", value: q4 }, pulse: { type: "f", value: 0 }, pulseLength: { type: "f", value: 0.075 }, pathIsVertical: { type: "b", value: u6 }, arrowAnimationTimer: { type: "f", value: 0 }, arrowTexture: { type: "t", value: W }, displayArrowsOnPath: { type: "b", value: w6 }, showPulse: { type: "b", value: S }, opacityMultiplier: { type: "f", value: 1 }, dashed: { type: "b", value: c }, highlightCompleteFraction: { type: "f", value: d }, highlightStartFraction: { type: "f", value: f }, highlightEndFraction: { type: "f", value: h }, highlightColor: { type: "c", value: new Nt(b) }, highlightWidthMultiplier: { type: "f", value: I } }, ue = new Gr(e6);
  ue.curveType = "catmullrom", ue.tension = 0;
  let ce = 30, de2 = 8, Ee2 = ce * e6.length, he = new rl(ue, Ee2, P, de2, false), ne = new Float32Array(he.attributes.position.count);
  for (let K = e6.length; K < ne.length; K++) ne[K] = K;
  he.setAttribute("vertexIndex", new xe(ne, 1));
  let Ce = new Float32Array(he.attributes.position.count), xe3 = new xe(Ce, 1);
  for (let K = 0; K <= Ee2; K++) for (let ae = 0; ae <= de2; ++ae) xe3.setX(K * (de2 + 1) + ae, K / Ee2);
  he.setAttribute("pathDistance", xe3);
  let Re = new Float32Array(he.attributes.normal.count * 3), we = new xe(Re, 3);
  for (let K = 0; K < Ee2; K++) {
    let ae = he.tangents[K];
    for (let $e = 0; $e <= de2; ++$e) we.setXYZ(K * (de2 + 1) + $e, ae.x, ae.y, ae.z);
  }
  he.setAttribute("pathTangent", we);
  let Ve = new Float32Array(he.attributes.normal.count * 3), me = new xe(Ve, 3);
  for (let K = 0; K < Ee2; K++) {
    let ae = he.tangents[K];
    var at2, xt, Ot;
    u6 ? (at2 = ae.x * ae.y, xt = -1 + ae.y * ae.y, Ot = ae.z * ae.y) : (at2 = -ae.x * ae.z, xt = -ae.y * ae.z, Ot = 1 - ae.z * ae.z);
    let $e = Math.sqrt(at2 * at2 + xt * xt + Ot * Ot);
    $e === 0 && ($e = 1);
    let Rt = at2 / $e, ir = xt / $e, ho = Ot / $e;
    for (let Ni = 0; Ni <= de2; ++Ni) me.setXYZ(K * (de2 + 1) + Ni, Rt, ir, ho);
  }
  he.setAttribute("pathNormal", me);
  let A = new nn({ uniforms: se, vertexShader: i4, fragmentShader: j2 });
  A.transparent = true, A.alphaTest = 0.5, se.resolution.value.x = 1, se.resolution.value.y = 1, se.vertexes.value = ne.length, se.arrowTexture.value.wrapS = Cr, se.arrowTexture.value.wrapT = Cr, se.arrowTexture.value.anisotropy = 16;
  let Z = new ve(he, A), O = Z.clone(), Q = { ...se, opacityMultiplier: { type: "f", value: 0.25 }, pathIsVertical: { type: "b", value: u6 } };
  Q.complete.value = 1, O.material = new nn({ uniforms: Q, vertexShader: i4, fragmentShader: j2 }), O.material.transparent = true, O.material.alphaTest = 0.5, O.material.depthWrite = false, O.material.depthTest = false, Q.resolution.value.x = 1, Q.resolution.value.y = 1, Q.vertexes.value = ne.length, Q.arrowTexture.value.wrapS = Cr, Q.arrowTexture.value.wrapT = Cr, Q.arrowTexture.value.anisotropy = 16, Q.complete.value = s6, Z.userData = O.userData = r6.mesh.userData;
  let X = r6.mesh;
  if (!l) {
    let K = new nn({ uniforms: se, vertexShader: i4, fragmentShader: VM }), ae = new ve(he, K);
    ae.name = "stencil", ae.material.colorWrite = false, ae.material.stencilWrite = true, ae.material.stencilRef = 1, ae.material.stencilFunc = Vo, ae.material.stencilZPass = ju, ae.material.stencilZFail = ju, ae.material.stencilFail = ju, ae.material.depthWrite = false, ae.material.depthTest = false, ae.userData = r6.mesh.userData, X.add(ae), X.add(O), O.renderOrder = 0, Z.renderOrder = 1;
  }
  if (X.add(Z), u6) {
    let K = new Ie().setFromObject(Z), ae = new C();
    K.getCenter(ae), X.children.forEach(($e) => {
      $e.geometry.center(), $e.position.copy(ae);
    });
  }
  l && (Z.material.stencilWrite = true, Z.material.stencilRef = 1, Z.material.stencilFunc = nd, Z.material.stencilZPass = $n, Z.material.stencilZFail = $n, Z.material.stencilFail = $n, Z.material.needsUpdate = true, Z.layers.disableAll(), Z.layers.enable(rM.ALWAYS_ON_TOP_PATHS)), he.computeBoundingBox();
  let Y = new C();
  return he.boundingBox.getCenter(Y), { mesh: X, material: A, center: Y };
}
var lH = 0.15;
var cH = 0.5;
var l0 = class extends Ka {
  constructor(t6, n, o, i) {
    super();
    t(this, "rendererState");
    t(this, "verticalDistanceDirty", true);
    t(this, "convertTo3DMapPosition");
    t(this, "getParentContainer");
    t(this, "convertZoomLevelToAltitude");
    this.rendererState = t6, this.convertTo3DMapPosition = n, this.getParentContainer = o, this.convertZoomLevelToAltitude = i;
  }
  update(t6, n, o) {
    let i, s6 = false;
    for (let u6 of this.rendererState.geometry3DIdsInScene) if (i = this.rendererState.geometry3DMap.get(u6), i && i.type === "path" && i.components[0].type === "path") {
      let l = i.components[0], c = i.components[1], d = l.isVertical && this.verticalDistanceDirty;
      if (!(l instanceof Eu)) continue;
      let f = [];
      if (l.dirty || c.dirty || d) {
        if (l.mesh.parent != null) for (let h = l.mesh.children.length - 1; h >= 0; h--) ox(l.mesh.children[0]);
        if (l.feature.features.length === 2 && l.feature.features[0].properties.parentId && l.feature.features[1].properties.parentId) {
          let h = l.feature.features[0], b = l.feature.features[l.feature.features.length - 1], I, E, v6 = h.geometry.coordinates[2] || 0, x6 = b.geometry.coordinates[2] || 0;
          h.properties.parentId && (I = this.getParentContainer(h.properties.parentId, true), I != null && I.altitude != null && (v6 += I.altitude, l.isVertical = true)), b.properties.parentId && (E = this.getParentContainer(b.properties.parentId, true), E != null && E.altitude != null && (x6 += E.altitude, l.isVertical = true));
          let D = this.convertTo3DMapPosition(h.geometry.coordinates[1], h.geometry.coordinates[0], v6), w6 = this.convertTo3DMapPosition(b.geometry.coordinates[1], b.geometry.coordinates[0], x6);
          Math.abs(D.z - w6.z) > cH && I != null && I.visible && E != null && E.visible && (f = [D, w6]);
        } else {
          let h = l.feature.features;
          for (let b = 0; b < h.length; b++) if (b === 0 || !Mwe(h[b].geometry.coordinates, h[b - 1].geometry.coordinates)) {
            let I = this.convertTo3DMapPosition(h[b].geometry.coordinates[1], h[b].geometry.coordinates[0], h[b].geometry.coordinates[2] || 0);
            f.push(I);
          }
        }
        if (f.length > 1) {
          let { mesh: h, material: b, center: I } = ZM2(f, l, { color: c.color, altitude: c.altitude, isVertical: l.isVertical });
          l.mesh = h, l.material = b, l.position = I;
        }
        l.dirty && typeof l.width == "object" && l.width.on === "zoom-level" && (l.altitudeBreakpoints = l.width.input.map((h) => this.convertZoomLevelToAltitude(h))), l.dirty = false;
      }
      c.dirty && (l.mesh.children.forEach((h) => {
        h.name !== "stencil" && (h.material.uniforms.color.value.set(c.color), h.material.visible = c.visible, h.material.needsUpdate = true);
      }), l.mesh.position.z = c.altitude, c.dirty = false), l.material && (l.mesh.children.forEach((h) => {
        let b = h.material.uniforms;
        if (h.name === "stencil") {
          l.materialDirty && WM(l, h.material);
          return;
        }
        if (typeof l.width == "object" && l.width.on === "zoom-level") {
          l.altitudeBreakpoints && l.altitudeBreakpoints.length > 2 && Pt.warn("Path width interpolation does not yet support more than 2 breakpoints! This will be added in a future version. Path width will only use the first two breakpoints.");
          let I = nI(o, l.altitudeBreakpoints?.slice(0, 2) ?? [t6, n]);
          l.breakpoint = I, b.nearZoom.value = l.altitudeBreakpoints?.[I] ?? t6, b.farZoom.value = l.altitudeBreakpoints?.[I + 1] ?? n, b.nearRadius.value = Number(l.width.output[I]) / 2, b.farRadius.value = Number(l.width.output[I + 1] ?? l.width.output[I]) / 2;
        }
        b.cameraParameters.value.x = o, l.materialDirty && (b.displayArrowsOnPath.value = l.displayArrowsOnPath, b.pulseColor.value.set(l.accentColor), b.complete.value = l.completeFraction, WM(l, h.material), typeof l.width == "number" && (b.nearZoom.value = t6, b.farZoom.value = n, b.nearRadius.value = Number(l.width) / 2, b.farRadius.value = Number(l.width) / 2));
      }), l.displayArrowsOnPath && l.animateArrowsOnPath && (l.mesh.children.forEach((h) => {
        h.name !== "stencil" && (h.material.uniforms.arrowAnimationTimer.value = performance.now() / 3e3, h.material.needsUpdate = true);
      }), s6 = true), l.materialDirty = false);
    }
    this.verticalDistanceDirty = false, s6 && this.publish("animate:path");
  }
};
function WM(e6, r6) {
  let t6 = r6.uniforms;
  t6.highlightCompleteFraction.value = e6.highlightCompleteFraction, t6.highlightStartFraction.value = e6.highlightStartFraction, t6.highlightEndFraction.value = e6.highlightEndFraction, t6.highlightWidthMultiplier.value = e6.highlightWidthMultiplier, t6.highlightColor.value.set(e6.highlightColor);
}
$i();
var pr;
var kd;
var Ss;
var s4;
var a4 = class {
  constructor(r6) {
    t(this, "rendererState");
    t(this, "dirty", false);
    v(this, pr);
    v(this, kd);
    v(this, Ss);
    v(this, s4, new kt());
    this.rendererState = r6;
  }
  updateOne(r6) {
    if (r6 instanceof Sr && r6.components[0] instanceof Mi && r6.components[1] instanceof sx && r6.parentObject3D instanceof lr && (w(this, pr, r6.components[0]), w(this, Ss, r6.components[1]), !u(this, pr).detached && u(this, pr).shouldDetach && u(this, pr).mesh != null && u(this, pr).material != null && u(this, pr).batchedProps != null)) {
      w(this, kd, r6.parentObject3D), u(this, pr).visible = false;
      let t6 = new Nt(u(this, Ss).color), n = u(this, Ss).opacity * Cwe(r6), o = new Lu({ color: t6, side: ln, opacity: n ?? 1, transparent: n !== void 0 ? n < 1 : false }, 1, u(this, pr).material.repeatYFactor), i = new Xa(1, u(this, pr).batchedProps.positionCount, 0, o), s6 = AM2(u(this, pr), i, u(this, s4));
      if (s6 == null) return;
      i.userData = { entities: { 0: r6.id }, detached: true }, u(this, pr).instanceIndex = s6, u(this, pr).material.setColor(u(this, pr).instanceIndex, t6, u(this, Ss).topColor ? new Nt(u(this, Ss).topColor) : t6), u(this, pr).mesh = i, u(this, pr).material = o, u(this, kd).add(i), u(this, pr).shouldDetach = false, u(this, pr).detached = true;
    }
  }
  update() {
    if (!this.dirty) return;
    let r6;
    for (let t6 of this.rendererState.geometry3DIdsInScene) r6 = this.rendererState.geometry3DMap.get(t6), this.updateOne(r6);
    this.dirty = false, this.cleanup();
  }
  cleanup() {
    w(this, pr, void 0), w(this, kd, void 0), w(this, Ss, void 0);
  }
};
pr = /* @__PURE__ */ new WeakMap(), kd = /* @__PURE__ */ new WeakMap(), Ss = /* @__PURE__ */ new WeakMap(), s4 = /* @__PURE__ */ new WeakMap();
$i();
$i();
function XM2(e6, r6, t6) {
  if (e6.batchedProps?.range && e6.mesh) {
    let n = r6 || 1e-4, o = n / Math.max(t6, 1e-4);
    return V1(e6.mesh.geometry, e6.batchedProps.range, n, 0), e6.material && (e6.material.repeatYFactor = o), e6.currentHeight = n, true;
  }
  return false;
}
function JM(e6, r6, t6, n, o, i) {
  return e6.mesh && e6.instanceIndex !== -1 ? (e6.mesh.getMatrixAt(e6.instanceIndex, t6), t6.decompose(n, o, i), n.z = r6, t6.compose(n, o, i), e6.mesh.setMatrixAt(e6.instanceIndex, t6), e6.altitude = r6, true) : false;
}
var Ti;
var Ea;
var l4;
var c4;
var p4;
var d4;
var u4 = class {
  constructor(r6) {
    t(this, "rendererState");
    t(this, "dirty", false);
    v(this, Ti);
    v(this, Ea);
    v(this, l4, new kt());
    v(this, c4, new C());
    v(this, p4, new bn());
    v(this, d4, new C());
    this.rendererState = r6;
  }
  updateOne(r6) {
    if (r6 instanceof Sr && r6.type === "geometry" && r6.components[1]?.dirty && (w(this, Ti, r6.components[0]), w(this, Ea, r6.components[1]), r6.type === "geometry")) {
      let t6 = false;
      u(this, Ea).height !== u(this, Ti).currentHeight && (t6 = XM2(u(this, Ti), u(this, Ea).height, u(this, Ea).initialHeight)), u(this, Ea).altitude !== u(this, Ti).altitude && (t6 = JM(u(this, Ti), u(this, Ea).altitude, u(this, l4), u(this, c4), u(this, p4), u(this, d4))), t6 && u(this, Ti).mesh != null && u(this, Ti).mesh.computeBoundingSphere();
    }
  }
  update() {
    let r6;
    for (let t6 of this.rendererState.geometry3DIdsInScene) r6 = this.rendererState.geometry3DMap.get(t6), this.updateOne(r6);
    this.cleanup();
  }
  cleanup() {
    w(this, Ti, void 0), w(this, Ea, void 0);
  }
};
Ti = /* @__PURE__ */ new WeakMap(), Ea = /* @__PURE__ */ new WeakMap(), l4 = /* @__PURE__ */ new WeakMap(), c4 = /* @__PURE__ */ new WeakMap(), p4 = /* @__PURE__ */ new WeakMap(), d4 = /* @__PURE__ */ new WeakMap();
$i();
var pH = { showPolygonLabelTextAreaMesh: false, showEnvMap: false, showCollisionBoxes: false };
var m4 = class {
  constructor(r6) {
    t(this, "state", pH);
    t(this, "core");
    this.core = r6;
  }
  update(r6) {
    let t6 = {};
    for (let [n, o] of Object.entries(r6)) n in this.state && this.state[n] !== r6[n] && (this.state[n] = o, t6[n] = o);
    this.handleUpdate(t6);
  }
  handleUpdate(r6) {
    r6.showPolygonLabelTextAreaMesh != null && (r6.showPolygonLabelTextAreaMesh ? this.core.getSystems().text3DSystem.showTextAreaMesh() : this.core.getSystems().text3DSystem.hideTextAreaMesh()), r6.showEnvMap != null && (r6.showEnvMap ? this.core.setEnvironment("basic") : this.core.setEnvironment(false)), r6.showCollisionBoxes != null && (r6.showCollisionBoxes ? (this.core.getSystems().collisionSystem.showCollisionBoxes(), this.core.render()) : this.core.getSystems().collisionSystem.hideCollisionBoxes());
  }
};
$i();
var c0 = 9;
var dH = false;
var YM = 0.1;
function mH(e6, r6, t6) {
  for (let n = 0; n < r6; n++) {
    let o = (t6 & 16711680) >> 16, i = (t6 & 65280) >> 8, s6 = t6 & 255;
    e6[n * 3] = o / 255, e6[n * 3 + 1] = i / 255, e6[n * 3 + 2] = s6 / 255;
  }
}
var f4 = class {
  constructor(r6, t6, n) {
    t(this, "state");
    t(this, "renderer");
    t(this, "renderService");
    t(this, "pickingTexture");
    t(this, "pickingMaterial");
    t(this, "pixelBuffer");
    t(this, "width", 0);
    t(this, "height", 0);
    t(this, "scale", 1 / 2);
    t(this, "color", 1);
    t(this, "convertTo3DMapPosition");
    t(this, "destroyed", false);
    t(this, "enabled", false);
    t(this, "backgroundId", 16777215);
    t(this, "resize", () => {
      let r8 = this.state.pixelRatio;
      this.width = Math.floor(this.renderer.domElement.width / r8 * this.scale), this.height = Math.floor(this.renderer.domElement.height / r8 * this.scale), this.pixelBuffer = new Uint8Array(4 * this.width * this.height), this.pickingTexture = new an(this.width, this.height, { format: Pe, type: cn, internalFormat: "RGBA" });
    });
    t(this, "shouldShowByXY", (r8, t10, n6) => {
      if (this.pixelBuffer == null) return false;
      let o = r8 + (this.height - t10 - 1) * this.width, i = this.pixelBuffer[o * 4], s6 = this.pixelBuffer[o * 4 + 1], u6 = this.pixelBuffer[o * 4 + 2], l = i << 16 | s6 << 8 | u6;
      return l === n6 || l === this.backgroundId;
    });
    t(this, "activeOccluders", /* @__PURE__ */ new Set());
    t(this, "update", () => {
      if (!this.enabled || this.destroyed || (this.activeOccluders.clear(), this.activeOccluders.add(this.backgroundId), !this.pickingTexture || !this.pixelBuffer)) return;
      let r8, t10;
      for (let o of this.state.geometry3DIdsInScene) {
        let i = this.state.geometry3DMap.get(o);
        if (i && i instanceof ur && i.userData.occluderFeature != null && i.userData.occluderId != null && (this.activeOccluders.add(i.userData.occluderId), i.userData.occluderDirty)) {
          if (r8 = i.userData.occluderFeature, r8.geometry.type === "Polygon") {
            let s6 = g1(r8, this.convertTo3DMapPosition, { color: "white", height: YM });
            t10 = this.createOccluderMesh(s6, i.userData.occluderId), i.add(t10);
          } else if (r8.geometry.type === "MultiPolygon") {
            let s6 = y1(r8, this.convertTo3DMapPosition, { color: "white", height: YM });
            t10 = this.createOccluderMesh(s6, i.userData.occluderId), i?.add(t10);
          }
          i.userData.occluderDirty = false;
        }
      }
      this.renderer.setRenderTarget(this.pickingTexture);
      let n6 = new Nt(this.backgroundId);
      this.renderer.setClearColor(n6), this.renderer.clear(), this.state.cameraObject.layers.disableAll(), this.state.cameraObject.layers.enable(c0), this.renderer.render(this.state.entityScene.parent, this.state.cameraObject), this.renderer.setRenderTarget(null), this.state.cameraObject.layers.disable(c0), dH ? this.renderService.enabledLayers.add(c0) : this.renderService.enabledLayers.delete(c0), this.renderer.readRenderTargetPixelsAsync(this.pickingTexture, 0, 0, this.width, this.height, this.pixelBuffer).then(() => {
        if (!this.destroyed) for (let o of this.state.geometry2DIdsInScene) {
          let i = this.state.geometry2DMap.get(o);
          if (i && i?.occluderId != null && this.activeOccluders.has(i?.occluderId)) {
            let s6 = i.components[0].projection, u6 = Math.floor(s6.x * this.scale), l = Math.floor(s6.y * this.scale), c = this.shouldShowByXY(u6, l, i.occluderId);
            i.components[0].isOccluded = !c;
          }
        }
      }).catch((o) => {
        this.destroyed || Pt.error(o);
      });
    });
    if (this.state = r6, this.convertTo3DMapPosition = t6, n?.renderer == null) throw new Error("No Renderer");
    this.renderService = n, this.renderer = n.renderer, this.resize(), this.pickingMaterial = new nn({ glslVersion: Wl, vertexShader: `
				attribute vec3 color;
				varying vec3 vColor;
				void main() {
					vColor = color;
					gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
				}
			`, fragmentShader: `
				varying vec3 vColor;
				out vec4 fragColor;

				void main() {
					fragColor = vec4(vColor, 1.0);
				}
			` });
  }
  applyId(r6, t6) {
    let n = r6.attributes.position, o = new Float32Array(n.count * 3);
    mH(o, n.count, t6), r6.setAttribute("color", new xe(o, 3));
  }
  createOccluderMesh(r6, t6) {
    let n = new ve(r6, this.pickingMaterial);
    return n.layers.set(c0), this.applyId(n.geometry, t6), n.userData.occluderId = t6, n;
  }
  reserveOccluderId() {
    return this.color++, this.color;
  }
  enable() {
    this.enabled = true;
  }
  disable() {
    this.enabled = false;
  }
  destroy() {
    this.destroyed = true, this.pickingTexture?.dispose(), this.pickingMaterial.dispose(), this.pickingTexture = void 0, this.pixelBuffer = void 0;
  }
};
$i();
var h4 = class {
  constructor(r6) {
    this.state = r6;
    t(this, "dirty", true);
  }
  update() {
    if (this.dirty) {
      for (let r6 of this.state.geometry3DIdsInScene) {
        let t6 = this.state.geometry3DMap.get(r6);
        if (t6 instanceof Sr && t6.type === "geometry" && t6.components[0]?.geometry != null) {
          let n = t6.components[0];
          n.geometry && (n.geometry.dispose(), n.geometry = void 0);
        }
      }
      this.dirty = false;
    }
  }
};
$i();
var g4 = class extends Ka {
  constructor(t6) {
    super();
    t(this, "dirty", true);
    t(this, "state");
    t(this, "texturePromiseCache", /* @__PURE__ */ new Map());
    this.state = t6;
  }
  async loadTexture(t6) {
    if (this.texturePromiseCache.has(t6)) return this.texturePromiseCache.get(t6);
    let n = new Promise((o, i) => {
      Cu.getLoader().load(t6, o, void 0, i);
    });
    return this.texturePromiseCache.set(t6, n), n;
  }
  update() {
    for (let t6 of this.state.geometry3DIdsInScene) {
      let n = this.state.geometry3DMap.get(t6);
      if (!(n instanceof Sr)) continue;
      let o = n.components[6];
      if (!(o instanceof fm)) continue;
      let i = n.components[0];
      if (!(i instanceof Mi) || !o.dirty) continue;
      let s6 = vs(i);
      s6 != null && (o.texture != null && (o.texture.path === "" ? (s6.texture = null, s6.hideTextures(i.instanceIndex), o.dirty = false) : this.loadTexture(o.texture.path).then((u6) => {
        u6 && (o.textureInstance = u6, s6.texture = u6, s6.blendTexture = true, s6.showTextures(i.instanceIndex)), this.publish("texture-added");
      })), o.topTexture != null && (o.topTexture.path === "" ? (s6.topTexture = null, s6.hideTextures(i.instanceIndex), o.dirty = false) : this.loadTexture(o.topTexture.path).then((u6) => {
        u6 && (o.topTextureInstance = u6, s6.topTexture = u6, s6.blendTexture = true, s6.showTextures(i.instanceIndex)), this.publish("texture-added");
      })), o.dirty = false);
    }
  }
  destroy() {
    this.texturePromiseCache.forEach(async (t6) => {
      (await t6).dispose();
    }), this.texturePromiseCache.clear();
  }
};
$i();
var y4 = class {
  constructor(r6) {
    t(this, "currentOrder", rM.ALWAYS_ON_TOP_MODELS);
    t(this, "assignedOrders", /* @__PURE__ */ new WeakMap());
    t(this, "state");
    this.state = r6;
  }
  assignOrder(r6) {
    return this.assignedOrders.has(r6) ? this.assignedOrders.get(r6) : (this.currentOrder += 1, this.assignedOrders.set(r6, this.currentOrder), this.currentOrder);
  }
  releaseOrder(r6) {
    return this.assignedOrders.delete(r6), rM.GEOMETRY;
  }
  getHighestOrder() {
    return this.currentOrder;
  }
  getOrder(r6) {
    return this.assignedOrders.get(r6);
  }
  update() {
    let r6, t6, n;
    for (let o of this.state.geometry3DIdsInScene) if (n = this.state.geometry3DMap.get(o), n && n.type === "model" && n.components[1]?.dirty) if (r6 = n.components[1], t6 = n.components[0], r6.visibleThroughGeometry === true) {
      let i = this.assignOrder(t6);
      t6.renderOrder !== i && (t6.renderOrder = i);
    } else t6.renderOrder > rM.GEOMETRY && (t6.renderOrder = this.releaseOrder(t6));
  }
};
$i();
var KM = 500;
var b4 = class {
  constructor(r6) {
    t(this, "rendererState");
    t(this, "dirty", false);
    this.rendererState = r6;
  }
  update() {
    let r6, t6, n;
    for (let o of this.rendererState.geometry3DIdsInScene) if (r6 = this.rendererState.geometry3DMap.get(o), r6?.type === "model" && r6.components[7] != null && (n = r6.components[0], t6 = r6.components[7], t6.dirty && n.mesh != null && t6?.verticalOffset !== 1 / 0 && (t6.plane == null && (t6.plane = new sn(new C(0, 0, -1), t6.verticalOffset), this.process(n, t6)), t6.plane.constant !== t6.verticalOffset && (t6.plane.constant = t6.verticalOffset), t6.topColor != null && t6.holeFillMesh?.material instanceof Jr && t6.holeFillMesh.material.color.set(t6.topColor), t6.topVisible != null && t6.holeFillMesh != null && (t6.holeFillMesh.visible = t6.topVisible), t6.dirty = false), t6.plane != null && t6.holeFillMesh != null && t6.topVisible === true)) {
      let i = t6.plane, s6 = t6.holeFillMesh;
      i.coplanarPoint(s6.position), s6.lookAt(s6.position.x - i.normal.x, s6.position.y - i.normal.y, s6.position.z - i.normal.z);
    }
  }
  process(r6, t6) {
    if (r6.mesh == null) return;
    let n = r6.mesh.parent, o = [];
    r6.mesh.traverse((h) => {
      if (h instanceof ve) {
        let b = h.geometry.clone();
        h.updateWorldMatrix(true, false), b.applyMatrix4(h.matrixWorld), o.push(b), b.computeVertexNormals(), h.material.clippingPlanes = [t6.plane], h.material.transparent = false;
      }
    });
    let i = M(o), s6 = new Kn(), u6 = new Kn(), l = this.createHoleFillGeometry(i, t6.plane, 1);
    l.name = "hole-fill-group";
    let c = new Jr({ color: t6.topColor ?? "#E67B5B", clippingPlanes: [], stencilWrite: true, stencilFunc: nd, stencilFail: ju, stencilZFail: ju, stencilZPass: ju }), d = new Ls(KM, KM), f = new ve(d, c);
    f.name = "hole-fill-mesh", t6.holeFillMesh = f, f.renderOrder = 1.1, u6.add(l), u6.add(r6.mesh), s6.add(u6), s6.add(f), n?.add(s6), r6.mesh = s6;
  }
  createHoleFillGeometry(r6, t6, n = 0) {
    let o = new Kn(), i = new ps();
    i.depthWrite = false, i.depthTest = false, i.colorWrite = false, i.stencilWrite = true, i.stencilFunc = Vo;
    let s6 = i.clone();
    s6.side = Le, s6.clippingPlanes = [t6], s6.stencilFail = td, s6.stencilZFail = td, s6.stencilZPass = td;
    let u6 = new ve(r6, s6);
    u6.renderOrder = n, o.add(u6);
    let l = i.clone();
    l.side = Mn, l.clippingPlanes = [t6], l.stencilFail = ed, l.stencilZFail = ed, l.stencilZPass = ed;
    let c = new ve(r6, l);
    return c.renderOrder = n, o.add(c), o;
  }
};
var qM2 = new El();
var { DEFAULT_PITCH: H2, DEFAULT_BEARING: Z2, DEFAULT_ZOOM_LEVEL: W2, DEFAULT_MIN_ZOOM_LEVEL: fH, DEFAULT_MAX_ZOOM_LEVEL: hH } = Ei;
var gH = yd.radToDeg(0.6435011087932844);
var qt;
var Vt2;
var Jl;
var p0;
var _d;
var Fu;
var Yl;
var Ld;
var Qr;
var G2;
var _;
var Ho2;
var Kl;
var dt;
var wi;
var Qt;
var Zo;
var jr;
var k;
var d0;
var Tr;
var Tt;
var QM;
var eA;
var tA;
var Ds;
var m0;
var f0;
var h0;
var g0;
var Rd;
var v4;
var y0;
var Nd;
var b0;
var ql;
var z2;
var Ql;
var v0;
var x0;
var Cn;
var Sn;
var V2;
var x4;
var I4;
var $d;
var I0;
var U2 = class extends Ka {
  constructor(t6, n = {}) {
    super();
    v(this, Qr);
    t(this, "options");
    t(this, "container");
    t(this, "Debug");
    v(this, qt);
    v(this, Vt2);
    v(this, Jl);
    v(this, p0);
    v(this, _d);
    v(this, Fu);
    v(this, Yl);
    v(this, Ld);
    t(this, "rendererDomElement");
    v(this, _, { geometry3DMap: /* @__PURE__ */ new Map(), geometry2DMap: /* @__PURE__ */ new Map(), geometry2DIdsInScene: /* @__PURE__ */ new Set(), geometry3DIdsInScene: /* @__PURE__ */ new Set(), geometryGroupIdsToLoad: /* @__PURE__ */ new Set(), entityScene: new ur("__scene"), hoverColor: "#f6efff", text3dHoverColor: "white", insetsPadding: m0e, shouldMeasureCanvas: true, pixelRatio: this.resolutionScale, canvasWidth: 0, canvasHeight: 0, internalTweenGroup: new w1(), externalTweenGroup: new w1(), cameraObject: new Ee(), naturalBearing: 0, containerOffset: [0, 0], useStandaloneCamera: false });
    v(this, Ho2, {});
    v(this, Kl, new AbortController());
    t(this, "camera");
    v(this, dt);
    v(this, wi);
    v(this, Qt);
    v(this, Zo);
    v(this, jr);
    v(this, k, {});
    v(this, d0, window.matchMedia("screen and (min-resolution: 2dppx)"));
    t(this, "map");
    v(this, Tr, () => {
      this.aborted || !u(this, k)?.renderSystem || (u(this, k).renderSystem.twoDdirty = true);
    });
    v(this, Tt, () => {
      this.aborted || !u(this, k)?.renderSystem || (u(this, k).renderSystem.threeDdirty = true);
    });
    v(this, Ds, "standalone");
    v(this, m0, () => {
      u(this, k).geometryDisposalSystem.dirty = true, this.render();
    });
    v(this, f0, (t10) => Math.trunc(t10 * 10) / 10);
    v(this, h0, () => {
      x(this, Qr, G2).call(this, K4()), u(this, k).twoDDrawSystem.dirty = true, u(this, Rd).call(this, void 0, void 0, true);
    });
    v(this, g0, () => {
      u(this, Rd).call(this);
    });
    v(this, Rd, (t10, n6, o6 = false) => {
      let i6 = t10 ?? this.rendererDomElement.clientWidth, s8 = n6 ?? this.rendererDomElement.clientHeight;
      if ((i6 === 0 || s8 === 0) && !o6) return;
      u(this, _).canvasWidth = i6, u(this, _).canvasHeight = s8, x(this, Qr, G2).call(this, K4()), u(this, ql).call(this), x(this, Qr, tA).call(this), u(this, k).cameraSystem.resize(this.canvasWidth, this.canvasHeight), u(this, k).cameraSystem.dirty = true, this.map != null && (this.map.setMinZoom(this.camera.minZoomLevel), this.map.setMaxZoom(this.camera.maxZoomLevel)), u(this, k).watermarkSystem.resize(this.canvasWidth, this.canvasHeight), u(this, k).htmlControlsSystem.resize(this.canvasWidth), u(this, k).geometryInFocusSystem.resize(), u(this, k).occlusion2DSystem.resize();
      let { top: u8, left: l6 } = this.container.getBoundingClientRect();
      u(this, _).containerOffset = [u8, l6], this.publish("resize"), this.render();
    });
    v(this, v4, () => {
      this.renderSync();
    });
    v(this, y0, new C());
    v(this, Nd, (t10, n6) => {
      let o6 = this.mode === "standalone" ? u(this, Vt2) : this.viewCamera;
      if (u(this, Vt2).position.z + this.camera.elevation > n6.z) {
        u(this, y0).copy(n6);
        let i6 = u(this, y0).project(o6), s8 = (i6.x + 1) / 2 * this.canvasWidth - 0 / 2, u8 = (-i6.y + 1) / 2 * this.canvasHeight - 0 / 2, l6 = u(this, f0).call(this, s8), c6 = u(this, f0).call(this, u8);
        t10.x = l6, t10.y = c6;
      } else t10.x = -1e3, t10.y = -1e3;
    });
    v(this, b0, (t10, n6) => {
      u(this, jr).setBufferSize(t10, n6), u(this, Vt2).aspect = t10 / n6, u(this, Vt2).updateProjectionMatrix(), u(this, Vt2).updateMatrixWorld(true), u(this, _d).x = t10, u(this, _d).y = n6;
    });
    v(this, ql, () => {
      let t10 = u(this, _).canvasWidth = this.rendererDomElement.clientWidth, n6 = u(this, _).canvasHeight = this.rendererDomElement.clientHeight, o6 = Math.floor(t10 * this.resolutionScale), i6 = Math.floor(n6 * this.resolutionScale);
      u(this, b0).call(this, o6, i6), this.map?.resize(), u(this, _).shouldMeasureCanvas = false;
    });
    t(this, "getParentContainer", (t10, n6 = true) => {
      if (!t10) return n6 ? u(this, _).entityScene : void 0;
      if (typeof t10 == "string" || typeof t10 == "number") {
        let o6 = u(this, _).geometry3DMap.get(t10);
        return o6 instanceof ur ? o6 : (Pt.warn(`Parent (${typeof t10 == "object" ? t10.id : t10}) is not a valid container, adding to scene`), n6 ? u(this, _).entityScene : void 0);
      } else if (t10.type === "group-container") {
        let o6 = u(this, _).geometry3DMap.get(t10.id);
        if (o6 instanceof ur) return o6;
      }
      return n6 ? u(this, _).entityScene : void 0;
    });
    t(this, "showCollisionBoxes", () => {
      u(this, k).collisionSystem.showCollisionBoxes(), this.render();
    });
    t(this, "hideCollisionBoxes", () => {
      u(this, k).collisionSystem.hideCollisionBoxes(), this.render();
    });
    t(this, "projectScreenXYToCoordinate", (t10, n6, o6 = false) => {
      let i6 = this.container.getBoundingClientRect(), s8 = (t10 - i6.left) / u(this, _).canvasWidth * 2 - 1, u8 = -((n6 - i6.top) / u(this, _).canvasHeight) * 2 + 1, l6 = new at(s8, u8), c6, d6;
      if (o6 ? (qM2.setFromCamera(l6, u(this, Vt2)), c6 = qM2.intersectObject(u(this, Fu), false)[0]?.point) : (c6 = u(this, k).interactionSystem.getThreeDIntersectsFromXY(l6)?.[0]?.point, d6 = u(this, k).interactionSystem.getGroupContainerIntersectsFromXY(l6)), c6) return { coordinate: this.convert3DMapPositionToCoordinate(c6), groupContainers: d6 };
    });
    t(this, "projectCoordinateToScreenXY", (t10) => {
      let n6 = this.convertTo3DMapPosition(t10[1], t10[0], t10[2] || 0), o6 = new at();
      return u(this, Nd).call(this, o6, n6), { x: o6.x, y: o6.y };
    });
    t(this, "convert3DMapPositionToCoordinate", (t10) => {
      let { lat: n6, lon: o6 } = xwe(u(this, _).center?.[1] ?? 0, u(this, _).center?.[0] ?? 0, t10.x, t10.y);
      return [o6, n6, t10.z];
    });
    t(this, "setBackgroundColor", (t10, n6) => {
      u(this, jr).setBackgroundColor(t10, n6);
    });
    t(this, "getMetersPerPixel", () => u(this, k).cameraSystem.getCurrentMetersPerPixel());
    t(this, "hideOutdoorLayersIntersectingPolygons", (t10, n6, o6) => {
      u(this, k).outdoorLayersSystem.hideLayersIntersectingPolygons(t10, n6, o6), this.render();
    });
    v(this, Ql, new si());
    v(this, v0, new kt());
    v(this, x0, (t10) => {
      Pt.error("Render failed: ", t10, t10.stack ?? "No stack trace available"), this.publish("render-error", { error: t10 });
    });
    t(this, "render", () => {
      if (!(u(this, k)?.renderSystem == null || this.aborted)) if (this.map && (this.mode === "outdoors-interleaved" || this.mode === "outdoors-overlay")) this.map.triggerRepaint();
      else return u(this, k).renderSystem.update().catch(u(this, x0));
    });
    t(this, "renderSync", () => this.aborted ? Promise.resolve() : u(this, k).renderSystem.update(true).catch(u(this, x0)));
    v(this, Cn, J4(() => {
      this.publish("user-interaction-start", void 0);
    }, 0, true));
    v(this, Sn, J4(() => {
      this.publish("user-interaction-end", void 0), this.render();
    }, 0, true));
    t(this, "on", (t10, n6) => {
      this.aborted || (super.on(t10, n6), ["outdoor-view-loaded", "outdoor-style-loaded"].includes(t10) && this.mode === "standalone" && yc.env.NODE_ENV !== "test" && (Pt.warn(`"${t10}" was subscribed to but outdoor view is disabled. The event has been triggered immediately. Enable outdoor view or remove the listener.`), this.publish(t10)));
    });
    t(this, "off", (t10, n6) => {
      super.off(t10, n6);
    });
    t(this, "getCursor", () => u(this, k).interactionSystem.getCursor());
    v(this, x4, () => {
      if (u(this, _).entityScene.removeEventListener("childadded", u(this, Tt)), u(this, _).entityScene.removeEventListener("childadded", u(this, Tr)), u(this, _).entityScene.removeEventListener("childremoved", u(this, Tt)), u(this, _).entityScene.removeEventListener("childremoved", u(this, Tr)), window.removeEventListener("resize", u(this, g0), false), u(this, d0).removeEventListener("change", u(this, h0)), this.map) {
        for (let t10 in u(this, Ho2)) for (let n6 of u(this, Ho2)[t10]) this.map.off(t10, n6);
        w(this, Ho2, {});
      }
      this._subscribers = {};
    });
    v(this, I4, () => {
      try {
        u(this, Ds) !== "outdoors-overlay" && (this.map && this.map.remove(), this.container && this.rendererDomElement && this.container.contains(this.rendererDomElement) && this.container.removeChild(this.rendererDomElement)), this.container && (u(this, Zo) && this.container.contains(u(this, Zo)) && this.container.removeChild(u(this, Zo)), u(this, dt) && this.container.contains(u(this, dt)) && this.container.removeChild(u(this, dt)));
      } catch (t10) {
        Pt.warn("Error during DOM cleanup, some elements may not have been removed:", t10);
      }
    });
    t(this, "destroy", () => {
      u(this, k) && (u(this, k).textureSystem.destroy(), this.aborted || u(this, Kl).abort(), u(this, x4).call(this), this.remove("__scene"), u(this, k).renderSystem.destroy(), u(this, k).cameraSystem.dispose(), u(this, k).exporterSystem.destroy(), u(this, k).outdoorLayersSystem.destroy(), u(this, k).borderSystem.destroy(), u(this, Yl) && u(this, Yl).disconnect(), u(this, jr).destroy(), u(this, qt)?.traverse((t10) => {
        ox(t10), "dispose" in t10 && typeof t10.dispose == "function" && t10.dispose();
      }), w(this, qt, void 0), u(this, k).htmlControlsSystem.destroy(), u(this, k).collisionSystem.destroy(), u(this, k).interactionSystem.destroy(), u(this, k).domMutationSystem.destroy(), u(this, k).geometryInFocusSystem.destroy(), u(this, k).occlusion2DSystem.destroy(), w(this, k, void 0), u(this, I4).call(this), w(this, jr, void 0));
    });
    v(this, $d, new C());
    v(this, I0, new C());
    if (w(this, Kl, new AbortController()), u(this, _).useStandaloneCamera = n.useStandaloneCamera ?? false, u(this, _).naturalBearing = n.naturalBearing ?? 0, this.convertTo3DMapPosition = this.convertTo3DMapPosition.bind(this), !t6.clientWidth || !t6.clientHeight) throw new Error("[MappedinJS] Container width and height must be greater than 0");
    this.convertTo3DMapPosition = this.convertTo3DMapPosition.bind(this), (n.mode === "outdoors-interleaved" || n.mode === "outdoors-overlay") && n.map && (w(this, Ds, n.mode), this.map = n.map), u(this, _).entityScene.addEventListener("childadded", () => {
      u(this, Tt).call(this), u(this, Tr).call(this);
    }), u(this, _).entityScene.addEventListener("childremoved", () => {
      u(this, Tt).call(this), u(this, Tr).call(this);
    }), u(this, _).geometry3DMap.set(u(this, _).entityScene.userData.entityId, u(this, _).entityScene), n.center && (u(this, _).center = n.center ? [...n.center] : [0, 0]), this.options = n, this.container = t6, x(this, Qr, QM).call(this), x(this, Qr, eA).call(this), u(this, k).htmlControlsSystem = new G1(this.container, { outdoorEnabled: !!this.map }), u(this, Ds) !== "outdoors-overlay" && u(this, k).htmlControlsSystem.addAttributionControl(this.options.attribution), window.MappedinDebug || (window.MappedinDebug = {}), yc.env.NODE_ENV === "test" && (window.MappedinDebug.mapViewCoreInstance = this), w(this, jr, new a1({ antialias: typeof n.antialias == "boolean" ? n.antialias : true, alpha: false, canvas: this.mode !== "standalone" ? n.gl?.canvas : void 0, onWebGLContextCreationError: n.onWebGLContextCreationError, onWebGLContextLost: n.onWebGLContextLost, onWebGLContextRestored: (I) => {
      n.onWebGLContextRestored?.(I), u(this, Tr).call(this), u(this, Tt).call(this), this.render();
    }, onWebGLRendererError: n.onWebGLRendererError, backgroundColor: n.backgroundColor || "#ffffff", backgroundAlpha: n.backgroundAlpha ?? 1 })), w(this, qt, new Ho()), u(this, Ds) !== "standalone" && u(this, qt).add(Iwe()), u(this, qt).add(u(this, _).entityScene);
    let o = window.__THREE_DEVTOOLS__;
    yc.env.NODE_ENV === "dev" && typeof o < "u" && (o.dispatchEvent(new CustomEvent("observe", { detail: u(this, qt) })), o.dispatchEvent(new CustomEvent("observe", { detail: u(this, jr) }))), w(this, Vt2, new Ee(gH, this.aspect, 50, 1e5)), u(this, _).cameraObject = u(this, Vt2), w(this, p0, new _s()), u(this, Vt2).renderOrder = 999;
    let i = new de();
    i.add(u(this, Vt2)), w(this, Ld, new de()), u(this, Ld).add(i), u(this, qt).add(u(this, Ld)), u(this, Vt2).updateProjectionMatrix(), u(this, Vt2).updateMatrixWorld(true), this.referenceMap = { scale: 1, latitude: 0, longitude: 0, getNorth: () => 0, georeference: [{ target: { x: 0, y: 0 } }, { target: { x: 0, y: 0 } }, { target: { x: 0, y: 0 } }, { target: { x: 0, y: 0 } }] }, this.rendererDomElement = u(this, jr).domElement(), w(this, _d, new at());
    let s6 = new Ls(1e6, 1e6), u6 = new ps({ color: 0, visible: false });
    w(this, Fu, new ve(s6, u6)), u(this, Fu).name = "worldPlane", u(this, qt).add(u(this, Fu)), n.gl?.canvas || t6.appendChild(this.rendererDomElement), window.addEventListener("resize", u(this, g0), false), u(this, d0).addEventListener("change", u(this, h0)), typeof ResizeObserver == "function" && yc.env?.NODE_ENV !== "test" && (w(this, Yl, new ResizeObserver(Cf((I) => {
      u(this, Rd).call(this, I[0].contentRect.width, I[0].contentRect.height);
    }, 50))), u(this, Yl)?.observe(t6)), t6.classList.add("mappedin-map"), this.rendererDomElement.style.width = globalThis.MappedinDebug?.TEST_IOS ? "1080px" : "100%", this.rendererDomElement.style.height = globalThis.MappedinDebug?.TEST_IOS ? "1920px" : "100%", yc.env.NODE_ENV === "test" && this.rendererDomElement.setAttribute("data-testid", "mappedin-canvas"), this.mode !== "outdoors-overlay" && this.rendererDomElement.tabIndex !== void 0 && this.rendererDomElement.removeAttribute("tabindex"), u(this, _).canvasWidth = this.rendererDomElement.clientWidth, u(this, _).canvasHeight = this.rendererDomElement.clientHeight, this.rendererDomElement.style.touchAction = "manipulation";
    let l = this.canvasWidth, c = this.canvasHeight;
    u(this, k).watermarkSystem = new N1(u(this, Vt2), u(this, _), n?.watermark), u(this, k).watermarkSystem.on("texture-loaded", this.render), u(this, _).shouldMeasureCanvas = true, u(this, _).pixelRatio = this.resolutionScale, u(this, b0).call(this, Math.floor(l * this.resolutionScale), Math.floor(c * this.resolutionScale));
    let d = new _l(16777215, 0.3 * Math.PI);
    d.position.set(-150, -150, 350), u(this, qt).add(d);
    let f = new xl(16777215, 0.741 * Math.PI);
    u(this, qt).add(f), u(this, k).cameraSystem = new Ul(u(this, Vt2), u(this, qt), u(this, jr).renderer, u(this, _), { mode: this.mode, canvasHeight: c, canvasWidth: l }), u(this, k).cameraSystem.on("user-dolly-start", u(this, Cn)), u(this, k).cameraSystem.on("user-pan-start", u(this, Cn)), u(this, k).cameraSystem.on("user-rotate-start", u(this, Cn)), u(this, k).cameraSystem.on("user-zoom-start", u(this, Cn)), u(this, k).cameraSystem.on("user-tilt-start", u(this, Cn)), u(this, k).cameraSystem.on("user-pedestal-start", u(this, Cn)), u(this, k).cameraSystem.on("user-dolly-end", u(this, Sn)), u(this, k).cameraSystem.on("user-pan-end", u(this, Sn)), u(this, k).cameraSystem.on("user-rotate-end", u(this, Sn)), u(this, k).cameraSystem.on("user-zoom-end", u(this, Sn)), u(this, k).cameraSystem.on("user-tilt-end", u(this, Sn)), u(this, k).cameraSystem.on("user-pedestal-end", u(this, Sn)), u(this, k).cameraSystem.on("change", () => {
      this.publish("camera-change", this.camera), u(this, k).geometryInFocusSystem && (u(this, k).geometryInFocusSystem.cameraDirty = true), this.render();
    }), this.onAbort(() => {
      u(this, k).cameraSystem.off("user-dolly-start", u(this, Cn)), u(this, k).cameraSystem.off("user-pan-start", u(this, Cn)), u(this, k).cameraSystem.off("user-rotate-start", u(this, Cn)), u(this, k).cameraSystem.off("user-zoom-start", u(this, Cn)), u(this, k).cameraSystem.off("user-tilt-start", u(this, Cn)), u(this, k).cameraSystem.off("user-pedestal-start", u(this, Cn)), u(this, k).cameraSystem.off("user-dolly-end", u(this, Sn)), u(this, k).cameraSystem.off("user-pan-end", u(this, Sn)), u(this, k).cameraSystem.off("user-rotate-end", u(this, Sn)), u(this, k).cameraSystem.off("user-zoom-end", u(this, Sn)), u(this, k).cameraSystem.off("user-tilt-end", u(this, Sn)), u(this, k).cameraSystem.off("user-pedestal-end", u(this, Sn)), u(this, k).renderSystem.off("measure-canvas", u(this, ql)), u(this, k).cameraSystem.off("change", this.render), u(this, k).outlineInterpolationSystem.off("needs-render", this.render);
    }), u(this, k).pathSystem = new l0(u(this, _), this.convertTo3DMapPosition, this.getParentContainer, u(this, k).cameraSystem.convertZoomLevelToAltitude), u(this, k).pathSystem.on("animate:path", this.render), this.onAbort(() => {
      u(this, k).pathSystem.off("animate:path", this.render);
    }), u(this, k).panBoundsSystem = new U1(u(this, _), u(this, k).cameraSystem);
    let h = () => {
      let { panBounds: I, fov: E, convertAltitudeToZoomLevel: v6 } = u(this, k).cameraSystem;
      if (u(this, k).panBoundsSystem.autoMinZoomLevel) {
        if (I.radius <= 0) return;
        let x6 = Math.min(u(this, _).canvasWidth / u(this, _).canvasHeight, 1), D = E * Math.PI / 180 * x6, w6 = Math.tan(D / 2), { radius: S, center: F } = u(this, k).cameraSystem.panBounds, P = S / w6, L = this.getThreeCamera().getWorldPosition(new C()), N = F.distanceTo(L), $ = Math.abs(L.z - F.z), W = P * $ / N, V = v6(W);
        Swe(V, this.camera.minZoomLevel) && this.camera.setMinZoomLevel(V);
      }
      this.publish("pan-bounds-change", u(this, k).cameraSystem.panBounds);
    };
    u(this, k).panBoundsSystem.on("update", h), this.onAbort(() => {
      u(this, k).panBoundsSystem.off("update", h);
    }), this.camera = new R1(this, u(this, k), u(this, _)), this.camera.setZoomLevel(n.zoomLevel ?? W2), this.camera.setBearing(n.bearing ?? Z2), this.camera.setPitch(n.pitch ?? H2), this.camera.setMaxZoomLevel(hH), this.camera.setMinZoomLevel(fH), u(this, k).domVisiblitySystem = new I1(u(this, _), u(this, Zo)), u(this, k).domMutationSystem = new L1(u(this, _), u(this, Zo)), u(this, k).domMutationSystem.on("dimensions-update", () => {
      u(this, k).collisionSystem.collidersDirty = true, this.render();
    }), u(this, k).domDrawSystem = new _1(u(this, _)), u(this, k).collisionSystem = new u1(u(this, wi), u(this, _), (n.useCollisionWorker ?? true) && (n.useWorkers ?? true)), u(this, k).twoDDrawSystem = new C1(u(this, _), u(this, Qt), n.transformImageRequest), u(this, k).twoDDrawSystem.on("img:loaded", this.render), u(this, k).interactionSystem = new Rf(this.rendererDomElement, u(this, _), u(this, Vt2), u(this, Fu), u(this, k).cameraSystem.isUserInteracting), u(this, k).interactionSystem.on("doubletap-with-onefinger", (I) => {
      u(this, k).cameraSystem.enableZoom && this.camera.animateTo({ center: this.projectScreenXYToCoordinate(I.clientX, I.clientY)?.coordinate, zoomLevel: this.camera.zoomLevel + 1, duration: y0e, easing: "ease-out" });
    }), u(this, k).interactionSystem.on("singletap-with-twofinger", () => {
      u(this, k).cameraSystem.enableZoom && this.camera.animateTo({ zoomLevel: this.camera.zoomLevel - 1, duration: y0e, easing: "ease-out" });
    }), u(this, k).interactionSystem.on("hover", this.render), u(this, k).interactionSystem.on("click", (I) => {
      if (I.entity2D?.id === "watermark" && typeof u(this, k).watermarkSystem.options.onClick == "function" && u(this, k).watermarkSystem.options.interactive) {
        u(this, k).watermarkSystem.options.onClick();
        return;
      }
      let E = I.entity3D ? [I.entity3D?.id] : [];
      I.entity3D?.parentObject3D?.userData?.entityId && E.push(I.entity3D?.parentObject3D?.userData?.entityId), this.publish("click", { coordinate: this.convert3DMapPositionToCoordinate(I.position), geometry: E, paths: I.entity3D?.components[0] instanceof Eu ? [I.entity3D.id] : [], markers: I.entity2D?.components[0] instanceof qC ? [I.entity2D.id] : [], models: I.entity3D?.components[0] instanceof Iu ? [I.entity3D.id] : [], labels: I.entity2D?.components[0] instanceof mC ? [I.entity2D.id] : [], containers: Array.isArray(I.groupContainers) ? I.groupContainers.map((v6) => v6.userData.entityId) : [], pointerEvent: I.pointerEvent });
    }), u(this, k).interactionSystem.on("hover", (I) => {
      I.position && this.publish("hover", { coordinate: this.convert3DMapPositionToCoordinate(I.position), geometry: I.entity3D ? [I.entity3D?.id] : [], paths: I.entity3D?.components[0] instanceof Eu ? [I.entity3D.id] : [], markers: I.entity2D?.components[0] instanceof qC ? [I.entity2D.id] : [], models: I.entity3D?.components[0] instanceof Iu ? [I.entity3D.id] : [], labels: I.entity2D?.components[0] instanceof mC ? [I.entity2D.id] : [], containers: Array.isArray(I.groupContainers) ? I.groupContainers.map((E) => E.userData.entityId) : [] });
    }), u(this, k).geometryInFocusSystem = new Q1(u(this, _), u(this, Vt2));
    let b = (I) => {
      this.publish("geometry-in-focus", I);
    };
    u(this, k).geometryInFocusSystem.on("geometry-in-focus", b), this.onAbort(() => {
      u(this, k).geometryInFocusSystem.off("geometry-in-focus", b);
    }), u(this, k).twoDVisiblitySystem = new D1(u(this, _)), u(this, k).drawSystem = new S1(u(this, _), this.convertTo3DMapPosition), u(this, k).twoDProjectionSystem = new E1(u(this, _), u(this, Nd)), u(this, k).exporterSystem = new Nf(u(this, _)), u(this, k).meshOptimizationSystem = new x1(u(this, _), this.convertTo3DMapPosition), u(this, k).meshOptimizationSystem.on("model-loaded", this.render), u(this, k).meshOptimizationSystem.on("geometry-2d-added", this.render), u(this, k).meshOptimizationSystem.on("geometry-group-added", u(this, m0)), this.onAbort(() => {
      u(this, k).meshOptimizationSystem.off("model-loaded", this.render), u(this, k).meshOptimizationSystem.off("geometry-2d-added", this.render), u(this, k).meshOptimizationSystem.off("geometry-group-added", u(this, m0));
    }), u(this, k).meshDetachmentSystem = new a4(u(this, _)), u(this, k).meshModificationSystem = new u4(u(this, _)), u(this, k).geometryDisposalSystem = new h4(u(this, _)), u(this, k).textureSystem = new g4(u(this, _)), u(this, k).textureSystem.on("texture-added", this.render), this.onAbort(() => {
      u(this, k).textureSystem.off("texture-added", this.render);
    }), u(this, k).borderSystem = new MM(u(this, _), this.convertTo3DMapPosition), u(this, k).clippingPlaneSystem = new b4(u(this, _)), u(this, k).renderOrderSystem = new y4(u(this, _)), u(this, k).customGeometrySystem = new z1(u(this, _), this.convertTo3DMapPosition), u(this, k).outlineInterpolationSystem = new Z1(u(this, _)), u(this, k).outlineInterpolationSystem.on("needs-render", this.render), u(this, k).renderSystem = new T1(u(this, jr), u(this, _), this.mode, u(this, qt), u(this, Vt2), this.viewCamera, u(this, k)), u(this, k).imageSystem = new q1(u(this, _), this.convertTo3DMapPosition, u(this, Nd), n.bearing, n.naturalBearing, n.imagePlacementOptions), u(this, k).text3DSystem = new WC(u(this, _), this.convertTo3DMapPosition, n.useWorkers ?? true), u(this, k).text3DSystem.on("render", this.render), u(this, k).imageSystem.on("image-loaded", this.render), u(this, k).renderSystem.on("pre-render", () => this.publish("pre-render")), u(this, k).renderSystem.on("post-render", () => this.publish("post-render")), u(this, k).renderSystem.on("measure-canvas", u(this, ql)), this.onAbort(() => {
      u(this, k).renderSystem.off("pre-render", () => this.publish("pre-render")), u(this, k).renderSystem.off("post-render", () => this.publish("post-render")), u(this, k).renderSystem.off("measure-canvas", u(this, ql));
    }), u(this, k).outdoorLayersSystem = new t4(this.map), u(this, k).occlusion2DSystem = new f4(u(this, _), this.convertTo3DMapPosition, u(this, jr)), n.occlusionEnabled && u(this, k).occlusion2DSystem.enable(), this.Debug = new m4(this), n.environment !== false && w(this, Jl, x(this, Qr, V2).call(this)), u(this, v4).call(this);
  }
  get viewCamera() {
    return u(this, p0);
  }
  get canvasWidth() {
    return u(this, _).canvasWidth;
  }
  get canvasHeight() {
    return u(this, _).canvasHeight;
  }
  get resolutionScale() {
    return this.map?._getClampedPixelRatio(this.canvasWidth, this.canvasHeight) ?? K4();
  }
  get aspect() {
    return this.canvasWidth / this.canvasHeight;
  }
  get mode() {
    return u(this, Ds);
  }
  addGroupContainer(t6, n, o) {
    if (!u(this, _).geometry3DMap.has(t6) && !u(this, _).geometry2DMap.has(t6)) {
      let i = new ur(t6);
      i.addEventListener("childadded", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), i.addEventListener("childremoved", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), n?.visible !== void 0 && (i.visible = n.visible), n?.altitude !== void 0 && i.setAltitude(n.altitude), n?.interactive !== void 0 && Ru(i, n.interactive, u(this, _)), n?.focusable !== void 0 && A1e(i, n.focusable), n?.preloadGeometry !== void 0 && (i.userData.preloadGeometry = n.preloadGeometry), u(this, _).geometry3DMap.set(t6, i);
      let s6 = this.getParentContainer(o);
      s6 instanceof ur && s6.addEntity(i), u(this, Tt).call(this), this.render();
    } else Pt.error(`Group container with ID '${t6}' already exists. The group container cannot be added.`);
    return { id: t6, type: "group-container" };
  }
  addCustomGeometry(t6, n, o, i, s6) {
    if (u(this, _).geometry3DMap.has(t6)) Pt.error(`Custom geometry with ID '${t6}' already exists. The custom geometry cannot be added.`);
    else {
      let u6 = new Md(n, o), l = new Sr(u6, new sx(i));
      i?.interactive !== void 0 && Ru(l, i.interactive, u(this, _)), l.id = t6, u6.mesh.userData = { entityId: t6, type: "custom-geometry" }, u(this, _).geometry3DMap.set(l.id, l);
      let c = this.getParentContainer(s6);
      s6 && c instanceof ur ? c.addEntity(l) : u(this, _).entityScene.addEntity(l), u(this, Tt).call(this), this.render();
    }
    return { id: t6, type: "custom-geometry" };
  }
  addGeometryGroup(t6, n, o, i) {
    if (!u(this, _).geometry3DMap.has(t6) && !u(this, _).geometry2DMap.has(t6)) {
      let s6 = new lr(t6);
      s6.addEventListener("childadded", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), s6.addEventListener("childremoved", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), s6.userData.dirty = true, u(this, _).geometry3DMap.set(t6, s6);
      let { visible: u6, ...l } = o || { color: ax };
      for (let d of n.features) {
        if (d.geometry == null || !["Polygon", "MultiPolygon", "LineString", "MultiLineString"].includes(d.geometry.type)) continue;
        let f = d?.id || d?.properties?.id || Vt(), h = u(this, k).meshOptimizationSystem.createEntityFromFeature(f, d, { outline: true, ...l });
        u(this, _).geometry3DMap.set(f, h), s6.userData.entities3D.add(f), u(this, k).textureSystem.dirty = true;
      }
      s6.setVisible(u6 ?? true);
      let c = this.getParentContainer(i);
      c instanceof ur && c.addEntity(s6), u(this, Tt).call(this), this.render();
    } else Pt.error(`Geometry group with ID '${t6}' already exists. The geometry group cannot be added.`);
    return u(this, k).outlineInterpolationSystem.geometries3DDirty = true, { id: t6, type: "geometry-group" };
  }
  addOccluder(t6, n) {
    let o = this.getParentContainer(n), i = u(this, k).occlusion2DSystem.reserveOccluderId();
    return o?.addOccluderFeature(t6, i), i;
  }
  addImage(t6, n, o, i) {
    try {
      PM(t6, n, o);
    } catch (s6) {
      Pt.error(s6);
      return;
    }
    if (!u(this, _).geometry3DMap.has(t6) && !u(this, _).geometry2DMap.has(t6)) {
      let s6 = new K1(n), u6 = new Sr(s6, new sx(o));
      u6.id = t6 || Vt(), s6.mesh.userData = { entityId: u6.id, type: "path" }, u(this, _).geometry3DMap.set(u6.id, u6);
      let l = this.getParentContainer(i);
      l instanceof ur && l.addEntity(u6), u(this, Tt).call(this), this.render();
    } else Pt.error(`Image with ID '${t6}' already exists. The image cannot be added.`);
    return { id: t6, type: "image" };
  }
  addModelGroup(t6, n, o, { parent: i, onComplete: s6 } = {}) {
    try {
      sM(t6, n, o);
    } catch (u6) {
      Pt.error(u6);
      return;
    }
    if (!u(this, _).geometry3DMap.has(t6) && !u(this, _).geometry2DMap.has(t6)) {
      let u6 = new lr(t6);
      u6.addEventListener("childadded", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), u6.addEventListener("childremoved", () => {
        u(this, Tt).call(this), u(this, Tr).call(this);
      }), u(this, _).geometry3DMap.set(t6, u6), u6.userData.dirty = true, u6.userData.modelURL = o.url;
      for (let c of n.features) {
        let d = c.id || c.properties.id || Vt(), f = u(this, k).meshOptimizationSystem.createModelFromFeature(d, c, { ...o });
        (c.properties.interactive !== void 0 || o.interactive != null) && Ru(f, c.properties.interactive ?? o.interactive, u(this, _)), o.clippingPlaneZOffset != null && (f.components[7] = new dm(), f.components[7].verticalOffset = o.clippingPlaneZOffset), f.parentId = u6.userData.entityId, u(this, _).geometry3DMap.set(d, f), u6.userData.entities3D.add(d);
      }
      let l = this.getParentContainer(i);
      l instanceof ur && l.addEntity(u6), u(this, Tt).call(this), this.render()?.then(s6);
    } else Pt.error(`Model group with ID '${t6}' already exists. The model group cannot be added.`);
    return { id: t6, type: "geometry-group" };
  }
  addMarker2D(t6, n, o, i) {
    let s6 = o?.id;
    try {
      xve(t6, n, o || {});
    } catch (u6) {
      Pt.error(u6);
      return;
    }
    if (s6 === void 0 || !u(this, _).geometry2DMap.has(s6) && !u(this, _).geometry3DMap.has(s6)) {
      let u6 = x(this, Qr, z2).call(this, t6, new qC(n, o), o?.occluderId, o?.verticalOffset);
      u6.id = s6 || String(u6.id), s6 = u6.id, o?.interactive != null && o.interactive !== "pointer-events-auto" && Ru(u6, o?.interactive, u(this, _)), o?.enabled != null && _1e(u6, o.enabled);
      let l = typeof o?.attachTo == "string" || typeof o?.attachTo == "number" ? u(this, _).geometry3DMap.get(o.attachTo) : void 0;
      l instanceof Sr && l.attach(u6), this.getParentContainer(i)?.addEntity(u6), this.render();
    } else Pt.error(`Marker2D with ID '${s6}' already exists. The marker cannot be added.`);
    return { id: s6, type: "marker" };
  }
  addText3D(t6, n, o, i) {
    if (!u(this, _).geometry3DMap.has(t6) && !u(this, _).geometry2DMap.has(t6)) {
      let s6 = new um({ ...n, properties: { ...n.properties, id: t6, content: n.properties.text } }), u6 = new Sr(s6, new lx(o?.appearance));
      u6.id = t6, s6.mesh.userData.entityId = t6.toString(), s6.mesh.userData.type = "text3d", u(this, _).geometry3DMap.set(t6, u6);
      let l = this.getParentContainer(i);
      l instanceof ur && l.addEntity(u6), u(this, Tt).call(this), this.render();
    } else Pt.error(`Text3D with ID '${t6}' already exists. The text3d cannot be added.`);
    return { id: t6, type: "text3d" };
  }
  labelText3D(t6, n, o = {}) {
    try {
      if (!n || !t6) throw new Error("content and meshGeometryId are required");
      Zve.parse(o);
    } catch (c) {
      Pt.error(c);
      return;
    }
    let i = u(this, _).geometry3DMap.get(t6);
    if (i?.type !== "geometry") {
      Pt.error(".labelText3D failed: target incorrect");
      return;
    }
    let s6 = i?.components[0];
    if (!s6.feature.properties.textArea) return;
    if (s6.textEntityId) {
      let c = u(this, _).geometry3DMap.get(s6.textEntityId);
      if (c?.type !== "text3d") {
        Pt.error(".labelText3D failed: existing text3d not found");
        return;
      }
      return { id: c.id, type: c.type };
    }
    let u6 = new um({ type: "Feature", geometry: { coordinates: s6.feature.properties.textArea?.position, type: "Point" }, properties: { textArea: s6.feature.properties.textArea, content: n, id: Vt() } });
    u6.polygonEntityId = t6;
    let l = new Sr(u6, new lx(o?.appearance));
    return s6.textEntityId = l.id.toString(), u6.mesh.userData.entityId = l.id.toString(), u6.mesh.userData.type = "text3d", u(this, _).geometry3DMap.set(l.id.toString(), l), o.parentId && this.getParentContainer(o.parentId)?.addEntity(l), this.render(), { id: l.id, type: "text3d" };
  }
  addLabel2D(t6, n, o, i) {
    let s6 = o?.id;
    try {
      Y_e(t6, n, o || {});
    } catch (u6) {
      Pt.error(u6);
      return;
    }
    if (s6 === void 0 || !u(this, _).geometry2DMap.has(s6) && !u(this, _).geometry3DMap.has(s6)) {
      let u6 = x(this, Qr, z2).call(this, t6, new mC(n, o || {}, u(this, _)), o?.occluderId, o?.verticalOffset);
      u6.id = s6 || String(u6.id), s6 = u6.id, o?.interactive != null && Ru(u6, o?.interactive, u(this, _)), o?.enabled != null && _1e(u6, o.enabled);
      let l = typeof o?.attachTo == "string" || typeof o?.attachTo == "number" ? u(this, _).geometry3DMap.get(o.attachTo) : void 0;
      l instanceof Sr && l.attach(u6), this.getParentContainer(i)?.addEntity(u6), u(this, Tr).call(this), this.render();
    } else Pt.error(`Label2D with ID '${s6}' already exists. The label cannot be added.`);
    return { id: s6, type: "label" };
  }
  addPath(t6, n = {}, o) {
    try {
      mM(t6, n || {});
    } catch (l) {
      Pt.error(l);
      return;
    }
    let i = new Eu(t6, jV(n)), s6 = new Sr(i, new sx({ color: n?.color ?? "#ff834c", altitude: n?.verticalOffset ?? 0.1 }));
    s6.id = n?.id || Vt(), i.mesh.userData = { entityId: s6.id, type: "path" }, u(this, _).geometry3DMap.set(s6.id, s6), n?.interactive != null && Ru(s6, n?.interactive, u(this, _));
    let u6 = this.getParentContainer(o);
    return u6 instanceof ur && u6.addEntity(s6), u(this, Tt).call(this), this.render(), { id: s6.id, type: "path" };
  }
  updateWatermark(t6) {
    u(this, k).watermarkSystem.options = t6, u(this, k).watermarkSystem.dirty = true, u(this, k).collisionSystem.collidersDirty = true, this.render();
  }
  remove(t6) {
    let n;
    if (typeof t6 == "string" || typeof t6 == "number" ? (n = u(this, _).geometry2DMap.get(t6), n == null && (n = u(this, _).geometry3DMap.get(t6))) : typeof t6.id == "string" || typeof t6.id == "number" ? (n = u(this, _).geometry2DMap.get(t6.id), n == null && (n = u(this, _).geometry3DMap.get(t6.id))) : n = t6, n != null) {
      if (n.type === "custom-geometry") u(this, _).geometry3DMap.delete(n.id), n.object3d && ox(n.object3d);
      else if (n.type === "group-container") {
        u(this, _).geometry3DMap.delete(n.userData.entityId);
        for (let i of n.childrenIds.values()) this.remove(i), n.userData.entities2D.delete(i);
        let o = n.components[1];
        o && o.focusMesh && ox(o.focusMesh), ox(n);
      } else if (n.type === "geometry-group") {
        u(this, _).geometry3DMap.delete(n.userData.entityId);
        for (let o of n.userData.entities3D.values()) this.remove(o), n.userData.entities3D.delete(o);
        ox(n);
      } else if (n.type === "geometry" || n.type === "model" || n.type === "path") {
        let o = n.components[0], i = n.components[4];
        if (n.entities2D.size > 0) {
          for (let u6 of n.entities2D.values()) this.remove(u6);
          n.removeAllEntities();
        }
        let s6 = n.parentObject3D?.userData.entityId ?? n.parentId;
        if (s6) {
          let u6 = u(this, _).geometry3DMap.get(s6);
          u6 instanceof lr && u6.userData.entities3D.delete(n.id);
        }
        if (n.object3d && ox(n.object3d), n.type === "geometry") {
          let u6 = n.components[3];
          u6 && (u6.enabled = false, u6.dirty = true);
        }
        i && "focusMesh" in i && i.focusMesh != null && ox(i.focusMesh), "textMesh" in o && o.textMesh != null && this.remove(o.textMesh.userData.entityId), u(this, _).geometry3DMap.delete(n.id);
      } else if (n.type === "marker" || n.type === "label") {
        let o = n.attachedTo;
        if (o) {
          let i = u(this, _).geometry3DMap.get(o);
          i instanceof Sr && i.detach(n);
        }
        n.object3d && ox(n.object3d), n.type === "label" && delete u(this, k).twoDDrawSystem.textCache[n.id], u(this, _).geometry2DMap.delete(n.id);
      } else if (n.type === "image") n.object3d && ox(n.object3d), u(this, _).geometry3DMap.delete(n.id);
      else if (n.type === "text3d") {
        ox(n.object3d);
        let { batchedText: o, textMesh: i, polygonEntityId: s6 } = n.components[0];
        if (i && (o && o.removeText(i), ox(i)), s6) {
          u(this, k).text3DSystem.remove(s6);
          let u6 = u(this, _).geometry3DMap.get(s6);
          u6?.type === "geometry" && (u6.components[0].textMesh = void 0, u6.components[0].textEntityId = void 0);
        }
        u(this, _).geometry3DMap.delete(n.id);
      }
      u(this, Tt).call(this), u(this, Tr).call(this), this.render();
    }
  }
  getScene() {
    return this.getState("__scene");
  }
  getThreeScene() {
    return u(this, qt);
  }
  getThreeCamera() {
    return u(this, Vt2);
  }
  async setEnvironment(t6) {
    if (u(this, qt)) if (t6 === "basic") {
      u(this, Jl) || w(this, Jl, x(this, Qr, V2).call(this));
      let n = await u(this, Jl);
      u(this, qt).environment = n;
    } else u(this, qt).environment = null;
  }
  getEnvironment() {
    return u(this, qt)?.environment ? "basic" : false;
  }
  getCurrentSceneGLTF(t6) {
    return u(this, k).exporterSystem.getCurrentSceneGLTF(t6);
  }
  getBoundingArea(t6) {
    (u(this, k).renderSystem.threeDdirty || u(this, k).renderSystem.twoDdirty) && this.renderSync();
    let n = new Ie();
    if (t6 == null) n.setFromObject(u(this, _).entityScene);
    else {
      let o = AM(u(this, _), t6);
      if (o?.type === "geometry" && o?.object3d != null) {
        let i = o.components[0], s6 = i instanceof Mi ? i.geometry : void 0;
        i.mesh instanceof Jo && s6 ? (s6.computeBoundingBox(), s6.boundingBox && n.union(s6.boundingBox)) : n.setFromObject(o.object3d);
      } else (o?.type === "geometry-group" || o?.type === "group-container") && o?.userData.entityId != null && n.setFromObject(o);
    }
    if (qM(n)) return $4(n).map(this.convert3DMapPositionToCoordinate);
  }
  hasState(t6) {
    return AM(u(this, _), t6) != null;
  }
  getState(t6) {
    if (t6 == null) return { type: "map-view", hoverColor: u(this, _).hoverColor, text3dHoverColor: u(this, _).text3dHoverColor };
    let n = AM(u(this, _), t6);
    if (n?.type === "custom-geometry") {
      let o = n.components[0], i = n.components[1];
      return { id: n.id, type: "custom-geometry", visible: i.visible, altitude: i.altitude, parent: n.parentObject3D?.userData.entityId, position: this.convert3DMapPositionToCoordinate(o.position) };
    } else if (n?.type === "geometry-group") {
      let o = Array.from(n.userData.entities3D.values()), i = o?.[0], s6 = i ? this.getState(i) : {};
      return { id: n.userData.entityId, type: "geometry-group", visible: n.visible, altitude: s6?.altitude, initialColor: s6?.initialColor, color: s6?.color, side: s6?.side ?? "double", opacity: s6?.opacity, height: s6?.height, texture: s6?.texture, topColor: s6?.topColor, topTexture: s6?.topTexture, interactive: Array.from(n.userData.entities3D.values()).map((u6) => u(this, _).geometry3DMap.get(u6)).every((u6) => u6 && u6.components[2] != null), children: o, bevel: s6?.bevel };
    } else {
      if (n?.type === "group-container") return { id: n.userData.entityId, type: "group-container", visible: n.visible, altitude: n.getWorldPosition(yH).z ?? 0, opacity: n.opacity, interactive: !!n.components[0], children: Array.from(n.childrenIds.values()).map((o) => this.getState(o)).filter(Boolean) };
      if (n?.type === "label") {
        let o = n.components[0], i = n.object3d.parent, s6 = i?.userData.entityId;
        return { id: n.id, type: "label", text: o.text || "", parent: { id: s6, type: i?.type }, position: this.convert3DMapPositionToCoordinate(n.position), enabled: o.enabled, visible: o.visible, initialRank: D_e(o.initialRank), options: { rank: D_e(o.rank), appearance: o.appearance, interactive: n.components[1] != null, verticalOffset: n.verticalOffset, attachTo: n.attachedTo } };
      } else if (n?.type === "marker") {
        let o = n.components[0], i = n.object3d.parent, s6 = i?.userData.entityId;
        return { id: n.id, type: "marker", enabled: o.enabled, visible: o.visible, placement: o.options.placement, dynamicResize: o.options.dynamicResize, parent: { id: s6, type: i?.type }, position: this.convert3DMapPositionToCoordinate(n.position), element: o.containerEl, initialRank: D_e(o.initialRank), contentHTML: o.contentHtml, options: { rank: D_e(o.rank), interactive: n.components[1] != null || false, verticalOffset: n.verticalOffset, attachTo: n.attachedTo, lowPriorityPin: o.options.lowPriorityPin } };
      } else if (n?.type === "geometry") {
        let { color: o, hoverColor: i, initialColor: s6, initialTopColor: u6, topColor: l, altitude: c } = n.components[1], d = n.components[0], f = n.components[1], h = n.components[1], b = n.components[6], I = n.components[2], E = n.components[3], v6 = n.parentObject3D;
        return { id: n.id, type: "geometry", opacity: h.opacity, initialColor: s6, color: o, focusable: f != null && f.focusMesh != null, initialTopColor: u6, topColor: l, side: h.side, hoverColor: i, hovered: !!I?.hover, height: h.height, visible: h.visible, outline: E?.enabled, showImage: h.showImage, texture: b?.texture?.path, topTexture: b?.topTexture?.path, flipImageToFaceCamera: h.flipImageToFaceCamera, enableImageCollisions: h.enableImageCollisions, parent: { id: v6?.userData.entityId, type: v6?.type }, altitude: c, bevel: h.bevel, position: this.convert3DMapPositionToCoordinate(d.position), interactive: n.components[2] != null, borderVisible: h.borderVisible, borderColor: h.borderColor, borderWidth: h.borderWidth };
      } else if (n?.type === "model") {
        let o = n.components[0], i = n.components[1], s6 = n.components[2];
        return { id: n.id, type: "model", position: o.mesh ? this.convert3DMapPositionToCoordinate(o.mesh?.getWorldPosition(new C())) : this.convert3DMapPositionToCoordinate(o.position), interactive: s6 != null, material: i.material, parent: n.parentObject3D?.parent ? { id: n.parentObject3D.parent.userData.entityId, type: n.parentObject3D.parent.type } : void 0, visible: i.visible, verticalOffset: i.verticalOffset, color: i.color, opacity: i.opacity, rotation: i.rotation ?? l5, scale: i.scale ?? s5 };
      } else if (n?.type === "path") {
        let o = n.components[0], i = n.components[2], s6 = n.components[1];
        return { id: n.id, type: "path", position: this.convert3DMapPositionToCoordinate(o.position), visible: s6.visible, interactive: i != null, completeFraction: o.completeFraction, color: s6.color, accentColor: o.accentColor, width: o.width, animateArrowsOnPath: o.animateArrowsOnPath, displayArrowsOnPath: o.displayArrowsOnPath, verticalOffset: s6.altitude, highlightCompleteFraction: o.highlightCompleteFraction, highlightStartFraction: o.highlightStartFraction, highlightEndFraction: o.highlightEndFraction, highlightColor: o.highlightColor, highlightWidthMultiplier: o.highlightWidthMultiplier };
      } else if (n?.type === "image") {
        let o = n.components[0];
        return { id: n.id, type: "image", position: this.convert3DMapPositionToCoordinate(o.position), visible: n.components[1].visible, verticalOffset: o.feature.properties.verticalOffset ?? 0, opacity: n.components[1].opacity, flipImageToFaceCamera: n.components[1].flipImageToFaceCamera, width: o.feature.properties.width ?? 0, height: o.feature.properties.height ?? 0, rotation: o.feature.properties.rotation ?? 0 };
      } else if (n?.type === "text3d" && n.components[0] instanceof um && "textArea" in n.components[0].feature.properties) {
        R1e(n);
        let o = n.components[0], i = n.components[1], { textMesh: s6 } = o, u6 = o.mesh?.parent;
        u6 instanceof ur && u6.children.find((d) => d.type === "batchedtext")?.getWorldPosition(u(this, I0)), u(this, $d).set(0, 0, 0);
        let l = s6 ? s6.getWorldPosition(u(this, $d)) : u(this, $d);
        return Object.assign({}, FM, i.getState(), { id: n.id, type: "text3d", position: this.convert3DMapPositionToCoordinate(l.add(u(this, I0))), visible: o.visible ?? false, content: o.feature.properties.content ?? "" });
      } else return;
    }
  }
  setState(t6, n) {
    if (typeof t6 == "object" && n == null) {
      "hoverColor" in t6 && (Zu(t6.hoverColor) ? u(this, _).hoverColor = t6.hoverColor ?? u(this, _).hoverColor : Pt.warn(`Failed to update global hover color. Invalid color "${t6.hoverColor}".`)), "text3dHoverColor" in t6 && (u(this, _).text3dHoverColor = t6.text3dHoverColor ?? u(this, _).text3dHoverColor);
      return;
    }
    let o = AM(u(this, _), t6);
    if (o != null) {
      if (o.type === "custom-geometry") {
        let i = u(this, _).geometry3DMap.get(o.id);
        if (i instanceof Sr && i.components[0] instanceof Md) {
          let s6 = n;
          aM(o, u(this, _), s6.visible), UV(o, u(this, _), s6.altitude), x1e(o, s6.position, this.convertTo3DMapPosition), b1e(o, this.getParentContainer(s6.parent, false)), Ru(o, s6.interactive, u(this, _)) && u(this, Tt).call(this);
        }
      } else if (o.type === "path") {
        let i = n;
        Ru(o, i.interactive, u(this, _)) && u(this, Tt).call(this), UV(o, u(this, _), i.verticalOffset), D1e(o, u(this, _), i);
      } else if (o.type === "model") {
        let i = n;
        Ru(o, i.interactive, u(this, _)) && u(this, Tt).call(this), aM(o, u(this, _), i.visible), F1e(o, i), O1e(o, i);
      } else if (o.type === "group-container") {
        let i = n;
        aM(o, u(this, _), i.visible) && (u(this, k).pathSystem.verticalDistanceDirty = true, u(this, k).geometryInFocusSystem.focusablesDirty = true), UV(o, u(this, _), i.altitude) && (u(this, k).pathSystem.verticalDistanceDirty = true), Ru(o, i.interactive, u(this, _)) && u(this, Tt).call(this), zV(o, u(this, _), i.opacity) && (u(this, k).outlineInterpolationSystem.outlineOpacitiesDirty = true), i.preloadGeometry && o.userData.preloadGeometry !== true && (o.userData.preloadGeometry = true, u(this, k).outlineInterpolationSystem.geometries3DDirty = true), A1e(o, i.focusable) && (u(this, k).geometryInFocusSystem.focusablesDirty = true);
      } else if (o.type === "geometry-group") {
        let i = n;
        aM(o, u(this, _), i.visible), d1e(o, u(this, _), i), NV(o, u(this, _), i.outline), i.height != null && OV(o, u(this, _), i.height), UV(o, u(this, _), i.altitude), M1e(o, u(this, _), i) && (u(this, k).textureSystem.dirty = true), M1e(o, u(this, _), i), y1e(o, u(this, _), i.shading), zV(o, u(this, _), i.opacity) && (u(this, k).outlineInterpolationSystem.outlineOpacitiesDirty = true), Ru(o, i.interactive, u(this, _)) && (u(this, Tt).call(this), u(this, Tr).call(this)), GV(o, u(this, _), i.side);
      } else if (o.type === "geometry") {
        if (o.components[0] instanceof Mi) {
          let i = n;
          aM(o, u(this, _), i.visible), NV(o, u(this, _), i.outline), g1e(o, i), A1e(o, i.focusable) && (u(this, k).geometryInFocusSystem.focusablesDirty = true), E1e(o, i.renderOrder) && (u(this, k).meshDetachmentSystem.dirty = true), I1e(o, i.opacity) && (u(this, k).meshDetachmentSystem.dirty = true, u(this, k).interactionSystem.dirty3D = true, u(this, k).outlineInterpolationSystem.outlineOpacitiesDirty = true), S1e(o, i.flipImageToFaceCamera), C1e(o, i.enableImageCollisions), UV(o, u(this, _), i.altitude), i.height != null && OV(o, u(this, _), i.height), VV(o, i) && (u(this, k).meshDetachmentSystem.dirty = true, u(this, k).textureSystem.dirty = true), nM(o, i), w1e(o, i.hoverColor), Ru(o, i.interactive, u(this, _)), T1e(o, i.hovered), GV(o, u(this, _), i.side), L1e(o, i);
        }
        u(this, Tt).call(this);
      } else if (o.type === "label" || o.type === "marker") {
        let i = n;
        P1e(o, n, u(this, _)), v1e(o, n, u(this, _)) && (u(this, Tr).call(this), u(this, k).domMutationSystem.dirty = true), x1e(o, i.position, this.convertTo3DMapPosition), b1e(o, this.getParentContainer(i.parent, false)) && (u(this, Tr).call(this), u(this, k).panBoundsSystem.dirty = true), _1e(o, i.enabled), aM(o, u(this, _), i.visible);
      } else if (o.type === "image") {
        let i = n;
        aM(o, u(this, _), i.visible), zV(o, u(this, _), i.opacity), S1e(o, i.flipImageToFaceCamera);
      } else if (o.type === "text3d") {
        let i = n;
        k1e(o, u(this, _), i);
      }
      this.render();
    }
  }
  convertTo3DMapPosition(t6, n, o = 0, i) {
    if (Array.isArray(t6)) return this.convertTo3DMapPosition(t6[1], t6[0], t6[2] ?? o, typeof n == "function" ? n : void 0);
    if (typeof n != "number") throw new Error("convertTo3DMapPosition failed: longitude must be a number");
    let { x: s6, y: u6 } = bwe(u(this, _).center?.[1] ?? 0, u(this, _).center?.[0] ?? 0, t6, n);
    return i ? (i.set(s6, u6, o), i) : new C(s6, u6, o);
  }
  get backgroundColor() {
    return typeof u(this, jr).backgroundColor == "string" ? u(this, jr).backgroundColor : `#${u(this, jr).backgroundColor.getHexString()}`;
  }
  get backgroundAlpha() {
    return u(this, jr).backgroundAlpha;
  }
  getThreeRenderer() {
    return u(this, jr);
  }
  getCenter(t6) {
    let n = Array.isArray(t6) ? t6 : this.getBoundingArea(t6);
    return n ? Twe(n) : void 0;
  }
  isInView(t6) {
    let n = AM(u(this, _), t6);
    if (u(this, v0).identity().multiply(u(this, Vt2).projectionMatrix).multiply(u(this, Vt2).matrixWorldInverse), u(this, Ql).setFromProjectionMatrix(u(this, v0)), n instanceof Gn) return u(this, Ql).containsPoint(n.position);
    if (n instanceof Sr) {
      let o = n?.components[0];
      if (o instanceof Md || o instanceof Iu) return u(this, Ql).containsPoint(this.convertTo3DMapPosition(o.feature.geometry.coordinates));
      if (o instanceof Mi) {
        let i = new Ie(this.convertTo3DMapPosition(o.featureBbox[1], o.featureBbox[0], 0), this.convertTo3DMapPosition(o.featureBbox[3], o.featureBbox[2], 0));
        return u(this, Ql).intersectsBox(i);
      }
    }
    return false;
  }
  queryGeometry2DInView(t6) {
    let { screenOffsets: n, fullyContains: o } = t6 ?? {}, [i, s6, u6, l] = Lwe(this.container, n), c = new _e(i, s6, u6, l);
    return u(this, k).collisionSystem.visibleCollidersQTree.queryRect(c).filter((b) => o ? c.contains(b) : c.intersects(b)).map((b) => u(this, _).geometry2DMap.get(b.userData.entityId)).filter((b) => b != null).filter((b) => b.components[0] instanceof mC || b.components[0] instanceof qC).map((b) => b.id.toString());
  }
  onMapLibreEvent(t6, n) {
    if (!this.map) {
      Pt.warn(`Tried to add event listener "${t6}" but MapLibre map is not initialized.`);
      return;
    }
    this.map.on(t6, n), u(this, Ho2)[t6] = u(this, Ho2)[t6] || [], u(this, Ho2)[t6].push(n);
  }
  offMapLibreEvent(t6, n) {
    !this.map || !Array.isArray(u(this, Ho2)[t6]) || (this.map.off(t6, n), u(this, Ho2)[t6] = u(this, Ho2)[t6].filter((o) => o !== n));
  }
  get aborted() {
    return u(this, Kl).signal.aborted;
  }
  onAbort(t6) {
    u(this, Kl).signal.addEventListener("abort", t6, { once: true });
  }
  getSystems() {
    return u(this, k);
  }
  getInternalState() {
    return u(this, _);
  }
  getInternalTweenGroup() {
    return u(this, _).internalTweenGroup;
  }
  getExternalTweenGroup() {
    return u(this, _).externalTweenGroup;
  }
  computeMinZOffsetBetweenContainers(t6, n, o) {
    if (!t6 || !n) return -1;
    U5(t6, "group-container"), U5(n, "group-container");
    let i = Awe(t6, this.getThreeCamera()), s6 = n.clone(), u6 = Awe(s6, this.getThreeCamera());
    if (!qM(i) || !qM(u6)) return -1;
    let l = 0, c;
    o && this.container.querySelectorAll(".debug-box").forEach((f) => f.remove());
    do {
      if (l > 1e4) return -1;
      if (l += 20, s6.position.z = l, s6.updateMatrixWorld(), u6.makeEmpty(), Awe(s6, u(this, Vt2), u6), c = i.intersectsBox(u6), o) {
        let d = Ewe(i, "blue", this.container), f = Ewe(u6, c ? "red" : "green", this.container);
        d.classList.add("debug-box"), f.classList.add("debug-box");
      }
    } while (c);
    return l;
  }
};
qt = /* @__PURE__ */ new WeakMap(), Vt2 = /* @__PURE__ */ new WeakMap(), Jl = /* @__PURE__ */ new WeakMap(), p0 = /* @__PURE__ */ new WeakMap(), _d = /* @__PURE__ */ new WeakMap(), Fu = /* @__PURE__ */ new WeakMap(), Yl = /* @__PURE__ */ new WeakMap(), Ld = /* @__PURE__ */ new WeakMap(), Qr = /* @__PURE__ */ new WeakSet(), G2 = function(t6) {
  u(this, Ds) !== "outdoors-overlay" && this.map?.setPixelRatio(t6), u(this, _).pixelRatio = this.resolutionScale;
}, _ = /* @__PURE__ */ new WeakMap(), Ho2 = /* @__PURE__ */ new WeakMap(), Kl = /* @__PURE__ */ new WeakMap(), dt = /* @__PURE__ */ new WeakMap(), wi = /* @__PURE__ */ new WeakMap(), Qt = /* @__PURE__ */ new WeakMap(), Zo = /* @__PURE__ */ new WeakMap(), jr = /* @__PURE__ */ new WeakMap(), k = /* @__PURE__ */ new WeakMap(), d0 = /* @__PURE__ */ new WeakMap(), Tr = /* @__PURE__ */ new WeakMap(), Tt = /* @__PURE__ */ new WeakMap(), QM = function() {
  w(this, dt, document.createElement("div")), u(this, dt).classList.add("mappedin__smart-collision-engine__container"), w(this, wi, document.createElement("canvas")), u(this, wi).classList.add("mappedin__smart-collision-engine-debug__container"), this.container.appendChild(u(this, dt)), w(this, Qt, document.createElement("canvas")), u(this, Qt).classList.add("mappedin__smart-collision-engine__container"), u(this, Qt).width = u(this, dt).clientWidth * this.resolutionScale, u(this, Qt).height = u(this, dt).clientHeight * this.resolutionScale, u(this, Qt).style.width = u(this, dt).clientWidth + "px", u(this, Qt).style.height = u(this, dt).clientHeight + "px", u(this, dt).appendChild(u(this, wi)), u(this, dt).appendChild(u(this, Qt)), u(this, wi).width = u(this, dt).clientWidth, u(this, wi).height = u(this, dt).clientHeight, u(this, Qt).width = u(this, dt).clientWidth * this.resolutionScale, u(this, Qt).height = u(this, dt).clientHeight * this.resolutionScale, u(this, Qt).style.width = u(this, dt).clientWidth + "px", u(this, Qt).style.height = u(this, dt).clientHeight + "px";
}, eA = function() {
  w(this, Zo, document.createElement("div")), u(this, Zo).classList.add("mappedin-2d-entities"), Object.assign(u(this, Zo).style, { position: "absolute", top: "0", left: "0", bottom: "0", right: "0", pointerEvents: "none", "transform-style": "preserve-3d" }), this.container.appendChild(u(this, Zo));
}, tA = function() {
  u(this, Qt).width = u(this, dt).clientWidth * this.resolutionScale, u(this, Qt).height = u(this, dt).clientHeight * this.resolutionScale, u(this, Qt).style.width = u(this, dt).clientWidth + "px", u(this, Qt).style.height = u(this, dt).clientHeight + "px", u(this, wi).width = u(this, dt).clientWidth, u(this, wi).height = u(this, dt).clientHeight, u(this, Qt).width = u(this, dt).clientWidth * this.resolutionScale, u(this, Qt).height = u(this, dt).clientHeight * this.resolutionScale, u(this, Qt).style.width = u(this, dt).clientWidth + "px", u(this, Qt).style.height = u(this, dt).clientHeight + "px", u(this, k).collisionSystem.collidersDirty = true;
}, Ds = /* @__PURE__ */ new WeakMap(), m0 = /* @__PURE__ */ new WeakMap(), f0 = /* @__PURE__ */ new WeakMap(), h0 = /* @__PURE__ */ new WeakMap(), g0 = /* @__PURE__ */ new WeakMap(), Rd = /* @__PURE__ */ new WeakMap(), v4 = /* @__PURE__ */ new WeakMap(), y0 = /* @__PURE__ */ new WeakMap(), Nd = /* @__PURE__ */ new WeakMap(), b0 = /* @__PURE__ */ new WeakMap(), ql = /* @__PURE__ */ new WeakMap(), z2 = function(t6, n, o, i) {
  let s6 = new Gn(n, this.convertTo3DMapPosition(t6[1], t6[0], t6[2] || 0), i);
  return s6.occluderId = o ?? u(this, k).occlusion2DSystem.backgroundId, u(this, _).geometry2DMap.set(s6.id, s6), s6;
}, Ql = /* @__PURE__ */ new WeakMap(), v0 = /* @__PURE__ */ new WeakMap(), x0 = /* @__PURE__ */ new WeakMap(), Cn = /* @__PURE__ */ new WeakMap(), Sn = /* @__PURE__ */ new WeakMap(), V2 = async function() {
  return Cu.load(GF).then((t6) => (u(this, qt) && (u(this, qt).environment?.dispose(), t6.mapping = pa, u(this, qt).environment = t6, this.render()), t6));
}, x4 = /* @__PURE__ */ new WeakMap(), I4 = /* @__PURE__ */ new WeakMap(), $d = /* @__PURE__ */ new WeakMap(), I0 = /* @__PURE__ */ new WeakMap();
var yH = new C();
var X2 = U2;
$i();
function bH(e6, r6) {
  vH(e6, r6)(e6.getScene(), r6), xH(e6, r6), r6.addFolder("Export").add({ export: async () => {
    let s6 = await e6.getCurrentSceneGLTF({ binary: true }), u6 = new Blob([s6], { type: "application/octet-stream" });
    var l = document.createElement("a");
    document.body.appendChild(l), l.style.display = "none";
    let c = window.URL.createObjectURL(u6);
    l.href = c, l.download = "scene.glb", l.click(), window.URL.revokeObjectURL(c);
  } }, "export");
  let o = r6.addFolder("Camera"), i = { get bearing() {
    return e6.camera.bearing;
  }, set bearing(s6) {
    e6.camera.setBearing(s6);
  }, get pitch() {
    return e6.camera.pitch;
  }, set pitch(s6) {
    e6.camera.setPitch(s6);
  }, get zoomLevel() {
    return e6.camera.zoomLevel;
  }, set zoomLevel(s6) {
    e6.camera.setZoomLevel(s6);
  } };
  o.add(i, "bearing", -359, 359, 1), o.add(i, "pitch", e6.camera.minPitch, e6.camera.maxPitch, 1), o.add(i, "zoomLevel", e6.camera.minZoomLevel, e6.camera.maxZoomLevel, 0.1);
}
function vH(e6, r6) {
  let t6 = r6;
  return function n(o, i) {
    let s6 = i.addFolder(`${[o.type]} ${o.id.slice(0, 16)}`);
    if (i.close(), o.type === "geometry" || o.type === "model" || o.type === "path" || o.type === "image") {
      let u6 = { get height() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" ? l.height : 0;
      }, set height(l) {
        e6.getState(o.id)?.type === "geometry" && e6.setState(o, { height: l });
      }, set flipImageToFaceCamera(l) {
        e6.getState(o.id)?.type === "image" && e6.setState(o, { flipImageToFaceCamera: l });
      }, get flipImageToFaceCamera() {
        let l = e6.getState(o.id);
        return l?.type === "image" ? l.flipImageToFaceCamera : false;
      }, set visible(l) {
        let c = e6.getState(o.id);
        (c?.type === "geometry" || c?.type === "path" || c?.type === "image") && e6.setState(o, { visible: l });
      }, get visible() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" || l?.type === "path" || l?.type === "image" ? l.visible : false;
      }, set outline(l) {
        e6.getState(o.id)?.type === "geometry" && e6.setState(o, { outline: l });
      }, get outline() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" ? l.outline : false;
      }, get opacity() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" ? l.opacity : 1;
      }, set opacity(l) {
        let c = e6.getState(o.id);
        c?.type === "geometry" && e6.setState(c, { opacity: l });
      }, get color() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" && l.color ? oe(l.color).toHexString() : "#ffffff";
      }, set color(l) {
        let c = e6.getState(o.id);
        c?.type === "geometry" && e6.setState(c, { color: l });
      }, set interactive(l) {
        let c = e6.getState(o.id);
        (c?.type === "geometry" || c?.type === "model" || c?.type === "path") && (e6.setState(o, { interactive: l }), t6.controllersRecursive().forEach((d) => d.updateDisplay()));
      }, get interactive() {
        let l = e6.getState(o.id);
        return l?.type === "geometry" || l?.type === "model" || l?.type === "path" ? l.interactive : false;
      }, get completeFraction() {
        let l = e6.getState(o.id);
        return l?.type === "path" ? l.completeFraction : 1;
      }, set completeFraction(l) {
        let c = e6.getState(o.id);
        c?.type === "path" && e6.setState(c, { completeFraction: l });
      }, focus: () => {
      } };
      s6.add(u6, "focus").onChange(() => {
        let l = e6.getState(o.id);
        l?.type === "model" || l?.type === "path" || l?.type === "image" ? e6.camera.focusOn([l.position]) : l?.type === "geometry" && e6.camera.focusOn(e6.getBoundingArea(l));
      }), s6.add(u6, "visible"), o.type === "image" ? s6.add(u6, "flipImageToFaceCamera") : (s6.add(u6, "interactive"), o.type === "path" && s6.add(u6, "completeFraction", 0, 1, 0.1), o.type !== "model" && (s6.addColor(u6, "color"), s6.add(u6, "outline"))), o.type === "geometry" && (s6.add(u6, "height"), s6.add(u6, "opacity", 0, 1, 0.1));
    } else if (o.type === "marker") {
      let u6 = { get interactive() {
        let l = e6.getState(o.id);
        return l?.type === "marker" ? l.options?.interactive : false;
      }, set interactive(l) {
        let c = e6.getState(o.id);
        c?.type === "marker" && (e6.setState(c, { options: { interactive: l } }), t6.controllersRecursive().forEach((d) => d.updateDisplay()));
      }, focus: () => {
      } };
      s6.add(u6, "focus").onChange(() => {
        let l = e6.getState(o.id);
        l?.type === "marker" && e6.camera.focusOn([l.position]);
      }), s6.add(u6, "interactive");
    } else if (o.type === "label") {
      let u6 = { get interactive() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options?.interactive : false;
      }, set interactive(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && (e6.setState(c, { options: { interactive: l } }), t6.controllersRecursive().forEach((d) => d.updateDisplay()));
      }, get text() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.text : "";
      }, set text(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: l });
      }, get "Text Color"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.textColor : "#000000";
      }, set "Text Color"(l) {
        e6.getState(o.id)?.type === "label" && e6.setState(o.id, { text: u6.text, options: { appearance: { textColor: l } } });
      }, get "Text Size"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.textSize : 10;
      }, set "Text Size"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { textSize: l } } });
      }, get "Icon Size"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.iconSize : 10;
      }, set "Icon Size"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { iconSize: l } } });
      }, get "Pin Color"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.pinColor : "#000000";
      }, set "Pin Color"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { pinColor: l } } });
      }, get "Pin Color Inactive"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.pinColorInactive : "#000000";
      }, set "Pin Color Inactive"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { pinColorInactive: l } } });
      }, get "Pin Outline Color"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.pinOutlineColor : "#000000";
      }, set "Pin Outline Color"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { pinOutlineColor: l } } });
      }, get "Pin Outline Color Inactive"() {
        let l = e6.getState(o.id);
        return l?.type === "label" ? l.options.appearance?.pinOutlineColorInactive : "#000000";
      }, set "Pin Outline Color Inactive"(l) {
        let c = e6.getState(o.id);
        c?.type === "label" && e6.setState(c, { text: u6.text, options: { appearance: { pinOutlineColorInactive: l } } });
      }, focus: () => {
      } };
      s6.add(u6, "focus").onChange(() => {
        let l = e6.getState(o.id);
        l?.type === "label" && e6.camera.focusOn([l.position]);
      }), s6.add(u6, "interactive"), s6.add(u6, "text"), s6.add(u6, "Text Size", 10, 50), s6.add(u6, "Icon Size", 10, 50), s6.addColor(u6, "Text Color"), s6.addColor(u6, "Active Background Color"), s6.addColor(u6, "Inactive Background Color"), s6.addColor(u6, "Active Foreground Color"), s6.addColor(u6, "Inactive Foreground Color");
    } else if (o.type === "geometry-group") {
      let u6 = { get opacity() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.opacity : 1;
      }, set opacity(l) {
        e6.getState(o.id)?.type === "geometry-group" && e6.setState(o, { opacity: l });
      }, set visible(l) {
        e6.getState(o.id)?.type === "geometry-group" && e6.setState(o, { visible: l });
      }, get visible() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.visible : false;
      }, set outline(l) {
        e6.getState(o.id)?.type === "geometry-group" && e6.setState(o, { outline: l });
      }, get outline() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.outline : false;
      }, set altitude(l) {
        e6.getState(o.id)?.type === "geometry-group" && e6.setState(o, { altitude: l });
      }, get altitude() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.altitude : 0;
      }, set interactive(l) {
        e6.getState(o.id)?.type === "geometry-group" && (e6.setState(o, { interactive: l }), t6.controllersRecursive().forEach((d) => d.updateDisplay()));
      }, get interactive() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.interactive : false;
      }, get shadingStart() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.shading?.start ?? 0 : 0;
      }, set shadingStart(l) {
        let c = e6.getState(o.id);
        c?.type === "geometry-group" && e6.setState(c, { shading: { start: l } });
      }, get shadingEnd() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.shading?.end ?? 0 : 0;
      }, set shadingEnd(l) {
        let c = e6.getState(o.id);
        c?.type === "geometry-group" && e6.setState(c, { shading: { end: l } });
      }, get shadingIntensity() {
        let l = e6.getState(o.id);
        return l?.type === "geometry-group" ? l.shading?.intensity ?? 0 : 0;
      }, set shadingIntensity(l) {
        let c = e6.getState(o.id);
        c?.type === "geometry-group" && e6.setState(c, { shading: { intensity: l } });
      } };
      s6.add(u6, "visible"), s6.add(u6, "opacity", 0, 1, 0.1), s6.add(u6, "interactive"), s6.add(u6, "outline"), s6.add(u6, "altitude", 0, 100, 1), s6.add(u6, "shadingStart", 0, 1, 0.1), s6.add(u6, "shadingEnd", 0, 1, 0.1), s6.add(u6, "shadingIntensity", 0, 1, 0.1);
    } else if (o.type === "group-container") {
      let u6 = { set visible(l) {
        e6.getState(o.id)?.type === "group-container" && e6.setState(o, { visible: l });
      }, get visible() {
        let l = e6.getState(o.id);
        return l?.type === "group-container" ? l.visible : false;
      }, set interactive(l) {
        let c = e6.getState(o.id);
        c?.type === "group-container" && (e6.setState(c, { interactive: l }), t6.controllersRecursive().forEach((d) => d.updateDisplay()));
      }, get interactive() {
        let l = e6.getState(o.id);
        return l?.type === "group-container" ? l.interactive : false;
      } };
      s6.add(u6, "visible"), s6.add(u6, "interactive");
    }
    if (s6.close(), o.children) for (let u6 of o.children.values()) n(u6, s6);
  };
}
function xH(e6, r6) {
  let t6 = r6.addFolder("Watermark"), n = { padding: 16, iconOnly: false, position: "bottom-left", color: "dark", scale: 1 };
  t6.add(n, "padding", 0, 100, 1), t6.add(n, "scale", 0.5, 1.5, 0.1), t6.add(n, "color", ["dark", "light"]), t6.add(n, "position", ["top-left", "top-right", "bottom-left", "bottom-right", "center", "top", "bottom", "left", "right"]), t6.add(n, "iconOnly"), t6.onChange(() => {
    e6.updateWatermark(n);
  });
}
var rA = "https://tiles-cdn.mappedin.com/styles/mappedin/style.json";
var EH = "https://auth.mappedin.com/oauth2/token";
var E4 = "";
function J2(e6) {
  E4 = e6, r_e(e6);
}
var $l = "";
function Y2(e6) {
  $l = e6;
}
async function nA(e6, r6) {
  let t6 = r6?.useWorkers ?? true, n = { ...r6, watermark: r6?.watermark, attribution: r6?.attribution, antialias: r6?.antialias, occlusionEnabled: r6?.occlusionEnabled, transformImageRequest: r6?.transformImageRequest, naturalBearing: r6?.naturalBearing ?? 0, imagePlacementOptions: r6?.imagePlacementOptions, onWebGLContextCreationError: r6?.onWebGLContextCreationError, onWebGLContextLost: r6?.onWebGLContextLost, onWebGLContextRestored: r6?.onWebGLContextRestored, onWebGLRendererError: r6?.onWebGLRendererError, useStandaloneCamera: r6?.useStandaloneCamera ?? false, useCollisionWorker: r6?.useCollisionWorker ?? true, useWorkers: t6 };
  if (t6 === true && r6?.outdoorView?.enabled) {
    let o = r6.outdoorView.headers;
    o == null && (o = await vwe(EH));
    let i = r6.center || [0, 0], s6 = new Ig({ container: e6, style: r6.outdoorView.style || rA, center: i, attributionControl: false, zoom: r6.zoomLevel ?? W2, pitch: r6.pitch ?? H2, bearing: r6.bearing ?? Z2, transformRequest: r5(o), trackResize: false, pixelRatio: r6.outdoorView.lowDpi ? 1 : K4(), canvasContextAttributes: { antialias: typeof r6.antialias == "boolean" ? r6.antialias : true, powerPreference: "high-performance" }, interactive: false, validateStyle: false, centerClampedToGround: false, boxZoom: false, doubleClickZoom: false, scrollZoom: false, dragPan: false, dragRotate: false, keyboard: false, touchZoomRotate: false }), u6 = s6.painter.context.gl, l = new X2(e6, { center: i, zoomLevel: s6.getZoom(), pitch: s6.getPitch(), bearing: s6.getBearing(), gl: u6, map: s6, mode: "outdoors-interleaved", ...n }), c = { center: s6.getCenter().toArray(), zoom: s6.getZoom(), bearing: s6.getBearing(), pitch: s6.getPitch(), elevation: s6.getCenterElevation() };
    s6.setMinZoom(l.camera.minZoomLevel), s6.setMaxZoom(l.camera.maxZoomLevel), s6.setMaxPitch(l.camera.maxPitch), s6.setMinPitch(l.camera.minPitch), l.on("camera-change", (w6) => {
      c.center = w6.center, c.zoom = w6.zoomLevel, c.bearing = w6.bearing, c.pitch = w6.pitch, c.elevation = w6.elevation, s6.jumpTo(c);
    });
    let d = xe2.fromLngLat(i, 0), f = _we(d, l.viewCamera, () => {
      l.renderSync();
    }), h = async () => {
      s6 && (s6.addLayer(f), l.renderSync());
    };
    l.onMapLibreEvent("style.load", h);
    let b = false, I = false, E = () => {
      s6 && (b || (l.publish("outdoor-view-loaded"), b = true), I || (I = true, l.publish("outdoor-style-loaded")));
    };
    l.onMapLibreEvent("idle", E);
    let v6 = (w6) => {
      w6 && (w6.sourceDataType === "metadata" || w6.sourceDataType === "visibility" || w6.dataType === "style" || w6.type === "terrain") && l.getSystems().htmlControlsSystem.updateData(s6);
    }, x6 = (w6) => {
      s6 && w6 && w6.dataType === "style" && w6.type === "styledata" && (I = false), v6(w6);
    };
    l.onMapLibreEvent("styledata", x6), l.onMapLibreEvent("sourcedata", v6), l.onMapLibreEvent("terrain", v6);
    let D = (w6) => {
      if (w6.error?.url === rA) {
        Pt.error(`Failed to load outdoor view style, possibly due to invalid token "${o["x-mappedin-tiles-key"]}"`);
        return;
      }
      Pt.warn(w6);
    };
    return l.onMapLibreEvent("error", D), l;
  } else return new X2(e6, n);
}
$i();
$i();
$i();
$i();
var E0 = class E02 {
  constructor(r6, t6, n) {
    t(this, "id");
    t(this, "text");
    t(this, "target");
    t(this, "__type", E02.__type);
    this.id = r6, this.text = t6, this.target = n;
  }
  static is(r6) {
    return r6.__type === E02.__type;
  }
  get focusTarget() {
    return this.target.anchorTarget;
  }
};
t(E0, "__type", "label");
var Ts = E0;
$i();
var ec;
var jd = class jd2 {
  constructor(r6, t6, n) {
    t(this, "id");
    v(this, ec);
    t(this, "__type", jd2.__type);
    t(this, "contentEl");
    this.id = r6, this.contentEl = t6, w(this, ec, n);
  }
  get target() {
    return u(this, ec);
  }
  get coordinate() {
    return u(this, ec).anchorTarget;
  }
  toJSON() {
    return { id: this.id, __type: jd2.__type, target: this.target, coordinate: this.coordinate };
  }
  static is(r6) {
    return r6.__type === jd2.__type;
  }
  get focusTarget() {
    return this.target.anchorTarget;
  }
  updateTarget(r6) {
    w(this, ec, r6);
  }
};
ec = /* @__PURE__ */ new WeakMap(), t(jd, "__type", "marker");
var Ca = jd;
$i();
var S0;
var D0;
var C0 = class C02 {
  constructor(r6, t6, n) {
    v(this, S0);
    v(this, D0);
    t(this, "target");
    t(this, "__type", C02.__type);
    w(this, S0, r6), w(this, D0, t6), this.target = n;
  }
  static is(r6) {
    return r6.__type === C02.__type;
  }
  get id() {
    return u(this, S0);
  }
  get url() {
    return u(this, D0);
  }
};
S0 = /* @__PURE__ */ new WeakMap(), D0 = /* @__PURE__ */ new WeakMap(), t(C0, "__type", "image-3d");
var tc = C0;
$i();
var rc;
var Ud = class Ud2 {
  constructor(r6, t6, n) {
    t(this, "id");
    t(this, "groupId");
    t(this, "__type", Ud2.__type);
    v(this, rc);
    this.id = r6, this.groupId = t6, w(this, rc, n);
  }
  get target() {
    return u(this, rc);
  }
  static is(r6) {
    return r6.__type === Ud2.__type;
  }
  updateTarget(r6) {
    w(this, rc, r6);
  }
  toJSON() {
    return { id: this.id, __type: Ud2.__type, groupId: this.groupId, target: u(this, rc) };
  }
};
rc = /* @__PURE__ */ new WeakMap(), t(Ud, "__type", "model");
var nc = Ud;
$i();
var oc;
var T0 = class T02 {
  constructor(r6, t6) {
    t(this, "id");
    t(this, "coordinates");
    v(this, oc);
    t(this, "__type", T02.__type);
    this.id = r6, this.coordinates = t6;
  }
  static is(r6) {
    return r6.__type === T02.__type;
  }
  get isConnectionSegment() {
    return this.coordinates.length === 2 && this.coordinates[0].floorId !== this.coordinates[1].floorId;
  }
  get distance() {
    return u(this, oc) ? u(this, oc) : (w(this, oc, Fx(this.coordinates)), u(this, oc));
  }
  get focusTarget() {
    return this.coordinates;
  }
};
oc = /* @__PURE__ */ new WeakMap(), t(T0, "__type", "path-segment");
var Mu = T0;
var ic;
var Gd = class Gd2 {
  constructor(r6, t6, n, o) {
    t(this, "id");
    t(this, "animation");
    t(this, "coordinates");
    t(this, "segments");
    v(this, ic);
    t(this, "__type", Gd2.__type);
    this.id = r6, this.animation = t6, this.coordinates = n, this.segments = o.map(({ id: i, coordinates: s6 }) => new Mu(i.toString(), s6));
  }
  static is(r6) {
    return r6.__type === Gd2.__type;
  }
  get focusTarget() {
    return this.coordinates;
  }
  get distance() {
    return u(this, ic) ? u(this, ic) : (w(this, ic, Fx(this.coordinates)), u(this, ic));
  }
  toJSON() {
    return { __type: Gd2.__type, id: this.id, coordinates: this.coordinates, segments: this.segments };
  }
};
ic = /* @__PURE__ */ new WeakMap(), t(Gd, "__type", "path");
var Fi = Gd;
$i();
var CH = 7;
var Au;
var ac;
var w0 = class {
  constructor(r6, t6) {
    v(this, Au);
    v(this, ac);
    w(this, Au, r6), w(this, ac, t6?.precision ?? CH);
  }
  toJSON() {
    return { center: this.center, bearing: this.bearing, pitch: this.pitch, zoomLevel: this.zoomLevel };
  }
  get center() {
    let r6 = u(this, Au).center;
    if (u(this, ac) === -1) return r6;
    let t6 = S5(r6.latitude, u(this, ac)), n = S5(r6.longitude, u(this, ac));
    return new ge2({ latitude: t6, longitude: n, floorId: r6.floorId, verticalOffset: r6.verticalOffset });
  }
  get bearing() {
    return u(this, Au).bearing;
  }
  get pitch() {
    return u(this, Au).pitch;
  }
  get zoomLevel() {
    return S5(u(this, Au).zoomLevel, 5);
  }
};
Au = /* @__PURE__ */ new WeakMap(), ac = /* @__PURE__ */ new WeakMap();
$i();
var F0 = class F02 {
  constructor(r6) {
    t(this, "id");
    t(this, "__type", F02.__type);
    this.id = r6;
  }
  static is(r6) {
    return r6.__type === F02.__type;
  }
  get focusTarget() {
    return this;
  }
};
t(F0, "__type", "shape");
var ws = F0;
$i();
var M0 = class M02 {
  constructor(r6, t6) {
    t(this, "id");
    t(this, "target");
    t(this, "__type", M02.__type);
    this.id = r6, this.target = t6;
  }
  static is(r6) {
    return r6.__type === M02.__type;
  }
};
t(M0, "__type", "text-3d");
var Ou = M0;
$i();
$i();
$i();
var SH = /* @__PURE__ */ new Map([["search-16x16", `<svg viewBox="0 0 16 16">
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M1 7C1 3.68629 3.68629 1 7 1C10.3137 1 13 3.68629 13 7C13 8.29583 12.5892 9.49572 11.8907 10.4765L15.4614 14.0472C15.6567 14.2425 15.6567 14.559 15.4614 14.7543L14.7543 15.4614C14.559 15.6567 14.2424 15.6567 14.0472 15.4614L10.4765 11.8907C9.49571 12.5892 8.29583 13 7 13C3.68629 13 1 10.3137 1 7ZM7 11C4.79086 11 3 9.20914 3 7C3 4.79086 4.79086 3 7 3C9.20914 3 11 4.79086 11 7C11 9.20914 9.20914 11 7 11Z"
				stroke="none"
			/>
		</svg>`], ["close-16x16", `<svg viewBox="0 0 16 16">
			<path
				d="M12.5963 1.98959C12.7916 1.79433 13.1082 1.79433 13.3034 1.98959L14.0105 2.6967C14.2058 2.89196 14.2058 3.20855 14.0105 3.40381L3.40392 14.0104C3.20866 14.2057 2.89208 14.2057 2.69682 14.0104L1.98971 13.3033C1.79445 13.108 1.79445 12.7915 1.98971 12.5962L12.5963 1.98959Z"
				stroke="none"
			/>
			<path
				d="M1.98971 3.40381C1.79445 3.20855 1.79445 2.89196 1.98971 2.6967L2.69682 1.98959C2.89208 1.79433 3.20866 1.79433 3.40392 1.98959L14.0105 12.5962C14.2058 12.7915 14.2058 13.108 14.0105 13.3033L13.3034 14.0104C13.1082 14.2057 12.7916 14.2057 12.5963 14.0104L1.98971 3.40381Z"
				stroke="none"
			/>
		</svg>`], ["empty-64x40", `<svg viewBox="0 0 64 40">
			<g>
				<g clipPath="url(#clip0_499_175492)">
					<path
						d="M32 39.7032C49.6731 39.7032 64 36.5925 64 32.7552C64 28.9179 49.6731 25.8071 32 25.8071C14.3269 25.8071 0 28.9179 0 32.7552C0 36.5925 14.3269 39.7032 32 39.7032Z"
						stroke="none"
						fill="#F5F5F5"
					/>
					<path
						d="M55 13.6653L44.854 2.24866C44.367 1.47048 43.656 1 42.907 1H21.093C20.344 1 19.633 1.47048 19.146 2.24767L9 13.6663V22.8367H55V13.6653Z"
						fill="none"
					/>
					<path
						d="M41.613 16.8128C41.613 15.2197 42.607 13.9046 43.84 13.9036H55V31.9059C55 34.0132 53.68 35.7402 52.05 35.7402H11.95C10.32 35.7402 9 34.0122 9 31.9059V13.9036H20.16C21.393 13.9036 22.387 15.2167 22.387 16.8098V16.8317C22.387 18.4248 23.392 19.7111 24.624 19.7111H39.376C40.608 19.7111 41.613 18.4128 41.613 16.8198V16.8128Z"
						fill="#FAFAFA"
					/>
				</g>
				<defs>
					<clipPath id="clip0_499_175492">
						<rect width="64" height="40" fill="white" />
					</clipPath>
				</defs>
			</g>
		</svg>`], ["caret-12x12", `<svg viewBox="0 0 12 12">
			<path
				stroke="none"
				d="M8.38828 5.78337L3.92578 1.93493C3.75938 1.79196 3.51562 1.92087 3.51562 2.15173V9.84861C3.51562 10.0795 3.75938 10.2084 3.92578 10.0654L8.38828 6.21696C8.51602 6.10681 8.51602 5.89353 8.38828 5.78337Z"
			/>
		</svg>`], ["plus-16x16", `<svg viewBox="0 0 16 16">
			<path
				d="M7.5 1C7.22386 1 7 1.22386 7 1.5V7H1.5C1.22386 7 1 7.22386 1 7.5L1 8.5C1 8.77614 1.22386 9 1.5 9H7V14.5C7 14.7761 7.22386 15 7.5 15H8.5C8.77614 15 9 14.7761 9 14.5V9H14.5C14.7761 9 15 8.77614 15 8.5V7.5C15 7.22386 14.7761 7 14.5 7H9V1.5C9 1.22386 8.77614 1 8.5 1H7.5Z"
				stroke="none"
			/>
		</svg>`], ["recenter-16x16", `<svg viewBox="0 0 16 16">
			<g stroke="none">
				<path d="M0 2.5C0 2.22386 0.223858 2 0.5 2H1.5C1.77614 2 2 2.22386 2 2.5V13.5C2 13.7761 1.77614 14 1.5 14H0.5C0.223858 14 0 13.7761 0 13.5V2.5Z" />
				<path
					fillRule="evenodd"
					clipRule="evenodd"
					d="M4.5 4C4.22386 4 4 4.22386 4 4.5V11.5C4 11.7761 4.22386 12 4.5 12H11.5C11.7761 12 12 11.7761 12 11.5V4.5C12 4.22386 11.7761 4 11.5 4H4.5ZM6 6V10H10V6H6Z"
				/>
				<path d="M14.5 2C14.2239 2 14 2.22386 14 2.5V13.5C14 13.7761 14.2239 14 14.5 14H15.5C15.7761 14 16 13.7761 16 13.5V2.5C16 2.22386 15.7761 2 15.5 2H14.5Z" />
			</g>
		</svg>`], ["minus-16x16", `<svg viewBox="0 0 16 16">
			<path
				d="M1.5 9C1.22386 9 1 8.77614 1 8.5L1 7.5C1 7.22386 1.22386 7 1.5 7L14.5 7C14.7761 7 15 7.22386 15 7.5V8.5C15 8.77614 14.7761 9 14.5 9L1.5 9Z"
				stroke="none"
			/>
		</svg>`], ["logo-horizontal-206x48", `<svg viewBox="0 0 206 48">
			<path d="M27.2678 14.2261H22.3187C21.0695 14.2261 20.4695 14.7801 20.4695 15.9852V31.142L10.3966 15.5591C9.69665 14.4784 9.2475 14.2773 7.8475 14.2261H2.97462C1.67462 14.2261 1.07631 14.7801 1.07631 15.9852V44.7665C1.07631 45.9716 1.67462 46.5256 2.97462 46.5256H7.92377C9.22207 46.5256 9.82207 45.9716 9.82207 44.7665V29.6847L19.9441 45.1926C20.695 46.3244 21.095 46.5256 22.4933 46.5256H27.2933C28.5916 46.5256 29.1916 45.9716 29.1916 44.7665V15.9852C29.1407 14.7801 28.5424 14.2261 27.2678 14.2261Z" />
			<path d="M5.44915 10.9602C8.45863 10.9602 10.8983 8.50669 10.8983 5.48011C10.8983 2.45353 8.45863 0 5.44915 0C2.43967 0 0 2.45353 0 5.48011C0 8.50669 2.43967 10.9602 5.44915 10.9602Z" />
			<path d="M61.7899 25.0449C63.2306 23.1903 65.078 22.2051 67.556 22.2051C72.0526 22.2051 74.7611 25.3347 74.7611 29.4511V39.2489C74.8187 39.7125 74.5306 39.9443 74.0695 39.9443H72.5136C72.0526 39.9443 71.7645 39.7125 71.8221 39.2489V29.5091C71.8221 27.1909 69.9187 25.2187 67.4984 25.2187C65.1339 25.2187 63.2323 27.1329 63.2323 29.2773V39.2489C63.2899 39.7125 63.0018 39.9443 62.5407 39.9443H60.9831C60.5221 39.9443 60.2916 39.7125 60.2916 39.2489V29.4511C60.2916 27.1329 58.3899 25.2187 56.0255 25.2187C53.7204 25.2187 51.7594 27.075 51.7594 29.2773V39.3068C51.817 39.7705 51.5289 40.0023 51.0102 40.0023H49.5119C49.0509 40.0023 48.7628 39.7705 48.7628 39.3068V23.25C48.7051 22.7864 48.9933 22.4966 49.5119 22.4966H50.9526C51.356 22.4966 51.5289 22.6704 51.5289 23.0182V24.2352C52.7407 22.9602 54.239 22.2648 56.0255 22.2648C58.4475 22.2068 60.3492 23.192 61.7899 25.0466V25.0449ZM77.1255 31.2477C77.1255 26.3216 81.1018 22.2051 86.1187 22.2051C88.539 22.2051 90.6136 23.1903 92.3441 25.1608V23.1903C92.3441 22.7267 92.5746 22.5528 93.0357 22.5528H94.4187C94.8797 22.5528 95.1102 22.7847 95.1102 23.3062V39.3648C95.1102 39.8284 94.8797 40.0602 94.4187 40.0602H93.0357C92.5746 40.0602 92.3441 39.8284 92.3441 39.4227V37.4523C90.6712 39.3648 88.5967 40.35 86.1746 40.35C81.1018 40.2341 77.1238 36.1773 77.1238 31.2477H77.1255ZM92.1136 31.2477C92.1136 27.8284 89.4611 25.2187 86.0594 25.2187C82.7746 25.2187 80.1221 27.8864 80.1221 31.2477C80.1221 34.6687 82.7746 37.2784 86.1187 37.2784C86.9062 37.2789 87.6861 37.1232 88.4138 36.8202C89.1414 36.5173 89.8026 36.0731 90.3593 35.513C90.9161 34.9528 91.3577 34.2878 91.6587 33.556C91.9597 32.8241 92.1143 32.0397 92.1136 31.2477ZM100.992 37.3943V46.3807C101.049 46.8443 100.761 47.1341 100.298 47.1341H98.7424C98.2814 47.1341 97.9933 46.9023 97.9933 46.3807V23.1903C97.9933 22.7267 98.2238 22.4369 98.7424 22.4369H100.183C100.646 22.379 100.934 22.6687 100.934 23.0744V24.9869C102.605 23.0744 104.68 22.1472 107.044 22.1472C112.002 22.1472 116.037 26.2619 116.037 31.1898C116.037 36.1176 112.059 40.2341 107.044 40.2341C104.622 40.2341 102.603 39.3068 100.992 37.3943ZM106.987 25.2187C103.7 25.2187 101.049 27.8864 101.049 31.2477C101.049 34.6687 103.7 37.2784 107.044 37.2784C110.446 37.2784 113.039 34.6108 113.039 31.2477C113.039 27.8864 110.388 25.2187 106.987 25.2187ZM121.11 37.3943V46.3807C121.168 46.8443 120.88 47.1341 120.419 47.1341H118.861C118.4 47.1341 118.112 46.9023 118.112 46.3807V23.1903C118.112 22.7267 118.342 22.4369 118.861 22.4369H120.302C120.764 22.379 121.053 22.6687 121.053 23.0744V24.9869C122.724 23.0744 124.798 22.1472 127.163 22.1472C132.12 22.1472 136.156 26.2619 136.156 31.1898C136.156 36.1176 132.178 40.2341 127.163 40.2341C124.742 40.2341 122.781 39.3068 121.11 37.3943ZM127.105 25.2187C123.819 25.2187 121.168 27.8864 121.168 31.2477C121.168 34.6687 123.819 37.2784 127.163 37.2784C130.564 37.2784 133.158 34.6108 133.158 31.2477C133.158 27.8864 130.507 25.2187 127.107 25.2187H127.105ZM153.97 32.3506H141.054C141.342 35.2483 143.995 37.4523 147.164 37.4523C148.893 37.4523 150.393 37.0466 151.719 36.0597C152.007 35.8858 152.295 35.7699 152.353 35.7699C152.583 35.7699 152.756 35.8858 152.929 36.1773L153.505 37.1625C153.622 37.3364 153.68 37.4523 153.68 37.5682C153.68 37.8 153.507 38.0318 153.103 38.3216C151.258 39.5966 149.183 40.292 146.992 40.292C141.688 40.292 137.883 36.3511 137.883 31.2477C137.883 26.204 141.803 22.2051 146.703 22.2051C151.546 22.2051 154.717 25.7983 154.717 31.0176C154.717 31.5972 154.717 32.3506 153.968 32.3506H153.97ZM141.056 30.0324H151.72C151.432 26.8432 149.473 24.929 146.648 24.929C145.241 24.8904 143.875 25.3995 142.833 26.3501C141.791 27.3007 141.154 28.6194 141.056 30.0307V30.0324ZM156.332 31.2477C156.332 26.3216 160.31 22.2051 165.326 22.2051C167.748 22.2051 169.707 23.1324 171.32 25.0449V16.2324C171.263 15.7687 171.551 15.479 172.012 15.479H173.57C174.031 15.479 174.319 15.7108 174.319 16.2324V39.3068C174.319 39.7705 174.088 40.0023 173.57 40.0023H172.129C171.666 40.0602 171.378 39.7705 171.378 39.3648V37.3943C169.649 39.3068 167.632 40.292 165.268 40.292C160.31 40.2341 156.332 36.1773 156.332 31.2477ZM171.264 31.2477C171.264 27.8284 168.612 25.2187 165.21 25.2187C161.924 25.2187 159.273 27.8864 159.273 31.2477C159.273 34.6687 161.924 37.2784 165.268 37.2784C166.057 37.2838 166.839 37.1316 167.569 36.8304C168.299 36.5292 168.962 36.0852 169.52 35.5241C170.077 34.963 170.519 34.296 170.818 33.5619C171.117 32.8277 171.268 32.0411 171.263 31.2477H171.264ZM177.72 19.0739C177.715 18.8594 177.754 18.646 177.833 18.4468C177.912 18.2476 178.031 18.0667 178.182 17.915C178.333 17.7633 178.512 17.6439 178.71 17.5642C178.909 17.4845 179.121 17.446 179.334 17.4511C179.546 17.4507 179.756 17.4923 179.952 17.5737C180.148 17.6551 180.326 17.7746 180.476 17.9254C180.626 18.0762 180.745 18.2553 180.826 18.4523C180.907 18.6494 180.948 18.8606 180.948 19.0739C180.953 19.2884 180.914 19.5017 180.835 19.7009C180.756 19.9001 180.637 20.081 180.486 20.2327C180.335 20.3845 180.156 20.5038 179.957 20.5835C179.759 20.6633 179.547 20.7017 179.334 20.6966C178.412 20.7545 177.72 20.0591 177.72 19.0739ZM177.836 39.2489V23.1903C177.836 22.7267 178.066 22.4369 178.527 22.4369H180.083C180.544 22.4369 180.832 22.6687 180.775 23.1903V39.2489C180.832 39.7125 180.544 39.9443 180.083 39.9443H178.527C178.066 39.9443 177.836 39.7125 177.836 39.2489ZM186.944 23.0165V24.1756C188.212 22.8426 189.71 22.2051 191.497 22.2051C195.937 22.2051 198.646 25.2767 198.646 29.3932V39.2489C198.703 39.7125 198.415 39.9443 197.954 39.9443H196.398C195.936 39.9443 195.705 39.7125 195.705 39.2489V29.4511C195.705 27.1329 193.803 25.2187 191.439 25.2187C189.134 25.2187 187.175 27.075 187.175 29.2773V39.3068C187.232 39.7705 186.944 40.0023 186.424 40.0023H184.868C184.407 40.0023 184.119 39.7705 184.119 39.3068V23.1903C184.061 22.7267 184.349 22.4949 184.868 22.4949H186.309C186.712 22.4949 186.944 22.6687 186.944 23.0165Z" />
			<path d="M204 40C205.115 40 206 39.0857 206 38V37.9886C206 36.9029 205.126 36 204 36C202.885 36 202 36.9143 202 38V38.0114C202 39.0971 202.874 40 204 40ZM204 39.7829C202.989 39.7829 202.23 38.9829 202.23 38.0114V38C202.23 37.0286 203 36.2171 204 36.2171C205.011 36.2171 205.77 37.0171 205.77 37.9886V38C205.77 38.9714 205 39.7829 204 39.7829ZM203.218 38.9714H203.609V38.2743H204.034L204.517 38.9714H204.989L204.448 38.2057C204.724 38.1257 204.92 37.92 204.92 37.5886C204.92 37.1657 204.586 36.9486 204.138 36.9486H203.218V38.9714ZM203.609 37.9543V37.2914H204.103C204.368 37.2914 204.517 37.4057 204.517 37.6229C204.517 37.8171 204.368 37.9543 204.103 37.9543H203.609Z" />
		</svg>`], ["share-16x16", `<svg viewBox="0 0 16 16">
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M13 6C14.6569 6 16 4.65685 16 3C16 1.34315 14.6569 0 13 0C11.3431 0 10 1.34315 10 3C10 3.13463 10.0089 3.26719 10.0261 3.39712L6.82972 5.17286C6.10576 4.44825 5.10523 4 4 4C1.79086 4 0 5.79086 0 8C0 10.2091 1.79086 12 4 12C5.10523 12 6.10576 11.5518 6.82972 10.8271L10.0261 12.6029C10.0089 12.7328 10 12.8654 10 13C10 14.6569 11.3431 16 13 16C14.6569 16 16 14.6569 16 13C16 11.3431 14.6569 10 13 10C12.2011 10 11.4752 10.3123 10.9376 10.8214L7.84579 9.1037C7.94622 8.75313 8 8.38284 8 8C8 7.61716 7.94622 7.24687 7.84579 6.8963L10.9376 5.17864C11.4752 5.68775 12.2011 6 13 6ZM13 4C13.5523 4 14 3.55228 14 3C14 2.44772 13.5523 2 13 2C12.4477 2 12 2.44772 12 3C12 3.55228 12.4477 4 13 4ZM4 10C5.10457 10 6 9.10457 6 8C6 6.89543 5.10457 6 4 6C2.89543 6 2 6.89543 2 8C2 9.10457 2.89543 10 4 10ZM14 13C14 13.5523 13.5523 14 13 14C12.4477 14 12 13.5523 12 13C12 12.4477 12.4477 12 13 12C13.5523 12 14 12.4477 14 13Z"
				stroke="none"
			/>
		</svg>`], ["checkmark-16x16", `<svg viewBox="0 0 16 16">
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M15.387 3.31662C15.6008 3.49148 15.6323 3.80649 15.4574 4.02021L6.77402 14.6332C6.58509 14.8642 6.30292 14.9986 6.00457 15C5.70622 15.0013 5.42285 14.8694 5.23184 14.6402L0.551937 9.02429C0.375155 8.81215 0.403817 8.49687 0.615956 8.32009L1.38418 7.67991C1.59632 7.50312 1.9116 7.53179 2.08838 7.74392L5.99299 12.4295L13.9095 2.75374C14.0844 2.54002 14.3994 2.50852 14.6131 2.68338L15.387 3.31662Z"
				stroke="none"
			/>
		</svg>`], ["arrow-right-16x16", `<svg viewBox="0 0 16 16">
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M8.35355 1.64645C8.54881 1.45118 8.8654 1.45118 9.06066 1.64645L14.7071 7.29289C15.0976 7.68342 15.0976 8.31658 14.7071 8.70711L9.06066 14.3536C8.8654 14.5488 8.54882 14.5488 8.35355 14.3536L7.64645 13.6464C7.45118 13.4512 7.45118 13.1346 7.64645 12.9393L11.5858 9H0.5C0.223858 9 0 8.77614 0 8.5V7.5C0 7.22386 0.223858 7 0.5 7H11.5858L7.64645 3.06066C7.45118 2.8654 7.45118 2.54882 7.64645 2.35355L8.35355 1.64645Z"
				stroke="none"
			/>
		</svg>`], ["arrow-up-16x16", `<svg viewBox="0 0 16 16">
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M8.00015 0.5C8.34685 0.5 8.67835 0.642318 8.91714 0.893677L15.6517 7.98267C15.8441 8.18525 15.8359 8.50548 15.6333 8.69793L14.533 9.7433C14.3304 9.93575 14.0101 9.92754 13.8177 9.72496L9.26497 4.93262V15.4249C9.26497 15.7043 9.03846 15.9308 8.75904 15.9308H7.24125C6.96184 15.9308 6.73532 15.7043 6.73532 15.4249V4.93262L2.1826 9.72496C1.99015 9.92754 1.66992 9.93575 1.46734 9.7433L0.366945 8.69793C0.164367 8.50548 0.156156 8.18525 0.348604 7.98267L7.08315 0.893677C7.32194 0.642318 7.65344 0.5 8.00015 0.5Z"
				stroke="none"
			/>
		</svg>`], ["connection-stairs-16x16", `<svg viewBox="0 0 16 16">
			<g stroke="none">
				<path d="M1 11.5C1 11.2239 1.22386 11 1.5 11H6V13.5C6 13.7761 5.77614 14 5.5 14H1.5C1.22386 14 1 13.7761 1 13.5V11.5Z" />
				<path d="M4 8.5C4 8.22386 4.22386 8 4.5 8H9V10.5C9 10.7761 8.77614 11 8.5 11H4V8.5Z" />
				<path d="M7 5.5C7 5.22386 7.22386 5 7.5 5H12V7.5C12 7.77614 11.7761 8 11.5 8H7V5.5Z" />
				<path d="M10 2.5C10 2.22386 10.2239 2 10.5 2H14.5C14.7761 2 15 2.22386 15 2.5V4.5C15 4.77614 14.7761 5 14.5 5H10V2.5Z" />
			</g>
		</svg>`], ["connection-stairs-14x14", `<svg viewBox="0 0 14 14">
			<path
				d="M5.25 12H2.5C2.225 12 2 11.7429 2 11.4286C2 11.1143 2.225 10.8571 2.5 10.8571H4.25V7.91429H6.5V4.94286H8.75V2H11.5C11.775 2 12 2.25714 12 2.57143C12 2.88571 11.775 3.14286 11.5 3.14286H9.75V6.08571H7.5V9.02857H5.25V12Z"
				stroke="none"
			/>
		</svg>`], ["connection-stairs-12x12", `<svg viewBox="0 0 12 12" stroke="none">
			<path d="M1.625 8.1875C1.625 8.01491 1.76491 7.875 1.9375 7.875H4.75V9.4375C4.75 9.61009 4.61009 9.75 4.4375 9.75H1.9375C1.76491 9.75 1.625 9.61009 1.625 9.4375V8.1875Z" />
			<path d="M3.5 6.3125C3.5 6.13991 3.63991 6 3.8125 6H6.625V7.5625C6.625 7.73509 6.48509 7.875 6.3125 7.875H3.5V6.3125Z" />
			<path d="M5.375 4.4375C5.375 4.26491 5.51491 4.125 5.6875 4.125H8.5V5.6875C8.5 5.86009 8.36009 6 8.1875 6H5.375V4.4375Z" />
			<path d="M7.25 2.5625C7.25 2.38991 7.38991 2.25 7.5625 2.25H10.0625C10.2351 2.25 10.375 2.38991 10.375 2.5625V3.8125C10.375 3.98509 10.2351 4.125 10.0625 4.125H7.25V2.5625Z" />
		</svg>`], ["connection-escalator-16x16", `<svg viewBox="0 0 16 16">
			<g stroke="none">
				<path d="M3.63008 12H2C0.895431 12 0 12.8954 0 14C0 15.1046 0.89543 16 2 16H4.63008C4.86879 16 5.09962 15.9146 5.28087 15.7593L11.7191 10.2407C11.9004 10.0854 12.1312 10 12.3699 10H14C15.1046 10 16 9.10457 16 8C16 6.89543 15.1046 6 14 6H11.3699C11.1312 6 10.9004 6.08539 10.7191 6.24074L4.28087 11.7593C4.09962 11.9146 3.86879 12 3.63008 12Z" />
				<path d="M5 6C5 4.89543 5.89543 4 7 4C8.10457 4 9 4.89543 9 6L5 9.5V6Z" />
				<path d="M9 2C9 3.10457 8.10457 4 7 4C5.89543 4 5 3.10457 5 2C5 0.89543 5.89543 0 7 0C8.10457 0 9 0.89543 9 2Z" />
			</g>
		</svg>`], ["connection-escalator-14x14", `<svg viewBox="0 0 14 14">
			<path
				d="M5.26686 2.98522C5.26686 2.44335 5.71573 2 6.26436 2C6.81299 2 7.26187 2.44335 7.26187 2.98522C7.26187 3.5271 6.81299 3.97045 6.26436 3.97045C5.71573 3.97045 5.26686 3.50246 5.26686 2.98522Z"
				stroke="none"
			/>
			<path
				d="M7.26188 5.48588V5.25125C7.26188 4.85716 6.91275 4.53696 6.48881 4.53696H6.03993C5.61599 4.53696 5.26687 4.88179 5.26687 5.25125V7.66458L4.3192 8.6995H3.67082C2.74813 8.6995 2 9.43842 2 10.3498C2 11.2611 2.74813 12 3.67082 12H4.61845C5.36658 12 6.11471 11.6798 6.61347 11.1133L9.6808 7.76354H10.3292C11.2519 7.76354 12 7.02463 12 6.11329C12 5.20196 11.2519 4.46305 10.3292 4.46305H9.38155C8.60848 4.46305 7.88529 4.78324 7.38653 5.34975L7.26188 5.48588ZM4.61846 11.0148H3.67083C3.29677 11.0148 2.99751 10.7192 2.99751 10.3498C2.99751 9.9803 3.29677 9.68473 3.67083 9.68473H4.61846C4.71821 9.68473 4.81796 9.63547 4.86784 9.56158L8.13467 5.99015C8.45886 5.64532 8.90774 5.44828 9.38155 5.44828H10.3292C10.7032 5.44828 11.0025 5.74384 11.0025 6.1133C11.0025 6.48276 10.7032 6.77833 10.3292 6.77833H9.38155C9.2818 6.77833 9.18205 6.82759 9.13218 6.87685L5.86534 10.4729C5.54115 10.8177 5.09228 11.0148 4.61846 11.0148Z"
				stroke="none"
			/>
		</svg>`], ["connection-elevator-16x16", `<svg viewBox="0 0 16 16">
			<g stroke="none">
				<path d="M3 5.5C3 6.32843 2.32843 7 1.5 7C0.671573 7 0 6.32843 0 5.5C0 4.67157 0.671573 4 1.5 4C2.32843 4 3 4.67157 3 5.5Z" />
				<path d="M3 10.5C3 11.3284 2.32843 12 1.5 12C0.671573 12 0 11.3284 0 10.5C0 9.67157 0.671573 9 1.5 9C2.32843 9 3 9.67157 3 10.5Z" />
				<path d="M11 1H14C14.5523 1 15 1.44772 15 2V14C15 14.5523 14.5523 15 14 15H11V1Z" />
				<path d="M9 1H6C5.44772 1 5 1.44772 5 2V14C5 14.5523 5.44772 15 6 15H9V1Z" />
			</g>
		</svg>`], ["connection-elevator-14x14", `<svg viewBox="0 0 14 14">
			<path
				d="M7.476 2H2.72693C1.77095 2 1 2.72464 1 3.62319V10.3768C1 11.2754 1.77095 12 2.72693 12H7.476C8.43198 12 9.20293 11.2754 9.20293 10.3768V3.62319C9.17209 2.72464 8.40114 2 7.476 2ZM7.476 3.15942C7.75354 3.15942 7.96941 3.36232 7.96941 3.62319V10.3768C7.96941 10.6377 7.75354 10.8406 7.476 10.8406H5.71824V3.15942H7.476ZM4.48472 3.15942V10.8406H2.72693C2.44939 10.8406 2.23352 10.6377 2.23352 10.3768V3.62319C2.23352 3.36232 2.44939 3.15942 2.72693 3.15942H4.48472Z"
				stroke="none"
			/>
			<path
				d="M12.4643 6.19064H10.6638C10.4456 6.19064 10.2546 6.06243 10.1728 5.88294C10.0909 5.70346 10.1455 5.47269 10.2819 5.31884L11.1821 4.47269C11.4004 4.26756 11.755 4.26756 11.946 4.47269L12.8462 5.31884C13.0099 5.47269 13.0371 5.67781 12.9553 5.88294C12.8735 6.08807 12.6825 6.19064 12.4643 6.19064Z"
				stroke="none"
			/>
			<path
				d="M11.564 9.65216C11.4276 9.65216 11.2912 9.60088 11.1821 9.49831L10.2819 8.65216C10.1182 8.49831 10.0909 8.29319 10.1728 8.08806C10.2546 7.90857 10.4456 7.78036 10.6638 7.78036H12.4643C12.6825 7.78036 12.8735 7.90857 12.9553 8.08806C13.0371 8.26754 12.9826 8.49831 12.8462 8.65216L11.9459 9.49831C11.8641 9.60088 11.7004 9.65216 11.564 9.65216Z"
				stroke="none"
			/>
		</svg>`], ["connection-elevator-12x12", `<svg viewBox="0 0 12 12" stroke="none">
			<circle cx="1.9375" cy="4.4375" r="0.9375" />
			<circle cx="1.9375" cy="7.5625" r="0.9375" />
			<path
				fillRule="evenodd"
				clipRule="evenodd"
				d="M7.6 2H9.4C9.73137 2 10 2.26863 10 2.6V9.41328C10 9.74465 9.73137 10.0133 9.4 10.0133H7.6V2ZM6.4 2H4.6C4.26863 2 4 2.26863 4 2.6V9.41328C4 9.74465 4.26863 10.0133 4.6 10.0133H6.4V2Z"
			/>
		</svg>`], ["new-tab-14x14", `<svg viewBox="0 0 14 14">
			<g stroke="none">
				<path d="M2.625 2.625H5.6875C5.92913 2.625 6.125 2.42912 6.125 2.1875V1.3125C6.125 1.07088 5.92913 0.875 5.6875 0.875H1.3125C1.07088 0.875 0.875 1.07088 0.875 1.3125V12.6875C0.875 12.9291 1.07088 13.125 1.3125 13.125H12.6875C12.9291 13.125 13.125 12.9291 13.125 12.6875V8.3125C13.125 8.07088 12.9291 7.875 12.6875 7.875H11.8125C11.5709 7.875 11.375 8.07088 11.375 8.3125V11.375H2.625V2.625Z" />
				<path d="M12.9063 0.875H8.40311C8.20822 0.875 8.11063 1.11062 8.24843 1.24843L9.88124 2.88124L5.8156 6.94688C5.64475 7.11774 5.64475 7.39475 5.8156 7.5656L6.43432 8.18432C6.60517 8.35517 6.88218 8.35517 7.05304 8.18432L11.1187 4.11868L12.7516 5.75157C12.8894 5.88938 13.125 5.79178 13.125 5.59689V1.09375C13.125 0.972938 13.0271 0.875 12.9063 0.875Z" />
			</g>
		</svg>`], ["compress-16x16", `<svg viewBox="0 0 16 16">
			<g stroke="none">
				<path
					id="Vector"
					d="M4.67773 10.7154H0.713449C0.556306 10.7154 0.427734 10.844 0.427734 11.0011V11.8583C0.427734 12.0154 0.556306 12.144 0.713449 12.144H3.82059V15.2868C3.82059 15.444 3.94916 15.5725 4.10631 15.5725H4.96345C5.12059 15.5725 5.24916 15.444 5.24916 15.2868V11.2868C5.24916 10.9708 4.99381 10.7154 4.67773 10.7154ZM4.96345 0.429688H4.10631C3.94916 0.429688 3.82059 0.558259 3.82059 0.715402V3.85826H0.713449C0.556306 3.85826 0.427734 3.98683 0.427734 4.14397V5.00112C0.427734 5.15826 0.556306 5.28683 0.713449 5.28683H4.67773C4.99381 5.28683 5.24916 5.03147 5.24916 4.7154V0.715402C5.24916 0.558259 5.12059 0.429688 4.96345 0.429688ZM15.2849 10.7154H11.3206C11.0045 10.7154 10.7492 10.9708 10.7492 11.2868V15.2868C10.7492 15.444 10.8777 15.5725 11.0349 15.5725H11.892C12.0492 15.5725 12.1777 15.444 12.1777 15.2868V12.144H15.2849C15.442 12.144 15.5706 12.0154 15.5706 11.8583V11.0011C15.5706 10.844 15.442 10.7154 15.2849 10.7154ZM15.2849 3.85826H12.1777V0.715402C12.1777 0.558259 12.0492 0.429688 11.892 0.429688H11.0349C10.8777 0.429688 10.7492 0.558259 10.7492 0.715402V4.7154C10.7492 5.03147 11.0045 5.28683 11.3206 5.28683H15.2849C15.442 5.28683 15.5706 5.15826 15.5706 5.00112V4.14397C15.5706 3.98683 15.442 3.85826 15.2849 3.85826Z"
				/>
			</g>
		</svg>`], ["washroom-14x14", `<svg viewBox="0 0 14 14" stroke="none">
			<path d="M4.55125 3.09062C4.55125 3.69326 4.07639 4.18176 3.49058 4.18176C2.90525 4.18176 2.43039 3.69326 2.43039 3.09062C2.43039 2.4885 2.90525 2 3.49058 2C4.07639 2 4.55125 2.4885 4.55125 3.09062Z" />
			<path d="M5.1193 5.48047C4.81653 4.83116 4.17252 4.41571 3.47822 4.41571C2.78392 4.41571 2.13986 4.83116 1.83714 5.48047L1.04175 7.22034C0.940664 7.441 1.02893 7.70073 1.24393 7.81791C1.47077 7.90871 1.72324 7.81791 1.82433 7.59725L2.49349 6.15554L2.21587 11.4407C2.20305 11.7263 2.41805 11.9734 2.69567 11.9993C2.97329 12.0124 3.21344 11.7913 3.23859 11.5057L3.4028 8.285H3.567L3.73121 11.5057C3.74403 11.7913 3.97086 11.9993 4.23616 11.9993H4.26131C4.53893 11.9861 4.75343 11.7395 4.74111 11.4407L4.46349 6.15554L5.13265 7.59725C5.20858 7.75298 5.35997 7.85697 5.52418 7.85697C5.5873 7.85697 5.65042 7.84379 5.71354 7.81792C5.92804 7.71393 6.0163 7.44153 5.91572 7.22035L5.1193 5.48047Z" />
			<path d="M12.9582 7.22034L12.1505 5.48047C11.8477 4.83116 11.2037 4.41571 10.5094 4.41571C9.81513 4.41571 9.17107 4.83116 8.86836 5.48047L8.06064 7.22034C7.95955 7.441 8.04782 7.70073 8.26282 7.81791C8.47732 7.9219 8.7298 7.8311 8.84371 7.60993L9.52519 6.12977L9.46207 7.2204L8.57842 8.92184C8.47733 9.11663 8.61638 9.36316 8.83089 9.36316H9.33584L9.22242 11.4668C9.2096 11.7397 9.41177 11.9862 9.68939 11.9994C9.95469 12.0126 10.1943 11.8046 10.2072 11.519L10.3581 9.33723H10.6737L10.7871 11.5058C10.7999 11.7787 11.0144 11.9862 11.2792 11.9862H11.3043C11.5696 11.973 11.7841 11.7396 11.7713 11.4535L11.6579 9.33718H12.1628C12.3773 9.33718 12.5287 9.09066 12.4153 8.89586L11.5317 7.19442L11.4685 6.1038L12.1757 7.5972C12.2516 7.75293 12.403 7.85692 12.5672 7.85692C12.6303 7.85692 12.6934 7.84373 12.7566 7.81786C12.9711 7.70068 13.0593 7.44102 12.9582 7.22034Z" />
			<path d="M11.5696 3.09062C11.5696 3.69326 11.0948 4.18176 10.5094 4.18176C9.92363 4.18176 9.44876 3.69326 9.44876 3.09062C9.44876 2.4885 9.92363 2 10.5094 2C11.0948 2 11.5696 2.4885 11.5696 3.09062Z" />
			<path d="M6.99996 2.00006C6.76031 2.00006 6.57095 2.19485 6.57095 2.44138V11.5575C6.57095 11.804 6.76031 11.9988 6.99996 11.9988C7.2396 11.9988 7.42896 11.804 7.42896 11.5575V2.44138C7.42896 2.19485 7.2396 2.00006 6.99996 2.00006Z" />
		</svg>`], ["point-of-interest-12x12", `<svg viewBox="0 0 12 12" stroke="none">
			<path
				stroke="none"
				id="Subtract"
				// Do not change these to fillRule or clipRule, since they need to be rendered as actual SVGs in labels, not React SVGs
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M6.24724 10.7516C7.94597 9.0358 9.85962 6.89195 9.85962 4.85965C9.85962 2.72802 8.13159 1 5.99997 1C3.86834 1 2.14032 2.72802 2.14032 4.85965C2.14032 6.89195 4.05397 9.0358 5.7527 10.7516C5.88904 10.8893 6.1109 10.8893 6.24724 10.7516ZM5.99994 6.26317C6.77508 6.26317 7.40345 5.6348 7.40345 4.85967C7.40345 4.08453 6.77508 3.45616 5.99994 3.45616C5.22481 3.45616 4.59644 4.08453 4.59644 4.85967C4.59644 5.6348 5.22481 6.26317 5.99994 6.26317Z"
			/>
		</svg>`], ["flag-20x20", `<svg viewBox="0 0 20 20" stroke="none">
			<path
				d="M16.9987 4.27111C16.936 5.06715 16.3836 5.93162 15.5238 6.57845C14.7549 7.15682 13.0885 8.04927 10.5434 7.55174C8.32167 7.1164 6.82156 8.02129 6.08085 10.2416L8.24615 17.3998C8.31833 17.6471 8.17711 17.9059 7.9292 17.9813C7.88527 17.9938 7.83976 18 7.79426 18C7.58634 18 7.40277 17.8647 7.34236 17.6673L5.1644 10.4686C5.13773 10.4173 5.12125 10.3613 5.11419 10.3038L3.41956 4.70042C3.38112 4.63512 3.35994 4.56127 3.3568 4.48587L3.02101 3.37886C2.98413 3.25992 2.9959 3.13165 3.05553 3.02203C3.11437 2.91242 3.21479 2.83079 3.33482 2.79504C3.45564 2.75928 3.5851 2.7725 3.69494 2.83235C3.80477 2.89144 3.88637 2.99172 3.92167 3.11143L3.9813 3.31355C4.38847 2.85956 4.90472 2.51439 5.48136 2.30915C6.97201 1.75566 8.95216 1.95467 10.6469 2.83156C11.6888 3.36951 14.3374 4.54493 16.3647 3.79553C16.5154 3.74111 16.684 3.76599 16.8127 3.86239C16.9406 3.95879 17.0105 4.11251 16.9987 4.27111Z"
				stroke="none"
			/>
		</svg>`], ["link-16x16", `<svg viewBox="0 0 16 16" stroke="none">
			<path
				d="M9.10678 11.2433C9.07993 11.2167 9.04367 11.2018 9.00589 11.2018C8.9681 11.2018 8.93184 11.2167 8.90499 11.2433L6.82999 13.3183C5.86928 14.279 4.24785 14.3808 3.18714 13.3183C2.12464 12.2558 2.22642 10.6362 3.18714 9.67546L5.26214 7.60046C5.31749 7.5451 5.31749 7.45403 5.26214 7.39868L4.55142 6.68796C4.52457 6.66138 4.48832 6.64646 4.45053 6.64646C4.41274 6.64646 4.37649 6.66138 4.34964 6.68796L2.27464 8.76296C0.763923 10.2737 0.763923 12.7183 2.27464 14.2272C3.78535 15.7362 6.22999 15.738 7.73892 14.2272L9.81392 12.1522C9.86928 12.0969 9.86928 12.0058 9.81392 11.9505L9.10678 11.2433ZM13.7246 2.77903C12.2139 1.26832 9.76928 1.26832 8.26035 2.77903L6.18357 4.85403C6.15698 4.88088 6.14207 4.91714 6.14207 4.95493C6.14207 4.99271 6.15698 5.02897 6.18357 5.05582L6.89249 5.76475C6.94785 5.8201 7.03892 5.8201 7.09428 5.76475L9.16928 3.68975C10.13 2.72903 11.7514 2.62725 12.8121 3.68975C13.8746 4.75225 13.7729 6.37189 12.8121 7.3326L10.7371 9.4076C10.7106 9.43445 10.6956 9.47071 10.6956 9.5085C10.6956 9.54628 10.7106 9.58254 10.7371 9.60939L11.4479 10.3201C11.5032 10.3755 11.5943 10.3755 11.6496 10.3201L13.7246 8.2451C15.2336 6.73439 15.2336 4.28975 13.7246 2.77903ZM9.75142 6.00939C9.72457 5.9828 9.68832 5.96789 9.65053 5.96789C9.61275 5.96789 9.57649 5.9828 9.54964 6.00939L5.50499 10.0522C5.47841 10.0791 5.46349 10.1154 5.46349 10.1531C5.46349 10.1909 5.47841 10.2272 5.50499 10.254L6.21214 10.9612C6.26749 11.0165 6.35857 11.0165 6.41392 10.9612L10.4568 6.91832C10.5121 6.86296 10.5121 6.77189 10.4568 6.71653L9.75142 6.00939Z"
				stroke="none"
			/>
		</svg>`]]);
var DH = /<svg([^>]*)>/g;
function oA(e6, r6, t6) {
  let n = SH.get(e6);
  return n ? n.replace(DH, `<svg$1 style="fill:${r6}; width:${t6}px; height:${t6}px">`) : "";
}
var TH = (e6) => `
		<div class="pin-shadow" style="background: ${e6}"></div>
		<svg width="${20 * 0.9}px" height="${48 * 0.9}px" viewBox="0 0 20 48">
			<path
				d="M1.37965 29.3246C1.5778 31.2167 2.27661 33.0694 3.83078 33.775C4.0998 37.1861 4.7451 40.2227 5.65918 42.4784C6.14556 43.6787 6.72883 44.71 7.41453 45.4578C8.10027 46.2056 8.97065 46.7527 9.99989 46.7527C11.0292 46.7527 11.8995 46.2055 12.585 45.4576C13.2706 44.7098 13.8536 43.6785 14.3398 42.4783C15.2536 40.2226 15.8988 37.186 16.1688 33.7752C17.7232 33.0697 18.422 31.2169 18.6201 29.3247C18.8386 27.2385 18.5165 24.6502 17.6475 22.0285L17.6473 22.0278C16.9657 19.9761 16.0319 18.1622 14.9848 16.7474C17.0884 15.1587 18.4471 12.5964 18.4471 9.7152C18.4471 4.93539 14.6967 1 9.99966 1C5.30272 1 1.54993 4.93527 1.54993 9.7152C1.54993 12.5961 2.90839 15.1583 5.01167 16.747C3.9635 18.1625 3.03185 19.977 2.3522 22.0286C1.48319 24.6503 1.16118 27.2385 1.37965 29.3246Z"
				fill="${e6}"
				stroke="white"
				strokeWidth="2"
			/>
		</svg>
	`;
var wH = (e6) => `
		<div class="pin-shadow" style="background: ${e6}"></div>
		<svg width="36" height="42" viewBox="-2 -2 40 46">
			<path
				d="M35.8372 5.86776C35.6765 7.92448 34.2625 10.158 32.0612 11.8292C30.0929 13.3235 25.8269 15.6292 19.3114 14.3438C13.6237 13.219 9.78333 15.5569 7.88708 21.2934L13.4303 39.7879C13.6151 40.4267 13.2536 41.0955 12.6189 41.2903C12.5064 41.3225 12.39 41.3385 12.2735 41.3385C11.7412 41.3385 11.2712 40.989 11.1166 40.4789L5.54093 21.88C5.47265 21.7474 5.43047 21.6028 5.41239 21.4542L1.07409 6.97696C0.975678 6.80825 0.921449 6.61744 0.913417 6.42263L0.053779 3.56251C-0.0406172 3.2552 -0.0104927 2.92379 0.142154 2.64058C0.29279 2.35738 0.549874 2.14649 0.857157 2.05411C1.16646 1.96172 1.49786 1.99587 1.77906 2.15052C2.06025 2.30317 2.26912 2.56226 2.35951 2.87155L2.51215 3.39375C3.55453 2.22081 4.87615 1.32902 6.35237 0.798742C10.1685 -0.631292 15.2377 -0.117113 19.5763 2.14846C22.2435 3.53834 29.0241 6.57524 34.2141 4.63904C34.5998 4.49845 35.0316 4.56272 35.361 4.81178C35.6884 5.06083 35.8673 5.45801 35.8372 5.86776Z"
				fill="none"
				stroke="white"
				strokeWidth="4"
			/>
			<path
				d="M35.8372 5.86776C35.6765 7.92448 34.2625 10.158 32.0612 11.8292C30.0929 13.3235 25.8269 15.6292 19.3114 14.3438C13.6237 13.219 9.78333 15.5569 7.88708 21.2934L13.4303 39.7879C13.6151 40.4267 13.2536 41.0955 12.6189 41.2903C12.5064 41.3225 12.39 41.3385 12.2735 41.3385C11.7412 41.3385 11.2712 40.989 11.1166 40.4789L5.54093 21.88C5.47265 21.7474 5.43047 21.6028 5.41239 21.4542L1.07409 6.97696C0.975678 6.80825 0.921449 6.61744 0.913417 6.42263L0.053779 3.56251C-0.0406172 3.2552 -0.0104927 2.92379 0.142154 2.64058C0.29279 2.35738 0.549874 2.14649 0.857157 2.05411C1.16646 1.96172 1.49786 1.99587 1.77906 2.15052C2.06025 2.30317 2.26912 2.56226 2.35951 2.87155L2.51215 3.39375C3.55453 2.22081 4.87615 1.32902 6.35237 0.798742C10.1685 -0.631292 15.2377 -0.117113 19.5763 2.14846C22.2435 3.53834 29.0241 6.57524 34.2141 4.63904C34.5998 4.49845 35.0316 4.56272 35.361 4.81178C35.6884 5.06083 35.8673 5.45801 35.8372 5.86776Z"
				fill="${e6}"
			/>
		</svg>
    `;
var K2 = "#722ED1";
var q2 = "#1890FF";
var iA = ({ type: e6 = "departure", color: r6 = q2 }) => `<div class="dropped-pin-wrapper">
			${e6 === "departure" ? TH(r6) : wH(r6)}
		</div>`;
var FH = (e6) => {
  switch (e6) {
    case "default":
      return 28;
    case "selection":
      return 28;
    case "navigation":
      return 32;
  }
};
var aA = ({ type: e6 = "stairs", color: r6 = K2, direction: t6 = "up" }) => {
  let n = FH("default"), o = n / 2 + 2, i = t6 && t6 !== "none";
  return `<div class="mappedin-connection-marker">
			<div class="connection-circle"
				role="button"
                style="background:${r6}; width:${n}px; height:${n}px;"
			>
                ${oA("connection-" + e6 + "-16x16", "white", o) || ""}
			</div>
			${i ? `<div style="margin-left: -${n * 0.2}px;">
					<div class="bouncey">
						<div class="connection-circle"
							role="button"
							style="width: ${n}px; height: ${n}px;">
							<div class="${t6 === "up" ? "" : "arrow--down"}">
                                <svg viewBox="0 0 16 16" style="fill: white; width: ${o}px; height: ${o}px">
                                    <path
                                        fillRule="evenodd"
                                        clipRule="evenodd"
                                        d="M8.00015 0.5C8.34685 0.5 8.67835 0.642318 8.91714 0.893677L15.6517 7.98267C15.8441 8.18525 15.8359 8.50548 15.6333 8.69793L14.533 9.7433C14.3304 9.93575 14.0101 9.92754 13.8177 9.72496L9.26497 4.93262V15.4249C9.26497 15.7043 9.03846 15.9308 8.75904 15.9308H7.24125C6.96184 15.9308 6.73532 15.7043 6.73532 15.4249V4.93262L2.1826 9.72496C1.99015 9.92754 1.66992 9.93575 1.46734 9.7433L0.366945 8.69793C0.164367 8.50548 0.156156 8.18525 0.348604 7.98267L7.08315 0.893677C7.32194 0.642318 7.65344 0.5 8.00015 0.5Z"
                                        stroke="none"
                                    />
                                </svg>
							</div>
						</div>
					</div>
				</div>` : ""}
		</div>`;
};
$i();
var sA = 63710088e-1;
var C4 = /* @__PURE__ */ new WeakMap();
var uA = async (e6) => new Promise((r6) => setTimeout(r6, e6));
function S4(e6, r6, t6) {
  let n = e6.distance, o = OH(e6, r6, t6);
  return o ? (n - o?.distance) / n : 0;
}
function Q2(e6, r6) {
  if (e6.coordinates.length === 0) return [];
  if (C4.has(e6) && C4.get(e6).has(r6)) return C4.get(e6).get(r6);
  let t6 = e6.coordinates.map((n) => D4(n, r6));
  return C4.set(e6, /* @__PURE__ */ new Map([[r6, t6]])), t6;
}
function D4(e6, r6) {
  let t6 = r6.latitude, n = r6.longitude, o = e6.latitude - t6, i = e6.longitude - n, s6 = Math.PI * sA / 180, u6 = s6 * Math.cos(t6 * Math.PI / 180), l = i * u6, c = o * s6;
  return { x: l, y: c };
}
function MH(e6, r6) {
  if (e6.length === 0) return;
  let t6, n = 1 / 0;
  for (let o = 0; o < e6.length; o++) {
    let i = e6[o], s6 = Q2(i, r6);
    for (let u6 = 0; u6 < s6.length - 1; u6++) {
      let l = s6[u6], c = s6[u6 + 1], d = T4(l, c, { x: 0, y: 0 }), f = Math.sqrt(d.x * d.x + d.y * d.y);
      f < n && (n = f, t6 = d);
    }
  }
  if (t6) return AH(t6, r6);
}
function T4(e6, r6, t6) {
  let n = r6.x - e6.x, o = r6.y - e6.y, i = t6.x - e6.x, s6 = t6.y - e6.y, u6 = n * n + o * o;
  if (u6 === 0) return { x: e6.x, y: e6.y };
  let l = (i * n + s6 * o) / u6, c = Math.max(0, Math.min(1, l));
  return { x: e6.x + c * n, y: e6.y + c * o };
}
function AH(e6, r6) {
  let n = Math.PI * sA / 180, o = n * Math.cos(r6.latitude * Math.PI / 180), i = e6.y / n, s6 = e6.x / o, u6 = r6.latitude + i, l = r6.longitude + s6;
  return new ge2({ latitude: u6, longitude: l, floorId: r6.floorId, verticalOffset: r6.verticalOffset });
}
function OH(e6, r6, t6) {
  let n = MH([e6], r6);
  if (!n) return;
  let o = Q2(e6, t6), i = D4(n, t6), s6 = -1, u6 = 1 / 0;
  for (let c = 0; c < o.length - 1; c++) {
    let d = o[c], f = o[c + 1], h = T4(d, f, i), b = h.x - i.x, I = h.y - i.y, E = Math.sqrt(b * b + I * I);
    E < 1 && E < u6 && (u6 = E, s6 = c);
  }
  if (s6 === -1) {
    let c = 0, d = 1 / 0;
    for (let f = 0; f < o.length; f++) {
      let h = o[f], b = h.x - i.x, I = h.y - i.y, E = Math.sqrt(b * b + I * I);
      E < d && (d = E, c = f);
    }
    s6 = Math.max(0, c - 1);
  }
  let l = [n];
  for (let c = s6 + 1; c < e6.coordinates.length; c++) l.push(e6.coordinates[c]);
  return new Mu(`${e6.id}_remaining`, l);
}
function w4(e6, r6, t6, n) {
  let o, i, s6 = 1 / 0, u6 = 1 / 0, l = D4(r6, n), c = D4(t6, n);
  for (let f of e6) for (let h of f.segments) {
    if (h.isConnectionSegment) continue;
    let b = h.coordinates[0]?.floorId, I = b === r6.floorId, E = b === t6.floorId;
    if (!I && !E) continue;
    let v6 = Q2(h, n);
    if (I) {
      let x6 = 1 / 0;
      for (let D = 0; D < v6.length - 1; D++) {
        let w6 = v6[D], S = v6[D + 1], F = T4(w6, S, l), P = F.x - l.x, L = F.y - l.y, N = Math.sqrt(P * P + L * L);
        N < x6 && (x6 = N);
      }
      x6 < s6 && (s6 = x6, o = h);
    }
    if (E) {
      let x6 = 1 / 0;
      for (let D = 0; D < v6.length - 1; D++) {
        let w6 = v6[D], S = v6[D + 1], F = T4(w6, S, c), P = F.x - c.x, L = F.y - c.y, N = Math.sqrt(P * P + L * L);
        N < x6 && (x6 = N);
      }
      x6 < u6 && (u6 = x6, i = h);
    }
  }
  if (!o || !i) return;
  let d = [];
  if (o.id === i.id) return d.push({ segment: o, startHighlightFraction: S4(o, r6, n), endHighlightFraction: S4(i, t6, n) }), d;
  for (let f of e6) for (let h of f.segments) h.id === o.id ? d.push({ segment: h, startHighlightFraction: S4(h, r6, n), endHighlightFraction: 1 }) : h.id === i.id ? d.push({ segment: h, startHighlightFraction: 0, endHighlightFraction: S4(h, t6, n) }) : d.push({ segment: h, startHighlightFraction: 0, endHighlightFraction: 1 });
  return d;
}
var lA = 0.01;
var cA = 0.02;
var BH = { drawDuration: 1e3, color: "#40A9FF", interactive: false, accentColor: "blue", width: { on: "zoom-level", input: [17, 22], output: [2, 0.5] }, displayArrowsOnPath: false, animateArrowsOnPath: false };
var PH = { drawDuration: 1e3, color: "#B3DDFF", interactive: false, accentColor: "#40A9FF", width: { on: "zoom-level", input: [17, 22], output: [2, 0.5] }, displayArrowsOnPath: false, animateArrowsOnPath: false };
var Bu = { setMapOnConnectionClick: true, setMapToDeparture: true, createMarkers: { departure: true, destination: true, connection: true }, pathOptions: BH, inactivePathOptions: PH, markerOptions: { departureColor: q2, destinationColor: K2 }, animatePathDrawing: true };
var Fs;
var Sa;
var ot;
var it;
var Ms;
var sc;
var dr;
var Hn;
var Wo;
var Pu;
var Ne;
var pA;
var dA;
var eI;
var tI2;
var rI;
var mA;
var nI2;
var A0;
var F4;
var zd;
var oI;
var Vd;
var O0 = class {
  constructor(r6) {
    v(this, Ne);
    v(this, Fs, /* @__PURE__ */ new Map());
    v(this, Sa, /* @__PURE__ */ new Map());
    v(this, ot);
    v(this, it, Bu);
    v(this, Ms);
    v(this, sc);
    v(this, dr, []);
    v(this, Hn);
    v(this, Wo, /* @__PURE__ */ new Map());
    v(this, Pu, /* @__PURE__ */ new Map());
    v(this, Vd, (r8) => {
      if (u(this, it).createMarkers?.connection && r8.markers != null && r8.markers.length > 0) {
        let { instruction: t6 } = u(this, Fs).get(r8.markers[0].id);
        t6?.action.toFloor && (u(this, it).setMapOnConnectionClick && u(this, ot).setFloor(t6.action.toFloor.id, "navigation-connection-click"), u(this, ot).publish("navigation-connection-click", { instruction: t6, fromFloor: t6.action.fromFloor, toFloor: t6.action.toFloor }));
      }
    });
    w(this, ot, r6);
  }
  get isMultiFloor() {
    if (!u(this, dr).length) return false;
    let r6 = /* @__PURE__ */ new Set();
    for (let t6 of u(this, dr)) for (let n of t6.coordinates) if (n.floorId && (r6.add(n.floorId), r6.size > 1)) return true;
    return false;
  }
  getPathById(r6) {
    return u(this, ot).Paths.getById(r6);
  }
  getMarkerById(r6) {
    return u(this, Fs).get(r6);
  }
  get paths() {
    let r6 = /* @__PURE__ */ new Set();
    return u(this, Sa).forEach((t6) => r6.add(t6)), Array.from(r6);
  }
  get activeDirections() {
    return u(this, Pu).get(u(this, Hn));
  }
  get activePath() {
    if (u(this, Hn)) return u(this, Sa).get(u(this, Hn).id);
  }
  get floorStacks() {
    let r6 = u(this, ot).getMapData();
    if (!u(this, dr).length || !r6) return [];
    let t6 = /* @__PURE__ */ new Set();
    for (let n of u(this, dr)) for (let o of n.coordinates) if (o.floorId) {
      let i = r6.getById("floor", o.floorId);
      i && t6.add(i.floorStack);
    }
    return Array.from(t6);
  }
  get floors() {
    let r6 = u(this, ot).getMapData();
    if (!u(this, dr).length || !r6) return [];
    let t6 = /* @__PURE__ */ new Set();
    for (let n of u(this, dr)) for (let o of n.coordinates) if (o.floorId) {
      let i = r6.getById("floor", o.floorId);
      i && t6.add(i);
    }
    return Array.from(t6);
  }
  setActivePathByIndex(r6) {
    let t6 = u(this, dr)[r6];
    if (!u(this, dr).length) {
      Pt.warn("Cannot set an active path before drawing. Call Navigation.draw() first.");
      return;
    }
    if (!u(this, dr)[r6]) {
      Pt.warn(`Direction #${r6} does not exist`);
      return;
    }
    let n = u(this, Wo).get(t6);
    if (!n) {
      Pt.warn("The direction is not a part of muli-direcional path");
      return;
    }
    x(this, Ne, F4).call(this, n);
  }
  setActivePath(r6) {
    if (!u(this, dr).length) {
      Pt.warn("Cannot set an active path before drawing. Call Navigation.draw() first.");
      return;
    }
    if (!u(this, Pu).get(r6)) {
      Pt.warn(`Path "${r6.id}" is not a part of muli-direcional path`);
      return;
    }
    x(this, Ne, F4).call(this, r6);
  }
  setActivePathByDirections(r6) {
    if (!u(this, dr).length) {
      Pt.warn("[setActivePathByDirections] Cannot set an active path before drawing. Call Navigation.draw() first.");
      return;
    }
    let t6 = u(this, Wo).get(r6);
    if (!t6) {
      let n = u(this, dr).find((o) => o.id === r6.id);
      if (!n) {
        Pt.warn("[setActivePathByDirections] Cannot find directions for id");
        return;
      }
      t6 = u(this, Wo).get(n);
    }
    if (!t6) {
      Pt.warn("[setActivePathByDirections] Cannot find path for directions");
      return;
    }
    x(this, Ne, F4).call(this, t6);
  }
  clearHighlightedPathSection() {
    for (let r6 of this.paths) for (let t6 of r6.segments) u(this, ot).updateState(t6, { highlightCompleteFraction: 0 });
  }
  highlightPathSection(r6, t6, n) {
    let o = n?.animationDuration ?? 1500, i = u(this, ot).getMapData().mapCenter, s6 = w4(this.paths, r6, t6, i);
    if (!s6) return;
    this.clearHighlightedPathSection();
    let u6 = s6.map((d) => (u(this, ot).updateState(d.segment, { highlightStartFraction: d.startHighlightFraction, highlightEndFraction: d.endHighlightFraction, highlightColor: n?.color ?? "red", highlightWidthMultiplier: n?.widthMultiplier ?? 1 }), new Ii({ fraction: 0 }).to({ fraction: 1 }, o).onUpdate((f) => {
      u(this, ot).updateState(d.segment, { highlightCompleteFraction: f.fraction });
    }))), l = () => {
    }, c = new Promise((d) => {
      l = d;
    });
    return u6.length > 0 && (u6.forEach((d, f) => {
      f < u6.length - 1 && d.chain(u6[f + 1]), u(this, ot).tweenGroup().add(u6[f]);
    }), u6[0].start(), u6[u6.length - 1].onComplete(() => {
      u(this, ot).tweenGroup().remove(u6[u6.length - 1]), l();
    })), { animation: c };
  }
  drawSync(r6, t6 = {}) {
    u(this, sc) && this.clear(), w(this, sc, true), x(this, Ne, nI2).call(this, t6);
    let n = Array.isArray(r6) ? r6 : [r6], o = n[0], i = n[n.length - 1], s6 = o.coordinates[0];
    w(this, dr, n), s6.floorId && u(this, it).setMapToDeparture && u(this, ot).setFloor(s6.floorId), u(this, it).createMarkers?.departure && x(this, Ne, zd).call(this, "departure", o.instructions[0]);
    for (let u6 = 0; u6 < n.length; u6++) {
      let l = n[u6], c = u6 ? { ...u(this, it).inactivePathOptions } : { ...u(this, it).pathOptions };
      if (l.coordinates.length < 2) {
        Pt.warn("Directions must have at least 2 coordinates");
        return;
      }
      let d = x(this, Ne, eI).call(this, l.coordinates, { ...c, animateDrawing: u(this, it).animatePathDrawing, verticalOffset: x(this, Ne, rI).call(this, u6 === 0 ? "active" : "inactive") });
      u(this, Wo).set(l, d), u(this, Pu).set(d, l), u(this, it).createMarkers?.connection && x(this, Ne, oI).call(this, l.instructions, "connection"), u6 === 0 && (w(this, Hn, u(this, Wo).get(u(this, dr)[0])), u(this, ot).externalPubSub.on("click", u(this, Vd)));
    }
    u(this, it).createMarkers?.destination && x(this, Ne, zd).call(this, "destination", i.instructions[i.instructions.length - 1]), u(this, ot).mapObjects.forEach((u6) => {
      u6.processFloorChange(u6.currentFloorId);
    }), x(this, Ne, A0).call(this);
  }
  async draw(r6, t6 = {}) {
    u(this, Ms) && this.clear(), x(this, Ne, nI2).call(this, t6);
    let n = Array.isArray(r6) ? r6 : [r6], i = n[0].coordinates[0];
    return w(this, dr, n), i.floorId && u(this, it).setMapToDeparture && u(this, ot).setFloor(i.floorId), x(this, Ne, mA).call(this, n);
  }
  clear() {
    u(this, Fs).forEach((r6) => {
      r6?.marker && u(this, ot).currentMap.Markers.remove(r6.marker.id.toString());
    }), u(this, Fs).clear(), u(this, Sa).forEach((r6) => {
      u(this, ot).currentMap.Paths.remove(r6.segments.map((t6) => t6.id.toString()));
    }), u(this, Sa).clear(), u(this, Ms) && (u(this, Ms).cancel(), w(this, Ms, void 0)), u(this, sc) && w(this, sc, false), w(this, dr, []), u(this, Wo).clear(), u(this, Pu).clear(), w(this, Hn, void 0), u(this, ot).externalPubSub.off("click", u(this, Vd)), u(this, ot).mapObjects.forEach((r6) => {
      r6.processFloorChange(r6.currentFloorId);
    }), x(this, Ne, A0).call(this);
  }
};
Fs = /* @__PURE__ */ new WeakMap(), Sa = /* @__PURE__ */ new WeakMap(), ot = /* @__PURE__ */ new WeakMap(), it = /* @__PURE__ */ new WeakMap(), Ms = /* @__PURE__ */ new WeakMap(), sc = /* @__PURE__ */ new WeakMap(), dr = /* @__PURE__ */ new WeakMap(), Hn = /* @__PURE__ */ new WeakMap(), Wo = /* @__PURE__ */ new WeakMap(), Pu = /* @__PURE__ */ new WeakMap(), Ne = /* @__PURE__ */ new WeakSet(), pA = function(r6) {
  return r6 != null && ["TakeConnection", "ExitConnection", "TakeVortex", "ExitVortex"].includes(r6.type);
}, dA = function() {
  if (!u(this, Hn)) return;
  let r6 = u(this, Sa).get(u(this, Hn).id);
  if (r6) {
    for (let t6 of u(this, Sa).values()) if (t6.id.includes("internal-")) if (t6.id === u(this, Hn).id) for (let n of r6.segments) u(this, ot).updateState(n, { verticalOffset: cA });
    else u(this, ot).updateState(t6, { verticalOffset: lA });
  }
}, eI = function(r6, t6) {
  let n = t6.id?.toString() ?? Vt(), o = u(this, ot).currentMap.Paths.add(r6, t6), i = new Fi(n, o.animation, r6, o.paths);
  return u(this, Sa).set(n, i), i;
}, tI2 = function(r6, t6, n = false) {
  let o = u(this, ot).currentMap.Markers.add(r6.coordinate, t6, { interactive: n, placement: "top", rank: "always-visible" }), i = u(this, ot).currentMap.Markers.getContentEl(o.id.toString());
  if (!i) throw new Error("marker component should exist");
  return new Ca(o.id.toString(), i, r6.coordinate);
}, rI = function(r6) {
  return r6 === "active" ? cA + (u(this, it).pathOptions?.verticalOffset ?? 0) : lA + (u(this, it).inactivePathOptions?.verticalOffset ?? 0);
}, mA = function(r6) {
  let t6 = r6[0], n = r6[r6.length - 1], o = false;
  return w(this, Ms, { promise: new Promise(async (i) => {
    if (yc.env.NODE_ENV !== "test" && await uA(500), o || !r6.length) {
      i();
      return;
    }
    u(this, it).createMarkers?.departure && x(this, Ne, zd).call(this, "departure", t6.instructions[0]);
    for (let s6 = 0; s6 < r6.length; s6++) {
      let u6 = r6[s6], l = s6 === 0 ? { ...u(this, it).pathOptions } : { ...u(this, it).inactivePathOptions };
      if (u6.coordinates.length < 2) {
        Pt.warn("Directions must have at least 2 coordinates"), i();
        return;
      }
      let c = x(this, Ne, eI).call(this, u6.coordinates, { ...l, animateDrawing: u(this, it).animatePathDrawing, verticalOffset: x(this, Ne, rI).call(this, s6 === 0 ? "active" : "inactive") });
      if (u(this, Wo).set(u6, c), u(this, Pu).set(c, u6), s6 === 0 && (w(this, Hn, u(this, Wo).get(u(this, dr)[0])), u(this, ot).externalPubSub.on("click", u(this, Vd))), yc.env.NODE_ENV !== "test" && await c.animation, o) {
        i();
        return;
      }
      u(this, it).createMarkers?.connection && x(this, Ne, oI).call(this, u6.instructions, "connection");
    }
    if (u(this, it).createMarkers?.destination && x(this, Ne, zd).call(this, "destination", n.instructions[n.instructions.length - 1]), o) {
      i();
      return;
    }
    u(this, ot).mapObjects.forEach((s6) => {
      s6.processFloorChange(s6.currentFloorId);
    }), x(this, Ne, A0).call(this), i();
  }), cancel: () => {
    o = true;
  } }), u(this, Ms).promise;
}, nI2 = function(r6) {
  w(this, it, { setMapOnConnectionClick: r6.setMapOnConnectionClick ?? Bu.setMapOnConnectionClick, setMapToDeparture: r6.setMapToDeparture ?? Bu.setMapToDeparture, pathOptions: { ...Bu.pathOptions, ...r6.pathOptions }, inactivePathOptions: { ...Bu.inactivePathOptions, ...r6.inactivePathOptions }, createMarkers: { ...Bu.createMarkers, ...r6.createMarkers }, markerOptions: { ...Bu.markerOptions, ...r6.markerOptions }, animatePathDrawing: r6.animatePathDrawing ?? Bu.animatePathDrawing });
}, A0 = function() {
  u(this, ot).publish("navigation-state-change", { isMultiFloor: this.isMultiFloor, floorStacks: this.floorStacks, floors: this.floors, activeDirections: this.activeDirections, activePath: this.activePath, paths: this.paths });
}, F4 = function(r6) {
  w(this, Hn, r6), u(this, dr).forEach((t6) => {
    let n = u(this, Wo).get(t6);
    if (n) {
      let o = n.id === u(this, Hn).id ? { ...u(this, it).pathOptions } : { ...u(this, it).inactivePathOptions };
      u(this, ot).updateState(n, o);
    }
  }), u(this, ot).publish("navigation-active-path-change", { directions: this.activeDirections, path: this.activePath }), x(this, Ne, dA).call(this), x(this, Ne, A0).call(this);
}, zd = function(r6, t6) {
  if (r6 === "connection" && t6) {
    let n = t6.action.type === "ExitConnection" ? u(this, it).markerOptions.departureColor : u(this, it).markerOptions.destinationColor, o;
    typeof u(this, it).createMarkers?.connection == "function" ? (o = u(this, it).createMarkers.connection(t6), u(this, ot).updateState(o, { interactive: true })) : o = x(this, Ne, tI2).call(this, t6, aA({ type: t6.action.connection?.type ?? t6.action.connectionType, color: n, direction: t6.action.direction }), true), u(this, Fs).set(o.id, { instruction: t6, marker: o });
  } else {
    let n = r6 === "departure" ? u(this, it).markerOptions.departureColor : u(this, it).markerOptions.destinationColor, o;
    typeof u(this, it).createMarkers?.departure == "function" && r6 === "departure" ? o = u(this, it).createMarkers.departure(t6) : typeof u(this, it).createMarkers?.destination == "function" && r6 === "destination" ? o = u(this, it).createMarkers.destination(t6) : o = x(this, Ne, tI2).call(this, t6, iA({ type: r6, color: n })), u(this, Fs).set(o.id, { instruction: t6, marker: o });
  }
}, oI = function(r6, t6) {
  r6.filter((o) => x(this, Ne, pA).call(this, o.action)).forEach((o) => {
    x(this, Ne, zd).call(this, t6, o);
  });
}, Vd = /* @__PURE__ */ new WeakMap();
$i();
var Ie2;
var P0;
var As;
var M4;
var iI;
var B0 = class {
  constructor(r6) {
    v(this, As);
    v(this, Ie2);
    v(this, P0);
    t(this, "interactions", { set: (r8) => {
      r8?.pan != null && (u(this, Ie2).getSystems().cameraSystem.enablePan = r8.pan), r8?.zoom != null && (u(this, Ie2).getSystems().cameraSystem.enableZoom = r8.zoom), r8?.bearingAndPitch != null && (u(this, Ie2).getSystems().cameraSystem.enableRotate = r8.bearingAndPitch);
    }, enable: () => {
      u(this, Ie2).getSystems().cameraSystem.enablePan = true, u(this, Ie2).getSystems().cameraSystem.enableZoom = true, u(this, Ie2).getSystems().cameraSystem.enableRotate = true;
    }, disable: () => {
      u(this, Ie2).getSystems().cameraSystem.enablePan = false, u(this, Ie2).getSystems().cameraSystem.enableZoom = false, u(this, Ie2).getSystems().cameraSystem.enableRotate = false;
    } });
    t(this, "setMinPitch", (r8) => {
      u(this, Ie2).camera.setMinPitch(r8);
    });
    t(this, "setMaxPitch", (r8) => {
      u(this, Ie2).camera.setMaxPitch(r8);
    });
    t(this, "setMinZoomLevel", (r8) => {
      u(this, Ie2).camera.setMinZoomLevel(r8, true);
    });
    t(this, "setMaxZoomLevel", (r8) => {
      u(this, Ie2).camera.setMaxZoomLevel(r8);
    });
    w(this, P0, r6), w(this, Ie2, r6.core);
  }
  setScreenOffsets(r6) {
    u(this, Ie2).camera.setInsetPadding(r6);
  }
  get screenOffsets() {
    return u(this, Ie2).camera.insetsPadding;
  }
  get panMode() {
    return u(this, Ie2).camera.panMode;
  }
  setPanMode(r6) {
    if (r6 !== "default" && r6 !== "elevation") throw new Error("Invalid pan mode");
    r6 !== this.panMode && u(this, Ie2).camera.setPanMode(r6);
  }
  getFocusOnTransform(r6, t6) {
    let n = u(this, Ie2).camera.getCameraFrameForCoordinates(x(this, As, iI).call(this, r6), { pitch: t6?.pitch, bearing: t6?.bearing, padding: t6?.screenOffsets || this.screenOffsets, maxZoomLevel: t6?.maxZoomLevel, verticalPadding: t6?.axisAlignedPadding?.vertical, minZoomLevel: t6?.minZoomLevel, duration: t6?.duration, easing: t6?.easing });
    return { center: new ge2(n.center[1], n.center[0]), zoomLevel: n.zoomLevel, bearing: t6?.bearing ?? this.bearing, pitch: t6?.pitch ?? this.pitch };
  }
  focusOn(r6, t6) {
    return u(this, Ie2).camera.focusOn(x(this, As, iI).call(this, r6), { pitch: t6?.pitch, bearing: t6?.bearing, padding: t6?.screenOffsets || this.screenOffsets, maxZoomLevel: t6?.maxZoomLevel, minZoomLevel: t6?.minZoomLevel, duration: t6?.duration, verticalPadding: t6?.axisAlignedPadding?.vertical, easing: t6?.easing });
  }
  animateTo(r6, t6) {
    let { center: n, zoomLevel: o, bearing: i, pitch: s6 } = r6, u6 = n ?? this.center;
    return u(this, Ie2).camera.animateTo({ center: n != null ? [u6.longitude, u6.latitude, u(this, Ie2).camera.elevation] : void 0, zoomLevel: o, bearing: i, pitch: s6, duration: t6?.duration ?? 600, easing: t6?.easing });
  }
  set(r6) {
    let { center: t6 = this.center, zoomLevel: n = this.zoomLevel, bearing: o = this.bearing, pitch: i = this.pitch } = r6, s6 = [t6.longitude, t6.latitude];
    u(this, Ie2).camera.setCenter(s6), u(this, Ie2).camera.setZoomLevel(n), u(this, Ie2).camera.setBearing(o), u(this, Ie2).camera.setPitch(i);
  }
  get center() {
    let r6 = u(this, Ie2).camera.center;
    return new ge2(r6[1], r6[0], void 0);
  }
  setAutoMinZoomLevel(r6) {
    u(this, Ie2).camera.setAutoMinZoomLevel(r6);
  }
  get autoMinZoomLevel() {
    return u(this, Ie2).camera.autoMinZoomLevel;
  }
  get zoomLevel() {
    return u(this, Ie2).camera.zoomLevel;
  }
  get pitch() {
    return u(this, Ie2).camera.pitch;
  }
  get minPitch() {
    return u(this, Ie2).camera.minPitch;
  }
  get maxPitch() {
    return u(this, Ie2).camera.maxPitch;
  }
  get bearing() {
    let r6 = u(this, Ie2).camera.bearing;
    return (r6 < 0 ? r6 + 360 : r6) % 360;
  }
  get minZoomLevel() {
    return u(this, Ie2).camera.minZoomLevel;
  }
  get maxZoomLevel() {
    return u(this, Ie2).camera.maxZoomLevel;
  }
  setElevation(r6) {
    u(this, Ie2).camera.setElevation(r6);
  }
  get elevation() {
    return u(this, Ie2).camera.elevation;
  }
  animateElevation(r6, t6) {
    return u(this, Ie2).camera.animateElevation(r6, t6);
  }
  get bounds() {
    return Hy(u(this, Ie2).getSystems().cameraSystem.panBounds, u(this, Ie2).convert3DMapPositionToCoordinate);
  }
  get isAnimating() {
    return u(this, Ie2).camera.isAnimating;
  }
  cancelAnimation() {
    u(this, Ie2).camera.cancelAnimation();
  }
  updateFacadesInView() {
    u(this, Ie2).getSystems().geometryInFocusSystem.raycast();
  }
};
Ie2 = /* @__PURE__ */ new WeakMap(), P0 = /* @__PURE__ */ new WeakMap(), As = /* @__PURE__ */ new WeakSet(), M4 = function(r6) {
  let t6 = u(this, Ie2).camera.elevation;
  return ge2.is(r6) && r6.floorId != null ? u(this, Ie2).getState(r6.floorId)?.altitude ?? t6 : jn2.is(r6) ? u(this, Ie2).getState(r6.id)?.altitude ?? t6 : "floor" in r6 && jn2.is(r6.floor) ? u(this, Ie2).getState(r6.floor.id)?.altitude ?? t6 : t6;
}, iI = function(r6) {
  let t6 = [], o = (Array.isArray(r6) ? r6 : [r6]).flatMap((i) => i?.focusTarget ?? [i]);
  for (let i of o) if (i != null) if (ge2.is(i)) {
    let s6 = x(this, As, M4).call(this, i);
    t6.push([i.longitude, i.latitude, s6]);
  } else if (i?.id != null) {
    let s6 = x(this, As, M4).call(this, i);
    if (jn2.is(i) && u(this, P0).getMapDataInternal()?.enterpriseMode) {
      t6.push(i.id);
      continue;
    } else if ("geoJSON" in i && i.geoJSON.geometry.coordinates.length > 0) {
      $f(i.geoJSON, (l) => {
        t6.push([l[0], l[1], s6]);
      });
      continue;
    }
    let u6 = u(this, Ie2).getBoundingArea(i.id);
    if (u6) t6.push(...u6.map((l) => [l[0], l[1], s6]));
    else if ("geoJSONBoundingBox" in i) {
      let l = x(this, As, M4).call(this, i);
      if (i.geoJSONBoundingBox != null) {
        let c = [[i.geoJSONBoundingBox[0], i.geoJSONBoundingBox[1], l], [i.geoJSONBoundingBox[2], i.geoJSONBoundingBox[3], l]];
        t6.push(...c);
      }
    }
  } else wx(i) && t6.push(i);
  return t6;
};
$i();
var Hd;
var k0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Hd);
    w(this, Hd, r6);
  }
  get currentMap() {
    return u(this, Hd).call(this);
  }
  async getCurrentSceneGLTF(r6) {
    let t6 = u(this, Hd).call(this);
    return t6 ? t6?.Exporter.getCurrentSceneGLTF(r6) : (Pt.error("There is no map to export. Please load a map first."), new Blob());
  }
};
Hd = /* @__PURE__ */ new WeakMap();
$i();
var Mi2;
var L0;
var _0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Mi2, /* @__PURE__ */ new Map());
    v(this, L0);
    w(this, L0, r6);
  }
  get currentMap() {
    return u(this, L0).call(this);
  }
  getAll() {
    return Array.from(u(this, Mi2).values()).map((r6) => r6.label);
  }
  getById(r6) {
    return u(this, Mi2).get(r6);
  }
  add(r6, t6, n) {
    let o = r6.anchorTarget, i = this.currentMap;
    if (!i) throw new Error("currentMap should exist");
    let s6 = i.Labels.add(o, t6, { ...n, attachTo: ld(r6), rank: n?.rank == null || n?.rank === "initial" ? "medium" : n.rank }), u6 = new Ts(s6.id.toString(), t6, r6);
    return u(this, Mi2).set(u6.id, { label: u6, entityId: u6.id }), u6;
  }
  __EXPERIMENTAL__all(r6) {
    let t6 = [];
    return this.currentMap?.Labels.all({ onCreate: (n, o, i) => {
      let s6 = new Ts(n.toString(), o, i);
      u(this, Mi2).set(s6.id, { label: s6, entityId: s6.id }), t6.push(s6);
    }, labelOptions: r6 }), t6;
  }
  remove(r6) {
    let t6 = u(this, Mi2).get(r6.id);
    t6 && (this.currentMap?.Labels.remove(t6), u(this, Mi2).delete(r6.id.toString()));
  }
  removeAll() {
    let r6 = [];
    return u(this, Mi2).forEach(({ label: t6 }) => {
      this.remove(t6), r6.push(t6), u(this, Mi2).delete(t6.id.toString());
    }), r6;
  }
};
Mi2 = /* @__PURE__ */ new WeakMap(), L0 = /* @__PURE__ */ new WeakMap();
$i();
$i();
var A4 = { altitude: 0, height: 1, color: "#ffffff", opacity: 1, width: 0.15 };
var fA = { opacity: 0.25, color: "#a7d1ec", height: 0.8, width: 0.05, altitude: 0.1, cap: "square", visible: false };
var hA = { color: "red", opacity: 0.2, height: A4.height + 0.1, visible: true, borderVisible: false };
var gA = 0.5;
var Ai = class {
  constructor(r6, t6, n = /* @__PURE__ */ new Map()) {
    t(this, "containerId");
    t(this, "layers");
    t(this, "renderer");
    this.containerId = t6, this.layers = n, this.renderer = r6;
  }
  get visible() {
    return this.renderer.getState(this.containerId).visible;
  }
  setVisible(r6) {
    this.renderer.setState(this.containerId, { visible: r6 });
  }
};
var yA = 0;
var uc;
var R0 = class {
  constructor(r6, t6, n, o, i, s6, u6, l) {
    t(this, "id");
    t(this, "name");
    t(this, "elevation");
    t(this, "maxHeight");
    t(this, "containerId");
    t(this, "externalId");
    t(this, "metadata");
    t(this, "shortName");
    t(this, "subtitle");
    t(this, "occluderId");
    t(this, "loaded", false);
    t(this, "styleMap", {});
    t(this, "obstructions");
    t(this, "entrances");
    t(this, "spaces");
    t(this, "floorImages");
    t(this, "floorText");
    t(this, "areas");
    t(this, "renderer");
    t(this, "mapObject");
    t(this, "options");
    t(this, "layers", /* @__PURE__ */ new Map());
    t(this, "footprint");
    t(this, "floorStackId");
    t(this, "multiFloorView");
    t(this, "mapDataInternal");
    t(this, "facadesByStyleId", /* @__PURE__ */ new Map());
    v(this, uc);
    t(this, "load", () => {
      if (this.loaded) return this;
      this.footprint?.geometry == null && this.obstructions?.features.length === 0 && this.spaces?.features.length === 0 && Pt.warn(`Floor ${this.id} exists in the data but contains no geometry.`), this.loaded = true;
      let r8 = this.renderer.addGroupContainer(`${fa}-${this.id}`, {}, this.id);
      this.layers.set(fa, new Ai(this.renderer, r8.id.toString()));
      let t10 = this.renderer.addGroupContainer(`${yi}-${this.id}`, {}, this.id);
      this.layers.set(yi, new Ai(this.renderer, t10.id.toString()));
      let n6 = this.renderer.addGroupContainer(`${or}-${this.id}`, {}, this.id);
      this.layers.set(or, new Ai(this.renderer, n6.id.toString()));
      let o6 = this.renderer.addGroupContainer(`${ha}-${this.id}`, {}, this.id);
      this.layers.set(ha, new Ai(this.renderer, o6.id.toString()));
      let i6 = this.mapObject.getFloorStackAltitudeData(this.floorStackId);
      if (this.footprint?.geometry != null && this.footprint?.geometry.coordinates.length !== 0) {
        let s8 = A4;
        if (this.obstructions != null && this.obstructions.features.length > 0) {
          let l6 = this.obstructions.features.filter((c6) => c6.geometry.type === "LineString" && c6.properties.kind?.toLowerCase() === "wall" && c6.properties.footprintComponent === true);
          l6 != null && l6.length > 0 && (s8 = this.styleMap[l6[0].properties?.id]);
        }
        let u8 = this.renderer.addGeometryGroup(`Footprint-${this.id}`, { features: [{ geometry: this.footprint.geometry, properties: { id: `Footprint-Floor-${this.id}` } }] }, { ...s8, height: i6.get(this.elevation)?.effectiveHeight ?? fs(this.multiFloorView?.floorGap, this.maxHeight), altitude: 0, outline: this.options.style?.outlines ?? true, visible: false, opacity: this.elevation < 0 ? 1 : 0.4, side: this.elevation < 0 ? "back" : "front", color: this.elevation < 0 ? "#F0EEE8" : s8.color, renderOrder: 2 }, this.id);
        this.layers.set(Zp, new Ai(this.renderer, u8.id.toString()));
      }
      if (this.spaces != null && this.spaces.features.length > 0) {
        let s8 = [], u8 = /* @__PURE__ */ new Map();
        this.spaces.features.filter((f) => f.geometry.type === "Polygon" && f.properties.kind?.toLowerCase() !== "void").forEach((f) => {
          let h = this.mapDataInternal?.facadesBySpaceId[f.properties.id];
          if (h) {
            let b = u8.get(h.id) || [];
            u8.set(h.id, [...b, f]);
          } else s8.push(f);
        });
        let l6 = zy(s8, this.styleMap), c6 = this.renderer.addGroupContainer(`spaces-${this.id}`, {}, n6), d = 0;
        for (let [f, h] of l6) {
          let b = this.renderer.addGeometryGroup(`Spaces-${this.id}-${d}`, { features: h }, ud(f, this.options), c6);
          d++;
          let I = c6.id.toString();
          this.layers.get(or).layers.set(f.id || I, b.id.toString());
        }
        if (u8.size > 0) {
          let f = this.renderer.addGroupContainer(`${El2}-${this.id}`, {}, this.id);
          this.layers.set(El2, new Ai(this.renderer, f.id.toString()));
          for (let [h, b] of u8) {
            let I = this.renderer.addGroupContainer(h, { focusable: true }, f), E = this.renderer.addGroupContainer(`${h}-geometry`, {}, I), v6 = zy(b, this.styleMap), x6 = 0;
            for (let [D, w6] of v6) {
              let S = this.renderer.addGeometryGroup(`Facades-${this.id}-${h}-${x6}`, { features: w6 }, { ...ud(D, this.options), renderOrder: 3 }, E);
              x6++;
              let F = D.id || S.id.toString();
              this.layers.get(El2).layers.set(`${h}-${F}`, S.id.toString()), this.facadesByStyleId.has(F) ? this.facadesByStyleId.get(F)?.push(h) : this.facadesByStyleId.set(F, [h]);
            }
          }
        }
      }
      if (this.obstructions != null && this.obstructions.features.length > 0) {
        let s8 = this.obstructions.features.filter((E) => E.geometry.type === "Polygon" && (E.properties.kind === "object" || E.properties.kind === "unknown")), u8 = zy(s8, this.styleMap), l6 = this.renderer.addGroupContainer(`objects-${this.id}`, {}, n6), c6 = 0;
        for (let [E, v6] of u8) {
          let x6 = this.renderer.addGeometryGroup(`Objects-${this.id}-${c6}`, { features: v6 }, ud(E, this.options), l6);
          c6++;
          let D = l6.id.toString();
          this.layers.get(or).layers.set(E.id || D, x6.id.toString());
        }
        let d = this.obstructions.features.filter((E) => E.geometry.type === "LineString" && E.properties.kind?.toLowerCase() === "wall" && E.properties.footprintComponent === false), f = this.obstructions.features.filter((E) => E.geometry.type === "LineString" && E.properties.kind?.toLowerCase() === "wall" && E.properties.footprintComponent === true), h = this.entrances, b = A4, I = A4;
        if (d != null && d.length > 0) {
          let E = this.styleMap[d[0].properties?.id];
          E != null && (b = { ...E }), I = b;
          let { walls: v6, entrances: x6 } = Jx(d, h?.features || []), D = Math.max(b.height - 0.11, gA), w6 = { ...fA, height: D }, S = this.renderer.addGeometryGroup(`InteriorDoors-${this.id}`, x6, w6, n6);
          this.layers.get(or).layers.set(Vp, S.id.toString());
          let F = this.renderer.addGeometryGroup(`Walls-${this.id}`, { features: [v6] }, ud(b, this.options), n6);
          this.layers.get(or).layers.set(lu, F.id.toString());
        }
        if (f != null && f.length > 0) {
          let E = this.styleMap[f[0].properties?.id];
          E != null && (I = { ...E, id: ma });
          let { walls: v6, entrances: x6 } = Jx(f, h?.features || []), D = Math.max(I.height - 0.11, gA), w6 = { ...fA, height: D }, S = this.renderer.addGeometryGroup(`ExteriorDoors-${this.id}`, x6, w6, n6);
          this.layers.get(or).layers.set(Hp, S.id.toString());
          let F = this.renderer.addGeometryGroup(`ExteriorWalls-${this.id}`, { features: [v6] }, ud(I, this.options), n6);
          this.layers.get(or).layers.set(ma, F.id.toString());
        }
      }
      if (this.floorImages != null) {
        let s8 = this.renderer.addGroupContainer(`images-${this.id}`, {}, this.id);
        for (let u8 of this.floorImages.features || []) if (!("anchorId" in u8.properties || "anchorId" in u8.properties && u8.properties?.anchorId == null)) {
          let l6 = Jw(u8, yA);
          this.mapObject.api.Image3D.add(new ge2({ latitude: u8.geometry.coordinates[1], longitude: u8.geometry.coordinates[0], floorId: this.id }), u8.properties.path, { id: l6, flipImageToFaceCamera: this.options.flipImagesToFaceCamera ?? true, ...u8.properties }), yA++;
        }
        this.layers.set(Wp, new Ai(this.renderer, s8.id.toString()));
      }
      if (this.floorText != null) for (let s8 of this.floorText.features || []) {
        let u8 = 0;
        "geometryId" in s8.properties ? u8 = this.renderer.getState(s8.properties.geometryId)?.height ?? 0 : u8 = s8.properties.verticalOffset ?? 0, this.renderer.addText3D(Vt(), { ...s8, properties: { ...s8.properties, verticalOffset: u8 } }, {}, this.id);
      }
      if (this.areas != null) {
        let s8 = this.renderer.addGroupContainer(`areas-${this.id}`, {}, this.id);
        this.layers.set(Il, new Ai(this.renderer, s8.id.toString()));
        let u8 = this.renderer.addGeometryGroup(`Areas-${this.id}`, { features: this.areas.features }, { color: hA.color }, s8);
        for (let l6 of this.areas.features || []) this.renderer.setState(l6.properties.id, { ...hA, visible: false });
        this.layers.get(Il).layers.set(u8.id.toString(), u8.id.toString());
      }
      return this.multiFloorView?.enabled && this.renderer.setState(this.id, { altitude: i6.get(this.elevation)?.altitude ?? this.elevation * fs(this.multiFloorView?.floorGap, this.maxHeight) }), this.renderer.render(), this;
    });
    this.mapObject = n, this.renderer = n.renderer, this.id = t6.id, this.options = i;
    let c = this.renderer.addGroupContainer(this.id, { visible: false, interactive: true, preloadGeometry: i.preloadFloors?.map((d) => d.id).includes(t6.id) }, r6);
    this.containerId = c.id.toString(), this.externalId = t6.externalId, this.metadata = t6.metadata, this.shortName = t6.shortName, this.subtitle = t6.subtitle, this.name = t6.name, this.maxHeight = t6.maxHeight, this.elevation = t6.elevation, s6 != null && u6 != null && (this.styleMap = u6, this.spaces = s6.space[this.id], this.entrances = s6.entrance[this.id], this.areas = s6.area?.[this.id], this.obstructions = s6.obstruction[this.id], this.floorImages = s6.floorImages?.[this.id], this.floorText = s6.enterprise?.floorText?.[this.id], this.footprint = s6["floor.geojson"]?.features.find((d) => d.properties.id === t6.id)), this.floorStackId = r6, this.multiFloorView = o, this.mapDataInternal = l;
  }
  get geoJSONBoundingBox() {
    if (u(this, uc)) return u(this, uc);
    if (!this.footprint) {
      Pt.warn(`Attempting to get bounding box with no footprint for floor ${this.id}`);
      return;
    }
    return w(this, uc, Vy(this.footprint)), u(this, uc);
  }
  addOccluder() {
    if (this.footprint?.geometry == null) return;
    let r6 = this.renderer.addGroupContainer(`${xl2}-${this.id}`, {}, this.id), t6 = new Ai(this.renderer, r6.id.toString());
    this.layers.set(xl2, t6), this.occluderId = this.renderer.addOccluder(this.footprint, t6.containerId);
  }
  get hasFacadeGeometry() {
    return this.facadesByStyleId.size > 0;
  }
  get visible() {
    return this.renderer.getState(this.containerId).visible;
  }
  setVisible(r6) {
    this.renderer.setState(this.containerId, { visible: r6 });
  }
};
uc = /* @__PURE__ */ new WeakMap();
$i();
var Zd;
var N0 = class {
  constructor(r6, t6, n, o) {
    t(this, "id");
    t(this, "externalId");
    t(this, "name");
    t(this, "type");
    t(this, "floorIds");
    t(this, "defaultFloorId");
    t(this, "floorObjects", []);
    t(this, "floorObjectsByElevation", /* @__PURE__ */ new Map());
    t(this, "metadata");
    t(this, "containerId");
    t(this, "facade");
    t(this, "renderer");
    v(this, Zd);
    this.id = r6.id, this.externalId = r6.externalId, this.name = r6.name, this.type = r6.type, this.metadata = r6.metadata, this.floorIds = r6.floors ?? r6.maps, this.defaultFloorId = r6.defaultFloor, this.renderer = n;
    let i = n.addGroupContainer(this.id, { visible: true, interactive: true }, t6);
    this.containerId = i.id.toString(), this.facade = o;
  }
  get defaultFloor() {
    if (u(this, Zd) == null) {
      if (this.floorObjects.length === 0) throw new $a(`No floors in floor stack (${this.id}). Could not get default floor.`);
      let r6;
      this.defaultFloorId && (r6 = this.floorObjects.find((t6) => t6.id === this.defaultFloorId)), r6 || (r6 = this.floorObjects.reduce((t6, n) => Math.abs(n.elevation) < Math.abs(t6.elevation) ? n : t6)), w(this, Zd, r6);
    }
    return u(this, Zd);
  }
  get isOutdoors() {
    return this.type?.toLowerCase() === "outdoor" ? true : this.facade != null ? false : this.floorObjects.some((t6) => t6.hasFacadeGeometry);
  }
  addFloor(r6) {
    if (this.floorObjectsByElevation.has(r6.elevation)) {
      Pt.error(`Floor with same elevation ${r6.elevation} already exists in Stack (${this.id}). Floor (${r6.id}) will not be added.`);
      return;
    }
    this.floorObjects.push(r6), this.floorObjectsByElevation.set(r6.elevation, r6), this.facade && this.renderer.setState(r6.containerId, { focusable: true });
  }
  loadAllFloors() {
    for (let r6 of this.floorObjects) r6.load(), !this.isOutdoors && !r6.hasFacadeGeometry && r6.footprint != null && r6.addOccluder();
  }
};
Zd = /* @__PURE__ */ new WeakMap();
$i();
function aI(e6, r6, t6 = "auto", n, o = /* @__PURE__ */ new Map()) {
  let i = { outdoorOpacity: 1, floorStates: [] }, s6 = e6.sort((c, d) => c.elevation - d.elevation), u6 = e6.some((c) => c.elevation === 0), l = true;
  for (let c of s6) {
    let d = o.get(c.elevation)?.effectiveHeight ?? fs(t6, c.maxHeight), f = { floor: c, state: { type: "floor", visible: false, geometry: { visible: false }, labels: { enabled: false }, markers: { enabled: false }, footprint: { visible: false }, occlusion: { enabled: false }, areas: { visible: false } } };
    i.floorStates.push(f), c.id === r6.id ? (f.state.visible = true, f.state.geometry.visible = true, f.state.labels.enabled = true, f.state.markers.enabled = true, f.state.occlusion.enabled = true, f.state.areas.visible = true, c.elevation < 0 && (f.state.footprint.height = d, f.state.footprint.visible = true, i.outdoorOpacity = 0.2)) : n.includes(c.id) && c.elevation < r6.elevation ? (f.state.visible = true, f.state.geometry.visible = true, f.state.markers.enabled = true, f.state.occlusion.enabled = true, f.state.footprint.visible = true, f.state.footprint.height = d, c.elevation < 0 && (i.outdoorOpacity = 0.2)) : r6.elevation > 0 && c.elevation < r6.elevation && c.elevation >= 0 && (f.state.visible = true, f.state.footprint.visible = true, f.state.footprint.height = d), !u6 && c.elevation > 0 && l && r6.elevation === c.elevation && (l = false, f.state.footprint.visible = false);
  }
  return i;
}
var Oi;
var $0 = class extends Ka {
  constructor(t6, n, o, i) {
    super();
    t(this, "floorStacksById", /* @__PURE__ */ new Map());
    t(this, "floorsById", /* @__PURE__ */ new Map());
    t(this, "startingFloorId", "");
    t(this, "currentFloorId", "");
    t(this, "currentFloorStackId", "");
    t(this, "outdoorFloorStacks", /* @__PURE__ */ new Set());
    t(this, "id");
    t(this, "renderer");
    t(this, "api");
    t(this, "mvf");
    t(this, "options", {});
    t(this, "styleMap");
    t(this, "animations", /* @__PURE__ */ new Map());
    t(this, "floorStackAltitudeMap", /* @__PURE__ */ new Map());
    t(this, "Models", { add: (t10, n6, o6) => {
      let { floorId: i6, scale: s8, ...u8 } = o6, l6 = i6 ? this.floorsById.get(i6) : void 0, c = { ...u8 };
      s8 != null && (c.scale = Array.isArray(o6.scale) ? o6.scale : [o6.scale, o6.scale, o6.scale]);
      let d = this.renderer.addModelGroup(t10, { type: "FeatureCollection", features: n6.map((f) => ({ type: "Feature", properties: { id: Vt(), rotation: o6.rotation, scale: c.scale, interactive: o6.interactive }, geometry: { type: "Point", coordinates: jo(f) } })) }, c, { parent: l6?.id });
      if (d == null) throw new $a("error creating model");
      return this.renderer.getState(d).children;
    }, remove: (t10, n6) => {
      this.renderer.remove(t10), this.renderer.getState(n6).children.length === 0 && this.renderer.remove(n6);
    } });
    t(this, "Image3D", { add: (t10, n6, o6) => {
      let { floorId: i6, flipImageToFaceCamera: s8, ...u8 } = o6, l6 = i6 ? this.floorsById.get(i6) : this.currentFloor, c = { type: "Feature", properties: u8, geometry: { type: "Point", coordinates: t10 } };
      return this.renderer.addImage(o6.id ?? Vt(), c, { url: n6, flipImageToFaceCamera: s8 ?? false }, l6.id);
    }, remove: (t10) => {
      this.renderer.remove(t10);
    }, removeAll: () => {
    } });
    t(this, "Markers", { add: (t10, n6, o6) => {
      let i6 = Ff(t10, this.floorsById, this.api.mapObjects[0].floorsById.get("default-floor")), { attachTo: s8, ...u8 } = o6, l6 = u8;
      u8.rank === "initial" && (l6.rank = "medium");
      let c = i6.layers.get(yi), d = this.renderer.addMarker2D(jo(t10), n6, { ...l6, occluderId: i6?.occluderId, attachTo: s8 }, c?.containerId);
      if (!d) throw new $a("Failed to create Marker");
      return d;
    }, remove: (t10) => {
      this.renderer.remove(t10);
    }, getContentEl: (t10) => {
      let n6 = this.renderer.getState(t10);
      if (n6?.type === "marker") return n6.element;
    }, removeAll: () => {
    }, setPosition: (t10, n6, o6) => {
      let i6 = this.renderer.getState(t10), s8 = o6 ? this.floorsById.get(o6) : this.currentFloor;
      if (!i6) {
        Pt.error(`Failed to retrieve state for Marker with id "${t10}".`);
        return;
      }
      if (i6.type !== "marker") {
        Pt.error(`Geometry with id "${t10}" is not of type "marker".`);
        return;
      }
      this.renderer.setState(i6, { position: n6, parent: s8?.layers.get(yi)?.containerId });
    }, animateTo: (t10, n6, o6, i6) => {
      let s8 = this.renderer.getState(t10), u8 = o6 ? this.floorsById.get(o6) : this.currentFloor;
      if (!s8) return Pt.error(`Failed to retrieve state for Marker with id "${t10}".`), Promise.resolve();
      if (s8.type !== "marker") return Pt.error(`Geometry with id "${t10}" is not of type "marker".`), Promise.resolve();
      let l6 = { duration: 1e3, easing: "ease-in-out", ...i6 };
      this.cancelAnimation(t10);
      let c = new Ii({ lon: s8.position[0], lat: s8.position[1] }).to({ lon: n6[0], lat: n6[1] }, l6.duration).easing(xa[l6.easing]).onUpdate(({ lon: d, lat: f }) => {
        if (!this.renderer.getState(t10)) this.cancelAnimation(t10);
        else {
          let b = u8?.layers.get(yi)?.containerId;
          b && this.Markers.setPosition(t10, [d, f], b);
        }
      }).start();
      return this.renderer.getInternalTweenGroup().add(c), this.renderer.render(), this.animations.set(t10, c), Yx(c).then(() => {
        this.animations.delete(t10);
      });
    } });
    t(this, "Exporter", { getCurrentSceneGLTF: async (t10) => this.renderer.getCurrentSceneGLTF(t10) });
    t(this, "Shapes", { add: (t10, n6, o6) => {
      let i6 = o6?.floorId ? this.floorsById.get(o6?.floorId) : this.currentFloor, s8 = "shape-" + Vt();
      return this.renderer.addGeometryGroup(s8, t10, n6, i6.id), s8;
    }, remove: (t10) => (this.renderer.remove(t10.id), t10.id) });
    t(this, "Text3D", { label: (t10, n6, o6) => {
      if (!this.api.getMapDataInternal()?.enterpriseMode) {
        Pt.warn("Enterprise mode is not enabled, skipping label creation");
        return;
      }
      let i6 = bA(this.renderer, t10, n6, o6);
      if (i6) return { textInfo: i6, target: t10 };
    }, labelAll: (t10 = {}) => {
      if (!this.api.getMapDataInternal()?.enterpriseMode) return Pt.warn("Enterprise mode is not enabled, skipping label creation"), [];
      let n6 = this.api.getMapData();
      if (!n6) return [];
      let o6 = [];
      return n6.getByType("space").forEach((i6) => {
        if (i6.locations[0]) {
          let s8 = bA(this.renderer, i6, i6.locations[0]?.name ?? i6.name, t10);
          s8 && o6.push({ textInfo: s8, target: i6 });
        }
      }), o6;
    }, remove: (t10) => {
      if (!this.api.getMapDataInternal()?.enterpriseMode) {
        Pt.warn("Remove text label only works in enterprise mode");
        return;
      }
      return this.renderer.remove(t10), t10;
    } });
    t(this, "Labels", { all: ({ onCreate: t10, labelOptions: n6 = {} }) => {
      for (let o6 of Object.entries(this.mvf.space)) {
        let [i6, s8] = o6;
        s8 && s8.features.forEach((u8) => {
          let l6 = this.api.getMapData()?.getById("space", u8.properties.id);
          if (!l6) return;
          let c = this.styleMap[u8.properties.id]?.showImage, d = u8.properties.details?.images, h = { icon: (c && d?.[0]?.url ? { icon: d[0].url } : {}).icon, ...n6.appearance }, I = (i6 ? this.floorsById.get(i6) : this.currentFloor).layers.get(fa);
          if (u8.properties.center && l6.name !== "") {
            let E = this.renderer.addLabel2D(u8.properties.center, l6.name, { id: u8.properties.id + "-label", ...n6, appearance: h, rank: n6.rank, attachTo: ld(l6) }, Cr2.is(l6) ? l6.id : I?.containerId);
            E && t10(E.id, l6.name, l6);
          }
        });
      }
    }, add: (t10, n6, o6 = {}) => {
      let { attachTo: i6, ...s8 } = o6, u8 = Ff(t10, this.floorsById, this.api.mapObjects[0].floorsById.get("default-floor")), l6 = u8.layers.get(fa), c = this.renderer.addLabel2D(jo(t10), n6, { ...s8, occluderId: u8.occluderId, attachTo: i6 }, l6?.containerId);
      if (!c) throw new $a("label creating failed");
      return c;
    }, remove: ({ entityId: t10 }) => {
      this.renderer.remove(t10);
    }, removeAll: () => {
    } });
    t(this, "Paths", { add: (t10, n6) => {
      let o6 = n6?.animateDrawing ?? true, i6 = [], s8 = t10[0].floorId || "root", u8 = 0;
      for (let c of t10) {
        let { floorId: d = "root", latitude: f, longitude: h } = c;
        d !== s8 && (u8++, s8 = d), i6[u8] == null && i6.push({ floorId: d, coordinates: [] });
        let b = d === c.floorId ? c : new ge2({ longitude: h, latitude: f, floorId: d });
        i6[u8].coordinates.push(b);
      }
      let l6 = i6.reduce((c, { floorId: d, coordinates: f }, h) => {
        if (h !== 0) {
          let E = i6[h - 1], v6 = E.coordinates[E.coordinates.length - 1], x6 = f[0], D = jo(v6), w6 = jo(x6), S = this.renderer.addPath({ type: "FeatureCollection", features: [{ type: "Feature", properties: { parentId: E.floorId }, geometry: { type: "Point", coordinates: D } }, { type: "Feature", properties: { parentId: d }, geometry: { type: "Point", coordinates: w6 } }] }, n6, this.id);
          S && (o6 && this.renderer.setState(S.id, { completeFraction: 0 }), c.push({ ...S, coordinates: [v6, x6] }));
        }
        if (f.length < 2) return c;
        let b = this.floorsById.get(d)?.layers.get(ha)?.containerId, I = this.renderer.addPath({ type: "FeatureCollection", features: f.map((E) => ({ type: "Feature", properties: {}, geometry: { type: "Point", coordinates: jo(E) } })) }, n6, b ?? d);
        return I && (o6 && this.renderer.setState(I.id, { completeFraction: 0 }), c.push({ ...I, coordinates: f })), c;
      }, []);
      if (o6) {
        let c = [], d = this.api.getMapData();
        return l6.forEach((f) => {
          let h = Xw(f, d, this.api);
          c.push(new Ii({ fraction: 0 }).to({ fraction: 1 }, h ? n6?.drawDuration ?? 1500 : 0).onUpdate((b) => {
            this.renderer.setState(f.id, { completeFraction: b.fraction });
          }));
        }), c.forEach((f, h) => {
          h < c.length - 1 && f.chain(c[h + 1]), this.renderer.getInternalTweenGroup().add(f);
        }), c[0].start(), this.renderer.render(), this.animations.set(l6[0].id.toString(), c[0]), { paths: l6, animation: Yx(c[c.length - 1]).then(() => {
          this.animations.delete(l6[0].id.toString());
        }) };
      } else return { paths: l6, animation: Promise.resolve() };
    }, remove: (t10) => {
      t10.forEach((n6) => {
        this.cancelAnimation(n6), this.renderer.remove(n6);
      });
    } });
    v(this, Oi, { enabled: false, floorGap: "auto", updateCameraElevationOnFloorChange: true });
    this.renderer = i.core, this.api = i, this.id = t6, this.renderer.addGroupContainer(t6, {}, "root"), this.options = o ?? {}, this.mvf = n?.mvf ?? {};
    let s6 = Hw(this.mvf["styles.json"] || {});
    if (this.styleMap = s6, w(this, Oi, { enabled: false, floorGap: "auto", updateCameraElevationOnFloorChange: true, ...o?.multiFloorView }), !n) {
      this.id !== "outdoors-container" && Pt.warn(`Map (${this.id}) created with no data.`);
      let c = new N0({ id: "default-stack", externalId: "default-stack", name: "Default Stack", maps: ["default-floor"] }, this.id, this.renderer);
      this.floorStacksById.set(c.id, c), this.currentFloorStackId = c.id;
      let d = new R0(c.id, { id: "default-floor", externalId: "default-floor", name: "Default Floor", elevation: 0 }, this, u(this, Oi), o ?? {});
      this.floorsById.set(d.id, d), c.addFloor(d), this.setFloor(d.id);
      return;
    }
    let u6 = n.getMVFFeatureByType("floor-stack");
    if (u6 == null || u6.length === 0) throw new $a("MVF does not contain any Floor Stacks.");
    for (let c of u6) {
      let d = new N0(c, this.id, this.renderer, this.mvf.facade?.[c.id]);
      for (let f of d.floorIds) {
        let h = n.getMVFFeatureById("floor", f);
        if (h != null) {
          let b = new R0(d.id, h, this, u(this, Oi), o ?? {}, this.mvf, s6, n);
          this.floorsById.set(b.id, b), d.addFloor(b);
        }
      }
      if (d.floorObjects.length < 1) {
        Pt.warn(`Floor stack ${c.id} has no floors. It will not be loaded.`);
        continue;
      }
      this.floorStacksById.set(c.id, d), this.currentFloorStackId || (this.currentFloorStackId = c.id), this.floorStackAltitudeMap.set(c.id, Yw(d.floorObjects, u(this, Oi).floorGap));
    }
    for (let [c] of Object.entries(n.facadesBySpaceId)) {
      let d = n.getById("space", c);
      d && (this.outdoorFloorStacks.add(d.floor.floorStack.id), this.floorsById.get(d.floor.id)?.setVisible(true));
    }
    let l = this.mvf.enterprise?.venue.defaultMap;
    if (o?.initialFloor) {
      let c = yf(o.initialFloor);
      c && this.floorsById.has(c) ? l = c : Pt.error(`Invalid initial floor specified (${o.initialFloor}), using default behavior instead`);
    }
    l || (l = this.currentFloorStack.defaultFloor.id), this.startingFloorId = l;
  }
  get currentFloorStack() {
    let t6 = this.floorStacksById.get(this.currentFloorStackId);
    if (!t6) throw new $a(`Current floor stack with id "${this.currentFloorStackId}" not found`);
    return t6;
  }
  setFloorStack(t6, n) {
    if (this.currentFloorStackId === t6) return;
    let o = this.floorStacksById.get(t6);
    if (o == null) {
      Pt.error(`Invalid floor stack passed to setFloorStack (${t6}), the floor stack was not changed. Current floor stack is still ${this.currentFloorStack.id}.`);
      return;
    }
    if (o.floorObjects.length === 0) {
      Pt.error(`Floor stack (${t6}) has no floors. The floor stack was not changed. Current floor stack is still ${this.currentFloorStack.id}.`);
      return;
    }
    this.setFloor(o.defaultFloor.id, n);
  }
  get currentFloor() {
    let t6 = this.floorsById.get(this.currentFloorId);
    if (!t6) throw new $a(`Floor with id "${this.currentFloorId}" not found`);
    return t6;
  }
  get floors() {
    return Array.from(this.floorsById.values());
  }
  processFloorChange(t6) {
    if (this.api.manualFloorVisibility === true) return;
    let n = this.api.getMapDataInternal()?.getById("floor", t6), o = this.api.getMapDataInternal()?.getById("floor-stack", this.currentFloorStackId);
    if (n && o) if (!u(this, Oi)?.enabled || n.floorStack.id !== o?.id) for (let i of this.floorStacksById.values()) i.floorObjects.forEach((s6) => {
      s6.id !== t6 && s6.setVisible(false);
    });
    else {
      let i = aI(o.floors, n, u(this, Oi).floorGap, this.api.Navigation?.floors?.map((s6) => s6.id) || [], this.getFloorStackAltitudeData(o.id));
      if (this.api?.Outdoor?.setOpacity(i.outdoorOpacity), i.floorStates.forEach((s6) => {
        if (s6.floor) {
          let u6 = this.api.getMapData()?.getById("floor", s6.floor.id);
          u6 && this.api.updateState(u6, s6.state);
        }
      }), u(this, Oi).updateCameraElevationOnFloorChange) {
        let s6 = this.floorStackAltitudeMap.get(o.id);
        this.api.Camera.setElevation(s6.get(n.elevation)?.altitude ?? n.elevation * fs(u(this, Oi).floorGap, n.maxHeight));
      }
    }
  }
  setFloor(t6, n) {
    if (this.currentFloorId === t6) return;
    if (!this.floorsById.get(t6)) {
      Pt.error(`Invalid floor passed to setFloor (${t6}), the floor was not changed. Current floor is still ${this.currentFloor.id}`);
      return;
    }
    let i = this.currentFloorId;
    this.publish("floor-change-start", { previousFloorId: i, floorId: t6, reason: n }), this.currentFloorStack && this.processFloorChange(t6), this.currentFloorId = t6, this.currentFloorStackId = this.currentFloor.floorStackId, this.currentFloor.setVisible(true), this.updatePathLayersVisibility(), this.publish("floor-change", { reason: n, floorId: this.currentFloor.id, previousFloorId: i });
  }
  updatePathLayersVisibility() {
    let t6 = this.api.hidePathsNotOnCurrentFloor === true && !this.options.multiFloorView?.enabled;
    for (let n of this.floorsById.values()) {
      let o = n.layers.get(ha);
      if (!o) continue;
      let i = !t6 || n.id === this.currentFloor.id;
      o.setVisible(i);
    }
  }
  getFloorStackAltitudeData(t6) {
    return this.floorStackAltitudeMap.get(t6);
  }
  cancelAnimation(t6) {
    let n = this.animations.get(t6);
    n && (n.stop(), this.animations.delete(t6), this.renderer.getInternalTweenGroup().remove(n));
  }
  loadAllFloors() {
    for (let t6 of this.floorStacksById.values()) {
      t6.loadAllFloors();
      let n = this.floorStackAltitudeMap.get(t6.id);
      t6.facade?.spaces.forEach((o) => {
        let i = this.styleMap[o.spaceId];
        if (i && i.altitude >= 0) {
          let s6 = n?.get(i.altitude / 2);
          s6 && this.renderer.setState(o.spaceId, { altitude: s6.altitude, height: s6.effectiveHeight });
        }
      });
    }
  }
};
Oi = /* @__PURE__ */ new WeakMap();
function bA(e6, r6, t6, n) {
  return e6.labelText3D(r6.id, t6 ?? r6.name, { ...n, parentId: r6.floor.id });
}
$i();
var Xo;
var U0;
var j0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Xo, /* @__PURE__ */ new Map());
    v(this, U0);
    w(this, U0, r6);
  }
  get currentMap() {
    return u(this, U0).call(this);
  }
  getAll() {
    return Array.from(u(this, Xo).values()).map(({ marker: r6 }) => r6);
  }
  getById(r6) {
    return u(this, Xo).get(r6);
  }
  add(r6, t6, n) {
    let o = r6.anchorTarget;
    if (!o) throw new Error("get coordinate failed");
    let i = this.currentMap;
    if (!i) throw new Error("currentMap should exist");
    let s6 = i.Markers.add(o, t6, { ...n, rank: n?.rank || "medium", dynamicResize: n?.dynamicResize ?? true, attachTo: ld(r6) });
    if (s6 == null) throw new Error("error creating marker");
    let u6 = i.Markers.getContentEl(s6.id.toString());
    if (!u6) throw new Error("marker component should exist");
    let l = new Ca(s6.id.toString(), u6, r6);
    return u(this, Xo).set(l.id, { marker: l, entityId: s6.id.toString() }), l;
  }
  remove(r6) {
    let t6 = u(this, Xo).get(r6.id);
    t6 && (this.currentMap?.Markers.remove(t6.entityId), u(this, Xo).delete(r6.id.toString()));
  }
  removeAll() {
    let r6 = [];
    return u(this, Xo).forEach(({ marker: t6 }) => {
      this.remove(t6), r6.push(t6), u(this, Xo).delete(t6.id.toString());
    }), r6;
  }
  setPosition(r6, t6) {
    let n = t6.anchorTarget;
    if (!n) {
      Pt.error("Cannot determine coordinate from target.");
      return;
    }
    let o = this.currentMap;
    if (!o) {
      Pt.error("Cannot determine the current map.");
      return;
    }
    let i = u(this, Xo).get(r6.id);
    if (!i) {
      Pt.error(`Cannot find the Marker with id "${r6.id}".`);
      return;
    }
    o.Markers.setPosition(i.entityId, jo(n), n.floorId ?? o.currentFloorId), i.marker.updateTarget(t6);
  }
  animateTo(r6, t6, n) {
    let o = t6.anchorTarget;
    if (!o) return Pt.error("Cannot determine coordinate from target."), Promise.resolve();
    let i = this.currentMap;
    if (!i) return Pt.error("Cannot determine the current map."), Promise.resolve();
    let s6 = u(this, Xo).get(r6.id);
    return s6 ? (s6.marker.updateTarget(t6), i.Markers.animateTo(s6.entityId, jo(o), o.floorId ?? i.currentFloorId, n)) : (Pt.error(`Cannot find the Marker with id "${r6.id}".`), Promise.resolve());
  }
};
Xo = /* @__PURE__ */ new WeakMap(), U0 = /* @__PURE__ */ new WeakMap();
$i();
var Os;
var z0;
var G0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Os, /* @__PURE__ */ new Map());
    v(this, z0);
    w(this, z0, r6);
  }
  get currentMap() {
    return u(this, z0).call(this);
  }
  getById(r6) {
    return u(this, Os).get(r6);
  }
  add(r6, t6, n) {
    let o = r6.anchorTarget;
    if (!o) throw new Error("Target does not implement IAnchorable.");
    let i = this.currentMap;
    if (!i) throw new Error("currentMap should exist");
    let s6 = i.Image3D.add(jo(o), t6, { ...n, floorId: o.floorId, verticalOffset: o.verticalOffset + (n.verticalOffset ?? 0) });
    if (!s6) throw new Error("image component should exist");
    let u6 = new tc(s6.id.toString(), t6, r6);
    return u(this, Os).set(u6.id, { image: u6, entityId: s6.id.toString() }), u6;
  }
  remove(r6) {
    let t6 = u(this, Os).get(r6.id);
    t6 && (this.currentMap?.Image3D.remove(t6.entityId), u(this, Os).delete(r6.id.toString()));
  }
  removeAll() {
    let r6 = [];
    return u(this, Os).forEach(({ image: t6 }) => {
      this.remove(t6), r6.push(t6), u(this, Os).delete(t6.id.toString());
    }), r6;
  }
};
Os = /* @__PURE__ */ new WeakMap(), z0 = /* @__PURE__ */ new WeakMap();
$i();
var Da;
var H0;
var V0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Da, /* @__PURE__ */ new Map());
    v(this, H0);
    w(this, H0, r6);
  }
  get currentMap() {
    return u(this, H0).call(this);
  }
  getById(r6) {
    return u(this, Da).get(r6);
  }
  add(r6, t6, n) {
    let o = [r6], i = o.reduce((l, c) => {
      if (!c) return Pt.error("Cannot determine coordinate from options."), l;
      let d = Ff(c, this.currentMap.floorsById, this.currentMap.floorsById.get("default-floor"))?.id;
      return l.has(d) || l.set(d, []), l.get(d)?.push(c), l;
    }, /* @__PURE__ */ new Map());
    if (!o.length) throw new Error("targets should not be empty when adding a model");
    let s6 = this.currentMap;
    if (!s6) throw new Error("currentMap should exist");
    let u6 = [];
    return i.forEach((l, c) => {
      let d = Vt();
      s6.Models.add(d, l, { ...n, url: t6, floorId: c, verticalOffset: l[0].verticalOffset + (n?.verticalOffset ?? 0) }).forEach((h) => {
        let b = new nc(h.toString(), d, l[0]);
        u(this, Da).set(b.id, { model: b, entityId: h.toString(), groupId: d }), u6.push(b);
      });
    }), u6[0];
  }
  remove(r6) {
    let t6 = u(this, Da).get(r6.id);
    t6 && (this.currentMap?.Models.remove(t6.entityId, t6.groupId), u(this, Da).delete(r6.id.toString()));
  }
  removeAll() {
    let r6 = [];
    return u(this, Da).forEach(({ model: t6 }) => {
      let n = u(this, Da).get(t6.id);
      n && (r6.push(t6), this.currentMap?.Models.remove(n.entityId, n.groupId), u(this, Da).delete(t6.id.toString()));
    }), r6;
  }
};
Da = /* @__PURE__ */ new WeakMap(), H0 = /* @__PURE__ */ new WeakMap();
$i();
var Bi;
var W0;
var Z0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Bi, /* @__PURE__ */ new Map());
    v(this, W0);
    w(this, W0, r6);
  }
  get currentMap() {
    return u(this, W0).call(this);
  }
  getById(r6) {
    return u(this, Bi).get(r6)?.path;
  }
  add(r6, t6) {
    let n = this.currentMap;
    if (!n) throw new Error("currentMap should exist");
    let o = n.Paths.add(r6, t6), i = o.paths.map((u6) => u6.id.toString()), s6 = new Fi(t6?.id || Vt(), o.animation, r6, o.paths);
    for (let u6 of i) u(this, Bi).set(u6, { path: s6, entityIds: i });
    return u(this, Bi).set(s6.id, { path: s6, entityIds: i }), s6;
  }
  highlightPathSection(r6, t6, n, o) {
    let i = this.currentMap?.api.getMapData()?.mapCenter;
    if (!i) return;
    let s6 = w4([r6], t6, n, i);
    if (!s6) return;
    let u6 = o?.animationDuration ?? 1500, l = () => {
    }, c = new Promise((f) => {
      l = f;
    }), d = new Ii({ fraction: 0 }).to({ fraction: 1 }, u6).onUpdate((f) => {
      for (let h of s6) this.currentMap?.api.updateState(h.segment, { highlightCompleteFraction: f.fraction });
    }).onStart(() => {
      for (let f of s6) this.currentMap?.api.updateState(f.segment, { highlightStartFraction: f.startHighlightFraction, highlightEndFraction: f.endHighlightFraction, highlightColor: o?.color ?? "red", highlightWidthMultiplier: o?.widthMultiplier ?? 1 });
    }).onComplete(() => {
      l(), this.currentMap?.api.removeTween(d);
    });
    return this.currentMap?.api.tweenGroup().add(d), d.start(), { animation: c };
  }
  clearHighlightedPathSection(r6) {
    this.currentMap?.api.updateState(r6, { highlightCompleteFraction: 0, highlightStartFraction: 0, highlightEndFraction: 0 });
  }
  clearAllHighlightedPathSections() {
    for (let r6 of u(this, Bi).values()) this.clearHighlightedPathSection(r6.path);
  }
  remove(r6) {
    let t6 = u(this, Bi).get(r6.id);
    t6 && (this.currentMap?.Paths.remove(t6.entityIds), u(this, Bi).delete(r6.id), t6.entityIds.forEach((n) => u(this, Bi).delete(n)));
  }
  removeAll() {
    let r6 = [];
    return u(this, Bi).forEach(({ path: t6 }) => {
      this.remove(t6), r6.push(t6);
    }), r6;
  }
};
Bi = /* @__PURE__ */ new WeakMap(), W0 = /* @__PURE__ */ new WeakMap();
$i();
var Bs;
var J0;
var X0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, Bs, /* @__PURE__ */ new Map());
    v(this, J0);
    w(this, J0, r6);
  }
  get currentMap() {
    return u(this, J0).call(this);
  }
  getById(r6) {
    return u(this, Bs).get(r6);
  }
  add(r6, t6, n) {
    let o = this.currentMap;
    if (!o) throw new Error("currentMap should exist");
    let i = o.Shapes.add(r6, t6 || {}, { floorId: n?.id }), s6 = new ws(i);
    return u(this, Bs).set(s6.id, s6), s6;
  }
  remove(r6) {
    u(this, Bs).get(r6.id) && (this.currentMap?.Shapes.remove(r6), u(this, Bs).delete(r6.id.toString()));
  }
  removeAll() {
    let r6 = [];
    return u(this, Bs).forEach((t6) => {
      this.remove(t6), r6.push(t6.id), u(this, Bs).delete(t6.id.toString());
    }), r6;
  }
};
Bs = /* @__PURE__ */ new WeakMap(), J0 = /* @__PURE__ */ new WeakMap();
$i();
var K0;
var Y0 = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, K0);
    w(this, K0, r6);
  }
  get currentMap() {
    return u(this, K0).call(this);
  }
  setFromStyleCollection(r6) {
    for (let t6 in r6) for (let n of this.currentMap?.floors || []) {
      if (r6[t6] == null || !n.layers.has(or)) continue;
      let o = n.layers.get(or);
      if (o?.layers.has(t6) && "color" in r6[t6]) {
        let u6 = o.layers.get(t6);
        u6 && this.currentMap?.renderer.setState(u6, { color: r6[t6].color });
      }
      if (o && t6 === lu && !(ma in r6)) {
        let u6 = o.layers.get(ma);
        u6 && "color" in r6[t6] && this.currentMap?.renderer.setState(u6, { color: r6[t6].color });
      }
      if (!n.layers.has(El2)) continue;
      let i = n.layers.get(El2), s6 = n.facadesByStyleId.get(t6);
      if (s6 && s6.length > 0) for (let u6 of s6) {
        let l = i.layers.get(`${u6}-${t6}`);
        l && "color" in r6[t6] && this.currentMap?.renderer.setState(l, { color: r6[t6].color });
      }
    }
  }
};
K0 = /* @__PURE__ */ new WeakMap();
$i();
var sI = { opacity: 1 };
var pn;
var q0;
var Q0;
var ku;
var Ps;
var lc;
var uI;
var vA;
var Wd = class {
  constructor(r6, t6) {
    v(this, lc);
    v(this, pn);
    v(this, q0, []);
    v(this, Q0, { opacity: "initial" });
    v(this, ku, { opacity: /* @__PURE__ */ new Map() });
    v(this, Ps, /* @__PURE__ */ new Set());
    w(this, pn, r6), w(this, q0, t6 || []);
    let n = u(this, pn).map;
    n && n.on("idle", () => {
      u(this, ku).opacity.size || x(this, lc, uI).call(this, n);
    });
  }
  setStyle(r6) {
    if (u(this, pn).map) {
      u(this, pn).map?.setStyle(r6), u(this, Ps).size && (u(this, Ps).clear(), this.hide()), x(this, lc, vA).call(this), x(this, lc, uI).call(this, u(this, pn).map), this.setOpacity(u(this, Q0).opacity), u(this, pn).map?.moveLayer(tM);
      for (let [t6, n, o] of u(this, q0) || []) u(this, pn).hideOutdoorLayersIntersectingPolygons(t6, n, o);
    }
  }
  get map() {
    return u(this, pn).map;
  }
  get enabled() {
    return !!u(this, pn).map;
  }
  get visible() {
    return u(this, Ps).size === 0;
  }
  show() {
    let r6 = u(this, pn).map;
    if (!r6) return;
    let t6 = r6.getStyle().layers;
    t6 && (t6.forEach((n) => {
      u(this, Ps).has(n.id) && r6.setLayoutProperty(n.id, "visibility", "visible");
    }), u(this, Ps).clear());
  }
  hide(r6 = []) {
    let t6 = u(this, pn).map;
    if (!t6) return;
    let n = t6.getStyle().layers;
    n && n.forEach((o) => {
      let i = t6.getLayoutProperty(o.id, "visibility");
      !r6.includes(o.id) && i !== "none" && (t6.setLayoutProperty(o.id, "visibility", "none"), u(this, Ps).add(o.id));
    });
  }
  setOpacity(r6, t6 = []) {
    let n = u(this, pn).map;
    if (!n) return;
    let o = u(this, pn).map?.getStyle?.()?.layers;
    o && n.once("idle", () => {
      o.forEach((i) => {
        let s6 = n.getLayoutProperty(i.id, "visibility");
        if (!t6.includes(i.id) && s6 !== "none") try {
          let u6 = u(this, ku).opacity.get(i.id);
          u6 !== void 0 && (i.id === "background" || (i.type === "symbol" ? (n.setPaintProperty(i.id, "icon-opacity", r6 === "initial" ? u6[0] : r6), n.setPaintProperty(i.id, "text-opacity", r6 === "initial" ? u6[1] : r6)) : n.setPaintProperty(i.id, `${i.type}-opacity`, r6 === "initial" ? u6[0] : r6)), u(this, Q0).opacity = r6);
        } catch (u6) {
          Pt.warn("Error setting opacity:", u6);
        }
      });
    });
  }
};
pn = /* @__PURE__ */ new WeakMap(), q0 = /* @__PURE__ */ new WeakMap(), Q0 = /* @__PURE__ */ new WeakMap(), ku = /* @__PURE__ */ new WeakMap(), Ps = /* @__PURE__ */ new WeakMap(), lc = /* @__PURE__ */ new WeakSet(), uI = function(r6) {
  let t6 = r6.getStyle().layers;
  t6 && t6.forEach((n) => {
    r6.getLayoutProperty(n.id, "visibility") !== "none" && (n.id === "background" || (n.type === "symbol" ? u(this, ku).opacity.set(n.id, [r6.getPaintProperty(n.id, "icon-opacity") ?? sI.opacity, r6.getPaintProperty(n.id, "text-opacity") ?? sI.opacity]) : u(this, ku).opacity.set(n.id, [r6.getPaintProperty(n.id, `${n.type}-opacity`) ?? sI.opacity, void 0])));
  });
}, vA = function() {
  Object.values(u(this, ku)).forEach((r6) => r6.clear());
};
$i();
function kH() {
  IV(false);
}
var ks;
var _s2;
var _u;
var eh = class {
  constructor({ currentMapGetter: r6 }) {
    v(this, ks);
    v(this, _s2, /* @__PURE__ */ new Map());
    v(this, _u, /* @__PURE__ */ new Map());
    w(this, ks, r6);
  }
  labelAll(r6 = {}) {
    let t6 = [], n = /* @__PURE__ */ new Set();
    return u(this, ks).call(this)?.Text3D.labelAll(r6)?.forEach(({ textInfo: o, target: i }) => {
      let s6 = o.id.toString(), u6 = u(this, _u).get(s6);
      if (u6) {
        n.has(s6) || t6.push(u6.text3DView), n.add(s6);
        return;
      }
      n.add(s6);
      let l = new Ou(s6, i);
      u(this, _s2).set(l.id, { targetId: i.id, text3d: s6, text3DView: l }), u(this, _u).set(s6, { text3DView: l }), t6.push(l);
    }), t6;
  }
  label(r6, t6, n = {}) {
    if (u(this, ks).call(this)) if (Cr2.is(r6)) {
      let i = u(this, ks).call(this)?.Text3D.label(r6, t6, n);
      if (!i) return;
      let s6 = i.textInfo.id.toString(), u6 = u(this, _u).get(s6);
      if (u6) return u6.text3DView;
      let l = new Ou(s6, i.target);
      return u(this, _s2).set(l.id, { targetId: i.target.id, text3d: s6, text3DView: l }), u(this, _u).set(s6, { text3DView: l }), l;
    } else throw new Error("Non-space target is not supported");
  }
  remove(r6) {
    let t6 = typeof r6 == "string" ? r6 : r6.id, n = u(this, _s2).get(t6);
    n && (u(this, ks).call(this)?.Text3D.remove(n.text3d), u(this, _s2).delete(t6), u(this, _u).delete(n.text3d));
  }
  removeAll() {
    u(this, _s2).forEach((r6) => {
      u(this, ks).call(this)?.Text3D.remove(r6.text3d);
    }), u(this, _s2).clear();
  }
};
ks = /* @__PURE__ */ new WeakMap(), _s2 = /* @__PURE__ */ new WeakMap(), _u = /* @__PURE__ */ new WeakMap();
$i();
$i();
$i();
function IA(e6) {
  try {
    let r6 = e6.shape;
    if ("type" in r6) {
      let t6 = r6.type;
      if (t6 instanceof external_exports.ZodOptional && (t6 = t6._def.innerType), "value" in t6) return String(t6.value);
      if (t6 instanceof external_exports.ZodDefault && "value" in t6._def.innerType) return String(t6._def.innerType.value);
    }
    return "unknown";
  } catch {
    return "unknown";
  }
}
function EA(e6) {
  if (e6.success) return {};
  let r6 = {};
  for (let t6 of e6.error.issues) if (t6.path.length > 0) {
    let n = String(t6.path[0]);
    r6[n] || (r6[n] = []), r6[n].push(t6.message);
  }
  return r6;
}
function CA(e6, r6) {
  let t6 = Object.entries(e6);
  if (t6.length > 0) {
    let n = t6.map(([o, i]) => `${o}: ${i.join(", ")}`).join("; ");
    Pt.warn(`${t6.length} invalid field(s) in ${r6 ?? "unknown"} state: [${n}]`);
  }
}
function wt(e6, r6, t6) {
  if (r6 == null || typeof r6 != "object") return {};
  let n = e6.safeParse(r6);
  if (n.success) {
    let s6 = {};
    for (let u6 of Object.keys(r6)) u6 in n.data && (s6[u6] = n.data[u6]);
    return s6;
  }
  let o = EA(n);
  t6?.warn && CA(o, IA(e6));
  let i = {};
  for (let s6 of Object.keys(r6)) !(s6 in o) && s6 in e6.shape && (i[s6] = r6[s6]);
  return i;
}
function Ur(e6, r6, t6) {
  let n = e6.safeParse(r6);
  if (n.success) return n.data;
  if (t6?.warn === true) {
    let o = EA(n);
    CA(o, IA(e6));
  }
  return r6;
}
var SA = "doors";
var lI = zod_default.object({ type: zod_default.literal(SA).default(SA), color: zod_default.string().default("#ffffff"), topColor: zod_default.string().optional(), texture: zod_default.object({ url: zod_default.string().optional() }).optional(), topTexture: zod_default.object({ url: zod_default.string().optional() }).optional(), visible: zod_default.boolean().default(false), opacity: zod_default.number().default(1) });
var O4 = lI.partial();
var sPe = zod_default.strictObject(lI.shape);
function DA(e6) {
  let { color: r6, topColor: t6, texture: n, topTexture: o, visible: i, opacity: s6 } = e6;
  return Ur(lI, { visible: i, color: r6, topColor: t6, opacity: s6, texture: n ? { url: n } : void 0, topTexture: o ? { url: o } : void 0 });
}
function B4(e6, r6) {
  let t6 = {};
  return r6 == null || (e6.color && (e6.color === "initial" ? t6.color = r6.initialColor : t6.color = e6.color), e6.topColor && (e6.topColor === "initial" ? t6.topColor = r6.initialTopColor : t6.topColor = e6.topColor), e6.visible !== void 0 && (t6.visible = e6.visible), e6.texture?.url !== void 0 && (t6.texture = e6.texture.url), e6.topTexture?.url !== void 0 && (t6.topTexture = e6.topTexture.url), e6.opacity !== void 0 && (t6.opacity = e6.opacity)), t6;
}
$i();
var TA = "facade";
var cI = external_exports.object({ type: external_exports.literal(TA).default(TA), opacity: external_exports.number().default(1), visible: external_exports.boolean().default(true) });
var wA = cI.partial();
var dPe = external_exports.strictObject(cI.shape);
function FA(e6) {
  return Ur(cI, { opacity: e6.opacity, visible: e6.visible });
}
$i();
var Ta = "floor";
var MA = `${Ta}.footprint`;
var AA = `${Ta}.geometry`;
var OA = `${Ta}.labels`;
var BA = `${Ta}.markers`;
var PA = `${Ta}.images`;
var kA = `${Ta}.occlusion`;
var _A = `${Ta}.paths`;
var LA = `${Ta}.areas`;
var P4 = external_exports.object({ type: external_exports.literal(MA).default(MA), altitude: external_exports.number().default(0), visible: external_exports.boolean().default(false), height: external_exports.number().default(0), opacity: external_exports.number().default(1), side: external_exports.enum(["double", "front", "back"]), color: external_exports.string().default("#ffffff") });
var RA = P4.partial();
var k4 = external_exports.object({ type: external_exports.literal(AA).default(AA), opacity: external_exports.number().default(1), visible: external_exports.boolean().default(true) });
var NA = k4.partial();
var _4 = external_exports.object({ type: external_exports.literal(OA).default(OA), enabled: external_exports.boolean().default(true) });
var $A = _4.partial();
var L4 = external_exports.object({ type: external_exports.literal(BA).default(BA), enabled: external_exports.boolean().default(true) });
var jA = L4.partial();
var R4 = external_exports.object({ type: external_exports.literal(PA).default(PA), visible: external_exports.boolean().default(true) });
var UA = R4.partial();
var N4 = external_exports.object({ type: external_exports.literal(kA).default(kA), enabled: external_exports.boolean().default(true) });
var GA = N4.partial();
var $42 = external_exports.object({ type: external_exports.literal(_A).default(_A), visible: external_exports.boolean().default(true) });
var zA = $42.partial();
var j4 = external_exports.object({ type: external_exports.literal(Ta).default(Ta), visible: external_exports.boolean().default(false), altitude: external_exports.number().default(0) });
var U4 = external_exports.object({ type: external_exports.literal(LA).default(LA), visible: external_exports.boolean().default(true) });
var VA = U4.partial();
var _H = external_exports.object({ ...j4.shape, geometry: k4, labels: _4, markers: L4, images: R4, footprint: P4, occlusion: N4, paths: $42, areas: U4 });
var HA = j4.partial();
var vPe = external_exports.object({ ...j4.shape, geometry: k4.partial(), labels: _4.partial(), markers: L4.partial(), images: R4.partial(), footprint: P4.partial(), occlusion: N4.partial(), paths: $42.partial(), areas: U4.partial() }).partial();
var xPe = external_exports.strictObject({ ...j4.shape, geometry: external_exports.strictObject(k4.shape), labels: external_exports.strictObject(_4.shape), markers: external_exports.strictObject(L4.shape), images: external_exports.strictObject(R4.shape), footprint: external_exports.strictObject(P4.shape), occlusion: external_exports.strictObject(N4.shape), paths: external_exports.strictObject($42.shape), areas: external_exports.strictObject(U4.shape) });
function ZA(e6, r6, t6) {
  if (!r6) {
    Pt.error("Floor is not defined. Cannot get floor state.");
    return;
  }
  let n = r6.layers.get(or), o = n ? t6?.getState(n.containerId) : void 0, i = r6.layers.get(fa), s6 = r6.layers.get(yi), u6 = r6.layers.get(Zp), l = u6 ? t6?.getState(u6.containerId) : void 0, c = r6.layers.get(xl2), d = c ? t6?.getState(c.containerId) : void 0, f = r6.layers.get(Wp), h = f ? t6?.getState(f.containerId) : void 0, b = r6.layers.get(ha), I = b ? t6?.getState(b.containerId) : void 0, E = r6.layers.get(Il), v6 = E ? t6?.getState(E.containerId) : void 0;
  return Ur(_H, { geometry: { opacity: o?.opacity, visible: o?.visible }, labels: { enabled: i?.visible }, markers: { enabled: s6?.visible }, footprint: { altitude: l?.altitude, visible: l?.visible, height: l?.height, opacity: l?.opacity, side: l?.side, color: l?.color }, images: { visible: h?.visible }, occlusion: { enabled: d?.visible }, paths: { visible: I?.visible }, areas: { visible: v6?.visible }, visible: e6.visible, altitude: e6.altitude });
}
$i();
var WA = "geometry";
var pI = external_exports.object({ type: external_exports.literal(WA).default(WA), visible: external_exports.boolean().default(true), color: external_exports.union([external_exports.string(), external_exports.literal("initial")]).default("#ffffff"), topColor: external_exports.union([external_exports.string(), external_exports.literal("initial")]).optional(), hoverColor: external_exports.union([external_exports.string(), external_exports.literal("initial")]).optional(), interactive: external_exports.boolean().default(false), opacity: external_exports.number().default(1), height: external_exports.number().default(0), altitude: external_exports.number().default(0), texture: external_exports.object({ url: external_exports.string() }).optional(), topTexture: external_exports.object({ url: external_exports.string() }).optional(), flipImageToFaceCamera: external_exports.boolean().default(false), enableImageCollisions: external_exports.boolean().default(false), borderVisible: external_exports.boolean().default(false), borderColor: external_exports.string().optional(), borderWidth: external_exports.number().optional() });
var dI = pI.partial();
var DPe = external_exports.strictObject(pI.shape);
function XA(e6) {
  let { altitude: r6, interactive: t6, hoverColor: n, color: o, visible: i, opacity: s6, height: u6, texture: l, topTexture: c, flipImageToFaceCamera: d, enableImageCollisions: f, topColor: h, borderVisible: b, borderColor: I, borderWidth: E } = e6;
  return Ur(pI, { interactive: t6, hoverColor: n, color: o, visible: i, opacity: s6, height: u6, texture: l ? { url: e6.texture } : void 0, topTexture: c ? { url: c } : void 0, flipImageToFaceCamera: d, enableImageCollisions: f, topColor: h, altitude: r6, borderVisible: b, borderColor: I, borderWidth: E });
}
function JA(e6, r6) {
  let t6 = {};
  return r6 == null || (e6.color && (e6.color === "initial" ? t6.color = r6.initialColor : t6.color = e6.color), e6.topColor && (e6.topColor === "initial" ? t6.topColor = r6.initialTopColor : t6.topColor = e6.topColor), e6.visible !== void 0 && (t6.visible = e6.visible), e6.texture?.url !== void 0 && (t6.texture = e6.texture.url), e6.topTexture?.url !== void 0 && (t6.topTexture = e6.topTexture.url), e6.hoverColor !== void 0 && (t6.hoverColor = e6.hoverColor), e6.interactive !== void 0 && (t6.interactive = e6.interactive), e6.height !== void 0 && (t6.height = e6.height), e6.opacity !== void 0 && (t6.opacity = e6.opacity), e6.flipImageToFaceCamera !== void 0 && (t6.flipImageToFaceCamera = e6.flipImageToFaceCamera), e6.enableImageCollisions !== void 0 && (t6.enableImageCollisions = e6.enableImageCollisions), e6.altitude !== void 0 && (t6.altitude = e6.altitude), e6.borderVisible !== void 0 && (t6.borderVisible = e6.borderVisible), e6.borderColor !== void 0 && (t6.borderColor = e6.borderColor), e6.borderWidth !== void 0 && (t6.borderWidth = e6.borderWidth)), t6;
}
$i();
var mI = "label";
var LH = zod_default.object({ type: zod_default.literal(mI).default(mI), text: zod_default.string(), rank: zod_default.custom((e6) => ZS.safeParse(e6).success || e6 === "initial"), appearance: zod_default.custom((e6) => oC.safeParse(e6).success), interactive: zod_default.boolean().default(false), enabled: zod_default.boolean().default(true), textPlacement: zod_default.union([zod_default.enum(iC), zod_default.array(zod_default.enum(iC))]).default(Dg) });
var YA = LH.partial();
function KA(e6) {
  let { text: r6, enabled: t6, options: n } = e6;
  return { type: mI, text: r6 ?? "", appearance: sC(n?.appearance ?? {}), rank: n?.rank ?? "medium", enabled: t6 ?? true, interactive: n?.interactive ?? false, textPlacement: n?.textPlacement ?? Dg };
}
function qA(e6, r6) {
  let t6 = { options: {} };
  if (!t6.options) throw new Error("options should exist");
  return e6.text && (t6.text = e6.text), e6.appearance && (t6.options.appearance = e6.appearance), e6.textPlacement && (t6.options.textPlacement = e6.textPlacement), e6.rank != null && (e6.rank === "initial" ? t6.options.rank = r6.initialRank || 2 : t6.options.rank = e6.rank), e6.enabled !== void 0 && (t6.enabled = e6.enabled), e6.interactive !== void 0 && (t6.options.interactive = e6.interactive), e6.enabled !== void 0 && (t6.enabled = e6.enabled), t6;
}
$i();
var fI = "marker";
var RH = zod_default.object({ type: zod_default.literal(fI).default(fI), rank: zod_default.custom((e6) => ZS.safeParse(e6).success || e6 === "initial"), placement: zod_default.union([zod_default.enum(Xg), zod_default.array(zod_default.enum(Xg))]).optional(), interactive: zod_default.union([zod_default.boolean(), zod_default.literal("pointer-events-auto")]).default(false), dynamicResize: zod_default.boolean().default(true), enabled: zod_default.boolean().default(true), zIndex: zod_default.number().optional(), lowPriorityPin: zod_default.object({ enabled: zod_default.boolean().optional(), size: zod_default.number().positive().optional(), color: zod_default.string().optional() }).optional(), element: zod_default.custom((e6) => e6 instanceof HTMLElement, { error: "Must be an HTMLElement instance" }), contentHTML: zod_default.string() });
var QA = RH.omit({ element: true }).partial();
function eO(e6, r6) {
  let t6 = r6?.target ? r6.target.anchorTarget : void 0, { enabled: n, placement: o, element: i, dynamicResize: s6, contentHTML: u6, options: l, position: c, parent: d } = e6, f = typeof d == "object" ? d.id : d;
  return t6 == null && (t6 = new ge2({ latitude: c?.[1] ?? 0, longitude: c?.[0] ?? 0, floorId: f?.toString() })), { type: fI, rank: l?.rank ?? "medium", interactive: l?.interactive ?? false, enabled: n ?? true, element: i, placement: o ?? [], zIndex: l?.zIndex, dynamicResize: s6 ?? true, lowPriorityPin: l?.lowPriorityPin, contentHTML: u6 ?? "" };
}
function tO(e6, r6) {
  let t6 = {};
  return t6.options = {}, e6.rank != null && (e6.rank === "initial" ? t6.options.rank = r6.initialRank || 2 : t6.options.rank = e6.rank), e6.dynamicResize != null && (t6.options.dynamicResize = e6.dynamicResize), e6.enabled != null && (t6.enabled = e6.enabled), e6.interactive != null && (t6.options.interactive = e6.interactive), e6.enabled !== null && (t6.enabled = e6.enabled), e6.contentHTML !== void 0 && (t6.contentHTML = e6.contentHTML), e6.placement != null && (t6.placement = e6.placement), t6;
}
$i();
var rO = "path";
var G4 = { color: "#4b90e2", width: 1, completeFraction: 0, visible: true, verticalOffset: 0.1 };
var hI = zod_default.object({ type: zod_default.literal(rO).default(rO), color: zod_default.string().default(G4.color), width: zod_default.union([zod_default.number(), zod_default.any()]), completeFraction: zod_default.number().default(G4.completeFraction), visible: zod_default.boolean().default(G4.visible), verticalOffset: zod_default.number().default(G4.verticalOffset), highlightStartFraction: zod_default.number().default(0), highlightEndFraction: zod_default.number().default(0), highlightColor: zod_default.string().default("red"), highlightWidthMultiplier: zod_default.number().default(1.1), highlightCompleteFraction: zod_default.number().default(1) });
var gI = hI.partial();
var UPe = zod_default.strictObject(hI.shape);
function nO(e6) {
  let { color: r6, visible: t6, width: n, verticalOffset: o, completeFraction: i, highlightStartFraction: s6, highlightEndFraction: u6, highlightColor: l, highlightWidthMultiplier: c, highlightCompleteFraction: d } = e6;
  return Ur(hI, { color: r6, visible: t6, width: n, verticalOffset: o, completeFraction: i, highlightStartFraction: s6, highlightEndFraction: u6, highlightColor: l, highlightWidthMultiplier: c, highlightCompleteFraction: d });
}
$i();
var oO = "shape";
var yI = external_exports.object({ type: external_exports.literal(oO).default(oO), visible: external_exports.boolean().default(true), altitude: external_exports.number().default(0), color: external_exports.string().default("#ffffff"), height: external_exports.number().default(0), opacity: external_exports.number().default(1), interactive: external_exports.boolean().default(false), bevel: external_exports.object({ enabled: external_exports.boolean().optional(), thickness: external_exports.number().optional(), size: external_exports.number().optional(), offset: external_exports.number().optional(), segments: external_exports.number().optional() }).optional() });
var bI = yI.partial();
var WPe = external_exports.strictObject(yI.shape);
function iO(e6) {
  let { altitude: r6, visible: t6, color: n, opacity: o, interactive: i, height: s6, children: u6, bevel: l } = e6;
  if (u6 == null || u6.length < 1) {
    Pt.error(`Expected at least one child for Shape (${e6.id}). Cannot get shape state.`);
    return;
  }
  return Ur(yI, { altitude: r6, visible: t6, color: n, height: s6, opacity: o, interactive: i, bevel: l });
}
function aO(e6) {
  let r6 = wt(bI, e6, { warn: true }), t6 = {};
  if (r6.visible !== void 0 && (t6.visible = r6.visible), r6.color !== void 0 && (t6.color = r6.color), r6.opacity !== void 0 && (t6.opacity = r6.opacity), r6.altitude !== void 0 && (t6.altitude = r6.altitude), r6.height !== void 0 && (t6.height = r6.height), r6.interactive !== void 0 && (t6.interactive = r6.interactive), r6.bevel !== void 0) {
    let n = { enabled: r6.bevel.enabled || false, thickness: r6.bevel.thickness, size: r6.bevel.size, offset: r6.bevel.offset, segments: r6.bevel.segments };
    t6.bevel = n;
  }
  return t6;
}
$i();
var sO = "text3d";
var uO = zod_default.object({ type: zod_default.literal(sO).default(sO), position: zod_default.custom((e6) => e6 instanceof ge2, { error: "Must be a Coordinate instance" }) });
var lO = EV.extend({ ...uO.shape });
var cO = JC.extend({ ...uO.shape }).partial();
var eke = zod_default.strictObject(lO.shape);
function pO(e6) {
  let { position: r6, visible: t6, color: n, flipToFaceCamera: o, font: i, fontSize: s6, outlineColor: u6, outlineOpacity: l, outlineBlur: c, outlineWidth: d, outlineOffsetX: f, outlineOffsetY: h, strokeWidth: b, strokeOpacity: I, strokeColor: E, fillOpacity: v6, hoverColor: x6 } = e6;
  return Ur(lO, { position: new ge2({ latitude: r6?.[1] ?? 0, longitude: r6?.[0] ?? 0 }), visible: t6, color: n, flipToFaceCamera: o, font: i, fontSize: s6, outlineColor: u6, outlineOpacity: l, outlineBlur: c, outlineWidth: d, outlineOffsetX: f, outlineOffsetY: h, strokeWidth: b, strokeOpacity: I, strokeColor: E, fillOpacity: v6, hoverColor: x6 });
}
$i();
var dO = "walls";
var vI = zod_default.object({ type: zod_default.literal(dO).default(dO), color: zod_default.string().default("#ffffff"), topColor: zod_default.string().optional(), texture: zod_default.object({ url: zod_default.string() }).or(zod_default.undefined()), topTexture: zod_default.object({ url: zod_default.string() }).or(zod_default.undefined()), visible: zod_default.boolean().default(true), height: zod_default.number().default(0), opacity: zod_default.number().default(1) });
var xI = vI.partial();
var ike = zod_default.strictObject(vI.shape);
function mO(e6) {
  let { color: r6, topColor: t6, texture: n, topTexture: o, visible: i, height: s6, opacity: u6 } = e6;
  return Ur(vI, { visible: i, color: r6, topColor: t6, texture: n ? { url: n } : void 0, topTexture: o ? { url: o } : void 0, height: s6, opacity: u6 });
}
function II(e6, r6) {
  let t6 = {};
  return r6 == null || (e6.color && (e6.color === "initial" ? t6.color = r6.initialColor : t6.color = e6.color), e6.topColor && (e6.topColor === "initial" ? t6.topColor = r6.initialTopColor : t6.topColor = e6.topColor), e6.visible !== void 0 && (t6.visible = e6.visible), e6.texture?.url !== void 0 && (t6.texture = e6.texture.url), e6.topTexture?.url !== void 0 && (t6.topTexture = e6.topTexture.url), e6.height !== void 0 && (t6.height = e6.height), e6.opacity !== void 0 && (t6.opacity = e6.opacity)), t6;
}
$i();
var EI = "image3d";
var NH = external_exports.object({ type: external_exports.literal(EI).default(EI), visible: external_exports.boolean().default(true), opacity: external_exports.number().min(0).max(1).default(1), position: external_exports.custom((e6) => e6 instanceof ge2, { error: "Must be a Coordinate instance" }), width: external_exports.number().default(1), height: external_exports.number().default(1), rotation: external_exports.number().default(0), verticalOffset: external_exports.number().default(0), flipImagesToFaceCamera: external_exports.boolean().default(false) });
var fO = NH.partial();
function hO(e6) {
  let { position: r6 } = e6;
  return { type: EI, visible: e6.visible ?? true, opacity: e6.opacity ?? 1, position: new ge2({ latitude: r6?.[1] ?? 0, longitude: r6?.[0] ?? 0, verticalOffset: r6?.[2] }), width: e6.width ?? 1, height: e6.height ?? 1, rotation: e6.rotation ?? 0, verticalOffset: e6.verticalOffset ?? 0, flipImagesToFaceCamera: e6.flipImageToFaceCamera ?? false };
}
$i();
var gO = "model";
var CI = f2.extend({ type: external_exports.literal(gO).default(gO), color: external_exports.string().optional(), position: external_exports.custom((e6) => ge2.is(e6), { error: "Expected a Coordinate" }), visible: external_exports.boolean().default(true), rotation: external_exports.tuple([external_exports.number(), external_exports.number(), external_exports.number()]).default([0, 0, 0]), scale: external_exports.tuple([external_exports.number(), external_exports.number(), external_exports.number()]).default([1, 1, 1]), verticalOffset: external_exports.number().default(0), opacity: external_exports.number().default(1), material: external_exports.record(external_exports.string(), h2).optional(), interactive: external_exports.boolean().default(false), clippingPlaneZOffset: external_exports.number().default(1 / 0), clippingPlaneTopColor: external_exports.string().default("#E67B5B"), clippingPlaneTopVisible: external_exports.boolean().default(true) });
var yO = CI.extend({ scale: external_exports.union([external_exports.number(), external_exports.tuple([external_exports.number(), external_exports.number(), external_exports.number()])]), rotation: external_exports.union([external_exports.number(), external_exports.tuple([external_exports.number(), external_exports.number(), external_exports.number()])]) }).partial();
var gke = external_exports.strictObject(CI.shape);
function bO(e6) {
  let { color: r6, position: t6, rotation: n, scale: o, visible: i, interactive: s6, opacity: u6, material: l, verticalOffset: c, parent: d, clippingPlaneZOffset: f, clippingPlaneTopVisible: h } = e6, b = typeof d == "object" ? d?.id?.toString() : d?.toString();
  return Ur(CI, { color: r6, position: new ge2({ latitude: t6?.[1] ?? 0, longitude: t6?.[0] ?? 0, verticalOffset: t6?.[2], floorId: b }), rotation: n, scale: o, visible: i, interactive: s6, opacity: u6, material: l, verticalOffset: c, clippingPlaneZOffset: f, clippingPlaneTopVisible: h });
}
$i();
$i();
function vO(e6, r6) {
  [...e6.getByType("space"), ...e6.getByType("object")].forEach((t6) => {
    t6.name == null || t6.name === "" || r6.updateState(t6, { interactive: true });
  });
}
$i();
$i();
$i();
var { entries: MO, setPrototypeOf: xO, isFrozen: $H, getPrototypeOf: jH, getOwnPropertyDescriptor: UH } = Object;
var { freeze: Fn, seal: Jo2, create: AO } = Object;
var { apply: MI, construct: AI } = typeof Reflect < "u" && Reflect;
Fn || (Fn = function(r6) {
  return r6;
});
Jo2 || (Jo2 = function(r6) {
  return r6;
});
MI || (MI = function(r6, t6, n) {
  return r6.apply(t6, n);
});
AI || (AI = function(r6, t6) {
  return new r6(...t6);
});
var V4 = Mn2(Array.prototype.forEach);
var GH = Mn2(Array.prototype.lastIndexOf);
var IO = Mn2(Array.prototype.pop);
var rh = Mn2(Array.prototype.push);
var zH = Mn2(Array.prototype.splice);
var Z4 = Mn2(String.prototype.toLowerCase);
var SI = Mn2(String.prototype.toString);
var EO = Mn2(String.prototype.match);
var nh = Mn2(String.prototype.replace);
var VH = Mn2(String.prototype.indexOf);
var HH = Mn2(String.prototype.trim);
var _i = Mn2(Object.prototype.hasOwnProperty);
var wn = Mn2(RegExp.prototype.test);
var oh = ZH(TypeError);
function Mn2(e6) {
  return function(r6) {
    r6 instanceof RegExp && (r6.lastIndex = 0);
    for (var t6 = arguments.length, n = new Array(t6 > 1 ? t6 - 1 : 0), o = 1; o < t6; o++) n[o - 1] = arguments[o];
    return MI(e6, r6, n);
  };
}
function ZH(e6) {
  return function() {
    for (var r6 = arguments.length, t6 = new Array(r6), n = 0; n < r6; n++) t6[n] = arguments[n];
    return AI(e6, t6);
  };
}
function Ge(e6, r6) {
  let t6 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : Z4;
  xO && xO(e6, null);
  let n = r6.length;
  for (; n--; ) {
    let o = r6[n];
    if (typeof o == "string") {
      let i = t6(o);
      i !== o && ($H(r6) || (r6[n] = i), o = i);
    }
    e6[o] = true;
  }
  return e6;
}
function WH(e6) {
  for (let r6 = 0; r6 < e6.length; r6++) _i(e6, r6) || (e6[r6] = null);
  return e6;
}
function Ls2(e6) {
  let r6 = AO(null);
  for (let [t6, n] of MO(e6)) _i(e6, t6) && (Array.isArray(n) ? r6[t6] = WH(n) : n && typeof n == "object" && n.constructor === Object ? r6[t6] = Ls2(n) : r6[t6] = n);
  return r6;
}
function ih(e6, r6) {
  for (; e6 !== null; ) {
    let n = UH(e6, r6);
    if (n) {
      if (n.get) return Mn2(n.get);
      if (typeof n.value == "function") return Mn2(n.value);
    }
    e6 = jH(e6);
  }
  function t6() {
    return null;
  }
  return t6;
}
var CO = Fn(["a", "abbr", "acronym", "address", "area", "article", "aside", "audio", "b", "bdi", "bdo", "big", "blink", "blockquote", "body", "br", "button", "canvas", "caption", "center", "cite", "code", "col", "colgroup", "content", "data", "datalist", "dd", "decorator", "del", "details", "dfn", "dialog", "dir", "div", "dl", "dt", "element", "em", "fieldset", "figcaption", "figure", "font", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hgroup", "hr", "html", "i", "img", "input", "ins", "kbd", "label", "legend", "li", "main", "map", "mark", "marquee", "menu", "menuitem", "meter", "nav", "nobr", "ol", "optgroup", "option", "output", "p", "picture", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "section", "select", "shadow", "small", "source", "spacer", "span", "strike", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "template", "textarea", "tfoot", "th", "thead", "time", "tr", "track", "tt", "u", "ul", "var", "video", "wbr"]);
var DI = Fn(["svg", "a", "altglyph", "altglyphdef", "altglyphitem", "animatecolor", "animatemotion", "animatetransform", "circle", "clippath", "defs", "desc", "ellipse", "filter", "font", "g", "glyph", "glyphref", "hkern", "image", "line", "lineargradient", "marker", "mask", "metadata", "mpath", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "style", "switch", "symbol", "text", "textpath", "title", "tref", "tspan", "view", "vkern"]);
var TI = Fn(["feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feDistantLight", "feDropShadow", "feFlood", "feFuncA", "feFuncB", "feFuncG", "feFuncR", "feGaussianBlur", "feImage", "feMerge", "feMergeNode", "feMorphology", "feOffset", "fePointLight", "feSpecularLighting", "feSpotLight", "feTile", "feTurbulence"]);
var XH = Fn(["animate", "color-profile", "cursor", "discard", "font-face", "font-face-format", "font-face-name", "font-face-src", "font-face-uri", "foreignobject", "hatch", "hatchpath", "mesh", "meshgradient", "meshpatch", "meshrow", "missing-glyph", "script", "set", "solidcolor", "unknown", "use"]);
var wI = Fn(["math", "menclose", "merror", "mfenced", "mfrac", "mglyph", "mi", "mlabeledtr", "mmultiscripts", "mn", "mo", "mover", "mpadded", "mphantom", "mroot", "mrow", "ms", "mspace", "msqrt", "mstyle", "msub", "msup", "msubsup", "mtable", "mtd", "mtext", "mtr", "munder", "munderover", "mprescripts"]);
var JH = Fn(["maction", "maligngroup", "malignmark", "mlongdiv", "mscarries", "mscarry", "msgroup", "mstack", "msline", "msrow", "semantics", "annotation", "annotation-xml", "mprescripts", "none"]);
var SO = Fn(["#text"]);
var DO = Fn(["accept", "action", "align", "alt", "autocapitalize", "autocomplete", "autopictureinpicture", "autoplay", "background", "bgcolor", "border", "capture", "cellpadding", "cellspacing", "checked", "cite", "class", "clear", "color", "cols", "colspan", "controls", "controlslist", "coords", "crossorigin", "datetime", "decoding", "default", "dir", "disabled", "disablepictureinpicture", "disableremoteplayback", "download", "draggable", "enctype", "enterkeyhint", "face", "for", "headers", "height", "hidden", "high", "href", "hreflang", "id", "inputmode", "integrity", "ismap", "kind", "label", "lang", "list", "loading", "loop", "low", "max", "maxlength", "media", "method", "min", "minlength", "multiple", "muted", "name", "nonce", "noshade", "novalidate", "nowrap", "open", "optimum", "pattern", "placeholder", "playsinline", "popover", "popovertarget", "popovertargetaction", "poster", "preload", "pubdate", "radiogroup", "readonly", "rel", "required", "rev", "reversed", "role", "rows", "rowspan", "spellcheck", "scope", "selected", "shape", "size", "sizes", "span", "srclang", "start", "src", "srcset", "step", "style", "summary", "tabindex", "title", "translate", "type", "usemap", "valign", "value", "width", "wrap", "xmlns", "slot"]);
var FI = Fn(["accent-height", "accumulate", "additive", "alignment-baseline", "amplitude", "ascent", "attributename", "attributetype", "azimuth", "basefrequency", "baseline-shift", "begin", "bias", "by", "class", "clip", "clippathunits", "clip-path", "clip-rule", "color", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "cx", "cy", "d", "dx", "dy", "diffuseconstant", "direction", "display", "divisor", "dur", "edgemode", "elevation", "end", "exponent", "fill", "fill-opacity", "fill-rule", "filter", "filterunits", "flood-color", "flood-opacity", "font-family", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-variant", "font-weight", "fx", "fy", "g1", "g2", "glyph-name", "glyphref", "gradientunits", "gradienttransform", "height", "href", "id", "image-rendering", "in", "in2", "intercept", "k", "k1", "k2", "k3", "k4", "kerning", "keypoints", "keysplines", "keytimes", "lang", "lengthadjust", "letter-spacing", "kernelmatrix", "kernelunitlength", "lighting-color", "local", "marker-end", "marker-mid", "marker-start", "markerheight", "markerunits", "markerwidth", "maskcontentunits", "maskunits", "max", "mask", "media", "method", "mode", "min", "name", "numoctaves", "offset", "operator", "opacity", "order", "orient", "orientation", "origin", "overflow", "paint-order", "path", "pathlength", "patterncontentunits", "patterntransform", "patternunits", "points", "preservealpha", "preserveaspectratio", "primitiveunits", "r", "rx", "ry", "radius", "refx", "refy", "repeatcount", "repeatdur", "restart", "result", "rotate", "scale", "seed", "shape-rendering", "slope", "specularconstant", "specularexponent", "spreadmethod", "startoffset", "stddeviation", "stitchtiles", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke", "stroke-width", "style", "surfacescale", "systemlanguage", "tabindex", "tablevalues", "targetx", "targety", "transform", "transform-origin", "text-anchor", "text-decoration", "text-rendering", "textlength", "type", "u1", "u2", "unicode", "values", "viewbox", "visibility", "version", "vert-adv-y", "vert-origin-x", "vert-origin-y", "width", "word-spacing", "wrap", "writing-mode", "xchannelselector", "ychannelselector", "x", "x1", "x2", "xmlns", "y", "y1", "y2", "z", "zoomandpan"]);
var TO = Fn(["accent", "accentunder", "align", "bevelled", "close", "columnsalign", "columnlines", "columnspan", "denomalign", "depth", "dir", "display", "displaystyle", "encoding", "fence", "frame", "height", "href", "id", "largeop", "length", "linethickness", "lspace", "lquote", "mathbackground", "mathcolor", "mathsize", "mathvariant", "maxsize", "minsize", "movablelimits", "notation", "numalign", "open", "rowalign", "rowlines", "rowspacing", "rowspan", "rspace", "rquote", "scriptlevel", "scriptminsize", "scriptsizemultiplier", "selection", "separator", "separators", "stretchy", "subscriptshift", "supscriptshift", "symmetric", "voffset", "width", "xmlns"]);
var H4 = Fn(["xlink:href", "xml:id", "xlink:title", "xml:space", "xmlns:xlink"]);
var YH = Jo2(/\{\{[\w\W]*|[\w\W]*\}\}/gm);
var KH = Jo2(/<%[\w\W]*|[\w\W]*%>/gm);
var qH = Jo2(/\$\{[\w\W]*/gm);
var QH = Jo2(/^data-[\-\w.\u00B7-\uFFFF]+$/);
var eZ = Jo2(/^aria-[\-\w]+$/);
var OO = Jo2(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);
var tZ = Jo2(/^(?:\w+script|data):/i);
var rZ = Jo2(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);
var BO = Jo2(/^html$/i);
var nZ = Jo2(/^[a-z][.\w]*(-[.\w]+)+$/i);
var wO = Object.freeze({ __proto__: null, ARIA_ATTR: eZ, ATTR_WHITESPACE: rZ, CUSTOM_ELEMENT: nZ, DATA_ATTR: QH, DOCTYPE_NAME: BO, ERB_EXPR: KH, IS_ALLOWED_URI: OO, IS_SCRIPT_OR_DATA: tZ, MUSTACHE_EXPR: YH, TMPLIT_EXPR: qH });
var ah = { element: 1, attribute: 2, text: 3, cdataSection: 4, entityReference: 5, entityNode: 6, progressingInstruction: 7, comment: 8, document: 9, documentType: 10, documentFragment: 11, notation: 12 };
var oZ = function() {
  return typeof window > "u" ? null : window;
};
var iZ = function(r6, t6) {
  if (typeof r6 != "object" || typeof r6.createPolicy != "function") return null;
  let n = null, o = "data-tt-policy-suffix";
  t6 && t6.hasAttribute(o) && (n = t6.getAttribute(o));
  let i = "dompurify" + (n ? "#" + n : "");
  try {
    return r6.createPolicy(i, { createHTML(s6) {
      return s6;
    }, createScriptURL(s6) {
      return s6;
    } });
  } catch {
    return console.warn("TrustedTypes policy " + i + " could not be created."), null;
  }
};
var FO = function() {
  return { afterSanitizeAttributes: [], afterSanitizeElements: [], afterSanitizeShadowDOM: [], beforeSanitizeAttributes: [], beforeSanitizeElements: [], beforeSanitizeShadowDOM: [], uponSanitizeAttribute: [], uponSanitizeElement: [], uponSanitizeShadowNode: [] };
};
function PO() {
  let e6 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : oZ(), r6 = (be) => PO(be);
  if (r6.version = "3.2.6", r6.removed = [], !e6 || !e6.document || e6.document.nodeType !== ah.document || !e6.Element) return r6.isSupported = false, r6;
  let { document: t6 } = e6, n = t6, o = n.currentScript, { DocumentFragment: i, HTMLTemplateElement: s6, Node: u6, Element: l, NodeFilter: c, NamedNodeMap: d = e6.NamedNodeMap || e6.MozNamedAttrMap, HTMLFormElement: f, DOMParser: h, trustedTypes: b } = e6, I = l.prototype, E = ih(I, "cloneNode"), v6 = ih(I, "remove"), x6 = ih(I, "nextSibling"), D = ih(I, "childNodes"), w6 = ih(I, "parentNode");
  if (typeof s6 == "function") {
    let be = t6.createElement("template");
    be.content && be.content.ownerDocument && (t6 = be.content.ownerDocument);
  }
  let S, F = "", { implementation: P, createNodeIterator: L, createDocumentFragment: N, getElementsByTagName: $ } = t6, { importNode: W } = n, V = FO();
  r6.isSupported = typeof MO == "function" && typeof w6 == "function" && P && P.createHTMLDocument !== void 0;
  let { MUSTACHE_EXPR: q4, ERB_EXPR: se, TMPLIT_EXPR: ue, DATA_ATTR: ce, ARIA_ATTR: de2, IS_SCRIPT_OR_DATA: Ee2, ATTR_WHITESPACE: he, CUSTOM_ELEMENT: ne } = wO, { IS_ALLOWED_URI: Ce } = wO, xe3 = null, Re = Ge({}, [...CO, ...DI, ...TI, ...wI, ...SO]), we = null, Ve = Ge({}, [...DO, ...FI, ...TO, ...H4]), me = Object.seal(AO(null, { tagNameCheck: { writable: true, configurable: false, enumerable: true, value: null }, attributeNameCheck: { writable: true, configurable: false, enumerable: true, value: null }, allowCustomizedBuiltInElements: { writable: true, configurable: false, enumerable: true, value: false } })), at2 = null, xt = null, Ot = true, A = true, Z = false, O = true, Q = false, X = true, Y = false, K = false, ae = false, $e = false, Rt = false, ir = false, ho = true, Ni = false, em = "user-content-", dc = true, Ru2 = false, Rs = {}, Aa = null, dh = Ge({}, ["annotation-xml", "audio", "colgroup", "desc", "foreignobject", "head", "iframe", "math", "mi", "mn", "mo", "ms", "mtext", "noembed", "noframes", "noscript", "plaintext", "script", "style", "svg", "template", "thead", "title", "video", "xmp"]), Y4 = null, tm = Ge({}, ["audio", "video", "img", "source", "image", "track"]), Ns = null, mh = Ge({}, ["alt", "class", "for", "id", "label", "name", "pattern", "placeholder", "role", "summary", "title", "value", "style", "xmlns"]), mc = "http://www.w3.org/1998/Math/MathML", fc = "http://www.w3.org/2000/svg", Oa = "http://www.w3.org/1999/xhtml", hc = Oa, K42 = false, q42 = null, r8 = Ge({}, [mc, fc, Oa], SI), fh = Ge({}, ["mi", "mo", "mn", "ms", "mtext"]), hh = Ge({}, ["annotation-xml"]), n8 = Ge({}, ["title", "style", "font", "a", "script"]), rm = null, o8 = ["application/xhtml+xml", "text/html"], i8 = "text/html", Fr = null, gc = null, a8 = t6.createElement("form"), _I = function(B) {
    return B instanceof RegExp || B instanceof Function;
  }, Q4 = function() {
    let B = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    if (!(gc && gc === B)) {
      if ((!B || typeof B != "object") && (B = {}), B = Ls2(B), rm = o8.indexOf(B.PARSER_MEDIA_TYPE) === -1 ? i8 : B.PARSER_MEDIA_TYPE, Fr = rm === "application/xhtml+xml" ? SI : Z4, xe3 = _i(B, "ALLOWED_TAGS") ? Ge({}, B.ALLOWED_TAGS, Fr) : Re, we = _i(B, "ALLOWED_ATTR") ? Ge({}, B.ALLOWED_ATTR, Fr) : Ve, q42 = _i(B, "ALLOWED_NAMESPACES") ? Ge({}, B.ALLOWED_NAMESPACES, SI) : r8, Ns = _i(B, "ADD_URI_SAFE_ATTR") ? Ge(Ls2(mh), B.ADD_URI_SAFE_ATTR, Fr) : mh, Y4 = _i(B, "ADD_DATA_URI_TAGS") ? Ge(Ls2(tm), B.ADD_DATA_URI_TAGS, Fr) : tm, Aa = _i(B, "FORBID_CONTENTS") ? Ge({}, B.FORBID_CONTENTS, Fr) : dh, at2 = _i(B, "FORBID_TAGS") ? Ge({}, B.FORBID_TAGS, Fr) : Ls2({}), xt = _i(B, "FORBID_ATTR") ? Ge({}, B.FORBID_ATTR, Fr) : Ls2({}), Rs = _i(B, "USE_PROFILES") ? B.USE_PROFILES : false, Ot = B.ALLOW_ARIA_ATTR !== false, A = B.ALLOW_DATA_ATTR !== false, Z = B.ALLOW_UNKNOWN_PROTOCOLS || false, O = B.ALLOW_SELF_CLOSE_IN_ATTR !== false, Q = B.SAFE_FOR_TEMPLATES || false, X = B.SAFE_FOR_XML !== false, Y = B.WHOLE_DOCUMENT || false, $e = B.RETURN_DOM || false, Rt = B.RETURN_DOM_FRAGMENT || false, ir = B.RETURN_TRUSTED_TYPE || false, ae = B.FORCE_BODY || false, ho = B.SANITIZE_DOM !== false, Ni = B.SANITIZE_NAMED_PROPS || false, dc = B.KEEP_CONTENT !== false, Ru2 = B.IN_PLACE || false, Ce = B.ALLOWED_URI_REGEXP || OO, hc = B.NAMESPACE || Oa, fh = B.MATHML_TEXT_INTEGRATION_POINTS || fh, hh = B.HTML_INTEGRATION_POINTS || hh, me = B.CUSTOM_ELEMENT_HANDLING || {}, B.CUSTOM_ELEMENT_HANDLING && _I(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck) && (me.tagNameCheck = B.CUSTOM_ELEMENT_HANDLING.tagNameCheck), B.CUSTOM_ELEMENT_HANDLING && _I(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck) && (me.attributeNameCheck = B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck), B.CUSTOM_ELEMENT_HANDLING && typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements == "boolean" && (me.allowCustomizedBuiltInElements = B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements), Q && (A = false), Rt && ($e = true), Rs && (xe3 = Ge({}, SO), we = [], Rs.html === true && (Ge(xe3, CO), Ge(we, DO)), Rs.svg === true && (Ge(xe3, DI), Ge(we, FI), Ge(we, H4)), Rs.svgFilters === true && (Ge(xe3, TI), Ge(we, FI), Ge(we, H4)), Rs.mathMl === true && (Ge(xe3, wI), Ge(we, TO), Ge(we, H4))), B.ADD_TAGS && (xe3 === Re && (xe3 = Ls2(xe3)), Ge(xe3, B.ADD_TAGS, Fr)), B.ADD_ATTR && (we === Ve && (we = Ls2(we)), Ge(we, B.ADD_ATTR, Fr)), B.ADD_URI_SAFE_ATTR && Ge(Ns, B.ADD_URI_SAFE_ATTR, Fr), B.FORBID_CONTENTS && (Aa === dh && (Aa = Ls2(Aa)), Ge(Aa, B.FORBID_CONTENTS, Fr)), dc && (xe3["#text"] = true), Y && Ge(xe3, ["html", "head", "body"]), xe3.table && (Ge(xe3, ["tbody"]), delete at2.tbody), B.TRUSTED_TYPES_POLICY) {
        if (typeof B.TRUSTED_TYPES_POLICY.createHTML != "function") throw oh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');
        if (typeof B.TRUSTED_TYPES_POLICY.createScriptURL != "function") throw oh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');
        S = B.TRUSTED_TYPES_POLICY, F = S.createHTML("");
      } else S === void 0 && (S = iZ(b, o)), S !== null && typeof F == "string" && (F = S.createHTML(""));
      Fn && Fn(B), gc = B;
    }
  }, LI = Ge({}, [...DI, ...TI, ...XH]), RI = Ge({}, [...wI, ...JH]), s8 = function(B) {
    let J = w6(B);
    (!J || !J.tagName) && (J = { namespaceURI: hc, tagName: "template" });
    let pe = Z4(B.tagName), zt = Z4(J.tagName);
    return q42[B.namespaceURI] ? B.namespaceURI === fc ? J.namespaceURI === Oa ? pe === "svg" : J.namespaceURI === mc ? pe === "svg" && (zt === "annotation-xml" || fh[zt]) : !!LI[pe] : B.namespaceURI === mc ? J.namespaceURI === Oa ? pe === "math" : J.namespaceURI === fc ? pe === "math" && hh[zt] : !!RI[pe] : B.namespaceURI === Oa ? J.namespaceURI === fc && !hh[zt] || J.namespaceURI === mc && !fh[zt] ? false : !RI[pe] && (n8[pe] || !LI[pe]) : !!(rm === "application/xhtml+xml" && q42[B.namespaceURI]) : false;
  }, $i2 = function(B) {
    rh(r6.removed, { element: B });
    try {
      w6(B).removeChild(B);
    } catch {
      v6(B);
    }
  }, yc2 = function(B, J) {
    try {
      rh(r6.removed, { attribute: J.getAttributeNode(B), from: J });
    } catch {
      rh(r6.removed, { attribute: null, from: J });
    }
    if (J.removeAttribute(B), B === "is") if ($e || Rt) try {
      $i2(J);
    } catch {
    }
    else try {
      J.setAttribute(B, "");
    } catch {
    }
  }, NI = function(B) {
    let J = null, pe = null;
    if (ae) B = "<remove></remove>" + B;
    else {
      let gr = EO(B, /^[\r\n\t ]+/);
      pe = gr && gr[0];
    }
    rm === "application/xhtml+xml" && hc === Oa && (B = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>' + B + "</body></html>");
    let zt = S ? S.createHTML(B) : B;
    if (hc === Oa) try {
      J = new h().parseFromString(zt, rm);
    } catch {
    }
    if (!J || !J.documentElement) {
      J = P.createDocument(hc, "template", null);
      try {
        J.documentElement.innerHTML = K42 ? F : zt;
      } catch {
      }
    }
    let en = J.body || J.documentElement;
    return B && pe && en.insertBefore(t6.createTextNode(pe), en.childNodes[0] || null), hc === Oa ? $.call(J, Y ? "html" : "body")[0] : Y ? J.documentElement : en;
  }, $I = function(B) {
    return L.call(B.ownerDocument || B, B, c.SHOW_ELEMENT | c.SHOW_COMMENT | c.SHOW_TEXT | c.SHOW_PROCESSING_INSTRUCTION | c.SHOW_CDATA_SECTION, null);
  }, eb = function(B) {
    return B instanceof f && (typeof B.nodeName != "string" || typeof B.textContent != "string" || typeof B.removeChild != "function" || !(B.attributes instanceof d) || typeof B.removeAttribute != "function" || typeof B.setAttribute != "function" || typeof B.namespaceURI != "string" || typeof B.insertBefore != "function" || typeof B.hasChildNodes != "function");
  }, jI = function(B) {
    return typeof u6 == "function" && B instanceof u6;
  };
  function Ba(be, B, J) {
    V4(be, (pe) => {
      pe.call(r6, B, J, gc);
    });
  }
  let UI = function(B) {
    let J = null;
    if (Ba(V.beforeSanitizeElements, B, null), eb(B)) return $i2(B), true;
    let pe = Fr(B.nodeName);
    if (Ba(V.uponSanitizeElement, B, { tagName: pe, allowedTags: xe3 }), X && B.hasChildNodes() && !jI(B.firstElementChild) && wn(/<[/\w!]/g, B.innerHTML) && wn(/<[/\w!]/g, B.textContent) || B.nodeType === ah.progressingInstruction || X && B.nodeType === ah.comment && wn(/<[/\w]/g, B.data)) return $i2(B), true;
    if (!xe3[pe] || at2[pe]) {
      if (!at2[pe] && zI(pe) && (me.tagNameCheck instanceof RegExp && wn(me.tagNameCheck, pe) || me.tagNameCheck instanceof Function && me.tagNameCheck(pe))) return false;
      if (dc && !Aa[pe]) {
        let zt = w6(B) || B.parentNode, en = D(B) || B.childNodes;
        if (en && zt) {
          let gr = en.length;
          for (let An = gr - 1; An >= 0; --An) {
            let Pa = E(en[An], true);
            Pa.__removalCount = (B.__removalCount || 0) + 1, zt.insertBefore(Pa, x6(B));
          }
        }
      }
      return $i2(B), true;
    }
    return B instanceof l && !s8(B) || (pe === "noscript" || pe === "noembed" || pe === "noframes") && wn(/<\/no(script|embed|frames)/i, B.innerHTML) ? ($i2(B), true) : (Q && B.nodeType === ah.text && (J = B.textContent, V4([q4, se, ue], (zt) => {
      J = nh(J, zt, " ");
    }), B.textContent !== J && (rh(r6.removed, { element: B.cloneNode() }), B.textContent = J)), Ba(V.afterSanitizeElements, B, null), false);
  }, GI = function(B, J, pe) {
    if (ho && (J === "id" || J === "name") && (pe in t6 || pe in a8)) return false;
    if (!(A && !xt[J] && wn(ce, J))) {
      if (!(Ot && wn(de2, J))) {
        if (!we[J] || xt[J]) {
          if (!(zI(B) && (me.tagNameCheck instanceof RegExp && wn(me.tagNameCheck, B) || me.tagNameCheck instanceof Function && me.tagNameCheck(B)) && (me.attributeNameCheck instanceof RegExp && wn(me.attributeNameCheck, J) || me.attributeNameCheck instanceof Function && me.attributeNameCheck(J)) || J === "is" && me.allowCustomizedBuiltInElements && (me.tagNameCheck instanceof RegExp && wn(me.tagNameCheck, pe) || me.tagNameCheck instanceof Function && me.tagNameCheck(pe)))) return false;
        } else if (!Ns[J]) {
          if (!wn(Ce, nh(pe, he, ""))) {
            if (!((J === "src" || J === "xlink:href" || J === "href") && B !== "script" && VH(pe, "data:") === 0 && Y4[B])) {
              if (!(Z && !wn(Ee2, nh(pe, he, "")))) {
                if (pe) return false;
              }
            }
          }
        }
      }
    }
    return true;
  }, zI = function(B) {
    return B !== "annotation-xml" && EO(B, ne);
  }, VI = function(B) {
    Ba(V.beforeSanitizeAttributes, B, null);
    let { attributes: J } = B;
    if (!J || eb(B)) return;
    let pe = { attrName: "", attrValue: "", keepAttr: true, allowedAttributes: we, forceKeepAttr: void 0 }, zt = J.length;
    for (; zt--; ) {
      let en = J[zt], { name: gr, namespaceURI: An, value: Pa } = en, nm = Fr(gr), tb = Pa, tn = gr === "value" ? tb : HH(tb);
      if (pe.attrName = nm, pe.attrValue = tn, pe.keepAttr = true, pe.forceKeepAttr = void 0, Ba(V.uponSanitizeAttribute, B, pe), tn = pe.attrValue, Ni && (nm === "id" || nm === "name") && (yc2(gr, B), tn = em + tn), X && wn(/((--!?|])>)|<\/(style|title)/i, tn)) {
        yc2(gr, B);
        continue;
      }
      if (pe.forceKeepAttr) continue;
      if (!pe.keepAttr) {
        yc2(gr, B);
        continue;
      }
      if (!O && wn(/\/>/i, tn)) {
        yc2(gr, B);
        continue;
      }
      Q && V4([q4, se, ue], (ZI) => {
        tn = nh(tn, ZI, " ");
      });
      let HI = Fr(B.nodeName);
      if (!GI(HI, nm, tn)) {
        yc2(gr, B);
        continue;
      }
      if (S && typeof b == "object" && typeof b.getAttributeType == "function" && !An) switch (b.getAttributeType(HI, nm)) {
        case "TrustedHTML": {
          tn = S.createHTML(tn);
          break;
        }
        case "TrustedScriptURL": {
          tn = S.createScriptURL(tn);
          break;
        }
      }
      if (tn !== tb) try {
        An ? B.setAttributeNS(An, gr, tn) : B.setAttribute(gr, tn), eb(B) ? $i2(B) : IO(r6.removed);
      } catch {
        yc2(gr, B);
      }
    }
    Ba(V.afterSanitizeAttributes, B, null);
  }, u8 = function be(B) {
    let J = null, pe = $I(B);
    for (Ba(V.beforeSanitizeShadowDOM, B, null); J = pe.nextNode(); ) Ba(V.uponSanitizeShadowNode, J, null), UI(J), VI(J), J.content instanceof i && be(J.content);
    Ba(V.afterSanitizeShadowDOM, B, null);
  };
  return r6.sanitize = function(be) {
    let B = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, J = null, pe = null, zt = null, en = null;
    if (K42 = !be, K42 && (be = "<!-->"), typeof be != "string" && !jI(be)) if (typeof be.toString == "function") {
      if (be = be.toString(), typeof be != "string") throw oh("dirty is not a string, aborting");
    } else throw oh("toString is not a function");
    if (!r6.isSupported) return be;
    if (K || Q4(B), r6.removed = [], typeof be == "string" && (Ru2 = false), Ru2) {
      if (be.nodeName) {
        let Pa = Fr(be.nodeName);
        if (!xe3[Pa] || at2[Pa]) throw oh("root node is forbidden and cannot be sanitized in-place");
      }
    } else if (be instanceof u6) J = NI("<!---->"), pe = J.ownerDocument.importNode(be, true), pe.nodeType === ah.element && pe.nodeName === "BODY" || pe.nodeName === "HTML" ? J = pe : J.appendChild(pe);
    else {
      if (!$e && !Q && !Y && be.indexOf("<") === -1) return S && ir ? S.createHTML(be) : be;
      if (J = NI(be), !J) return $e ? null : ir ? F : "";
    }
    J && ae && $i2(J.firstChild);
    let gr = $I(Ru2 ? be : J);
    for (; zt = gr.nextNode(); ) UI(zt), VI(zt), zt.content instanceof i && u8(zt.content);
    if (Ru2) return be;
    if ($e) {
      if (Rt) for (en = N.call(J.ownerDocument); J.firstChild; ) en.appendChild(J.firstChild);
      else en = J;
      return (we.shadowroot || we.shadowrootmode) && (en = W.call(n, en, true)), en;
    }
    let An = Y ? J.outerHTML : J.innerHTML;
    return Y && xe3["!doctype"] && J.ownerDocument && J.ownerDocument.doctype && J.ownerDocument.doctype.name && wn(BO, J.ownerDocument.doctype.name) && (An = "<!DOCTYPE " + J.ownerDocument.doctype.name + `>
` + An), Q && V4([q4, se, ue], (Pa) => {
      An = nh(An, Pa, " ");
    }), S && ir ? S.createHTML(An) : An;
  }, r6.setConfig = function() {
    let be = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
    Q4(be), K = true;
  }, r6.clearConfig = function() {
    gc = null, K = false;
  }, r6.isValidAttribute = function(be, B, J) {
    gc || Q4({});
    let pe = Fr(be), zt = Fr(B);
    return GI(pe, zt, J);
  }, r6.addHook = function(be, B) {
    typeof B == "function" && rh(V[be], B);
  }, r6.removeHook = function(be, B) {
    if (B !== void 0) {
      let J = GH(V[be], B);
      return J === -1 ? void 0 : zH(V[be], J, 1)[0];
    }
    return IO(V[be]);
  }, r6.removeHooks = function(be) {
    V[be] = [];
  }, r6.removeAllHooks = function() {
    V = FO();
  }, r6;
}
var kO = PO();
var aZ = { "connection-stairs-12x12": `<svg viewBox="0 0 12 12" stroke="none">
		<path d="M1.625 8.1875C1.625 8.01491 1.76491 7.875 1.9375 7.875H4.75V9.4375C4.75 9.61009 4.61009 9.75 4.4375 9.75H1.9375C1.76491 9.75 1.625 9.61009 1.625 9.4375V8.1875Z" />
		<path d="M3.5 6.3125C3.5 6.13991 3.63991 6 3.8125 6H6.625V7.5625C6.625 7.73509 6.48509 7.875 6.3125 7.875H3.5V6.3125Z" />
		<path d="M5.375 4.4375C5.375 4.26491 5.51491 4.125 5.6875 4.125H8.5V5.6875C8.5 5.86009 8.36009 6 8.1875 6H5.375V4.4375Z" />
		<path d="M7.25 2.5625C7.25 2.38991 7.38991 2.25 7.5625 2.25H10.0625C10.2351 2.25 10.375 2.38991 10.375 2.5625V3.8125C10.375 3.98509 10.2351 4.125 10.0625 4.125H7.25V2.5625Z" />
	</svg>`, "connection-elevator-12x12": `<svg viewBox="0 0 12 12" stroke="none">
		<circle cx="1.9375" cy="4.4375" r="0.9375" />
		<circle cx="1.9375" cy="7.5625" r="0.9375" />
		<path
			fillRule="evenodd"
			clipRule="evenodd"
			d="M7.6 2H9.4C9.73137 2 10 2.26863 10 2.6V9.41328C10 9.74465 9.73137 10.0133 9.4 10.0133H7.6V2ZM6.4 2H4.6C4.26863 2 4 2.26863 4 2.6V9.41328C4 9.74465 4.26863 10.0133 4.6 10.0133H6.4V2Z"
		/>
	</svg>`, "point-of-interest-12x12": `<svg viewBox="0 0 12 12" stroke="none">
		<path
			stroke="none"
			id="Subtract"
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M6.24724 10.7516C7.94597 9.0358 9.85962 6.89195 9.85962 4.85965C9.85962 2.72802 8.13159 1 5.99997 1C3.86834 1 2.14032 2.72802 2.14032 4.85965C2.14032 6.89195 4.05397 9.0358 5.7527 10.7516C5.88904 10.8893 6.1109 10.8893 6.24724 10.7516ZM5.99994 6.26317C6.77508 6.26317 7.40345 5.6348 7.40345 4.85967C7.40345 4.08453 6.77508 3.45616 5.99994 3.45616C5.22481 3.45616 4.59644 4.08453 4.59644 4.85967C4.59644 5.6348 5.22481 6.26317 5.99994 6.26317Z"
		/>
	</svg>`, "door-12x12": `<svg viewBox="0 0 13 12">
			<path
				stroke="none"
				d="M4.02533 0.662341H9.61421C9.95171 0.662341 10.2264 0.937033 10.2264 1.27453V10.726C10.2264 11.0639 9.95218 11.3382 9.61421 11.3382H4.02533C3.69721 11.3382 3.42674 11.078 3.41408 10.7504V1.24696C3.4272 0.919297 3.69721 0.659149 4.02533 0.659149V0.662341ZM5.96969 5.22798H6.64563V6.7725H5.96969V5.22798ZM4.94219 1.39218L7.31267 2.6541C7.43501 2.71973 7.50533 2.84488 7.50533 2.97473C7.50721 4.99181 7.50674 7.00877 7.50674 9.02585C7.50674 9.17679 7.41487 9.30663 7.28361 9.36195L4.94217 10.6084H9.49653V1.39227L4.94219 1.39218Z"
			/>
		</svg>`, "building-12x12": `<svg viewBox="0 0 12 12" stroke="none">
			<path
				d="M11.2374 9.75H10.5V4.5C10.5 4.30109 10.421 4.11032 10.2804 3.96967C10.1397 3.82902 9.94894 3.75 9.75003 3.75H7.68753C7.6378 3.75 7.59011 3.76976 7.55495 3.80492C7.51978 3.84008 7.50003 3.88777 7.50003 3.9375V9.75H6.75003V1.51922C6.75127 1.4024 6.72592 1.28683 6.67589 1.18125C6.62587 1.07567 6.55248 0.982864 6.46128 0.909845C6.33697 0.812924 6.18528 0.757635 6.02776 0.751829C5.87024 0.746023 5.71489 0.789995 5.58378 0.877501L1.83378 3.375C1.73091 3.44364 1.6466 3.53664 1.58837 3.64574C1.53014 3.75484 1.4998 3.87665 1.50003 4.00031V9.75H0.762687C0.66578 9.74857 0.571927 9.78389 0.500006 9.84885C0.428085 9.91382 0.383432 10.0036 0.37503 10.1002C0.371625 10.1515 0.378802 10.2029 0.396116 10.2513C0.413431 10.2997 0.440513 10.344 0.47568 10.3815C0.510847 10.419 0.553349 10.4489 0.600545 10.4693C0.647741 10.4897 0.698623 10.5001 0.75003 10.5H11.25C11.3014 10.5001 11.3523 10.4897 11.3995 10.4693C11.4467 10.4489 11.4892 10.419 11.5244 10.3815C11.5595 10.344 11.5866 10.2997 11.6039 10.2513C11.6213 10.2029 11.6284 10.1515 11.625 10.1002C11.6166 10.0036 11.572 9.91382 11.5001 9.84885C11.4281 9.78389 11.3343 9.74857 11.2374 9.75ZM3.56253 8.625C3.56264 8.67641 3.55219 8.72729 3.53181 8.77449C3.51143 8.82168 3.48156 8.86418 3.44406 8.89935C3.40657 8.93452 3.36224 8.9616 3.31383 8.97892C3.26543 8.99623 3.21398 9.00341 3.16269 9C3.06605 8.99159 2.9762 8.94688 2.91122 8.87485C2.84624 8.80283 2.81098 8.70886 2.81253 8.61188V7.88766C2.81121 7.79078 2.84657 7.69699 2.91151 7.62509C2.97645 7.55319 3.06618 7.50851 3.16269 7.5C3.21398 7.4966 3.26543 7.50377 3.31383 7.52109C3.36224 7.5384 3.40657 7.56548 3.44406 7.60065C3.48156 7.63582 3.51143 7.67832 3.53181 7.72552C3.55219 7.77271 3.56264 7.82359 3.56253 7.875V8.625ZM3.56253 6C3.56264 6.05141 3.55219 6.10229 3.53181 6.14949C3.51143 6.19668 3.48156 6.23918 3.44406 6.27435C3.40657 6.30952 3.36224 6.3366 3.31383 6.35392C3.26543 6.37123 3.21398 6.37841 3.16269 6.375C3.06609 6.36649 2.9763 6.32174 2.91135 6.24974C2.84639 6.17774 2.81109 6.08383 2.81253 5.98688V5.26266C2.81121 5.16578 2.84657 5.07199 2.91151 5.00009C2.97645 4.92819 3.06618 4.88351 3.16269 4.875C3.21398 4.8716 3.26543 4.87877 3.31383 4.89609C3.36224 4.9134 3.40657 4.94048 3.44406 4.97565C3.48156 5.01082 3.51143 5.05332 3.53181 5.10052C3.55219 5.14771 3.56264 5.19859 3.56253 5.25V6ZM5.43753 8.625C5.43764 8.67641 5.42719 8.72729 5.40681 8.77449C5.38643 8.82168 5.35656 8.86418 5.31906 8.89935C5.28157 8.93452 5.23724 8.9616 5.18883 8.97892C5.14043 8.99623 5.08898 9.00341 5.03769 9C4.94122 8.9916 4.8515 8.94702 4.78654 8.8752C4.72159 8.80338 4.68622 8.70964 4.68753 8.61281V7.88766C4.68633 7.79086 4.72174 7.69718 4.78667 7.62539C4.8516 7.55359 4.94126 7.50897 5.03769 7.50047C5.08898 7.49706 5.14043 7.50424 5.18883 7.52156C5.23724 7.53887 5.28157 7.56595 5.31906 7.60112C5.35656 7.63629 5.38643 7.67879 5.40681 7.72598C5.42719 7.77318 5.43764 7.82406 5.43753 7.87547V8.625ZM5.43753 6C5.43764 6.05141 5.42719 6.10229 5.40681 6.14949C5.38643 6.19668 5.35656 6.23918 5.31906 6.27435C5.28157 6.30952 5.23724 6.3366 5.18883 6.35392C5.14043 6.37123 5.08898 6.37841 5.03769 6.375C4.94126 6.3665 4.8516 6.32188 4.78667 6.25008C4.72174 6.17829 4.68633 6.08461 4.68753 5.98781V5.26266C4.68633 5.16586 4.72174 5.07218 4.78667 5.00039C4.8516 4.92859 4.94126 4.88397 5.03769 4.87547C5.08898 4.87206 5.14043 4.87924 5.18883 4.89656C5.23724 4.91387 5.28157 4.94095 5.31906 4.97612C5.35656 5.01129 5.38643 5.05379 5.40681 5.10098C5.42719 5.14818 5.43764 5.19906 5.43753 5.25047V6Z"
				stroke="none"
			/>
		</svg>`, "ladder-12x12": `<svg viewBox="0 0 12 12">
			<g id="surface1">
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 2.34375 0.375 L 2.53125 0.375 L 2.625 11.53125 L 2.34375 11.625 L 2.25 0.46875 Z M 2.34375 0.375 "/>
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 9.46875 0.375 L 9.65625 0.375 L 9.75 11.53125 L 9.46875 11.625 L 9.375 0.46875 Z M 9.46875 0.375 "/>
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 2.25 2.25 L 2.25 1.875 L 9.75 1.875 L 9.75 2.25 Z M 2.25 2.25 "/>
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 2.25 4.875 L 2.25 4.5 L 9.75 4.5 L 9.75 4.875 Z M 2.25 4.875 "/>
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 2.25 7.5 L 2.25 7.125 L 9.75 7.125 L 9.75 7.5 Z M 2.25 7.5 "/>
				<path style=" stroke:none;fill-rule:nonzero;fill:rgb(94.117647%,94.117647%,94.117647%);fill-opacity:1;" d="M 2.25 10.125 L 2.25 9.75 L 9.75 9.75 L 9.75 10.125 Z M 2.25 10.125 "/>
			</g>
		</svg>` };
var sZ = /<svg([^>]*)>/g;
function _O(e6, r6, t6) {
  let n = aZ[e6];
  return n ? n.replace(sZ, `<svg$1 xmlns="http://www.w3.org/2000/svg" style="fill:${r6}; width:${t6}px; height:${t6}px">`) : null;
}
function uZ(e6) {
  return kO.sanitize(e6, { USE_PROFILES: { svg: true } });
}
function lZ(e6, r6) {
  let o = new DOMParser().parseFromString(e6, "image/svg+xml").documentElement;
  return o == null || o.tagName === "parsererror" || o.tagName.toLowerCase() !== "svg" ? (Pt.error("Failed to parse SVG", { svg: e6, tagName: o?.tagName }), e6) : (r6 != null && (o.setAttribute("color", r6), o.querySelectorAll("*").forEach((u6) => {
    (u6.getAttribute("fill") != null || u6.tagName === "path") && u6.getAttribute("fill") !== "none" && u6.setAttribute("fill", "currentColor"), u6.getAttribute("stroke") != null && u6.getAttribute("stroke") !== "none" && u6.setAttribute("stroke", "currentColor");
  })), new XMLSerializer().serializeToString(o));
}
async function LO(e6, r6) {
  let t6 = "";
  try {
    if (e6.trim() === "") throw new Error("URL is empty!");
    r6?.style === "fill" && (e6 = e6.replace(".svg", "-fill.svg"));
    let n = await oo()(e6), o = n.headers.get("content-type");
    if (o?.includes("image/svg+xml")) {
      let i = await n.text();
      return t6 = uZ(i), r6?.color != null && (t6 = lZ(t6, r6.color)), { icon: t6, type: "svg" };
    } else {
      if (o?.includes("image")) return { icon: e6, type: "image" };
      throw new Error(`Expected SVG or Image content, but received: ${o}`);
    }
  } catch (n) {
    return Pt.error(`Failed to fetch icon from ${e6}.`, n), null;
  }
}
$i();
function RO(e6) {
  return e6.locationProfiles.some((r6) => r6.categories.some((t6) => t6.name.includes("Restroom")));
}
function NO(e6) {
  return e6.locationProfiles.some((r6) => r6.categories.some((t6) => t6.name.includes("Parking")));
}
var cc = { default: "#3D5676", connection: "#128387", washroom: "#3161B4", point: "#AD468F", parking: "#418425", door: "#A0552C" };
var Xd = { elevator: "connection-elevator-12x12", escalator: "connection-stairs-12x12", stairs: "connection-stairs-12x12", point: "point-of-interest-12x12", door: "door-12x12", building: "building-12x12", ladder: "ladder-12x12" };
function cZ(e6) {
  let r6 = null;
  if (lo.is(e6)) switch (e6.type) {
    case "elevator":
      r6 = Xd.elevator;
      break;
    case "ladder":
      r6 = Xd.ladder;
      break;
    case "escalator":
    case "stairs":
    default:
      r6 = Xd.stairs;
  }
  else uo.is(e6) ? r6 = Xd.point : yn.is(e6) ? r6 = Xd.door : Rr.is(e6) && (r6 = Xd.building);
  return r6 != null ? _O(r6, "#FFFFFF", 12) : null;
}
function $O(e6) {
  return lo.is(e6) ? cc.connection : Rr.is(e6) ? cc.default : RO(e6) ? cc.washroom : NO(e6) ? cc.parking : uo.is(e6) ? cc.point : yn.is(e6) ? cc.door : cc.default;
}
async function pZ(e6, r6) {
  let t6 = null, n = "locationProfiles" in e6 ? e6.locationProfiles.find((o) => o.icon != null)?.icon : null;
  if (n?.url != null && (t6 = await LO(n.url, { color: r6.color, style: "fill" })), t6 == null) {
    let o = cZ(e6);
    o != null && (t6 = { icon: o, type: "svg" });
  }
  return t6;
}
async function dZ(e6) {
  return lo.is(e6) || yn.is(e6) ? "low" : uo.is(e6) || Rr.is(e6) ? "high" : "medium";
}
async function mZ(e6) {
  let r6 = { appearance: { color: $O(e6), pinOutlineColor: $O(e6), iconPadding: 8, iconSize: 24, textSize: 12.5, iconScale: { on: "zoom-level", input: [18, 20], output: [0.7, 1] } }, rank: await dZ(e6), interactive: true }, t6 = await pZ(e6, { color: "#FFFFFF" });
  return t6 != null && (r6.appearance.icon = t6.icon, t6.type === "svg" ? Rr.is(e6) && (r6.appearance.iconSize = 30, r6.appearance.iconPadding = 10) : t6.type === "image" && (r6.appearance.iconSize = 48, r6.appearance.iconPadding = 2, r6.appearance.pinOutlineColor = "#FFFFFF", r6.rank = "high")), r6;
}
function jO(e6, r6) {
  let t6 = [...e6.getByType("connection"), ...e6.getByType("point-of-interest"), ...e6.getByType("space"), ...e6.getByType("object"), ...e6.getByType("door"), ...e6.getByType("facade")].flatMap(async (n) => {
    let o = [], i = await mZ(n);
    return lo.is(n) ? o = n.coordinates.map((s6) => r6.Labels.add(s6, n.name, i)) : Rr.is(n) ? n.spaces.length > 0 && n.floorStack.name != null && n.floorStack.name !== "" && o.push(r6.Labels.add(n.spaces[0], n.floorStack.name, i)) : "name" in n && n.name != null && n.name !== "" && o.push(r6.Labels.add(n, n.name, i)), o;
  });
  return Promise.all(t6).then((n) => n.flat());
}
async function UO(e6, r6) {
  let t6 = [jO(e6, r6), vO(e6, r6)], [n] = await Promise.all(t6);
  return { labels: n };
}
var W4 = 0.05;
var uh;
var lh;
var sh = class extends Ka {
  constructor(t6, n, o) {
    super();
    t(this, "core");
    t(this, "mapObjects", []);
    t(this, "id");
    t(this, "mapDataExternal", {});
    t(this, "mapsByFloorId", {});
    t(this, "mapData");
    t(this, "currentMap");
    t(this, "hiddenOutdoorGeometries", []);
    t(this, "lastFacadeIntersected");
    v(this, uh, false);
    v(this, lh, false);
    t(this, "mapView");
    t(this, "externalPubSub");
    t(this, "Camera");
    t(this, "Labels");
    t(this, "Text3D");
    t(this, "Markers");
    t(this, "Models");
    t(this, "Paths");
    t(this, "Exporter");
    t(this, "Navigation");
    t(this, "Outdoor");
    t(this, "Shapes");
    t(this, "Style");
    t(this, "Image3D");
    t(this, "update", () => {
      this.core.render();
    });
    this.core = t6, this.mapView = n, this.externalPubSub = o, this.Camera = new B0(this), this.id = this.core.addGroupContainer("root").id.toString();
    let i = new $0("outdoors-container", void 0, void 0, this);
    this.mapObjects.push(i), this.currentMap = i, this.core.on("pre-render", () => {
      o.publish("pre-render");
    }), this.core.on("post-render", () => {
      o.publish("post-render");
    }), this.core.on("resize", () => {
      o.publish("resize");
    }), this.core.on("render-error", ({ error: d }) => {
      o.publish("render-error", { error: new Ex(d instanceof Error ? d.message : "Unknown error") });
    });
    let s6 = (d) => {
      let f = this.getMapDataObject(d);
      switch (f?.__type) {
        case "facade":
          return f;
        case "floor":
          return f.floorStack.facade;
        default:
          return null;
      }
    };
    this.core.on("geometry-in-focus", (d) => {
      let f = /* @__PURE__ */ new Set();
      for (let h of d) {
        let b = s6(h);
        b && f.add(b);
      }
      o.publish("facades-in-view-change", { facades: Array.from(f) });
    }), this.core.getSystems().renderSystem.on("camera-state-change", () => {
      o.publish("state-change-internal", { Camera: this.getCameraState() });
    });
    let u6 = new w0(this.Camera, { precision: 7 });
    this.core.on("camera-change", () => {
      o.publish("camera-change", u6);
    }), this.core.on("pan-bounds-change", (d) => {
      o.publish("camera-bounds-change", Hy(d, this.core.convert3DMapPositionToCoordinate));
    });
    let l = (d) => (f) => {
      let h = [], b = [], I = [], E = [];
      f.labels.forEach((L) => {
        let N = this.Labels.getById(L.toString());
        N && h.push(N.label);
      }), f.markers.forEach((L) => {
        let N = this.Markers.getById(L.toString()) || this.Navigation.getMarkerById(L.toString());
        N && b.push(N.marker);
      }), f.models.forEach((L) => {
        let N = this.Models.getById(L.toString());
        N && I.push(N.model);
      }), f.paths.forEach((L) => {
        let N = this.Paths.getById(L.toString());
        N && E.push(N);
      });
      let v6 = f.geometry, x6;
      v6.length > 0 && (x6 = v6.map((L) => this.getMapDataInternal()?.getById("space", L)).filter(Boolean)[0], x6 || (x6 = v6.map((L) => this.getMapDataInternal()?.getById("object", L)).filter(Boolean)[0]), x6 || (x6 = v6.map((L) => this.getMapDataInternal()?.getById("area", L)).filter(Boolean)[0]), x6 || (x6 = v6.map((L) => this.Shapes.getById(L)).filter(Boolean)[0]));
      let D = f.containers.reduce((L, N) => {
        let $ = this.getMapDataInternal()?.getById("floor", N);
        return $ && jn2.is($) && L.push($), L;
      }, []), w6, S = 0;
      if (D.length > 0) {
        w6 = D[0].id;
        let L = this.core.getState(w6);
        S = f.coordinate[2] ? f.coordinate[2] - L.altitude : S;
      }
      let F;
      this.lastFacadeIntersected && this.lastFacadeIntersected.spaces.forEach((L) => {
        this.core.setState(L.id, { hovered: false });
      }), x6 && Cr2.is(x6) && (F = v6.map((L) => this.getMapDataInternal()?.facadesBySpaceId[L]).filter(Boolean)[0], F && F.spaces.forEach((L) => {
        this.core.setState(L.id, { hovered: true });
      })), this.lastFacadeIntersected = F;
      let P = { coordinate: new ge2({ latitude: f.coordinate[1], longitude: f.coordinate[0], floorId: w6, verticalOffset: S }), spaces: x6 && Cr2.is(x6) ? [x6] : [], objects: x6 && Un.is(x6) ? [x6] : [], areas: x6 && Lo.is(x6) ? [x6] : [], shapes: x6 && ws.is(x6) ? [x6] : [], markers: b, labels: h, models: I, paths: E, floors: D, facades: F ? [F] : [] };
      "pointerEvent" in f && (P.pointerEvent = f.pointerEvent), o.publish(d, P);
    };
    this.core.on("hover", l("hover")), this.core.on("click", l("click")), this.core.on("user-interaction-start", () => {
      o.publish("user-interaction-start");
    }), this.core.on("user-interaction-end", () => {
      o.publish("user-interaction-end");
    });
    let c = { currentMapGetter: () => this.currentMap };
    this.Markers = new j0(c), this.Models = new V0(c), this.Labels = new _0(c), this.Text3D = new eh(c), this.Exporter = new k0(c), this.Paths = new Z0(c), this.Navigation = new O0(this), this.on("navigation-state-change", (d) => {
      this.externalPubSub.publish("state-change-internal", { Navigation: d });
    }), this.on("navigation-connection-click", (d) => {
      this.externalPubSub.publish("navigation-connection-click", d);
    }), this.on("navigation-active-path-change", (d) => {
      this.externalPubSub.publish("navigation-active-path-change", d);
    }), this.Outdoor = new Wd(this.core, this.hiddenOutdoorGeometries), this.Outdoor.enabled && (this.core.on("outdoor-view-loaded", () => {
      o.publish("outdoor-view-loaded");
    }), this.core.on("outdoor-style-loaded", () => {
      o.publish("outdoor-style-loaded");
    })), this.Image3D = new G0(c), this.Shapes = new X0(c), this.Style = new Y0(c);
  }
  get manualFloorVisibility() {
    return u(this, uh);
  }
  set manualFloorVisibility(t6) {
    w(this, uh, t6), this.externalPubSub.publish("state-change-internal", { manualFloorVisibility: t6 });
  }
  get hidePathsNotOnCurrentFloor() {
    return u(this, lh);
  }
  set hidePathsNotOnCurrentFloor(t6) {
    w(this, lh, t6), this.currentMap?.updatePathLayersVisibility();
  }
  preloadFloors(t6) {
    t6.forEach((n) => {
      n instanceof jn2 && this.core.setState(n.id, { preloadGeometry: true });
    });
  }
  updateState(t6, n) {
    if (n == null || typeof n != "object") return;
    if (t6 === "interior-walls") {
      this.currentMap.floors.forEach((i) => {
        let s6 = i.layers.get(or);
        if (s6) {
          let u6 = s6.layers.get(lu);
          u6 && this.core.hasState(u6) && this.core.setState(u6, II(wt(xI, n, { warn: true }), this.core.getState(u6)));
        }
      });
      return;
    }
    if (t6 === "exterior-walls") {
      this.currentMap.floors.forEach((i) => {
        let s6 = i.layers.get(or);
        if (s6) {
          let u6 = s6.layers.get(ma);
          u6 && this.core.hasState(u6) && this.core.setState(u6, II(wt(xI, n, { warn: true }), this.core.getState(u6)));
        }
      });
      return;
    }
    if (t6 === "interior-doors") {
      this.currentMap.floors.forEach((i) => {
        let s6 = i.layers.get(or);
        if (s6) {
          let u6 = s6.layers.get(Vp);
          u6 && this.core.hasState(u6) && this.core.setState(u6, B4(wt(O4, n, { warn: true }), this.core.getState(u6)));
        }
      });
      return;
    }
    if (t6 === "exterior-doors") {
      this.currentMap.floors.forEach((i) => {
        let s6 = i.layers.get(or);
        if (s6) {
          let u6 = s6.layers.get(Hp);
          u6 && this.core.hasState(u6) && this.core.setState(u6, B4(wt(O4, n, { warn: true }), this.core.getState(u6)));
        }
      });
      return;
    }
    let o = typeof t6 == "string" ? this.getMapDataObject(t6) : t6;
    if (o) {
      if (o.__type !== Fi.__type && !this.core.hasState(o.id)) {
        Pt.warn(`Failed to update state for "${o.id}". No ${o.__type} found with that ID.`);
        return;
      }
      if (Ts.is(o)) return this.core.setState(o.id, qA(wt(YA, n, { warn: true }), this.core.getState(o.id)));
      if (Ca.is(o)) return this.core.setState(o.id, tO(wt(QA, n, { warn: true }), this.core.getState(o.id)));
      if (Cr2.is(o) || Un.is(o)) {
        let i = this.core.getState(o.id);
        i != null && this.core.setState(o.id, JA(wt(dI, n, { warn: true }), i));
      }
      if (Lo.is(o) && this.core.setState(o.id, wt(dI, n, { warn: true })), tc.is(o) && this.core.setState(o.id, wt(fO, n, { warn: true })), yn.is(o) && this.core.setState(o.id, B4(wt(O4, n, { warn: true }), this.core.getState(o.id))), ws.is(o) && this.core.setState(o.id, aO(wt(bI, n, { warn: true }))), nc.is(o)) {
        let { position: i, scale: s6, rotation: u6, ...l } = wt(yO, n, { warn: true }), c = l;
        i && (c.position = [i.longitude, i.latitude, i.verticalOffset]), s6 != null && (Array.isArray(s6) ? c.scale = s6 : c.scale = [s6, s6, s6]), u6 != null && (Array.isArray(u6) ? c.rotation = u6 : c.rotation = [u6, u6, u6]), i && o.updateTarget(i), this.core.setState(o.id, c);
      }
      if (jn2.is(o)) {
        let i = this.currentMap.floorsById.get(o.id);
        if (i == null) return;
        let s6 = wt(HA, n, { warn: true });
        this.core.setState(o.id, s6);
        let u6 = i.layers.get(or);
        u6 != null && "geometry" in n && n.geometry && this.core.setState(u6.containerId, wt(NA, n.geometry, { warn: true }));
        let l = i.layers.get(fa);
        if (l != null && "labels" in n && n.labels) {
          let E = wt($A, n.labels, { warn: true });
          "enabled" in E && typeof E.enabled == "boolean" && l.setVisible(E.enabled);
        }
        let c = i.layers.get(yi);
        if (c != null && "markers" in n && n.markers) {
          let E = wt(jA, n.markers, { warn: true });
          "enabled" in E && typeof E.enabled == "boolean" && c.setVisible(E.enabled);
        }
        let d = i.layers.get(Zp);
        d != null && "footprint" in n && n.footprint && this.core.setState(d.containerId, wt(RA, n.footprint, { warn: true }));
        let f = i.layers.get(xl2);
        if (f != null && "occlusion" in n && n.occlusion) {
          let E = wt(GA, n.occlusion, { warn: true });
          "enabled" in E && typeof E.enabled == "boolean" && f.setVisible(E.enabled);
        }
        let h = i.layers.get(Wp);
        if (h != null && "images" in n && n.images) {
          let E = wt(UA, n.images, { warn: true });
          "visible" in E && typeof E.visible == "boolean" && h.setVisible(E.visible);
        }
        let b = i.layers.get(ha);
        if (b != null && "paths" in n && n.paths != null) {
          let E = wt(zA, n.paths, { warn: true });
          E.visible != null && typeof E.visible == "boolean" && b.setVisible(E.visible);
        }
        let I = i.layers.get(Il);
        if (I != null && "areas" in n && n.areas != null) {
          let E = wt(VA, n.areas, { warn: true });
          E.visible != null && typeof E.visible == "boolean" && I.setVisible(E.visible);
        }
      }
      if (Rr.is(o)) {
        let i = this.core.getState(o.id);
        for (let s6 of i.children) s6.type === "group-container" && this.core.setState(s6.id, wt(wA, n, { warn: true }));
      }
      if (Ou.is(o) && this.core.setState(o.id, wt(cO, n, { warn: true })), Fi.is(o)) for (let i of o.segments) this.core.setState(i.id, wt(gI, n, { warn: true }));
      Mu.is(o) && this.core.setState(o.id, wt(gI, n, { warn: true }));
    }
  }
  getMapDataObject(t6) {
    return this.getMapDataInternal()?.getMapDataById(t6);
  }
  getMapDataInternal() {
    if (this.mapData) return Sm(this.mapData);
  }
  getMapData() {
    return this.mapData;
  }
  addMap(t6, n) {
    return new Promise((o) => {
      let i;
      try {
        i = Sm(t6);
      } catch (h) {
        Pt.error("Error adding map", h), o(t6);
        return;
      }
      this.mapDataExternal[t6.mapName] = t6, this.mapData = t6;
      let { mvf: s6 } = i, u6 = s6["manifest.geojson"].features[0].geometry.coordinates;
      this.core.mode !== "outdoors-overlay" && this.Camera.set({ center: new ge2(u6[1], u6[0]) });
      let l = s6["manifest.geojson"].features[0].properties.name, c = new $0(`mapObject-${l}`, i, n, this);
      this.currentMap = c, this.currentMap.loadAllFloors(), this.currentMap.setFloor(this.currentMap.startingFloorId);
      let d = this.core.getBoundingArea(c.currentFloor.id);
      d == null && Pt.error("Could not determine bounding box for map:", c.currentFloor.id);
      let f = n?.outdoorView?.layersHiddenByGeometry ?? [];
      if (f.length > 0) {
        let h, b = [];
        for (let I of c.floorStacksById.values()) if (I.defaultFloor.footprint && I.defaultFloor.footprint.geometry != null && I.defaultFloor.footprint.geometry?.coordinates.length > 0) {
          let E = I.defaultFloor.footprint, v6 = Vy(E);
          h == null ? h = v6 : Ww(h, v6), b.push(E);
        }
        b.length > 0 && h != null && (this.core.hideOutdoorLayersIntersectingPolygons(h, b, f), this.hiddenOutdoorGeometries.push([h, b, f]));
      }
      if (this.mapObjects.push(c), i.getMVFFeatureByType("floor").forEach((h) => {
        this.mapsByFloorId[h.id] = c;
      }), c.on("floor-change-start", (h) => {
        this.externalPubSub.publish("floor-change-start", { reason: h.reason, floor: this.getMapDataInternal()?.getById("floor", h.floorId) ?? this.currentFloor, previousFloor: this.getMapDataInternal()?.getById("floor", h.previousFloorId) ?? this.currentFloor });
      }), c.on("floor-change", (h) => {
        this.externalPubSub.publish("floor-change", { reason: h.reason, floor: this.currentFloor, previousFloor: this.getMapDataInternal()?.getById("floor", h.previousFloorId) ?? this.currentFloor }), this.externalPubSub.publish("state-change-internal", { currentFloor: this.currentFloor, currentFloorStack: this.currentFloorStack });
      }), n?.zoomLevel != null) this.core.camera.setZoomLevel(n.zoomLevel), o(t6);
      else if (this.core.mode !== "outdoors-overlay" && d) {
        let h = n?.screenOffsets ?? { top: W4 * this.core.canvasHeight, left: W4 * this.core.canvasWidth, right: W4 * this.core.canvasWidth, bottom: W4 * this.core.canvasHeight };
        this.core.camera.focusOn(d, { duration: kw, padding: h }).then(() => {
          this.Camera.setElevation(this.currentFloor.elevation), o(t6);
        });
      } else o(t6);
    });
  }
  setFloor(t6, n) {
    return this.currentMap.setFloor(yf(t6), n);
  }
  setFloorStack(t6, n) {
    return this.currentMap.setFloorStack(yf(t6), n);
  }
  updateWatermark(t6) {
    this.core.updateWatermark(t6);
  }
  get currentFloorStack() {
    let t6 = this.currentMap.currentFloorStack.id;
    if (!t6) throw new $a("Missing currentFloorStack.");
    let n = this.mapData?.getById("floor-stack", t6);
    if (!n) throw new $a("FloorStack was not found in map data.");
    return n;
  }
  get currentFloor() {
    let t6 = this.currentMap.currentFloor.id;
    if (!t6) throw new $a("Missing currentFloor object from GeoJsonApi");
    let n = this.mapData?.getById("floor", t6);
    if (!n) throw new $a("Missing currentFloor");
    return n;
  }
  getState(t6) {
    typeof t6 == "object" && Fi.is(t6) && Pt.warn("Cannot get state of a Path directly. Use getState() on individual segments within Path.segments[] instead.");
    let n = Zw(t6, this), o = this.core.getState(n);
    if (o) {
      if (["interior-walls", "exterior-walls"].includes(t6) && o.type === "geometry-group") return mO(o);
      if (["interior-doors", "exterior-doors"].includes(t6) && o.type === "geometry-group") return DA(o);
      if (o.type === "geometry") return XA(o);
      if (o.type === "label" && o.options.appearance && o.options.rank !== void 0 && o.options.interactive !== void 0) return KA(o);
      if (o.type === "marker" && o.options?.rank !== void 0 && o.options.interactive !== void 0) return eO(o, this.Markers.getById(o.id.toString())?.marker);
      if (o.type === "model") return bO(o);
      if (o.type === "image") return hO(o);
      if (o.type === "text3d") return pO(o);
      if (o.type === "geometry-group" && t6 && typeof t6 != "string" && ws.is(t6)) return iO(o);
      if (o.type === "path") return nO(o);
      if (o.type === "group-container" && typeof t6 != "string" && jn2.is(t6)) return ZA(o, this.currentMap.floorsById.get(t6.id), this.core);
      if (o.type === "group-container" && o.children.length > 0 && typeof t6 != "string" && Rr.is(t6)) {
        let i = this.core.getState(o.children[0].id);
        return FA(i);
      }
    }
  }
  setHoverColor(t6) {
    this.core.setState({ hoverColor: t6 });
  }
  getHoverColor() {
    let t6 = this.core.getState();
    return t6?.type === "map-view" ? t6.hoverColor : void 0;
  }
  createCoordinateFromScreenCoordinate(t6, n, o) {
    if (o != null) {
      let c = this.core.projectScreenXYToCoordinate(t6, n, true);
      return c ? new ge2(c.coordinate[1], c.coordinate[0], o.id) : void 0;
    }
    let i = this.core.projectScreenXYToCoordinate(t6, n);
    if (i == null || i.coordinate == null) return;
    let { coordinate: s6, groupContainers: u6 } = i, l = u6?.find((c) => {
      let d = c.userData.entityId.toString();
      return d.includes("f_") || d.includes("m_");
    })?.userData.entityId.toString();
    return new ge2(s6[1], s6[0], l);
  }
  getScreenCoordinateFromCoordinate(t6) {
    let n = 0;
    if (t6.floorId != null) {
      let o = this.mapData?.getById("floor", t6.floorId);
      o != null && (n = this.getState(o)?.altitude ?? 0);
    }
    return this.core.projectCoordinateToScreenXY([t6.longitude, t6.latitude, n]);
  }
  isInView(t6) {
    return this.core.isInView(typeof t6 == "string" ? t6 : t6.id);
  }
  getInView(t6, n) {
    let o = this.core.queryGeometry2DInView({ screenOffsets: n?.screenOffsets, fullyContains: n?.fullyContains });
    if (o.length === 0) return [];
    let i = [];
    switch (t6) {
      case Ts.__type:
        i = o.map((s6) => this.Labels.getById(s6)).filter((s6) => s6 != null).map((s6) => s6.label);
        break;
      case Ca.__type:
        i = o.map((s6) => this.Markers.getById(s6)).filter((s6) => s6 != null).map((s6) => s6.marker);
    }
    return i;
  }
  async __EXPERIMENTAL__auto() {
    let t6 = this.getMapDataInternal();
    if (!t6) throw new Error("Map data not found");
    return await UO(t6, this);
  }
  tween(t6) {
    let n = new Ii(t6);
    return this.core.getExternalTweenGroup().add(n), this.core.render(), n;
  }
  removeTween(t6) {
    this.core.getExternalTweenGroup().remove(t6);
  }
  tweenGroup() {
    return this.core.getExternalTweenGroup();
  }
  get __core() {
    return this.core;
  }
  getCameraState() {
    return this.core.camera.getState();
  }
  getNavigationState() {
    return { isMultiFloor: this.Navigation.isMultiFloor, floorStacks: this.Navigation.floorStacks, floors: this.Navigation.floors, activeDirections: this.Navigation.activeDirections, activePath: this.Navigation.activePath, paths: this.Navigation.paths };
  }
  getAllState() {
    return { currentFloor: this.currentFloor, currentFloorStack: this.currentFloorStack, Camera: this.getCameraState(), Navigation: this.getNavigationState(), manualFloorVisibility: this.manualFloorVisibility };
  }
  publishAllState() {
    this.externalPubSub.publish("state-change-internal", this.getAllState());
  }
  clear() {
    this.Navigation.clear(), this.Shapes.removeAll(), this.Paths.removeAll(), this.Models.removeAll(), this.Markers.removeAll(), this.Image3D.removeAll(), this.Labels.removeAll();
  }
  destroy() {
    this.clear(), this.core.destroy();
  }
  getOptimalVisualDistanceBetweenFloors(t6, n = false) {
    let o = this.currentMap;
    if (!o) {
      Pt.error("Cannot compute optimal visual distance between floors. Missing current map.");
      return;
    }
    if (t6.length < 2) {
      Pt.warn("Cannot compute optimal visual distance between floors. Must provide at least 2 floors.");
      return;
    }
    let i = o.renderer.getInternalState().geometry3DMap.get(t6[0].id), s6 = o.renderer.getInternalState().geometry3DMap.get(t6[1].id);
    if (!i || !s6) {
      Pt.warn("Cannot compute optimal visual distance between floors. Floors not found in current map.");
      return;
    }
    if (U5(i, "group-container"), U5(s6, "group-container"), n) {
      let l = new Ie();
      l.setFromObject(i);
      let c = new Ie();
      if (c.setFromObject(s6), i.children.forEach((v6) => {
        v6 instanceof ve && v6.userData.debugBox && ox(v6);
      }), s6.children.forEach((v6) => {
        v6 instanceof ve && v6.userData.debugBox && ox(v6);
      }), !qM(l) || !qM(c)) return;
      let d = new ki(l.max.x - l.min.x, l.max.y - l.min.y, l.max.z - l.min.z), f = new ps({ color: 255, transparent: true, opacity: 0.5 }), h = new ve(d, f);
      h.position.set((l.min.x + l.max.x) / 2, (l.min.y + l.max.y) / 2, (l.min.z + l.max.z) / 2), h.userData.debugBox = true;
      let b = new ki(c.max.x - c.min.x, c.max.y - c.min.y, c.max.z - c.min.z), I = new ps({ color: "cyan", transparent: true, opacity: 0.5 }), E = new ve(b, I);
      E.position.set((c.min.x + c.max.x) / 2, (c.min.y + c.max.y) / 2, (c.min.z + c.max.z) / 2), E.userData.debugBox = true, i.add(h), s6.add(E);
    }
    let u6 = o.renderer.computeMinZOffsetBetweenContainers(i, s6);
    if (u6 !== -1) return u6;
  }
};
uh = /* @__PURE__ */ new WeakMap(), lh = /* @__PURE__ */ new WeakMap();
function fZ(e6) {
  if (e6 === "") {
    Y2(""), J2("");
    return;
  }
  J2(`${e6}/${x0e}`), Y2(`${e6}/${g0e}`);
}
$i();
var X4 = class {
  constructor(r6) {
    t(this, "state");
    t(this, "update");
    this.update = r6.Debug.update.bind(r6.Debug), this.state = r6.Debug.state;
  }
};
$i();
var GO = zod_default.strictObject({ environment: zod_default.union([zod_default.literal("basic"), zod_default.literal(false)]).optional(), text3d: zod_default.object({ hoverColor: zod_default.string().optional() }).optional(), geometry: zod_default.object({ hoverColor: zod_default.string().optional() }).optional(), backgroundColor: zod_default.string().optional(), backgroundAlpha: zod_default.number().optional() });
$i();
var OI = s(jC(), 1);
var hZ = (e6, r6) => {
  let t6 = {}, n = (o, i, s6) => {
    for (let u6 in i) {
      let l = o[u6], c = i[u6];
      typeof c == "object" && !Array.isArray(c) && c !== null && typeof l == "object" && !Array.isArray(l) && l !== null ? (s6[u6] = {}, n(l, c, s6[u6])) : s6[u6] = l;
    }
  };
  return n(e6, r6, t6), t6;
};
var zO = (e6, r6) => {
  let t6 = hZ(e6, r6), n = (0, OI.default)({}, t6, r6), o = (0, OI.default)({}, t6), i = (s6, u6, l, c = o) => {
    for (let d in u6) {
      let f = s6[d], h = u6[d];
      if (typeof h == "number" && typeof f == "number") c[d] = f + (h - f) * l;
      else if (typeof h == "string" && typeof f == "string") {
        if (Zu(f) && Zu(h)) {
          let b = tN(f), I = tN(h);
          b && I ? c[d] = rN([b[0] + (I[0] - b[0]) * l, b[1] + (I[1] - b[1]) * l, b[2] + (I[2] - b[2]) * l]) : Pt.warn(`Color "${d}" could not be animated!`);
        }
      } else typeof h == "object" && h !== null && typeof f == "object" && f !== null ? i(f, h, l, c[d]) : Pt.warn(`Value "${d}" could not be animated!`);
    }
  };
  return (s6) => (s6 = Math.min(Math.max(s6, 0), 1), s6 === 0 ? e6 : s6 === 1 ? n : (i(t6, r6, s6), o));
};
var pc;
var re;
var Yo2;
var ch = class {
  constructor(r6) {
    v(this, pc);
    v(this, re);
    v(this, Yo2);
    t(this, "Camera");
    t(this, "Labels");
    t(this, "Text3D");
    t(this, "Markers");
    t(this, "Image3D");
    t(this, "Models");
    t(this, "Paths");
    t(this, "Exporter");
    t(this, "Navigation");
    t(this, "Style");
    t(this, "Shapes");
    t(this, "Outdoor");
    t(this, "update", () => {
      u(this, re).core.render();
    });
    t(this, "__LEGACY_GET_DIRECTIONS_SYNC", (r8, t10, n) => u(this, re).getMapData()?.__LEGACY_GET_DIRECTIONS_SYNC(r8, t10, n) ?? void 0);
    t(this, "getDirections", (r8, t10, n) => u(this, re).getMapData()?.getDirections(r8, t10, n) ?? Promise.resolve(void 0));
    t(this, "__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC", (r8, t10, n) => u(this, re).getMapData()?.__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC(r8, t10, n) ?? void 0);
    t(this, "getDirectionsMultiDestination", (r8, t10, n) => u(this, re).getMapData()?.getDirectionsMultiDestination(r8, t10, n) ?? Promise.resolve(void 0));
    t(this, "on", (r8, t10) => {
      u(this, pc).on(r8, t10);
    });
    t(this, "off", (r8, t10) => {
      u(this, pc).off(r8, t10);
    });
    t(this, "Debug");
    w(this, pc, new Ka()), w(this, Yo2, r6);
    let t6 = new sh(r6, this, u(this, pc));
    w(this, re, t6), this.Camera = u(this, re).Camera, this.Markers = u(this, re).Markers, this.Models = u(this, re).Models, this.Labels = u(this, re).Labels, this.Text3D = u(this, re).Text3D, this.Exporter = u(this, re).Exporter, this.Paths = u(this, re).Paths, this.Navigation = u(this, re).Navigation, this.Shapes = u(this, re).Shapes, this.Style = u(this, re).Style, this.Outdoor = u(this, re).Outdoor, this.Image3D = u(this, re).Image3D, u(this, Yo2).container.dataset.version = yc.env.npm_package_version, this.Debug = new X4(u(this, re).core);
  }
  updateState(r6, t6) {
    return u(this, re).updateState(r6, t6);
  }
  animateState(r6, t6, n) {
    let o = u(this, re).getState(r6);
    if (o == null) return Pt.warn(`Cannot animate state of ${r6}.`), new Promise((c) => c({ result: "completed" }));
    let i = zO(o, t6), s6 = u(this, re).tween({ percent: 0 }).to({ percent: 1 }, n?.duration ?? 1e3).onUpdate(({ percent: l }) => {
      u(this, re).updateState(r6, i(l));
    });
    n?.easing && n.easing in xa && s6.easing(xa[n.easing]);
    let u6 = new Promise((l) => {
      s6.onComplete(() => {
        u(this, re).removeTween(s6), l({ result: "completed" });
      }).onStop(() => {
        u(this, re).removeTween(s6), l({ result: "cancelled" });
      }), s6.start();
    });
    return u6.cancel = () => {
      s6.stop(), u(this, re).updateState(r6, i(0));
    }, u6;
  }
  updateGlobalState(r6) {
    try {
      GO.parse(r6);
    } catch (t6) {
      Pt.error("updateGlobalState", t6);
      return;
    }
    if (typeof r6 == "object") {
      let t6 = {};
      if (r6.text3d?.hoverColor && (t6.text3dHoverColor = r6.text3d.hoverColor), r6.geometry?.hoverColor && (t6.hoverColor = r6.geometry.hoverColor), r6.backgroundColor || r6.backgroundAlpha !== void 0) {
        let n = r6.backgroundColor ?? u(this, re).core.backgroundColor, o = r6.backgroundAlpha ?? u(this, re).core.backgroundAlpha;
        u(this, re).core.setBackgroundColor(n, o);
      }
      r6.environment != null && u(this, re).core.setEnvironment(r6.environment), u(this, re).core.setState(t6);
    }
  }
  get options() {
    return Rw(u(this, re).currentMap.options);
  }
  getGlobalState() {
    let r6 = u(this, re).core.getState();
    return { backgroundColor: u(this, re).core.backgroundColor, backgroundAlpha: u(this, re).core.backgroundAlpha, environment: u(this, re).core.getEnvironment(), geometry: { hoverColor: r6.hoverColor }, text3d: { hoverColor: r6.text3dHoverColor } };
  }
  getMapData() {
    if (u(this, re).mapData == null) throw new $a("MapData not found.");
    return u(this, re).mapData;
  }
  getDimensions() {
    return { width: u(this, Yo2).canvasWidth, height: u(this, Yo2).canvasHeight };
  }
  addMap(r6, t6) {
    return u(this, re).addMap(r6, t6);
  }
  setFloor(r6, t6) {
    return u(this, re).setFloor(r6, t6?.context);
  }
  setFloorStack(r6, t6) {
    return u(this, re).setFloorStack(r6, t6?.context);
  }
  preloadFloors(r6) {
    u(this, re).preloadFloors(r6);
  }
  tween(r6) {
    return u(this, re).tween(r6);
  }
  removeTween(r6) {
    u(this, re).removeTween(r6);
  }
  get tweenGroup() {
    return u(this, re).tweenGroup();
  }
  get currentFloorStack() {
    return u(this, re).currentFloorStack;
  }
  get currentFloor() {
    return u(this, re).currentFloor;
  }
  updateWatermark(r6) {
    u(this, re).updateWatermark(r6);
  }
  getState(r6) {
    return u(this, re).getState(r6);
  }
  setHoverColor(r6) {
    u(this, re).setHoverColor(r6);
  }
  getHoverColor() {
    return u(this, re).getHoverColor();
  }
  convertAltitudeToMercatorZoomLevel(r6) {
    return u(this, re).core.getSystems().cameraSystem.convertAltitudeToZoomLevel(r6);
  }
  convertMercatorZoomLevelToAltitude(r6) {
    return u(this, re).core.getSystems().cameraSystem.convertZoomLevelToAltitude(r6);
  }
  isInView(r6) {
    return u(this, re).isInView(r6);
  }
  getInView(r6, t6) {
    return u(this, re).getInView(r6, t6);
  }
  getMetersPerPixel() {
    return u(this, re).core.getMetersPerPixel();
  }
  getDistance(r6, t6) {
    return u(this, re).getMapData()?.getDistance(r6, t6);
  }
  createCoordinate(r6, t6, n) {
    return typeof r6 == "object" ? new ge2(r6) : new ge2(r6, t6, n?.id);
  }
  createCoordinateFromScreenCoordinate(r6, t6, n) {
    return u(this, re).createCoordinateFromScreenCoordinate(r6, t6, n);
  }
  getScreenCoordinateFromCoordinate(r6) {
    return u(this, re).getScreenCoordinateFromCoordinate(r6);
  }
  __EXPERIMENTAL__auto() {
    return u(this, re).__EXPERIMENTAL__auto();
  }
  get __core() {
    if (yc.env.INTERNAL === "true") return u(this, re).core;
    throw new Error("__core is not available.");
  }
  get container() {
    return u(this, Yo2).container;
  }
  publishAllState() {
    u(this, re).publishAllState();
  }
  clear() {
    u(this, re).clear();
  }
  destroy() {
    u(this, re).destroy();
  }
  async enableDebug(r6 = {}) {
    let { Inspector: t6 } = await import("./inspector-66PSYVJU-JD44QJWV.js");
    await new t6(this, u(this, re)).enable(r6);
  }
  async takeScreenshot(r6) {
    let t6 = { withOutdoorContext: r6?.withOutdoorContext ?? false }, n = u(this, Yo2).rendererDomElement;
    if (t6.withOutdoorContext) {
      let o = u(this, Yo2).map;
      if (!o) return await u(this, Yo2).renderSync(), n.toDataURL("image/png");
      o.loaded() || await new Promise((l) => {
        o.once("idle", l);
      });
      let i = o.getCanvas(), s6 = document.createElement("canvas"), u6 = s6.getContext("2d");
      if (s6.width = n.width, s6.height = n.height, !u6) throw new Error("Failed to get 2D context for composite canvas");
      return u6.drawImage(i, 0, 0, s6.width, s6.height), u6.drawImage(n, 0, 0, s6.width, s6.height), s6.toDataURL("image/png");
    }
    return await u(this, Yo2).renderSync(), n.toDataURL("image/png");
  }
  get manualFloorVisibility() {
    return u(this, re).manualFloorVisibility;
  }
  set manualFloorVisibility(r6) {
    u(this, re).manualFloorVisibility = r6;
  }
  getOptimalVisualDistanceBetweenFloors(r6) {
    return u(this, re).getOptimalVisualDistanceBetweenFloors(r6);
  }
  get __INTERNAL__hidePathsNotOnCurrentFloor() {
    return u(this, re).hidePathsNotOnCurrentFloor;
  }
  set __INTERNAL__hidePathsNotOnCurrentFloor(r6) {
    u(this, re).hidePathsNotOnCurrentFloor = !!r6;
  }
};
pc = /* @__PURE__ */ new WeakMap(), re = /* @__PURE__ */ new WeakMap(), Yo2 = /* @__PURE__ */ new WeakMap();
$i();
var gZ = 1e3 * 60 * 60 * 2;
var Lu2;
var Yd;
var Lt;
var Ma;
var Li;
var Ko;
var Ri;
var Kd;
var qd;
var ph;
var Gt;
var VO;
var HO;
var Jd;
var J42;
var BI;
var PI;
var kI;
var Qd = class {
  constructor(r6, t6) {
    v(this, Gt);
    v(this, Lu2, new Ka());
    v(this, Yd);
    v(this, Lt);
    v(this, Ma);
    v(this, Li);
    v(this, Ko);
    v(this, Ri);
    v(this, Kd);
    v(this, qd);
    v(this, ph, () => {
      "key" in u(this, Lt) && "secret" in u(this, Lt) && x(this, Gt, Jd).call(this), x(this, Gt, J42).call(this);
    });
    t(this, "on", (r8, t10) => u(this, Lu2).on(r8, t10));
    t(this, "off", (r8, t10) => u(this, Lu2).off(r8, t10));
    w(this, Yd, r6), w(this, Lt, t6);
  }
  setMapIds(r6) {
    w(this, Yd, r6);
  }
  setEnterprise(r6) {
    u(this, Lt).enterprise = r6;
  }
  async readySync() {
    if ((!("key" in u(this, Lt)) || !("secret" in u(this, Lt))) && !("accessToken" in u(this, Lt))) {
      Pt.error("No API keys or access token provided! Cannot preload tokens.");
      return;
    }
    let r6 = [x(this, Gt, Jd).call(this), null];
    u(this, Lt).enterprise || (r6[1] = this.getSasTokensAsync());
    let [t6, n] = await Promise.all(r6);
    x(this, Gt, kI).call(this), x(this, Gt, BI).call(this, t6), n != null && x(this, Gt, PI).call(this, n), M5() && globalThis.addEventListener?.("focus", u(this, ph));
  }
  async refreshing() {
    let r6 = [];
    return u(this, Ma) != null && r6.push(u(this, Ma)), u(this, Li) != null && r6.push(u(this, Li)), Promise.all(r6);
  }
  getAccessTokenAsync() {
    return x(this, Gt, Jd).call(this);
  }
  getSasTokensAsync() {
    return x(this, Gt, J42).call(this);
  }
  getAccessToken() {
    return u(this, Ko) == null ? (Pt.error("Tokens must be loaded before reading synchronously! Try awaiting readySync() first."), { token: "" }) : u(this, Ko);
  }
  getSasToken(r6) {
    return this.isEnterpriseMode() ? (Pt.error("SAS tokens are not available in the enterprise mode!"), { token: "" }) : u(this, Ri) == null ? (Pt.error("Tokens must be loaded before reading synchronously! Try awaiting readySync() first."), { token: "" }) : r6 in u(this, Ri).tokens ? u(this, Ri).tokens[r6] : (Pt.error(`SAS token for map ${r6} not found!`), { token: "" });
  }
  isEnterpriseMode() {
    return u(this, Lt).enterprise ?? false;
  }
  destroy() {
    x(this, Gt, kI).call(this), u(this, Lu2).destroy(), M5() && globalThis.removeEventListener("focus", u(this, ph));
  }
};
Lu2 = /* @__PURE__ */ new WeakMap(), Yd = /* @__PURE__ */ new WeakMap(), Lt = /* @__PURE__ */ new WeakMap(), Ma = /* @__PURE__ */ new WeakMap(), Li = /* @__PURE__ */ new WeakMap(), Ko = /* @__PURE__ */ new WeakMap(), Ri = /* @__PURE__ */ new WeakMap(), Kd = /* @__PURE__ */ new WeakMap(), qd = /* @__PURE__ */ new WeakMap(), ph = /* @__PURE__ */ new WeakMap(), Gt = /* @__PURE__ */ new WeakSet(), VO = function(r6) {
  let t6 = r6.token !== u(this, Ko)?.token;
  w(this, Ko, r6), t6 && u(this, Lu2).publish("access-token-refreshed", { accessToken: r6 });
}, HO = function(r6) {
  let t6 = JSON.stringify(r6.tokens) !== JSON.stringify(u(this, Ri)?.tokens);
  w(this, Ri, r6), t6 && u(this, Lu2).publish("sas-tokens-refreshed", { sasTokens: r6.tokens });
}, Jd = async function(r6 = false) {
  if ("accessToken" in u(this, Lt) && typeof u(this, Lt).accessToken == "string") {
    let t6 = { token: u(this, Lt).accessToken, expires: Date.now() + 72e5 };
    return w(this, Ko, t6), t6;
  }
  if (!("key" in u(this, Lt)) || !("secret" in u(this, Lt)) || typeof u(this, Lt).key != "string" || typeof u(this, Lt).secret != "string") throw new Error("No API keys or access token provided!");
  return u(this, Ma) != null ? u(this, Ma) : u(this, Ko) != null && u(this, Ko).expires != null && u(this, Ko).expires > Date.now() && !r6 ? u(this, Ko) : (w(this, Ma, pf({ ...u(this, Lt), key: u(this, Lt).key, secret: u(this, Lt).secret }, u(this, Lt).enterprise ?? false).then((t6) => {
    let n = { token: t6.accessToken, expires: t6.expiresTimestamp * 1e3 };
    return x(this, Gt, VO).call(this, n), n;
  }).catch((t6) => {
    throw t6;
  }).finally(() => {
    w(this, Ma, void 0);
  })), u(this, Ma));
}, J42 = async function(r6 = false) {
  return this.isEnterpriseMode() ? { tokens: {}, expires: 1 / 0 } : u(this, Li) != null ? u(this, Li) : u(this, Ri) != null && u(this, Ri).expires > Date.now() && !r6 ? u(this, Ri) : (w(this, Li, new Promise((t6, n) => {
    x(this, Gt, Jd).call(this).then((o) => {
      let i = {}, s6 = u(this, Yd).map((u6) => Z3({ ...u(this, Lt), mapId: u6 }, o.token).then((l) => {
        i[u6] = { token: l.token, expires: l.expires };
      }).catch((l) => {
        Pt.error(`Error getting SAS token for map ${u6}:`, l);
      }));
      Promise.all(s6).then(() => {
        let u6 = { tokens: i, expires: Math.min(...Object.values(i).map((l) => l.expires ?? 1 / 0)) };
        x(this, Gt, HO).call(this, u6), t6(u6);
      });
    }).catch((o) => {
      n(o);
    });
  })), u(this, Li).catch((t6) => {
    throw t6;
  }).finally(() => {
    w(this, Li, void 0);
  }), u(this, Li));
}, BI = function(r6) {
  if (!("key" in u(this, Lt)) || !("secret" in u(this, Lt))) return;
  let t6 = r6.expires != null ? r6.expires - Date.now() : gZ;
  isFinite(t6) && w(this, Kd, setTimeout(() => {
    x(this, Gt, Jd).call(this, true).then((n) => {
      x(this, Gt, BI).call(this, n);
    });
  }, t6 - XT));
}, PI = function(r6) {
  let t6 = r6.expires - Date.now();
  isFinite(t6) && w(this, qd, setTimeout(() => {
    x(this, Gt, J42).call(this, true).then((n) => {
      x(this, Gt, PI).call(this, n);
    });
  }, t6 - KT));
}, kI = function() {
  u(this, Kd) != null && clearTimeout(u(this, Kd)), u(this, qd) != null && clearTimeout(u(this, qd));
};
$i();
var yZ = async (e6, r6) => {
  let t6 = ("mvfVersion" in (r6 ?? {}) ? r6?.mvfVersion : void 0) ?? ("options" in e6 && "version" in (e6.options ?? {}) ? e6.options?.version : void 0), n = { prefetchTokens: true, ...r6 || {}, mvfVersion: t6 }, o, i = ou();
  i.updateByUserOption(n);
  let s6 = {};
  if ("type" in e6 && typeof e6.type == "string") {
    if (s6.enterprise = e6.options?.enterprise, e6.type === "binary" && e6.main instanceof Uint8Array) {
      o = await Ay(e6.main, n.mvfVersion), s6.languagePacks = [];
      for (let I of e6.languagePacks ?? []) I.localePack instanceof Uint8Array && s6.languagePacks.push({ language: I.language, localePack: await Tp(I.localePack) });
    } else if (e6.type === "json") o = e6.main, s6.languagePacks = e6.languagePacks ?? [];
    else throw new Error("Invalid backup type");
    e6.type === "binary" && e6.main instanceof Uint8Array && (s6.binaryBundle = e6.main);
  } else o = e6, s6.enterprise = o.enterprise != null;
  i.setEnterprise(s6.enterprise ?? false);
  let u6 = My(o), l = u6.length > 0 ? u6 : [n.mapId];
  n.baseAuthUri = i.getBaseAuthUri();
  let c = new Qd(l, { ...n, enterprise: s6.enterprise }), d;
  if ("accessToken" in n && n.accessToken) d = n.accessToken;
  else if ("key" in n && "secret" in n) {
    let I;
    try {
      I = await c.getAccessTokenAsync();
    } catch (E) {
      Pt.error("Failed getting token during hydrateMapData", E);
    }
    d = I?.token || "";
  }
  if (s6.outdoorViewToken = d, s6.env = i, s6.getMapDataOptions = n, n.prefetchTokens) try {
    await c.readySync();
  } catch (I) {
    Pt.error("Failed to ready token manager!", I);
  }
  _f() && (s6.enterprise && Pt.warn("forceEnterpriseLocations is enabled, but the map is already an enterprise map!"), n.mvfVersion !== "3.0.0" && Pt.warn("mvfVersion must be '3.0.0' when forceEnterpriseLocations is enabled!"));
  let f = new Nl(o, s6);
  d && f.Analytics.init({ accessToken: d, mapId: n.mapId, key: "key" in n ? n.key : void 0, secret: "secret" in n ? n.secret : void 0, ...n.analytics, baseUri: i.getAnalyticsBaseUri(), context: n.analytics?.context });
  let h = new Cm(f), b = f.findPreferredLanguage({ languageCode: n.language, fallbackToNavigatorLanguage: false });
  if (b) try {
    await h.changeLanguage(b.code);
  } catch {
  }
  return typeof r6?.onMVFParsed == "function" && r6.onMVFParsed(o), h;
};
$i();
var ZO = (e6, { id: r6 } = {}) => {
  let t6 = Array.isArray(e6) ? e6 : [e6];
  if (!t6.every((i) => typeof i == "string")) return;
  let n = t6.join(""), o = null;
  if (r6) {
    let i = document.getElementById(r6);
    i instanceof HTMLStyleElement && (o = i);
  }
  o == null && (o = document.createElement("style")), r6 && r6 !== "" && (o.id = r6), o.textContent = n, document.head.appendChild(o);
};
var WO = `:root {
	--pin-shadow-hover-scale: 0.9;
	--pin-shadow-width: 12px;
	--pin-shadow-height: 5px;
	--pin-shadow-opacity: 0.35;
	--pin-drop-animation-duration-ms: 250ms;
}

@keyframes drop-pin {
	0% {
		transform: translateY(-200%);
	}

	100% {
		transform: translateY(0);
	}
}

@keyframes pin-shadow {
	0% {
		transform: scale(var(--pin-shadow-hover-scale));
	}

	100% {
		transform: scale(1);
	}
}

.mappedin-dropped-pin-wrapper {
	position: relative;

	width: fit-content;
	height: fit-content;
	width: 36px;
	height: 42px;

	& svg {
		position: absolute;
		left: calc(50% - var(--pin-shadow-width));
		animation: drop-pin var(--pin-drop-animation-duration-ms) ease-in;
	}

	& > .pin-shadow {
		position: absolute;
		left: calc(50% - (var(--pin-shadow-width) / 2));
		bottom: 0;

		height: var(--pin-shadow-height);
		width: var(--pin-shadow-width);
		border-radius: 100%;

		opacity: var(--pin-shadow-opacity);

		animation: pin-shadow 250ms ease-in;
	}
}

@keyframes bounce {
	0% {
		transform: translateY(-10px);
		opacity: 0;
	}
	12.5% {
		transform: translateY(0);
		opacity: 1;
	}
	25% {
		transform: translateY(0);
	}
	37.5% {
		transform: translateY(-10px);
	}
	50% {
		transform: translateY(0);
	}
	62.5% {
		transform: translateY(-10px);
	}
	75% {
		transform: translateY(0);
	}
	87.5% {
		transform: translateY(-10px);
	}
	100% {
		transform: translateY(0);
	}
}

.mappedin-connection-marker {
	position: relative;
	display: flex;

	.bouncey {
		animation: bounce 2.5s linear;
	}

	.arrow--down {
		transform: rotate(180deg);
	}

	.connection-circle {
		display: flex;
		box-sizing: border-box;
		justify-content: center;
		align-items: center;
		border-radius: 50%;
		border: 2px solid white;
		box-shadow: 0px 2px 8px 0px rgba(0, 0, 0, 0.15);
		background: #595959;
	}
}
`;
var XO = `.mappedin-marker {
	font-family: 'InterUI-Regular', Helvetica, Arial, sans-serif;
	font-weight: normal;
	top: 0;
	position: absolute;
	font-weight: bold;
	color: black;
	display: flex;
	flex-direction: row;
	will-change: transform, opacity;
	transition: opacity 150ms ease-in-out;
	justify-content: center;
	opacity: 0;
}

/* Low priority pin strategy styles */

/* Hide child elements as well */
.mappedin-marker[data-placement='hidden'] > .mappedin-marker-content {
	visibility: hidden;
}

/* Create the pin using ::before pseudo-element */
.mappedin-marker::before {
	content: '';
	display: none;
	border-radius: 50%;
	position: relative;
	/* Default values - will be overridden by inline styles */
	width: var(--mappedin-pin-size, 2px);
	height: var(--mappedin-pin-size, 2px);
	background-color: var(--pin-color, #666);
}

.mappedin-marker[data-placement='hidden']::before {
	display: block;
}
`;
var JO = `.mappedin__smart-collision-engine__container {
	position: absolute;
	left: 0px;
	top: 0px;
	bottom: 0px;
	right: 0px;
	pointer-events: none;
	/* Enables colliders to use translate3D */
	transform-style: preserve-3d;
	font-family: 'InterUI-Regular', Helvetica, Arial, sans-serif;
}

.mappedin__smart-collision-engine-debug__container {
	position: absolute;
	left: 0px;
	top: 0px;
	bottom: 0px;
	right: 0px;
	transition: opacity 300ms ease-in-out;
	pointer-events: none;
	will-change: opacity;
	&.interacting {
		opacity: 0.2;
	}
}
`;
var YO = `.mappedin-map {
	.mappedin-interactive {
		cursor: grab;

		&:active {
			cursor: grabbing;
		}

		&.mappedin-interaction-hover {
			cursor: pointer;
		}
	}
}
`;
var KO = `.mappedin-map {
	.mappedin-control-container {
		position: absolute;
		left: 0px;
		top: 0px;
		bottom: 0px;
		right: 0px;
		pointer-events: none;
		font-family: 'InterUI-Regular', Helvetica, Arial, sans-serif;

		.mappedin-ctrl-top-left,
		.mappedin-ctrl-top-right,
		.mappedin-ctrl-bottom-left,
		.mappedin-ctrl-bottom-right {
			position: absolute;
			pointer-events: none;
		}

		.mappedin-ctrl-top-left {
			top: 0;
			left: 0;
		}

		.mappedin-ctrl-top-right {
			top: 0;
			right: 0;
		}

		.mappedin-ctrl-bottom-left {
			bottom: 0;
			left: 0;
		}

		.mappedin-ctrl-bottom-right {
			bottom: 0;
			right: 0;
		}

		.mappedin-ctrl-attrib {
			display: block;
			position: relative;
			pointer-events: auto;
			font: 9px/11px 'InterUI-Regular', Helvetica, Arial, sans-serif;
			padding: 3px 5px 1px 5px;
			background-color: rgba(255, 255, 255, 0.5);
			margin: 0;
			min-width: 11px;
			min-height: 11px;
			user-select: none;

			summary.mappedin-ctrl-attrib-button {
				appearance: none;
				list-style: none;
			}

			summary.mappedin-ctrl-attrib-button::-webkit-details-marker {
				display: none;
			}

			&.mappedin-compact .mappedin-ctrl-attrib-button,
			&.mappedin-compact-show .mappedin-ctrl-attrib-inner {
				display: inline-block;
			}

			&.mappedin-compact {
				background-color: transparent;
			}

			&.mappedin-compact-show {
				min-width: 15px;
				min-height: 15px;
				box-sizing: border-box;
				background-color: rgba(255, 255, 255, 0.5);
			}
		}

		.mappedin-ctrl-attrib-top-left {
			float: left;
			border-bottom-right-radius: 4px;
		}

		.mappedin-ctrl-attrib-top-right {
			float: right;
			border-bottom-left-radius: 4px;
		}

		.mappedin-ctrl-attrib-bottom-left {
			float: left;
			border-top-right-radius: 4px;
		}

		.mappedin-ctrl-attrib-bottom-right {
			float: right;
			border-top-left-radius: 4px;
		}
		.mappedin-ctrl-attrib-top-left,
		.mappedin-ctrl-attrib-bottom-left {
			padding: 3px 5px 1px 20px;
		}

		.mappedin-ctrl-attrib-inner {
			display: inline-block;
			margin-right: 12px;
		}

		.mappedin-ctrl-attrib-inner,
		.mappedin-ctrl-attrib-inner a {
			color: rgba(0, 0, 0, 0.75);
			text-decoration: none;
		}

		.mappedin-ctrl-attrib-inner-bold,
		.mappedin-ctrl-attrib-inner-bold a {
			font-weight: bold;
		}

		.mappedin-ctrl-attrib-inner a:hover {
			color: #017ef1;
			text-decoration: underline;
			cursor: pointer;
		}

		.mappedin-ctrl-attrib-button {
			display: none;
			cursor: pointer;
			position: absolute;
			width: 15px;
			height: 15px;
			box-sizing: border-box;
			border-radius: 50%;
			top: 0;
			right: 2px;
			border: 1px;
		}
		.mappedin-ctrl-attrib-top-left .mappedin-ctrl-attrib-button,
		.mappedin-ctrl-attrib-bottom-left .mappedin-ctrl-attrib-button {
			left: 2px;
		}
	}
}
`;
var qO = `.maplibregl-map {
    font: 12px/20px "Helvetica Neue", Arial, Helvetica, sans-serif;
    overflow: hidden;
    position: relative;
    -webkit-tap-highlight-color: rgb(0 0 0 / 0%);
}

.maplibregl-canvas {
    position: absolute;
    left: 0;
    top: 0;
}

.maplibregl-map:fullscreen {
    width: 100%;
    height: 100%;
}

.maplibregl-ctrl-group button.maplibregl-ctrl-compass {
    touch-action: none;
}

.maplibregl-canvas-container.maplibregl-interactive,
.maplibregl-ctrl-group button.maplibregl-ctrl-compass {
    cursor: grab;
    user-select: none;
}

.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer {
    cursor: pointer;
}

.maplibregl-canvas-container.maplibregl-interactive:active,
.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active {
    cursor: grabbing;
}

.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,
.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas {
    touch-action: pan-x pan-y;
}

.maplibregl-canvas-container.maplibregl-touch-drag-pan,
.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas {
    touch-action: pinch-zoom;
}

.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,
.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas {
    touch-action: none;
}

.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,
.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas {
    touch-action: pan-x pan-y;
}

.maplibregl-ctrl-top-left,
.maplibregl-ctrl-top-right,
.maplibregl-ctrl-bottom-left,
.maplibregl-ctrl-bottom-right {
    position: absolute;
    pointer-events: none;
    z-index: 2;
}

.maplibregl-ctrl-top-left {
    top: 0;
    left: 0;
}

.maplibregl-ctrl-top-right {
     top: 0;
     right: 0;
    }

.maplibregl-ctrl-bottom-left {
    bottom: 0;
    left: 0;
}

.maplibregl-ctrl-bottom-right {
     right: 0;
     bottom: 0;
}

.maplibregl-ctrl {
    clear: both;
    pointer-events: auto;

    /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
    transform: translate(0, 0);
}

.maplibregl-ctrl-top-left .maplibregl-ctrl {
    margin: 10px 0 0 10px;
     float: left;
}

.maplibregl-ctrl-top-right .maplibregl-ctrl {
    margin: 10px 10px 0 0;
    float: right;
}

.maplibregl-ctrl-bottom-left .maplibregl-ctrl {
    margin: 0 0 10px 10px;
    float: left;
}

.maplibregl-ctrl-bottom-right .maplibregl-ctrl {
    margin: 0 10px 10px 0;
    float: right;
}

.maplibregl-ctrl-group {
    border-radius: 4px;
    background: #fff;
}

.maplibregl-ctrl-group:not(:empty) {
    box-shadow: 0 0 0 2px rgb(0 0 0 / 10%);
}

@media (forced-colors: active) {
    .maplibregl-ctrl-group:not(:empty) {
        box-shadow: 0 0 0 2px ButtonText;
    }
}

.maplibregl-ctrl-group button {
    width: 29px;
    height: 29px;
    display: block;
    padding: 0;
    outline: none;
    border: 0;
    box-sizing: border-box;
    background-color: transparent;
    cursor: pointer;
}

.maplibregl-ctrl-group button + button {
    border-top: 1px solid #ddd;
}

.maplibregl-ctrl button .maplibregl-ctrl-icon {
    display: block;
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-position: center center;
}

@media (forced-colors: active) {
    .maplibregl-ctrl-icon {
        background-color: transparent;
    }

    .maplibregl-ctrl-group button + button {
        border-top: 1px solid ButtonText;
    }
}

/* https://bugzilla.mozilla.org/show_bug.cgi?id=140562 */
.maplibregl-ctrl button::-moz-focus-inner {
    border: 0;
    padding: 0;
}

.maplibregl-ctrl-attrib-button:focus,
.maplibregl-ctrl-group button:focus {
    box-shadow: 0 0 2px 2px rgb(0 150 255 / 100%);
}

.maplibregl-ctrl button:disabled {
    cursor: not-allowed;
}

.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon {
    opacity: 0.25;
}

@media (hover: hover) {
    .maplibregl-ctrl button:not(:disabled):hover {
        background-color: rgb(0 0 0/5%);
    }
}

.maplibregl-ctrl button:not(:disabled):active {
    background-color: rgb(0 0 0/5%);
}

.maplibregl-ctrl-group button:focus:focus-visible {
    box-shadow: 0 0 2px 2px rgb(0 150 255 / 100%);
}

.maplibregl-ctrl-group button:focus:not(:focus-visible) {
    box-shadow: none;
}

.maplibregl-ctrl-group button:focus:first-child {
    border-radius: 4px 4px 0 0;
}

.maplibregl-ctrl-group button:focus:last-child {
    border-radius: 0 0 4px 4px;
}

.maplibregl-ctrl-group button:focus:only-child {
    border-radius: inherit;
}

.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon {
    background-image: svg-load("svg/maplibregl-ctrl-zoom-out.svg", fill: #333);
}

.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon {
    background-image: svg-load("svg/maplibregl-ctrl-zoom-in.svg", fill: #333);
}

@media (forced-colors: active) {
    .maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-zoom-out.svg", fill: #fff);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-zoom-in.svg", fill: #fff);
    }
}

@media (forced-colors: active) and (prefers-color-scheme: light) {
    .maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-zoom-out.svg", fill: #000);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-zoom-in.svg", fill: #000);
    }
}

.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon {
    background-image: svg-load("svg/maplibregl-ctrl-fullscreen.svg", fill: #333);
}

.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon {
    background-image: svg-load("svg/maplibregl-ctrl-shrink.svg");
}

@media (forced-colors: active) {
    .maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-fullscreen.svg", fill: #fff);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-shrink.svg", fill: #fff);
    }
}

@media (forced-colors: active) and (prefers-color-scheme: light) {
    .maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-fullscreen.svg", fill: #000);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-shrink.svg", fill: #000);
    }
}

.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon {
    background-image: svg-load("svg/maplibregl-ctrl-compass.svg", fill: #333);
}

@media (forced-colors: active) {
    .maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon {
        @svg-load ctrl-compass-white url("svg/maplibregl-ctrl-compass.svg") {
            fill: #fff;
            #south { fill: #999; }
        }

        background-image: svg-inline(ctrl-compass-white);
    }
}

@media (forced-colors: active) and (prefers-color-scheme: light) {
    .maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon {
        background-image: svg-load("svg/maplibregl-ctrl-compass.svg", fill: #000);
    }
}

@svg-load ctrl-globe url("svg/maplibregl-ctrl-globe.svg") {
    stroke: #333;
}

@svg-load ctrl-globe-enabled url("svg/maplibregl-ctrl-globe.svg") {
    stroke: #33b5e5;
}

.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-globe);
}

.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-globe-enabled);
}

@svg-load ctrl-terrain url("svg/maplibregl-ctrl-terrain.svg") {
    fill: #333;
    
}

@svg-load ctrl-terrain-enabled url("svg/maplibregl-ctrl-terrain.svg") {
    fill: #33b5e5;
    
}

.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-terrain);
}

.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-terrain-enabled);
}

@svg-load ctrl-geolocate url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #333;
    #stroke { display: none; }
}

@svg-load ctrl-geolocate-white url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #fff;
    #stroke { display: none; }
}

@svg-load ctrl-geolocate-black url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #000;
    #stroke { display: none; }
}

@svg-load ctrl-geolocate-disabled url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #aaa;
    #stroke { fill: #f00; }
}

@svg-load ctrl-geolocate-disabled-white url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #999;
    #stroke { fill: #f00; }
}

@svg-load ctrl-geolocate-disabled-black url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #666;
    #stroke { fill: #f00; }
}

@svg-load ctrl-geolocate-active url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #33b5e5;
    #stroke { display: none; }
}

@svg-load ctrl-geolocate-active-error url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #e58978;
    #stroke { display: none; }
}

@svg-load ctrl-geolocate-background url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #33b5e5;
    #stroke { display: none; }
    #dot { display: none; }
}

@svg-load ctrl-geolocate-background-error url("svg/maplibregl-ctrl-geolocate.svg") {
    fill: #e54e33;
    #stroke { display: none; }
    #dot { display: none; }
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate-disabled);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate-active);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate-active-error);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate-background);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon {
    background-image: svg-inline(ctrl-geolocate-background-error);
}

.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon {
    animation: maplibregl-spin 2s infinite linear;
}

@media (forced-colors: active) {
    .maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-white);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-disabled-white);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-active);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-active-error);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-background);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-background-error);
    }
}

@media (forced-colors: active) and (prefers-color-scheme: light) {
    .maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-black);
    }

    .maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon {
        background-image: svg-inline(ctrl-geolocate-disabled-black);
    }
}

@keyframes maplibregl-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

a.maplibregl-ctrl-logo {
    width: 88px;
    height: 23px;
    margin: 0 0 -4px -4px;
    display: block;
    background-repeat: no-repeat;
    cursor: pointer;
    overflow: hidden;
    background-image: svg-load("svg/maplibregl-ctrl-logo.svg");
}

a.maplibregl-ctrl-logo.maplibregl-compact {
    width: 14px;
}

@media (forced-colors: active) {
    a.maplibregl-ctrl-logo {
        @svg-load ctrl-logo-white url("svg/maplibregl-ctrl-logo.svg") {
            #outline { opacity: 1; }
            #fill { opacity: 1; }
        }

        background-color: transparent;
        background-image: svg-inline(ctrl-logo-white);
    }
}

@media (forced-colors: active) and (prefers-color-scheme: light) {
    a.maplibregl-ctrl-logo {
        @svg-load ctrl-logo-black url("svg/maplibregl-ctrl-logo.svg") {
            #outline { opacity: 1; fill: #fff; stroke: #fff; }
            #fill { opacity: 1; fill: #000; }
        }

        background-image: svg-inline(ctrl-logo-black);
    }
}

.maplibregl-ctrl.maplibregl-ctrl-attrib {
    padding: 0 5px;
    background-color: rgb(255 255 255 / 50%);
    margin: 0;
}

@media screen {
    .maplibregl-ctrl-attrib.maplibregl-compact {
        min-height: 20px;
        padding: 2px 24px 2px 0;
        margin: 10px;
        position: relative;
        background-color: #fff;
        color: #000;
        border-radius: 12px;
        box-sizing: content-box;
    }

    .maplibregl-ctrl-attrib.maplibregl-compact-show {
        padding: 2px 28px 2px 8px;
        visibility: visible;
    }

    .maplibregl-ctrl-top-left > .maplibregl-ctrl-attrib.maplibregl-compact-show,
    .maplibregl-ctrl-bottom-left > .maplibregl-ctrl-attrib.maplibregl-compact-show {
        padding: 2px 8px 2px 28px;
        border-radius: 12px;
    }

    .maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner {
        display: none;
    }

    .maplibregl-ctrl-attrib-button {
        display: none;
        cursor: pointer;
        position: absolute;
        background-image: svg-load("svg/maplibregl-ctrl-attrib.svg");
        background-color: rgb(255 255 255 / 50%);
        width: 24px;
        height: 24px;
        box-sizing: border-box;
        border-radius: 12px;
        outline: none;
        top: 0;
        right: 0;
        border: 0;
    }

    .maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button {
        appearance: none;
        list-style: none;
    }

    .maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker {
        display: none;
    }

    .maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button,
    .maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button {
        left: 0;
    }

    .maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,
    .maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner {
        display: block;
    }

    .maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button {
        background-color: rgb(0 0 0 / 5%);
    }

    .maplibregl-ctrl-bottom-right > .maplibregl-ctrl-attrib.maplibregl-compact::after {
        bottom: 0;
        right: 0;
    }

    .maplibregl-ctrl-top-right > .maplibregl-ctrl-attrib.maplibregl-compact::after {
        top: 0;
        right: 0;
    }

    .maplibregl-ctrl-top-left > .maplibregl-ctrl-attrib.maplibregl-compact::after {
        top: 0;
        left: 0;
    }

    .maplibregl-ctrl-bottom-left > .maplibregl-ctrl-attrib.maplibregl-compact::after {
        bottom: 0;
        left: 0;
    }
}

@media screen and (forced-colors: active) {
    .maplibregl-ctrl-attrib.maplibregl-compact::after {
        background-image: svg-load("svg/maplibregl-ctrl-attrib.svg", fill=#fff);
    }
}

@media screen and (forced-colors: active) and (prefers-color-scheme: light) {
    .maplibregl-ctrl-attrib.maplibregl-compact::after {
        background-image: svg-load("svg/maplibregl-ctrl-attrib.svg");
    }
}

.maplibregl-ctrl-attrib a {
    color: rgb(0 0 0 / 75%);
    text-decoration: none;
}

.maplibregl-ctrl-attrib a:hover {
    color: inherit;
    text-decoration: underline;
}

.maplibregl-attrib-empty {
    display: none;
}

.maplibregl-ctrl-scale {
    background-color: rgb(255 255 255 / 75%);
    font-size: 10px;
    border-width: medium 2px 2px;
    border-style: none solid solid;
    border-color: #333;
    padding: 0 5px;
    color: #333;
    box-sizing: border-box;
}

.maplibregl-popup {
    position: absolute;
    top: 0;
    left: 0;
    display: flex;
    will-change: transform;
    pointer-events: none;
}

.maplibregl-popup-anchor-top,
.maplibregl-popup-anchor-top-left,
.maplibregl-popup-anchor-top-right {
    flex-direction: column;
}

.maplibregl-popup-anchor-bottom,
.maplibregl-popup-anchor-bottom-left,
.maplibregl-popup-anchor-bottom-right {
    flex-direction: column-reverse;
}

.maplibregl-popup-anchor-left {
    flex-direction: row;
}

.maplibregl-popup-anchor-right {
    flex-direction: row-reverse;
}

.maplibregl-popup-tip {
    width: 0;
    height: 0;
    border: 10px solid transparent;
    z-index: 1;
}

.maplibregl-popup-anchor-top .maplibregl-popup-tip {
    align-self: center;
    border-top: none;
    border-bottom-color: #fff;
}

.maplibregl-popup-anchor-top-left .maplibregl-popup-tip {
    align-self: flex-start;
    border-top: none;
    border-left: none;
    border-bottom-color: #fff;
}

.maplibregl-popup-anchor-top-right .maplibregl-popup-tip {
    align-self: flex-end;
    border-top: none;
    border-right: none;
    border-bottom-color: #fff;
}

.maplibregl-popup-anchor-bottom .maplibregl-popup-tip {
    align-self: center;
    border-bottom: none;
    border-top-color: #fff;
}

.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip {
    align-self: flex-start;
    border-bottom: none;
    border-left: none;
    border-top-color: #fff;
}

.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip {
    align-self: flex-end;
    border-bottom: none;
    border-right: none;
    border-top-color: #fff;
}

.maplibregl-popup-anchor-left .maplibregl-popup-tip {
    align-self: center;
    border-left: none;
    border-right-color: #fff;
}

.maplibregl-popup-anchor-right .maplibregl-popup-tip {
    align-self: center;
    border-right: none;
    border-left-color: #fff;
}

.maplibregl-popup-close-button {
    position: absolute;
    right: 0;
    top: 0;
    border: 0;
    border-radius: 0 3px 0 0;
    cursor: pointer;
    background-color: transparent;
}

.maplibregl-popup-close-button:hover {
    background-color: rgb(0 0 0 / 5%);
}

.maplibregl-popup-content {
    position: relative;
    background: #fff;
    border-radius: 3px;
    box-shadow: 0 1px 2px rgb(0 0 0 / 10%);
    padding: 15px 10px;
    pointer-events: auto;
}

.maplibregl-popup-anchor-top-left .maplibregl-popup-content {
    border-top-left-radius: 0;
}

.maplibregl-popup-anchor-top-right .maplibregl-popup-content {
    border-top-right-radius: 0;
}

.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content {
    border-bottom-left-radius: 0;
}

.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content {
    border-bottom-right-radius: 0;
}

.maplibregl-popup-track-pointer {
    display: none;
}

.maplibregl-popup-track-pointer * {
    pointer-events: none;
    user-select: none;
}

.maplibregl-map:hover .maplibregl-popup-track-pointer {
    display: flex;
}

.maplibregl-map:active .maplibregl-popup-track-pointer {
    display: none;
}

.maplibregl-marker {
    position: absolute;
    top: 0;
    left: 0;
    will-change: transform;
    transition: opacity 0.2s;
}

.maplibregl-user-location-dot {
    background-color: #1da1f2;
    width: 15px;
    height: 15px;
    border-radius: 50%;
}

.maplibregl-user-location-dot::before {
    background-color: #1da1f2;
    content: "";
    width: 15px;
    height: 15px;
    border-radius: 50%;
    position: absolute;
    animation: maplibregl-user-location-dot-pulse 2s infinite;
}

.maplibregl-user-location-dot::after {
    border-radius: 50%;
    border: 2px solid #fff;
    content: "";
    height: 19px;
    left: -2px;
    position: absolute;
    top: -2px;
    width: 19px;
    box-sizing: border-box;
    box-shadow: 0 0 3px rgb(0 0 0 / 35%);
}

@keyframes maplibregl-user-location-dot-pulse {
    0%   { transform: scale(1); opacity: 1; }
    70%  { transform: scale(3); opacity: 0; }
    100% { transform: scale(1); opacity: 0; }
}

.maplibregl-user-location-dot-stale {
    background-color: #aaa;
}

.maplibregl-user-location-dot-stale::after {
    display: none;
}

.maplibregl-user-location-accuracy-circle {
    background-color: #1da1f233;
    width: 1px;
    height: 1px;
    border-radius: 100%;
}

.maplibregl-crosshair,
.maplibregl-crosshair .maplibregl-interactive,
.maplibregl-crosshair .maplibregl-interactive:active {
    cursor: crosshair;
}

.maplibregl-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
}

.maplibregl-cooperative-gesture-screen {
    background: rgba(0 0 0 / 40%);
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    padding: 1rem;
    font-size: 1.4em;
    line-height: 1.2;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease 1s;
    z-index: 99999;
}

.maplibregl-cooperative-gesture-screen.maplibregl-show {
    opacity: 1;
    transition: opacity 0.05s;
}

.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message {
    display: none;
}

@media (hover: none), (pointer: coarse) {
    .maplibregl-cooperative-gesture-screen .maplibregl-desktop-message {
        display: none;
    }

    .maplibregl-cooperative-gesture-screen .maplibregl-mobile-message {
        display: block;
    }
}

.maplibregl-pseudo-fullscreen {
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
    top: 0 !important;
    left: 0 !important;
    z-index: 99999;
}
`;
$i();
function SZ(e6) {
  if (!(!e6.languages || !M5() || !globalThis.navigator?.languages?.length)) for (let r6 = 0; r6 < globalThis.navigator.languages.length; r6++) {
    let t6 = e6.languages.find((n) => n.code.toLowerCase() === globalThis.navigator.languages[r6].toLowerCase());
    if (t6) return { code: t6.code, name: t6.name };
  }
}
function l2(e6, r6) {
  let t6 = r6?.languageCode ?? "", n = r6?.fallbackToNavigatorLanguage ?? true, o = e6?.languages?.find((s6) => s6.code.toLowerCase() === t6.toLowerCase()), i;
  if (o) i = o;
  else if (n ?? true) try {
    let s6 = SZ(e6);
    s6 && (i = s6);
  } catch (s6) {
    Pt.error("fallbackToNavigatorLanguage is set, however, there was an error getting the navigator language", s6);
  }
  return i ?? e6.defaultLanguage;
}
var DZ = [WO, XO, JO, YO, KO, qO];
var QO;
function aRe(e6) {
  QO = e6;
}
var sRe = async (e6, r6) => {
  let t6, n = ou();
  r6 && n.updateByUserOption(r6);
  try {
    r6 && (t6 = (await pf({ ...r6, baseAuthUri: n.getBaseAuthUri() })).accessToken);
  } catch (s6) {
    Pt.warn("Getting access token failed. Outdoor map disabled.", s6);
  }
  let o = new Nl(e6, { outdoorViewToken: t6, languagePacks: r6?.languagePacks, env: n });
  return new Cm(o);
};
var e8 = false;
function uRe(e6) {
  e8 = e6;
}
var t8 = false;
function lRe(e6) {
  t8 = e6;
}
function _f() {
  return t8;
}
var TZ = async (e6) => {
  let r6 = e8, t6, n = ou();
  n.updateByUserOption(e6);
  let o = { prefetchTokens: true, ...e6, fallbackToNavigatorLanguage: e6.fallbackToNavigatorLanguage ?? true }, i = new Qd([o.mapId], o);
  if ("accessToken" in o && o.accessToken) {
    t6 = o.accessToken;
    let { aud: v6, sub: x6 } = T5(t6);
    (_w.some((D) => v6.includes(D)) || x6 && x6.startsWith("client")) && (r6 = true, n.setEnterprise(r6), i.setEnterprise(r6));
  } else if ("key" in o && "secret" in o) {
    if (o.key.startsWith("mipk_")) throw new Error(`Partner API keys detected! 

Partner API keys should not be passed directly to the SDK. See https://developer.mappedin.com/docs/rest-apis/partner for more details.`);
    o.key.startsWith("mik_") || (r6 = true, n.setEnterprise(r6), i.setEnterprise(r6)), o.baseAuthUri = n.getBaseAuthUri();
    let v6;
    try {
      v6 = await i.getAccessTokenAsync(), t6 = v6?.token;
    } catch (x6) {
      throw Pt.warn("Get access token failed", x6.message), new Error("Get access token failed: " + x6.message);
    }
  } else throw new Error("Missing key or secret.");
  o.layoutId != null && (r6 ? o.layoutId !== "draft" && Pt.warn('Invalid layoutId! Use "draft" to load draft data or leave unspecified to load live data.') : Pt.warn("layoutId is currently unsupported!")), o.baseUri = n.getBaseUri();
  let s6 = performance.now(), u6, l;
  if (r6) {
    let v6 = { ...o, venue: o.mapId, clientId: o.key, clientSecret: o.secret, version: "1.0.0", perspective: o.viewId, useDraftData: o.layoutId === "draft" }, x6 = await rx(v6);
    u6 = x6.compressed, l = x6.localePacks;
  } else u6 = await nx2(o, t6);
  let c = performance.now(), d = await Ay(u6, o.mvfVersion), f = performance.now();
  typeof e6.onMVFParsed == "function" && e6.onMVFParsed(d);
  let h = My(d);
  if (h.length > 0 ? i.setMapIds(h) : i.setMapIds([o.mapId]), o.prefetchTokens) try {
    await i.readySync();
  } catch (v6) {
    Pt.error("Failed to ready token manager!", v6);
  }
  _f() && (r6 && Pt.warn("forceEnterpriseLocations is enabled, but the map is already an enterprise map!"), o.mvfVersion !== "3.0.0" && Pt.warn("mvfVersion must be '3.0.0' when forceEnterpriseLocations is enabled!"));
  let b = new Nl(d, { env: n, outdoorViewToken: t6, tokenManager: i, enterprise: r6, localePacksUrls: l, binaryBundle: u6, getMapDataOptions: o }), I = new Cm(b, { search: e6.search });
  b.Analytics.init({ accessToken: t6, mapId: o.mapId, key: "key" in o ? o.key : void 0, secret: "secret" in o ? o.secret : void 0, ...o.analytics, baseUri: n.getAnalyticsBaseUri(), context: o.analytics?.context }), b.Analytics.sendGetMapDataEvent({ parseDuration: f - c, downloadDuration: c - s6, viewId: o.viewId });
  let E = b.findPreferredLanguage({ languageCode: o.language, fallbackToNavigatorLanguage: o.fallbackToNavigatorLanguage });
  if (E) try {
    await I.changeLanguage(E.code);
  } catch {
  }
  return I;
};
var cRe = TZ;
var wZ = async () => {
  if ($l === "" || E4 === "") return false;
  let e6 = [fetch($l, { mode: "same-origin" }), fetch(E4, { mode: "same-origin" })], [r6, t6] = [{ ok: false }, { ok: false }];
  try {
    [r6, t6] = await Promise.all(e6);
  } catch {
  }
  return { collision: r6.ok, maplibre: t6.ok };
};
var FZ = async (e6, r6, t6) => {
  let n = performance.now(), o = _x(t6, r6);
  o && kx(o), (o.injectStyles ?? true) && ZO(DZ, { id: "mappedin__styles" });
  let i = Lw(r6.outdoorViewToken ?? ""), s6 = Sm(r6);
  o.outdoorView?.style && s6.envControl.updateTileServerBaseUrl(o.outdoorView?.style);
  let u6 = false, l = false, c = await wZ();
  c && (c.collision || (u6 = true), c.maplibre || (l = true));
  let d = await nA(e6, { center: [r6.mapCenter.longitude, r6.mapCenter.latitude], bearing: o.bearing, pitch: o.pitch, zoomLevel: o.zoomLevel, backgroundAlpha: o.style?.backgroundAlpha, backgroundColor: o.style?.backgroundColor, outdoorView: !l && o.outdoorView?.token ? { headers: { "x-mappedin-tiles-key": o.outdoorView?.token }, style: r6.getEnv().tileServerUri, enabled: !!o.outdoorView?.enabled, lowDpi: o.outdoorView?.lowDpi } : void 0, watermark: { ...o.watermark, visible: o.watermark?.visible ?? (!s6.enterpriseMode && !i.remove_watermark), onClick: QO || void 0 }, attribution: o.attribution, antialias: typeof o.antialiasing == "boolean" ? o.antialiasing : !!o.antialiasing?.enabled, accessToken: r6.outdoorViewToken, occlusionEnabled: true, transformImageRequest: s6.enterpriseMode ? void 0 : s6.transformImageRequest, naturalBearing: r6.naturalBearing, imagePlacementOptions: o.imagePlacementOptions, onWebGLContextCreationError: o.onWebGLContextCreationError, onWebGLContextLost: o.onWebGLContextLost, onWebGLContextRestored: o.onWebGLContextRestored, onWebGLRendererError: o.onWebGLRendererError, useStandaloneCamera: o.useStandaloneCamera ?? false, useWorkers: !(o.disableWorkers ?? false), useCollisionWorker: !u6 }), f = new ch(d);
  return await f.addMap(r6, o), s6.Analytics.sendMapViewLoadedEvent({ firstRenderDuration: performance.now() - n, dimension: f.getDimensions(), collisionWorkerDisabled: u6, outdoorsWorkerDisabled: l }), f;
};
var pRe = () => yc.env.npm_package_version;
var dRe = FZ;

export {
  ox2 as ox,
  ix,
  Ay,
  ge2 as ge,
  _o,
  pl,
  ml,
  Lo,
  yn,
  Cr2 as Cr,
  jn2 as jn,
  ez,
  lo,
  Un,
  uo,
  ds,
  Ny,
  Rr,
  da,
  $y,
  Wx,
  Uw,
  Xx,
  Gw,
  Uy,
  Gy,
  hu,
  Ml,
  jy,
  VF,
  xa,
  bH,
  aI,
  kH,
  mI,
  fI,
  fZ,
  ch,
  yZ,
  l2,
  aRe,
  sRe,
  uRe,
  lRe,
  _f,
  TZ,
  cRe,
  wZ,
  FZ,
  pRe,
  dRe
};
//# sourceMappingURL=chunk-WRTOVFXP.js.map
