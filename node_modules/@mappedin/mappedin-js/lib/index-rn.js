var Mhe=Object.create;var wg=Object.defineProperty;var Ahe=Object.getOwnPropertyDescriptor;var Dhe=Object.getOwnPropertyNames;var Lhe=Object.getPrototypeOf,Fhe=Object.prototype.hasOwnProperty;var zU=e=>{throw TypeError(e)};var khe=(e,t,r)=>t in e?wg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t)=>()=>(e&&(t=e(e=0)),t);var ui=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fr=(e,t)=>{for(var r in t)wg(e,r,{get:t[r],enumerable:!0})},NU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Dhe(t))!Fhe.call(e,i)&&i!==r&&wg(e,i,{get:()=>t[i],enumerable:!(n=Ahe(t,i))||n.enumerable});return e};var Ie=(e,t,r)=>(r=e!=null?Mhe(Lhe(e)):{},NU(t||!e||!e.__esModule?wg(r,"default",{value:e,enumerable:!0}):r,e)),Tg=e=>NU(wg({},"__esModule",{value:!0}),e);var w=(e,t,r)=>khe(e,typeof t!="symbol"?t+"":t,r),MM=(e,t,r)=>t.has(e)||zU("Cannot "+r);var y=(e,t,r)=>(MM(e,t,"read from private field"),r?r.call(e):t.get(e)),D=(e,t,r)=>t.has(e)?zU("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),R=(e,t,r,n)=>(MM(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),me=(e,t,r)=>(MM(e,t,"access private method"),r);function Ohe(e="",{prefix:t=AM}={}){let r=`${t}${e?`-${e}`:""}`,n=(i,o)=>{if(typeof window<"u"&&window.rnDebug){let a=o.map(s=>s instanceof Error&&s.stack?`${s.message}
${s.stack}`:s);window.rnDebug(`${e} ${i}: ${a.join(" ")}`)}};return{logState:0,log(...i){this.logState<=0&&(console.log(r,...i),n("log",i))},warn(...i){this.logState<=1&&(console.warn(r,...i),n("warn",i))},error(...i){this.logState<=2&&(console.error(r,...i),n("error",i))},assert(...i){console.assert(...i)},time(i){console.time(i)},timeEnd(i){console.timeEnd(i)},setLevel(i){0<=i&&i<=3&&(this.logState=i)}}}var AM,Rhe,ie,Gl=f(()=>{"use strict";AM="[MappedinJS]";Rhe=Ohe(),ie=Rhe});function Bhe(e,t){return`${t} ${e}`}var Hl,Mp=f(()=>{"use strict";Gl();Hl=class extends Error{constructor(t,r=AM){super(Bhe(t,r)),this.name="MappedinError"}}});var DM,UU=f(()=>{DM=class extends Error{};DM.prototype.name="InvalidTokenError"});var Ig,X_=f(()=>{"use strict";Ig=63710088e-1});function _1(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ci[e&255]+ci[e>>8&255]+ci[e>>16&255]+ci[e>>24&255]+"-"+ci[t&255]+ci[t>>8&255]+"-"+ci[t>>16&15|64]+ci[t>>24&255]+"-"+ci[r&63|128]+ci[r>>8&255]+"-"+ci[r>>16&255]+ci[r>>24&255]+ci[n&255]+ci[n>>8&255]+ci[n>>16&255]+ci[n>>24&255]).toLowerCase()}function Jt(e,t,r){return Math.max(t,Math.min(r,e))}function c2(e,t){return(e%t+t)%t}function zhe(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)}function Nhe(e,t,r){return e!==t?(r-e)/(t-e):0}function Dg(e,t,r){return(1-r)*e+r*t}function Uhe(e,t,r,n){return Dg(e,t,1-Math.exp(-r*n))}function $he(e,t=1){return t-Math.abs(c2(e,t*2)-t)}function Vhe(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function jhe(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function Ghe(e,t){return e+Math.floor(Math.random()*(t-e+1))}function Hhe(e,t){return e+Math.random()*(t-e)}function Zhe(e){return e*(.5-Math.random())}function Whe(e){e!==void 0&&($U=e);let t=$U+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Xhe(e){return e*i8}function qhe(e){return e*u2}function Yhe(e){return(e&e-1)===0&&e!==0}function Jhe(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Khe(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Qhe(e,t,r,n,i){let o=Math.cos,a=Math.sin,s=o(r/2),l=a(r/2),u=o((t+n)/2),c=a((t+n)/2),p=o((t-n)/2),d=a((t-n)/2),h=o((n-t)/2),m=a((n-t)/2);switch(i){case"XYX":e.set(s*c,l*p,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*p,s*u);break;case"ZXZ":e.set(l*p,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*m,l*h,s*u);break;case"YXY":e.set(l*h,s*c,l*m,s*u);break;case"ZYZ":e.set(l*m,l*h,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function eme(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function tme(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(e*4294967295);case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int32Array:return Math.round(e*2147483647);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}function l1(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function rme(){let e={enabled:!0,workingColorSpace:ZM,spaces:{},convert:function(i,o,a){return this.enabled===!1||o===a||!o||!a||(this.spaces[o].transfer===o1&&(i.r=ql(i.r),i.g=ql(i.g),i.b=ql(i.b)),this.spaces[o].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[o].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===o1&&(i.r=jf(i.r),i.g=jf(i.g),i.b=jf(i.b))),i},fromWorkingColorSpace:function(i,o){return this.convert(i,this.workingColorSpace,o)},toWorkingColorSpace:function(i,o){return this.convert(i,o,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===l2?WM:this.spaces[i].transfer},getLuminanceCoefficients:function(i,o=this.workingColorSpace){return i.fromArray(this.spaces[o].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,o,a){return i.copy(this.spaces[o].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],n=[.3127,.329];return e.define({[ZM]:{primaries:t,whitePoint:n,transfer:WM,toXYZ:VU,fromXYZ:jU,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Co},outputColorSpaceConfig:{drawingBufferColorSpace:Co}},[Co]:{primaries:t,whitePoint:n,transfer:o1,toXYZ:VU,fromXYZ:jU,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Co}}}),e}function ql(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function jf(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}function FM(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?u1.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}function OM(e,t,r,n,i){for(let o=0,a=e.length-3;o<=a;o+=3){Dp.fromArray(e,o);let s=i.x*Math.abs(Dp.x)+i.y*Math.abs(Dp.y)+i.z*Math.abs(Dp.z),l=t.dot(Dp),u=r.dot(Dp),c=n.dot(Dp);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}function $M(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function a8(e){let t={};for(let r in e){t[r]={};for(let n in e[r]){let i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][n]=null):t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function Pi(e){let t={};for(let r=0;r<e.length;r++){let n=a8(e[r]);for(let i in n)t[i]=n[i]}return t}function n1(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function dme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QU(e,t){return e.distance-t.distance}function JM(e,t,r,n){let i=!0;if(e.layers.test(t.layers)&&e.raycast(t,r)===!1&&(i=!1),i===!0&&n===!0){let o=e.children;for(let a=0,s=o.length;a<s;a++)JM(o[a],t,r,!0)}}var KM,QM,e2,t2,r2,n2,i2,o2,a2,s2,a1,Mg,VM,e8,t8,r8,n8,Lg,s1,i1,jM,GM,HM,l2,Co,ZM,WM,o1,Ag,XM,Fg,ci,$U,i8,u2,p2,Ci,et,LM,VU,jU,na,Rf,u1,nme,c1,ime,pc,Yl,pe,kM,GU,Ys,Zl,Ha,q_,Bf,zf,Nf,ac,sc,Ap,Eg,Y_,J_,Dp,ome,Cg,RM,kg,Wl,BM,K_,lc,zM,Q_,NM,p1,Zi,Uf,Za,ame,sme,uc,e1,Eo,HU,ZU,Og,Rg,lme,WU,$f,Xl,t1,Pg,ume,cme,XU,qU,YU,JU,pme,Vf,UM,dc,o8,cc,r1,Jr,pi,Lp,d1,f1,h1,ia,fc,m1,y1,g1,Bg,hc,x1,qM,b1,s8,Gf,v1,Fp,d2,fme,f2,hme,mme,yme,gme,xme,bme,vme,YM,fr,WVe,KU,zg,h2=f(()=>{KM="173",QM=0,e2=1,t2=2,r2=3,n2=4,i2=5,o2=6,a2=7,s2=300,a1=1e3,Mg=1001,VM=1002,e8=1006,t8=1008,r8=1009,n8=1023,Lg=2300,s1=2301,i1=2302,jM=2400,GM=2401,HM=2402,l2="",Co="srgb",ZM="srgb-linear",WM="linear",o1="srgb",Ag=2e3,XM=2001,Fg=class{addEventListener(t,r){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(r)===-1&&n[t].push(r)}hasEventListener(t,r){let n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(r)!==-1}removeEventListener(t,r){let n=this._listeners;if(n===void 0)return;let i=n[t];if(i!==void 0){let o=i.indexOf(r);o!==-1&&i.splice(o,1)}}dispatchEvent(t){let r=this._listeners;if(r===void 0)return;let n=r[t.type];if(n!==void 0){t.target=this;let i=n.slice(0);for(let o=0,a=i.length;o<a;o++)i[o].call(this,t);t.target=null}}},ci=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],$U=1234567,i8=Math.PI/180,u2=180/Math.PI;p2={DEG2RAD:i8,RAD2DEG:u2,generateUUID:_1,clamp:Jt,euclideanModulo:c2,mapLinear:zhe,inverseLerp:Nhe,lerp:Dg,damp:Uhe,pingpong:$he,smoothstep:Vhe,smootherstep:jhe,randInt:Ghe,randFloat:Hhe,randFloatSpread:Zhe,seededRandom:Whe,degToRad:Xhe,radToDeg:qhe,isPowerOfTwo:Yhe,ceilPowerOfTwo:Jhe,floorPowerOfTwo:Khe,setQuaternionFromProperEuler:Qhe,normalize:tme,denormalize:eme},Ci=class e{constructor(t=0,r=0){e.prototype.isVector2=!0,this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let r=this.x,n=this.y,i=t.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Jt(this.x,t.x,r.x),this.y=Jt(this.y,t.y,r.y),this}clampScalar(t,r){return this.x=Jt(this.x,t,r),this.y=Jt(this.y,t,r),this}clampLength(t,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;let n=this.dot(t)/r;return Math.acos(Jt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,n=this.y-t.y;return r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){let n=Math.cos(r),i=Math.sin(r),o=this.x-t.x,a=this.y-t.y;return this.x=o*n-a*i+t.x,this.y=o*i+a*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},et=class e{constructor(t,r,n,i,o,a,s,l,u){e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,r,n,i,o,a,s,l,u)}set(t,r,n,i,o,a,s,l,u){let c=this.elements;return c[0]=t,c[1]=i,c[2]=s,c[3]=r,c[4]=o,c[5]=l,c[6]=n,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(t,r,n){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){let n=t.elements,i=r.elements,o=this.elements,a=n[0],s=n[3],l=n[6],u=n[1],c=n[4],p=n[7],d=n[2],h=n[5],m=n[8],x=i[0],b=i[3],_=i[6],T=i[1],I=i[4],S=i[7],E=i[2],P=i[5],L=i[8];return o[0]=a*x+s*T+l*E,o[3]=a*b+s*I+l*P,o[6]=a*_+s*S+l*L,o[1]=u*x+c*T+p*E,o[4]=u*b+c*I+p*P,o[7]=u*_+c*S+p*L,o[2]=d*x+h*T+m*E,o[5]=d*b+h*I+m*P,o[8]=d*_+h*S+m*L,this}multiplyScalar(t){let r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){let t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return r*a*c-r*s*u-n*o*c+n*s*l+i*o*u-i*a*l}invert(){let t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=c*a-s*u,d=s*l-c*o,h=u*o-a*l,m=r*p+n*d+i*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);let x=1/m;return t[0]=p*x,t[1]=(i*u-c*n)*x,t[2]=(s*n-i*a)*x,t[3]=d*x,t[4]=(c*r-i*l)*x,t[5]=(i*o-s*r)*x,t[6]=h*x,t[7]=(n*l-u*r)*x,t[8]=(a*r-n*o)*x,this}transpose(){let t,r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,n,i,o,a,s){let l=Math.cos(o),u=Math.sin(o);return this.set(n*l,n*u,-n*(l*a+u*s)+a+t,-i*u,i*l,-i*(-u*a+l*s)+s+r,0,0,1),this}scale(t,r){return this.premultiply(LM.makeScale(t,r)),this}rotate(t){return this.premultiply(LM.makeRotation(-t)),this}translate(t,r){return this.premultiply(LM.makeTranslation(t,r)),this}makeTranslation(t,r){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,r,0,0,1),this}makeRotation(t){let r=Math.cos(t),n=Math.sin(t);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(t,r){return this.set(t,0,0,0,r,0,0,0,1),this}equals(t){let r=this.elements,n=t.elements;for(let i=0;i<9;i++)if(r[i]!==n[i])return!1;return!0}fromArray(t,r=0){for(let n=0;n<9;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){let n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}},LM=new et;VU=new et().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),jU=new et().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);na=rme();u1=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{Rf===void 0&&(Rf=l1("canvas")),Rf.width=t.width,Rf.height=t.height;let n=Rf.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),r=Rf}return r.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let r=l1("canvas");r.width=t.width,r.height=t.height;let n=r.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let i=n.getImageData(0,0,t.width,t.height),o=i.data;for(let a=0;a<o.length;a++)o[a]=ql(o[a]/255)*255;return n.putImageData(i,0,0),r}else if(t.data){let r=t.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(ql(r[n]/255)*255):r[n]=ql(r[n]);return{data:r,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},nme=0,c1=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nme++}),this.uuid=_1(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let r=t===void 0||typeof t=="string";if(!r&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let a=0,s=i.length;a<s;a++)i[a].isDataTexture?o.push(FM(i[a].image)):o.push(FM(i[a]))}else o=FM(i);n.url=o}return r||(t.images[this.uuid]=n),n}};ime=0,pc=class e extends Fg{constructor(t=e.DEFAULT_IMAGE,r=e.DEFAULT_MAPPING,n=Mg,i=Mg,o=e8,a=t8,s=n8,l=r8,u=e.DEFAULT_ANISOTROPY,c=l2){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ime++}),this.uuid=_1(),this.name="",this.source=new c1(t),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Ci(0,0),this.repeat=new Ci(1,1),this.center=new Ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let r=t===void 0||typeof t=="string";if(!r&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==s2)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case a1:t.x=t.x-Math.floor(t.x);break;case Mg:t.x=t.x<0?0:1;break;case VM:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case a1:t.y=t.y-Math.floor(t.y);break;case Mg:t.y=t.y<0?0:1;break;case VM:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}};pc.DEFAULT_IMAGE=null;pc.DEFAULT_MAPPING=s2;pc.DEFAULT_ANISOTROPY=1;Yl=class{constructor(t=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=r,this._z=n,this._w=i}static slerpFlat(t,r,n,i,o,a,s){let l=n[i+0],u=n[i+1],c=n[i+2],p=n[i+3],d=o[a+0],h=o[a+1],m=o[a+2],x=o[a+3];if(s===0){t[r+0]=l,t[r+1]=u,t[r+2]=c,t[r+3]=p;return}if(s===1){t[r+0]=d,t[r+1]=h,t[r+2]=m,t[r+3]=x;return}if(p!==x||l!==d||u!==h||c!==m){let b=1-s,_=l*d+u*h+c*m+p*x,T=_>=0?1:-1,I=1-_*_;if(I>Number.EPSILON){let E=Math.sqrt(I),P=Math.atan2(E,_*T);b=Math.sin(b*P)/E,s=Math.sin(s*P)/E}let S=s*T;if(l=l*b+d*S,u=u*b+h*S,c=c*b+m*S,p=p*b+x*S,b===1-s){let E=1/Math.sqrt(l*l+u*u+c*c+p*p);l*=E,u*=E,c*=E,p*=E}}t[r]=l,t[r+1]=u,t[r+2]=c,t[r+3]=p}static multiplyQuaternionsFlat(t,r,n,i,o,a){let s=n[i],l=n[i+1],u=n[i+2],c=n[i+3],p=o[a],d=o[a+1],h=o[a+2],m=o[a+3];return t[r]=s*m+c*p+l*h-u*d,t[r+1]=l*m+c*d+u*p-s*h,t[r+2]=u*m+c*h+s*d-l*p,t[r+3]=c*m-s*p-l*d-u*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,n,i){return this._x=t,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r=!0){let n=t._x,i=t._y,o=t._z,a=t._order,s=Math.cos,l=Math.sin,u=s(n/2),c=s(i/2),p=s(o/2),d=l(n/2),h=l(i/2),m=l(o/2);switch(a){case"XYZ":this._x=d*c*p+u*h*m,this._y=u*h*p-d*c*m,this._z=u*c*m+d*h*p,this._w=u*c*p-d*h*m;break;case"YXZ":this._x=d*c*p+u*h*m,this._y=u*h*p-d*c*m,this._z=u*c*m-d*h*p,this._w=u*c*p+d*h*m;break;case"ZXY":this._x=d*c*p-u*h*m,this._y=u*h*p+d*c*m,this._z=u*c*m+d*h*p,this._w=u*c*p-d*h*m;break;case"ZYX":this._x=d*c*p-u*h*m,this._y=u*h*p+d*c*m,this._z=u*c*m-d*h*p,this._w=u*c*p+d*h*m;break;case"YZX":this._x=d*c*p+u*h*m,this._y=u*h*p+d*c*m,this._z=u*c*m-d*h*p,this._w=u*c*p-d*h*m;break;case"XZY":this._x=d*c*p-u*h*m,this._y=u*h*p-d*c*m,this._z=u*c*m+d*h*p,this._w=u*c*p+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,r){let n=r/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let r=t.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],l=r[9],u=r[2],c=r[6],p=r[10],d=n+s+p;if(d>0){let h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(o-u)*h,this._z=(a-i)*h}else if(n>s&&n>p){let h=2*Math.sqrt(1+n-s-p);this._w=(c-l)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(o+u)/h}else if(s>p){let h=2*Math.sqrt(1+s-n-p);this._w=(o-u)/h,this._x=(i+a)/h,this._y=.25*h,this._z=(l+c)/h}else{let h=2*Math.sqrt(1+p-n-s);this._w=(a-i)/h,this._x=(o+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let n=t.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Jt(this.dot(t),-1,1)))}rotateTowards(t,r){let n=this.angleTo(t);if(n===0)return this;let i=Math.min(1,r/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){let n=t._x,i=t._y,o=t._z,a=t._w,s=r._x,l=r._y,u=r._z,c=r._w;return this._x=n*c+a*s+i*u-o*l,this._y=i*c+a*l+o*s-n*u,this._z=o*c+a*u+n*l-i*s,this._w=a*c-n*s-i*l-o*u,this._onChangeCallback(),this}slerp(t,r){if(r===0)return this;if(r===1)return this.copy(t);let n=this._x,i=this._y,o=this._z,a=this._w,s=a*t._w+n*t._x+i*t._y+o*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=n,this._y=i,this._z=o,this;let l=1-s*s;if(l<=Number.EPSILON){let h=1-r;return this._w=h*a+r*this._w,this._x=h*n+r*this._x,this._y=h*i+r*this._y,this._z=h*o+r*this._z,this.normalize(),this}let u=Math.sqrt(l),c=Math.atan2(u,s),p=Math.sin((1-r)*c)/u,d=Math.sin(r*c)/u;return this._w=a*p+this._w*d,this._x=n*p+this._x*d,this._y=i*p+this._y*d,this._z=o*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,r,n){return this.copy(t).slerp(r,n)}random(){let t=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),o*Math.sin(r),o*Math.cos(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},pe=class e{constructor(t=0,r=0,n=0){e.prototype.isVector3=!0,this.x=t,this.y=r,this.z=n}set(t,r,n){return n===void 0&&(n=this.z),this.x=t,this.y=r,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return this.applyQuaternion(GU.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(GU.setFromAxisAngle(t,r))}applyMatrix3(t){let r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[3]*n+o[6]*i,this.y=o[1]*r+o[4]*n+o[7]*i,this.z=o[2]*r+o[5]*n+o[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let r=this.x,n=this.y,i=this.z,o=t.elements,a=1/(o[3]*r+o[7]*n+o[11]*i+o[15]);return this.x=(o[0]*r+o[4]*n+o[8]*i+o[12])*a,this.y=(o[1]*r+o[5]*n+o[9]*i+o[13])*a,this.z=(o[2]*r+o[6]*n+o[10]*i+o[14])*a,this}applyQuaternion(t){let r=this.x,n=this.y,i=this.z,o=t.x,a=t.y,s=t.z,l=t.w,u=2*(a*i-s*n),c=2*(s*r-o*i),p=2*(o*n-a*r);return this.x=r+l*u+a*p-s*c,this.y=n+l*c+s*u-o*p,this.z=i+l*p+o*c-a*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let r=this.x,n=this.y,i=this.z,o=t.elements;return this.x=o[0]*r+o[4]*n+o[8]*i,this.y=o[1]*r+o[5]*n+o[9]*i,this.z=o[2]*r+o[6]*n+o[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Jt(this.x,t.x,r.x),this.y=Jt(this.y,t.y,r.y),this.z=Jt(this.z,t.z,r.z),this}clampScalar(t,r){return this.x=Jt(this.x,t,r),this.y=Jt(this.y,t,r),this.z=Jt(this.z,t,r),this}clampLength(t,r){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Jt(n,t,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,r){let n=t.x,i=t.y,o=t.z,a=r.x,s=r.y,l=r.z;return this.x=i*l-o*s,this.y=o*a-n*l,this.z=n*s-i*a,this}projectOnVector(t){let r=t.lengthSq();if(r===0)return this.set(0,0,0);let n=t.dot(this)/r;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return kM.copy(this).projectOnVector(t),this.sub(kM)}reflect(t){return this.sub(kM.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let r=Math.sqrt(this.lengthSq()*t.lengthSq());if(r===0)return Math.PI/2;let n=this.dot(t)/r;return Math.acos(Jt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return r*r+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,n){let i=Math.sin(r)*t;return this.x=i*Math.sin(n),this.y=Math.cos(r)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,n){return this.x=t*Math.sin(r),this.y=n,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){let r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){let r=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,r*4)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,r*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r){return this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,r=Math.random()*2-1,n=Math.sqrt(1-r*r);return this.x=n*Math.cos(t),this.y=r,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},kM=new pe,GU=new Yl,Ys=class{constructor(t=new pe(1/0,1/0,1/0),r=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r+=3)this.expandByPoint(Ha.fromArray(t,r));return this}setFromBufferAttribute(t){this.makeEmpty();for(let r=0,n=t.count;r<n;r++)this.expandByPoint(Ha.fromBufferAttribute(t,r));return this}setFromPoints(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){let n=Ha.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,r=!1){return this.makeEmpty(),this.expandByObject(t,r)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,r=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0){let o=n.getAttribute("position");if(r===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let a=0,s=o.count;a<s;a++)t.isMesh===!0?t.getVertexPosition(a,Ha):Ha.fromBufferAttribute(o,a),Ha.applyMatrix4(t.matrixWorld),this.expandByPoint(Ha);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),q_.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),q_.copy(n.boundingBox)),q_.applyMatrix4(t.matrixWorld),this.union(q_)}let i=t.children;for(let o=0,a=i.length;o<a;o++)this.expandByObject(i[o],r);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ha),Ha.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,n;return t.normal.x>0?(r=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),r<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Eg),Y_.subVectors(this.max,Eg),Bf.subVectors(t.a,Eg),zf.subVectors(t.b,Eg),Nf.subVectors(t.c,Eg),ac.subVectors(zf,Bf),sc.subVectors(Nf,zf),Ap.subVectors(Bf,Nf);let r=[0,-ac.z,ac.y,0,-sc.z,sc.y,0,-Ap.z,Ap.y,ac.z,0,-ac.x,sc.z,0,-sc.x,Ap.z,0,-Ap.x,-ac.y,ac.x,0,-sc.y,sc.x,0,-Ap.y,Ap.x,0];return!OM(r,Bf,zf,Nf,Y_)||(r=[1,0,0,0,1,0,0,0,1],!OM(r,Bf,zf,Nf,Y_))?!1:(J_.crossVectors(ac,sc),r=[J_.x,J_.y,J_.z],OM(r,Bf,zf,Nf,Y_))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ha).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ha).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Zl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Zl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Zl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Zl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Zl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Zl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Zl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Zl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Zl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Zl=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],Ha=new pe,q_=new Ys,Bf=new pe,zf=new pe,Nf=new pe,ac=new pe,sc=new pe,Ap=new pe,Eg=new pe,Y_=new pe,J_=new pe,Dp=new pe;ome=new Ys,Cg=new pe,RM=new pe,kg=class{constructor(t=new pe,r=-1){this.isSphere=!0,this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){let n=this.center;r!==void 0?n.copy(r):ome.setFromPoints(t).getCenter(n);let i=0;for(let o=0,a=t.length;o<a;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){let n=this.center.distanceToSquared(t);return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Cg.subVectors(t,this.center);let r=Cg.lengthSq();if(r>this.radius*this.radius){let n=Math.sqrt(r),i=(n-this.radius)*.5;this.center.addScaledVector(Cg,i/n),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(RM.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Cg.copy(t.center).add(RM)),this.expandByPoint(Cg.copy(t.center).sub(RM))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Wl=new pe,BM=new pe,K_=new pe,lc=new pe,zM=new pe,Q_=new pe,NM=new pe,p1=class{constructor(t=new pe,r=new pe(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Wl)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);let n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let r=Wl.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(Wl.copy(this.origin).addScaledVector(this.direction,r),Wl.distanceToSquared(t))}distanceSqToSegment(t,r,n,i){BM.copy(t).add(r).multiplyScalar(.5),K_.copy(r).sub(t).normalize(),lc.copy(this.origin).sub(BM);let o=t.distanceTo(r)*.5,a=-this.direction.dot(K_),s=lc.dot(this.direction),l=-lc.dot(K_),u=lc.lengthSq(),c=Math.abs(1-a*a),p,d,h,m;if(c>0)if(p=a*l-s,d=a*s-l,m=o*c,p>=0)if(d>=-m)if(d<=m){let x=1/c;p*=x,d*=x,h=p*(p+a*d+2*s)+d*(a*p+d+2*l)+u}else d=o,p=Math.max(0,-(a*d+s)),h=-p*p+d*(d+2*l)+u;else d=-o,p=Math.max(0,-(a*d+s)),h=-p*p+d*(d+2*l)+u;else d<=-m?(p=Math.max(0,-(-a*o+s)),d=p>0?-o:Math.min(Math.max(-o,-l),o),h=-p*p+d*(d+2*l)+u):d<=m?(p=0,d=Math.min(Math.max(-o,-l),o),h=d*(d+2*l)+u):(p=Math.max(0,-(a*o+s)),d=p>0?o:Math.min(Math.max(-o,-l),o),h=-p*p+d*(d+2*l)+u);else d=a>0?-o:o,p=Math.max(0,-(a*d+s)),h=-p*p+d*(d+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(BM).addScaledVector(K_,d),h}intersectSphere(t,r){Wl.subVectors(t.center,this.origin);let n=Wl.dot(this.direction),i=Wl.dot(Wl)-n*n,o=t.radius*t.radius;if(i>o)return null;let a=Math.sqrt(o-i),s=n-a,l=n+a;return l<0?null:s<0?this.at(l,r):this.at(s,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let r=t.normal.dot(this.direction);if(r===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/r;return n>=0?n:null}intersectPlane(t,r){let n=this.distanceToPlane(t);return n===null?null:this.at(n,r)}intersectsPlane(t){let r=t.distanceToPoint(this.origin);return r===0||t.normal.dot(this.direction)*r<0}intersectBox(t,r){let n,i,o,a,s,l,u=1/this.direction.x,c=1/this.direction.y,p=1/this.direction.z,d=this.origin;return u>=0?(n=(t.min.x-d.x)*u,i=(t.max.x-d.x)*u):(n=(t.max.x-d.x)*u,i=(t.min.x-d.x)*u),c>=0?(o=(t.min.y-d.y)*c,a=(t.max.y-d.y)*c):(o=(t.max.y-d.y)*c,a=(t.min.y-d.y)*c),n>a||o>i||((o>n||isNaN(n))&&(n=o),(a<i||isNaN(i))&&(i=a),p>=0?(s=(t.min.z-d.z)*p,l=(t.max.z-d.z)*p):(s=(t.max.z-d.z)*p,l=(t.min.z-d.z)*p),n>l||s>i)||((s>n||n!==n)&&(n=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(t){return this.intersectBox(t,Wl)!==null}intersectTriangle(t,r,n,i,o){zM.subVectors(r,t),Q_.subVectors(n,t),NM.crossVectors(zM,Q_);let a=this.direction.dot(NM),s;if(a>0){if(i)return null;s=1}else if(a<0)s=-1,a=-a;else return null;lc.subVectors(this.origin,t);let l=s*this.direction.dot(Q_.crossVectors(lc,Q_));if(l<0)return null;let u=s*this.direction.dot(zM.cross(lc));if(u<0||l+u>a)return null;let c=-s*lc.dot(NM);return c<0?null:this.at(c/a,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Zi=class e{constructor(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b){e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b)}set(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b){let _=this.elements;return _[0]=t,_[4]=r,_[8]=n,_[12]=i,_[1]=o,_[5]=a,_[9]=s,_[13]=l,_[2]=u,_[6]=c,_[10]=p,_[14]=d,_[3]=h,_[7]=m,_[11]=x,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new e().fromArray(this.elements)}copy(t){let r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(t){let r=this.elements,n=t.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(t){let r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,n){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,r,n){return this.set(t.x,r.x,n.x,0,t.y,r.y,n.y,0,t.z,r.z,n.z,0,0,0,0,1),this}extractRotation(t){let r=this.elements,n=t.elements,i=1/Uf.setFromMatrixColumn(t,0).length(),o=1/Uf.setFromMatrixColumn(t,1).length(),a=1/Uf.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*o,r[5]=n[5]*o,r[6]=n[6]*o,r[7]=0,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){let r=this.elements,n=t.x,i=t.y,o=t.z,a=Math.cos(n),s=Math.sin(n),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),p=Math.sin(o);if(t.order==="XYZ"){let d=a*c,h=a*p,m=s*c,x=s*p;r[0]=l*c,r[4]=-l*p,r[8]=u,r[1]=h+m*u,r[5]=d-x*u,r[9]=-s*l,r[2]=x-d*u,r[6]=m+h*u,r[10]=a*l}else if(t.order==="YXZ"){let d=l*c,h=l*p,m=u*c,x=u*p;r[0]=d+x*s,r[4]=m*s-h,r[8]=a*u,r[1]=a*p,r[5]=a*c,r[9]=-s,r[2]=h*s-m,r[6]=x+d*s,r[10]=a*l}else if(t.order==="ZXY"){let d=l*c,h=l*p,m=u*c,x=u*p;r[0]=d-x*s,r[4]=-a*p,r[8]=m+h*s,r[1]=h+m*s,r[5]=a*c,r[9]=x-d*s,r[2]=-a*u,r[6]=s,r[10]=a*l}else if(t.order==="ZYX"){let d=a*c,h=a*p,m=s*c,x=s*p;r[0]=l*c,r[4]=m*u-h,r[8]=d*u+x,r[1]=l*p,r[5]=x*u+d,r[9]=h*u-m,r[2]=-u,r[6]=s*l,r[10]=a*l}else if(t.order==="YZX"){let d=a*l,h=a*u,m=s*l,x=s*u;r[0]=l*c,r[4]=x-d*p,r[8]=m*p+h,r[1]=p,r[5]=a*c,r[9]=-s*c,r[2]=-u*c,r[6]=h*p+m,r[10]=d-x*p}else if(t.order==="XZY"){let d=a*l,h=a*u,m=s*l,x=s*u;r[0]=l*c,r[4]=-p,r[8]=u*c,r[1]=d*p+x,r[5]=a*c,r[9]=h*p-m,r[2]=m*p-h,r[6]=s*c,r[10]=x*p+d}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ame,t,sme)}lookAt(t,r,n){let i=this.elements;return Eo.subVectors(t,r),Eo.lengthSq()===0&&(Eo.z=1),Eo.normalize(),uc.crossVectors(n,Eo),uc.lengthSq()===0&&(Math.abs(n.z)===1?Eo.x+=1e-4:Eo.z+=1e-4,Eo.normalize(),uc.crossVectors(n,Eo)),uc.normalize(),e1.crossVectors(Eo,uc),i[0]=uc.x,i[4]=e1.x,i[8]=Eo.x,i[1]=uc.y,i[5]=e1.y,i[9]=Eo.y,i[2]=uc.z,i[6]=e1.z,i[10]=Eo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){let n=t.elements,i=r.elements,o=this.elements,a=n[0],s=n[4],l=n[8],u=n[12],c=n[1],p=n[5],d=n[9],h=n[13],m=n[2],x=n[6],b=n[10],_=n[14],T=n[3],I=n[7],S=n[11],E=n[15],P=i[0],L=i[4],k=i[8],z=i[12],W=i[1],Z=i[5],Y=i[9],J=i[13],j=i[2],ae=i[6],ve=i[10],xe=i[14],Le=i[3],Te=i[7],rt=i[11],Re=i[15];return o[0]=a*P+s*W+l*j+u*Le,o[4]=a*L+s*Z+l*ae+u*Te,o[8]=a*k+s*Y+l*ve+u*rt,o[12]=a*z+s*J+l*xe+u*Re,o[1]=c*P+p*W+d*j+h*Le,o[5]=c*L+p*Z+d*ae+h*Te,o[9]=c*k+p*Y+d*ve+h*rt,o[13]=c*z+p*J+d*xe+h*Re,o[2]=m*P+x*W+b*j+_*Le,o[6]=m*L+x*Z+b*ae+_*Te,o[10]=m*k+x*Y+b*ve+_*rt,o[14]=m*z+x*J+b*xe+_*Re,o[3]=T*P+I*W+S*j+E*Le,o[7]=T*L+I*Z+S*ae+E*Te,o[11]=T*k+I*Y+S*ve+E*rt,o[15]=T*z+I*J+S*xe+E*Re,this}multiplyScalar(t){let r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){let t=this.elements,r=t[0],n=t[4],i=t[8],o=t[12],a=t[1],s=t[5],l=t[9],u=t[13],c=t[2],p=t[6],d=t[10],h=t[14],m=t[3],x=t[7],b=t[11],_=t[15];return m*(+o*l*p-i*u*p-o*s*d+n*u*d+i*s*h-n*l*h)+x*(+r*l*h-r*u*d+o*a*d-i*a*h+i*u*c-o*l*c)+b*(+r*u*p-r*s*h-o*a*p+n*a*h+o*s*c-n*u*c)+_*(-i*s*c-r*l*p+r*s*d+i*a*p-n*a*d+n*l*c)}transpose(){let t=this.elements,r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,n){let i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=r,i[14]=n),this}invert(){let t=this.elements,r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],h=t[11],m=t[12],x=t[13],b=t[14],_=t[15],T=p*b*u-x*d*u+x*l*h-s*b*h-p*l*_+s*d*_,I=m*d*u-c*b*u-m*l*h+a*b*h+c*l*_-a*d*_,S=c*x*u-m*p*u+m*s*h-a*x*h-c*s*_+a*p*_,E=m*p*l-c*x*l-m*s*d+a*x*d+c*s*b-a*p*b,P=r*T+n*I+i*S+o*E;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let L=1/P;return t[0]=T*L,t[1]=(x*d*o-p*b*o-x*i*h+n*b*h+p*i*_-n*d*_)*L,t[2]=(s*b*o-x*l*o+x*i*u-n*b*u-s*i*_+n*l*_)*L,t[3]=(p*l*o-s*d*o-p*i*u+n*d*u+s*i*h-n*l*h)*L,t[4]=I*L,t[5]=(c*b*o-m*d*o+m*i*h-r*b*h-c*i*_+r*d*_)*L,t[6]=(m*l*o-a*b*o-m*i*u+r*b*u+a*i*_-r*l*_)*L,t[7]=(a*d*o-c*l*o+c*i*u-r*d*u-a*i*h+r*l*h)*L,t[8]=S*L,t[9]=(m*p*o-c*x*o-m*n*h+r*x*h+c*n*_-r*p*_)*L,t[10]=(a*x*o-m*s*o+m*n*u-r*x*u-a*n*_+r*s*_)*L,t[11]=(c*s*o-a*p*o-c*n*u+r*p*u+a*n*h-r*s*h)*L,t[12]=E*L,t[13]=(c*x*i-m*p*i+m*n*d-r*x*d-c*n*b+r*p*b)*L,t[14]=(m*s*i-a*x*i-m*n*l+r*x*l+a*n*b-r*s*b)*L,t[15]=(a*p*i-c*s*i+c*n*l-r*p*l-a*n*d+r*s*d)*L,this}scale(t){let r=this.elements,n=t.x,i=t.y,o=t.z;return r[0]*=n,r[4]*=i,r[8]*=o,r[1]*=n,r[5]*=i,r[9]*=o,r[2]*=n,r[6]*=i,r[10]*=o,r[3]*=n,r[7]*=i,r[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(t,r,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(t){let r=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(t){let r=Math.cos(t),n=Math.sin(t);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(t){let r=Math.cos(t),n=Math.sin(t);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){let n=Math.cos(r),i=Math.sin(r),o=1-n,a=t.x,s=t.y,l=t.z,u=o*a,c=o*s;return this.set(u*a+n,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+n,c*l-i*a,0,u*l-i*s,c*l+i*a,o*l*l+n,0,0,0,0,1),this}makeScale(t,r,n){return this.set(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,r,n,i,o,a){return this.set(1,n,o,0,t,1,a,0,r,i,1,0,0,0,0,1),this}compose(t,r,n){let i=this.elements,o=r._x,a=r._y,s=r._z,l=r._w,u=o+o,c=a+a,p=s+s,d=o*u,h=o*c,m=o*p,x=a*c,b=a*p,_=s*p,T=l*u,I=l*c,S=l*p,E=n.x,P=n.y,L=n.z;return i[0]=(1-(x+_))*E,i[1]=(h+S)*E,i[2]=(m-I)*E,i[3]=0,i[4]=(h-S)*P,i[5]=(1-(d+_))*P,i[6]=(b+T)*P,i[7]=0,i[8]=(m+I)*L,i[9]=(b-T)*L,i[10]=(1-(d+x))*L,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,r,n){let i=this.elements,o=Uf.set(i[0],i[1],i[2]).length(),a=Uf.set(i[4],i[5],i[6]).length(),s=Uf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),t.x=i[12],t.y=i[13],t.z=i[14],Za.copy(this);let u=1/o,c=1/a,p=1/s;return Za.elements[0]*=u,Za.elements[1]*=u,Za.elements[2]*=u,Za.elements[4]*=c,Za.elements[5]*=c,Za.elements[6]*=c,Za.elements[8]*=p,Za.elements[9]*=p,Za.elements[10]*=p,r.setFromRotationMatrix(Za),n.x=o,n.y=a,n.z=s,this}makePerspective(t,r,n,i,o,a,s=Ag){let l=this.elements,u=2*o/(r-t),c=2*o/(n-i),p=(r+t)/(r-t),d=(n+i)/(n-i),h,m;if(s===Ag)h=-(a+o)/(a-o),m=-2*a*o/(a-o);else if(s===XM)h=-a/(a-o),m=-a*o/(a-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,r,n,i,o,a,s=Ag){let l=this.elements,u=1/(r-t),c=1/(n-i),p=1/(a-o),d=(r+t)*u,h=(n+i)*c,m,x;if(s===Ag)m=(a+o)*p,x=-2*p;else if(s===XM)m=o*p,x=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=x,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){let r=this.elements,n=t.elements;for(let i=0;i<16;i++)if(r[i]!==n[i])return!1;return!0}fromArray(t,r=0){for(let n=0;n<16;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){let n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t[r+9]=n[9],t[r+10]=n[10],t[r+11]=n[11],t[r+12]=n[12],t[r+13]=n[13],t[r+14]=n[14],t[r+15]=n[15],t}},Uf=new pe,Za=new Zi,ame=new pe(0,0,0),sme=new pe(1,1,1),uc=new pe,e1=new pe,Eo=new pe,HU=new Zi,ZU=new Yl,Og=class e{constructor(t=0,r=0,n=0,i=e.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,n,i=this._order){return this._x=t,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,n=!0){let i=t.elements,o=i[0],a=i[4],s=i[8],l=i[1],u=i[5],c=i[9],p=i[2],d=i[6],h=i[10];switch(r){case"XYZ":this._y=Math.asin(Jt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Jt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,r,n){return HU.makeRotationFromQuaternion(t),this.setFromRotationMatrix(HU,r,n)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return ZU.setFromEuler(this),this.setFromQuaternion(ZU,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Og.DEFAULT_ORDER="XYZ";Rg=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},lme=0,WU=new pe,$f=new Yl,Xl=new Zi,t1=new pe,Pg=new pe,ume=new pe,cme=new Yl,XU=new pe(1,0,0),qU=new pe(0,1,0),YU=new pe(0,0,1),JU={type:"added"},pme={type:"removed"},Vf={type:"childadded",child:null},UM={type:"childremoved",child:null},dc=class e extends Fg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lme++}),this.uuid=_1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=e.DEFAULT_UP.clone();let t=new pe,r=new Og,n=new Yl,i=new pe(1,1,1);function o(){n.setFromEuler(r,!1)}function a(){r.setFromQuaternion(n,void 0,!1)}r._onChange(o),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Zi},normalMatrix:{value:new et}}),this.matrix=new Zi,this.matrixWorld=new Zi,this.matrixAutoUpdate=e.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=e.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Rg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return $f.setFromAxisAngle(t,r),this.quaternion.multiply($f),this}rotateOnWorldAxis(t,r){return $f.setFromAxisAngle(t,r),this.quaternion.premultiply($f),this}rotateX(t){return this.rotateOnAxis(XU,t)}rotateY(t){return this.rotateOnAxis(qU,t)}rotateZ(t){return this.rotateOnAxis(YU,t)}translateOnAxis(t,r){return WU.copy(t).applyQuaternion(this.quaternion),this.position.add(WU.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(XU,t)}translateY(t){return this.translateOnAxis(qU,t)}translateZ(t){return this.translateOnAxis(YU,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Xl.copy(this.matrixWorld).invert())}lookAt(t,r,n){t.isVector3?t1.copy(t):t1.set(t,r,n);let i=this.parent;this.updateWorldMatrix(!0,!1),Pg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xl.lookAt(Pg,t1,this.up):Xl.lookAt(t1,Pg,this.up),this.quaternion.setFromRotationMatrix(Xl),i&&(Xl.extractRotation(i.matrixWorld),$f.setFromRotationMatrix(Xl),this.quaternion.premultiply($f.invert()))}add(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(JU),Vf.child=t,this.dispatchEvent(Vf),Vf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(pme),UM.child=t,this.dispatchEvent(UM),UM.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Xl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Xl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Xl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(JU),Vf.child=t,this.dispatchEvent(Vf),Vf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let n=0,i=this.children.length;n<i;n++){let a=this.children[n].getObjectByProperty(t,r);if(a!==void 0)return a}}getObjectsByProperty(t,r,n=[]){this[t]===r&&n.push(this);let i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].getObjectsByProperty(t,r,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pg,t,ume),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pg,cme,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);let r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(t)}traverseAncestors(t){let r=this.parent;r!==null&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].updateMatrixWorld(t)}updateWorldMatrix(t,r){let n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){let i=this.children;for(let o=0,a=i.length;o<a;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(t){let r=t===void 0||typeof t=="string",n={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(t.geometries,this.geometry);let s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){let l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){let p=l[u];o(t.shapes,p)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(o(t.materials,this.material[l]));i.material=s}else i.material=o(t.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){let l=this.animations[s];i.animations.push(o(t.animations,l))}}if(r){let s=a(t.geometries),l=a(t.materials),u=a(t.textures),c=a(t.images),p=a(t.shapes),d=a(t.skeletons),h=a(t.animations),m=a(t.nodes);s.length>0&&(n.geometries=s),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),p.length>0&&(n.shapes=p),d.length>0&&(n.skeletons=d),h.length>0&&(n.animations=h),m.length>0&&(n.nodes=m)}return n.object=i,n;function a(s){let l=[];for(let u in s){let c=s[u];delete c.metadata,l.push(c)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),r===!0)for(let n=0;n<t.children.length;n++){let i=t.children[n];this.add(i.clone())}return this}};dc.DEFAULT_UP=new pe(0,1,0);dc.DEFAULT_MATRIX_AUTO_UPDATE=!0;dc.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;o8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cc={h:0,s:0,l:0},r1={h:0,s:0,l:0};Jr=class{constructor(t,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,r,n)}set(t,r,n){if(r===void 0&&n===void 0){let i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,r,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Co){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,na.toWorkingColorSpace(this,r),this}setRGB(t,r,n,i=na.workingColorSpace){return this.r=t,this.g=r,this.b=n,na.toWorkingColorSpace(this,i),this}setHSL(t,r,n,i=na.workingColorSpace){if(t=c2(t,1),r=Jt(r,0,1),n=Jt(n,0,1),r===0)this.r=this.g=this.b=n;else{let o=n<=.5?n*(1+r):n+r-n*r,a=2*n-o;this.r=$M(a,o,t+1/3),this.g=$M(a,o,t),this.b=$M(a,o,t-1/3)}return na.toWorkingColorSpace(this,i),this}setStyle(t,r=Co){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,r);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,r);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=i[1],a=o.length;if(a===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(o,16),r);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}setColorName(t,r=Co){let n=o8[t.toLowerCase()];return n!==void 0?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ql(t.r),this.g=ql(t.g),this.b=ql(t.b),this}copyLinearToSRGB(t){return this.r=jf(t.r),this.g=jf(t.g),this.b=jf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Co){return na.fromWorkingColorSpace(pi.copy(this),t),Math.round(Jt(pi.r*255,0,255))*65536+Math.round(Jt(pi.g*255,0,255))*256+Math.round(Jt(pi.b*255,0,255))}getHexString(t=Co){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=na.workingColorSpace){na.fromWorkingColorSpace(pi.copy(this),r);let n=pi.r,i=pi.g,o=pi.b,a=Math.max(n,i,o),s=Math.min(n,i,o),l,u,c=(s+a)/2;if(s===a)l=0,u=0;else{let p=a-s;switch(u=c<=.5?p/(a+s):p/(2-a-s),a){case n:l=(i-o)/p+(i<o?6:0);break;case i:l=(o-n)/p+2;break;case o:l=(n-i)/p+4;break}l/=6}return t.h=l,t.s=u,t.l=c,t}getRGB(t,r=na.workingColorSpace){return na.fromWorkingColorSpace(pi.copy(this),r),t.r=pi.r,t.g=pi.g,t.b=pi.b,t}getStyle(t=Co){na.fromWorkingColorSpace(pi.copy(this),t);let r=pi.r,n=pi.g,i=pi.b;return t!==Co?`color(${t} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(t,r,n){return this.getHSL(cc),this.setHSL(cc.h+t,cc.s+r,cc.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,n){return this.r=t.r+(r.r-t.r)*n,this.g=t.g+(r.g-t.g)*n,this.b=t.b+(r.b-t.b)*n,this}lerpHSL(t,r){this.getHSL(cc),t.getHSL(r1);let n=Dg(cc.h,r1.h,r),i=Dg(cc.s,r1.s,r),o=Dg(cc.l,r1.l,r);return this.setHSL(n,i,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let r=this.r,n=this.g,i=this.b,o=t.elements;return this.r=o[0]*r+o[3]*n+o[6]*i,this.g=o[1]*r+o[4]*n+o[7]*i,this.b=o[2]*r+o[5]*n+o[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},pi=new Jr;Jr.NAMES=o8;Lp=class{constructor(t,r,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){let r=this.parameterPositions,n=this._cachedIndex,i=r[n],o=r[n-1];e:{t:{let a;r:{n:if(!(t<i)){for(let s=n+2;;){if(i===void 0){if(t<o)break n;return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(o=i,i=r[++n],t<i)break t}a=r.length;break r}if(!(t>=o)){let s=r[1];t<s&&(n=2,o=s);for(let l=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=o,o=r[--n-1],t>=o)break t}a=n,n=0;break r}break e}for(;n<a;){let s=n+a>>>1;t<r[s]?a=s:n=s+1}if(i=r[n],o=r[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,i)}return this.interpolate_(n,o,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=t*i;for(let a=0;a!==i;++a)r[a]=n[o+a];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},d1=class extends Lp{constructor(t,r,n,i){super(t,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jM,endingEnd:jM}}intervalChanged_(t,r,n){let i=this.parameterPositions,o=t-2,a=t+1,s=i[o],l=i[a];if(s===void 0)switch(this.getSettings_().endingStart){case GM:o=t,s=2*r-n;break;case HM:o=i.length-2,s=r+i[o]-i[o+1];break;default:o=t,s=n}if(l===void 0)switch(this.getSettings_().endingEnd){case GM:a=t,l=2*n-r;break;case HM:a=1,l=n+i[1]-i[0];break;default:a=t-1,l=r}let u=(n-r)*.5,c=this.valueSize;this._weightPrev=u/(r-s),this._weightNext=u/(l-n),this._offsetPrev=o*c,this._offsetNext=a*c}interpolate_(t,r,n,i){let o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,c=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(n-r)/(i-r),x=m*m,b=x*m,_=-d*b+2*d*x-d*m,T=(1+d)*b+(-1.5-2*d)*x+(-.5+d)*m+1,I=(-1-h)*b+(1.5+h)*x+.5*m,S=h*b-h*x;for(let E=0;E!==s;++E)o[E]=_*a[c+E]+T*a[u+E]+I*a[l+E]+S*a[p+E];return o}},f1=class extends Lp{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){let o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,c=(n-r)/(i-r),p=1-c;for(let d=0;d!==s;++d)o[d]=a[u+d]*p+a[l+d]*c;return o}},h1=class extends Lp{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}},ia=class{constructor(t,r,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=n1(r,this.TimeBufferType),this.values=n1(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){let r=t.constructor,n;if(r.toJSON!==this.toJSON)n=r.toJSON(t);else{n={name:t.name,times:n1(t.times,Array),values:n1(t.values,Array)};let i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new h1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new f1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new d1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Lg:r=this.InterpolantFactoryMethodDiscrete;break;case s1:r=this.InterpolantFactoryMethodLinear;break;case i1:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lg;case this.InterpolantFactoryMethodLinear:return s1;case this.InterpolantFactoryMethodSmooth:return i1}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=t}return this}scale(t){if(t!==1){let r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=t}return this}trim(t,r){let n=this.times,i=n.length,o=0,a=i-1;for(;o!==i&&n[o]<t;)++o;for(;a!==-1&&n[a]>r;)--a;if(++a,o!==0||a!==i){o>=a&&(a=Math.max(a,1),o=a-1);let s=this.getValueSize();this.times=n.slice(o,a),this.values=this.values.slice(o*s,a*s)}return this}validate(){let t=!0,r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let n=this.times,i=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let s=0;s!==o;s++){let l=n[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),t=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,a),t=!1;break}a=l}if(i!==void 0&&dme(i))for(let s=0,l=i.length;s!==l;++s){let u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),t=!1;break}}return t}optimize(){let t=this.times.slice(),r=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===i1,o=t.length-1,a=1;for(let s=1;s<o;++s){let l=!1,u=t[s],c=t[s+1];if(u!==c&&(s!==1||u!==t[0]))if(i)l=!0;else{let p=s*n,d=p-n,h=p+n;for(let m=0;m!==n;++m){let x=r[p+m];if(x!==r[d+m]||x!==r[h+m]){l=!0;break}}}if(l){if(s!==a){t[a]=t[s];let p=s*n,d=a*n;for(let h=0;h!==n;++h)r[d+h]=r[p+h]}++a}}if(o>0){t[a]=t[o];for(let s=o*n,l=a*n,u=0;u!==n;++u)r[l+u]=r[s+u];++a}return a!==t.length?(this.times=t.slice(0,a),this.values=r.slice(0,a*n)):(this.times=t,this.values=r),this}clone(){let t=this.times.slice(),r=this.values.slice(),n=this.constructor,i=new n(this.name,t,r);return i.createInterpolant=this.createInterpolant,i}};ia.prototype.TimeBufferType=Float32Array;ia.prototype.ValueBufferType=Float32Array;ia.prototype.DefaultInterpolation=s1;fc=class extends ia{constructor(t,r,n){super(t,r,n)}};fc.prototype.ValueTypeName="bool";fc.prototype.ValueBufferType=Array;fc.prototype.DefaultInterpolation=Lg;fc.prototype.InterpolantFactoryMethodLinear=void 0;fc.prototype.InterpolantFactoryMethodSmooth=void 0;m1=class extends ia{};m1.prototype.ValueTypeName="color";y1=class extends ia{};y1.prototype.ValueTypeName="number";g1=class extends Lp{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){let o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(n-r)/(i-r),u=t*s;for(let c=u+s;u!==c;u+=4)Yl.slerpFlat(o,0,a,u-s,a,u,l);return o}},Bg=class extends ia{InterpolantFactoryMethodLinear(t){return new g1(this.times,this.values,this.getValueSize(),t)}};Bg.prototype.ValueTypeName="quaternion";Bg.prototype.InterpolantFactoryMethodSmooth=void 0;hc=class extends ia{constructor(t,r,n){super(t,r,n)}};hc.prototype.ValueTypeName="string";hc.prototype.ValueBufferType=Array;hc.prototype.DefaultInterpolation=Lg;hc.prototype.InterpolantFactoryMethodLinear=void 0;hc.prototype.InterpolantFactoryMethodSmooth=void 0;x1=class extends ia{};x1.prototype.ValueTypeName="vector";qM={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},b1=class{constructor(t,r,n){let i=this,o=!1,a=0,s=0,l,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=n,this.itemStart=function(c){s++,o===!1&&i.onStart!==void 0&&i.onStart(c,a,s),o=!0},this.itemEnd=function(c){a++,i.onProgress!==void 0&&i.onProgress(c,a,s),a===s&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,p){return u.push(c,p),this},this.removeHandler=function(c){let p=u.indexOf(c);return p!==-1&&u.splice(p,2),this},this.getHandler=function(c){for(let p=0,d=u.length;p<d;p+=2){let h=u[p],m=u[p+1];if(h.global&&(h.lastIndex=0),h.test(c))return m}return null}}},s8=new b1,Gf=class{constructor(t){this.manager=t!==void 0?t:s8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){let n=this;return new Promise(function(i,o){n.load(t,i,r,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};Gf.DEFAULT_MATERIAL_NAME="__DEFAULT";v1=class extends Gf{constructor(t){super(t)}load(t,r,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,a=qM.get(t);if(a!==void 0)return o.manager.itemStart(t),setTimeout(function(){r&&r(a),o.manager.itemEnd(t)},0),a;let s=l1("img");function l(){c(),qM.add(t,this),r&&r(this),o.manager.itemEnd(t)}function u(p){c(),i&&i(p),o.manager.itemError(t),o.manager.itemEnd(t)}function c(){s.removeEventListener("load",l,!1),s.removeEventListener("error",u,!1)}return s.addEventListener("load",l,!1),s.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),o.manager.itemStart(t),s.src=t,s}},Fp=class extends Gf{constructor(t){super(t)}load(t,r,n,i){let o=new pc,a=new v1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(s){o.image=s,o.needsUpdate=!0,r!==void 0&&r(o)},n,i),o}},d2="\\[\\]\\.:\\/",fme=new RegExp("["+d2+"]","g"),f2="[^"+d2+"]",hme="[^"+d2.replace("\\.","")+"]",mme=/((?:WC+[\/:])*)/.source.replace("WC",f2),yme=/(WCOD+)?/.source.replace("WCOD",hme),gme=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f2),xme=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f2),bme=new RegExp("^"+mme+yme+gme+xme+"$"),vme=["material","materials","bones","map"],YM=class{constructor(t,r,n){let i=n||fr.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,i)}getValue(t,r){this.bind();let n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,r)}setValue(t,r){let n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=n.length;i!==o;++i)n[i].setValue(t,r)}bind(){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].bind()}unbind(){let t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].unbind()}},fr=class e{constructor(t,r,n){this.path=r,this.parsedPath=n||e.parseTrackName(r),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,n){return t&&t.isAnimationObjectGroup?new e.Composite(t,r,n):new e(t,r,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(fme,"")}static parseTrackName(t){let r=bme.exec(t);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let o=n.nodeName.substring(i+1);vme.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,r){if(r===void 0||r===""||r==="."||r===-1||r===t.name||r===t.uuid)return t;if(t.skeleton){let n=t.skeleton.getBoneByName(r);if(n!==void 0)return n}if(t.children){let n=function(o){for(let a=0;a<o.length;a++){let s=o[a];if(s.name===r||s.uuid===r)return s;let l=n(s.children);if(l)return l}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){let n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)t[r++]=n[i]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){let n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++]}_setValue_array_setNeedsUpdate(t,r){let n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){let n=this.resolvedProperty;for(let i=0,o=n.length;i!==o;++i)n[i]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node,r=this.parsedPath,n=r.objectName,i=r.propertyName,o=r.propertyIndex;if(t||(t=e.findNode(this.rootNode,r.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=r.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let c=0;c<t.length;c++)if(t[c].name===u){u=c;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[i];if(a===void 0){let u=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let s=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?s=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};fr.Composite=YM;fr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fr.prototype.GetterByBindingType=[fr.prototype._getValue_direct,fr.prototype._getValue_array,fr.prototype._getValue_arrayElement,fr.prototype._getValue_toArray];fr.prototype.SetterByBindingTypeAndVersioning=[[fr.prototype._setValue_direct,fr.prototype._setValue_direct_setNeedsUpdate,fr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_array,fr.prototype._setValue_array_setNeedsUpdate,fr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_arrayElement,fr.prototype._setValue_arrayElement_setNeedsUpdate,fr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_fromArray,fr.prototype._setValue_fromArray_setNeedsUpdate,fr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];WVe=new Float32Array(1),KU=new Zi,zg=class{constructor(t,r,n=0,i=1/0){this.ray=new p1(t,r),this.near=n,this.far=i,this.camera=null,this.layers=new Rg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,r){this.ray.set(t,r)}setFromCamera(t,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(t){return KU.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(KU),this}intersectObject(t,r=!0,n=[]){return JM(t,this,n,r),n.sort(QU),n}intersectObjects(t,r=!0,n=[]){for(let i=0,o=t.length;i<o;i++)JM(t[i],this,n,r);return n.sort(QU),n}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:KM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=KM)});var zme,Nme,Ume,$me,Vme,jme,Gme,Hme,Zme,Wme,Xme,qme,Yme,Jme,Kme,Qme,eye,tye,rye,nye,iye,oye,aye,sye,lye,uye,cye,pye,dye,fye,hye,mye,yye,gye,xye,bye,vye,_ye,Sye,wye,Tye,Iye,Eye,Cye,Pye,Mye,Aye,Dye,Lye,Fye,kye,Oye,Rye,Bye,zye,Nye,Uye,$ye,Vye,jye,Gye,Hye,Zye,Wye,Xye,qye,Yye,Jye,Kye,Qye,ege,tge,rge,nge,ige,oge,age,sge,lge,uge,cge,pge,dge,fge,hge,mge,yge,gge,xge,bge,vge,_ge,Sge,wge,Tge,Ige,Ege,Cge,Pge,Mge,Age,Dge,Lge,Fge,kge,Oge,Rge,Bge,zge,Nge,Uge,$ge,Vge,jge,Gge,Hge,Zge,Wge,Xge,qge,Yge,Jge,Kge,Qge,e0e,t0e,r0e,n0e,i0e,o0e,a0e,s0e,l0e,u0e,c0e,p0e,d0e,f0e,h0e,m0e,y0e,lt,he,l8,kp,Hf,rqe,nqe,iqe,oqe,aqe,Jl=f(()=>{h2();h2();zme=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Nme=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Ume=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$me=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vme=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,jme=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Gme=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Hme=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Zme=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Wme=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Xme=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,qme=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Yme=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Jme=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Kme=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Qme=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,eye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,rye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,nye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,aye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,sye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,uye=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,cye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,pye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,dye=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,fye=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hye="gl_FragColor = linearToOutputTexel( gl_FragColor );",mye=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,yye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gye=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xye=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bye=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,vye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,_ye=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Sye=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wye=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Tye=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Iye=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Eye=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cye=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pye=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Mye=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Aye=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Dye=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Lye=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Fye=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kye=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Oye=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Rye=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Bye=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zye=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Nye=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uye=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$ye=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vye=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jye=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Gye=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hye=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Zye=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Wye=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xye=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qye=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yye=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Jye=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Kye=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Qye=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,ege=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tge=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,rge=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,nge=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ige=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oge=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,age=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,sge=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lge=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uge=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,cge=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,pge=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dge=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,fge=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hge=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mge=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yge=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gge=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xge=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bge=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,vge=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_ge=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Sge=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wge=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Tge=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ige=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ege=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Cge=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Pge=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Mge=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Age=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Dge=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Lge=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Fge=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kge=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Oge=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Rge=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Bge=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,zge=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Uge=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$ge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vge=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jge=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Gge=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Hge=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Zge=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Wge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xge=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qge=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yge=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jge=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Kge=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qge=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,r0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,i0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,o0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,l0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p0e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,d0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,f0e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h0e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,m0e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,lt={alphahash_fragment:zme,alphahash_pars_fragment:Nme,alphamap_fragment:Ume,alphamap_pars_fragment:$me,alphatest_fragment:Vme,alphatest_pars_fragment:jme,aomap_fragment:Gme,aomap_pars_fragment:Hme,batching_pars_vertex:Zme,batching_vertex:Wme,begin_vertex:Xme,beginnormal_vertex:qme,bsdfs:Yme,iridescence_fragment:Jme,bumpmap_pars_fragment:Kme,clipping_planes_fragment:Qme,clipping_planes_pars_fragment:eye,clipping_planes_pars_vertex:tye,clipping_planes_vertex:rye,color_fragment:nye,color_pars_fragment:iye,color_pars_vertex:oye,color_vertex:aye,common:sye,cube_uv_reflection_fragment:lye,defaultnormal_vertex:uye,displacementmap_pars_vertex:cye,displacementmap_vertex:pye,emissivemap_fragment:dye,emissivemap_pars_fragment:fye,colorspace_fragment:hye,colorspace_pars_fragment:mye,envmap_fragment:yye,envmap_common_pars_fragment:gye,envmap_pars_fragment:xye,envmap_pars_vertex:bye,envmap_physical_pars_fragment:Aye,envmap_vertex:vye,fog_vertex:_ye,fog_pars_vertex:Sye,fog_fragment:wye,fog_pars_fragment:Tye,gradientmap_pars_fragment:Iye,lightmap_pars_fragment:Eye,lights_lambert_fragment:Cye,lights_lambert_pars_fragment:Pye,lights_pars_begin:Mye,lights_toon_fragment:Dye,lights_toon_pars_fragment:Lye,lights_phong_fragment:Fye,lights_phong_pars_fragment:kye,lights_physical_fragment:Oye,lights_physical_pars_fragment:Rye,lights_fragment_begin:Bye,lights_fragment_maps:zye,lights_fragment_end:Nye,logdepthbuf_fragment:Uye,logdepthbuf_pars_fragment:$ye,logdepthbuf_pars_vertex:Vye,logdepthbuf_vertex:jye,map_fragment:Gye,map_pars_fragment:Hye,map_particle_fragment:Zye,map_particle_pars_fragment:Wye,metalnessmap_fragment:Xye,metalnessmap_pars_fragment:qye,morphinstance_vertex:Yye,morphcolor_vertex:Jye,morphnormal_vertex:Kye,morphtarget_pars_vertex:Qye,morphtarget_vertex:ege,normal_fragment_begin:tge,normal_fragment_maps:rge,normal_pars_fragment:nge,normal_pars_vertex:ige,normal_vertex:oge,normalmap_pars_fragment:age,clearcoat_normal_fragment_begin:sge,clearcoat_normal_fragment_maps:lge,clearcoat_pars_fragment:uge,iridescence_pars_fragment:cge,opaque_fragment:pge,packing:dge,premultiplied_alpha_fragment:fge,project_vertex:hge,dithering_fragment:mge,dithering_pars_fragment:yge,roughnessmap_fragment:gge,roughnessmap_pars_fragment:xge,shadowmap_pars_fragment:bge,shadowmap_pars_vertex:vge,shadowmap_vertex:_ge,shadowmask_pars_fragment:Sge,skinbase_vertex:wge,skinning_pars_vertex:Tge,skinning_vertex:Ige,skinnormal_vertex:Ege,specularmap_fragment:Cge,specularmap_pars_fragment:Pge,tonemapping_fragment:Mge,tonemapping_pars_fragment:Age,transmission_fragment:Dge,transmission_pars_fragment:Lge,uv_pars_fragment:Fge,uv_pars_vertex:kge,uv_vertex:Oge,worldpos_vertex:Rge,background_vert:Bge,background_frag:zge,backgroundCube_vert:Nge,backgroundCube_frag:Uge,cube_vert:$ge,cube_frag:Vge,depth_vert:jge,depth_frag:Gge,distanceRGBA_vert:Hge,distanceRGBA_frag:Zge,equirect_vert:Wge,equirect_frag:Xge,linedashed_vert:qge,linedashed_frag:Yge,meshbasic_vert:Jge,meshbasic_frag:Kge,meshlambert_vert:Qge,meshlambert_frag:e0e,meshmatcap_vert:t0e,meshmatcap_frag:r0e,meshnormal_vert:n0e,meshnormal_frag:i0e,meshphong_vert:o0e,meshphong_frag:a0e,meshphysical_vert:s0e,meshphysical_frag:l0e,meshtoon_vert:u0e,meshtoon_frag:c0e,points_vert:p0e,points_frag:d0e,shadow_vert:f0e,shadow_frag:h0e,sprite_vert:m0e,sprite_frag:y0e},he={common:{diffuse:{value:new Jr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new et},alphaMap:{value:null},alphaMapTransform:{value:new et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new et}},envmap:{envMap:{value:null},envMapRotation:{value:new et},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new et},normalScale:{value:new Ci(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new et},alphaTest:{value:0},uvTransform:{value:new et}},sprite:{diffuse:{value:new Jr(16777215)},opacity:{value:1},center:{value:new Ci(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new et},alphaMap:{value:null},alphaMapTransform:{value:new et},alphaTest:{value:0}}},l8={basic:{uniforms:Pi([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.fog]),vertexShader:lt.meshbasic_vert,fragmentShader:lt.meshbasic_frag},lambert:{uniforms:Pi([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new Jr(0)}}]),vertexShader:lt.meshlambert_vert,fragmentShader:lt.meshlambert_frag},phong:{uniforms:Pi([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new Jr(0)},specular:{value:new Jr(1118481)},shininess:{value:30}}]),vertexShader:lt.meshphong_vert,fragmentShader:lt.meshphong_frag},standard:{uniforms:Pi([he.common,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.roughnessmap,he.metalnessmap,he.fog,he.lights,{emissive:{value:new Jr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lt.meshphysical_vert,fragmentShader:lt.meshphysical_frag},toon:{uniforms:Pi([he.common,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.gradientmap,he.fog,he.lights,{emissive:{value:new Jr(0)}}]),vertexShader:lt.meshtoon_vert,fragmentShader:lt.meshtoon_frag},matcap:{uniforms:Pi([he.common,he.bumpmap,he.normalmap,he.displacementmap,he.fog,{matcap:{value:null}}]),vertexShader:lt.meshmatcap_vert,fragmentShader:lt.meshmatcap_frag},points:{uniforms:Pi([he.points,he.fog]),vertexShader:lt.points_vert,fragmentShader:lt.points_frag},dashed:{uniforms:Pi([he.common,he.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lt.linedashed_vert,fragmentShader:lt.linedashed_frag},depth:{uniforms:Pi([he.common,he.displacementmap]),vertexShader:lt.depth_vert,fragmentShader:lt.depth_frag},normal:{uniforms:Pi([he.common,he.bumpmap,he.normalmap,he.displacementmap,{opacity:{value:1}}]),vertexShader:lt.meshnormal_vert,fragmentShader:lt.meshnormal_frag},sprite:{uniforms:Pi([he.sprite,he.fog]),vertexShader:lt.sprite_vert,fragmentShader:lt.sprite_frag},background:{uniforms:{uvTransform:{value:new et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:lt.background_vert,fragmentShader:lt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new et}},vertexShader:lt.backgroundCube_vert,fragmentShader:lt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lt.cube_vert,fragmentShader:lt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lt.equirect_vert,fragmentShader:lt.equirect_frag},distanceRGBA:{uniforms:Pi([he.common,he.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lt.distanceRGBA_vert,fragmentShader:lt.distanceRGBA_frag},shadow:{uniforms:Pi([he.lights,he.fog,{color:{value:new Jr(0)},opacity:{value:1}}]),vertexShader:lt.shadow_vert,fragmentShader:lt.shadow_frag}};l8.physical={uniforms:Pi([l8.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new et},clearcoatNormalScale:{value:new Ci(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new et},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new et},sheen:{value:0},sheenColor:{value:new Jr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new et},transmissionSamplerSize:{value:new Ci},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new et},attenuationDistance:{value:0},attenuationColor:{value:new Jr(0)},specularColor:{value:new Jr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new et},anisotropyVector:{value:new Ci},anisotropyMap:{value:null},anisotropyMapTransform:{value:new et}}]),vertexShader:lt.meshphysical_vert,fragmentShader:lt.meshphysical_frag};kp=(1+Math.sqrt(5))/2,Hf=1/kp,rqe=[new pe(-kp,Hf,0),new pe(kp,Hf,0),new pe(-Hf,0,kp),new pe(Hf,0,kp),new pe(0,kp,-Hf),new pe(0,kp,Hf),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)],nqe=new Float32Array(16),iqe=new Float32Array(9),oqe=new Float32Array(4),aqe={[QM]:e2,[t2]:o2,[n2]:a2,[r2]:i2,[e2]:QM,[o2]:t2,[a2]:n2,[i2]:r2}});var d8=f(()=>{"use strict";Gl()});var f8=f(()=>{"use strict"});function Ug(e){return e*(Math.PI/180)}function $g(e,t){let r=Math.pow(10,t);return Math.sign(e)*Math.round(Math.abs(e)*r)/r}function Vg(){return typeof window<"u"&&window!==null}function h8(e,t){let[r,n]=e,[i,o]=t,a=Ug(i-r),s=Ug(o-n);return Math.sqrt(a*a+s*s)*Ig}function Wa(e,t){let[r,n]=e.map(c=>Ug(c)),[i,o]=t.map(c=>Ug(c)),a=o-n,l=(i-r)*Math.cos((n+o)/2),u=a;return Math.sqrt(l*l+u*u)*Ig}var mc=f(()=>{"use strict";UU();X_();d8();f8()});function jg(e,t,r=!1){let n=null,i=0;return function(...o){i++,i===1&&r===!0&&e(...o);let a=()=>{(!r||i>1)&&e(...o),n=null,i=0};clearTimeout(n),n=setTimeout(a,t)}}var m8=f(()=>{"use strict"});var y8=f(()=>{"use strict"});function y2(e,t=0){let r=3735928559^t,n=1103547991^t;for(let i=0,o;i<e.length;i++)o=e.charCodeAt(i),r=Math.imul(r^o,2654435761),n=Math.imul(n^o,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&n)+(r>>>0)}var m2,Kt,Js=f(()=>{"use strict";m2=[0,4,6,8,10],Kt=()=>{let e=new Array(16).fill(0),t=Math.random()*4294967296;for(let n=0;n<e.length;n++)n>0&&(n&3)===0&&(t=Math.random()*4294967296),e[n]=t>>>((n&3)<<3)&255;let r=e.map(n=>n.toString(16).padStart(2,"0"));return r[6]="4"+r[6][1],r[8]=["8","9","a","b"].includes(r[7][0])?r[7]:"a"+r[7][1],m2.map((n,i)=>r.slice(n,i===m2.length-1?void 0:m2[i+1]).join("")).join("-")}});var Nt,yc=f(()=>{"use strict";Nt=class{constructor(){w(this,"_subscribers",{});w(this,"_destroyed",!1)}publish(t,r){!this._subscribers||!this._subscribers[t]||this._destroyed||this._subscribers[t].forEach(function(n){typeof n=="function"&&n(r)})}on(t,r){(!this._subscribers||this._destroyed)&&(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(r)}off(t,r){if(!this._subscribers||this._subscribers[t]==null||this._destroyed)return;let n=this._subscribers[t].indexOf(r);n!==-1&&this._subscribers[t].splice(n,1)}destroy(){this._destroyed=!0,this._subscribers={}}}});var g8,x8,Gg,Hg,Op,Xa,qa,w1,oa,T1=f(()=>{"use strict";Js();g8="mi-session-data",x8="mi-local-data",Gg="id",Hg="deviceId",w1=class w1{constructor(){D(this,Xa);D(this,qa);try{let t=sessionStorage.getItem(g8);t?R(this,Xa,JSON.parse(t)):R(this,Xa,{[Gg]:Kt()})}catch{R(this,Xa,{[Gg]:Kt()})}try{let t=localStorage.getItem(x8);t?R(this,qa,JSON.parse(t)):R(this,qa,{[Hg]:Kt()})}catch{R(this,qa,{[Hg]:Kt()})}y(this,Xa)[Gg]||(y(this,Xa)[Gg]=Kt()),y(this,qa)[Hg]||(y(this,qa)[Hg]=Kt())}static getInstance(){return y(this,Op)||R(this,Op,new w1),y(this,Op)}static ___clearInstance(){R(this,Op,void 0)}saveSessionData(t,r){y(this,Xa)[t]=r;try{return sessionStorage.setItem(g8,JSON.stringify(y(this,Xa))),!0}catch{return!1}}loadSessionData(t){let r=y(this,Xa)[t];if(r!=null)return r}saveLocalData(t,r){y(this,qa)[t]=r;try{return localStorage.setItem(x8,JSON.stringify(y(this,qa))),!0}catch{return!1}}loadLocalData(t){let r=y(this,qa)[t];if(r!=null)return r}};Op=new WeakMap,Xa=new WeakMap,qa=new WeakMap,D(w1,Op);oa=w1});var Pqe,b8=f(()=>{"use strict";Jl();Pqe=new Set(Object.keys(Jr.NAMES))});var v8,g2=f(()=>{"use strict";Mp();v8=["ease-in","ease-out","ease-in-out","linear"]});var Pe=f(()=>{"use strict";Gl();Mp();mc();m8();y8();Js();yc();T1();b8();g2()});var Zg,x2=f(()=>{"use strict";Zg=e=>e!=null});var b0e,_8,S8=f(()=>{"use strict";x2();b0e=function(){let t=globalThis.fetch;return{fetch(...r){if(!Zg(t))throw new Error("fetch is not available in your environment. Pass your own function into `setFetchFn` (node-fetch, etc)");return t?.(...r)},setFetch(r){t=r}}}(),_8=b0e.fetch});function b2({mapId:e,baseUri:t=P8}){return`${t}${e}/`}function T8(){return oa.getInstance().loadLocalData("deviceId")}function I8(){return oa.getInstance().loadSessionData("id")}function v0e(e,t){return e+t}function E8(e){return C8.find(t=>t===e)}var C8,w8,P8,M8,A8,D8,L8,F8,Ks,aa,Kl,v2,I1,Zf,_0e,S0e,Xqe,sa,Wg,k8=f(()=>{"use strict";Pe();S8();C8=["websdk","web","webv2","kiosk-v2","mobile","iossdk","androidsdk","reactnativesdk","gen7","bespoke","reactsdk"],w8=C8[0],P8="https://api-gateway.mappedin.com/track-analytics/a/",M8="deny-watchposition",A8="load-mapview",D8="load-mapdata",L8="change-language",F8="query-directions",Zf=class{constructor(){D(this,Kl);D(this,Ks,Object.freeze({}));D(this,aa);w(this,"oneTimeEventsSent",new Set);w(this,"sendGetDirectionsEvent",jg((t,r,n)=>{let i={start:t,end:r,type:"location_to_location"};return n!==void 0&&(i.accessible=n),this.sendAnalyticEvent(F8,i)},2500));R(this,aa,me(this,Kl,I1).call(this,y(this,Ks)))}init(t){this.reset(),this.updateStateWithOptions(t)}reset(){R(this,Ks,{}),R(this,aa,me(this,Kl,I1).call(this,{})),this.oneTimeEventsSent.clear()}updateStateWithOptions(t){return R(this,Ks,Object.freeze(Object.assign({},y(this,Ks),t))),R(this,aa,me(this,Kl,I1).call(this,t)),me(this,Kl,v2).call(this,y(this,aa)),y(this,aa)}updateState(t){let r={...t};r.mapId&&(r.analyticsBaseUrl=b2({...y(this,aa),mapId:r.mapId})),r.context&&(r.context=E8(r.context)),r.baseUri&&(r.analyticsBaseUrl=b2({baseUri:r.baseUri,mapId:y(this,aa).mapId})),Object.assign(y(this,aa),r),this.handleStateUpdate(t),me(this,Kl,v2).call(this,r)}handleStateUpdate(t){t.userPosition?.floorLevel?this.sendBlueDotEvents("found-floor"):t.userPosition&&this.sendBlueDotEvents("found-position")}get authReady(){let{key:t,secret:r,accessToken:n}=this.getState();return!!(t&&r)||!!n}getState(){return y(this,aa)}getContext(){return this.getState().context||y(this,Ks).context||w8}getSessionId(){return this.getState().sessionId||y(this,Ks).sessionId||I8()}getDeviceId(){return this.getState().deviceId||y(this,Ks).deviceId||T8()}sendAnalyticEvent(t,r={}){let n=this.getState(),i=v0e(n.analyticsBaseUrl,t),o={"mi-context":this.getContext(),"mi-session":this.getSessionId(),"mi-device":this.getDeviceId()};if(n.logEvents&&ie.log("Analytics.track",i,o),!n.sendEvents)return Promise.resolve();if(!this.authReady)return ie.warn("Auth needs to be ready to send analytics.");let a={...r,g:n.geolocationMode,sdk_version:n.version};return n.userPosition&&Object.assign(a,n.userPosition),o["Content-Type"]="application/json",n.accessToken?o.Authorization=`Bearer ${n.accessToken}`:n.noAuth||n.secret&&n.key&&(o["x-mappedin-key"]=btoa(n.key),o["x-mappedin-secret"]=btoa(n.secret)),_8(i,{method:"POST",mode:"cors",headers:o,body:JSON.stringify(a)})}capture(t,r){if(S0e.includes(t))return ie.warn(`${t} event is sent internally.`),Promise.resolve();let n=_0e.includes(t)?t.slice(1):t;return this.sendAnalyticEvent(n,r)}sendGetMapDataEvent(t){return this.sendAnalyticEvent(D8,t)}sendChangeLanguageEvent(t){return this.sendAnalyticEvent(L8,t)}sendWatchPositionDenied(){return this.sendAnalyticEvent(M8)}sendMapViewLoadedEvent({firstRenderDuration:t,dimension:r,collisionWorkerDisabled:n,outdoorsWorkerDisabled:i}){return this.sendAnalyticEvent(A8,{type:"3d",firstRenderDuration:t,width:r.width,height:r.height,devicePixelRatio:globalThis.devicePixelRatio||1,collisionWorkerDisabled:n,outdoorsWorkerDisabled:i})}sendBlueDotEvents(t){if(!((t==="found-floor"||t==="found-position")&&this.oneTimeEventsSent.has(t)))return this.oneTimeEventsSent.add(t),this.sendAnalyticEvent(t)}};Ks=new WeakMap,aa=new WeakMap,Kl=new WeakSet,v2=function(t){t.sessionId&&oa.getInstance().saveSessionData("id",t.sessionId),t.deviceId&&oa.getInstance().saveLocalData("deviceId",t.deviceId)},I1=function(t){let r=t.baseUri??P8;return{baseUri:r,analyticsBaseUrl:b2({...t,baseUri:r}),version:process?.env?.npm_package_version||"v6",deviceId:t.deviceId||T8(),accessToken:t.accessToken,mapId:t.mapId,sessionId:t.sessionId||I8(),platformString:t.platformString||"",context:E8(t.context)||w8,geolocationMode:!1,sendEvents:t.sendEvents??!0,logEvents:t.logEvents??!1,noAuth:t.noAuth||!1,key:t.key,secret:t.secret}};_0e=["$select-location","$select-category","$query-suggest","$query-search"],S0e=[A8,D8,F8,M8,L8],Xqe=new Zf,Wg=class{constructor(t){D(this,sa);w(this,"capture");w(this,"updateState");R(this,sa,t),this.capture=y(this,sa).capture.bind(y(this,sa)),this.updateState=y(this,sa).updateState.bind(y(this,sa))}getState(){let{sessionId:t,deviceId:r,...n}=y(this,sa).getState();return n}getContext(){return y(this,sa).getContext()}getSessionId(){return y(this,sa).getSessionId()}getDeviceId(){return y(this,sa).getDeviceId()}};sa=new WeakMap});var _2=f(()=>{"use strict";k8()});var w0e,N8,U8,Vn,Xg,Wf,T0e,$8,qg,P1,E2,S2,I0e,V8,j8,M2,A2,G8,E0e,Rp,w2,C0e,P0e,M0e,A0e,T2,O8,D0e,C2,P2,I2,L0e,R8,B8,z8,E1,C1,H8,F0e,Z8=f(()=>{w0e="ENTRIES",N8="KEYS",U8="VALUES",Vn="",Xg=class{constructor(t,r){let n=t._tree,i=Array.from(n.keys());this.set=t,this._type=r,this._path=i.length>0?[{node:n,keys:i}]:[]}next(){let t=this.dive();return this.backtrack(),t}dive(){if(this._path.length===0)return{done:!0,value:void 0};let{node:t,keys:r}=Wf(this._path);if(Wf(r)===Vn)return{done:!1,value:this.result()};let n=t.get(Wf(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;let t=Wf(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:t})=>Wf(t)).filter(t=>t!==Vn).join("")}value(){return Wf(this._path).node.get(Vn)}result(){switch(this._type){case U8:return this.value();case N8:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}},Wf=e=>e[e.length-1],T0e=(e,t,r)=>{let n=new Map;if(t===void 0)return n;let i=t.length+1,o=i+r,a=new Uint8Array(o*i).fill(r+1);for(let s=0;s<i;++s)a[s]=s;for(let s=1;s<o;++s)a[s*i]=s;return $8(e,t,r,n,a,1,i,""),n},$8=(e,t,r,n,i,o,a,s)=>{let l=o*a;e:for(let u of e.keys())if(u===Vn){let c=i[l-1];c<=r&&n.set(s,[e.get(u),c])}else{let c=o;for(let p=0;p<u.length;++p,++c){let d=u[p],h=a*c,m=h-a,x=i[h],b=Math.max(0,c-r-1),_=Math.min(a-1,c+r);for(let T=b;T<_;++T){let I=d!==t[T],S=i[m+T]+ +I,E=i[m+T+1]+1,P=i[h+T]+1,L=i[h+T+1]=Math.min(S,E,P);L<x&&(x=L)}if(x>r)continue e}$8(e.get(u),t,r,n,i,c,a,s+u)}},qg=class e{constructor(t=new Map,r=""){this._size=void 0,this._tree=t,this._prefix=r}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");let[r,n]=P1(this._tree,t.slice(this._prefix.length));if(r===void 0){let[i,o]=M2(n);for(let a of i.keys())if(a!==Vn&&a.startsWith(o)){let s=new Map;return s.set(a.slice(o.length),i.get(a)),new e(s,t)}}return new e(r,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,I0e(this._tree,t)}entries(){return new Xg(this,w0e)}forEach(t){for(let[r,n]of this)t(r,n,this)}fuzzyGet(t,r){return T0e(this._tree,t,r)}get(t){let r=E2(this._tree,t);return r!==void 0?r.get(Vn):void 0}has(t){let r=E2(this._tree,t);return r!==void 0&&r.has(Vn)}keys(){return new Xg(this,N8)}set(t,r){if(typeof t!="string")throw new Error("key must be a string");return this._size=void 0,S2(this._tree,t).set(Vn,r),this}get size(){if(this._size)return this._size;this._size=0;let t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=S2(this._tree,t);return n.set(Vn,r(n.get(Vn))),this}fetch(t,r){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=S2(this._tree,t),i=n.get(Vn);return i===void 0&&n.set(Vn,i=r()),i}values(){return new Xg(this,U8)}[Symbol.iterator](){return this.entries()}static from(t){let r=new e;for(let[n,i]of t)r.set(n,i);return r}static fromObject(t){return e.from(Object.entries(t))}},P1=(e,t,r=[])=>{if(t.length===0||e==null)return[e,r];for(let n of e.keys())if(n!==Vn&&t.startsWith(n))return r.push([e,n]),P1(e.get(n),t.slice(n.length),r);return r.push([e,t]),P1(void 0,"",r)},E2=(e,t)=>{if(t.length===0||e==null)return e;for(let r of e.keys())if(r!==Vn&&t.startsWith(r))return E2(e.get(r),t.slice(r.length))},S2=(e,t)=>{let r=t.length;e:for(let n=0;e&&n<r;){for(let o of e.keys())if(o!==Vn&&t[n]===o[0]){let a=Math.min(r-n,o.length),s=1;for(;s<a&&t[n+s]===o[s];)++s;let l=e.get(o);if(s===o.length)e=l;else{let u=new Map;u.set(o.slice(s),l),e.set(t.slice(n,n+s),u),e.delete(o),e=u}n+=s;continue e}let i=new Map;return e.set(t.slice(n),i),i}return e},I0e=(e,t)=>{let[r,n]=P1(e,t);if(r!==void 0){if(r.delete(Vn),r.size===0)V8(n);else if(r.size===1){let[i,o]=r.entries().next().value;j8(n,i,o)}}},V8=e=>{if(e.length===0)return;let[t,r]=M2(e);if(t.delete(r),t.size===0)V8(e.slice(0,-1));else if(t.size===1){let[n,i]=t.entries().next().value;n!==Vn&&j8(e.slice(0,-1),n,i)}},j8=(e,t,r)=>{if(e.length===0)return;let[n,i]=M2(e);n.set(i+t,r),n.delete(i)},M2=e=>e[e.length-1],A2="or",G8="and",E0e="and_not",Rp=class e{constructor(t){if(t?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');let r=t.autoVacuum==null||t.autoVacuum===!0?I2:t.autoVacuum;this._options={...T2,...t,autoVacuum:r,searchOptions:{...O8,...t.searchOptions||{}},autoSuggestOptions:{...D0e,...t.autoSuggestOptions||{}}},this._index=new qg,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=P2,this.addFields(this._options.fields)}add(t){let{extractField:r,stringifyField:n,tokenize:i,processTerm:o,fields:a,idField:s}=this._options,l=r(t,s);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);if(this._idToShortId.has(l))throw new Error(`MiniSearch: duplicate ID ${l}`);let u=this.addDocumentId(l);this.saveStoredFields(u,t);for(let c of a){let p=r(t,c);if(p==null)continue;let d=i(n(p,c),c),h=this._fieldIds[c],m=new Set(d).size;this.addFieldLength(u,h,this._documentCount-1,m);for(let x of d){let b=o(x,c);if(Array.isArray(b))for(let _ of b)this.addTerm(h,u,_);else b&&this.addTerm(h,u,b)}}}addAll(t){for(let r of t)this.add(r)}addAllAsync(t,r={}){let{chunkSize:n=10}=r,i={chunk:[],promise:Promise.resolve()},{chunk:o,promise:a}=t.reduce(({chunk:s,promise:l},u,c)=>(s.push(u),(c+1)%n===0?{chunk:[],promise:l.then(()=>new Promise(p=>setTimeout(p,0))).then(()=>this.addAll(s))}:{chunk:s,promise:l}),i);return a.then(()=>this.addAll(o))}remove(t){let{tokenize:r,processTerm:n,extractField:i,stringifyField:o,fields:a,idField:s}=this._options,l=i(t,s);if(l==null)throw new Error(`MiniSearch: document does not have ID field "${s}"`);let u=this._idToShortId.get(l);if(u==null)throw new Error(`MiniSearch: cannot remove document with ID ${l}: it is not in the index`);for(let c of a){let p=i(t,c);if(p==null)continue;let d=r(o(p,c),c),h=this._fieldIds[c],m=new Set(d).size;this.removeFieldLength(u,h,this._documentCount,m);for(let x of d){let b=n(x,c);if(Array.isArray(b))for(let _ of b)this.removeTerm(h,u,_);else b&&this.removeTerm(h,u,b)}}this._storedFields.delete(u),this._documentIds.delete(u),this._idToShortId.delete(l),this._fieldLength.delete(u),this._documentCount-=1}removeAll(t){if(t)for(let r of t)this.remove(r);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new qg,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){let r=this._idToShortId.get(t);if(r==null)throw new Error(`MiniSearch: cannot discard document with ID ${t}: it is not in the index`);this._idToShortId.delete(t),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach((n,i)=>{this.removeFieldLength(r,i,this._documentCount,n)}),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;let{minDirtFactor:t,minDirtCount:r,batchSize:n,batchWait:i}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:i},{minDirtCount:r,minDirtFactor:t})}discardAll(t){let r=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(let n of t)this.discard(n)}finally{this._options.autoVacuum=r}this.maybeAutoVacuum()}replace(t){let{idField:r,extractField:n}=this._options,i=n(t,r);this.discard(i),this.add(t)}vacuum(t={}){return this.conditionalVacuum(t)}conditionalVacuum(t,r){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&r,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{let n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=P2,this.performVacuuming(t,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(r)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}async performVacuuming(t,r){let n=this._dirtCount;if(this.vacuumConditionsMet(r)){let i=t.batchSize||C2.batchSize,o=t.batchWait||C2.batchWait,a=1;for(let[s,l]of this._index){for(let[u,c]of l)for(let[p]of c)this._documentIds.has(p)||(c.size<=1?l.delete(u):c.delete(p));this._index.get(s).size===0&&this._index.delete(s),a%i===0&&await new Promise(u=>setTimeout(u,o)),a+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(t){if(t==null)return!0;let{minDirtCount:r,minDirtFactor:n}=t;return r=r||I2.minDirtCount,n=n||I2.minDirtFactor,this.dirtCount>=r&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){let r=this._idToShortId.get(t);if(r!=null)return this._storedFields.get(r)}search(t,r={}){let{searchOptions:n}=this._options,i={...n,...r},o=this.executeQuery(t,r),a=[];for(let[s,{score:l,terms:u,match:c}]of o){let p=u.length||1,d={id:this._documentIds.get(s),score:l*p,terms:Object.keys(c),queryTerms:u,match:c};Object.assign(d,this._storedFields.get(s)),(i.filter==null||i.filter(d))&&a.push(d)}return t===e.wildcard&&i.boostDocument==null||a.sort(B8),a}autoSuggest(t,r={}){r={...this._options.autoSuggestOptions,...r};let n=new Map;for(let{score:o,terms:a}of this.search(t,r)){let s=a.join(" "),l=n.get(s);l!=null?(l.score+=o,l.count+=1):n.set(s,{score:o,terms:a,count:1})}let i=[];for(let[o,{score:a,terms:s,count:l}]of n)i.push({suggestion:o,terms:s,score:a/l});return i.sort(B8),i}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),r)}static async loadJSONAsync(t,r){if(r==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),r)}static getDefault(t){if(T2.hasOwnProperty(t))return w2(T2,t);throw new Error(`MiniSearch: unknown option "${t}"`)}static loadJS(t,r){let{index:n,documentIds:i,fieldLength:o,storedFields:a,serializationVersion:s}=t,l=this.instantiateMiniSearch(t,r);l._documentIds=E1(i),l._fieldLength=E1(o),l._storedFields=E1(a);for(let[u,c]of l._documentIds)l._idToShortId.set(c,u);for(let[u,c]of n){let p=new Map;for(let d of Object.keys(c)){let h=c[d];s===1&&(h=h.ds),p.set(parseInt(d,10),E1(h))}l._index.set(u,p)}return l}static async loadJSAsync(t,r){let{index:n,documentIds:i,fieldLength:o,storedFields:a,serializationVersion:s}=t,l=this.instantiateMiniSearch(t,r);l._documentIds=await C1(i),l._fieldLength=await C1(o),l._storedFields=await C1(a);for(let[c,p]of l._documentIds)l._idToShortId.set(p,c);let u=0;for(let[c,p]of n){let d=new Map;for(let h of Object.keys(p)){let m=p[h];s===1&&(m=m.ds),d.set(parseInt(h,10),await C1(m))}++u%1e3===0&&await H8(0),l._index.set(c,d)}return l}static instantiateMiniSearch(t,r){let{documentCount:n,nextId:i,fieldIds:o,averageFieldLength:a,dirtCount:s,serializationVersion:l}=t;if(l!==1&&l!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");let u=new e(r);return u._documentCount=n,u._nextId=i,u._idToShortId=new Map,u._fieldIds=o,u._avgFieldLength=a,u._dirtCount=s||0,u._index=new qg,u}executeQuery(t,r={}){if(t===e.wildcard)return this.executeWildcardQuery(r);if(typeof t!="string"){let d={...r,...t,queries:void 0},h=t.queries.map(m=>this.executeQuery(m,d));return this.combineResults(h,d.combineWith)}let{tokenize:n,processTerm:i,searchOptions:o}=this._options,a={tokenize:n,processTerm:i,...o,...r},{tokenize:s,processTerm:l}=a,p=s(t).flatMap(d=>l(d)).filter(d=>!!d).map(A0e(a)).map(d=>this.executeQuerySpec(d,a));return this.combineResults(p,a.combineWith)}executeQuerySpec(t,r){let n={...this._options.searchOptions,...r},i=(n.fields||this._options.fields).reduce((x,b)=>({...x,[b]:w2(n.boost,b)||1}),{}),{boostDocument:o,weights:a,maxFuzzy:s,bm25:l}=n,{fuzzy:u,prefix:c}={...O8.weights,...a},p=this._index.get(t.term),d=this.termResults(t.term,t.term,1,t.termBoost,p,i,o,l),h,m;if(t.prefix&&(h=this._index.atPrefix(t.term)),t.fuzzy){let x=t.fuzzy===!0?.2:t.fuzzy,b=x<1?Math.min(s,Math.round(t.term.length*x)):x;b&&(m=this._index.fuzzyGet(t.term,b))}if(h)for(let[x,b]of h){let _=x.length-t.term.length;if(!_)continue;m?.delete(x);let T=c*x.length/(x.length+.3*_);this.termResults(t.term,x,T,t.termBoost,b,i,o,l,d)}if(m)for(let x of m.keys()){let[b,_]=m.get(x);if(!_)continue;let T=u*x.length/(x.length+_);this.termResults(t.term,x,T,t.termBoost,b,i,o,l,d)}return d}executeWildcardQuery(t){let r=new Map,n={...this._options.searchOptions,...t};for(let[i,o]of this._documentIds){let a=n.boostDocument?n.boostDocument(o,"",this._storedFields.get(i)):1;r.set(i,{score:a,terms:[],match:{}})}return r}combineResults(t,r=A2){if(t.length===0)return new Map;let n=r.toLowerCase(),i=C0e[n];if(!i)throw new Error(`Invalid combination operator: ${r}`);return t.reduce(i)||new Map}toJSON(){let t=[];for(let[r,n]of this._index){let i={};for(let[o,a]of n)i[o]=Object.fromEntries(a);t.push([r,i])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,r,n,i,o,a,s,l,u=new Map){if(o==null)return u;for(let c of Object.keys(a)){let p=a[c],d=this._fieldIds[c],h=o.get(d);if(h==null)continue;let m=h.size,x=this._avgFieldLength[d];for(let b of h.keys()){if(!this._documentIds.has(b)){this.removeTerm(d,b,r),m-=1;continue}let _=s?s(this._documentIds.get(b),r,this._storedFields.get(b)):1;if(!_)continue;let T=h.get(b),I=this._fieldLength.get(b)[d],S=M0e(T,m,this._documentCount,I,x,l),E=n*i*p*_*S,P=u.get(b);if(P){P.score+=E,L0e(P.terms,t);let L=w2(P.match,r);L?L.push(c):P.match[r]=[c]}else u.set(b,{score:E,terms:[t],match:{[r]:[c]}})}}return u}addTerm(t,r,n){let i=this._index.fetch(n,z8),o=i.get(t);if(o==null)o=new Map,o.set(r,1),i.set(t,o);else{let a=o.get(r);o.set(r,(a||0)+1)}}removeTerm(t,r,n){if(!this._index.has(n)){this.warnDocumentChanged(r,t,n);return}let i=this._index.fetch(n,z8),o=i.get(t);o==null||o.get(r)==null?this.warnDocumentChanged(r,t,n):o.get(r)<=1?o.size<=1?i.delete(t):o.delete(r):o.set(r,o.get(r)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(t,r,n){for(let i of Object.keys(this._fieldIds))if(this._fieldIds[i]===r){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(t)} has changed before removal: term "${n}" was not present in field "${i}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(t){let r=this._nextId;return this._idToShortId.set(t,r),this._documentIds.set(r,t),this._documentCount+=1,this._nextId+=1,r}addFields(t){for(let r=0;r<t.length;r++)this._fieldIds[t[r]]=r}addFieldLength(t,r,n,i){let o=this._fieldLength.get(t);o==null&&this._fieldLength.set(t,o=[]),o[r]=i;let s=(this._avgFieldLength[r]||0)*n+i;this._avgFieldLength[r]=s/(n+1)}removeFieldLength(t,r,n,i){if(n===1){this._avgFieldLength[r]=0;return}let o=this._avgFieldLength[r]*n-i;this._avgFieldLength[r]=o/(n-1)}saveStoredFields(t,r){let{storeFields:n,extractField:i}=this._options;if(n==null||n.length===0)return;let o=this._storedFields.get(t);o==null&&this._storedFields.set(t,o={});for(let a of n){let s=i(r,a);s!==void 0&&(o[a]=s)}}};Rp.wildcard=Symbol("*");w2=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,C0e={[A2]:(e,t)=>{for(let r of t.keys()){let n=e.get(r);if(n==null)e.set(r,t.get(r));else{let{score:i,terms:o,match:a}=t.get(r);n.score=n.score+i,n.match=Object.assign(n.match,a),R8(n.terms,o)}}return e},[G8]:(e,t)=>{let r=new Map;for(let n of t.keys()){let i=e.get(n);if(i==null)continue;let{score:o,terms:a,match:s}=t.get(n);R8(i.terms,a),r.set(n,{score:i.score+o,terms:i.terms,match:Object.assign(i.match,s)})}return r},[E0e]:(e,t)=>{for(let r of t.keys())e.delete(r);return e}},P0e={k:1.2,b:.7,d:.5},M0e=(e,t,r,n,i,o)=>{let{k:a,b:s,d:l}=o;return Math.log(1+(r-t+.5)/(t+.5))*(l+e*(a+1)/(e+a*(1-s+s*n/i)))},A0e=e=>(t,r,n)=>{let i=typeof e.fuzzy=="function"?e.fuzzy(t,r,n):e.fuzzy||!1,o=typeof e.prefix=="function"?e.prefix(t,r,n):e.prefix===!0,a=typeof e.boostTerm=="function"?e.boostTerm(t,r,n):1;return{term:t,fuzzy:i,prefix:o,termBoost:a}},T2={idField:"id",extractField:(e,t)=>e[t],stringifyField:(e,t)=>e.toString(),tokenize:e=>e.split(F0e),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,t)=>{typeof console?.[e]=="function"&&console[e](t)},autoVacuum:!0},O8={combineWith:A2,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:P0e},D0e={combineWith:G8,prefix:(e,t,r)=>t===r.length-1},C2={batchSize:1e3,batchWait:10},P2={minDirtFactor:.1,minDirtCount:20},I2={...C2,...P2},L0e=(e,t)=>{e.includes(t)||e.push(t)},R8=(e,t)=>{for(let r of t)e.includes(r)||e.push(r)},B8=({score:e},{score:t})=>t-e,z8=()=>new Map,E1=e=>{let t=new Map;for(let r of Object.keys(e))t.set(parseInt(r,10),e[r]);return t},C1=async e=>{let t=new Map,r=0;for(let n of Object.keys(e))t.set(parseInt(n,10),e[n]),++r%1e3===0&&await H8(0);return t},H8=e=>new Promise(t=>setTimeout(t,e)),F0e=/[\n\r\p{Z}\p{P}]+/u});var gn,Ql=f(()=>{"use strict";gn=class{constructor(t){w(this,"id");this.id=t}}});var Xf,D2,qe,M1=f(()=>{"use strict";Js();Xf=class Xf{constructor(t,r,n){w(this,"__type",Xf.__type);w(this,"id",Kt());w(this,"latitude");w(this,"longitude");w(this,"floorId");w(this,"verticalOffset");if(typeof t=="object")this.latitude=t.latitude,this.longitude=t.longitude,this.floorId=t.floorId,this.verticalOffset=t.verticalOffset??0;else{if(r==null)throw new Error("Coordinate longitude is required.");this.latitude=t,this.longitude=r,this.floorId=n,this.verticalOffset=0}}static is(t){return t.__type===Xf.__type}get anchorTarget(){return this}get focusTarget(){return this}isEqual(t){return this.latitude===t.latitude&&this.longitude===t.longitude&&this.floorId===t.floorId}toJSON(){return{__type:Xf.__type,latitude:this.latitude,longitude:this.longitude,floorId:this.floorId,verticalOffset:this.verticalOffset}}toGeoJSON(){return{type:"Point",coordinates:[this.longitude,this.latitude,this.verticalOffset??0]}}destroy(){}};w(Xf,"__type","coordinate");D2=Xf,qe=D2});var X8={};Fr(X8,{areaFactors:()=>L2,bearingToAzimuth:()=>V0e,convertArea:()=>G0e,convertLength:()=>j0e,degreesToRadians:()=>zp,earthRadius:()=>di,factors:()=>F2,feature:()=>la,featureCollection:()=>Bp,geometry:()=>O0e,geometryCollection:()=>N0e,isNumber:()=>Yg,isObject:()=>D1,lengthToDegrees:()=>$0e,lengthToRadians:()=>Jg,lineString:()=>Wi,lineStrings:()=>z0e,multiLineString:()=>k2,multiPoint:()=>W8,multiPolygon:()=>O2,point:()=>fi,points:()=>R0e,polygon:()=>A1,polygons:()=>B0e,radiansToDegrees:()=>qf,radiansToLength:()=>R2,round:()=>U0e,unitsFactors:()=>k0e,validateBBox:()=>H0e,validateId:()=>Z0e});function la(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function O0e(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return fi(t).geometry;case"LineString":return Wi(t).geometry;case"Polygon":return A1(t).geometry;case"MultiPoint":return W8(t).geometry;case"MultiLineString":return k2(t).geometry;case"MultiPolygon":return O2(t).geometry;default:throw new Error(e+" is invalid")}}function fi(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Yg(e[0])||!Yg(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return la(n,t,r)}function R0e(e,t,r){return r===void 0&&(r={}),Bp(e.map(function(n){return fi(n,t)}),r)}function A1(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return la(s,t,r)}function B0e(e,t,r){return r===void 0&&(r={}),Bp(e.map(function(n){return A1(n,t)}),r)}function Wi(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return la(n,t,r)}function z0e(e,t,r){return r===void 0&&(r={}),Bp(e.map(function(n){return Wi(n,t)}),r)}function Bp(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function k2(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return la(n,t,r)}function W8(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return la(n,t,r)}function O2(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return la(n,t,r)}function N0e(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return la(n,t,r)}function U0e(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function R2(e,t){t===void 0&&(t="kilometers");var r=F2[t];if(!r)throw new Error(t+" units is invalid");return e*r}function Jg(e,t){t===void 0&&(t="kilometers");var r=F2[t];if(!r)throw new Error(t+" units is invalid");return e/r}function $0e(e,t){return qf(Jg(e,t))}function V0e(e){var t=e%360;return t<0&&(t+=360),t}function qf(e){var t=e%(2*Math.PI);return t*180/Math.PI}function zp(e){var t=e%360;return t*Math.PI/180}function j0e(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return R2(Jg(e,t),r)}function G0e(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=L2[t];if(!n)throw new Error("invalid original units");var i=L2[r];if(!i)throw new Error("invalid final units");return e/n*i}function Yg(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function D1(e){return!!e&&e.constructor===Object}function H0e(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Yg(t))throw new Error("bbox must only contain numbers")})}function Z0e(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}var di,F2,k0e,L2,Xi=f(()=>{di=63710088e-1,F2={centimeters:di*100,centimetres:di*100,degrees:di/111325,feet:di*3.28084,inches:di*39.37,kilometers:di/1e3,kilometres:di/1e3,meters:di,metres:di,miles:di/1609.344,millimeters:di*1e3,millimetres:di*1e3,nauticalmiles:di/1852,radians:1,yards:di*1.0936},k0e={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/di,yards:1.0936133},L2={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046}});var Q8={};Fr(Q8,{coordAll:()=>Y0e,coordEach:()=>gc,coordReduce:()=>W0e,featureEach:()=>B2,featureReduce:()=>q0e,findPoint:()=>txe,findSegment:()=>exe,flattenEach:()=>xc,flattenReduce:()=>K0e,geomEach:()=>z2,geomReduce:()=>J0e,lineEach:()=>K8,lineReduce:()=>Q0e,propEach:()=>q8,propReduce:()=>X0e,segmentEach:()=>Y8,segmentReduce:()=>J8});function gc(e,t,r){if(e!==null)for(var n,i,o,a,s,l,u,c=0,p=0,d,h=e.type,m=h==="FeatureCollection",x=h==="Feature",b=m?e.features.length:1,_=0;_<b;_++){u=m?e.features[_].geometry:x?e.geometry:e,d=u?u.type==="GeometryCollection":!1,s=d?u.geometries.length:1;for(var T=0;T<s;T++){var I=0,S=0;if(a=d?u.geometries[T]:u,a!==null){l=a.coordinates;var E=a.type;switch(c=r&&(E==="Polygon"||E==="MultiPolygon")?1:0,E){case null:break;case"Point":if(t(l,p,_,I,S)===!1)return!1;p++,I++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(t(l[n],p,_,I,S)===!1)return!1;p++,E==="MultiPoint"&&I++}E==="LineString"&&I++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-c;i++){if(t(l[n][i],p,_,I,S)===!1)return!1;p++}E==="MultiLineString"&&I++,E==="Polygon"&&S++}E==="Polygon"&&I++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(S=0,i=0;i<l[n].length;i++){for(o=0;o<l[n][i].length-c;o++){if(t(l[n][i][o],p,_,I,S)===!1)return!1;p++}S++}I++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(gc(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function W0e(e,t,r,n){var i=r;return gc(e,function(o,a,s,l,u){a===0&&r===void 0?i=o:i=t(i,o,a,s,l,u)},n),i}function q8(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function X0e(e,t,r){var n=r;return q8(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function B2(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function q0e(e,t,r){var n=r;return B2(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function Y0e(e){var t=[];return gc(e,function(r){t.push(r)}),t}function z2(e,t){var r,n,i,o,a,s,l,u,c,p,d=0,h=e.type==="FeatureCollection",m=e.type==="Feature",x=h?e.features.length:1;for(r=0;r<x;r++){for(s=h?e.features[r].geometry:m?e.geometry:e,u=h?e.features[r].properties:m?e.properties:{},c=h?e.features[r].bbox:m?e.bbox:void 0,p=h?e.features[r].id:m?e.id:void 0,l=s?s.type==="GeometryCollection":!1,a=l?s.geometries.length:1,i=0;i<a;i++){if(o=l?s.geometries[i]:s,o===null){if(t(null,d,u,c,p)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,d,u,c,p)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],d,u,c,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function J0e(e,t,r){var n=r;return z2(e,function(i,o,a,s,l){o===0&&r===void 0?n=i:n=t(n,i,o,a,s,l)}),n}function xc(e,t){z2(e,function(r,n,i,o,a){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(la(r,i,{bbox:o,id:a}),n,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var c=r.coordinates[u],p={type:l,coordinates:c};if(t(la(p,i),n,u)===!1)return!1}})}function K0e(e,t,r){var n=r;return xc(e,function(i,o,a){o===0&&a===0&&r===void 0?n=i:n=t(n,i,o,a)}),n}function Y8(e,t){xc(e,function(r,n,i){var o=0;if(r.geometry){var a=r.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var s,l=0,u=0,c=0;if(gc(r,function(p,d,h,m,x){if(s===void 0||n>l||m>u||x>c){s=p,l=n,u=m,c=x,o=0;return}var b=Wi([s,p],r.properties);if(t(b,n,i,x,o)===!1)return!1;o++,s=p})===!1)return!1}}})}function J8(e,t,r){var n=r,i=!1;return Y8(e,function(o,a,s,l,u){i===!1&&r===void 0?n=o:n=t(n,o,a,s,l,u),i=!0}),n}function K8(e,t){if(!e)throw new Error("geojson is required");xc(e,function(r,n,i){if(r.geometry!==null){var o=r.geometry.type,a=r.geometry.coordinates;switch(o){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(t(Wi(a[s],r.properties),n,i,s)===!1)return!1;break}}})}function Q0e(e,t,r){var n=r;return K8(e,function(i,o,a,s){o===0&&r===void 0?n=i:n=t(n,i,o,a,s)}),n}function exe(e,t){if(t=t||{},!D1(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,a=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":a=a||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=l.length+o-1),Wi([l[o],l[o+1]],a,t);case"Polygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o-1),Wi([l[i][o],l[i][o+1]],a,t);case"MultiLineString":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o-1),Wi([l[n][o],l[n][o+1]],a,t);case"MultiPolygon":return n<0&&(n=l.length+n),i<0&&(i=l[n].length+i),o<0&&(o=l[n][i].length-o-1),Wi([l[n][i][o],l[n][i][o+1]],a,t)}throw new Error("geojson is invalid")}function txe(e,t){if(t=t||{},!D1(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,a=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),a=a||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":a=a||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return fi(l,a,t);case"MultiPoint":return n<0&&(n=l.length+n),fi(l[n],a,t);case"LineString":return o<0&&(o=l.length+o),fi(l[o],a,t);case"Polygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),fi(l[i][o],a,t);case"MultiLineString":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),fi(l[n][o],a,t);case"MultiPolygon":return n<0&&(n=l.length+n),i<0&&(i=l[n].length+i),o<0&&(o=l[n][i].length-o),fi(l[n][i][o],a,t)}throw new Error("geojson is invalid")}var Qs=f(()=>{Xi()});var e7={};Fr(e7,{default:()=>Np});function N2(e){var t=[1/0,1/0,-1/0,-1/0];return gc(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}var Np,Yf=f(()=>{Qs();N2.default=N2;Np=N2});function rxe(e,t){t===void 0&&(t={});var r=Np(e),n=(r[0]+r[2])/2,i=(r[1]+r[3])/2;return fi([n,i],t.properties,t)}var Kg,L1=f(()=>{Yf();Xi();Kg=rxe});function U2(e){let t=e.enterprise?.locations?.reduce((i,o)=>(i[o.id]=o,i),{})||{};for(let i of e.enterprise?.locationInstances||[])t[i.id]=i;let r={};for(let i of e["floorstack.json"]||[])r[i.id]=i;let n={};for(let i of e["floor.geojson"]?.features||[])i.properties&&i.properties.id&&(n[i.properties.id]=i.properties);return{type:"downloaded",data:e,optimized:{"enterprise-location":t,"enterprise-category":e.enterprise?.categories?.reduce((i,o)=>(i[o.id]=o,i),{})||{},"floor-stack":r,floor:n}}}function t7(e){return/^https?:\/\/cdn\.mappedin\.com/.test(e)}function r7(e){return!!e.split("?")[1]?.includes("sv=")}function Ln(e,t){let r=e?.properties?.id||"unknown";if(e.geometry==null)return ie.error(`Cannot get the center coordinate for "${r}" because it has no geometry.`),new qe({latitude:0,longitude:0,floorId:t});try{if(e.geometry.type==="LineString"){let[[n,i],[o,a]]=e.geometry.coordinates,s=(n+o)/2,l=(i+a)/2;return new qe({latitude:l,longitude:s,floorId:t})}else if(e.geometry.type==="Point"){let[n,i]=e.geometry.coordinates;return new qe({latitude:i,longitude:n,floorId:t})}else if(e.geometry.type==="Polygon"){let n=e;if(n.properties.center!=null){let[i,o]=n.properties.center;return new qe({latitude:o,longitude:i,floorId:t})}}}catch{}try{let[n,i]=Kg(e).geometry.coordinates;return new qe({latitude:i,longitude:n,floorId:t})}catch(n){return ie.error(`Failed to get center coordinate for "${r}" ${n instanceof Error?n.stack:""}`),new qe({latitude:0,longitude:0,floorId:t})}}function n7(e,t){return t&&(e.flags[t.index]&1<<t.bit)!==0}var Ya=f(()=>{"use strict";M1();L1();Pe()});var Po,Fn,Up,eu,Jf,$2,qi,i7=f(()=>{"use strict";Ql();Ya();Jf=class Jf extends gn{constructor(r,n){super(n.mvfData.properties.id);w(this,"__type",Jf.__type);D(this,Po);D(this,Fn,{});D(this,Up);D(this,eu);R(this,Po,r),R(this,Up,n.floorId),R(this,eu,n.mvfData)}static is(r){return r.__type===Jf.__type}get locations(){return y(this,Fn).locations?y(this,Fn).locations:(y(this,Fn).locations=(y(this,Po).locationIdsByNodeId[this.id]||[]).map(r=>y(this,Po).getById("enterprise-location",r)).filter(Boolean),y(this,Fn).locations)}get space(){return y(this,Po).getById("space",y(this,Po).spaceIdsByNodeId[this.id]?.[0])}get object(){return y(this,Po).getById("object",y(this,Po).objectIdsByNodeId[this.id]?.[0])}get floor(){let r=y(this,Po).getById("floor",y(this,Up));if(r==null)throw new Error(`Floor ${y(this,Up)} not found!`);return r}get coordinate(){return y(this,Fn).coordinate==null&&(y(this,Fn).coordinate=Ln(y(this,eu),y(this,Up))),y(this,Fn).coordinate}get externalId(){return y(this,eu).properties.externalId??""}get neighbors(){if(y(this,Fn).neighbors==null){let r=y(this,eu).properties.neighbors.map(n=>{let i=y(this,Po).getById("node",n.id);if(i==null)throw new Error(`Node ${n.id} not found!`);return i});y(this,Fn).neighbors=r}return y(this,Fn).neighbors}get navigationFlags(){if(y(this,Fn).navigationFlags==null){let r=[],n=y(this,eu).properties.flags;if(n!=null&&n.length>0)for(let[i,o]of Object.entries(y(this,Po).navigationFlags))n.length>o.index&&n[o.index]!=null&&n7({flags:n},o)&&r.push(i);y(this,Fn).navigationFlags=Object.freeze(r)}return y(this,Fn).navigationFlags}get geoJSON(){return{...y(this,eu),properties:null}}get focusTarget(){return this.coordinate}get anchorTarget(){return this.coordinate}toJSON(){return{__type:Jf.__type,id:this.id,floor:this.floor.id,coordinate:this.coordinate.toJSON(),neighbors:this.neighbors.map(r=>r.id)}}destroy(){for(let r of Object.keys(y(this,Fn)))delete y(this,Fn)[r]}};Po=new WeakMap,Fn=new WeakMap,Up=new WeakMap,eu=new WeakMap,w(Jf,"__type","node");$2=Jf,qi=$2});var F1=f(()=>{"use strict";Js()});var Qg,tu,Kf,V2,$p,k1=f(()=>{"use strict";F1();Ql();Kf=class Kf extends gn{constructor(r){super(String(Kt()));w(this,"__type",Kf.__type);D(this,Qg,{});D(this,tu);R(this,tu,r.mvfData)}static is(r){return r.__type===Kf.__type}get url(){return y(this,tu).url}get name(){if("displayName"in y(this,tu))return y(this,tu).displayName;if("label"in y(this,tu))return y(this,tu).label}toJSON(){return{__type:Kf.__type,id:this.id,url:this.url,name:this.name}}destroy(){for(let r of globalThis.Object.keys(y(this,Qg)))delete y(this,Qg)[r]}};Qg=new WeakMap,tu=new WeakMap,w(Kf,"__type","hyperlink");V2=Kf,$p=V2});function o7(e){return Array.isArray(e)&&Number.isFinite(e[0])&&Number.isFinite(e[1])}var j2,el,nxe,ixe,oxe,axe,sxe,lxe,O1,e0=f(()=>{"use strict";mc();j2=8,el=e=>typeof e=="number"?e.toFixed(j2):o7(e)?e[1].toFixed(j2)+"-"+e[0].toFixed(j2):e.map(t=>el(t)).join("-"),nxe=/^https:\/\/cdn\.mappedin\.com\/category-symbols\/.+$/,ixe=/^https:\/\/cdn-staging\.mappedin\.net\/category-symbols\/.+$/,oxe=e=>nxe.test(e)||ixe.test(e),axe=/^https:\/\/cdn\.mappedin\.com\/[^/]+\/[^/]+\.[a-zA-Z0-9]+$/,sxe=/^https:\/\/cdn-staging\.mappedin\.net\/[^/]+\/[^/]+\.[a-zA-Z0-9]+$/,lxe=e=>oxe(e)?!1:axe.test(e)||sxe.test(e),O1=e=>{if(!lxe(e))return null;let t="";e.startsWith("https://")?(t="https://",e=e.slice(8)):e.startsWith("http://")&&(t="http://",e=e.slice(7));let[r,n,i]=e.split("/"),o=i.split(".").pop()??"";return{origin:t+r,mapId:n,fileName:i,fileType:o}}});var t0,bc,Vp,Qf,G2,jp,R1=f(()=>{"use strict";F1();Ql();e0();Pe();Qf=class Qf extends gn{constructor(r){super(String(Kt()));w(this,"__type",Qf.__type);D(this,t0,{});D(this,bc);D(this,Vp);R(this,bc,r.mvfData),R(this,Vp,r.mapData)}static is(r){return r.__type===Qf.__type}get url(){let r=y(this,bc).url;if(y(this,Vp).tokenManager==null)return r;let n=O1(y(this,bc).url);if(n==null)return r;let i=n.mapId;try{if(y(this,Vp).tokenManager.isEnterpriseMode())return r;let o=y(this,Vp).tokenManager.getSasToken(i).token;if(o==null||o==="")throw new Error("SAS token empty!");return`${r}?${o}`}catch(o){return n.fileType!=="svg"&&ie.error("Error getting SAS token for image",{error:o,url:r}),r}}get name(){return y(this,bc).altText}get altText(){return y(this,bc).altText}toJSON(){return{__type:Qf.__type,id:this.id,url:this.url,name:this.name}}destroy(){for(let r of globalThis.Object.keys(y(this,t0)))delete y(this,t0)[r]}};t0=new WeakMap,bc=new WeakMap,Vp=new WeakMap,w(Qf,"__type","image");G2=Qf,jp=G2});var Gp,Ja,r0=f(()=>{"use strict";Yf();Ja=class{constructor(t,r){w(this,"id");D(this,Gp);this.id=t}get geoJSONBoundingBox(){return y(this,Gp)?y(this,Gp):"bbox"in this.geoJSON.geometry&&this.geoJSON.geometry.bbox?this.geoJSON.geometry.bbox:(R(this,Gp,Np(this.geoJSON)),y(this,Gp))}get geoJSON(){return{properties:null,type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}}}};Gp=new WeakMap});var eh,ru,nu,jn,vc=f(()=>{"use strict";k1();R1();r0();jn=class extends Ja{constructor(r,n){super(n.properties.id,r);D(this,eh);D(this,ru);D(this,nu,{});R(this,eh,r),R(this,ru,n)}get externalId(){return y(this,ru).properties.externalId??""}get name(){let r=y(this,ru).properties.details?.name??"";return r===""&&(r=this.locationProfiles.find(n=>n.name&&n.name.length>0)?.name??""),r}get description(){let r=y(this,ru).properties.details?.description??"";return r===""&&(r=this.locationProfiles.find(n=>n.description&&n.description.length>0)?.description??""),r}get images(){if(y(this,nu).images!=null)return y(this,nu).images;let r=y(this,ru).properties.details?.images?.map(n=>new jp({mvfData:n,mapData:y(this,eh)}))??[];return(r==null||r.length===0)&&(r=this.locationProfiles.find(n=>n.images.length>0)?.images??[]),y(this,nu).images=r,r}get links(){if(y(this,nu).links!=null)return y(this,nu).links;let r=y(this,ru).properties.details?.links?.map(n=>new $p({mvfData:n}))??[];return(r==null||r.length===0)&&(r=this.locationProfiles.find(n=>n.links.length>0)?.links??[]),y(this,nu).links=r,r}get locationProfiles(){return y(this,eh).locationProfilesByAttachedFeatureId[this.id]??[]}};eh=new WeakMap,ru=new WeakMap,nu=new WeakMap});var n0,Hp,rh,nh,th,H2,tl,a7=f(()=>{"use strict";vc();Ya();th=class th extends jn{constructor(r,n){super(r,n.mvfData);w(this,"__type",th.__type);D(this,n0);D(this,Hp);D(this,rh,{});D(this,nh);R(this,n0,r),R(this,Hp,n.floorId),R(this,nh,n.mvfData)}static is(r){return r.__type===th.__type}get center(){return y(this,rh).center==null&&(y(this,rh).center=Ln(y(this,nh),y(this,Hp))),y(this,rh).center}get floor(){let r=y(this,n0).getById("floor",y(this,Hp));if(r==null)throw new Error(`Floor ${y(this,Hp)} not found!`);return r}get geoJSON(){return{...y(this,nh),properties:null}}get focusTarget(){return this}get anchorTarget(){return this.center}toJSON(){return{__type:th.__type,id:this.id,name:this.name,floor:this.floor.id}}destroy(){}};n0=new WeakMap,Hp=new WeakMap,rh=new WeakMap,nh=new WeakMap,w(th,"__type","area");H2=th,tl=H2});var Zp,iu,Wp,Xp,ih,Z2,Ka,s7=f(()=>{"use strict";vc();Ya();ih=class ih extends jn{constructor(r,n){super(r,n.mvfData);w(this,"__type",ih.__type);D(this,Zp);D(this,iu);D(this,Wp);D(this,Xp);R(this,iu,{}),R(this,Xp,n.mvfData),R(this,Zp,r),R(this,Wp,n.floorId)}static is(r){return r.__type===ih.__type}get floor(){let r=y(this,Zp).getById("floor",y(this,Wp));if(r==null)throw new Error(`Floor ${y(this,Wp)} not found!`);return r}get center(){return y(this,iu).center==null&&(y(this,iu).center=Ln(y(this,Xp),y(this,Wp))),y(this,iu).center}get isExterior(){if(y(this,Xp).properties.isExterior)return!0;let r=y(this,Zp).obstructionIdByEntranceId[this.id];return y(this,Zp).getMVFFeatureById("obstruction",r)?.properties.footprintComponent??!1}get geoJSON(){return{...y(this,Xp),properties:null}}get focusTarget(){return this.center}get anchorTarget(){return this.center}toJSON(){return{__type:ih.__type,id:this.id,name:this.name,floor:this.floor.id,center:this.center.toJSON()}}destroy(){for(let r of Object.keys(y(this,iu)))delete y(this,iu)[r]}};Zp=new WeakMap,iu=new WeakMap,Wp=new WeakMap,Xp=new WeakMap,w(ih,"__type","door");Z2=ih,Ka=Z2});function cxe(e){if(e==null||e==="default")return"room";let t=e.toLowerCase();return uxe.includes(t)?t:"room"}var ou,qp,kn,_c,oh,W2,uxe,Mo,l7=f(()=>{"use strict";vc();Ya();oh=class oh extends jn{constructor(r,n){super(r,n.mvfData);w(this,"__type",oh.__type);D(this,ou);D(this,qp);D(this,kn,{});D(this,_c);R(this,ou,r),R(this,qp,n.floorId),R(this,_c,n.mvfData)}static is(r){return r.__type===oh.__type}get type(){return cxe(y(this,_c).properties.kind)}get locations(){if(y(this,kn).locations)return y(this,kn).locations;y(this,kn).locations=[];let r=y(this,ou).mvfLocationsByGeometryId[y(this,_c).properties.id];if(r?.length>0)for(let n of r){let i=y(this,ou).getById("enterprise-location",n.id);i&&y(this,kn).locations.push(i)}return y(this,kn).locations}get floor(){let r=y(this,ou).getById("floor",y(this,qp));if(r==null)throw new Error(`Floor ${y(this,qp)} not found!`);return r}get doors(){if(y(this,kn).doors)return y(this,kn).doors;y(this,kn).doors=[];let r=y(this,ou).entranceNodeIdsBySpaceId?.[this.id]??[];for(let n of r){let i=y(this,ou).doorsByNodeId[n];i&&y(this,kn).doors.push(i)}return y(this,kn).doors}get center(){return y(this,kn).center==null&&(y(this,kn).center=Ln(y(this,_c),y(this,qp))),y(this,kn).center}get geoJSON(){return{...y(this,_c),properties:null}}get focusTarget(){return this.geoJSON.geometry.type==="Polygon"?this:this.center}get anchorTarget(){return this.center}toJSON(){return{__type:oh.__type,id:this.id,name:this.name,type:this.type,floor:this.floor.id,center:this.center.toJSON()}}destroy(){for(let r of Object.keys(y(this,kn)))delete y(this,kn)[r]}};ou=new WeakMap,qp=new WeakMap,kn=new WeakMap,_c=new WeakMap,w(oh,"__type","space");W2=oh,uxe=["room","hallway","exterior","void","gate"];Mo=W2});var ua,Ut,Yi,sh,B1,ah,X2,Yp,u7=f(()=>{"use strict";r0();Ya();ah=class ah extends Ja{constructor(r,n){super(n.mvfData.properties.id,r);D(this,sh);w(this,"__type",ah.__type);D(this,ua);D(this,Ut,{});D(this,Yi);R(this,ua,r),R(this,Yi,n.mvfData)}static is(r){return r.__type===ah.__type}get focusTarget(){return this}get name(){if(!("name"in y(this,Yi).properties))return y(this,Yi).properties.externalId??"";let r=me(this,sh,B1).call(this,"name");return typeof r=="string"?r:""}get shortName(){if(!("shortName"in y(this,Yi).properties))return y(this,Yi).properties.externalId??"";let r=me(this,sh,B1).call(this,"shortName");return typeof r=="string"?r:""}get subtitle(){let r=me(this,sh,B1).call(this,"subtitle");return typeof r=="string"?r:""}get externalId(){return y(this,Yi).properties.externalId??""}get elevation(){return y(this,Yi).properties.elevation}get maxHeight(){return y(this,Yi).properties.maxHeight}get spaces(){if(y(this,Ut).spaces==null){let r=y(this,ua).spaces.filter(n=>n.floor.id===this.id);y(this,Ut).spaces=r}return y(this,Ut).spaces}get geoJSON(){return{type:"Feature",properties:null,geometry:y(this,Yi).geometry??{type:"Polygon",coordinates:[]}}}get objects(){if(y(this,Ut).objects==null){let r=y(this,ua).objects.filter(n=>n.floor.id===this.id);y(this,Ut).objects=r}return y(this,Ut).objects}get connections(){if(y(this,Ut).connections==null){let r=y(this,ua).connections.filter(n=>n.floors.includes(this));y(this,Ut).connections=r}return y(this,Ut).connections}get doors(){if(y(this,Ut).doors==null){let r=y(this,ua).doors.filter(n=>n.floor.id===this.id);y(this,Ut).doors=r}return y(this,Ut).doors}get annotations(){if(y(this,Ut).annotations==null){let r=y(this,ua).annotations.filter(n=>n.floor.id===this.id);y(this,Ut).annotations=r}return y(this,Ut).annotations}get pois(){if(y(this,Ut).pois==null){let r=y(this,ua).pointsOfInterest.filter(n=>n.floor.id===this.id);y(this,Ut).pois=r}return y(this,Ut).pois}get floorStack(){if(y(this,Ut).floorStack==null){let r=y(this,ua).floorStacks.find(n=>n.floors.includes(this));y(this,Ut).floorStack=r}return y(this,Ut).floorStack}get center(){return y(this,Ut).center==null&&(y(this,Ut).center=Ln(y(this,Yi),this.id)),y(this,Ut).center}toJSON(){return{__type:ah.__type,id:this.id,name:this.name,shortName:this.shortName,subtitle:this.subtitle,elevation:this.elevation,maxHeight:this.maxHeight,spaces:this.spaces.map(r=>r.id),objects:this.objects.map(r=>r.id),connections:this.connections.map(r=>r.id),doors:this.doors.map(r=>r.id),annotations:this.annotations.map(r=>r.id),pois:this.pois.map(r=>r.id)}}destroy(){for(let r of globalThis.Object.keys(y(this,Ut)))delete y(this,Ut)[r]}};ua=new WeakMap,Ut=new WeakMap,Yi=new WeakMap,sh=new WeakSet,B1=function(r){let n=y(this,Yi).properties[r];return y(this,ua).getPropTranslation(this.__type,r,this.id,n)},w(ah,"__type","floor");X2=ah,Yp=X2});function lh(e){let t;if(Mo.is(e)||Ka.is(e)||Qa.is(e)||tl.is(e)||Ao.is(e))t=e.center;else if(rl.is(e)||au.is(e))t=e.coordinate;else if(qe.is(e))t=e;else if(qi.is(e))t=e.coordinate;else if(ca.is(e))t=e.coordinates[0];else return;return t}var c7=f(()=>{"use strict";ar()});var su=f(()=>{"use strict"});var z1=f(()=>{"use strict";Pe();su()});var Do=f(()=>{"use strict";x2();F1();e0();c7();z1()});var Sc,pa,lu,uh,q2,uu,p7=f(()=>{"use strict";Do();vc();Ya();uh=class uh extends jn{constructor(r,n){let i=Object.values(n.mvfDataByFloorId)[0];super(r,i);w(this,"__type",uh.__type);D(this,Sc);D(this,pa);D(this,lu);R(this,pa,{}),R(this,Sc,r),R(this,lu,n.mvfDataByFloorId)}static is(r){return r.__type===uh.__type}get accessible(){return Object.values(y(this,lu))[0].properties.accessible??!1}get type(){return Object.values(y(this,lu))[0].properties.kind?.split(".")[1]??"unknown"}get extra(){return Object.values(y(this,lu))[0].properties.extra}get coordinates(){return y(this,pa).coordinates==null&&(y(this,pa).coordinates=Object.entries(y(this,lu)).map(([r,n])=>Ln(n,r))),y(this,pa).coordinates}get nodes(){return Object.values(y(this,lu))[0].properties.nodes.map(r=>y(this,Sc).getById("node",r))}get floors(){return this.coordinates.map(r=>r.floorId?y(this,Sc).getById("floor",r.floorId):void 0).filter(Zg)}get locationProfiles(){if(y(this,pa).locationProfiles!=null)return y(this,pa).locationProfiles;let r=super.locationProfiles;if(r==null||r.length===0){let n=[this.coordinates[0]?.longitude??0,this.coordinates[0]?.latitude??0],i=el(n),o=y(this,Sc).mvfConnectionIdsByLatLon[i]??[];for(let a of o){let s=y(this,Sc).locationProfilesByAttachedFeatureId[a];if(s!=null){r=s;break}}}return y(this,pa).locationProfiles=r??[],r}get focusTarget(){return this.coordinates}toJSON(){return{__type:uh.__type,id:this.id,name:this.name,type:this.type,externalId:this.externalId,coordinates:this.coordinates.map(r=>r.toJSON()),floors:this.floors.map(r=>r.id),extra:this.extra}}destroy(){for(let r of Object.keys(y(this,pa)))delete y(this,pa)[r]}};Sc=new WeakMap,pa=new WeakMap,lu=new WeakMap,w(uh,"__type","connection");q2=uh,uu=q2});var Jp,Kp,Lo,wc,ch,Y2,Qa,d7=f(()=>{"use strict";vc();Ya();ch=class ch extends jn{constructor(r,n){super(r,n.mvfData);w(this,"__type",ch.__type);D(this,Jp);D(this,Kp);D(this,Lo,{});D(this,wc);R(this,Jp,r),R(this,Kp,n.floorId),R(this,wc,n.mvfData)}static is(r){return r.__type===ch.__type}get type(){let r=y(this,wc).properties.kind;return r==null&&(r="object"),r==="Desks"&&(r="desk"),r.toLowerCase()}get locations(){if(y(this,Lo).locations)return y(this,Lo).locations;y(this,Lo).locations=[];let r=y(this,Jp).mvfLocationsByGeometryId[y(this,wc).properties.id];if(r?.length>0)for(let n of r){let i=y(this,Jp).getById("enterprise-location",n.id);i&&y(this,Lo).locations.push(i)}return y(this,Lo).locations}get floor(){let r=y(this,Jp).getById("floor",y(this,Kp));if(r==null)throw new Error(`Floor ${y(this,Kp)} not found!`);return r}get center(){return y(this,Lo).center==null&&(y(this,Lo).center=Ln(y(this,wc),y(this,Kp))),y(this,Lo).center}get geoJSON(){return{...y(this,wc),properties:null}}get anchorTarget(){return this.center}get focusTarget(){return this.geoJSON.geometry.type==="Polygon"?this:this.center}toJSON(){return{__type:ch.__type,id:this.id,name:this.name,type:this.type,floor:this.floor.id,center:this.center.toJSON()}}destroy(){for(let r of globalThis.Object.keys(y(this,Lo)))y(this,Lo)[r]=null}};Jp=new WeakMap,Kp=new WeakMap,Lo=new WeakMap,wc=new WeakMap,w(ch,"__type","object");Y2=ch,Qa=Y2});var i0,Qp,Tc,dh,ph,J2,rl,f7=f(()=>{"use strict";vc();Ya();ph=class ph extends jn{constructor(r,n){super(r,n.mvfData);w(this,"__type",ph.__type);D(this,i0);D(this,Qp);D(this,Tc,{});D(this,dh);R(this,i0,r),R(this,dh,n.mvfData),R(this,Qp,n.floorId)}static is(r){return r.__type===ph.__type}get floor(){let r=y(this,i0).getById("floor",y(this,Qp));if(r==null)throw new Error(`Floor ${y(this,Qp)} not found!`);return r}get coordinate(){return y(this,Tc).coordinate==null&&(y(this,Tc).coordinate=Ln(y(this,dh),y(this,Qp))),y(this,Tc).coordinate}get geoJSON(){return{...y(this,dh),properties:null}}get focusTarget(){return this.coordinate}get anchorTarget(){return this.coordinate}toJSON(){return{__type:ph.__type,id:this.id,name:this.name,floor:this.floor.id,coordinate:this.coordinate.toJSON()}}destroy(){for(let r in y(this,Tc))y(this,Tc)[r]=null}};i0=new WeakMap,Qp=new WeakMap,Tc=new WeakMap,dh=new WeakMap,w(ph,"__type","point-of-interest");J2=ph,rl=J2});var o0,ed,Ic,td,a0,Q2,fh,K2,au,h7=f(()=>{"use strict";vc();Ya();fh=class fh extends jn{constructor(r,n){super(r,n.mvfData);D(this,a0);w(this,"__type",fh.__type);D(this,o0);D(this,ed);D(this,Ic,{});D(this,td);R(this,o0,r),R(this,ed,n.floorId),R(this,td,n.mvfData)}static is(r){return r.__type===fh.__type}get group(){return me(this,a0,Q2).call(this).group}get type(){return me(this,a0,Q2).call(this).type}get coordinate(){return y(this,Ic).coordinate==null&&(y(this,Ic).coordinate=Ln(y(this,td),y(this,ed))),y(this,Ic).coordinate}get floor(){let r=y(this,o0).getById("floor",y(this,ed));if(r==null)throw new Error(`Floor ${y(this,ed)} not found!`);return r}get geoJSON(){return{...y(this,td),properties:null}}get focusTarget(){return this.coordinate}get anchorTarget(){return this.coordinate}toJSON(){return{__type:fh.__type,id:this.id,group:this.group,type:this.type,coordinate:this.coordinate.toJSON()}}destroy(){for(let r of Object.keys(y(this,Ic)))delete y(this,Ic)[r]}};o0=new WeakMap,ed=new WeakMap,Ic=new WeakMap,td=new WeakMap,a0=new WeakSet,Q2=function(){let[r,n]=y(this,td).properties.symbolId.split("--");return{group:r,type:n}},w(fh,"__type","annotation");K2=fh,au=K2});var Ec,da,es,mh,s0,t4,hh,e4,yh,m7=f(()=>{"use strict";r0();Pe();hh=class hh extends Ja{constructor(r,n){super(n.mvfData.id,r);D(this,s0);w(this,"__type",hh.__type);D(this,Ec);D(this,da,{});D(this,es);D(this,mh);R(this,Ec,r),R(this,es,n.mvfData),R(this,mh,n.facadeId)}static is(r){return r.__type===hh.__type}get type(){return y(this,es).type}get name(){let r=me(this,s0,t4).call(this,"name");return typeof r=="string"?r:""}get shortName(){let r=me(this,s0,t4).call(this,"shortName");return typeof r=="string"?r:""}get externalId(){return y(this,es).externalId??""}get floors(){if(y(this,da).floors==null){let r=(y(this,es).floors??y(this,es).maps??[]).reduce((n,i)=>{let o=y(this,Ec).floorsById[i];return o&&n.push(o),n},[]);r.length===0&&ie.error(`Floor stack ${this.id} has no floors`),y(this,da).floors=r.sort((n,i)=>n.elevation-i.elevation)}return y(this,da).floors}get defaultFloor(){if(y(this,da).defaultFloor!=null)return y(this,da).defaultFloor;let r=y(this,es).defaultFloor?y(this,Ec).getById("floor",y(this,es).defaultFloor):void 0;return y(this,da).defaultFloor=r||this.floors.reduce((n,i)=>Math.abs(i.elevation)<Math.abs(n.elevation)?i:n),y(this,da).defaultFloor}get facade(){return y(this,mh)?y(this,Ec).facadesById[y(this,mh)]:void 0}toJSON(){return{__type:hh.__type,id:this.id,name:this.name,shortName:this.shortName,type:this.type,floors:this.floors.map(r=>r.id)}}destroy(){for(let r of globalThis.Object.keys(y(this,da)))delete y(this,da)[r]}};Ec=new WeakMap,da=new WeakMap,es=new WeakMap,mh=new WeakMap,s0=new WeakSet,t4=function(r){return y(this,Ec).getPropTranslation(this.__type,r,this.id,y(this,es)[r])},w(hh,"__type","floor-stack");e4=hh,yh=e4});var xh,rd,bh,nl,gh,r4,Ao,y7=f(()=>{"use strict";ar();r0();L1();Mp();gh=class gh extends Ja{constructor(r,n){super(n.mvfData.id,r);w(this,"__type",gh.__type);D(this,xh);D(this,rd);D(this,bh);D(this,nl,{});R(this,xh,n.mvfData),R(this,rd,r),R(this,bh,n.floorStackId)}static is(r){return r.__type===gh.__type}get floorStack(){return y(this,rd).getById("floor-stack",y(this,bh))}get spaces(){if(!y(this,nl).spaces){y(this,nl).spaces=[];for(let r of y(this,xh).spaces){let n=y(this,rd).getById("space",r.spaceId);n&&y(this,nl).spaces.push(n)}}return y(this,nl).spaces}get center(){if(!y(this,nl).center){let r={type:"FeatureCollection",features:[]};for(let i of this.spaces){let o=y(this,rd).mvfSpacesById[i.id];o&&r.features.push(o)}if(r.features.length===0)throw new Hl("No geometry found for facade!");let n=Kg(r);y(this,nl).center=new qe({latitude:n.geometry.coordinates[1],longitude:n.geometry.coordinates[0],floorId:y(this,xh).spaces[0].floorId})}return y(this,nl).center}get focusTarget(){return this.spaces}get anchorTarget(){return this.center}toJSON(){return{id:this.id,__type:gh.__type,floorStackId:y(this,bh),floorStack:this.floorStack,spaces:this.spaces}}};xh=new WeakMap,rd=new WeakMap,bh=new WeakMap,nl=new WeakMap,w(gh,"__type","facade");r4=gh,Ao=r4});function Dxe(e){return!["Polygon","MultiPolygon"].includes(e.geometry.type)&&"kind"in e.properties&&e.properties.kind==null||mxe.has(e.properties.kind??"")}var hxe,mxe,yxe,gxe,xxe,bxe,vxe,_xe,Sxe,wxe,Txe,Ixe,Exe,Cxe,Pxe,Mxe,Axe,g7,x7,b7=f(()=>{"use strict";ar();e0();Pe();hxe=new Set(["wall","area"]),mxe=new Set(["void","desk-entrance"]),yxe=(e,t)=>{let r={},n={},i={},o={},a={},s={};for(let l of e["location.json"]||[]){let u=new nd(t,{mvfData:l});if(r[l.id]=u,l.externalId&&(o[l.externalId]==null&&(o[l.externalId]=[]),o[l.externalId].push(u)),l.categories)for(let p of l.categories)a[p]==null&&(a[p]=[]),a[p].push(u);let c=[...l.obstructions?.map(p=>p.id)??[],...l.spaces?.map(p=>p.id)??[],...l.annotations?.map(p=>p.id)??[],...l.connections??[],...l.entrances?.map(p=>p.id)??[],...l.areas?.map(p=>p.id)??[]];for(let p of c)p&&(s[p]==null&&(s[p]=[]),s[p].push(u))}for(let l of e["category.json"]||[]){let u=new N1(t,{mvfData:l});n[l.id]=u,l.parent&&(i[l.parent]==null&&(i[l.parent]=[]),i[l.parent].push(u))}return{locationCategoriesByParentId:i,locationProfilesById:r,locationCategoriesById:n,locationProfilesByExternalId:o,locationProfilesByCategoryId:a,locationProfilesByAttachedFeatureId:s}},gxe=(e,t,r)=>{let n={},i={},o={},a={},s={},l={},u={},c={},p={},d={},h={},m=globalThis.Object.keys(e.space);for(let x of m){let b=e.space[x];if(b!=null){for(let _ of b.features)if(h[_.properties.id]=x,l[_.properties.id]=_,_.properties.kind==="desk-entrance"&&(s[_.properties.externalId]==null&&(s[_.properties.externalId]=[]),s[_.properties.externalId].push(..._.properties.destinationNodes)),!Dxe(_)){if(_.properties.kind?.includes("connection")){let T=el(_.geometry.coordinates);p[T]==null&&(p[T]=[]),p[T].push(_.properties.id);continue}if(_.properties.kind==="poi"||_.geometry.type==="Point"&&_.properties.kind==null){let T=new rl(r,{floorId:x,mvfData:_});o[_.properties.id]=T,c[x]||(c[x]=[]),c[x].push(_),_.properties.externalId&&(a[_.properties.externalId]==null&&(a[_.properties.externalId]=[]),a[_.properties.externalId].push(T))}else if(_.geometry.type==="Point")ie.warn("Encountered a point space with an unknown kind!",_.properties.kind);else{let T=new Mo(r,{floorId:x,mvfData:_});n[_.properties.id]=T,_.properties.externalId&&(i[_.properties.externalId]==null&&(i[_.properties.externalId]=[]),i[_.properties.externalId].push(T)),u[x]||(u[x]=[]),u[x].push(_)}}}}for(let x in p){let b=p[x],_={};for(let I of b){let S=h[I],E=l[I],P=t?.["n_"+E.properties.id.split("s_")[1]];_[S]={...E,properties:{...E.properties,accessible:P?.accessible===!0}}}let T=new uu(r,{mvfDataByFloorId:_});d[T.id]=T}return{spacesById:n,spacesByExternalId:i,poisById:o,poisByExternalId:a,connectionsById:d,objectEntranceNodeIdsByObstructionId:s,mvfSpacesById:l,connectionIdsByLatLon:p,mvfSpacesByFloorId:u,mvfPoisByFloorId:c}},xxe=(e,t)=>{let r={},n={},i={},o={};for(let a of e["node.geojson"].features){i[a.properties.id]=a;let s=new qi(t,{mvfData:a,floorId:a.properties.floor??a.properties.map});r[a.properties.id]=s,a.properties.externalId&&(n[a.properties.externalId]==null&&(n[a.properties.externalId]=[]),n[a.properties.externalId].push(s));let l=a.properties.floor??a.properties.map;o[l]||(o[l]=[]),o[l].push(a)}return{nodesById:r,nodesByExternalId:n,mvfNodesById:i,mvfNodesByFloorId:o}},bxe=(e,t)=>{let r={},n={},i={},o={},a=globalThis.Object.keys(e.obstruction);for(let s of a){let l=e.obstruction[s];if(l!=null)for(let u of l.features){i[u.properties.id]=u;for(let p of u.properties.entrances)o[p]=u.properties.id;if(hxe.has(u.properties.kind?.toLowerCase()??""))continue;let c=new Qa(t,{floorId:s,mvfData:u});r[u.properties.id]=c,u.properties.externalId&&(n[u.properties.externalId]==null&&(n[u.properties.externalId]=[]),n[u.properties.externalId].push(c))}}return{objectsById:r,objectsByExternalId:n,mvfObstructionById:i,obstructionIdByEntranceId:o}},vxe=(e,t)=>{let r={},n={},i={};if("floor.geojson"in e&&e["floor.geojson"]!=null)for(let o of e["floor.geojson"].features){i[o.properties.id]=o.properties;let a=new Yp(t,{mvfData:o});r[o.properties.id]=a,o.properties.externalId&&(n[o.properties.externalId]==null&&(n[o.properties.externalId]=[]),n[o.properties.externalId].push(a))}else for(let o of e["map.geojson"]){i[o.id]=o;let a=new Yp(t,{mvfData:{properties:o}});r[o.id]=a}return{floorsById:r,floorsByExternalId:n,mvfFloorsById:i}},_xe=(e,t)=>{let r={},n={},i={},o={},a={},s=e["floorstack.json"]||e["mapstack.json"]||e["mapstack.geojson"];if(s!=null)for(let l of s){let u=e.facade?.[l.id],c=new yh(t,{mvfData:l,facadeId:u?.id});if(r[l.id]=c,l.externalId&&(n[l.externalId]==null&&(n[l.externalId]=[]),n[l.externalId].push(c)),i[l.id]=l,u){let p=new Ao(t,{mvfData:u,floorStackId:l.id});o[u.id]=p;for(let d of u.spaces)a[d.spaceId]=p}}return{floorStacksById:r,floorStacksByExternalId:n,mvfFloorStacksById:i,facadesById:o,facadesBySpaceId:a}},Sxe=(e,t)=>{let r={},n={},i=e["connection.json"].reduce((o,a)=>{a.nodes.forEach(l=>o[l]=a),r[a.id]=a;let s=t?.[a.nodes[0]];if(s!=null){let l=el(s.geometry.coordinates);n[l]==null&&(n[l]=[]),n[l].push(a.id)}return o},{});return{mvfConnectionsById:r,mvfConnectionsByNodeId:i,mvfConnectionIdsByLatLon:n}},wxe=(e,t)=>{let r={},n={},i={},o={},a={},s=globalThis.Object.keys(e.entrance);for(let l of s){let u=e.entrance[l];if(u!=null)for(let c of u.features){o[c.properties.id]=c;let p=new Ka(t,{floorId:l,mvfData:c});c.properties.node&&(i[c.properties.node]=p),r[c.properties.id]=p,c.properties.externalId&&(n[c.properties.externalId]==null&&(n[c.properties.externalId]=[]),n[c.properties.externalId].push(p)),a[l]||(a[l]=[]),a[l].push(c)}}return{doorsById:r,doorsByExternalId:n,doorsByNodeId:i,mvfEntrancesById:o,mvfEntrancesByFloorId:a}},Txe=(e,t,r)=>{if(e.textAreas!=null)for(let n in e.textAreas){let i=e.textAreas[n]?.features;if(i!=null){for(let o of i)if("anchorId"in o.properties){let a=o?.properties,s=t[a.anchorId]||r[a.anchorId];if(s!=null&&a!=null){let l=s.properties;l.textArea=a,l.textArea&&(l.textArea.position=o.geometry.coordinates)}}}}},Ixe=(e,t,r)=>{if(e.floorImages!=null)for(let n in e.floorImages){let i=e.floorImages[n]?.features;if(i!=null){for(let o of i)if("anchorId"in o.properties){let a=o?.properties,s=t[a.anchorId]||r[a.anchorId];if(s!=null&&a!=null){let l=s.properties;l.image=a,l.image&&(l.image.position=o.geometry.coordinates)}}}}},Exe=(e,t)=>{if(e.enterprise?.enterpriseStyles==null)return;let r=e.enterprise?.enterpriseStyles;for(let n in r){let i=r[n];i.geometryAnchors.forEach(o=>{let a=t[o.geometryId];if(a!=null){let s=a.properties;s.style={styleId:n,edgeOffset:i.edgeOffset}}})}},Cxe=(e,t,r)=>{if(!(e.enterprise==null||e.enterprise.textures==null))for(let n of e.enterprise.textures)for(let i of n.geometryAnchors){let o=t[i.geometryId]||r[i.geometryId];if(o!=null){let a=o.properties;a.textures==null&&(a.textures=[]),a.textures.push(n)}}},Pxe=(e,t)=>{let r={},n={},i={};if(e.annotation==null)return{annotationsById:r,mvfAnnotationsById:n,mvfAnnotationsByFloorId:i};let o=globalThis.Object.keys(e.annotation);for(let a of o){let s=e.annotation[a];if(s!=null)for(let l of s.features){n[l.properties.id]=l;let u=new au(t,{floorId:a,mvfData:l});r[l.properties.id]=u,i[a]||(i[a]=[]),i[a].push(l)}}return{annotationsById:r,mvfAnnotationsById:n,mvfAnnotationsByFloorId:i}},Mxe=(e,t)=>{let r={},n={},i={};if(e.area==null)return{areasById:r,areasByExternalId:n,mvfAreasById:i};let o=globalThis.Object.keys(e.area);for(let a of o){let s=e.area[a];if(s!=null)for(let l of s.features){i[l.properties.id]=l;let u=new tl(t,{floorId:a,mvfData:l});r[l.properties.id]=u,l.properties.externalId&&(n[l.properties.externalId]==null&&(n[l.properties.externalId]=[]),n[l.properties.externalId].push(u))}}return{areasById:r,areasByExternalId:n,mvfAreasById:i}},Axe=(e,t)=>{let r={},n={},i={},o={};for(let a in e){let s=e[a];if(s==null)continue;let l=s.properties.destinationNodes??[];if(l.length<1)continue;let u=[];for(let c of l)t[c]!=null&&u.push(c),n[c]==null&&(n[c]=[]),n[c].push(s.properties.id),s.properties.kind==="desk-entrance"&&(i[c]==null&&(i[c]=[]),i[c].push(s.properties.externalId));u.length>0&&(r[a]=u),o[a]=l}return{entranceNodeIdsBySpaceId:r,spaceIdsByNodeId:n,objectIdsByNodeId:i,destinationNodesIdsBySpaceId:o}},g7=(e,t)=>{let r={},n={},i={},o={},a=(e.enterprise?.locations??[]).reduce((b,_)=>(b[_.id]=_,b),{}),s={},l={},u={},c={},p={},d={},h=e.enterprise?.venue||{},m={};for(let b of e.enterprise?.categories??[]){let _=new vh(t,{mvfData:b});s[b.id]=_,b.externalId&&(l[b.externalId]==null&&(l[b.externalId]=[]),l[b.externalId].push(_)),u[b.id]=b,b.locations.forEach(T=>{p[T]==null&&(p[T]=[]),p[T].push(b.id)})}let x={};for(let b of e.enterprise?.locationInstances??[]){let _=a[b.parent],T=Object.keys(_),I={};for(let E of T)I[E]=void 0;let S={...I,polygons:[],nodes:[],...b};x[S.parent]==null&&(x[S.parent]=[]),x[S.parent].push(new ca(t,{mvfData:S,categoryIds:e.enterprise?.categoryPriorities?.[S.id]||p[S.id],parentId:b.parent})),m[S.id]=b}for(let b of e.enterprise?.locations??[]){let _=new ca(t,{mvfData:b,categoryIds:e.enterprise?.categoryPriorities?.[b.id]||p[b.id],locationInstances:x[b.id]});i[b.id]=_,b.externalId&&(o[b.externalId]==null&&(o[b.externalId]=[]),o[b.externalId].push(_)),b.nodes.forEach(T=>{d[T.id]==null&&(d[T.id]=[]),d[T.id].push(b.id)});for(let T of b.polygons)c[T.id]==null&&(c[T.id]=[]),c[T.id].push(b)}if(t.enterpriseMode===!0){for(let b in t.mvfConnectionsById){let _={},T=t.mvfConnectionsById[b];for(let I of t.mvfConnectionsById[b].nodes){let S=t.nodesById[I];S!=null&&(_[S.floor.id]={type:"Feature",geometry:{type:"Point",coordinates:[S.coordinate.longitude,S.coordinate.latitude]},properties:{id:b,externalId:T.externalId,kind:"enterprise."+T.type,destinationNodes:[],flags:"",type:T.type,nodes:T.nodes,accessible:T.accessible,extra:T.extra,details:T.details}})}Object.keys(_).length>0&&(r[b]=new uu(t,{mvfDataByFloorId:_}),T.externalId&&(n[T.externalId]==null&&(n[T.externalId]=[]),n[T.externalId].push(r[b])))}t.connectionsById=r}return{connectionsByExternalId:n,locationIdsByNodeId:d,mvfLocationsByGeometryId:c,mvfLocationsById:a,mvfCategoriesById:u,locationsById:i,locationsByExternalId:o,locationInstancesById:m,categoriesById:s,categoriesByExternalId:l,venue:h}},x7=(e,t)=>{let{nodesById:r,nodesByExternalId:n,mvfNodesById:i,mvfNodesByFloorId:o}=xxe(e,t),{mvfConnectionsById:a,mvfConnectionsByNodeId:s,mvfConnectionIdsByLatLon:l}=Sxe(e,i),{spacesById:u,spacesByExternalId:c,poisById:p,poisByExternalId:d,mvfSpacesById:h,objectEntranceNodeIdsByObstructionId:m,connectionsById:x,connectionIdsByLatLon:b,mvfSpacesByFloorId:_,mvfPoisByFloorId:T}=gxe(e,s,t),{objectsById:I,objectsByExternalId:S,mvfObstructionById:E,obstructionIdByEntranceId:P}=bxe(e,t),{floorsById:L,floorsByExternalId:k,mvfFloorsById:z}=vxe(e,t),{floorStacksById:W,floorStacksByExternalId:Z,mvfFloorStacksById:Y,facadesById:J,facadesBySpaceId:j}=_xe(e,t),{doorsById:ae,doorsByExternalId:ve,doorsByNodeId:xe,mvfEntrancesById:Le,mvfEntrancesByFloorId:Te}=wxe(e,t),{annotationsById:rt,mvfAnnotationsById:Re,mvfAnnotationsByFloorId:zt}=Pxe(e,t),{areasById:He,areasByExternalId:Yt,mvfAreasById:Fe}=Mxe(e,t);Ixe(e,h,E),Txe(e,h,E),Exe(e,h),Cxe(e,h,E);let{locationCategoriesByParentId:Lr,locationProfilesById:Mn,locationCategoriesById:ii,locationProfilesByExternalId:A,locationProfilesByCategoryId:se,locationProfilesByAttachedFeatureId:O}=yxe(e,t),{entranceNodeIdsBySpaceId:_e,spaceIdsByNodeId:le,objectIdsByNodeId:ue,destinationNodesIdsBySpaceId:Mt}=Axe(h,xe);return{spacesById:u,spacesByExternalId:c,nodesById:r,nodesByExternalId:n,objectsById:I,objectsByExternalId:S,floorsById:L,floorsByExternalId:k,floorStacksById:W,floorStacksByExternalId:Z,facadesById:J,facadesBySpaceId:j,connectionsById:x,doorsById:ae,doorsByExternalId:ve,doorsByNodeId:xe,poisById:p,poisByExternalId:d,annotationsById:rt,areasById:He,areasByExternalId:Yt,objectEntranceNodeIdsByObstructionId:m,obstructionIdByEntranceId:P,connectionIdsByLatLon:b,locationProfilesById:Mn,locationCategoriesById:ii,locationProfilesByExternalId:A,locationProfilesByCategoryId:se,locationCategoriesByParentId:Lr,mvfSpacesById:h,mvfNodesById:i,mvfObstructionById:E,mvfFloorsById:z,mvfFloorStacksById:Y,mvfConnectionsById:a,mvfConnectionsByNodeId:s,mvfEntrancesById:Le,mvfAnnotationsById:Re,mvfNodesByFloorId:o,mvfSpacesByFloorId:_,mvfPoisByFloorId:T,mvfAreasById:Fe,mvfEntrancesByFloorId:Te,mvfAnnotationsByFloorId:zt,locationProfilesByAttachedFeatureId:O,mvfConnectionIdsByLatLon:l,entranceNodeIdsBySpaceId:_e,spaceIdsByNodeId:le,objectIdsByNodeId:ue,destinationNodesIdsBySpaceId:Mt}}});var Lxe,Fo,gt,xn,l0,_h,n4,ca,v7=f(()=>{"use strict";Ql();Lxe=new Set(["polygons"]),_h=class _h extends gn{constructor(r,n){super(n.mvfData.externalId);w(this,"__type",_h.__type);w(this,"description");w(this,"name","");w(this,"amenity");w(this,"externalId","");w(this,"extra");w(this,"gallery");w(this,"instances");w(this,"logo");w(this,"operationHours");w(this,"phone");w(this,"picture");w(this,"shortName");w(this,"showFloatingLabelWhenImagePresent");w(this,"showLogo");w(this,"siblingGroups");w(this,"social");w(this,"sortOrder",-1);w(this,"states");w(this,"tags");w(this,"type","");w(this,"hidden",!1);w(this,"primaryCategory");D(this,Fo);D(this,gt,{});D(this,xn);D(this,l0);R(this,Fo,r),R(this,xn,n.mvfData),R(this,l0,n.categoryIds||[]),this.instances=n.locationInstances||[];for(let i in n.mvfData)!Lxe.has(i)&&!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),i)&&Object.defineProperty(this,i,{enumerable:!0,get(){if(n.parentId){let o=y(this,Fo).locationsById[n.parentId];return y(this,xn)[i]!=null?y(this,Fo).getPropTranslation(this.__type,i,y(this,xn).id,y(this,xn)[i]):y(this,Fo).getPropTranslation(this.__type,i,y(this,xn).id,o[i])}return y(this,Fo).getPropTranslation(this.__type,i,y(this,xn).id,y(this,xn)[i])}})}static is(r){return r.__type===_h.__type}get focusTarget(){return this.spaces}get categories(){return y(this,gt).categories?y(this,gt).categories:(y(this,gt).categories=(y(this,l0).map(r=>y(this,Fo).getById("enterprise-category",r))||[]).filter(Boolean),y(this,gt).categories)}get coordinates(){if(y(this,gt).coordinates)return y(this,gt).coordinates;y(this,gt).coordinates=[];for(let r=0;r<this.nodes.length;r++)y(this,gt).coordinates.push(this.nodes[r].coordinate);return y(this,gt).coordinates}get nodes(){if(y(this,gt).nodes)return y(this,gt).nodes;y(this,gt).nodes=[];for(let r=0;r<y(this,xn).nodes.length;r++){let n=y(this,Fo).getById("node",y(this,xn).nodes[r].id);n&&y(this,gt).nodes.push(n)}return y(this,gt).nodes}get points(){if(y(this,gt).points)return y(this,gt).points;y(this,gt).points=[];for(let r=0;r<y(this,xn).spaces.length;r++){let n=y(this,Fo).getById("point-of-interest",y(this,xn).spaces[r].id);n&&y(this,gt).points.push(n)}return y(this,gt).points}get spaces(){if(y(this,gt).spaces)return y(this,gt).spaces;y(this,gt).spaces=[];let r=Array.isArray(y(this,xn).spaces)?y(this,xn).spaces:y(this,xn).polygons;for(let n=0;n<r.length;n++){let i=y(this,Fo).getById("space",r[n].id);i&&y(this,gt).spaces.push(i)}return y(this,gt).spaces}get objects(){if(y(this,gt).objects)return y(this,gt).objects;y(this,gt).objects=[];for(let r=0;r<y(this,xn).polygons.length;r++){let n=y(this,Fo).getById("object",y(this,xn).polygons[r].id);n&&y(this,gt).objects.push(n)}return y(this,gt).objects}toJSON(){return{__type:_h.__type,id:this.id,name:this.name}}destroy(){for(let r of Object.keys(y(this,gt)))delete y(this,gt)[r]}};Fo=new WeakMap,gt=new WeakMap,xn=new WeakMap,l0=new WeakMap,w(_h,"__type","enterprise-location");n4=_h,ca=n4});var Fxe,id,Mi,il,Sh,i4,vh,_7=f(()=>{"use strict";Ql();Fxe=new Set,Sh=class Sh extends gn{constructor(r,n){super(n.mvfData.externalId);w(this,"__type",Sh.__type);w(this,"name","");w(this,"color");w(this,"externalId","");w(this,"extra");w(this,"icon");w(this,"iconFromDefaultList");w(this,"sortOrder",-1);w(this,"picture");D(this,id);D(this,Mi,{});D(this,il);R(this,id,r),R(this,il,n.mvfData);for(let i in n.mvfData)!Fxe.has(i)&&!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),i)&&Object.defineProperty(this,i,{get(){return y(this,id).getPropTranslation(this.__type,i,y(this,il).id,y(this,il)[i])}})}static is(r){return r.__type===Sh.__type}get children(){if(y(this,Mi).children)return y(this,Mi).children;y(this,Mi).children=[];for(let r=0;r<y(this,il).children.length;r++){let n=y(this,id).getById("enterprise-category",y(this,il).children[r]);n&&y(this,Mi).children.push(n)}return y(this,Mi).children}get locations(){if(y(this,Mi).locations)return y(this,Mi).locations;y(this,Mi).locations=[];for(let r=0;r<y(this,il).locations.length;r++){let n=y(this,id).getById("enterprise-location",y(this,il).locations[r]);n&&y(this,Mi).locations.push(n)}return y(this,Mi).locations}toJSON(){return{__type:Sh.__type,id:this.id,name:this.name}}destroy(){for(let r of Object.keys(y(this,Mi)))delete y(this,Mi)[r]}};id=new WeakMap,Mi=new WeakMap,il=new WeakMap,w(Sh,"__type","enterprise-category");i4=Sh,vh=i4});var kxe,u0,Th,wh,o4,a4,S7=f(()=>{"use strict";Ql();kxe=new Set,wh=class wh extends gn{constructor(r,n){super(n.mvfData.externalId);w(this,"__type",wh.__type);w(this,"countrycode");w(this,"coverImage");w(this,"externalId","");w(this,"defaultLanguage",{code:"en",name:"English"});w(this,"defaultFloor");w(this,"extra");w(this,"icon");w(this,"languages",[]);w(this,"links",[]);w(this,"logo");w(this,"mappedinWebUrl");w(this,"operationHours");w(this,"slug","");w(this,"topLocations");w(this,"tzid");D(this,u0,{});D(this,Th);R(this,Th,n.mvfData);for(let i in n.mvfData)!kxe.has(i)&&!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),i)&&(this[i]=n.mvfData[i])}static is(r){return r.__type===wh.__type}get name(){return y(this,Th).name??""}get defaultMap(){return y(this,Th).defaultMap??this.defaultFloor??""}toJSON(){return{__type:wh.__type,id:this.id,name:this.name}}destroy(){for(let r of Object.keys(y(this,u0)))delete y(this,u0)[r]}};u0=new WeakMap,Th=new WeakMap,w(wh,"__type","enterprise-venue");o4=wh,a4=o4});function c0(e,t,r=[]){let n={...e};for(let[i,o]of Object.entries(t))if(o!==void 0)if(i in n){let a=i;if(Array.isArray(o)&&o.length>0){let s=Oxe(o[0],r);if(s){let l=n[a];if(!Array.isArray(l))throw new Error(`Expected array at ${i}, got ${typeof l}`);let u=new Map(o.map(d=>[w7(d,s),d])),p=l.map(d=>{let h=u.get(w7(d,s));return h?c0(d,h,r):d});n[a]=p}else n[a]=o}else{let s=n[a];typeof s=="object"&&s!==null&&typeof o=="object"&&o!==null?Object.keys(o).length===0?n[a]=o:n[a]=c0(s,o,r):n[i]=o}}else n[i]=o;return n}function Oxe(e,t){function r(n){if(typeof n!="object"||n===null)return null;for(let i of t)if(i in n&&typeof n[i]<"u")return[i];if(Array.isArray(n))return null;for(let[i,o]of Object.entries(n)){let a=r(o);if(a)return[i,...a]}return null}return r(e)}function w7(e,t){return t.reduce((r,n)=>{if(r&&typeof r=="object")return r[n]},e)}var T7=f(()=>{});var I7=f(()=>{T7()});var E7=f(()=>{});var C7=f(()=>{});var P7=f(()=>{});var M7=f(()=>{});var A7=f(()=>{});var D7=f(()=>{});var L7=f(()=>{});var F7=f(()=>{});var k7=f(()=>{});var O7=f(()=>{});var R7=f(()=>{});var B7=f(()=>{});var z7=f(()=>{});var N7=f(()=>{});var U7=f(()=>{});var U1,$7=f(()=>{U1={accessible:"accessible",outdoors:"outdoors",public:"public"}});var V7=f(()=>{M7();A7();D7();L7();F7();k7();O7();R7();B7();z7();N7();U7();$7()});var j7=f(()=>{});var xt={};Fr(xt,{HasPropertyKey:()=>Rxe,IsArray:()=>hi,IsAsyncIterator:()=>s4,IsBigInt:()=>p0,IsBoolean:()=>Cc,IsDate:()=>od,IsFunction:()=>l4,IsIterator:()=>u4,IsNull:()=>c4,IsNumber:()=>ts,IsObject:()=>Ht,IsRegExp:()=>d0,IsString:()=>sr,IsSymbol:()=>p4,IsUint8Array:()=>cu,IsUndefined:()=>kr});function Rxe(e,t){return t in e}function s4(e){return Ht(e)&&!hi(e)&&!cu(e)&&Symbol.asyncIterator in e}function hi(e){return Array.isArray(e)}function p0(e){return typeof e=="bigint"}function Cc(e){return typeof e=="boolean"}function od(e){return e instanceof globalThis.Date}function l4(e){return typeof e=="function"}function u4(e){return Ht(e)&&!hi(e)&&!cu(e)&&Symbol.iterator in e}function c4(e){return e===null}function ts(e){return typeof e=="number"}function Ht(e){return typeof e=="object"&&e!==null}function d0(e){return e instanceof globalThis.RegExp}function sr(e){return typeof e=="string"}function p4(e){return typeof e=="symbol"}function cu(e){return e instanceof globalThis.Uint8Array}function kr(e){return e===void 0}var Ji=f(()=>{});function Bxe(e){return e.map(t=>$1(t))}function zxe(e){return new Date(e.getTime())}function Nxe(e){return new Uint8Array(e)}function Uxe(e){return new RegExp(e.source,e.flags)}function $xe(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=$1(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=$1(e[r]);return t}function $1(e){return hi(e)?Bxe(e):od(e)?zxe(e):cu(e)?Nxe(e):d0(e)?Uxe(e):Ht(e)?$xe(e):e}function hr(e){return $1(e)}var Ki=f(()=>{Ji()});function G7(e){return e.map(t=>f0(t))}function f0(e,t){return t===void 0?hr(e):hr({...t,...e})}var V1=f(()=>{Ki()});var d4=f(()=>{V1();Ki()});function j1(e){return je(e)&&Symbol.asyncIterator in e}function G1(e){return je(e)&&Symbol.iterator in e}function f4(e){return je(e)&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function H1(e){return e instanceof Promise}function Ai(e){return e instanceof Date&&Number.isFinite(e.getTime())}function H7(e){return e instanceof globalThis.Map}function Z7(e){return e instanceof globalThis.Set}function fa(e){return ArrayBuffer.isView(e)}function Ih(e){return e instanceof globalThis.Uint8Array}function Be(e,t){return t in e}function je(e){return e!==null&&typeof e=="object"}function Ne(e){return Array.isArray(e)&&!ArrayBuffer.isView(e)}function Or(e){return e===void 0}function pu(e){return e===null}function ol(e){return typeof e=="boolean"}function Ce(e){return typeof e=="number"}function Z1(e){return Number.isInteger(e)}function Gn(e){return typeof e=="bigint"}function pt(e){return typeof e=="string"}function Pc(e){return typeof e=="function"}function du(e){return typeof e=="symbol"}function Hn(e){return Gn(e)||ol(e)||pu(e)||Ce(e)||pt(e)||du(e)||Or(e)}var W1=f(()=>{});var bn=f(()=>{W1()});var kt,h0=f(()=>{bn();(function(e){e.InstanceMode="default",e.ExactOptionalPropertyTypes=!1,e.AllowArrayObject=!1,e.AllowNaN=!1,e.AllowNullVoid=!1;function t(a,s){return e.ExactOptionalPropertyTypes?s in a:a[s]!==void 0}e.IsExactOptionalProperty=t;function r(a){let s=je(a);return e.AllowArrayObject?s:s&&!Ne(a)}e.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}e.IsRecordLike=n;function i(a){return e.AllowNaN?Ce(a):Number.isFinite(a)}e.IsNumberLike=i;function o(a){let s=Or(a);return e.AllowNullVoid?s||a===null:s}e.IsVoidLike=o})(kt||(kt={}))});function Vxe(e){return globalThis.Object.freeze(e).map(t=>m0(t))}function jxe(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=m0(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=m0(e[r]);return globalThis.Object.freeze(t)}function m0(e){return hi(e)?Vxe(e):od(e)?e:cu(e)?e:d0(e)?e:Ht(e)?jxe(e):e}var W7=f(()=>{Ji()});function G(e,t){let r=t!==void 0?{...t,...e}:e;switch(kt.InstanceMode){case"freeze":return m0(r);case"clone":return hr(r);default:return r}}var ke=f(()=>{h0();W7();Ki()});var Eh=f(()=>{ke()});var Oe,h4=f(()=>{Oe=class extends Error{constructor(t){super(t)}}});var $r=f(()=>{h4()});var mr,fu,Di,ha,N,X1=f(()=>{mr=Symbol.for("TypeBox.Transform"),fu=Symbol.for("TypeBox.Readonly"),Di=Symbol.for("TypeBox.Optional"),ha=Symbol.for("TypeBox.Hint"),N=Symbol.for("TypeBox.Kind")});var ge=f(()=>{X1()});function X7(e){return Ht(e)&&e[fu]==="Readonly"}function al(e){return Ht(e)&&e[Di]==="Optional"}function m4(e){return bt(e,"Any")}function hu(e){return bt(e,"Array")}function y0(e){return bt(e,"AsyncIterator")}function y4(e){return bt(e,"BigInt")}function g4(e){return bt(e,"Boolean")}function g0(e){return bt(e,"Constructor")}function Gxe(e){return bt(e,"Date")}function x0(e){return bt(e,"Function")}function ad(e){return bt(e,"Integer")}function Kr(e){return bt(e,"Intersect")}function b0(e){return bt(e,"Iterator")}function bt(e,t){return Ht(e)&&N in e&&e[N]===t}function mu(e){return bt(e,"Literal")}function ko(e){return bt(e,"MappedKey")}function yr(e){return bt(e,"MappedResult")}function Mc(e){return bt(e,"Never")}function Hxe(e){return bt(e,"Not")}function Zxe(e){return bt(e,"Null")}function sd(e){return bt(e,"Number")}function vn(e){return bt(e,"Object")}function ld(e){return bt(e,"Promise")}function x4(e){return bt(e,"Record")}function b4(e){return bt(e,"Ref")}function v4(e){return bt(e,"RegExp")}function v0(e){return bt(e,"String")}function Wxe(e){return bt(e,"Symbol")}function Oo(e){return bt(e,"TemplateLiteral")}function Xxe(e){return bt(e,"This")}function Ch(e){return Ht(e)&&mr in e}function rs(e){return bt(e,"Tuple")}function qxe(e){return bt(e,"Undefined")}function It(e){return bt(e,"Union")}function Yxe(e){return bt(e,"Uint8Array")}function Jxe(e){return bt(e,"Unknown")}function Kxe(e){return bt(e,"Unsafe")}function Qxe(e){return bt(e,"Void")}function Ac(e){return Ht(e)&&N in e&&sr(e[N])}function ns(e){return m4(e)||hu(e)||g4(e)||y4(e)||y0(e)||g0(e)||Gxe(e)||x0(e)||ad(e)||Kr(e)||b0(e)||mu(e)||ko(e)||yr(e)||Mc(e)||Hxe(e)||Zxe(e)||sd(e)||vn(e)||ld(e)||x4(e)||b4(e)||v4(e)||v0(e)||Wxe(e)||Oo(e)||Xxe(e)||rs(e)||qxe(e)||It(e)||Yxe(e)||Jxe(e)||Kxe(e)||Qxe(e)||Ac(e)}var At=f(()=>{Ji();ge()});var M={};Fr(M,{IsAny:()=>K7,IsArray:()=>Q7,IsAsyncIterator:()=>e$,IsBigInt:()=>t$,IsBoolean:()=>r$,IsConstructor:()=>n$,IsDate:()=>i$,IsFunction:()=>o$,IsInteger:()=>a$,IsIntersect:()=>s$,IsIterator:()=>l$,IsKind:()=>L$,IsKindOf:()=>ft,IsLiteral:()=>S0,IsLiteralBoolean:()=>abe,IsLiteralNumber:()=>c$,IsLiteralString:()=>u$,IsLiteralValue:()=>p$,IsMappedKey:()=>d$,IsMappedResult:()=>f$,IsNever:()=>h$,IsNot:()=>m$,IsNull:()=>y$,IsNumber:()=>g$,IsObject:()=>x$,IsOptional:()=>obe,IsPromise:()=>b$,IsProperties:()=>T4,IsReadonly:()=>ibe,IsRecord:()=>v$,IsRecursive:()=>sbe,IsRef:()=>_$,IsRegExp:()=>S$,IsSchema:()=>dt,IsString:()=>w$,IsSymbol:()=>T$,IsTemplateLiteral:()=>I$,IsThis:()=>E$,IsTransform:()=>lr,IsTuple:()=>C$,IsUint8Array:()=>P$,IsUndefined:()=>Ph,IsUnion:()=>I4,IsUnionLiteral:()=>lbe,IsUnknown:()=>M$,IsUnsafe:()=>A$,IsVoid:()=>D$,TypeGuardUnknownTypeError:()=>_4});function q7(e){try{return new RegExp(e),!0}catch{return!1}}function S4(e){if(!sr(e))return!1;for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}function Y7(e){return w4(e)||dt(e)}function _0(e){return kr(e)||p0(e)}function Qt(e){return kr(e)||ts(e)}function w4(e){return kr(e)||Cc(e)}function $t(e){return kr(e)||sr(e)}function rbe(e){return kr(e)||sr(e)&&S4(e)&&q7(e)}function nbe(e){return kr(e)||sr(e)&&S4(e)}function J7(e){return kr(e)||dt(e)}function ibe(e){return Ht(e)&&e[fu]==="Readonly"}function obe(e){return Ht(e)&&e[Di]==="Optional"}function K7(e){return ft(e,"Any")&&$t(e.$id)}function Q7(e){return ft(e,"Array")&&e.type==="array"&&$t(e.$id)&&dt(e.items)&&Qt(e.minItems)&&Qt(e.maxItems)&&w4(e.uniqueItems)&&J7(e.contains)&&Qt(e.minContains)&&Qt(e.maxContains)}function e$(e){return ft(e,"AsyncIterator")&&e.type==="AsyncIterator"&&$t(e.$id)&&dt(e.items)}function t$(e){return ft(e,"BigInt")&&e.type==="bigint"&&$t(e.$id)&&_0(e.exclusiveMaximum)&&_0(e.exclusiveMinimum)&&_0(e.maximum)&&_0(e.minimum)&&_0(e.multipleOf)}function r$(e){return ft(e,"Boolean")&&e.type==="boolean"&&$t(e.$id)}function n$(e){return ft(e,"Constructor")&&e.type==="Constructor"&&$t(e.$id)&&hi(e.parameters)&&e.parameters.every(t=>dt(t))&&dt(e.returns)}function i$(e){return ft(e,"Date")&&e.type==="Date"&&$t(e.$id)&&Qt(e.exclusiveMaximumTimestamp)&&Qt(e.exclusiveMinimumTimestamp)&&Qt(e.maximumTimestamp)&&Qt(e.minimumTimestamp)&&Qt(e.multipleOfTimestamp)}function o$(e){return ft(e,"Function")&&e.type==="Function"&&$t(e.$id)&&hi(e.parameters)&&e.parameters.every(t=>dt(t))&&dt(e.returns)}function a$(e){return ft(e,"Integer")&&e.type==="integer"&&$t(e.$id)&&Qt(e.exclusiveMaximum)&&Qt(e.exclusiveMinimum)&&Qt(e.maximum)&&Qt(e.minimum)&&Qt(e.multipleOf)}function T4(e){return Ht(e)&&Object.entries(e).every(([t,r])=>S4(t)&&dt(r))}function s$(e){return ft(e,"Intersect")&&!(sr(e.type)&&e.type!=="object")&&hi(e.allOf)&&e.allOf.every(t=>dt(t)&&!lr(t))&&$t(e.type)&&(w4(e.unevaluatedProperties)||J7(e.unevaluatedProperties))&&$t(e.$id)}function l$(e){return ft(e,"Iterator")&&e.type==="Iterator"&&$t(e.$id)&&dt(e.items)}function ft(e,t){return Ht(e)&&N in e&&e[N]===t}function u$(e){return S0(e)&&sr(e.const)}function c$(e){return S0(e)&&ts(e.const)}function abe(e){return S0(e)&&Cc(e.const)}function S0(e){return ft(e,"Literal")&&$t(e.$id)&&p$(e.const)}function p$(e){return Cc(e)||ts(e)||sr(e)}function d$(e){return ft(e,"MappedKey")&&hi(e.keys)&&e.keys.every(t=>ts(t)||sr(t))}function f$(e){return ft(e,"MappedResult")&&T4(e.properties)}function h$(e){return ft(e,"Never")&&Ht(e.not)&&Object.getOwnPropertyNames(e.not).length===0}function m$(e){return ft(e,"Not")&&dt(e.not)}function y$(e){return ft(e,"Null")&&e.type==="null"&&$t(e.$id)}function g$(e){return ft(e,"Number")&&e.type==="number"&&$t(e.$id)&&Qt(e.exclusiveMaximum)&&Qt(e.exclusiveMinimum)&&Qt(e.maximum)&&Qt(e.minimum)&&Qt(e.multipleOf)}function x$(e){return ft(e,"Object")&&e.type==="object"&&$t(e.$id)&&T4(e.properties)&&Y7(e.additionalProperties)&&Qt(e.minProperties)&&Qt(e.maxProperties)}function b$(e){return ft(e,"Promise")&&e.type==="Promise"&&$t(e.$id)&&dt(e.item)}function v$(e){return ft(e,"Record")&&e.type==="object"&&$t(e.$id)&&Y7(e.additionalProperties)&&Ht(e.patternProperties)&&(t=>{let r=Object.getOwnPropertyNames(t.patternProperties);return r.length===1&&q7(r[0])&&Ht(t.patternProperties)&&dt(t.patternProperties[r[0]])})(e)}function sbe(e){return Ht(e)&&ha in e&&e[ha]==="Recursive"}function _$(e){return ft(e,"Ref")&&$t(e.$id)&&sr(e.$ref)}function S$(e){return ft(e,"RegExp")&&$t(e.$id)&&sr(e.source)&&sr(e.flags)&&Qt(e.maxLength)&&Qt(e.minLength)}function w$(e){return ft(e,"String")&&e.type==="string"&&$t(e.$id)&&Qt(e.minLength)&&Qt(e.maxLength)&&rbe(e.pattern)&&nbe(e.format)}function T$(e){return ft(e,"Symbol")&&e.type==="symbol"&&$t(e.$id)}function I$(e){return ft(e,"TemplateLiteral")&&e.type==="string"&&sr(e.pattern)&&e.pattern[0]==="^"&&e.pattern[e.pattern.length-1]==="$"}function E$(e){return ft(e,"This")&&$t(e.$id)&&sr(e.$ref)}function lr(e){return Ht(e)&&mr in e}function C$(e){return ft(e,"Tuple")&&e.type==="array"&&$t(e.$id)&&ts(e.minItems)&&ts(e.maxItems)&&e.minItems===e.maxItems&&(kr(e.items)&&kr(e.additionalItems)&&e.minItems===0||hi(e.items)&&e.items.every(t=>dt(t)))}function Ph(e){return ft(e,"Undefined")&&e.type==="undefined"&&$t(e.$id)}function lbe(e){return I4(e)&&e.anyOf.every(t=>u$(t)||c$(t))}function I4(e){return ft(e,"Union")&&$t(e.$id)&&Ht(e)&&hi(e.anyOf)&&e.anyOf.every(t=>dt(t))}function P$(e){return ft(e,"Uint8Array")&&e.type==="Uint8Array"&&$t(e.$id)&&Qt(e.minByteLength)&&Qt(e.maxByteLength)}function M$(e){return ft(e,"Unknown")&&$t(e.$id)}function A$(e){return ft(e,"Unsafe")}function D$(e){return ft(e,"Void")&&e.type==="void"&&$t(e.$id)}function L$(e){return Ht(e)&&N in e&&sr(e[N])&&!tbe.includes(e[N])}function dt(e){return Ht(e)&&(K7(e)||Q7(e)||r$(e)||t$(e)||e$(e)||n$(e)||i$(e)||o$(e)||a$(e)||s$(e)||l$(e)||S0(e)||d$(e)||f$(e)||h$(e)||m$(e)||y$(e)||g$(e)||x$(e)||b$(e)||v$(e)||_$(e)||S$(e)||w$(e)||T$(e)||I$(e)||E$(e)||C$(e)||Ph(e)||I4(e)||P$(e)||M$(e)||A$(e)||D$(e)||L$(e))}var _4,tbe,ud=f(()=>{Ji();ge();$r();_4=class extends Oe{},tbe=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"]});var q1=f(()=>{At();ud();Ji()});var F$=f(()=>{});var E4=f(()=>{F$()});var C4,w0,P4,ube,eQe,yu,gu,k$,O$=f(()=>{C4="(true|false)",w0="(0|[1-9][0-9]*)",P4="(.*)",ube="(?!.*)",eQe=`^${C4}$`,yu=`^${w0}$`,gu=`^${P4}$`,k$=`^${ube}$`});var cd=f(()=>{O$()});var Qi={};Fr(Qi,{Clear:()=>pbe,Delete:()=>dbe,Entries:()=>cbe,Get:()=>mbe,Has:()=>fbe,Set:()=>hbe});function cbe(){return new Map(Mh)}function pbe(){return Mh.clear()}function dbe(e){return Mh.delete(e)}function fbe(e){return Mh.has(e)}function hbe(e,t){Mh.set(e,t)}function mbe(e){return Mh.get(e)}var Mh,R$=f(()=>{Mh=new Map});var On={};Fr(On,{Clear:()=>gbe,Delete:()=>xbe,Entries:()=>ybe,Get:()=>_be,Has:()=>bbe,Set:()=>vbe});function ybe(){return new Map(Ah)}function gbe(){return Ah.clear()}function xbe(e){return Ah.delete(e)}function bbe(e){return Ah.has(e)}function vbe(e,t){Ah.set(e,t)}function _be(e){return Ah.get(e)}var Ah,B$=f(()=>{Ah=new Map});var Dc=f(()=>{R$();B$()});function z$(e,t){return e.includes(t)}function N$(e){return[...new Set(e)]}function Sbe(e,t){return e.filter(r=>t.includes(r))}function wbe(e,t){return e.reduce((r,n)=>Sbe(r,n),t)}function U$(e){return e.length===1?e[0]:e.length>1?wbe(e.slice(1),e[0]):[]}function $$(e){let t=[];for(let r of e)t.push(...r);return t}var V$=f(()=>{});var Dh=f(()=>{V$()});function Lc(e){return G({[N]:"Any"},e)}var j$=f(()=>{Eh();ge()});var Lh=f(()=>{j$()});function Y1(e,t){return G({[N]:"Array",type:"array",items:e},t)}var G$=f(()=>{ke();ge()});var T0=f(()=>{G$()});function J1(e,t){return G({[N]:"AsyncIterator",type:"AsyncIterator",items:e},t)}var H$=f(()=>{ge();ke()});var I0=f(()=>{H$()});function Tbe(e,t){let{[t]:r,...n}=e;return n}function Vr(e,t){return t.reduce((r,n)=>Tbe(r,n),e)}var K1=f(()=>{});var sl=f(()=>{K1()});function Vt(e){return G({[N]:"Never",not:{}},e)}var Z$=f(()=>{ke();ge()});var mi=f(()=>{Z$()});var W$=f(()=>{});function vt(e){return G({[N]:"MappedResult",properties:e})}var M4=f(()=>{ke();ge()});function Q1(e,t,r){return G({[N]:"Constructor",type:"Constructor",parameters:e,returns:t},r)}var X$=f(()=>{ke();ge()});var E0=f(()=>{X$()});function Fc(e,t,r){return G({[N]:"Function",type:"Function",parameters:e,returns:t},r)}var q$=f(()=>{ke();ge()});var pd=f(()=>{q$()});function C0(e,t){return G({[N]:"Union",anyOf:e},t)}var A4=f(()=>{ke();ge()});function Ibe(e){return e.some(t=>al(t))}function Y$(e){return e.map(t=>al(t)?Ebe(t):t)}function Ebe(e){return Vr(e,[Di])}function Cbe(e,t){return Ibe(e)?eo(C0(Y$(e),t)):C0(Y$(e),t)}function ll(e,t){return e.length===0?Vt(t):e.length===1?G(e[0],t):Cbe(e,t)}var J$=f(()=>{ke();ge();sl();mi();xu();A4();At()});var K$=f(()=>{});function jt(e,t){return e.length===0?Vt(t):e.length===1?G(e[0],t):C0(e,t)}var Q$=f(()=>{mi();ke();A4()});var Qr=f(()=>{J$();K$();Q$()});function Pbe(e){return e.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function D4(e,t,r){return e[t]===r&&e.charCodeAt(t-1)!==92}function bu(e,t){return D4(e,t,"(")}function P0(e,t){return D4(e,t,")")}function e9(e,t){return D4(e,t,"|")}function Mbe(e){if(!(bu(e,0)&&P0(e,e.length-1)))return!1;let t=0;for(let r=0;r<e.length;r++)if(bu(e,r)&&(t+=1),P0(e,r)&&(t-=1),t===0&&r!==e.length-1)return!1;return!0}function Abe(e){return e.slice(1,e.length-1)}function Dbe(e){let t=0;for(let r=0;r<e.length;r++)if(bu(e,r)&&(t+=1),P0(e,r)&&(t-=1),e9(e,r)&&t===0)return!0;return!1}function Lbe(e){for(let t=0;t<e.length;t++)if(bu(e,t))return!0;return!1}function Fbe(e){let[t,r]=[0,0],n=[];for(let o=0;o<e.length;o++)if(bu(e,o)&&(t+=1),P0(e,o)&&(t-=1),e9(e,o)&&t===0){let a=e.slice(r,o);a.length>0&&n.push(Fh(a)),r=o+1}let i=e.slice(r);return i.length>0&&n.push(Fh(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}function kbe(e){function t(i,o){if(!bu(i,o))throw new eS("TemplateLiteralParser: Index must point to open parens");let a=0;for(let s=o;s<i.length;s++)if(bu(i,s)&&(a+=1),P0(i,s)&&(a-=1),a===0)return[o,s];throw new eS("TemplateLiteralParser: Unclosed group parens in expression")}function r(i,o){for(let a=o;a<i.length;a++)if(bu(i,a))return[o,a];return[o,i.length]}let n=[];for(let i=0;i<e.length;i++)if(bu(e,i)){let[o,a]=t(e,i),s=e.slice(o,a+1);n.push(Fh(s)),i=a}else{let[o,a]=r(e,i),s=e.slice(o,a);s.length>0&&n.push(Fh(s)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}function Fh(e){return Mbe(e)?Fh(Abe(e)):Dbe(e)?Fbe(e):Lbe(e)?kbe(e):{type:"const",const:Pbe(e)}}function kh(e){return Fh(e.slice(1,e.length-1))}var eS,tS=f(()=>{$r();eS=class extends Oe{}});function Obe(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="0"&&e.expr[1].type==="const"&&e.expr[1].const==="[1-9][0-9]*"}function Rbe(e){return e.type==="or"&&e.expr.length===2&&e.expr[0].type==="const"&&e.expr[0].const==="true"&&e.expr[1].type==="const"&&e.expr[1].const==="false"}function Bbe(e){return e.type==="const"&&e.const===".*"}function dd(e){return Obe(e)||Bbe(e)?!1:Rbe(e)?!0:e.type==="and"?e.expr.every(t=>dd(t)):e.type==="or"?e.expr.every(t=>dd(t)):e.type==="const"?!0:(()=>{throw new L4("Unknown expression type")})()}function rS(e){let t=kh(e.pattern);return dd(t)}var L4,F4=f(()=>{tS();$r();L4=class extends Oe{}});function*t9(e){if(e.length===1)return yield*e[0];for(let t of e[0])for(let r of t9(e.slice(1)))yield`${t}${r}`}function*zbe(e){return yield*t9(e.expr.map(t=>[...M0(t)]))}function*Nbe(e){for(let t of e.expr)yield*M0(t)}function*Ube(e){return yield e.const}function*M0(e){return e.type==="and"?yield*zbe(e):e.type==="or"?yield*Nbe(e):e.type==="const"?yield*Ube(e):(()=>{throw new k4("Unknown expression")})()}function Oh(e){let t=kh(e.pattern);return dd(t)?[...M0(t)]:[]}var k4,O4=f(()=>{F4();tS();$r();k4=class extends Oe{}});function Pt(e,t){return G({[N]:"Literal",const:e,type:typeof e},t)}var r9=f(()=>{ke();ge()});var to=f(()=>{r9()});function nS(e){return G({[N]:"Boolean",type:"boolean"},e)}var n9=f(()=>{ge();Eh()});var A0=f(()=>{n9()});function Rh(e){return G({[N]:"BigInt",type:"bigint"},e)}var i9=f(()=>{ge();Eh()});var Bh=f(()=>{i9()});function ul(e){return G({[N]:"Number",type:"number"},e)}var o9=f(()=>{ke();ge()});var fd=f(()=>{o9()});function ma(e){return G({[N]:"String",type:"string"},e)}var a9=f(()=>{ke();ge()});var hd=f(()=>{a9()});function*$be(e){let t=e.trim().replace(/"|'/g,"");return t==="boolean"?yield nS():t==="number"?yield ul():t==="bigint"?yield Rh():t==="string"?yield ma():yield(()=>{let r=t.split("|").map(n=>Pt(n.trim()));return r.length===0?Vt():r.length===1?r[0]:ll(r)})()}function*Vbe(e){if(e[1]!=="{"){let t=Pt("$"),r=R4(e.slice(1));return yield*[t,...r]}for(let t=2;t<e.length;t++)if(e[t]==="}"){let r=$be(e.slice(2,t)),n=R4(e.slice(t+1));return yield*[...r,...n]}yield Pt(e)}function*R4(e){for(let t=0;t<e.length;t++)if(e[t]==="$"){let r=Pt(e.slice(0,t)),n=Vbe(e.slice(t));return yield*[r,...n]}yield Pt(e)}function s9(e){return[...R4(e)]}var B4=f(()=>{to();A0();Bh();fd();hd();Qr();mi()});function jbe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l9(e,t){return Oo(e)?e.pattern.slice(1,e.pattern.length-1):It(e)?`(${e.anyOf.map(r=>l9(r,t)).join("|")})`:sd(e)?`${t}${w0}`:ad(e)?`${t}${w0}`:y4(e)?`${t}${w0}`:v0(e)?`${t}${P4}`:mu(e)?`${t}${jbe(e.const.toString())}`:g4(e)?`${t}${C4}`:(()=>{throw new z4(`Unexpected Kind '${e[N]}'`)})()}function N4(e){return`^${e.map(t=>l9(t,"")).join("")}$`}var z4,U4=f(()=>{cd();ge();$r();At();z4=class extends Oe{}});function md(e){let r=Oh(e).map(n=>Pt(n));return ll(r)}var u9=f(()=>{Qr();to();O4()});function iS(e,t){let r=sr(e)?N4(s9(e)):N4(e);return G({[N]:"TemplateLiteral",type:"string",pattern:r},t)}var c9=f(()=>{ke();B4();U4();Ji();ge()});var is=f(()=>{F4();O4();B4();tS();U4();u9();c9()});function Gbe(e){return Oh(e).map(r=>r.toString())}function Hbe(e){let t=[];for(let r of e)t.push(...ro(r));return t}function Zbe(e){return[e.toString()]}function ro(e){return[...new Set(Oo(e)?Gbe(e):It(e)?Hbe(e.anyOf):mu(e)?Zbe(e.const):sd(e)?["[number]"]:ad(e)?["[number]"]:[])]}var oS=f(()=>{is();At()});function Wbe(e,t,r){let n={};for(let i of Object.getOwnPropertyNames(t))n[i]=zh(e,ro(t[i]),r);return n}function Xbe(e,t,r){return Wbe(e,t.properties,r)}function p9(e,t,r){let n=Xbe(e,t,r);return vt(n)}var $4=f(()=>{cn();oS();cl()});function f9(e,t){return e.map(r=>h9(r,t))}function qbe(e){return e.filter(t=>!Mc(t))}function Ybe(e,t){return sS(qbe(f9(e,t)))}function Jbe(e){return e.some(t=>Mc(t))?[]:e}function Kbe(e,t){return ll(Jbe(f9(e,t)))}function Qbe(e,t){return t in e?e[t]:t==="[number]"?ll(e):Vt()}function eve(e,t){return t==="[number]"?e:Vt()}function tve(e,t){return t in e?e[t]:Vt()}function h9(e,t){return Kr(e)?Ybe(e.allOf,t):It(e)?Kbe(e.anyOf,t):rs(e)?Qbe(e.items??[],t):hu(e)?eve(e.items,t):vn(e)?tve(e.properties,t):Vt()}function D0(e,t){return t.map(r=>h9(e,r))}function d9(e,t){return ll(D0(e,t))}function zh(e,t,r){return yr(t)?p9(e,t,r):ko(t)?m9(e,t,r):G(ns(t)?d9(e,ro(t)):d9(e,t),r)}var aS=f(()=>{ke();mi();ya();Qr();oS();V4();$4();At()});function rve(e,t,r){return{[t]:zh(e,[t],hr(r))}}function nve(e,t,r){return t.reduce((n,i)=>({...n,...rve(e,i,r)}),{})}function ive(e,t,r){return nve(e,t.keys,r)}function m9(e,t,r){let n=ive(e,t,r);return vt(n)}var V4=f(()=>{aS();cn();Ki()});var cl=f(()=>{V4();$4();oS();aS()});function lS(e,t){return G({[N]:"Iterator",type:"Iterator",items:e},t)}var y9=f(()=>{ke();ge()});var L0=f(()=>{y9()});function ove(e){let t=[];for(let r in e)al(e[r])||t.push(r);return t}function ave(e,t){let r=ove(e),n=r.length>0?{[N]:"Object",type:"object",properties:e,required:r}:{[N]:"Object",type:"object",properties:e};return G(n,t)}var Zt,g9=f(()=>{ke();ge();At();Zt=ave});var Ro=f(()=>{g9()});function uS(e,t){return G({[N]:"Promise",type:"Promise",item:e},t)}var x9=f(()=>{ke();ge()});var F0=f(()=>{x9()});function sve(e){return G(Vr(e,[fu]))}function lve(e){return G({...e,[fu]:"Readonly"})}function uve(e,t){return t===!1?sve(e):lve(e)}function ga(e,t){let r=t??!0;return yr(e)?b9(e,r):uve(e,r)}var j4=f(()=>{ke();ge();sl();G4();At()});function cve(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=ga(e[n],t);return r}function pve(e,t){return cve(e.properties,t)}function b9(e,t){let r=pve(e,t);return vt(r)}var G4=f(()=>{cn();j4()});var yd=f(()=>{G4();j4()});function pl(e,t){return G(e.length>0?{[N]:"Tuple",type:"array",items:e,additionalItems:!1,minItems:e.length,maxItems:e.length}:{[N]:"Tuple",type:"array",minItems:e.length,maxItems:e.length},t)}var v9=f(()=>{ke();ge()});var kc=f(()=>{v9()});function _9(e,t){return e in t?xa(e,t[e]):vt(t)}function dve(e){return{[e]:Pt(e)}}function fve(e){let t={};for(let r of e)t[r]=Pt(r);return t}function hve(e,t){return z$(t,e)?dve(e):fve(t)}function mve(e,t){let r=hve(e,t);return _9(e,r)}function k0(e,t){return t.map(r=>xa(e,r))}function yve(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=xa(e,t[n]);return r}function xa(e,t){let r={...t};return al(t)?eo(xa(e,Vr(t,[Di]))):X7(t)?ga(xa(e,Vr(t,[fu]))):yr(t)?_9(e,t.properties):ko(t)?mve(e,t.keys):g0(t)?Q1(k0(e,t.parameters),xa(e,t.returns),r):x0(t)?Fc(k0(e,t.parameters),xa(e,t.returns),r):y0(t)?J1(xa(e,t.items),r):b0(t)?lS(xa(e,t.items),r):Kr(t)?no(k0(e,t.allOf),r):It(t)?jt(k0(e,t.anyOf),r):rs(t)?pl(k0(e,t.items??[]),r):vn(t)?Zt(yve(e,t.properties),r):hu(t)?Y1(xa(e,t.items),r):ld(t)?uS(xa(e,t.item),r):t}function gve(e,t){let r={};for(let n of e)r[n]=xa(n,t);return r}function S9(e,t,r){let n=ns(e)?ro(e):e,i=t({[N]:"MappedKey",keys:n}),o=gve(n,i);return Zt(o,r)}var w9=f(()=>{ge();sl();T0();I0();E0();pd();cl();ya();L0();to();Ro();xu();F0();yd();kc();Qr();Dh();M4();At()});var cn=f(()=>{W$();M4();w9()});function xve(e){return G(Vr(e,[Di]))}function bve(e){return G({...e,[Di]:"Optional"})}function vve(e,t){return t===!1?xve(e):bve(e)}function eo(e,t){let r=t??!0;return yr(e)?T9(e,r):vve(e,r)}var H4=f(()=>{ke();ge();sl();Z4();At()});function _ve(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=eo(e[n],t);return r}function Sve(e,t){return _ve(e.properties,t)}function T9(e,t){let r=Sve(e,t);return vt(r)}var Z4=f(()=>{cn();H4()});var xu=f(()=>{Z4();H4()});function O0(e,t={}){let r=e.every(i=>vn(i)),n=ns(t.unevaluatedProperties)?{unevaluatedProperties:t.unevaluatedProperties}:{};return G(t.unevaluatedProperties===!1||ns(t.unevaluatedProperties)||r?{...n,[N]:"Intersect",type:"object",allOf:e}:{...n,[N]:"Intersect",allOf:e},t)}var W4=f(()=>{ke();ge();At()});function wve(e){return e.every(t=>al(t))}function Tve(e){return Vr(e,[Di])}function I9(e){return e.map(t=>al(t)?Tve(t):t)}function Ive(e,t){return wve(e)?eo(O0(I9(e),t)):O0(I9(e),t)}function sS(e,t={}){if(e.length===0)return Vt(t);if(e.length===1)return G(e[0],t);if(e.some(r=>Ch(r)))throw new Error("Cannot intersect transform types");return Ive(e,t)}var E9=f(()=>{ge();ke();sl();mi();xu();W4();At()});var C9=f(()=>{});function no(e,t){if(e.length===0)return Vt(t);if(e.length===1)return G(e[0],t);if(e.some(r=>Ch(r)))throw new Error("Cannot intersect transform types");return O0(e,t)}var P9=f(()=>{ke();mi();W4();At()});var ya=f(()=>{E9();C9();P9()});function M9(e){return e.map(t=>X4(t))}function Eve(e){return no(M9(e))}function Cve(e){return jt(M9(e))}function Pve(e){return X4(e)}function X4(e){return Kr(e)?Eve(e.allOf):It(e)?Cve(e.anyOf):ld(e)?Pve(e.item):e}function A9(e,t){return G(X4(e),t)}var D9=f(()=>{ya();Qr();ke();At()});var cS=f(()=>{D9()});function L9(e){let t=[];for(let r of e)t.push(Rn(r));return t}function Mve(e){let t=L9(e);return $$(t)}function Ave(e){let t=L9(e);return U$(t)}function Dve(e){return e.map((t,r)=>r.toString())}function Lve(e){return["[number]"]}function Fve(e){return globalThis.Object.getOwnPropertyNames(e)}function kve(e){return q4?globalThis.Object.getOwnPropertyNames(e).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}function Rn(e){return Kr(e)?Mve(e.allOf):It(e)?Ave(e.anyOf):rs(e)?Dve(e.items??[]):hu(e)?Lve(e.items):vn(e)?Fve(e.properties):x4(e)?kve(e.patternProperties):[]}function vu(e){q4=!0;let t=Rn(e);return q4=!1,`^(${t.map(n=>`(${n})`).join("|")})$`}var q4,pS=f(()=>{Dh();At();q4=!1});function Ove(e){return e.map(t=>t==="[number]"?ul():Pt(t))}function dS(e,t){if(yr(e))return F9(e,t);{let r=Rn(e),n=Ove(r),i=ll(n);return G(i,t)}}var Y4=f(()=>{ke();to();fd();pS();Qr();J4();At()});function Rve(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=dS(e[n],hr(t));return r}function Bve(e,t){return Rve(e.properties,t)}function F9(e,t){let r=Bve(e,t);return vt(r)}var J4=f(()=>{cn();Y4();Ki()});function Oc(e){let t=Rn(e),r=D0(e,t);return t.map((n,i)=>[t[i],r[i]])}var k9=f(()=>{aS();pS()});var os=f(()=>{J4();k9();pS();Y4()});function zve(e){let t=[];for(let r of e)t.push(...Rn(r));return N$(t)}function Nve(e){return e.filter(t=>!Mc(t))}function Uve(e,t){let r=[];for(let n of e)r.push(...D0(n,[t]));return Nve(r)}function $ve(e,t){let r={};for(let n of t)r[n]=sS(Uve(e,n));return r}function O9(e,t){let r=zve(e),n=$ve(e,r);return Zt(n,t)}var R9=f(()=>{ya();cl();os();Ro();Dh();At()});var fS=f(()=>{R9()});function hS(e){return G({[N]:"Date",type:"Date"},e)}var B9=f(()=>{ge();ke()});var R0=f(()=>{B9()});function mS(e){return G({[N]:"Null",type:"null"},e)}var z9=f(()=>{ke();ge()});var B0=f(()=>{z9()});function yS(e){return G({[N]:"Symbol",type:"symbol"},e)}var N9=f(()=>{ke();ge()});var z0=f(()=>{N9()});function gS(e){return G({[N]:"Undefined",type:"undefined"},e)}var U9=f(()=>{ke();ge()});var N0=f(()=>{U9()});function xS(e){return G({[N]:"Uint8Array",type:"Uint8Array"},e)}var $9=f(()=>{ke();ge()});var U0=f(()=>{$9()});function _u(e){return G({[N]:"Unknown"},e)}var V9=f(()=>{ke();ge()});var gd=f(()=>{V9()});function Vve(e){return e.map(t=>K4(t,!1))}function jve(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=ga(K4(e[r],!1));return t}function bS(e,t){return t===!0?e:ga(e)}function K4(e,t){return s4(e)?bS(Lc(),t):u4(e)?bS(Lc(),t):hi(e)?ga(pl(Vve(e))):cu(e)?xS():od(e)?hS():Ht(e)?bS(Zt(jve(e)),t):l4(e)?bS(Fc([],_u()),t):kr(e)?gS():c4(e)?mS():p4(e)?yS():p0(e)?Rh():ts(e)?Pt(e):Cc(e)?Pt(e):sr(e)?Pt(e):Zt({})}function j9(e,t){return G(K4(e,!0),t)}var G9=f(()=>{Lh();Bh();R0();pd();to();B0();Ro();z0();kc();yd();N0();U0();gd();Eh();Ji()});var vS=f(()=>{G9()});function H9(e,t){return pl(e.parameters,t)}var Z9=f(()=>{kc()});var _S=f(()=>{Z9()});function $0(e,t){return e.map(r=>as(r,t))}function Gve(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=as(e[n],t);return r}function Hve(e,t){return e.parameters=$0(e.parameters,t),e.returns=as(e.returns,t),e}function Zve(e,t){return e.parameters=$0(e.parameters,t),e.returns=as(e.returns,t),e}function Wve(e,t){return e.allOf=$0(e.allOf,t),e}function Xve(e,t){return e.anyOf=$0(e.anyOf,t),e}function qve(e,t){return kr(e.items)||(e.items=$0(e.items,t)),e}function Yve(e,t){return e.items=as(e.items,t),e}function Jve(e,t){return e.properties=Gve(e.properties,t),e}function Kve(e,t){return e.item=as(e.item,t),e}function Qve(e,t){return e.items=as(e.items,t),e}function e_e(e,t){return e.items=as(e.items,t),e}function t_e(e,t){let r=t.find(i=>i.$id===e.$ref);if(r===void 0)throw Error(`Unable to dereference schema with $id ${e.$ref}`);let n=Vr(r,["$id"]);return as(n,t)}function r_e(e,t){return g0(e)?Hve(e,t):x0(e)?Zve(e,t):Kr(e)?Wve(e,t):It(e)?Xve(e,t):rs(e)?qve(e,t):hu(e)?Yve(e,t):vn(e)?Jve(e,t):ld(e)?Kve(e,t):y0(e)?Qve(e,t):b0(e)?e_e(e,t):b4(e)?t_e(e,t):e}function as(e,t){return r_e(f0(e),G7(t))}var W9=f(()=>{V1();sl();Ji();At()});var SS=f(()=>{W9()});function X9(e,t){if(kr(e))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(e).filter(o=>isNaN(o)).map(o=>e[o]),i=[...new Set(r)].map(o=>Pt(o));return jt(i,{...t,[ha]:"Enum"})}var q9=f(()=>{to();ge();Qr();Ji()});var wS=f(()=>{q9()});function ba(e){return e===V.False?e:V.True}function Nh(e){throw new eA(e)}function pn(e){return M.IsNever(e)||M.IsIntersect(e)||M.IsUnion(e)||M.IsUnknown(e)||M.IsAny(e)}function dn(e,t){return M.IsNever(t)?rV(e,t):M.IsIntersect(t)?TS(e,t):M.IsUnion(t)?iA(e,t):M.IsUnknown(t)?aV(e,t):M.IsAny(t)?nA(e,t):Nh("StructuralRight")}function nA(e,t){return V.True}function n_e(e,t){return M.IsIntersect(t)?TS(e,t):M.IsUnion(t)&&t.anyOf.some(r=>M.IsAny(r)||M.IsUnknown(r))?V.True:M.IsUnion(t)?V.Union:M.IsUnknown(t)||M.IsAny(t)?V.True:V.Union}function i_e(e,t){return M.IsUnknown(e)?V.False:M.IsAny(e)?V.Union:M.IsNever(e)?V.True:V.False}function o_e(e,t){return M.IsObject(t)&&IS(t)?V.True:pn(t)?dn(e,t):M.IsArray(t)?ba(Gt(e.items,t.items)):V.False}function a_e(e,t){return pn(t)?dn(e,t):M.IsAsyncIterator(t)?ba(Gt(e.items,t.items)):V.False}function s_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsBigInt(t)?V.True:V.False}function eV(e,t){return M.IsLiteralBoolean(e)||M.IsBoolean(e)?V.True:V.False}function l_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsBoolean(t)?V.True:V.False}function u_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsConstructor(t)?e.parameters.length>t.parameters.length?V.False:e.parameters.every((r,n)=>ba(Gt(t.parameters[n],r))===V.True)?ba(Gt(e.returns,t.returns)):V.False:V.False}function c_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsDate(t)?V.True:V.False}function p_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsFunction(t)?e.parameters.length>t.parameters.length?V.False:e.parameters.every((r,n)=>ba(Gt(t.parameters[n],r))===V.True)?ba(Gt(e.returns,t.returns)):V.False:V.False}function tV(e,t){return M.IsLiteral(e)&&xt.IsNumber(e.const)||M.IsNumber(e)||M.IsInteger(e)?V.True:V.False}function d_e(e,t){return M.IsInteger(t)||M.IsNumber(t)?V.True:pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):V.False}function TS(e,t){return t.allOf.every(r=>Gt(e,r)===V.True)?V.True:V.False}function f_e(e,t){return e.allOf.some(r=>Gt(r,t)===V.True)?V.True:V.False}function h_e(e,t){return pn(t)?dn(e,t):M.IsIterator(t)?ba(Gt(e.items,t.items)):V.False}function m_e(e,t){return M.IsLiteral(t)&&t.const===e.const?V.True:pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsString(t)?oV(e,t):M.IsNumber(t)?nV(e,t):M.IsInteger(t)?tV(e,t):M.IsBoolean(t)?eV(e,t):V.False}function rV(e,t){return V.False}function y_e(e,t){return V.True}function Y9(e){let[t,r]=[e,0];for(;M.IsNot(t);)t=t.not,r+=1;return r%2===0?t:_u()}function g_e(e,t){return M.IsNot(e)?Gt(Y9(e),t):M.IsNot(t)?Gt(e,Y9(t)):Nh("Invalid fallthrough for Not")}function x_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsNull(t)?V.True:V.False}function nV(e,t){return M.IsLiteralNumber(e)||M.IsNumber(e)||M.IsInteger(e)?V.True:V.False}function b_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsInteger(t)||M.IsNumber(t)?V.True:V.False}function io(e,t){return Object.getOwnPropertyNames(e.properties).length===t}function J9(e){return IS(e)}function K9(e){return io(e,0)||io(e,1)&&"description"in e.properties&&M.IsUnion(e.properties.description)&&e.properties.description.anyOf.length===2&&(M.IsString(e.properties.description.anyOf[0])&&M.IsUndefined(e.properties.description.anyOf[1])||M.IsString(e.properties.description.anyOf[1])&&M.IsUndefined(e.properties.description.anyOf[0]))}function Q4(e){return io(e,0)}function Q9(e){return io(e,0)}function v_e(e){return io(e,0)}function __e(e){return io(e,0)}function S_e(e){return IS(e)}function w_e(e){let t=ul();return io(e,0)||io(e,1)&&"length"in e.properties&&ba(Gt(e.properties.length,t))===V.True}function T_e(e){return io(e,0)}function IS(e){let t=ul();return io(e,0)||io(e,1)&&"length"in e.properties&&ba(Gt(e.properties.length,t))===V.True}function I_e(e){let t=Fc([Lc()],Lc());return io(e,0)||io(e,1)&&"then"in e.properties&&ba(Gt(e.properties.then,t))===V.True}function iV(e,t){return Gt(e,t)===V.False||M.IsOptional(e)&&!M.IsOptional(t)?V.False:V.True}function yi(e,t){return M.IsUnknown(e)?V.False:M.IsAny(e)?V.Union:M.IsNever(e)||M.IsLiteralString(e)&&J9(t)||M.IsLiteralNumber(e)&&Q4(t)||M.IsLiteralBoolean(e)&&Q9(t)||M.IsSymbol(e)&&K9(t)||M.IsBigInt(e)&&v_e(t)||M.IsString(e)&&J9(t)||M.IsSymbol(e)&&K9(t)||M.IsNumber(e)&&Q4(t)||M.IsInteger(e)&&Q4(t)||M.IsBoolean(e)&&Q9(t)||M.IsUint8Array(e)&&S_e(t)||M.IsDate(e)&&__e(t)||M.IsConstructor(e)&&T_e(t)||M.IsFunction(e)&&w_e(t)?V.True:M.IsRecord(e)&&M.IsString(tA(e))?t[ha]==="Record"?V.True:V.False:M.IsRecord(e)&&M.IsNumber(tA(e))?io(t,0)?V.True:V.False:V.False}function E_e(e,t){return pn(t)?dn(e,t):M.IsRecord(t)?va(e,t):M.IsObject(t)?(()=>{for(let r of Object.getOwnPropertyNames(t.properties)){if(!(r in e.properties)&&!M.IsOptional(t.properties[r]))return V.False;if(M.IsOptional(t.properties[r]))return V.True;if(iV(e.properties[r],t.properties[r])===V.False)return V.False}return V.True})():V.False}function C_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)&&I_e(t)?V.True:M.IsPromise(t)?ba(Gt(e.item,t.item)):V.False}function tA(e){return yu in e.patternProperties?ul():gu in e.patternProperties?ma():Nh("Unknown record key pattern")}function rA(e){return yu in e.patternProperties?e.patternProperties[yu]:gu in e.patternProperties?e.patternProperties[gu]:Nh("Unable to get record value schema")}function va(e,t){let[r,n]=[tA(t),rA(t)];return M.IsLiteralString(e)&&M.IsNumber(r)&&ba(Gt(e,n))===V.True?V.True:M.IsUint8Array(e)&&M.IsNumber(r)||M.IsString(e)&&M.IsNumber(r)||M.IsArray(e)&&M.IsNumber(r)?Gt(e,n):M.IsObject(e)?(()=>{for(let i of Object.getOwnPropertyNames(e.properties))if(iV(n,e.properties[i])===V.False)return V.False;return V.True})():V.False}function P_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?Gt(rA(e),rA(t)):V.False}function M_e(e,t){let r=M.IsRegExp(e)?ma():e,n=M.IsRegExp(t)?ma():t;return Gt(r,n)}function oV(e,t){return M.IsLiteral(e)&&xt.IsString(e.const)||M.IsString(e)?V.True:V.False}function A_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsString(t)?V.True:V.False}function D_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsSymbol(t)?V.True:V.False}function L_e(e,t){return M.IsTemplateLiteral(e)?Gt(md(e),t):M.IsTemplateLiteral(t)?Gt(e,md(t)):Nh("Invalid fallthrough for TemplateLiteral")}function F_e(e,t){return M.IsArray(t)&&e.items!==void 0&&e.items.every(r=>Gt(r,t.items)===V.True)}function k_e(e,t){return M.IsNever(e)?V.True:M.IsUnknown(e)?V.False:M.IsAny(e)?V.Union:V.False}function O_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)&&IS(t)||M.IsArray(t)&&F_e(e,t)?V.True:M.IsTuple(t)?xt.IsUndefined(e.items)&&!xt.IsUndefined(t.items)||!xt.IsUndefined(e.items)&&xt.IsUndefined(t.items)?V.False:xt.IsUndefined(e.items)&&!xt.IsUndefined(t.items)||e.items.every((r,n)=>Gt(r,t.items[n])===V.True)?V.True:V.False:V.False}function R_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsUint8Array(t)?V.True:V.False}function B_e(e,t){return pn(t)?dn(e,t):M.IsObject(t)?yi(e,t):M.IsRecord(t)?va(e,t):M.IsVoid(t)?U_e(e,t):M.IsUndefined(t)?V.True:V.False}function iA(e,t){return t.anyOf.some(r=>Gt(e,r)===V.True)?V.True:V.False}function z_e(e,t){return e.anyOf.every(r=>Gt(r,t)===V.True)?V.True:V.False}function aV(e,t){return V.True}function N_e(e,t){return M.IsNever(t)?rV(e,t):M.IsIntersect(t)?TS(e,t):M.IsUnion(t)?iA(e,t):M.IsAny(t)?nA(e,t):M.IsString(t)?oV(e,t):M.IsNumber(t)?nV(e,t):M.IsInteger(t)?tV(e,t):M.IsBoolean(t)?eV(e,t):M.IsArray(t)?i_e(e,t):M.IsTuple(t)?k_e(e,t):M.IsObject(t)?yi(e,t):M.IsUnknown(t)?V.True:V.False}function U_e(e,t){return M.IsUndefined(e)||M.IsUndefined(e)?V.True:V.False}function $_e(e,t){return M.IsIntersect(t)?TS(e,t):M.IsUnion(t)?iA(e,t):M.IsUnknown(t)?aV(e,t):M.IsAny(t)?nA(e,t):M.IsObject(t)?yi(e,t):M.IsVoid(t)?V.True:V.False}function Gt(e,t){return M.IsTemplateLiteral(e)||M.IsTemplateLiteral(t)?L_e(e,t):M.IsRegExp(e)||M.IsRegExp(t)?M_e(e,t):M.IsNot(e)||M.IsNot(t)?g_e(e,t):M.IsAny(e)?n_e(e,t):M.IsArray(e)?o_e(e,t):M.IsBigInt(e)?s_e(e,t):M.IsBoolean(e)?l_e(e,t):M.IsAsyncIterator(e)?a_e(e,t):M.IsConstructor(e)?u_e(e,t):M.IsDate(e)?c_e(e,t):M.IsFunction(e)?p_e(e,t):M.IsInteger(e)?d_e(e,t):M.IsIntersect(e)?f_e(e,t):M.IsIterator(e)?h_e(e,t):M.IsLiteral(e)?m_e(e,t):M.IsNever(e)?y_e(e,t):M.IsNull(e)?x_e(e,t):M.IsNumber(e)?b_e(e,t):M.IsObject(e)?E_e(e,t):M.IsRecord(e)?P_e(e,t):M.IsString(e)?A_e(e,t):M.IsSymbol(e)?D_e(e,t):M.IsTuple(e)?O_e(e,t):M.IsPromise(e)?C_e(e,t):M.IsUint8Array(e)?R_e(e,t):M.IsUndefined(e)?B_e(e,t):M.IsUnion(e)?z_e(e,t):M.IsUnknown(e)?N_e(e,t):M.IsVoid(e)?$_e(e,t):Nh(`Unknown left type operand '${e[N]}'`)}function Rc(e,t){return Gt(e,t)}var eA,V,oA=f(()=>{Lh();pd();fd();hd();gd();is();cd();ge();$r();q1();eA=class extends Oe{};(function(e){e[e.Union=0]="Union",e[e.True=1]="True",e[e.False=2]="False"})(V||(V={}))});function V_e(e,t,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(e))o[a]=Uh(e[a],t,r,n,hr(i));return o}function j_e(e,t,r,n,i){return V_e(e.properties,t,r,n,i)}function sV(e,t,r,n,i){let o=j_e(e,t,r,n,i);return vt(o)}var aA=f(()=>{cn();ES();Ki()});function G_e(e,t,r,n){let i=Rc(e,t);return i===V.Union?jt([r,n]):i===V.True?r:n}function Uh(e,t,r,n,i){return yr(e)?sV(e,t,r,n,i):ko(e)?G(lV(e,t,r,n,i)):G(G_e(e,t,r,n),i)}var ES=f(()=>{ke();Qr();oA();sA();aA();At()});function H_e(e,t,r,n,i){return{[e]:Uh(Pt(e),t,r,n,hr(i))}}function Z_e(e,t,r,n,i){return e.reduce((o,a)=>({...o,...H_e(a,t,r,n,i)}),{})}function W_e(e,t,r,n,i){return Z_e(e.keys,t,r,n,i)}function lV(e,t,r,n,i){let o=W_e(e,t,r,n,i);return vt(o)}var sA=f(()=>{cn();to();ES();Ki()});function X_e(e){return e.allOf.every(t=>Su(t))}function q_e(e){return e.anyOf.some(t=>Su(t))}function Y_e(e){return!Su(e.not)}function Su(e){return e[N]==="Intersect"?X_e(e):e[N]==="Union"?q_e(e):e[N]==="Not"?Y_e(e):e[N]==="Undefined"}var CS=f(()=>{ge()});var xd=f(()=>{oA();sA();aA();CS();ES()});function uV(e,t){return $h(md(e),t)}var lA=f(()=>{PS();is()});function J_e(e,t){let r=e.filter(n=>Rc(n,t)===V.False);return r.length===1?r[0]:jt(r)}function $h(e,t,r={}){return Oo(e)?G(uV(e,t),r):yr(e)?G(cV(e,t),r):G(It(e)?J_e(e.anyOf,t):Rc(e,t)!==V.False?Vt():e,r)}var PS=f(()=>{ke();Qr();mi();xd();uA();lA();At()});function K_e(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=$h(e[n],t);return r}function Q_e(e,t){return K_e(e.properties,t)}function cV(e,t){let r=Q_e(e,t);return vt(r)}var uA=f(()=>{cn();PS()});var MS=f(()=>{uA();lA();PS()});function pV(e,t){return Vh(md(e),t)}var cA=f(()=>{AS();is()});function e1e(e,t){let r=e.filter(n=>Rc(n,t)!==V.False);return r.length===1?r[0]:jt(r)}function Vh(e,t,r){return Oo(e)?G(pV(e,t),r):yr(e)?G(dV(e,t),r):G(It(e)?e1e(e.anyOf,t):Rc(e,t)!==V.False?e:Vt(),r)}var AS=f(()=>{ke();Qr();mi();xd();pA();cA();At()});function t1e(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Vh(e[n],t);return r}function r1e(e,t){return t1e(e.properties,t)}function dV(e,t){let r=r1e(e,t);return vt(r)}var pA=f(()=>{cn();AS()});var DS=f(()=>{pA();cA();AS()});function fV(e,t){return G(e.returns,t)}var hV=f(()=>{ke()});var LS=f(()=>{hV()});function mV(e){return G({[N]:"Integer",type:"integer"},e)}var yV=f(()=>{ke();ge()});var FS=f(()=>{yV()});function n1e(e,t,r){return{[e]:ss(Pt(e),t,hr(r))}}function i1e(e,t,r){return e.reduce((i,o)=>({...i,...n1e(o,t,r)}),{})}function o1e(e,t,r){return i1e(e.keys,t,r)}function gV(e,t,r){let n=o1e(e,t,r);return vt(n)}var dA=f(()=>{cn();bd();to();Ki()});function a1e(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toLowerCase(),r].join("")}function s1e(e){let[t,r]=[e.slice(0,1),e.slice(1)];return[t.toUpperCase(),r].join("")}function l1e(e){return e.toUpperCase()}function u1e(e){return e.toLowerCase()}function c1e(e,t,r){let n=kh(e.pattern);if(!dd(n))return{...e,pattern:xV(e.pattern,t)};let a=[...M0(n)].map(u=>Pt(u)),s=bV(a,t),l=jt(s);return iS([l],r)}function xV(e,t){return typeof e=="string"?t==="Uncapitalize"?a1e(e):t==="Capitalize"?s1e(e):t==="Uppercase"?l1e(e):t==="Lowercase"?u1e(e):e:e.toString()}function bV(e,t){return e.map(r=>ss(r,t))}function ss(e,t,r={}){return ko(e)?gV(e,t,r):Oo(e)?c1e(e,t,r):It(e)?jt(bV(e.anyOf,t),r):mu(e)?Pt(xV(e.const,t),r):G(e,r)}var bd=f(()=>{ke();is();dA();to();Qr();At()});function vV(e,t={}){return ss(e,"Capitalize",t)}var _V=f(()=>{bd()});function SV(e,t={}){return ss(e,"Lowercase",t)}var wV=f(()=>{bd()});function TV(e,t={}){return ss(e,"Uncapitalize",t)}var IV=f(()=>{bd()});function EV(e,t={}){return ss(e,"Uppercase",t)}var CV=f(()=>{bd()});var kS=f(()=>{_V();dA();bd();wV();IV();CV()});function PV(e,t){return G({[N]:"Not",not:e},t)}var MV=f(()=>{ke();ge()});var OS=f(()=>{MV()});function p1e(e,t,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(e))n[i]=jh(e[i],t,hr(r));return n}function d1e(e,t,r){return p1e(e.properties,t,r)}function AV(e,t,r){let n=d1e(e,t,r);return vt(n)}var fA=f(()=>{cn();RS();Ki()});function f1e(e,t){return e.map(r=>hA(r,t))}function h1e(e,t){return e.map(r=>hA(r,t))}function m1e(e,t){let{[t]:r,...n}=e;return n}function y1e(e,t){return t.reduce((r,n)=>m1e(r,n),e)}function g1e(e,t){let r=Vr(e,[mr,"$id","required","properties"]),n=y1e(e.properties,t);return Zt(n,r)}function hA(e,t){return Kr(e)?no(f1e(e.allOf,t)):It(e)?jt(h1e(e.anyOf,t)):vn(e)?g1e(e,t):Zt({})}function jh(e,t,r){if(ko(t))return DV(e,t,r);if(yr(e))return AV(e,t,r);let n=ns(t)?ro(t):t;return G({...hA(e,n),...r})}var RS=f(()=>{ke();K1();ya();Qr();Ro();cl();mA();fA();X1();At()});function x1e(e,t,r){return{[t]:jh(e,[t],hr(r))}}function b1e(e,t,r){return t.reduce((n,i)=>({...n,...x1e(e,i,r)}),{})}function v1e(e,t,r){return b1e(e,t.keys,r)}function DV(e,t,r){let n=v1e(e,t,r);return vt(n)}var mA=f(()=>{cn();RS();Ki()});var BS=f(()=>{mA();fA();RS()});function LV(e,t){return pl(e.parameters,t)}var FV=f(()=>{kc()});var zS=f(()=>{FV()});function kV(e){return e.map(t=>OV(t))}function _1e(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=eo(e[r]);return t}function S1e(e){let t=Vr(e,[mr,"$id","required","properties"]),r=_1e(e.properties);return Zt(r,t)}function OV(e){return Kr(e)?no(kV(e.allOf)):It(e)?jt(kV(e.anyOf)):vn(e)?S1e(e):Zt({})}function NS(e,t){return yr(e)?RV(e,t):G({...OV(e),...t})}var yA=f(()=>{ke();xu();Ro();ya();Qr();sl();ge();gA();At()});function w1e(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=NS(e[n],hr(t));return r}function T1e(e,t){return w1e(e.properties,t)}function RV(e,t){let r=T1e(e,t);return vt(r)}var gA=f(()=>{cn();yA();Ki()});var US=f(()=>{gA();yA()});function I1e(e,t,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(e))n[i]=Gh(e[i],t,hr(r));return n}function E1e(e,t,r){return I1e(e.properties,t,r)}function BV(e,t,r){let n=E1e(e,t,r);return vt(n)}var xA=f(()=>{cn();$S();Ki()});function C1e(e,t){return e.map(r=>bA(r,t))}function P1e(e,t){return e.map(r=>bA(r,t))}function M1e(e,t){let r={};for(let n of t)n in e&&(r[n]=e[n]);return r}function A1e(e,t){let r=Vr(e,[mr,"$id","required","properties"]),n=M1e(e.properties,t);return Zt(n,r)}function bA(e,t){return Kr(e)?no(C1e(e.allOf,t)):It(e)?jt(P1e(e.anyOf,t)):vn(e)?A1e(e,t):Zt({})}function Gh(e,t,r){if(ko(t))return zV(e,t,r);if(yr(e))return BV(e,t,r);let n=ns(t)?ro(t):t;return G({...bA(e,n),...r})}var $S=f(()=>{ke();K1();ya();Qr();Ro();cl();vA();xA();X1();At()});function D1e(e,t,r){return{[t]:Gh(e,[t],hr(r))}}function L1e(e,t,r){return t.reduce((n,i)=>({...n,...D1e(e,i,r)}),{})}function F1e(e,t,r){return L1e(e,t.keys,r)}function zV(e,t,r){let n=F1e(e,t,r);return vt(n)}var vA=f(()=>{cn();$S();Ki()});var VS=f(()=>{vA();xA();$S()});function NV(e){return ga(eo(e))}var UV=f(()=>{yd();xu()});var jS=f(()=>{UV()});function vd(e,t,r){return G({[N]:"Record",type:"object",patternProperties:{[e]:t}},r)}function _A(e,t,r){let n={};for(let i of e)n[i]=t;return Zt(n,{...r,[ha]:"Record"})}function k1e(e,t,r){return rS(e)?_A(ro(e),t,r):vd(e.pattern,t,r)}function O1e(e,t,r){return _A(ro(jt(e)),t,r)}function R1e(e,t,r){return _A([e.toString()],t,r)}function B1e(e,t,r){return vd(e.source,t,r)}function z1e(e,t,r){let n=kr(e.pattern)?gu:e.pattern;return vd(n,t,r)}function N1e(e,t,r){return vd(gu,t,r)}function U1e(e,t,r){return vd(k$,t,r)}function $1e(e,t,r){return vd(yu,t,r)}function V1e(e,t,r){return vd(yu,t,r)}function $V(e,t,r={}){return It(e)?O1e(e.anyOf,t,r):Oo(e)?k1e(e,t,r):mu(e)?R1e(e.const,t,r):ad(e)?$1e(e,t,r):sd(e)?V1e(e,t,r):v4(e)?B1e(e,t,r):v0(e)?z1e(e,t,r):m4(e)?N1e(e,t,r):Mc(e)?U1e(e,t,r):Vt(r)}var VV=f(()=>{ke();Ro();mi();Qr();is();cd();cl();ge();Ji();At()});var GS=f(()=>{VV()});function jV(e,t={}){kr(t.$id)&&(t.$id=`T${j1e++}`);let r=f0(e({[N]:"This",$ref:`${t.$id}`}));return r.$id=t.$id,G({[ha]:"Recursive",...r},t)}var j1e,GV=f(()=>{V1();ke();Ji();ge();j1e=0});var HS=f(()=>{GV()});function HV(e,t){if(sr(e))return G({[N]:"Ref",$ref:e},t);if(kr(e.$id))throw new Error("Reference target type must specify an $id");return G({[N]:"Ref",$ref:e.$id},t)}var ZV=f(()=>{ke();ge();Ji()});var ZS=f(()=>{ZV()});function WV(e,t){let r=sr(e)?new globalThis.RegExp(e):e;return G({[N]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},t)}var XV=f(()=>{ke();Ji();ge()});var WS=f(()=>{XV()});function qV(e){return e.map(t=>YV(t))}function G1e(e){let t={};for(let r of globalThis.Object.getOwnPropertyNames(e))t[r]=Vr(e[r],[Di]);return t}function H1e(e){let t=Vr(e,[mr,"$id","required","properties"]),r=G1e(e.properties);return Zt(r,t)}function YV(e){return Kr(e)?no(qV(e.allOf)):It(e)?jt(qV(e.anyOf)):vn(e)?H1e(e):Zt({})}function XS(e,t){return yr(e)?JV(e,t):G({...YV(e),...t})}var SA=f(()=>{ke();ya();Qr();Ro();ge();sl();wA();At()});function Z1e(e,t){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=XS(e[n],t);return r}function W1e(e,t){return Z1e(e.properties,t)}function JV(e,t){let r=W1e(e,t);return vt(r)}var wA=f(()=>{cn();SA()});var qS=f(()=>{wA();SA()});function X1e(e){return Kr(e)?e.allOf:It(e)?e.anyOf:rs(e)?e.items??[]:[]}function KV(e){return X1e(e)}var QV=f(()=>{At()});var YS=f(()=>{QV()});function ej(e,t){return G(e.returns,t)}var tj=f(()=>{ke()});var JS=f(()=>{tj()});var rj=f(()=>{});var nj=f(()=>{});var TA=f(()=>{rj();nj()});var ij=f(()=>{});var IA=f(()=>{ij()});function oj(e){return JSON.parse(JSON.stringify(e))}var aj=f(()=>{});var KS=f(()=>{aj()});function sj(e){return new EA(e)}var EA,CA,lj=f(()=>{ge();At();EA=class{constructor(t){this.schema=t}Decode(t){return new CA(this.schema,t)}},CA=class{constructor(t,r){this.schema=t,this.decode=r}EncodeTransform(t,r){let o={Encode:a=>r[mr].Encode(t(a)),Decode:a=>this.decode(r[mr].Decode(a))};return{...r,[mr]:o}}EncodeSchema(t,r){let n={Decode:this.decode,Encode:t};return{...r,[mr]:n}}Encode(t){return Ch(this.schema)?this.EncodeTransform(t,this.schema):this.EncodeSchema(t,this.schema)}}});var QS=f(()=>{lj()});function ew(e={}){return G({[N]:e[N]??"Unsafe"},e)}var uj=f(()=>{ke();ge()});var V0=f(()=>{uj()});function cj(e){return G({[N]:"Void",type:"void"},e)}var pj=f(()=>{ke();ge()});var tw=f(()=>{pj()});var PA={};Fr(PA,{Any:()=>Lc,Array:()=>Y1,AsyncIterator:()=>J1,Awaited:()=>A9,BigInt:()=>Rh,Boolean:()=>nS,Capitalize:()=>vV,Composite:()=>O9,Const:()=>j9,Constructor:()=>Q1,ConstructorParameters:()=>H9,Date:()=>hS,Deref:()=>as,Enum:()=>X9,Exclude:()=>$h,Extends:()=>Uh,Extract:()=>Vh,Function:()=>Fc,Index:()=>zh,InstanceType:()=>fV,Integer:()=>mV,Intersect:()=>no,Iterator:()=>lS,KeyOf:()=>dS,Literal:()=>Pt,Lowercase:()=>SV,Mapped:()=>S9,Never:()=>Vt,Not:()=>PV,Null:()=>mS,Number:()=>ul,Object:()=>Zt,Omit:()=>jh,Optional:()=>eo,Parameters:()=>LV,Partial:()=>NS,Pick:()=>Gh,Promise:()=>uS,Readonly:()=>ga,ReadonlyOptional:()=>NV,Record:()=>$V,Recursive:()=>jV,Ref:()=>HV,RegExp:()=>WV,Required:()=>XS,Rest:()=>KV,ReturnType:()=>ej,Strict:()=>oj,String:()=>ma,Symbol:()=>yS,TemplateLiteral:()=>iS,Transform:()=>sj,Tuple:()=>pl,Uint8Array:()=>xS,Uncapitalize:()=>TV,Undefined:()=>gS,Union:()=>jt,Unknown:()=>_u,Unsafe:()=>ew,Uppercase:()=>EV,Void:()=>cj});var dj=f(()=>{Lh();T0();I0();cS();Bh();A0();fS();vS();E0();_S();R0();SS();wS();MS();xd();DS();pd();cl();LS();FS();ya();kS();L0();os();to();cn();mi();OS();B0();fd();Ro();BS();xu();zS();US();VS();F0();yd();jS();GS();HS();ZS();WS();qS();YS();JS();hd();KS();z0();is();QS();kc();U0();N0();Qr();gd();V0();tw()});var v,MA=f(()=>{dj();v=PA});var Xe=f(()=>{d4();Eh();$r();q1();E4();cd();Dc();Dh();ge();Lh();T0();I0();cS();Bh();A0();fS();vS();E0();_S();R0();SS();wS();MS();xd();DS();pd();cl();LS();FS();ya();L0();kS();os();to();cn();mi();OS();B0();fd();Ro();BS();xu();zS();US();VS();F0();yd();jS();GS();HS();ZS();WS();qS();YS();JS();TA();IA();KS();hd();z0();is();QS();kc();U0();N0();Qr();gd();V0();tw();MA()});var j0,AA,Bo,_d,DA,G0=f(()=>{Xe();j0=v.Object({externalId:v.String({description:"An identifier that can be used to link this entity to data outside of the MVF."}),name:v.String({description:"The name of the entity."}),shortName:v.String({description:"A short name for the entity."}),description:v.String({description:"A description of the entity."}),icon:v.String({format:"uri",description:"A URL to an icon for the entity."})},{$id:"BaseDetails",description:"Additional information about a given entity."}),AA=v.Partial(j0,{$id:"Details",description:"Additional information about a given entity."}),Bo=v.Object({details:v.Optional(v.Ref(AA))},{$id:"WithDetails"}),_d=e=>{let t=[...e].sort(),r=v.Pick(j0,e),n=v.Omit(j0,e);return v.Object({details:v.Intersect([r,v.Partial(n)])},{$id:`WithRequiredDetails_${t.join("_")}`})},DA=[j0,AA]});var Hh,Zh,Sd,gi,rw,nw,iw,fj,LA,Wh,Xh,Zn,Li,FA,qh=f(()=>{Xe();Hh=v.Number({$id:"Longitude",minimum:-180,maximum:180,description:"A WGS 84-compatible longitude coordinate value."}),Zh=v.Number({$id:"Latitude",minimum:-90,maximum:90,description:"A WGS 84-compatible latitude coordinate value."}),Sd=v.Tuple([v.Ref(Hh),v.Ref(Zh)],{$id:"Position",minItems:2,maxItems:2,description:"A valid WGS 84 position consisting of a longitude value, followed by a latitude value."}),gi=v.Object({type:v.Literal("Point"),coordinates:v.Ref(Sd)},{$id:"Point",description:"An RFC-7946 compatible GeoJSON Point geometry."}),rw=v.Object({type:v.Literal("MultiPoint"),coordinates:v.Array(v.Ref(Sd))},{$id:"MultiPoint",description:"An RFC-7946 compatible GeoJSON MultiPoint geometry."}),nw=v.Object({type:v.Literal("LineString"),coordinates:v.Array(v.Ref(Sd),{minItems:2,description:"At least two positions are required."})},{$id:"LineString",description:"An RFC-7946 compatible GeoJSON LineString geometry."}),iw=v.Object({type:v.Literal("MultiLineString"),coordinates:v.Array(v.Array(v.Ref(Sd),{minItems:2}))},{$id:"MultiLineString",description:"An RFC-7946 compatible GeoJSON MultiLineString geometry."}),fj=v.Array(v.Ref(Sd),{$id:"LinearRing",minItems:4,description:"A linear ring is a building block of a polygon or multi-polygon."}),LA=v.Array(v.Ref(fj),{$id:"LinearRings",minItems:1,description:"A collection of linear rings, at least one of which is the exterior ring of a polygon."}),Wh=v.Object({type:v.Literal("Polygon"),coordinates:v.Ref(LA)},{$id:"Polygon",description:"An RFC-7946 compatible GeoJSON Polygon geometry."}),Xh=v.Object({type:v.Literal("MultiPolygon"),coordinates:v.Array(v.Ref(LA))},{$id:"MultiPolygon",description:"An RFC-7946 compatible GeoJSON MultiPolygon geometry."}),Zn=(e,t,r)=>v.Object({type:v.Literal("Feature"),geometry:e,properties:t},r),Li=(e,t,r)=>v.Object({type:v.Literal("FeatureCollection"),features:v.Array(e,r)},t),FA=[Hh,Zh,Sd,gi,rw,nw,iw,fj,LA,Wh,Xh]});var jr,xi,ut,kA,Bc=f(()=>{Xe();jr=(e,t)=>v.Unsafe(v.String({$id:t,pattern:`^${e}_[A-Za-z0-9-]+$`})),xi=jr("g","GeometryId"),ut=jr("f","FloorId"),kA=[xi,ut]});var ow,aw,sw,Yh,zc,hj,mj=f(()=>{er();ow=class{constructor(t){w(this,"_value");this._value=t}[Symbol.iterator](){return this}next(){if(this._value==null)return{done:!0,value:void 0};let t=this._value;return this._value=null,{done:!1,value:t}}},aw=class{constructor(t){w(this,"_tag","Some");w(this,"_value");this._value=t}get value(){return this._value}isSome(){return!0}isSomeAnd(t){return t(this.value)}isNone(){return!1}equals(t){return t.isSome()&&t.value===this.value}expect(t){return this.value}unwrap(){return this.value}unwrapOr(t){return this.value}unwrapOrElse(t){return this.value}inspect(t){return t(this.value),this}inspectNone(t){return this}map(t){return hj(t(this.value))}mapAsync(t){return t(this.value).then(r=>hj(r))}mapOr(t,r){return this.map(t).unwrapOr(r)}mapOrAsync(t,r){return this.mapAsync(t).then(n=>n.unwrapOr(r))}mapOrElse(t,r){return this.map(t).unwrapOrElse(r)}mapOrElseAsync(t,r){return this.mapAsync(t).then(n=>n.unwrapOrElse(r))}and(t){return t}andThen(t){return t(this.value)}andThenAsync(t){return t(this.value)}filter(t){return t(this.value)?this:zc()}or(t){return this}orElse(t){return this}xor(t){return t.isSome()?zc():this}toString(){return`Some(${this.value})`}okOr(t){return de(this.value)}okOrElse(t){return de(this.value)}iter(){return new ow(this.value)}[Symbol.iterator](){return this.iter()}zip(t){return t.isSome()?Yh([this.value,t.value]):zc()}zipWith(t,r){return t.isSome()?Yh(r(this.value,t.value)):zc()}get[Symbol.toStringTag](){return"Some"}},sw=class{constructor(){w(this,"_tag","None")}get value(){return null}isSome(){return!1}isSomeAnd(t){return!1}isNone(){return!0}equals(t){return t.isNone()}expect(t){throw new Error(t)}unwrap(){throw new Error("Tried to unwrap a None value!")}unwrapOr(t){return t}unwrapOrElse(t){return t()}inspect(t){return this}inspectNone(t){return t(),this}map(t){return this}mapAsync(t){return Promise.resolve(this)}mapOr(t,r){return r}mapOrAsync(t,r){return Promise.resolve(r)}mapOrElse(t,r){return r()}mapOrElseAsync(t,r){return r()}and(t){return this}andThen(t){return this}andThenAsync(t){return Promise.resolve(this)}filter(t){return this}or(t){return t}orElse(t){return t()}xor(t){return t}toString(){return"None"}okOr(t){return fe(t)}okOrElse(t){return fe(t())}iter(){return new ow(null)}[Symbol.iterator](){return this.iter()}zip(t){return this}zipWith(t,r){return this}get[Symbol.toStringTag](){return"None"}},Yh=e=>new aw(e),zc=()=>new sw,hj=e=>e instanceof aw||e instanceof sw?e:e==null?zc():Yh(e)});var lw,OA,RA,de,fe,er=f(()=>{mj();lw=class{constructor(t){w(this,"_value");this._value=t}[Symbol.iterator](){return this}next(){if(this._value==null)return{done:!0,value:void 0};let t=this._value;return this._value=null,{done:!1,value:t}}},OA=class{constructor(t){w(this,"_tag","Ok");w(this,"_value");this._value=t}get value(){return this._value}get error(){return null}isOk(){return!0}isOkAnd(t){return t(this.value)}isErr(){return!1}isErrAnd(t){return!1}ok(){return Yh(this.value)}err(){return zc()}expect(t){return this.value}expectErr(t){throw new Error(t)}unwrap(){return this.value}unwrapOr(t){return this.value}unwrapOrElse(t){return this.value}inspect(t){return t(this.value),this}inspectErr(){return this}map(t){return de(t(this.value))}async mapAsync(t){return t(this.value).then(de)}mapOr(t,r){return t(this.value)}async mapOrAsync(t,r){return t(this.value)}mapOrElse(t,r){return t(this.value)}async mapOrElseAsync(t,r){return t(this.value)}mapErr(t){return this}iter(){return new lw(this.value)}[Symbol.iterator](){return this.iter()}and(t){return t}andThen(t){return t(this.value)}or(t){return this}orElse(t){return this}async andThenAsync(t){return t(this.value)}toString(){return`Ok(${this.value})`}get[Symbol.toStringTag](){return"Ok"}},RA=class e{constructor(t){w(this,"_tag","Err");w(this,"_error");this._error=t}get value(){return null}get error(){return this._error}isOk(){return!1}isOkAnd(t){return!1}isErr(){return!0}isErrAnd(t){return t(this.error)}ok(){return zc()}err(){return Yh(this.error)}expect(t){throw new Error(t)}expectErr(t){return this.error}unwrap(){throw this.error}unwrapOr(t){return t}unwrapOrElse(t){return t()}inspect(){return this}inspectErr(t){return t(this.error),this}map(t){return this}iter(){return new lw(null)}[Symbol.iterator](){return this.iter()}async mapAsync(t){return this}mapOr(t,r){return r}async mapOrAsync(t,r){return r}mapOrElse(t,r){return r()}async mapOrElseAsync(t,r){return r()}mapErr(t){return new e(t(this.error))}and(t){return this}andThen(t){return this}async andThenAsync(t){return this}or(t){return t}orElse(t){return t(this.error)}toString(){return`Err(${this.error})`}get[Symbol.toStringTag](){return"Err"}},de=e=>new OA(e),fe=e=>new RA(e)});var oo,Jh=f(()=>{(function(e){e.GeometryMissingError="GeometryMissingError",e.FloorMissingError="FloorMissingError",e.UnknownFloorError="UnknownFloorError",e.UnknownGeometryError="UnknownGeometryError",e.DuplicateIdError="DuplicateIdError"})(oo||(oo={}))});var BA,H0,uw,yj=f(()=>{Dc();V0();ge();$r();BA=class extends Oe{constructor(t){super(`Duplicate type kind '${t}' detected`)}},H0=class extends Oe{constructor(t){super(`Duplicate string format '${t}' detected`)}};(function(e){function t(n,i){if(On.Has(n))throw new BA(n);return On.Set(n,i),(o={})=>ew({...o,[N]:n})}e.Type=t;function r(n,i){if(Qi.Has(n))throw new H0(n);return Qi.Set(n,i),n}e.Format=r})(uw||(uw={}))});var wd=f(()=>{h0();yj()});function q1e(e){switch(e.errorType){case U.ArrayContains:return"Expected array to contain at least one matching value";case U.ArrayMaxContains:return`Expected array to contain no more than ${e.schema.maxContains} matching values`;case U.ArrayMinContains:return`Expected array to contain at least ${e.schema.minContains} matching values`;case U.ArrayMaxItems:return`Expected array length to be less or equal to ${e.schema.maxItems}`;case U.ArrayMinItems:return`Expected array length to be greater or equal to ${e.schema.minItems}`;case U.ArrayUniqueItems:return"Expected array elements to be unique";case U.Array:return"Expected array";case U.AsyncIterator:return"Expected AsyncIterator";case U.BigIntExclusiveMaximum:return`Expected bigint to be less than ${e.schema.exclusiveMaximum}`;case U.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${e.schema.exclusiveMinimum}`;case U.BigIntMaximum:return`Expected bigint to be less or equal to ${e.schema.maximum}`;case U.BigIntMinimum:return`Expected bigint to be greater or equal to ${e.schema.minimum}`;case U.BigIntMultipleOf:return`Expected bigint to be a multiple of ${e.schema.multipleOf}`;case U.BigInt:return"Expected bigint";case U.Boolean:return"Expected boolean";case U.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${e.schema.exclusiveMinimumTimestamp}`;case U.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${e.schema.exclusiveMaximumTimestamp}`;case U.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${e.schema.minimumTimestamp}`;case U.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${e.schema.maximumTimestamp}`;case U.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${e.schema.multipleOfTimestamp}`;case U.Date:return"Expected Date";case U.Function:return"Expected function";case U.IntegerExclusiveMaximum:return`Expected integer to be less than ${e.schema.exclusiveMaximum}`;case U.IntegerExclusiveMinimum:return`Expected integer to be greater than ${e.schema.exclusiveMinimum}`;case U.IntegerMaximum:return`Expected integer to be less or equal to ${e.schema.maximum}`;case U.IntegerMinimum:return`Expected integer to be greater or equal to ${e.schema.minimum}`;case U.IntegerMultipleOf:return`Expected integer to be a multiple of ${e.schema.multipleOf}`;case U.Integer:return"Expected integer";case U.IntersectUnevaluatedProperties:return"Unexpected property";case U.Intersect:return"Expected all values to match";case U.Iterator:return"Expected Iterator";case U.Literal:return`Expected ${typeof e.schema.const=="string"?`'${e.schema.const}'`:e.schema.const}`;case U.Never:return"Never";case U.Not:return"Value should not match";case U.Null:return"Expected null";case U.NumberExclusiveMaximum:return`Expected number to be less than ${e.schema.exclusiveMaximum}`;case U.NumberExclusiveMinimum:return`Expected number to be greater than ${e.schema.exclusiveMinimum}`;case U.NumberMaximum:return`Expected number to be less or equal to ${e.schema.maximum}`;case U.NumberMinimum:return`Expected number to be greater or equal to ${e.schema.minimum}`;case U.NumberMultipleOf:return`Expected number to be a multiple of ${e.schema.multipleOf}`;case U.Number:return"Expected number";case U.Object:return"Expected object";case U.ObjectAdditionalProperties:return"Unexpected property";case U.ObjectMaxProperties:return`Expected object to have no more than ${e.schema.maxProperties} properties`;case U.ObjectMinProperties:return`Expected object to have at least ${e.schema.minProperties} properties`;case U.ObjectRequiredProperty:return"Expected required property";case U.Promise:return"Expected Promise";case U.RegExp:return"Expected string to match regular expression";case U.StringFormatUnknown:return`Unknown format '${e.schema.format}'`;case U.StringFormat:return`Expected string to match '${e.schema.format}' format`;case U.StringMaxLength:return`Expected string length less or equal to ${e.schema.maxLength}`;case U.StringMinLength:return`Expected string length greater or equal to ${e.schema.minLength}`;case U.StringPattern:return`Expected string to match '${e.schema.pattern}'`;case U.String:return"Expected string";case U.Symbol:return"Expected symbol";case U.TupleLength:return`Expected tuple to have ${e.schema.maxItems||0} elements`;case U.Tuple:return"Expected tuple";case U.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${e.schema.maxByteLength}`;case U.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${e.schema.minByteLength}`;case U.Uint8Array:return"Expected Uint8Array";case U.Undefined:return"Expected undefined";case U.Union:return"Expected union value";case U.Void:return"Expected void";case U.Kind:return`Expected kind '${e.schema[N]}'`;default:return"Unknown error type"}}function gj(){return Y1e}var Y1e,zA=f(()=>{ge();NA();Y1e=q1e});function J1e(e,t){let r=t.find(n=>n.$id===e.$ref);if(r===void 0)throw new UA(e);return _t(r,t)}function _a(e,t){return!pt(e.$id)||t.some(r=>r.$id===e.$id)||t.push(e),t}function _t(e,t){return e[N]==="This"||e[N]==="Ref"?J1e(e,t):e}var UA,xj=f(()=>{$r();ge();W1();UA=class extends Oe{constructor(t){super(`Unable to dereference schema with $id '${t.$ref}'`),this.schema=t}}});var Sa=f(()=>{xj()});function*tSe(e){let t=e===0?1:Math.ceil(Math.floor(Math.log2(e)+1)/8);for(let r=0;r<t;r++)yield e>>8*(t-1-r)&255}function rSe(e){bi(zo.Array);for(let t of e)Qh(t)}function nSe(e){bi(zo.Boolean),bi(e?1:0)}function iSe(e){bi(zo.BigInt),vj.setBigInt64(0,e);for(let t of _j)bi(t)}function oSe(e){bi(zo.Date),Qh(e.getTime())}function aSe(e){bi(zo.Null)}function sSe(e){bi(zo.Number),vj.setFloat64(0,e);for(let t of _j)bi(t)}function lSe(e){bi(zo.Object);for(let t of globalThis.Object.getOwnPropertyNames(e).sort())Qh(t),Qh(e[t])}function uSe(e){bi(zo.String);for(let t=0;t<e.length;t++)for(let r of tSe(e.charCodeAt(t)))bi(r)}function cSe(e){bi(zo.Symbol),Qh(e.description)}function pSe(e){bi(zo.Uint8Array);for(let t=0;t<e.length;t++)bi(e[t])}function dSe(e){return bi(zo.Undefined)}function Qh(e){if(Ne(e))return rSe(e);if(ol(e))return nSe(e);if(Gn(e))return iSe(e);if(Ai(e))return oSe(e);if(pu(e))return aSe(e);if(Ce(e))return sSe(e);if(je(e))return lSe(e);if(pt(e))return uSe(e);if(du(e))return cSe(e);if(Ih(e))return pSe(e);if(Or(e))return dSe(e);throw new $A(e)}function bi(e){Kh=Kh^eSe[e],Kh=Kh*K1e%Q1e}function Nc(e){return Kh=BigInt("14695981039346656037"),Qh(e),Kh}var $A,zo,Kh,K1e,Q1e,eSe,bj,vj,_j,Sj=f(()=>{bn();$r();$A=class extends Oe{constructor(t){super("Unable to hash value"),this.value=t}};(function(e){e[e.Undefined=0]="Undefined",e[e.Null=1]="Null",e[e.Boolean=2]="Boolean",e[e.Number=3]="Number",e[e.String=4]="String",e[e.Object=5]="Object",e[e.Array=6]="Array",e[e.Date=7]="Date",e[e.Uint8Array=8]="Uint8Array",e[e.Symbol=9]="Symbol",e[e.BigInt=10]="BigInt"})(zo||(zo={}));Kh=BigInt("14695981039346656037"),[K1e,Q1e]=[BigInt("1099511628211"),BigInt("18446744073709551616")],eSe=Array.from({length:256}).map((e,t)=>BigInt(t)),bj=new Float64Array(1),vj=new DataView(bj.buffer),_j=new Uint8Array(bj.buffer)});var em=f(()=>{Sj()});function fSe(e){return e[N]==="Any"||e[N]==="Unknown"}function nt(e){return e!==void 0}function hSe(e,t,r){return!0}function mSe(e,t,r){if(!Ne(r)||nt(e.minItems)&&!(r.length>=e.minItems)||nt(e.maxItems)&&!(r.length<=e.maxItems)||!r.every(o=>Wn(e.items,t,o))||e.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let s=Nc(a);if(o.has(s))return!1;o.add(s)}return!0}())return!1;if(!(nt(e.contains)||Ce(e.minContains)||Ce(e.maxContains)))return!0;let n=nt(e.contains)?e.contains:Vt(),i=r.reduce((o,a)=>Wn(n,t,a)?o+1:o,0);return!(i===0||Ce(e.minContains)&&i<e.minContains||Ce(e.maxContains)&&i>e.maxContains)}function ySe(e,t,r){return j1(r)}function gSe(e,t,r){return!(!Gn(r)||nt(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||nt(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||nt(e.maximum)&&!(r<=e.maximum)||nt(e.minimum)&&!(r>=e.minimum)||nt(e.multipleOf)&&r%e.multipleOf!==BigInt(0))}function xSe(e,t,r){return ol(r)}function bSe(e,t,r){return Wn(e.returns,t,r.prototype)}function vSe(e,t,r){return!(!Ai(r)||nt(e.exclusiveMaximumTimestamp)&&!(r.getTime()<e.exclusiveMaximumTimestamp)||nt(e.exclusiveMinimumTimestamp)&&!(r.getTime()>e.exclusiveMinimumTimestamp)||nt(e.maximumTimestamp)&&!(r.getTime()<=e.maximumTimestamp)||nt(e.minimumTimestamp)&&!(r.getTime()>=e.minimumTimestamp)||nt(e.multipleOfTimestamp)&&r.getTime()%e.multipleOfTimestamp!==0)}function _Se(e,t,r){return Pc(r)}function SSe(e,t,r){return!(!Z1(r)||nt(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||nt(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||nt(e.maximum)&&!(r<=e.maximum)||nt(e.minimum)&&!(r>=e.minimum)||nt(e.multipleOf)&&r%e.multipleOf!==0)}function wSe(e,t,r){let n=e.allOf.every(i=>Wn(i,t,r));if(e.unevaluatedProperties===!1){let i=new RegExp(vu(e)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(dt(e.unevaluatedProperties)){let i=new RegExp(vu(e)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Wn(e.unevaluatedProperties,t,r[a]));return n&&o}else return n}function TSe(e,t,r){return G1(r)}function ISe(e,t,r){return r===e.const}function ESe(e,t,r){return!1}function CSe(e,t,r){return!Wn(e.not,t,r)}function PSe(e,t,r){return pu(r)}function MSe(e,t,r){return!(!kt.IsNumberLike(r)||nt(e.exclusiveMaximum)&&!(r<e.exclusiveMaximum)||nt(e.exclusiveMinimum)&&!(r>e.exclusiveMinimum)||nt(e.minimum)&&!(r>=e.minimum)||nt(e.maximum)&&!(r<=e.maximum)||nt(e.multipleOf)&&r%e.multipleOf!==0)}function ASe(e,t,r){if(!kt.IsObjectLike(r)||nt(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)||nt(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties))return!1;let n=Object.getOwnPropertyNames(e.properties);for(let i of n){let o=e.properties[i];if(e.required&&e.required.includes(i)){if(!Wn(o,t,r[i])||(Su(o)||fSe(o))&&!(i in r))return!1}else if(kt.IsExactOptionalProperty(r,i)&&!Wn(o,t,r[i]))return!1}if(e.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return e.required&&e.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof e.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Wn(e.additionalProperties,t,r[o])):!0}function DSe(e,t,r){return H1(r)}function LSe(e,t,r){if(!kt.IsRecordLike(r)||nt(e.minProperties)&&!(Object.getOwnPropertyNames(r).length>=e.minProperties)||nt(e.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=e.maxProperties))return!1;let[n,i]=Object.entries(e.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,c])=>o.test(u)?Wn(i,t,c):!0),s=typeof e.additionalProperties=="object"?Object.entries(r).every(([u,c])=>o.test(u)?!0:Wn(e.additionalProperties,t,c)):!0,l=e.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&s&&l}function FSe(e,t,r){return Wn(_t(e,t),t,r)}function kSe(e,t,r){let n=new RegExp(e.source,e.flags);return nt(e.minLength)&&!(r.length>=e.minLength)||nt(e.maxLength)&&!(r.length<=e.maxLength)?!1:n.test(r)}function OSe(e,t,r){return!pt(r)||nt(e.minLength)&&!(r.length>=e.minLength)||nt(e.maxLength)&&!(r.length<=e.maxLength)||nt(e.pattern)&&!new RegExp(e.pattern).test(r)?!1:nt(e.format)?Qi.Has(e.format)?Qi.Get(e.format)(r):!1:!0}function RSe(e,t,r){return du(r)}function BSe(e,t,r){return pt(r)&&new RegExp(e.pattern).test(r)}function zSe(e,t,r){return Wn(_t(e,t),t,r)}function NSe(e,t,r){if(!Ne(r)||e.items===void 0&&r.length!==0||r.length!==e.maxItems)return!1;if(!e.items)return!0;for(let n=0;n<e.items.length;n++)if(!Wn(e.items[n],t,r[n]))return!1;return!0}function USe(e,t,r){return Or(r)}function $Se(e,t,r){return e.anyOf.some(n=>Wn(n,t,r))}function VSe(e,t,r){return!(!Ih(r)||nt(e.maxByteLength)&&!(r.length<=e.maxByteLength)||nt(e.minByteLength)&&!(r.length>=e.minByteLength))}function jSe(e,t,r){return!0}function GSe(e,t,r){return kt.IsVoidLike(r)}function HSe(e,t,r){return On.Has(e[N])?On.Get(e[N])(e,r):!1}function Wn(e,t,r){let n=nt(e.$id)?[...t,e]:t,i=e;switch(i[N]){case"Any":return hSe(i,n,r);case"Array":return mSe(i,n,r);case"AsyncIterator":return ySe(i,n,r);case"BigInt":return gSe(i,n,r);case"Boolean":return xSe(i,n,r);case"Constructor":return bSe(i,n,r);case"Date":return vSe(i,n,r);case"Function":return _Se(i,n,r);case"Integer":return SSe(i,n,r);case"Intersect":return wSe(i,n,r);case"Iterator":return TSe(i,n,r);case"Literal":return ISe(i,n,r);case"Never":return ESe(i,n,r);case"Not":return CSe(i,n,r);case"Null":return PSe(i,n,r);case"Number":return MSe(i,n,r);case"Object":return ASe(i,n,r);case"Promise":return DSe(i,n,r);case"Record":return LSe(i,n,r);case"Ref":return FSe(i,n,r);case"RegExp":return kSe(i,n,r);case"String":return OSe(i,n,r);case"Symbol":return RSe(i,n,r);case"TemplateLiteral":return BSe(i,n,r);case"This":return zSe(i,n,r);case"Tuple":return NSe(i,n,r);case"Undefined":return USe(i,n,r);case"Union":return $Se(i,n,r);case"Uint8Array":return VSe(i,n,r);case"Unknown":return jSe(i,n,r);case"Void":return GSe(i,n,r);default:if(!On.Has(i[N]))throw new VA(i);return HSe(i,n,r)}}function Qe(...e){return e.length===3?Wn(e[0],e[1],e[2]):Wn(e[0],[],e[1])}var VA,jA=f(()=>{wd();Sa();em();ge();os();xd();Dc();$r();mi();bn();ud();VA=class extends Oe{constructor(t){super("Unknown type"),this.schema=t}}});var No=f(()=>{jA()});function wu(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function it(e){return e!==void 0}function ce(e,t,r,n,i=[]){return{type:e,schema:t,path:r,value:n,message:gj()({errorType:e,path:r,schema:t,value:n,errors:i}),errors:i}}function*ZSe(e,t,r,n){}function*WSe(e,t,r,n){if(!Ne(n))return yield ce(U.Array,e,r,n);it(e.minItems)&&!(n.length>=e.minItems)&&(yield ce(U.ArrayMinItems,e,r,n)),it(e.maxItems)&&!(n.length<=e.maxItems)&&(yield ce(U.ArrayMaxItems,e,r,n));for(let a=0;a<n.length;a++)yield*Xn(e.items,t,`${r}/${a}`,n[a]);if(e.uniqueItems===!0&&!function(){let a=new Set;for(let s of n){let l=Nc(s);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield ce(U.ArrayUniqueItems,e,r,n)),!(it(e.contains)||it(e.minContains)||it(e.maxContains)))return;let i=it(e.contains)?e.contains:Vt(),o=n.reduce((a,s,l)=>Xn(i,t,`${r}${l}`,s).next().done===!0?a+1:a,0);o===0&&(yield ce(U.ArrayContains,e,r,n)),Ce(e.minContains)&&o<e.minContains&&(yield ce(U.ArrayMinContains,e,r,n)),Ce(e.maxContains)&&o>e.maxContains&&(yield ce(U.ArrayMaxContains,e,r,n))}function*XSe(e,t,r,n){j1(n)||(yield ce(U.AsyncIterator,e,r,n))}function*qSe(e,t,r,n){if(!Gn(n))return yield ce(U.BigInt,e,r,n);it(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield ce(U.BigIntExclusiveMaximum,e,r,n)),it(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield ce(U.BigIntExclusiveMinimum,e,r,n)),it(e.maximum)&&!(n<=e.maximum)&&(yield ce(U.BigIntMaximum,e,r,n)),it(e.minimum)&&!(n>=e.minimum)&&(yield ce(U.BigIntMinimum,e,r,n)),it(e.multipleOf)&&n%e.multipleOf!==BigInt(0)&&(yield ce(U.BigIntMultipleOf,e,r,n))}function*YSe(e,t,r,n){ol(n)||(yield ce(U.Boolean,e,r,n))}function*JSe(e,t,r,n){yield*Xn(e.returns,t,r,n.prototype)}function*KSe(e,t,r,n){if(!Ai(n))return yield ce(U.Date,e,r,n);it(e.exclusiveMaximumTimestamp)&&!(n.getTime()<e.exclusiveMaximumTimestamp)&&(yield ce(U.DateExclusiveMaximumTimestamp,e,r,n)),it(e.exclusiveMinimumTimestamp)&&!(n.getTime()>e.exclusiveMinimumTimestamp)&&(yield ce(U.DateExclusiveMinimumTimestamp,e,r,n)),it(e.maximumTimestamp)&&!(n.getTime()<=e.maximumTimestamp)&&(yield ce(U.DateMaximumTimestamp,e,r,n)),it(e.minimumTimestamp)&&!(n.getTime()>=e.minimumTimestamp)&&(yield ce(U.DateMinimumTimestamp,e,r,n)),it(e.multipleOfTimestamp)&&n.getTime()%e.multipleOfTimestamp!==0&&(yield ce(U.DateMultipleOfTimestamp,e,r,n))}function*QSe(e,t,r,n){Pc(n)||(yield ce(U.Function,e,r,n))}function*ewe(e,t,r,n){if(!Z1(n))return yield ce(U.Integer,e,r,n);it(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield ce(U.IntegerExclusiveMaximum,e,r,n)),it(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield ce(U.IntegerExclusiveMinimum,e,r,n)),it(e.maximum)&&!(n<=e.maximum)&&(yield ce(U.IntegerMaximum,e,r,n)),it(e.minimum)&&!(n>=e.minimum)&&(yield ce(U.IntegerMinimum,e,r,n)),it(e.multipleOf)&&n%e.multipleOf!==0&&(yield ce(U.IntegerMultipleOf,e,r,n))}function*twe(e,t,r,n){let i=!1;for(let o of e.allOf)for(let a of Xn(o,t,r,n))i=!0,yield a;if(i)return yield ce(U.Intersect,e,r,n);if(e.unevaluatedProperties===!1){let o=new RegExp(vu(e));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield ce(U.IntersectUnevaluatedProperties,e,`${r}/${a}`,n))}if(typeof e.unevaluatedProperties=="object"){let o=new RegExp(vu(e));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let s=Xn(e.unevaluatedProperties,t,`${r}/${a}`,n[a]).next();s.done||(yield s.value)}}}function*rwe(e,t,r,n){G1(n)||(yield ce(U.Iterator,e,r,n))}function*nwe(e,t,r,n){n!==e.const&&(yield ce(U.Literal,e,r,n))}function*iwe(e,t,r,n){yield ce(U.Never,e,r,n)}function*owe(e,t,r,n){Xn(e.not,t,r,n).next().done===!0&&(yield ce(U.Not,e,r,n))}function*awe(e,t,r,n){pu(n)||(yield ce(U.Null,e,r,n))}function*swe(e,t,r,n){if(!kt.IsNumberLike(n))return yield ce(U.Number,e,r,n);it(e.exclusiveMaximum)&&!(n<e.exclusiveMaximum)&&(yield ce(U.NumberExclusiveMaximum,e,r,n)),it(e.exclusiveMinimum)&&!(n>e.exclusiveMinimum)&&(yield ce(U.NumberExclusiveMinimum,e,r,n)),it(e.maximum)&&!(n<=e.maximum)&&(yield ce(U.NumberMaximum,e,r,n)),it(e.minimum)&&!(n>=e.minimum)&&(yield ce(U.NumberMinimum,e,r,n)),it(e.multipleOf)&&n%e.multipleOf!==0&&(yield ce(U.NumberMultipleOf,e,r,n))}function*lwe(e,t,r,n){if(!kt.IsObjectLike(n))return yield ce(U.Object,e,r,n);it(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)&&(yield ce(U.ObjectMinProperties,e,r,n)),it(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties)&&(yield ce(U.ObjectMaxProperties,e,r,n));let i=Array.isArray(e.required)?e.required:[],o=Object.getOwnPropertyNames(e.properties),a=Object.getOwnPropertyNames(n);for(let s of i)a.includes(s)||(yield ce(U.ObjectRequiredProperty,e.properties[s],`${r}/${wu(s)}`,void 0));if(e.additionalProperties===!1)for(let s of a)o.includes(s)||(yield ce(U.ObjectAdditionalProperties,e,`${r}/${wu(s)}`,n[s]));if(typeof e.additionalProperties=="object")for(let s of a)o.includes(s)||(yield*Xn(e.additionalProperties,t,`${r}/${wu(s)}`,n[s]));for(let s of o){let l=e.properties[s];e.required&&e.required.includes(s)?(yield*Xn(l,t,`${r}/${wu(s)}`,n[s]),Su(e)&&!(s in n)&&(yield ce(U.ObjectRequiredProperty,l,`${r}/${wu(s)}`,void 0))):kt.IsExactOptionalProperty(n,s)&&(yield*Xn(l,t,`${r}/${wu(s)}`,n[s]))}}function*uwe(e,t,r,n){H1(n)||(yield ce(U.Promise,e,r,n))}function*cwe(e,t,r,n){if(!kt.IsRecordLike(n))return yield ce(U.Object,e,r,n);it(e.minProperties)&&!(Object.getOwnPropertyNames(n).length>=e.minProperties)&&(yield ce(U.ObjectMinProperties,e,r,n)),it(e.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=e.maxProperties)&&(yield ce(U.ObjectMaxProperties,e,r,n));let[i,o]=Object.entries(e.patternProperties)[0],a=new RegExp(i);for(let[s,l]of Object.entries(n))a.test(s)&&(yield*Xn(o,t,`${r}/${wu(s)}`,l));if(typeof e.additionalProperties=="object")for(let[s,l]of Object.entries(n))a.test(s)||(yield*Xn(e.additionalProperties,t,`${r}/${wu(s)}`,l));if(e.additionalProperties===!1){for(let[s,l]of Object.entries(n))if(!a.test(s))return yield ce(U.ObjectAdditionalProperties,e,`${r}/${wu(s)}`,l)}}function*pwe(e,t,r,n){yield*Xn(_t(e,t),t,r,n)}function*dwe(e,t,r,n){if(!pt(n))return yield ce(U.String,e,r,n);if(it(e.minLength)&&!(n.length>=e.minLength)&&(yield ce(U.StringMinLength,e,r,n)),it(e.maxLength)&&!(n.length<=e.maxLength)&&(yield ce(U.StringMaxLength,e,r,n)),!new RegExp(e.source,e.flags).test(n))return yield ce(U.RegExp,e,r,n)}function*fwe(e,t,r,n){if(!pt(n))return yield ce(U.String,e,r,n);it(e.minLength)&&!(n.length>=e.minLength)&&(yield ce(U.StringMinLength,e,r,n)),it(e.maxLength)&&!(n.length<=e.maxLength)&&(yield ce(U.StringMaxLength,e,r,n)),pt(e.pattern)&&(new RegExp(e.pattern).test(n)||(yield ce(U.StringPattern,e,r,n))),pt(e.format)&&(Qi.Has(e.format)?Qi.Get(e.format)(n)||(yield ce(U.StringFormat,e,r,n)):yield ce(U.StringFormatUnknown,e,r,n))}function*hwe(e,t,r,n){du(n)||(yield ce(U.Symbol,e,r,n))}function*mwe(e,t,r,n){if(!pt(n))return yield ce(U.String,e,r,n);new RegExp(e.pattern).test(n)||(yield ce(U.StringPattern,e,r,n))}function*ywe(e,t,r,n){yield*Xn(_t(e,t),t,r,n)}function*gwe(e,t,r,n){if(!Ne(n))return yield ce(U.Tuple,e,r,n);if(e.items===void 0&&n.length!==0)return yield ce(U.TupleLength,e,r,n);if(n.length!==e.maxItems)return yield ce(U.TupleLength,e,r,n);if(e.items)for(let i=0;i<e.items.length;i++)yield*Xn(e.items[i],t,`${r}/${i}`,n[i])}function*xwe(e,t,r,n){Or(n)||(yield ce(U.Undefined,e,r,n))}function*bwe(e,t,r,n){if(Qe(e,t,n))return;let i=e.anyOf.map(o=>new wa(Xn(o,t,r,n)));yield ce(U.Union,e,r,n,i)}function*vwe(e,t,r,n){if(!Ih(n))return yield ce(U.Uint8Array,e,r,n);it(e.maxByteLength)&&!(n.length<=e.maxByteLength)&&(yield ce(U.Uint8ArrayMaxByteLength,e,r,n)),it(e.minByteLength)&&!(n.length>=e.minByteLength)&&(yield ce(U.Uint8ArrayMinByteLength,e,r,n))}function*_we(e,t,r,n){}function*Swe(e,t,r,n){kt.IsVoidLike(n)||(yield ce(U.Void,e,r,n))}function*wwe(e,t,r,n){On.Get(e[N])(e,n)||(yield ce(U.Kind,e,r,n))}function*Xn(e,t,r,n){let i=it(e.$id)?[...t,e]:t,o=e;switch(o[N]){case"Any":return yield*ZSe(o,i,r,n);case"Array":return yield*WSe(o,i,r,n);case"AsyncIterator":return yield*XSe(o,i,r,n);case"BigInt":return yield*qSe(o,i,r,n);case"Boolean":return yield*YSe(o,i,r,n);case"Constructor":return yield*JSe(o,i,r,n);case"Date":return yield*KSe(o,i,r,n);case"Function":return yield*QSe(o,i,r,n);case"Integer":return yield*ewe(o,i,r,n);case"Intersect":return yield*twe(o,i,r,n);case"Iterator":return yield*rwe(o,i,r,n);case"Literal":return yield*nwe(o,i,r,n);case"Never":return yield*iwe(o,i,r,n);case"Not":return yield*owe(o,i,r,n);case"Null":return yield*awe(o,i,r,n);case"Number":return yield*swe(o,i,r,n);case"Object":return yield*lwe(o,i,r,n);case"Promise":return yield*uwe(o,i,r,n);case"Record":return yield*cwe(o,i,r,n);case"Ref":return yield*pwe(o,i,r,n);case"RegExp":return yield*dwe(o,i,r,n);case"String":return yield*fwe(o,i,r,n);case"Symbol":return yield*hwe(o,i,r,n);case"TemplateLiteral":return yield*mwe(o,i,r,n);case"This":return yield*ywe(o,i,r,n);case"Tuple":return yield*gwe(o,i,r,n);case"Undefined":return yield*xwe(o,i,r,n);case"Union":return yield*bwe(o,i,r,n);case"Uint8Array":return yield*vwe(o,i,r,n);case"Unknown":return yield*_we(o,i,r,n);case"Void":return yield*Swe(o,i,r,n);default:if(!On.Has(o[N]))throw new GA(e);return yield*wwe(o,i,r,n)}}function dl(...e){let t=e.length===3?Xn(e[0],e[1],"",e[2]):Xn(e[0],[],"",e[1]);return new wa(t)}var U,GA,wa,NA=f(()=>{wd();os();Dc();CS();zA();$r();Sa();em();No();ge();mi();bn();(function(e){e[e.ArrayContains=0]="ArrayContains",e[e.ArrayMaxContains=1]="ArrayMaxContains",e[e.ArrayMaxItems=2]="ArrayMaxItems",e[e.ArrayMinContains=3]="ArrayMinContains",e[e.ArrayMinItems=4]="ArrayMinItems",e[e.ArrayUniqueItems=5]="ArrayUniqueItems",e[e.Array=6]="Array",e[e.AsyncIterator=7]="AsyncIterator",e[e.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",e[e.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",e[e.BigIntMaximum=10]="BigIntMaximum",e[e.BigIntMinimum=11]="BigIntMinimum",e[e.BigIntMultipleOf=12]="BigIntMultipleOf",e[e.BigInt=13]="BigInt",e[e.Boolean=14]="Boolean",e[e.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",e[e.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",e[e.DateMaximumTimestamp=17]="DateMaximumTimestamp",e[e.DateMinimumTimestamp=18]="DateMinimumTimestamp",e[e.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",e[e.Date=20]="Date",e[e.Function=21]="Function",e[e.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",e[e.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",e[e.IntegerMaximum=24]="IntegerMaximum",e[e.IntegerMinimum=25]="IntegerMinimum",e[e.IntegerMultipleOf=26]="IntegerMultipleOf",e[e.Integer=27]="Integer",e[e.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",e[e.Intersect=29]="Intersect",e[e.Iterator=30]="Iterator",e[e.Kind=31]="Kind",e[e.Literal=32]="Literal",e[e.Never=33]="Never",e[e.Not=34]="Not",e[e.Null=35]="Null",e[e.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",e[e.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",e[e.NumberMaximum=38]="NumberMaximum",e[e.NumberMinimum=39]="NumberMinimum",e[e.NumberMultipleOf=40]="NumberMultipleOf",e[e.Number=41]="Number",e[e.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",e[e.ObjectMaxProperties=43]="ObjectMaxProperties",e[e.ObjectMinProperties=44]="ObjectMinProperties",e[e.ObjectRequiredProperty=45]="ObjectRequiredProperty",e[e.Object=46]="Object",e[e.Promise=47]="Promise",e[e.RegExp=48]="RegExp",e[e.StringFormatUnknown=49]="StringFormatUnknown",e[e.StringFormat=50]="StringFormat",e[e.StringMaxLength=51]="StringMaxLength",e[e.StringMinLength=52]="StringMinLength",e[e.StringPattern=53]="StringPattern",e[e.String=54]="String",e[e.Symbol=55]="Symbol",e[e.TupleLength=56]="TupleLength",e[e.Tuple=57]="Tuple",e[e.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",e[e.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",e[e.Uint8Array=60]="Uint8Array",e[e.Undefined=61]="Undefined",e[e.Union=62]="Union",e[e.Void=63]="Void"})(U||(U={}));GA=class extends Oe{constructor(t){super("Unknown type"),this.schema=t}};wa=class{constructor(t){this.iterator=t}[Symbol.iterator](){return this.iterator}First(){let t=this.iterator.next();return t.done?void 0:t.value}}});var Uc=f(()=>{NA();zA()});function wj(e,t,r){if(!Qe(e,t,r))throw new ZA(dl(e,t,r))}function pw(...e){return e.length===3?wj(e[0],e[1],e[2]):wj(e[0],[],e[1])}var Twe,Tj,HA,cw,Ij,ZA,WA=f(()=>{Uc();h4();jA();Twe=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},Tj=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ZA=class extends Oe{constructor(t){let r=t.First();super(r===void 0?"Invalid Value":r.message),HA.add(this),cw.set(this,void 0),Twe(this,cw,t,"f"),this.error=r}Errors(){return new wa(Tj(this,HA,"m",Ij).call(this))}};cw=new WeakMap,HA=new WeakSet,Ij=function*(){this.error&&(yield this.error),yield*Tj(this,cw,"f")}});var XA=f(()=>{WA()});function Iwe(e){let t={};for(let r of Object.getOwnPropertyNames(e))t[r]=St(e[r]);for(let r of Object.getOwnPropertySymbols(e))t[r]=St(e[r]);return t}function Ewe(e){return e.map(t=>St(t))}function Cwe(e){return e.slice()}function Pwe(e){return new Map(St([...e.entries()]))}function Mwe(e){return new Set(St([...e.entries()]))}function Awe(e){return new Date(e.toISOString())}function St(e){if(Ne(e))return Ewe(e);if(Ai(e))return Awe(e);if(fa(e))return Cwe(e);if(H7(e))return Pwe(e);if(Z7(e))return Mwe(e);if(je(e))return Iwe(e);if(Hn(e))return e;throw new Error("ValueClone: Unable to clone value")}var Ej=f(()=>{bn()});var ls=f(()=>{Ej()});function wt(e){return Pc(e)?e():St(e)}function Dwe(e,t){return Be(e,"default")?wt(e.default):{}}function Lwe(e,t){if(e.uniqueItems===!0&&!Be(e,"default"))throw new Uo(e,"Array with the uniqueItems constraint requires a default value");if("contains"in e&&!Be(e,"default"))throw new Uo(e,"Array with the contains constraint requires a default value");return"default"in e?wt(e.default):e.minItems!==void 0?Array.from({length:e.minItems}).map(r=>$o(e.items,t)):[]}function Fwe(e,t){return Be(e,"default")?wt(e.default):async function*(){}()}function kwe(e,t){return Be(e,"default")?wt(e.default):BigInt(0)}function Owe(e,t){return Be(e,"default")?wt(e.default):!1}function Rwe(e,t){if(Be(e,"default"))return wt(e.default);{let r=$o(e.returns,t);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}function Bwe(e,t){return Be(e,"default")?wt(e.default):e.minimumTimestamp!==void 0?new Date(e.minimumTimestamp):new Date}function zwe(e,t){return Be(e,"default")?wt(e.default):()=>$o(e.returns,t)}function Nwe(e,t){return Be(e,"default")?wt(e.default):e.minimum!==void 0?e.minimum:0}function Uwe(e,t){if(Be(e,"default"))return wt(e.default);{let r=e.allOf.reduce((n,i)=>{let o=$o(i,t);return typeof o=="object"?{...n,...o}:o},{});if(!Qe(e,t,r))throw new Uo(e,"Intersect produced invalid value. Consider using a default value.");return r}}function $we(e,t){return Be(e,"default")?wt(e.default):function*(){}()}function Vwe(e,t){return Be(e,"default")?wt(e.default):e.const}function jwe(e,t){if(Be(e,"default"))return wt(e.default);throw new Uo(e,"Never types cannot be created. Consider using a default value.")}function Gwe(e,t){if(Be(e,"default"))return wt(e.default);throw new Uo(e,"Not types must have a default value")}function Hwe(e,t){return Be(e,"default")?wt(e.default):null}function Zwe(e,t){return Be(e,"default")?wt(e.default):e.minimum!==void 0?e.minimum:0}function Wwe(e,t){if(Be(e,"default"))return wt(e.default);{let r=new Set(e.required),n={};for(let[i,o]of Object.entries(e.properties))r.has(i)&&(n[i]=$o(o,t));return n}}function Xwe(e,t){return Be(e,"default")?wt(e.default):Promise.resolve($o(e.item,t))}function qwe(e,t){let[r,n]=Object.entries(e.patternProperties)[0];if(Be(e,"default"))return wt(e.default);if(r===gu||r===yu)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=$o(n,t);return o}}function Ywe(e,t){return Be(e,"default")?wt(e.default):$o(_t(e,t),t)}function Jwe(e,t){if(Be(e,"default"))return wt(e.default);throw new Uo(e,"RegExp types cannot be created. Consider using a default value.")}function Kwe(e,t){if(e.pattern!==void 0){if(Be(e,"default"))return wt(e.default);throw new Uo(e,"String types with patterns must specify a default value")}else if(e.format!==void 0){if(Be(e,"default"))return wt(e.default);throw new Uo(e,"String types with formats must specify a default value")}else return Be(e,"default")?wt(e.default):e.minLength!==void 0?Array.from({length:e.minLength}).map(()=>" ").join(""):""}function Qwe(e,t){return Be(e,"default")?wt(e.default):"value"in e?Symbol.for(e.value):Symbol()}function eTe(e,t){if(Be(e,"default"))return wt(e.default);if(!rS(e))throw new Uo(e,"Can only create template literals that produce a finite variants. Consider using a default value.");return Oh(e)[0]}function tTe(e,t){if(Cj++>uTe)throw new Uo(e,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return Be(e,"default")?wt(e.default):$o(_t(e,t),t)}function rTe(e,t){return Be(e,"default")?wt(e.default):e.items===void 0?[]:Array.from({length:e.minItems}).map((r,n)=>$o(e.items[n],t))}function nTe(e,t){if(Be(e,"default"))return wt(e.default)}function iTe(e,t){if(Be(e,"default"))return wt(e.default);if(e.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return $o(e.anyOf[0],t)}function oTe(e,t){return Be(e,"default")?wt(e.default):e.minByteLength!==void 0?new Uint8Array(e.minByteLength):new Uint8Array(0)}function aTe(e,t){return Be(e,"default")?wt(e.default):{}}function sTe(e,t){if(Be(e,"default"))return wt(e.default)}function lTe(e,t){if(Be(e,"default"))return wt(e.default);throw new Error("User defined types must specify a default value")}function $o(e,t){let r=_a(e,t),n=e;switch(n[N]){case"Any":return Dwe(n,r);case"Array":return Lwe(n,r);case"AsyncIterator":return Fwe(n,r);case"BigInt":return kwe(n,r);case"Boolean":return Owe(n,r);case"Constructor":return Rwe(n,r);case"Date":return Bwe(n,r);case"Function":return zwe(n,r);case"Integer":return Nwe(n,r);case"Intersect":return Uwe(n,r);case"Iterator":return $we(n,r);case"Literal":return Vwe(n,r);case"Never":return jwe(n,r);case"Not":return Gwe(n,r);case"Null":return Hwe(n,r);case"Number":return Zwe(n,r);case"Object":return Wwe(n,r);case"Promise":return Xwe(n,r);case"Record":return qwe(n,r);case"Ref":return Ywe(n,r);case"RegExp":return Jwe(n,r);case"String":return Kwe(n,r);case"Symbol":return Qwe(n,r);case"TemplateLiteral":return eTe(n,r);case"This":return tTe(n,r);case"Tuple":return rTe(n,r);case"Undefined":return nTe(n,r);case"Union":return iTe(n,r);case"Uint8Array":return oTe(n,r);case"Unknown":return aTe(n,r);case"Void":return sTe(n,r);default:if(!On.Has(n[N]))throw new Uo(n,"Unknown type");return lTe(n,r)}}function Ta(...e){return Cj=0,e.length===2?$o(e[0],e[1]):$o(e[0],[])}var Uo,uTe,Cj,Pj=f(()=>{bn();No();ls();Sa();is();cd();Dc();ge();$r();W1();Uo=class extends Oe{constructor(t,r){super(r),this.schema=t}};uTe=512,Cj=0});var dw=f(()=>{Pj()});function cTe(e,t,r){if(e[N]==="Object"&&typeof r=="object"&&!pu(r)){let n=e,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,s]=[1/o.length,o.length];return o.reduce((l,[u,c])=>{let p=c[N]==="Literal"&&c.const===r[u]?s:0,d=Qe(c,t,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+d+h)},0)}else return Qe(e,t,r)?1:0}function pTe(e,t,r){let n=e.anyOf.map(a=>_t(a,t)),[i,o]=[n[0],0];for(let a of n){let s=cTe(a,t,r);s>o&&(i=a,o=s)}return i}function dTe(e,t,r){if("default"in e)return typeof r=="function"?e.default:St(e.default);{let n=pTe(e,t,r);return qA(n,t,r)}}function fTe(e,t,r){return Qe(e,t,r)?St(r):Ta(e,t)}function hTe(e,t,r){return Qe(e,t,r)?r:Ta(e,t)}function mTe(e,t,r){if(Qe(e,t,r))return St(r);let n=Ne(r)?St(r):Ta(e,t),i=Ce(e.minItems)&&n.length<e.minItems?[...n,...Array.from({length:e.minItems-n.length},()=>null)]:n,a=(Ce(e.maxItems)&&i.length>e.maxItems?i.slice(0,e.maxItems):i).map(l=>fl(e.items,t,l));if(e.uniqueItems!==!0)return a;let s=[...new Set(a)];if(!Qe(e,t,s))throw new fw(e,"Array cast produced invalid data due to uniqueItems constraint");return s}function yTe(e,t,r){if(Qe(e,t,r))return Ta(e,t);let n=new Set(e.returns.required||[]),i=function(){};for(let[o,a]of Object.entries(e.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=fl(a,t,r.prototype[o]));return i}function gTe(e,t,r){let n=Ta(e,t),i=je(n)&&je(r)?{...n,...r}:r;return Qe(e,t,i)?i:Ta(e,t)}function xTe(e,t,r){throw new fw(e,"Never types cannot be cast")}function bTe(e,t,r){if(Qe(e,t,r))return r;if(r===null||typeof r!="object")return Ta(e,t);let n=new Set(e.required||[]),i={};for(let[o,a]of Object.entries(e.properties))!n.has(o)&&r[o]===void 0||(i[o]=fl(a,t,r[o]));if(typeof e.additionalProperties=="object"){let o=Object.getOwnPropertyNames(e.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=fl(e.additionalProperties,t,r[a]))}return i}function vTe(e,t,r){if(Qe(e,t,r))return St(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Ta(e,t);let n=Object.getOwnPropertyNames(e.patternProperties)[0],i=e.patternProperties[n],o={};for(let[a,s]of Object.entries(r))o[a]=fl(i,t,s);return o}function _Te(e,t,r){return fl(_t(e,t),t,r)}function STe(e,t,r){return fl(_t(e,t),t,r)}function wTe(e,t,r){return Qe(e,t,r)?St(r):Ne(r)?e.items===void 0?[]:e.items.map((n,i)=>fl(n,t,r[i])):Ta(e,t)}function TTe(e,t,r){return Qe(e,t,r)?St(r):dTe(e,t,r)}function fl(e,t,r){let n=pt(e.$id)?[...t,e]:t,i=e;switch(e[N]){case"Array":return mTe(i,n,r);case"Constructor":return yTe(i,n,r);case"Intersect":return gTe(i,n,r);case"Never":return xTe(i,n,r);case"Object":return bTe(i,n,r);case"Record":return vTe(i,n,r);case"Ref":return _Te(i,n,r);case"This":return STe(i,n,r);case"Tuple":return wTe(i,n,r);case"Union":return TTe(i,n,r);case"Date":case"Symbol":case"Uint8Array":return fTe(e,t,r);default:return hTe(i,n,r)}}function qA(...e){return e.length===3?fl(e[0],e[1],e[2]):fl(e[0],[],e[1])}var fw,Mj=f(()=>{bn();$r();ge();dw();No();ls();Sa();fw=class extends Oe{constructor(t,r){super(r),this.schema=t}}});var YA=f(()=>{Mj()});function ITe(e){return Ac(e)&&e[N]!=="Unsafe"}function ETe(e,t,r){return Ne(r)?r.map(n=>Vo(e.items,t,n)):r}function CTe(e,t,r){let n=e.unevaluatedProperties,o=e.allOf.map(s=>Vo(s,t,St(r))).reduce((s,l)=>je(l)?{...s,...l}:l,{});if(!je(r)||!je(o)||!Ac(n))return o;let a=Rn(e);for(let s of Object.getOwnPropertyNames(r))a.includes(s)||Qe(n,t,r[s])&&(o[s]=Vo(n,t,r[s]));return o}function PTe(e,t,r){if(!je(r)||Ne(r))return r;let n=e.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(Be(e.properties,i)){r[i]=Vo(e.properties[i],t,r[i]);continue}if(Ac(n)&&Qe(n,t,r[i])){r[i]=Vo(n,t,r[i]);continue}delete r[i]}return r}function MTe(e,t,r){if(!je(r))return r;let n=e.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(e.patternProperties)[0],s=new RegExp(o);for(let l of i){if(s.test(l)){r[l]=Vo(a,t,r[l]);continue}if(Ac(n)&&Qe(n,t,r[l])){r[l]=Vo(n,t,r[l]);continue}delete r[l]}return r}function ATe(e,t,r){return Vo(_t(e,t),t,r)}function DTe(e,t,r){return Vo(_t(e,t),t,r)}function LTe(e,t,r){if(!Ne(r))return r;if(Or(e.items))return[];let n=Math.min(r.length,e.items.length);for(let i=0;i<n;i++)r[i]=Vo(e.items[i],t,r[i]);return r.length>n?r.slice(0,n):r}function FTe(e,t,r){for(let n of e.anyOf)if(ITe(n)&&Qe(n,t,r))return Vo(n,t,r);return r}function Vo(e,t,r){let n=pt(e.$id)?[...t,e]:t,i=e;switch(i[N]){case"Array":return ETe(i,n,r);case"Intersect":return CTe(i,n,r);case"Object":return PTe(i,n,r);case"Record":return MTe(i,n,r);case"Ref":return ATe(i,n,r);case"This":return DTe(i,n,r);case"Tuple":return LTe(i,n,r);case"Union":return FTe(i,n,r);default:return r}}function hw(...e){return e.length===3?Vo(e[0],e[1],e[2]):Vo(e[0],[],e[1])}var JA=f(()=>{os();No();ls();Sa();ge();bn();At()});var KA=f(()=>{JA()});function mw(e){return pt(e)&&!isNaN(e)&&!isNaN(parseFloat(e))}function kTe(e){return Gn(e)||ol(e)||Ce(e)}function Z0(e){return e===!0||Ce(e)&&e===1||Gn(e)&&e===BigInt("1")||pt(e)&&(e.toLowerCase()==="true"||e==="1")}function W0(e){return e===!1||Ce(e)&&(e===0||Object.is(e,-0))||Gn(e)&&e===BigInt("0")||pt(e)&&(e.toLowerCase()==="false"||e==="0"||e==="-0")}function OTe(e){return pt(e)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e)}function RTe(e){return pt(e)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e)}function BTe(e){return pt(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(e)}function zTe(e){return pt(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(e)}function NTe(e){return pt(e)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e)}function UTe(e,t){let r=Dj(e);return r===t?r:e}function $Te(e,t){let r=Lj(e);return r===t?r:e}function VTe(e,t){let r=Aj(e);return r===t?r:e}function jTe(e,t){return pt(e.const)?UTe(t,e.const):Ce(e.const)?$Te(t,e.const):ol(e.const)?VTe(t,e.const):t}function Aj(e){return Z0(e)?!0:W0(e)?!1:e}function GTe(e){let t=r=>r.split(".")[0];return mw(e)?BigInt(t(e)):Ce(e)?BigInt(Math.trunc(e)):W0(e)?BigInt(0):Z0(e)?BigInt(1):e}function Dj(e){return kTe(e)?e.toString():du(e)&&e.description!==void 0?e.description.toString():e}function Lj(e){return mw(e)?parseFloat(e):Z0(e)?1:W0(e)?0:e}function HTe(e){return mw(e)?parseInt(e):Ce(e)?e|0:Z0(e)?1:W0(e)?0:e}function ZTe(e){return pt(e)&&e.toLowerCase()==="null"?null:e}function WTe(e){return pt(e)&&e==="undefined"?void 0:e}function XTe(e){return Ai(e)?e:Ce(e)?new Date(e):Z0(e)?new Date(1):W0(e)?new Date(0):mw(e)?new Date(parseInt(e)):RTe(e)?new Date(`1970-01-01T${e}.000Z`):OTe(e)?new Date(`1970-01-01T${e}`):zTe(e)?new Date(`${e}.000Z`):BTe(e)?new Date(e):NTe(e)?new Date(`${e}T00:00:00.000Z`):e}function qTe(e,t,r){return(Ne(r)?r:[r]).map(i=>hl(e.items,t,i))}function YTe(e,t,r){return GTe(r)}function JTe(e,t,r){return Aj(r)}function KTe(e,t,r){return XTe(r)}function QTe(e,t,r){return HTe(r)}function eIe(e,t,r){return e.allOf.reduce((n,i)=>hl(i,t,n),r)}function tIe(e,t,r){return jTe(e,r)}function rIe(e,t,r){return ZTe(r)}function nIe(e,t,r){return Lj(r)}function iIe(e,t,r){if(!je(r))return r;for(let n of Object.getOwnPropertyNames(e.properties))Be(r,n)&&(r[n]=hl(e.properties[n],t,r[n]));return r}function oIe(e,t,r){if(!je(r))return r;let i=Object.getOwnPropertyNames(e.patternProperties)[0],o=e.patternProperties[i];for(let[a,s]of Object.entries(r))r[a]=hl(o,t,s);return r}function aIe(e,t,r){return hl(_t(e,t),t,r)}function sIe(e,t,r){return Dj(r)}function lIe(e,t,r){return pt(r)||Ce(r)?Symbol(r):r}function uIe(e,t,r){return hl(_t(e,t),t,r)}function cIe(e,t,r){return Ne(r)&&!Or(e.items)?r.map((i,o)=>o<e.items.length?hl(e.items[o],t,i):i):r}function pIe(e,t,r){return WTe(r)}function dIe(e,t,r){for(let n of e.anyOf){let i=hl(n,t,St(r));if(Qe(n,t,i))return i}return r}function hl(e,t,r){let n=_a(e,t),i=e;switch(e[N]){case"Array":return qTe(i,n,r);case"BigInt":return YTe(i,n,r);case"Boolean":return JTe(i,n,r);case"Date":return KTe(i,n,r);case"Integer":return QTe(i,n,r);case"Intersect":return eIe(i,n,r);case"Literal":return tIe(i,n,r);case"Null":return rIe(i,n,r);case"Number":return nIe(i,n,r);case"Object":return iIe(i,n,r);case"Record":return oIe(i,n,r);case"Ref":return aIe(i,n,r);case"String":return sIe(i,n,r);case"Symbol":return lIe(i,n,r);case"This":return uIe(i,n,r);case"Tuple":return cIe(i,n,r);case"Undefined":return pIe(i,n,r);case"Union":return dIe(i,n,r);default:return r}}function yw(...e){return e.length===3?hl(e[0],e[1],e[2]):hl(e[0],[],e[1])}var QA=f(()=>{ls();No();Sa();ge();bn()});var e3=f(()=>{QA()});function Rr(e,t,r){try{return lr(e)?e[mr].Decode(r):r}catch(n){throw new Td(e,t,r,n)}}function fIe(e,t,r,n){return Ne(n)?Rr(e,r,n.map((i,o)=>ml(e.items,t,`${r}/${o}`,i))):Rr(e,r,n)}function hIe(e,t,r,n){if(!je(n)||Hn(n))return Rr(e,r,n);let i=Oc(e),o=i.map(c=>c[0]),a={...n};for(let[c,p]of i)c in a&&(a[c]=ml(p,t,`${r}/${c}`,a[c]));if(!lr(e.unevaluatedProperties))return Rr(e,r,a);let s=Object.getOwnPropertyNames(a),l=e.unevaluatedProperties,u={...a};for(let c of s)o.includes(c)||(u[c]=Rr(l,`${r}/${c}`,u[c]));return Rr(e,r,u)}function mIe(e,t,r,n){return Rr(e,r,ml(e.not,t,r,n))}function yIe(e,t,r,n){if(!je(n))return Rr(e,r,n);let i=Rn(e),o={...n};for(let u of i)Be(o,u)&&(Or(o[u])&&(!Ph(e.properties[u])||kt.IsExactOptionalProperty(o,u))||(o[u]=ml(e.properties[u],t,`${r}/${u}`,o[u])));if(!dt(e.additionalProperties))return Rr(e,r,o);let a=Object.getOwnPropertyNames(o),s=e.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=Rr(s,`${r}/${u}`,l[u]));return Rr(e,r,l)}function gIe(e,t,r,n){if(!je(n))return Rr(e,r,n);let i=Object.getOwnPropertyNames(e.patternProperties)[0],o=new RegExp(i),a={...n};for(let c of Object.getOwnPropertyNames(n))o.test(c)&&(a[c]=ml(e.patternProperties[i],t,`${r}/${c}`,a[c]));if(!dt(e.additionalProperties))return Rr(e,r,a);let s=Object.getOwnPropertyNames(a),l=e.additionalProperties,u={...a};for(let c of s)o.test(c)||(u[c]=Rr(l,`${r}/${c}`,u[c]));return Rr(e,r,u)}function xIe(e,t,r,n){let i=_t(e,t);return Rr(e,r,ml(i,t,r,n))}function bIe(e,t,r,n){let i=_t(e,t);return Rr(e,r,ml(i,t,r,n))}function vIe(e,t,r,n){return Ne(n)&&Ne(e.items)?Rr(e,r,e.items.map((i,o)=>ml(i,t,`${r}/${o}`,n[o]))):Rr(e,r,n)}function _Ie(e,t,r,n){for(let i of e.anyOf){if(!Qe(i,t,n))continue;let o=ml(i,t,r,n);return Rr(e,r,o)}return Rr(e,r,n)}function ml(e,t,r,n){let i=_a(e,t),o=e;switch(e[N]){case"Array":return fIe(o,i,r,n);case"Intersect":return hIe(o,i,r,n);case"Not":return mIe(o,i,r,n);case"Object":return yIe(o,i,r,n);case"Record":return gIe(o,i,r,n);case"Ref":return xIe(o,i,r,n);case"Symbol":return Rr(o,r,n);case"This":return bIe(o,i,r,n);case"Tuple":return vIe(o,i,r,n);case"Union":return _Ie(o,i,r,n);default:return Rr(o,r,n)}}function rm(e,t,r){return ml(e,t,"",r)}var tm,Td,Fj=f(()=>{h0();ge();$r();os();Sa();No();bn();ud();tm=class extends Oe{constructor(t,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=t,this.value=r,this.error=n}},Td=class extends Oe{constructor(t,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=t,this.path=r,this.value=n,this.error=i}}});function vi(e,t,r){try{return lr(e)?e[mr].Encode(r):r}catch(n){throw new Id(e,t,r,n)}}function SIe(e,t,r,n){let i=vi(e,r,n);return Ne(i)?i.map((o,a)=>yl(e.items,t,`${r}/${a}`,o)):i}function wIe(e,t,r,n){let i=vi(e,r,n);if(!je(n)||Hn(n))return i;let o=Oc(e),a=o.map(p=>p[0]),s={...i};for(let[p,d]of o)p in s&&(s[p]=yl(d,t,`${r}/${p}`,s[p]));if(!lr(e.unevaluatedProperties))return s;let l=Object.getOwnPropertyNames(s),u=e.unevaluatedProperties,c={...s};for(let p of l)a.includes(p)||(c[p]=vi(u,`${r}/${p}`,c[p]));return c}function TIe(e,t,r,n){return vi(e.not,r,vi(e,r,n))}function IIe(e,t,r,n){let i=vi(e,r,n);if(!je(i))return i;let o=Rn(e),a={...i};for(let c of o)Be(a,c)&&(Or(a[c])&&(!Ph(e.properties[c])||kt.IsExactOptionalProperty(a,c))||(a[c]=yl(e.properties[c],t,`${r}/${c}`,a[c])));if(!dt(e.additionalProperties))return a;let s=Object.getOwnPropertyNames(a),l=e.additionalProperties,u={...a};for(let c of s)o.includes(c)||(u[c]=vi(l,`${r}/${c}`,u[c]));return u}function EIe(e,t,r,n){let i=vi(e,r,n);if(!je(n))return i;let o=Object.getOwnPropertyNames(e.patternProperties)[0],a=new RegExp(o),s={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(s[p]=yl(e.patternProperties[o],t,`${r}/${p}`,s[p]));if(!dt(e.additionalProperties))return s;let l=Object.getOwnPropertyNames(s),u=e.additionalProperties,c={...s};for(let p of l)a.test(p)||(c[p]=vi(u,`${r}/${p}`,c[p]));return c}function CIe(e,t,r,n){let i=_t(e,t),o=yl(i,t,r,n);return vi(e,r,o)}function PIe(e,t,r,n){let i=_t(e,t),o=yl(i,t,r,n);return vi(e,r,o)}function MIe(e,t,r,n){let i=vi(e,r,n);return Ne(e.items)?e.items.map((o,a)=>yl(o,t,`${r}/${a}`,i[a])):[]}function AIe(e,t,r,n){for(let i of e.anyOf){if(!Qe(i,t,n))continue;let o=yl(i,t,r,n);return vi(e,r,o)}for(let i of e.anyOf){let o=yl(i,t,r,n);if(Qe(e,t,o))return vi(e,r,o)}return vi(e,r,n)}function yl(e,t,r,n){let i=_a(e,t),o=e;switch(e[N]){case"Array":return SIe(o,i,r,n);case"Intersect":return wIe(o,i,r,n);case"Not":return TIe(o,i,r,n);case"Object":return IIe(o,i,r,n);case"Record":return EIe(o,i,r,n);case"Ref":return CIe(o,i,r,n);case"This":return PIe(o,i,r,n);case"Tuple":return MIe(o,i,r,n);case"Union":return AIe(o,i,r,n);default:return vi(o,r,n)}}function gw(e,t,r){return yl(e,t,"",r)}var nm,Id,kj=f(()=>{h0();ge();$r();os();Sa();No();bn();ud();nm=class extends Oe{constructor(t,r,n){super("The encoded value does not match the expected schema"),this.schema=t,this.value=r,this.error=n}},Id=class extends Oe{constructor(t,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=t,this.path=r,this.value=n,this.error=i}}});function DIe(e,t){return lr(e)||Bn(e.items,t)}function LIe(e,t){return lr(e)||Bn(e.items,t)}function FIe(e,t){return lr(e)||Bn(e.returns,t)||e.parameters.some(r=>Bn(r,t))}function kIe(e,t){return lr(e)||Bn(e.returns,t)||e.parameters.some(r=>Bn(r,t))}function OIe(e,t){return lr(e)||lr(e.unevaluatedProperties)||e.allOf.some(r=>Bn(r,t))}function RIe(e,t){return lr(e)||Bn(e.items,t)}function BIe(e,t){return lr(e)||Bn(e.not,t)}function zIe(e,t){return lr(e)||Object.values(e.properties).some(r=>Bn(r,t))||dt(e.additionalProperties)&&Bn(e.additionalProperties,t)}function NIe(e,t){return lr(e)||Bn(e.item,t)}function UIe(e,t){let r=Object.getOwnPropertyNames(e.patternProperties)[0],n=e.patternProperties[r];return lr(e)||Bn(n,t)||dt(e.additionalProperties)&&lr(e.additionalProperties)}function $Ie(e,t){return lr(e)?!0:Bn(_t(e,t),t)}function VIe(e,t){return lr(e)?!0:Bn(_t(e,t),t)}function jIe(e,t){return lr(e)||!Or(e.items)&&e.items.some(r=>Bn(r,t))}function GIe(e,t){return lr(e)||e.anyOf.some(r=>Bn(r,t))}function Bn(e,t){let r=_a(e,t),n=e;if(e.$id&&t3.has(e.$id))return!1;switch(e.$id&&t3.add(e.$id),e[N]){case"Array":return DIe(n,r);case"AsyncIterator":return LIe(n,r);case"Constructor":return FIe(n,r);case"Function":return kIe(n,r);case"Intersect":return OIe(n,r);case"Iterator":return RIe(n,r);case"Not":return BIe(n,r);case"Object":return zIe(n,r);case"Promise":return NIe(n,r);case"Record":return UIe(n,r);case"Ref":return $Ie(n,r);case"This":return VIe(n,r);case"Tuple":return jIe(n,r);case"Union":return GIe(n,r);default:return lr(e)}}function gl(e,t){return t3.clear(),Bn(e,t)}var t3,Oj=f(()=>{Sa();ge();ud();bn();t3=new Set});var im=f(()=>{Fj();kj();Oj()});function Rj(...e){let[t,r,n]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]];if(!Qe(t,r,n))throw new tm(t,n,dl(t,r,n).First());return gl(t,r)?rm(t,r,n):n}var Bj=f(()=>{im();No();Uc()});var r3=f(()=>{Bj()});function Tu(e,t){let r=Be(e,"default")?e.default:void 0,n=Pc(r)?r():St(r);return Or(t)?n:je(t)&&je(n)?Object.assign(n,t):t}function n3(e){return Ac(e)&&"default"in e}function HIe(e,t,r){let n=Tu(e,r);if(!Ne(n))return n;for(let i=0;i<n.length;i++)n[i]=jo(e.items,t,n[i]);return n}function ZIe(e,t,r){return Ai(r)?r:Tu(e,r)}function WIe(e,t,r){let n=Tu(e,r);return e.allOf.reduce((i,o)=>{let a=jo(o,t,n);return je(a)?{...i,...a}:a},{})}function XIe(e,t,r){let n=Tu(e,r);if(!je(n))return n;let i=Object.getOwnPropertyNames(e.properties);for(let o of i){let a=jo(e.properties[o],t,n[o]);Or(a)||(n[o]=jo(e.properties[o],t,n[o]))}if(!n3(e.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=jo(e.additionalProperties,t,n[o]));return n}function qIe(e,t,r){let n=Tu(e,r);if(!je(n))return n;let i=e.additionalProperties,[o,a]=Object.entries(e.patternProperties)[0],s=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))s.test(l)&&n3(a)&&(n[l]=jo(a,t,n[l]));if(!n3(i))return n;for(let l of Object.getOwnPropertyNames(n))s.test(l)||(n[l]=jo(i,t,n[l]));return n}function YIe(e,t,r){return jo(_t(e,t),t,Tu(e,r))}function JIe(e,t,r){return jo(_t(e,t),t,r)}function KIe(e,t,r){let n=Tu(e,r);if(!Ne(n)||Or(e.items))return n;let[i,o]=[e.items,Math.max(e.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=jo(i[a],t,n[a]));return n}function QIe(e,t,r){let n=Tu(e,r);for(let i of e.anyOf){let o=jo(i,t,St(n));if(Qe(i,t,o))return o}return n}function jo(e,t,r){let n=_a(e,t),i=e;switch(i[N]){case"Array":return HIe(i,n,r);case"Date":return ZIe(i,n,r);case"Intersect":return WIe(i,n,r);case"Object":return XIe(i,n,r);case"Record":return qIe(i,n,r);case"Ref":return YIe(i,n,r);case"This":return JIe(i,n,r);case"Tuple":return KIe(i,n,r);case"Union":return QIe(i,n,r);default:return Tu(i,r)}}function xw(...e){return e.length===3?jo(e[0],e[1],e[2]):jo(e[0],[],e[1])}var i3=f(()=>{No();ls();Sa();ge();bn();At()});var o3=f(()=>{i3()});var us={};Fr(us,{Delete:()=>tEe,Format:()=>X0,Get:()=>nEe,Has:()=>rEe,Set:()=>eEe,ValuePointerRootDeleteError:()=>vw,ValuePointerRootSetError:()=>bw});function zj(e){return e.indexOf("~")===-1?e:e.replace(/~1/g,"/").replace(/~0/g,"~")}function*X0(e){if(e==="")return;let[t,r]=[0,0];for(let n=0;n<e.length;n++)e.charAt(n)==="/"?(n===0||(r=n,yield zj(e.slice(t,r))),t=n+1):r=n;yield zj(e.slice(t))}function eEe(e,t,r){if(t==="")throw new bw(e,t,r);let[n,i,o]=[null,e,""];for(let a of X0(t))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}function tEe(e,t){if(t==="")throw new vw(e,t);let[r,n,i]=[null,e,""];for(let o of X0(t)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}function rEe(e,t){if(t==="")return!0;let[r,n,i]=[null,e,""];for(let o of X0(t)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}function nEe(e,t){if(t==="")return e;let r=e;for(let n of X0(t)){if(r[n]===void 0)return;r=r[n]}return r}var bw,vw,Nj=f(()=>{$r();bw=class extends Oe{constructor(t,r,n){super("Cannot set root value"),this.value=t,this.path=r,this.update=n}},vw=class extends Oe{constructor(t,r){super("Cannot delete root value"),this.value=t,this.path=r}}});var _w=f(()=>{Nj()});function iEe(e,t){if(!je(t))return!1;let r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)],n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)];return r.length!==n.length?!1:r.every(i=>Ed(e[i],t[i]))}function oEe(e,t){return Ai(t)&&e.getTime()===t.getTime()}function aEe(e,t){return!Ne(t)||e.length!==t.length?!1:e.every((r,n)=>Ed(r,t[n]))}function sEe(e,t){return!fa(t)||e.length!==t.length||Object.getPrototypeOf(e).constructor.name!==Object.getPrototypeOf(t).constructor.name?!1:e.every((r,n)=>Ed(r,t[n]))}function lEe(e,t){return e===t}function Ed(e,t){if(Ai(e))return oEe(e,t);if(fa(e))return sEe(e,t);if(Ne(e))return aEe(e,t);if(je(e))return iEe(e,t);if(Hn(e))return lEe(e,t);throw new Error("ValueEquals: Unable to compare value")}var a3=f(()=>{bn()});function ww(e,t){return{type:"update",path:e,value:t}}function Vj(e,t){return{type:"insert",path:e,value:t}}function jj(e){return{type:"delete",path:e}}function Uj(e){if(globalThis.Object.getOwnPropertySymbols(e).length>0)throw new Sw(e,"Cannot diff objects with symbols")}function*dEe(e,t,r){if(Uj(t),Uj(r),!f4(r))return yield ww(e,r);let n=globalThis.Object.getOwnPropertyNames(t),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)Be(t,o)||(yield Vj(`${e}/${o}`,r[o]));for(let o of n)Be(r,o)&&(Ed(t,r)||(yield*Tw(`${e}/${o}`,t[o],r[o])));for(let o of n)Be(r,o)||(yield jj(`${e}/${o}`))}function*fEe(e,t,r){if(!Ne(r))return yield ww(e,r);for(let n=0;n<Math.min(t.length,r.length);n++)yield*Tw(`${e}/${n}`,t[n],r[n]);for(let n=0;n<r.length;n++)n<t.length||(yield Vj(`${e}/${n}`,r[n]));for(let n=t.length-1;n>=0;n--)n<r.length||(yield jj(`${e}/${n}`))}function*hEe(e,t,r){if(!fa(r)||t.length!==r.length||globalThis.Object.getPrototypeOf(t).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield ww(e,r);for(let n=0;n<Math.min(t.length,r.length);n++)yield*Tw(`${e}/${n}`,t[n],r[n])}function*mEe(e,t,r){t!==r&&(yield ww(e,r))}function*Tw(e,t,r){if(f4(t))return yield*dEe(e,t,r);if(Ne(t))return yield*fEe(e,t,r);if(fa(t))return yield*hEe(e,t,r);if(Hn(t))return yield*mEe(e,t,r);throw new Sw(t,"Unable to diff value")}function Gj(e,t){return[...Tw("",e,t)]}function yEe(e){return e.length>0&&e[0].path===""&&e[0].type==="update"}function gEe(e){return e.length===0}function Hj(e,t){if(yEe(t))return St(t[0].value);if(gEe(t))return St(e);let r=St(e);for(let n of t)switch(n.type){case"insert":{us.Set(r,n.path,n.value);break}case"update":{us.Set(r,n.path,n.value);break}case"delete":{us.Delete(r,n.path);break}}return r}var uEe,cEe,pEe,$j,Sw,Zj=f(()=>{bn();_w();ls();a3();$r();to();Ro();hd();gd();Qr();uEe=Zt({type:Pt("insert"),path:ma(),value:_u()}),cEe=Zt({type:Pt("update"),path:ma(),value:_u()}),pEe=Zt({type:Pt("delete"),path:ma()}),$j=jt([uEe,cEe,pEe]),Sw=class extends Oe{constructor(t,r){super(r),this.value=t}}});var s3=f(()=>{Zj()});function Wj(...e){let[t,r,n]=e.length===3?[e[0],e[1],e[2]]:[e[0],[],e[1]],i=gl(t,r)?gw(t,r,n):n;if(!Qe(t,r,i))throw new nm(t,i,dl(t,r,i).First());return i}var Xj=f(()=>{im();No();Uc()});var l3=f(()=>{Xj()});var u3=f(()=>{a3()});function xEe(e,t,r,n){if(!je(r))us.Set(e,t,St(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)c3(e,`${t}/${a}`,r[a],n[a])}}function bEe(e,t,r,n){if(!Ne(r))us.Set(e,t,St(n));else{for(let i=0;i<n.length;i++)c3(e,`${t}/${i}`,r[i],n[i]);r.splice(n.length)}}function vEe(e,t,r,n){if(fa(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else us.Set(e,t,St(n))}function _Ee(e,t,r,n){r!==n&&us.Set(e,t,n)}function c3(e,t,r,n){if(Ne(n))return bEe(e,t,r,n);if(fa(n))return vEe(e,t,r,n);if(je(n))return xEe(e,t,r,n);if(Hn(n))return _Ee(e,t,r,n)}function qj(e){return fa(e)||Hn(e)}function SEe(e,t){return je(e)&&Ne(t)||Ne(e)&&je(t)}function Yj(e,t){if(qj(e)||qj(t))throw new Iw("Only object and array types can be mutated at the root level");if(SEe(e,t))throw new Iw("Cannot assign due type mismatch of assignable values");c3(e,"",e,t)}var Iw,Jj=f(()=>{bn();_w();ls();$r();Iw=class extends Oe{constructor(t){super(t)}}});var p3=f(()=>{Jj()});function Kj(e,t,r){return wEe.reduce((n,i)=>i(e,t,n),r)}function Qj(...e){return e.length===3?Kj(e[0],e[1],e[2]):Kj(e[0],[],e[1])}var wEe,eG=f(()=>{im();WA();i3();QA();JA();ls();wEe=[(e,t,r)=>St(r),(e,t,r)=>xw(e,t,r),(e,t,r)=>hw(e,t,r),(e,t,r)=>yw(e,t,r),(e,t,r)=>(pw(e,t,r),r),(e,t,r)=>gl(e,t)?rm(e,t,r):r]});var d3=f(()=>{eG()});var cs={};Fr(cs,{Assert:()=>pw,Cast:()=>qA,Check:()=>Qe,Clean:()=>hw,Clone:()=>St,Convert:()=>yw,Create:()=>Ta,Decode:()=>Rj,Default:()=>xw,Diff:()=>Gj,Edit:()=>$j,Encode:()=>Wj,Equal:()=>Ed,Errors:()=>dl,Hash:()=>Nc,Mutate:()=>Yj,Parse:()=>Qj,Patch:()=>Hj,ValueErrorIterator:()=>wa});var tG=f(()=>{Uc();XA();YA();No();KA();ls();e3();dw();r3();o3();s3();l3();u3();em();p3();d3()});var rG=f(()=>{tG()});var Cd=f(()=>{bn();XA();YA();No();KA();ls();e3();dw();r3();o3();s3();l3();u3();em();p3();d3();_w();im();rG()});function AEe(e,t,r){return r||(r=t,t={}),typeof r!="function"&&Br(7),_G(e,t,[MEe],function(n){return Rw(Bw(n.data[0],n.data[1]))},0,r)}function Bw(e,t){return bG(e,t||{},0,0)}function DEe(e,t,r){return r||(r=t,t={}),typeof r!="function"&&Br(7),_G(e,t,[PEe],function(n){return Rw(zw(n.data[0],vG(n.data[1])))},1,r)}function zw(e,t){return mG(e,{i:2},t&&t.out,t&&t.dictionary)}function lm(e,t){if(t){for(var r=new Wt(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(oG)return oG.encode(e);for(var i=e.length,o=new Wt(e.length+(e.length>>1)),a=0,s=function(c){o[a++]=c},n=0;n<i;++n){if(a+5>o.length){var l=new Wt(a+8+(i-n<<1));l.set(o),o=l}var u=e.charCodeAt(n);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|e.charCodeAt(++n)&1023,s(240|u>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|u&63)):(s(224|u>>12),s(128|u>>6&63),s(128|u&63))}return $c(o,0,a)}function S3(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(g3)return g3.decode(e);var i=FEe(e),o=i.s,r=i.r;return r.length&&Br(8),o}}function IG(e,t,r){r||(r=t,t={}),typeof r!="function"&&Br(7);var n={};_3(e,"",n,t);var i=Object.keys(n),o=i.length,a=0,s=0,l=o,u=new Array(o),c=[],p=function(){for(var b=0;b<c.length;++b)c[b]()},d=function(b,_){Fw(function(){r(b,_)})};Fw(function(){d=r});var h=function(){var b=new Wt(s+22),_=a,T=s-a;s=0;for(var I=0;I<l;++I){var S=u[I];try{var E=S.c.length;Lw(b,s,S,S.f,S.u,E);var P=30+S.f.length+J0(S.extra),L=s+P;b.set(S.c,L),Lw(b,a,S,S.f,S.u,E,s,S.m),a+=16+P+(S.m?S.m.length:0),s=L+E}catch(k){return d(k,null)}}TG(b,a,u.length,T,_),d(null,b)};o||h();for(var m=function(b){var _=i[b],T=n[_],I=T[0],S=T[1],E=xG(),P=I.length;E.p(I);var L=lm(_),k=L.length,z=S.comment,W=z&&lm(z),Z=W&&W.length,Y=J0(S.extra),J=S.level==0?0:8,j=function(ae,ve){if(ae)p(),d(ae,null);else{var xe=ve.length;u[b]=Ow(S,{size:P,crc:E.d(),c:ve,f:L,m:W,u:k!=_.length||W&&z.length!=Z,compression:J}),a+=30+k+Y+xe,s+=76+2*(k+Y)+(Z||0)+xe,--o||h()}};if(k>65535&&j(Br(11,0,1),null),!J)j(null,I);else if(P<16e4)try{j(null,Bw(I,S))}catch(ae){j(ae,null)}else c.push(AEe(I,S,j))},x=0;x<l;++x)m(x);return p}function EG(e,t){t||(t={});var r={},n=[];_3(e,"",r,t);var i=0,o=0;for(var a in r){var s=r[a],l=s[0],u=s[1],c=u.level==0?0:8,p=lm(a),d=p.length,h=u.comment,m=h&&lm(h),x=m&&m.length,b=J0(u.extra);d>65535&&Br(11);var _=c?Bw(l,u):l,T=_.length,I=xG();I.p(l),n.push(Ow(u,{size:l.length,crc:I.d(),c:_,f:p,m,u:d!=a.length||m&&h.length!=x,o:i,compression:c})),i+=30+d+b+T,o+=76+2*(d+b)+(x||0)+T}for(var S=new Wt(o+22),E=i,P=o-i,L=0;L<n.length;++L){var p=n[L];Lw(S,p.o,p,p.f,p.u,p.c.length);var k=30+p.f.length+J0(p.extra);S.set(p.c,p.o+k),Lw(S,i,p,p.f,p.u,p.c.length,p.o,p.m),i+=16+k+(p.m?p.m.length:0)}return TG(S,i,n.length,P,E),S}function CG(e,t,r){r||(r=t,t={}),typeof r!="function"&&Br(7);var n=[],i=function(){for(var b=0;b<n.length;++b)n[b]()},o={},a=function(b,_){Fw(function(){r(b,_)})};Fw(function(){a=r});for(var s=e.length-22;Yn(e,s)!=101010256;--s)if(!s||e.length-s>65558)return a(Br(13,0,1),null),i;var l=ps(e,s+8);if(l){var u=l,c=Yn(e,s+16),p=c==4294967295||u==65535;if(p){var d=Yn(e,s-12);p=Yn(e,d)==101075792,p&&(u=l=Yn(e,d+32),c=Yn(e,d+48))}for(var h=t&&t.filter,m=function(b){var _=wG(e,c,p),T=_[0],I=_[1],S=_[2],E=_[3],P=_[4],L=_[5],k=SG(e,L);c=P;var z=function(Z,Y){Z?(i(),a(Z,null)):(Y&&(o[E]=Y),--l||a(null,o))};if(!h||h({name:E,size:I,originalSize:S,compression:T}))if(!T)z(null,$c(e,k,k+I));else if(T==8){var W=e.subarray(k,k+I);if(S<524288||I>.8*S)try{z(null,zw(W,{out:new Wt(S)}))}catch(Z){z(Z,null)}else n.push(DEe(W,{size:S},z))}else z(Br(14,"unknown compression type "+T,1),null);else z(null,null)},x=0;x<u;++x)m(x)}else a(null,{});return i}function PG(e,t){for(var r={},n=e.length-22;Yn(e,n)!=101010256;--n)(!n||e.length-n>65558)&&Br(13);var i=ps(e,n+8);if(!i)return{};var o=Yn(e,n+16),a=o==4294967295||i==65535;if(a){var s=Yn(e,n-12);a=Yn(e,s)==101075792,a&&(i=Yn(e,s+32),o=Yn(e,s+48))}for(var l=t&&t.filter,u=0;u<i;++u){var c=wG(e,o,a),p=c[0],d=c[1],h=c[2],m=c[3],x=c[4],b=c[5],_=SG(e,b);o=x,(!l||l({name:m,size:d,originalSize:h,compression:p}))&&(p?p==8?r[m]=zw(e.subarray(_,_+d),{out:new Wt(h)}):Br(14,"unknown compression type "+p):r[m]=$c(e,_,_+d))}return r}var nG,TEe,Wt,Fi,K0,um,cm,q0,aG,sG,x3,Aw,lG,uG,h3,Y0,Iu,Dt,Ea,Eu,Dt,Dt,Dt,Dt,sm,Dt,cG,pG,dG,fG,Cw,Ia,Pw,Q0,$c,kw,hG,Br,mG,xl,om,Mw,Dw,m3,am,b3,y3,yG,v3,gG,IEe,xG,bG,Ow,iG,Ew,EEe,CEe,PEe,MEe,Rw,vG,_G,ps,Yn,f3,qn,_3,oG,g3,LEe,FEe,SG,wG,kEe,J0,Lw,TG,Fw,ex=f(()=>{nG={},TEe=function(e,t,r,n,i){var o=new Worker(nG[t]||(nG[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(a){var s=a.data,l=s.$e$;if(l){var u=new Error(l[0]);u.code=l[1],u.stack=l[2],i(u,null)}else i(null,s)},o.postMessage(r,n),o},Wt=Uint8Array,Fi=Uint16Array,K0=Int32Array,um=new Wt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cm=new Wt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),q0=new Wt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aG=function(e,t){for(var r=new Fi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new K0(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},sG=aG(um,2),x3=sG.b,Aw=sG.r;x3[28]=258,Aw[258]=28;lG=aG(cm,0),uG=lG.b,h3=lG.r,Y0=new Fi(32768);for(Dt=0;Dt<32768;++Dt)Iu=(Dt&43690)>>1|(Dt&21845)<<1,Iu=(Iu&52428)>>2|(Iu&13107)<<2,Iu=(Iu&61680)>>4|(Iu&3855)<<4,Y0[Dt]=((Iu&65280)>>8|(Iu&255)<<8)>>1;Ea=function(e,t,r){for(var n=e.length,i=0,o=new Fi(t);i<n;++i)e[i]&&++o[e[i]-1];var a=new Fi(t);for(i=1;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(r){s=new Fi(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],p=a[e[i]-1]++<<c,d=p|(1<<c)-1;p<=d;++p)s[Y0[p]>>l]=u}else for(s=new Fi(n),i=0;i<n;++i)e[i]&&(s[i]=Y0[a[e[i]-1]++]>>15-e[i]);return s},Eu=new Wt(288);for(Dt=0;Dt<144;++Dt)Eu[Dt]=8;for(Dt=144;Dt<256;++Dt)Eu[Dt]=9;for(Dt=256;Dt<280;++Dt)Eu[Dt]=7;for(Dt=280;Dt<288;++Dt)Eu[Dt]=8;sm=new Wt(32);for(Dt=0;Dt<32;++Dt)sm[Dt]=5;cG=Ea(Eu,9,0),pG=Ea(Eu,9,1),dG=Ea(sm,5,0),fG=Ea(sm,5,1),Cw=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ia=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Pw=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Q0=function(e){return(e+7)/8|0},$c=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new Wt(e.subarray(t,r))},kw={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14},hG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Br=function(e,t,r){var n=new Error(t||hG[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Br),!r)throw n;return n},mG=function(e,t,r,n){var i=e.length,o=n?n.length:0;if(!i||t.f&&!t.l)return r||new Wt(0);var a=!r,s=a||t.i!=2,l=t.i;a&&(r=new Wt(i*3));var u=function(O){var _e=r.length;if(O>_e){var le=new Wt(Math.max(_e*2,O));le.set(r),r=le}},c=t.f||0,p=t.p||0,d=t.b||0,h=t.l,m=t.d,x=t.m,b=t.n,_=i*8;do{if(!h){c=Ia(e,p,1);var T=Ia(e,p+1,3);if(p+=3,T)if(T==1)h=pG,m=fG,x=9,b=5;else if(T==2){var P=Ia(e,p,31)+257,L=Ia(e,p+10,15)+4,k=P+Ia(e,p+5,31)+1;p+=14;for(var z=new Wt(k),W=new Wt(19),Z=0;Z<L;++Z)W[q0[Z]]=Ia(e,p+Z*3,7);p+=L*3;for(var Y=Cw(W),J=(1<<Y)-1,j=Ea(W,Y,1),Z=0;Z<k;){var ae=j[Ia(e,p,J)];p+=ae&15;var I=ae>>4;if(I<16)z[Z++]=I;else{var ve=0,xe=0;for(I==16?(xe=3+Ia(e,p,3),p+=2,ve=z[Z-1]):I==17?(xe=3+Ia(e,p,7),p+=3):I==18&&(xe=11+Ia(e,p,127),p+=7);xe--;)z[Z++]=ve}}var Le=z.subarray(0,P),Te=z.subarray(P);x=Cw(Le),b=Cw(Te),h=Ea(Le,x,1),m=Ea(Te,b,1)}else Br(1);else{var I=Q0(p)+4,S=e[I-4]|e[I-3]<<8,E=I+S;if(E>i){l&&Br(0);break}s&&u(d+S),r.set(e.subarray(I,E),d),t.b=d+=S,t.p=p=E*8,t.f=c;continue}if(p>_){l&&Br(0);break}}s&&u(d+131072);for(var rt=(1<<x)-1,Re=(1<<b)-1,zt=p;;zt=p){var ve=h[Pw(e,p)&rt],He=ve>>4;if(p+=ve&15,p>_){l&&Br(0);break}if(ve||Br(2),He<256)r[d++]=He;else if(He==256){zt=p,h=null;break}else{var Yt=He-254;if(He>264){var Z=He-257,Fe=um[Z];Yt=Ia(e,p,(1<<Fe)-1)+x3[Z],p+=Fe}var Lr=m[Pw(e,p)&Re],Mn=Lr>>4;Lr||Br(3),p+=Lr&15;var Te=uG[Mn];if(Mn>3){var Fe=cm[Mn];Te+=Pw(e,p)&(1<<Fe)-1,p+=Fe}if(p>_){l&&Br(0);break}s&&u(d+131072);var ii=d+Yt;if(d<Te){var A=o-Te,se=Math.min(Te,ii);for(A+d<0&&Br(3);d<se;++d)r[d]=n[A+d]}for(;d<ii;++d)r[d]=r[d-Te]}}t.l=h,t.p=zt,t.b=d,t.f=c,h&&(c=1,t.m=x,t.d=m,t.n=b)}while(!c);return d!=r.length&&a?$c(r,0,d):r.subarray(0,d)},xl=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},om=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Mw=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return{t:v3,l:0};if(i==1){var a=new Wt(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(E,P){return E.f-P.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],u=0,c=1,p=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=r[r[u].f<r[p].f?u++:p++],l=r[u!=c&&r[u].f<r[p].f?u++:p++],r[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var d=o[0].s,n=1;n<i;++n)o[n].s>d&&(d=o[n].s);var h=new Fi(d+1),m=Dw(r[c-1],h,0);if(m>t){var n=0,x=0,b=m-t,_=1<<b;for(o.sort(function(P,L){return h[L.s]-h[P.s]||P.f-L.f});n<i;++n){var T=o[n].s;if(h[T]>t)x+=_-(1<<m-h[T]),h[T]=t;else break}for(x>>=b;x>0;){var I=o[n].s;h[I]<t?x-=1<<t-h[I]++-1:++n}for(;n>=0&&x;--n){var S=o[n].s;h[S]==t&&(--h[S],++x)}m=t}return{t:new Wt(h),l:m}},Dw=function(e,t,r){return e.s==-1?Math.max(Dw(e.l,t,r+1),Dw(e.r,t,r+1)):t[e.s]=r},m3=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Fi(++t),n=0,i=e[0],o=1,a=function(l){r[n++]=l},s=1;s<=t;++s)if(e[s]==i&&s!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[s]}return{c:r.subarray(0,n),n:t}},am=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},b3=function(e,t,r){var n=r.length,i=Q0(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<n;++o)e[i+o+4]=r[o];return(i+4+n)*8},y3=function(e,t,r,n,i,o,a,s,l,u,c){xl(t,c++,r),++i[256];for(var p=Mw(i,15),d=p.t,h=p.l,m=Mw(o,15),x=m.t,b=m.l,_=m3(d),T=_.c,I=_.n,S=m3(x),E=S.c,P=S.n,L=new Fi(19),k=0;k<T.length;++k)++L[T[k]&31];for(var k=0;k<E.length;++k)++L[E[k]&31];for(var z=Mw(L,7),W=z.t,Z=z.l,Y=19;Y>4&&!W[q0[Y-1]];--Y);var J=u+5<<3,j=am(i,Eu)+am(o,sm)+a,ae=am(i,d)+am(o,x)+a+14+3*Y+am(L,W)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&J<=j&&J<=ae)return b3(t,c,e.subarray(l,l+u));var ve,xe,Le,Te;if(xl(t,c,1+(ae<j)),c+=2,ae<j){ve=Ea(d,h,0),xe=d,Le=Ea(x,b,0),Te=x;var rt=Ea(W,Z,0);xl(t,c,I-257),xl(t,c+5,P-1),xl(t,c+10,Y-4),c+=14;for(var k=0;k<Y;++k)xl(t,c+3*k,W[q0[k]]);c+=3*Y;for(var Re=[T,E],zt=0;zt<2;++zt)for(var He=Re[zt],k=0;k<He.length;++k){var Yt=He[k]&31;xl(t,c,rt[Yt]),c+=W[Yt],Yt>15&&(xl(t,c,He[k]>>5&127),c+=He[k]>>12)}}else ve=cG,xe=Eu,Le=dG,Te=sm;for(var k=0;k<s;++k){var Fe=n[k];if(Fe>255){var Yt=Fe>>18&31;om(t,c,ve[Yt+257]),c+=xe[Yt+257],Yt>7&&(xl(t,c,Fe>>23&31),c+=um[Yt]);var Lr=Fe&31;om(t,c,Le[Lr]),c+=Te[Lr],Lr>3&&(om(t,c,Fe>>5&8191),c+=cm[Lr])}else om(t,c,ve[Fe]),c+=xe[Fe]}return om(t,c,ve[256]),c+xe[256]},yG=new K0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),v3=new Wt(0),gG=function(e,t,r,n,i,o){var a=o.z||e.length,s=new Wt(n+a+5*(1+Math.ceil(a/7e3))+i),l=s.subarray(n,s.length-i),u=o.l,c=(o.r||0)&7;if(t){c&&(l[0]=o.r>>3);for(var p=yG[t-1],d=p>>13,h=p&8191,m=(1<<r)-1,x=o.p||new Fi(32768),b=o.h||new Fi(m+1),_=Math.ceil(r/3),T=2*_,I=function(ue){return(e[ue]^e[ue+1]<<_^e[ue+2]<<T)&m},S=new K0(25e3),E=new Fi(288),P=new Fi(32),L=0,k=0,z=o.i||0,W=0,Z=o.w||0,Y=0;z+2<a;++z){var J=I(z),j=z&32767,ae=b[J];if(x[j]=ae,b[J]=j,Z<=z){var ve=a-z;if((L>7e3||W>24576)&&(ve>423||!u)){c=y3(e,l,0,S,E,P,k,W,Y,z-Y,c),W=L=k=0,Y=z;for(var xe=0;xe<286;++xe)E[xe]=0;for(var xe=0;xe<30;++xe)P[xe]=0}var Le=2,Te=0,rt=h,Re=j-ae&32767;if(ve>2&&J==I(z-Re))for(var zt=Math.min(d,ve)-1,He=Math.min(32767,z),Yt=Math.min(258,ve);Re<=He&&--rt&&j!=ae;){if(e[z+Le]==e[z+Le-Re]){for(var Fe=0;Fe<Yt&&e[z+Fe]==e[z+Fe-Re];++Fe);if(Fe>Le){if(Le=Fe,Te=Re,Fe>zt)break;for(var Lr=Math.min(Re,Fe-2),Mn=0,xe=0;xe<Lr;++xe){var ii=z-Re+xe&32767,A=x[ii],se=ii-A&32767;se>Mn&&(Mn=se,ae=ii)}}}j=ae,ae=x[j],Re+=j-ae&32767}if(Te){S[W++]=268435456|Aw[Le]<<18|h3[Te];var O=Aw[Le]&31,_e=h3[Te]&31;k+=um[O]+cm[_e],++E[257+O],++P[_e],Z=z+Le,++L}else S[W++]=e[z],++E[e[z]]}}for(z=Math.max(z,Z);z<a;++z)S[W++]=e[z],++E[e[z]];c=y3(e,l,u,S,E,P,k,W,Y,z-Y,c),u||(o.r=c&7|l[c/8|0]<<3,c-=7,o.h=b,o.p=x,o.i=z,o.w=Z)}else{for(var z=o.w||0;z<a+u;z+=65535){var le=z+65535;le>=a&&(l[c/8|0]=u,le=a),c=b3(l,c+1,e.subarray(z,le))}o.i=a}return $c(s,0,n+Q0(c)+i)},IEe=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(r&1&&-306674912)^r>>>1;e[t]=r}return e}(),xG=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=IEe[r&255^t[n]]^r>>>8;e=r},d:function(){return~e}}},bG=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new Wt(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return gG(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},Ow=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},iG=function(e,t,r){for(var n=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<n.length;++a){var s=n[a],l=o[a];if(typeof s=="function"){t+=";"+l+"=";var u=s.toString();if(s.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var p in s.prototype)t+=";"+l+".prototype."+p+"="+s.prototype[p].toString()}else t+=u}else r[l]=s}return t},Ew=[],EEe=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},CEe=function(e,t,r,n){if(!Ew[r]){for(var i="",o={},a=e.length-1,s=0;s<a;++s)i=iG(e[s],i,o);Ew[r]={c:iG(e[a],i,o),e:o}}var l=Ow({},Ew[r].e);return TEe(Ew[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,l,EEe(l),n)},PEe=function(){return[Wt,Fi,K0,um,cm,q0,x3,uG,pG,fG,Y0,hG,Ea,Cw,Ia,Pw,Q0,$c,Br,mG,zw,Rw,vG]},MEe=function(){return[Wt,Fi,K0,um,cm,q0,Aw,h3,cG,Eu,dG,sm,Y0,yG,v3,Ea,xl,om,Mw,Dw,m3,am,b3,y3,Q0,$c,gG,bG,Bw,Rw]},Rw=function(e){return postMessage(e,[e.buffer])},vG=function(e){return e&&{out:e.size&&new Wt(e.size),dictionary:e.dictionary}},_G=function(e,t,r,n,i,o){var a=CEe(r,n,i,function(s,l){a.terminate(),o(s,l)});return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},ps=function(e,t){return e[t]|e[t+1]<<8},Yn=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},f3=function(e,t){return Yn(e,t)+Yn(e,t+4)*4294967296},qn=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};_3=function(e,t,r,n){for(var i in e){var o=e[i],a=t+i,s=n;Array.isArray(o)&&(s=Ow(n,o[1]),o=o[0]),o instanceof Wt?r[a]=[o,s]:(r[a+="/"]=[new Wt(0),s],_3(o,a,r,n))}},oG=typeof TextEncoder<"u"&&new TextEncoder,g3=typeof TextDecoder<"u"&&new TextDecoder,LEe=0;try{g3.decode(v3,{stream:!0}),LEe=1}catch{}FEe=function(e){for(var t="",r=0;;){var n=e[r++],i=(n>127)+(n>223)+(n>239);if(r+i>e.length)return{s:t,r:$c(e,r-1)};i?i==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};SG=function(e,t){return t+30+ps(e,t+26)+ps(e,t+28)},wG=function(e,t,r){var n=ps(e,t+28),i=S3(e.subarray(t+46,t+46+n),!(ps(e,t+8)&2048)),o=t+46+n,a=Yn(e,t+20),s=r&&a==4294967295?kEe(e,o):[a,Yn(e,t+24),Yn(e,t+42)],l=s[0],u=s[1],c=s[2];return[ps(e,t+10),l,u,i,o+ps(e,t+30)+ps(e,t+32),c]},kEe=function(e,t){for(;ps(e,t)!=1;t+=4+ps(e,t+2));return[f3(e,t+12),f3(e,t+4),f3(e,t+20)]},J0=function(e){var t=0;if(e)for(var r in e){var n=e[r].length;n>65535&&Br(9),t+=n+4}return t},Lw=function(e,t,r,n,i,o,a,s){var l=n.length,u=r.extra,c=s&&s.length,p=J0(u);qn(e,t,a!=null?33639248:67324752),t+=4,a!=null&&(e[t++]=20,e[t++]=r.os),e[t]=20,t+=2,e[t++]=r.flag<<1|(o<0&&8),e[t++]=i&&8,e[t++]=r.compression&255,e[t++]=r.compression>>8;var d=new Date(r.mtime==null?Date.now():r.mtime),h=d.getFullYear()-1980;if((h<0||h>119)&&Br(10),qn(e,t,h<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),t+=4,o!=-1&&(qn(e,t,r.crc),qn(e,t+4,o<0?-o-2:o),qn(e,t+8,r.size)),qn(e,t+12,l),qn(e,t+14,p),t+=16,a!=null&&(qn(e,t,c),qn(e,t+6,r.attrs),qn(e,t+10,a),t+=14),e.set(n,t),t+=l,p)for(var m in u){var x=u[m],b=x.length;qn(e,t,+m),qn(e,t+2,b),e.set(x,t+4),t+=4+b}return c&&(e.set(s,t),t+=c),t},TG=function(e,t,r,n,i){qn(e,t,101010256),qn(e,t+8,r),qn(e,t+10,r),qn(e,t+12,n),qn(e,t+16,i)};Fw=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()}});var OEe,REe,Nw,BEe,Uw,w3=f(()=>{Xe();OEe=e=>{if(e!=null)return e.trim()===""?void 0:e},REe=e=>e!=null,Nw=(e,t,r=0)=>{if(M.IsNull(e))return"null";if(M.IsUndefined(e))return"undefined";if(M.IsString(e))return"<string>";if(M.IsNumber(e))return"<number>";if(M.IsBoolean(e))return"<boolean>";if(M.IsLiteral(e))return typeof e.const=="string"?`'${e.const}'`:`${e.const}`;if(M.IsRef(e)){let n=t.find(i=>i.$id===e.$ref);return n==null?e.$ref:Nw(n,t,r)}if(M.IsArray(e))return`${Nw(e.items,t,r+1)}[]`;if(M.IsUnion(e)&&(!(e.anyOf.length>5)||e.$id==null)){let i=`${e.anyOf.map(o=>Nw(o,t,r+1)).filter(REe).join(" | ")}`;return r>0?`(${i})`:i}return e.$id??""},BEe=(e,t,r)=>{let n=t.message;return M.IsUnion(t.schema)&&(n=`Expected one of: ${Nw(t.schema,r)}`),`${`#/definitions/${e}${OEe(t.path)??""}`}: ${n}`},Uw=(e,t,r)=>{let n=t.First();if(n!=null)return BEe(e,n,r)}});var pm,dm,zEe,NEe,UEe,$Ee,VEe,tx,T3=f(()=>{Uc();Cd();ex();w3();(function(e){e.Archive="Archive",e.Validate="Validate",e.Encode="Encode",e.Unknown="Unknown"})(pm||(pm={}));dm=class extends Error{constructor(r,n){super(n);w(this,"name");w(this,"kind");this.name="CompressError",this.kind=r}},zEe=e=>new dm(pm.Archive,e.message),NEe=e=>{let t=Object.values(kw);return e instanceof Error&&"code"in e&&typeof e.code=="number"&&t.includes(e.code)},UEe=(e,t,r)=>new dm(pm.Validate,Uw(e,t,r)??"Unknown validate error"),$Ee=e=>new dm(pm.Encode,e.message),VEe=e=>new dm(pm.Unknown,e instanceof Error?e.message:String(e)),tx=(e,t,r)=>t instanceof Id?$Ee(t):t instanceof wa?UEe(e,t,r):NEe(t)?zEe(t):VEe(t)});var fm,hm,jEe,GEe,HEe,ZEe,WEe,rx,I3=f(()=>{Uc();Cd();ex();w3();(function(e){e.Unarchive="Unarchive",e.Validate="Validate",e.Decode="Decode",e.Unknown="Unknown"})(fm||(fm={}));hm=class extends Error{constructor(r,n){super(n);w(this,"name");w(this,"kind");this.name="DecompressError",this.kind=r}},jEe=e=>new hm(fm.Unarchive,e.message),GEe=e=>{let t=Object.values(kw);return e instanceof Error&&"code"in e&&typeof e.code=="number"&&t.includes(e.code)},HEe=(e,t,r)=>new hm(fm.Validate,Uw(e,t,r)??"Unknown validate error"),ZEe=e=>new hm(fm.Decode,e.message),WEe=e=>new hm(fm.Unknown,e instanceof Error?e.message:String(e)),rx=(e,t,r)=>t instanceof Td?ZEe(t):t instanceof wa?HEe(e,t,r):GEe(t)?jEe(t):WEe(t)});var E3=f(()=>{Jh();T3();I3()});var MG,XEe,Gr,$w=f(()=>{er();E3();MG=function*(e,t=""){if(e!=null){if(Array.isArray(e)){for(let r=0;r<e.length;r++)yield[t+`[${r}]`,e[r]];return}if("features"in e){for(let r=0;r<e.features.length;r++)yield[t===""?`features[${r}]`:`${t}.features[${r}]`,e.features[r]];return}for(let[r,n]of Object.entries(e)){let i=t===""?r:`${t}.${r}`;yield*MG(n,i)}}},XEe=(e,t)=>e===""?t:t.startsWith("[")?`${e}${t}`:`${e}.${t}`,Gr=(e,t,r)=>{let n=new Set;for(let[i,o]of MG(e)){let a=t(o);if(n.has(a))return fe({kind:oo.DuplicateIdError,properties:{id:a,path:XEe(r,i)}});n.add(a)}return de(!0)}});var AG,DG=f(()=>{er();Jh();$w();AG=e=>e.floors==null?fe({kind:oo.FloorMissingError,properties:null}):Gr(e.floors.features,t=>t.properties.id,"floors")});var LG,FG,kG,qEe,OG,RG=f(()=>{Xe();G0();qh();Bc();DG();LG=v.Intersect([v.Object({id:v.Ref(ut),elevation:v.Integer({description:"An ordinal representing the elevation of this map relative to other maps in the stack."}),subtitle:v.Optional(v.String({description:"The subtitle of the floor."})),maxHeight:v.Optional(v.Number({description:"The maximum height of the floor in meters. This includes the thickness of the floor itself, up to the tallest point on any wall. If the floor does not have a consistent height (eg, one room on the floor has a vaulted ceiling, the rest do not), this value represents the highest point anywhere on the floor. Must be a positive number, or undefined.",minimum:0}))}),Bo],{$id:"FloorProperties"}),FG=Zn(v.Union([v.Ref(Wh),v.Ref(Xh),v.Null()]),v.Ref(LG),{$id:"FloorFeature"}),kG=Li(v.Ref(FG),{$id:"FloorCollection"}),qEe=v.Object({floors:v.Ref(kG)}),OG={name:"core:floors",intoBundle:function*(e){e.floors!=null&&(yield{path:"floors.geojson",contents:e.floors})},fromBundle:(e,t,r)=>{if(e==="floors.geojson")return{floors:r(t)}},integrityCheck:AG,schema:qEe,references:[LG,FG,kG]}});var Hr,C3=f(()=>{Xe();Hr=e=>v.Unsafe(e)});var ht,Vw=f(()=>{ht=e=>Object.keys(e)});var YEe,ds,P3=f(()=>{er();Jh();YEe=e=>new Map(e.floors?.features.map(t=>[t.properties.id,t])??[]),ds=e=>{let t=YEe(e);return n=>{let i=t.get(n);return i==null?fe({kind:oo.UnknownFloorError,properties:{floorId:n}}):de(i)}}});var BG,zG=f(()=>{er();Jh();$w();Vw();P3();BG=e=>{if(e.floors==null)return fe({kind:oo.FloorMissingError,properties:null});if(e.geometry==null)return fe({kind:oo.GeometryMissingError,properties:null});let t=Gr(e.geometry,n=>n.properties.id,"geometry");if(t.isErr())return t;let r=ds(e);for(let n of ht(e.geometry)){let i=r(n);if(i.isErr())return i}return de(!0)}});var NG,UG,$G,JEe,KEe,VG,jG=f(()=>{Xe();G0();C3();Vw();qh();Bc();zG();NG=v.Intersect([v.Object({id:v.Ref(xi)}),Bo],{$id:"GeometryProperties"}),UG=Zn(v.Union([v.Ref(gi),v.Ref(rw),v.Ref(nw),v.Ref(iw),v.Ref(Wh),v.Ref(Xh)]),v.Ref(NG),{$id:"GeometryFeature"}),$G=Li(v.Ref(UG),{$id:"GeometryCollection"}),JEe=v.Object({geometry:Hr(v.Record(ut,v.Ref($G),{additionalProperties:!1}))},{$id:"GeometrySchema"}),KEe=/^geometry\/(.*)\.geojson$/,VG={name:"core:geometry",schema:JEe,intoBundle:function*(e){if(e.geometry!=null)for(let t of ht(e.geometry))yield{path:`geometry/${t}.geojson`,contents:e.geometry[t]}},fromBundle:(e,t,r)=>{let n=e.match(KEe)?.[1];if(n)return{geometry:{[n]:r(t)}}},references:[NG,UG,$G],integrityCheck:BG}});var M3,GG,HG,ZG,QEe,WG,XG=f(()=>{Xe();qh();Bc();M3=v.Object({type:v.Literal("file"),name:v.String({description:"The name of the file."})},{$id:"ManifestFile"}),GG=v.Recursive(e=>v.Object({type:v.Literal("folder"),name:v.String({description:"The name of the folder."}),children:v.Array(v.Union([e,v.Ref(M3)]),{minItems:1,description:"The children of the folder."})}),{$id:"ManifestFolder"}),HG=v.Object({name:v.String({description:"The name of the map."}),version:v.Literal("3.0.0",{description:"The version of the manifest."}),orgId:v.Optional(v.String({description:"The identifier of the organization that the map this MVF is for belongs to."})),mapId:v.Optional(v.String({description:"The identifier of the map that this MVF is for."})),contents:v.Array(v.Union([v.Ref(GG),v.Ref(M3)]),{minItems:1,description:"The contents of the MVF bundle."}),time:v.String({format:"date-time",description:"An ISO 8601 date-time string, including timezone offset."}),tzid:v.Optional(v.Unsafe(v.String({description:"A valid IANA timezone identifier.",pattern:"^[A-Za-z0-9_-]+/[A-Za-z0-9_-]+$"}))),naturalBearing:v.Optional(v.Number({minimum:0,maximum:360,description:'The angle, in degrees, the map is considered to be "naturally oriented" as, rather than facing directly north. 90 degrees means East is "up"'})),defaultFloor:v.Optional(v.Ref(ut,{description:"The default floor ID of the map."})),language:v.Optional(v.String({description:"The language code of the map."}))},{$id:"ManifestProperties"}),ZG=Li(Zn(gi,v.Ref(HG)),{$id:"ManifestCollection"},{minItems:1,maxItems:1}),QEe=v.Object({manifest:v.Ref(ZG)}),WG={name:"core:manifest",intoBundle:function*(e){e.manifest!=null&&(yield{path:"manifest.geojson",contents:e.manifest})},fromBundle:(e,t,r)=>{if(e==="manifest.geojson")return{manifest:r(t)}},schema:QEe,references:[M3,GG,HG,ZG]}});var A3=f(()=>{Lh();T0();I0();cS();Bh();A0();d4();fS();vS();E0();_S();R0();SS();sl();wS();$r();MS();xd();DS();pd();q1();E4();cl();LS();FS();ya();kS();L0();os();to();cn();mi();OS();B0();fd();Ro();BS();xu();zS();US();cd();VS();F0();yd();jS();GS();HS();ZS();WS();Dc();qS();YS();JS();TA();Dh();IA();KS();hd();z0();ge();is();QS();kc();MA();U0();N0();Qr();gd();V0();tw()});function eCe(e,t){let r=t.find(n=>n.$id===e.$ref);if(r===void 0)throw new D3(e);return Pd(r,t)}function jw(e,t){return!xt.IsString(e.$id)||t.some(r=>r.$id===e.$id)||t.push(e),t}function Pd(e,t){return e[N]==="This"||e[N]==="Ref"?eCe(e,t):e}var D3,L3=f(()=>{Xe();D3=class extends Oe{constructor(r){super(`Unable to dereference schema with $id '${r.$ref}'`);w(this,"schema");this.schema=r}}});function tCe(e,t,r){let n=e.get(t);if(n!==void 0)return n;let i=gl(t,r);return e.set(t,i),i}function Gw(){let e=new WeakMap;return{HasTransform:(t,r)=>tCe(e,t,r)}}var F3=f(()=>{Cd()});function zr(e,t,r){try{return M.IsTransform(e)?e[mr].Decode(r):r}catch(n){throw new Td(e,t,r,n)}}function rCe(e,t,r,n,i){return xt.IsArray(n)?zr(e,r,n.map((o,a)=>bl(e.items,t,`${r}/${a}`,o,i))):zr(e,r,n)}function nCe(e,t,r,n,i){if(!xt.IsObject(n)||Hn(n))return zr(e,r,n);let o=Oc(e),a=o.map(p=>p[0]),s={...n};for(let[p,d]of o)p in s&&(s[p]=bl(d,t,`${r}/${p}`,s[p],i));if(!M.IsTransform(e.unevaluatedProperties))return zr(e,r,s);let l=Object.getOwnPropertyNames(s),u=e.unevaluatedProperties,c={...s};for(let p of l)a.includes(p)||(c[p]=zr(u,`${r}/${p}`,c[p]));return zr(e,r,c)}function iCe(e,t,r,n,i){return zr(e,r,bl(e.not,t,r,n,i))}function oCe(e,t,r,n,i){if(!xt.IsObject(n))return zr(e,r,n);let o=Rn(e),a={...n};for(let c of o)xt.HasPropertyKey(a,c)&&(xt.IsUndefined(a[c])&&(!M.IsUndefined(e.properties[c])||kt.IsExactOptionalProperty(a,c))||(a[c]=bl(e.properties[c],t,`${r}/${c}`,a[c],i)));if(!M.IsSchema(e.additionalProperties))return zr(e,r,a);let s=Object.getOwnPropertyNames(a),l=e.additionalProperties,u={...a};for(let c of s)o.includes(c)||(u[c]=zr(l,`${r}/${c}`,u[c]));return zr(e,r,u)}function aCe(e,t,r,n,i){if(!xt.IsObject(n))return zr(e,r,n);let o=Object.getOwnPropertyNames(e.patternProperties)[0],a=new RegExp(o),s={...n};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(s[p]=bl(e.patternProperties[o],t,`${r}/${p}`,s[p],i));if(!M.IsSchema(e.additionalProperties))return zr(e,r,s);let l=Object.getOwnPropertyNames(s),u=e.additionalProperties,c={...s};for(let p of l)a.test(p)||(c[p]=zr(u,`${r}/${p}`,c[p]));return zr(e,r,c)}function sCe(e,t,r,n,i){let o=Pd(e,t);return zr(e,r,bl(o,t,r,n,i))}function lCe(e,t,r,n,i){let o=Pd(e,t);return zr(e,r,bl(o,t,r,n,i))}function uCe(e,t,r,n,i){return xt.IsArray(n)&&xt.IsArray(e.items)?zr(e,r,e.items.map((o,a)=>bl(o,t,`${r}/${a}`,n[a],i))):zr(e,r,n)}function cCe(e,t,r,n,i){for(let o of e.anyOf){if(!cs.Check(o,t,n))continue;let a=bl(o,t,r,n,i);return zr(e,r,a)}return zr(e,r,n)}function bl(e,t,r,n,i){if(!i.HasTransform(e,t))return n;let o=jw(e,t),a=e;switch(e[N]){case"Array":return rCe(a,o,r,n,i);case"Intersect":return nCe(a,o,r,n,i);case"Not":return iCe(a,o,r,n,i);case"Object":return oCe(a,o,r,n,i);case"Record":return aCe(a,o,r,n,i);case"Ref":return sCe(a,o,r,n,i);case"Symbol":return zr(a,r,n);case"This":return lCe(a,o,r,n,i);case"Tuple":return uCe(a,o,r,n,i);case"Union":return cCe(a,o,r,n,i);default:return zr(a,r,n)}}function qG(e,t,r){let n=Gw();return bl(e,t,"",r,n)}var YG=f(()=>{wd();A3();Cd();L3();F3()});function _i(e,t,r){try{return M.IsTransform(e)?e[mr].Encode(r):r}catch(n){throw new Id(e,t,r,n)}}function pCe(e,t,r,n,i){let o=_i(e,r,n);return xt.IsArray(o)?o.map((a,s)=>vl(e.items,t,`${r}/${s}`,a,i)):o}function dCe(e,t,r,n,i){let o=_i(e,r,n);if(!xt.IsObject(n)||Hn(n))return o;let a=Oc(e),s=a.map(d=>d[0]),l={...o};for(let[d,h]of a)d in l&&(l[d]=vl(h,t,`${r}/${d}`,l[d],i));if(!M.IsTransform(e.unevaluatedProperties))return l;let u=Object.getOwnPropertyNames(l),c=e.unevaluatedProperties,p={...l};for(let d of u)s.includes(d)||(p[d]=_i(c,`${r}/${d}`,p[d]));return p}function fCe(e,t,r,n){return _i(e.not,r,_i(e,r,n))}function hCe(e,t,r,n,i){let o=_i(e,r,n);if(!xt.IsObject(o))return o;let a=Rn(e),s={...o};for(let p of a)xt.HasPropertyKey(s,p)&&(xt.IsUndefined(s[p])&&(!M.IsUndefined(e.properties[p])||kt.IsExactOptionalProperty(s,p))||(s[p]=vl(e.properties[p],t,`${r}/${p}`,s[p],i)));if(!M.IsSchema(e.additionalProperties))return s;let l=Object.getOwnPropertyNames(s),u=e.additionalProperties,c={...s};for(let p of l)a.includes(p)||(c[p]=_i(u,`${r}/${p}`,c[p]));return c}function mCe(e,t,r,n,i){let o=_i(e,r,n);if(!xt.IsObject(n))return o;let a=Object.getOwnPropertyNames(e.patternProperties)[0],s=new RegExp(a),l={...o};for(let d of Object.getOwnPropertyNames(n))s.test(d)&&(l[d]=vl(e.patternProperties[a],t,`${r}/${d}`,l[d],i));if(!M.IsSchema(e.additionalProperties))return l;let u=Object.getOwnPropertyNames(l),c=e.additionalProperties,p={...l};for(let d of u)s.test(d)||(p[d]=_i(c,`${r}/${d}`,p[d]));return p}function yCe(e,t,r,n,i){let o=Pd(e,t),a=vl(o,t,r,n,i);return _i(e,r,a)}function gCe(e,t,r,n,i){let o=Pd(e,t),a=vl(o,t,r,n,i);return _i(e,r,a)}function xCe(e,t,r,n,i){let o=_i(e,r,n);return xt.IsArray(e.items)?e.items.map((a,s)=>vl(a,t,`${r}/${s}`,o[s],i)):[]}function bCe(e,t,r,n,i){for(let o of e.anyOf){if(!cs.Check(o,t,n))continue;let a=vl(o,t,r,n,i);return _i(e,r,a)}for(let o of e.anyOf){let a=vl(o,t,r,n,i);if(cs.Check(e,t,a))return _i(e,r,a)}return _i(e,r,n)}function vl(e,t,r,n,i){if(!i.HasTransform(e,t))return n;let o=jw(e,t),a=e;switch(e[N]){case"Array":return pCe(a,o,r,n,i);case"Intersect":return dCe(a,o,r,n,i);case"Not":return fCe(a,o,r,n);case"Object":return hCe(a,o,r,n,i);case"Record":return mCe(a,o,r,n,i);case"Ref":return yCe(a,o,r,n,i);case"This":return gCe(a,o,r,n,i);case"Tuple":return xCe(a,o,r,n,i);case"Union":return bCe(a,o,r,n,i);default:return _i(a,r,n)}}function JG(e,t,r){let n=Gw();return vl(e,t,"",r,n)}var KG=f(()=>{wd();A3();Cd();L3();F3()});var k3,Cu,Hw,O3,R3,B3,Zw,Md,Ww,QG=f(()=>{im();Uc();wd();$r();Sa();em();ge();Dc();os();CS();mi();bn();ud();k3=class{constructor(t,r,n,i){this.schema=t,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=gl(t,r)}Code(){return this.code}Errors(t){return dl(this.schema,this.references,t)}Check(t){return this.checkFunc(t)}Decode(t){if(!this.checkFunc(t))throw new tm(this.schema,t,this.Errors(t).First());return this.hasTransform?rm(this.schema,this.references,t):t}Encode(t){let r=this.hasTransform?gw(this.schema,this.references,t):t;if(!this.checkFunc(r))throw new nm(this.schema,t,this.Errors(t).First());return r}};(function(e){function t(o){return o===36}e.DollarSign=t;function r(o){return o===95}e.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}e.IsAlpha=n;function i(o){return o>=48&&o<=57}e.IsNumeric=i})(Cu||(Cu={}));(function(e){function t(o){return o.length===0?!1:Cu.IsNumeric(o.charCodeAt(0))}function r(o){if(t(o))return!1;for(let a=0;a<o.length;a++){let s=o.charCodeAt(a);if(!(Cu.IsAlpha(s)||Cu.IsNumeric(s)||Cu.DollarSign(s)||Cu.IsUnderscore(s)))return!1}return!0}function n(o){return o.replace(/'/g,"\\'")}function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}e.Encode=i})(Hw||(Hw={}));(function(e){function t(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);Cu.IsNumeric(o)||Cu.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}e.Encode=t})(O3||(O3={}));(function(e){function t(r){return r.replace(/'/g,"\\'")}e.Escape=t})(R3||(R3={}));B3=class extends Oe{constructor(t){super("Unknown type"),this.schema=t}},Zw=class extends Oe{constructor(t){super("Preflight validation check failed to guard for the given schema"),this.schema=t}};(function(e){function t(a,s,l){return kt.ExactOptionalPropertyTypes?`('${s}' in ${a} ? ${l} : true)`:`(${Hw.Encode(a,s)} !== undefined ? ${l} : true)`}e.IsExactOptionalProperty=t;function r(a){return kt.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}e.IsObjectLike=r;function n(a){return kt.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}e.IsRecordLike=n;function i(a){return kt.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}e.IsNumberLike=i;function o(a){return kt.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}e.IsVoidLike=o})(Md||(Md={}));(function(e){function t(A){return A[N]==="Any"||A[N]==="Unknown"}function*r(A,se,O){yield"true"}function*n(A,se,O){yield`Array.isArray(${O})`;let[_e,le]=[Yt("value","any"),Yt("acc","number")];Ce(A.maxItems)&&(yield`${O}.length <= ${A.maxItems}`),Ce(A.minItems)&&(yield`${O}.length >= ${A.minItems}`);let ue=rt(A.items,se,"value");if(yield`${O}.every((${_e}) => ${ue})`,dt(A.contains)||Ce(A.minContains)||Ce(A.maxContains)){let Mt=dt(A.contains)?A.contains:Vt(),An=rt(Mt,se,"value"),oi=Ce(A.minContains)?[`(count >= ${A.minContains})`]:[],ai=Ce(A.maxContains)?[`(count <= ${A.maxContains})`]:[],Ei=`const count = value.reduce((${le}, ${_e}) => ${An} ? acc + 1 : acc, 0)`,Pp=["(count > 0)",...oi,...ai].join(" && ");yield`((${_e}) => { ${Ei}; return ${Pp}})(${O})`}A.uniqueItems===!0&&(yield`((${_e}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${O})`)}function*i(A,se,O){yield`(typeof value === 'object' && Symbol.asyncIterator in ${O})`}function*o(A,se,O){yield`(typeof ${O} === 'bigint')`,Gn(A.exclusiveMaximum)&&(yield`${O} < BigInt(${A.exclusiveMaximum})`),Gn(A.exclusiveMinimum)&&(yield`${O} > BigInt(${A.exclusiveMinimum})`),Gn(A.maximum)&&(yield`${O} <= BigInt(${A.maximum})`),Gn(A.minimum)&&(yield`${O} >= BigInt(${A.minimum})`),Gn(A.multipleOf)&&(yield`(${O} % BigInt(${A.multipleOf})) === 0`)}function*a(A,se,O){yield`(typeof ${O} === 'boolean')`}function*s(A,se,O){yield*Le(A.returns,se,`${O}.prototype`)}function*l(A,se,O){yield`(${O} instanceof Date) && Number.isFinite(${O}.getTime())`,Ce(A.exclusiveMaximumTimestamp)&&(yield`${O}.getTime() < ${A.exclusiveMaximumTimestamp}`),Ce(A.exclusiveMinimumTimestamp)&&(yield`${O}.getTime() > ${A.exclusiveMinimumTimestamp}`),Ce(A.maximumTimestamp)&&(yield`${O}.getTime() <= ${A.maximumTimestamp}`),Ce(A.minimumTimestamp)&&(yield`${O}.getTime() >= ${A.minimumTimestamp}`),Ce(A.multipleOfTimestamp)&&(yield`(${O}.getTime() % ${A.multipleOfTimestamp}) === 0`)}function*u(A,se,O){yield`(typeof ${O} === 'function')`}function*c(A,se,O){yield`Number.isInteger(${O})`,Ce(A.exclusiveMaximum)&&(yield`${O} < ${A.exclusiveMaximum}`),Ce(A.exclusiveMinimum)&&(yield`${O} > ${A.exclusiveMinimum}`),Ce(A.maximum)&&(yield`${O} <= ${A.maximum}`),Ce(A.minimum)&&(yield`${O} >= ${A.minimum}`),Ce(A.multipleOf)&&(yield`(${O} % ${A.multipleOf}) === 0`)}function*p(A,se,O){let _e=A.allOf.map(le=>rt(le,se,O)).join(" && ");if(A.unevaluatedProperties===!1){let le=zt(`${new RegExp(vu(A))};`),ue=`Object.getOwnPropertyNames(${O}).every(key => ${le}.test(key))`;yield`(${_e} && ${ue})`}else if(dt(A.unevaluatedProperties)){let le=zt(`${new RegExp(vu(A))};`),ue=`Object.getOwnPropertyNames(${O}).every(key => ${le}.test(key) || ${rt(A.unevaluatedProperties,se,`${O}[key]`)})`;yield`(${_e} && ${ue})`}else yield`(${_e})`}function*d(A,se,O){yield`(typeof value === 'object' && Symbol.iterator in ${O})`}function*h(A,se,O){typeof A.const=="number"||typeof A.const=="boolean"?yield`(${O} === ${A.const})`:yield`(${O} === '${R3.Escape(A.const)}')`}function*m(A,se,O){yield"false"}function*x(A,se,O){yield`(!${rt(A.not,se,O)})`}function*b(A,se,O){yield`(${O} === null)`}function*_(A,se,O){yield Md.IsNumberLike(O),Ce(A.exclusiveMaximum)&&(yield`${O} < ${A.exclusiveMaximum}`),Ce(A.exclusiveMinimum)&&(yield`${O} > ${A.exclusiveMinimum}`),Ce(A.maximum)&&(yield`${O} <= ${A.maximum}`),Ce(A.minimum)&&(yield`${O} >= ${A.minimum}`),Ce(A.multipleOf)&&(yield`(${O} % ${A.multipleOf}) === 0`)}function*T(A,se,O){yield Md.IsObjectLike(O),Ce(A.minProperties)&&(yield`Object.getOwnPropertyNames(${O}).length >= ${A.minProperties}`),Ce(A.maxProperties)&&(yield`Object.getOwnPropertyNames(${O}).length <= ${A.maxProperties}`);let _e=Object.getOwnPropertyNames(A.properties);for(let le of _e){let ue=Hw.Encode(O,le),Mt=A.properties[le];if(A.required&&A.required.includes(le))yield*Le(Mt,se,ue),(Su(Mt)||t(Mt))&&(yield`('${le}' in ${O})`);else{let An=rt(Mt,se,ue);yield Md.IsExactOptionalProperty(O,le,An)}}if(A.additionalProperties===!1)if(A.required&&A.required.length===_e.length)yield`Object.getOwnPropertyNames(${O}).length === ${_e.length}`;else{let le=`[${_e.map(ue=>`'${ue}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${O}).every(key => ${le}.includes(key))`}if(typeof A.additionalProperties=="object"){let le=rt(A.additionalProperties,se,`${O}[key]`),ue=`[${_e.map(Mt=>`'${Mt}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${O}).every(key => ${ue}.includes(key) || ${le}))`}}function*I(A,se,O){yield`(typeof value === 'object' && typeof ${O}.then === 'function')`}function*S(A,se,O){yield Md.IsRecordLike(O),Ce(A.minProperties)&&(yield`Object.getOwnPropertyNames(${O}).length >= ${A.minProperties}`),Ce(A.maxProperties)&&(yield`Object.getOwnPropertyNames(${O}).length <= ${A.maxProperties}`);let[_e,le]=Object.entries(A.patternProperties)[0],ue=zt(`${new RegExp(_e)}`),Mt=rt(le,se,"value"),An=dt(A.additionalProperties)?rt(A.additionalProperties,se,O):A.additionalProperties===!1?"false":"true",oi=`(${ue}.test(key) ? ${Mt} : ${An})`;yield`(Object.entries(${O}).every(([key, value]) => ${oi}))`}function*E(A,se,O){let _e=_t(A,se);if(Te.functions.has(A.$ref))return yield`${Re(A.$ref)}(${O})`;yield*Le(_e,se,O)}function*P(A,se,O){let _e=zt(`${new RegExp(A.source,A.flags)};`);yield`(typeof ${O} === 'string')`,Ce(A.maxLength)&&(yield`${O}.length <= ${A.maxLength}`),Ce(A.minLength)&&(yield`${O}.length >= ${A.minLength}`),yield`${_e}.test(${O})`}function*L(A,se,O){yield`(typeof ${O} === 'string')`,Ce(A.maxLength)&&(yield`${O}.length <= ${A.maxLength}`),Ce(A.minLength)&&(yield`${O}.length >= ${A.minLength}`),A.pattern!==void 0&&(yield`${zt(`${new RegExp(A.pattern)};`)}.test(${O})`),A.format!==void 0&&(yield`format('${A.format}', ${O})`)}function*k(A,se,O){yield`(typeof ${O} === 'symbol')`}function*z(A,se,O){yield`(typeof ${O} === 'string')`,yield`${zt(`${new RegExp(A.pattern)};`)}.test(${O})`}function*W(A,se,O){yield`${Re(A.$ref)}(${O})`}function*Z(A,se,O){if(yield`Array.isArray(${O})`,A.items===void 0)return yield`${O}.length === 0`;yield`(${O}.length === ${A.maxItems})`;for(let _e=0;_e<A.items.length;_e++)yield`${rt(A.items[_e],se,`${O}[${_e}]`)}`}function*Y(A,se,O){yield`${O} === undefined`}function*J(A,se,O){yield`(${A.anyOf.map(le=>rt(le,se,O)).join(" || ")})`}function*j(A,se,O){yield`${O} instanceof Uint8Array`,Ce(A.maxByteLength)&&(yield`(${O}.length <= ${A.maxByteLength})`),Ce(A.minByteLength)&&(yield`(${O}.length >= ${A.minByteLength})`)}function*ae(A,se,O){yield"true"}function*ve(A,se,O){yield Md.IsVoidLike(O)}function*xe(A,se,O){let _e=Te.instances.size;Te.instances.set(_e,A),yield`kind('${A[N]}', ${_e}, ${O})`}function*Le(A,se,O,_e=!0){let le=pt(A.$id)?[...se,A]:se,ue=A;if(_e&&pt(A.$id)){let Mt=Re(A.$id);if(Te.functions.has(Mt))return yield`${Mt}(${O})`;{let An=He(Mt,A,se,"value",!1);return Te.functions.set(Mt,An),yield`${Mt}(${O})`}}switch(ue[N]){case"Any":return yield*r(ue,le,O);case"Array":return yield*n(ue,le,O);case"AsyncIterator":return yield*i(ue,le,O);case"BigInt":return yield*o(ue,le,O);case"Boolean":return yield*a(ue,le,O);case"Constructor":return yield*s(ue,le,O);case"Date":return yield*l(ue,le,O);case"Function":return yield*u(ue,le,O);case"Integer":return yield*c(ue,le,O);case"Intersect":return yield*p(ue,le,O);case"Iterator":return yield*d(ue,le,O);case"Literal":return yield*h(ue,le,O);case"Never":return yield*m(ue,le,O);case"Not":return yield*x(ue,le,O);case"Null":return yield*b(ue,le,O);case"Number":return yield*_(ue,le,O);case"Object":return yield*T(ue,le,O);case"Promise":return yield*I(ue,le,O);case"Record":return yield*S(ue,le,O);case"Ref":return yield*E(ue,le,O);case"RegExp":return yield*P(ue,le,O);case"String":return yield*L(ue,le,O);case"Symbol":return yield*k(ue,le,O);case"TemplateLiteral":return yield*z(ue,le,O);case"This":return yield*W(ue,le,O);case"Tuple":return yield*Z(ue,le,O);case"Undefined":return yield*Y(ue,le,O);case"Union":return yield*J(ue,le,O);case"Uint8Array":return yield*j(ue,le,O);case"Unknown":return yield*ae(ue,le,O);case"Void":return yield*ve(ue,le,O);default:if(!On.Has(ue[N]))throw new B3(A);return yield*xe(ue,le,O)}}let Te={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function rt(A,se,O,_e=!0){return`(${[...Le(A,se,O,_e)].join(" && ")})`}function Re(A){return`check_${O3.Encode(A)}`}function zt(A){let se=`local_${Te.variables.size}`;return Te.variables.set(se,`const ${se} = ${A}`),se}function He(A,se,O,_e,le=!0){let[ue,Mt]=[`
`,Ei=>"".padStart(Ei," ")],An=Yt("value","any"),oi=Fe("boolean"),ai=[...Le(se,O,_e,le)].map(Ei=>`${Mt(4)}${Ei}`).join(` &&${ue}`);return`function ${A}(${An})${oi} {${ue}${Mt(2)}return (${ue}${ai}${ue}${Mt(2)})
}`}function Yt(A,se){let O=Te.language==="typescript"?`: ${se}`:"";return`${A}${O}`}function Fe(A){return Te.language==="typescript"?`: ${A}`:""}function Lr(A,se,O){let _e=He("check",A,se,"value"),le=Yt("value","any"),ue=Fe("boolean"),Mt=[...Te.functions.values()],An=[...Te.variables.values()],oi=pt(A.$id)?`return function check(${le})${ue} {
  return ${Re(A.$id)}(value)
}`:`return ${_e}`;return[...An,...Mt,oi].join(`
`)}function Mn(...A){let se={language:"javascript"},[O,_e,le]=A.length===2&&Ne(A[1])?[A[0],A[1],se]:A.length===2&&!Ne(A[1])?[A[0],[],A[1]]:A.length===3?[A[0],A[1],A[2]]:A.length===1?[A[0],[],se]:[null,[],se];if(Te.language=le.language,Te.variables.clear(),Te.functions.clear(),Te.instances.clear(),!dt(O))throw new Zw(O);for(let ue of _e)if(!dt(ue))throw new Zw(ue);return Lr(O,_e,le)}e.Code=Mn;function ii(A,se=[]){let O=Mn(A,se,{language:"javascript"}),_e=globalThis.Function("kind","format","hash",O),le=new Map(Te.instances);function ue(ai,Ei,Pp){if(!On.Has(ai)||!le.has(Ei))return!1;let j_=On.Get(ai),_M=le.get(Ei);return j_(_M,Pp)}function Mt(ai,Ei){return Qi.Has(ai)?Qi.Get(ai)(Ei):!1}function An(ai){return Nc(ai)}let oi=_e(ue,Mt,An);return new k3(A,se,oi,O)}e.Compile=ii})(Ww||(Ww={}))});var eH=f(()=>{QG()});var vCe,_Ce,SCe,Xw,z3=f(()=>{vCe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,_Ce=[0,31,28,31,30,31,30,31,31,30,31,30,31],SCe=e=>e%4===0&&(e%100!==0||e%400===0),Xw=e=>{let t=vCe.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(n===2&&SCe(r)?29:_Ce[n])}});var wCe,qw,N3=f(()=>{wCe=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i,qw=e=>{let t=wCe.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3],o=t[4],a=t[5]==="-"?-1:1,s=+(t[6]||0),l=+(t[7]||0);if(s>23||l>59||!o)return!1;if(r<=23&&n<=59&&i<60)return!0;let u=n-l*a,c=r-s*a-(u<0?1:0);return(c===23||c===-1)&&(u===59||u===-1)&&i<61}});var TCe,tH,rH=f(()=>{z3();N3();TCe=/t|\s/i,tH=e=>{let t=e.split(TCe);return t.length===2&&Xw(t[0])&&qw(t[1])}});var ICe,ECe,nH,iH=f(()=>{ICe=/\/|:/,ECe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,nH=e=>ICe.test(e)&&ECe.test(e)});var CCe,oH,aH=f(()=>{wd();rH();z3();N3();iH();CCe=[["date",Xw],["time",qw],["date-time",tH],["uri",nH]],oH=()=>{for(let[e,t]of CCe)try{uw.Format(e,t)}catch(r){if(r instanceof H0)continue;throw r}}});var U3,fs,$3,V3=f(()=>{Xe();U3=v.Record(v.String(),v.Unknown(),{$id:"Extra"}),fs=v.Object({extra:v.Optional(v.Ref(U3))}),$3=[U3]});var nx=f(()=>{P3()});var ix=f(()=>{qh()});var Tt,j3=f(()=>{Tt=e=>Object.entries(e)});var PCe,_n,sH=f(()=>{er();Jh();j3();PCe=e=>{let t=new Map;for(let[r,n]of Tt(e.geometry??{}))t.set(r,new Map(n?.features.map(i=>[i.properties.id,i])));return t},_n=e=>{let t=PCe(e);return(n,i)=>{let o=t.get(n);if(o==null)return fe({kind:oo.UnknownFloorError,properties:{floorId:n}});let a=o.get(i);return a==null?fe({kind:oo.UnknownGeometryError,properties:{floorId:n,geometryId:i}}):de(a)}}});var _l=f(()=>{sH()});var ao=f(()=>{Bc()});var lH=f(()=>{});var G3=f(()=>{nx();ix();_l();ao();lH()});var Ca,mm,H3,Z3=f(()=>{Xe();G3();Ca=v.Object({geometryId:v.Ref(xi)},{$id:"WithGeometryId"}),mm=v.Object({geometryIds:v.Array(v.Ref(xi))},{$id:"WithGeometryIds"}),H3=[Ca,mm]});var uH,cH=f(()=>{uH=e=>e instanceof Error?e:new Error(String(e))});var ym,W3=f(()=>{er();cH();ym=e=>(...t)=>{try{return de(e(...t))}catch(r){return fe(uH(r))}}});var pH,X3,MCe,q3,dH=f(()=>{er();W3();ex();pH=ym((e,t)=>{let r={};for(let n of t)for(let i of n.intoBundle(e))r[i.path]=lm(JSON.stringify(i.contents));return r}),X3=async(e,t,r)=>pH(e,t).andThenAsync(n=>new Promise(i=>{IG(n,{...r,consume:!0},(o,a)=>{i(o?fe(o):de(a))})})),MCe=ym(EG),q3=(e,t,r)=>pH(e,t).andThen(n=>MCe(n,r))});function Yw(e,t,r=[]){let n={...e};for(let[i,o]of Object.entries(t))if(o!==void 0)if(i in n){let a=i;if(Array.isArray(o)&&o.length>0){let s=ACe(o[0],r);if(s){let l=n[a];if(!Array.isArray(l))throw new Error(`Expected array at ${i}, got ${typeof l}`);let u=new Map(o.map(d=>[fH(d,s),d])),p=l.map(d=>{let h=u.get(fH(d,s));return h?Yw(d,h,r):d});n[a]=p}else n[a]=o}else{let s=n[a];typeof s=="object"&&s!==null&&typeof o=="object"&&o!==null?Object.keys(o).length===0?n[a]=o:n[a]=Yw(s,o,r):n[i]=o}}else n[i]=o;return n}function ACe(e,t){function r(n){if(typeof n!="object"||n===null)return null;for(let i of t)if(i in n&&typeof n[i]<"u")return[i];if(Array.isArray(n))return null;for(let[i,o]of Object.entries(n)){let a=r(o);if(a)return[i,...a]}return null}return r(e)}function fH(e,t){return t.reduce((r,n)=>{if(r&&typeof r=="object")return r[n]},e)}var hH=f(()=>{});var DCe,LCe,mH,yH,Y3,FCe,J3,gH=f(()=>{er();W3();ex();hH();DCe=e=>e,LCe=e=>JSON.parse(S3(e)),mH=(e,t)=>t.some(r=>r.fromBundle(e.name,new Uint8Array,DCe)!==void 0),yH=ym((e,t)=>{let r={};for(let n of Object.keys(e)){let i=e[n];for(let o of t){let a=o.fromBundle(n,i,LCe);if(a){r=Yw(r,a,[]);break}}}return r}),Y3=async(e,t)=>new Promise(r=>CG(e,{filter:n=>mH(n,t)},(n,i)=>{r(n?fe(n):de(i))})).then(r=>r.andThen(n=>yH(n,t))),FCe=ym(PG),J3=(e,t)=>FCe(e,{filter:r=>mH(r,t)}).andThen(r=>yH(r,t))});var kCe,OCe,Jw,xH=f(()=>{kCe=e=>typeof e=="object"&&e!=null&&"$ref"in e&&typeof e.$ref=="string",OCe=e=>{if(e.length<2)return!1;let t=e.filter(kCe);if(t.length!==e.length)return!1;let r=t[0].$ref;return t.slice(1).every(n=>n.$ref===r)},Jw=e=>typeof e=="object"&&e!=null&&"allOf"in e&&Array.isArray(e.allOf)&&OCe(e.allOf)?e.allOf[0]:typeof e=="object"&&e!=null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,Jw(r)])):Array.isArray(e)?e.map(Jw):e});var Kw,bH=f(()=>{Kw=e=>typeof e=="object"&&e!=null&&"$ref"in e?{...e,$ref:`#/definitions/${e.$ref}`}:typeof e=="object"&&e!=null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,Kw(r)])):Array.isArray(e)?e.map(Kw):e});var gm,RCe,BCe,zn,xm,Go,Jn,K3,Qw,Q3=f(()=>{er();YG();KG();Xe();eH();Cd();qh();Bc();T3();I3();aH();Si();G0();V3();Z3();dH();gH();xH();bH();(function(e){e.InvalidTypeboxSchema="InvalidTypeboxSchema",e.MissingReferenceId="MissingReferenceId",e.DuplicateReferenceId="DuplicateReferenceId",e.TypeboxError="TypeboxError",e.UnknownError="UnknownError"})(gm||(gm={}));RCe=e=>({next(){for(let r of e){let n=r.next();if(!n.done)return n}return{done:!0,value:void 0}},[Symbol.iterator](){return this}}),BCe=(...e)=>{let t=new Map;for(let r of RCe(e)){if(!r.$id)continue;let n=t.get(r.$id);if(n!=null&&n!==r)return fe({kind:gm.DuplicateReferenceId,message:"Failed to register a reference for a schema with an $id that has already been used",schema:r});t.set(r.$id,r)}return de(t)},K3=class K3{constructor(t,r,n,i){D(this,zn);D(this,xm);D(this,Go,[]);D(this,Jn);R(this,zn,t),R(this,xm,r),R(this,Go,n),R(this,Jn,i),this.is=this.is.bind(this),this.parse=this.parse.bind(this),this.verify=this.verify.bind(this),this.jsonSchema=this.jsonSchema.bind(this),this.compress=this.compress.bind(this),this.decompress=this.decompress.bind(this)}static create(t,r="CoreMVF",n=!1){let i=v.Composite(t.extensions.map(a=>a.schema),{$id:r});if(!M.IsSchema(i))return fe({kind:gm.InvalidTypeboxSchema,message:"Attempting to merge schemas produced an invalid schema",schema:i});let o=BCe(FA.values(),kA.values(),DA.values(),$3.values(),eD.values(),H3.values(),t.extensions.flatMap(a=>a.references??[]).values());if(!o.isOk())return o;try{oH();let a=n?null:Ww.Compile(i,[...o.value.values()]);return de(new K3(i,a,t.extensions,o.value))}catch(a){return a instanceof Oe?fe({kind:gm.TypeboxError,message:a.message,original:a}):fe({kind:gm.UnknownError,message:"An unknown error occurred while compiling the schema",original:a})}}is(t){return y(this,xm)?.Check(t)??cs.Check(y(this,zn),[...y(this,Jn).values()],t)}parse(t){return this.is(t)?de(t):fe(y(this,xm)?.Errors(t)??cs.Errors(y(this,zn),[...y(this,Jn).values()],t))}decode(t){try{return de(qG(y(this,zn),[...y(this,Jn).values()],t))}catch(r){return fe(r)}}encode(t){try{return de(JG(y(this,zn),[...y(this,Jn).values()],t))}catch(r){return fe(r)}}verify(t){for(let r of y(this,Go))if(r.integrityCheck){let n=r.integrityCheck(t);if(n.isErr())return fe(n.error)}return de(!0)}jsonSchema(){let t=JSON.parse(JSON.stringify([y(this,zn),...y(this,Jn).values()])),r=Jw(Kw({$id:`#/definitions/${y(this,zn).$id??"CoreMVF"}`,$schema:"http://json-schema.org/draft-07/schema#",references:t}));return JSON.stringify(r,null,2)}async compress(t){return this.encode(t).andThen(r=>this.parse(r)).andThenAsync(r=>X3(r,y(this,Go))).then(r=>r.mapErr(n=>tx(y(this,zn).$id??"CoreMVF",n,[...y(this,Jn).values()])))}async compressUnsafe(t){return this.encode(t).andThenAsync(r=>X3(r,y(this,Go))).then(r=>r.mapErr(n=>tx(y(this,zn).$id??"CoreMVF",n,[...y(this,Jn).values()])))}compressSync(t){return this.encode(t).andThen(r=>this.parse(r)).andThen(r=>q3(r,y(this,Go))).mapErr(r=>tx(y(this,zn).$id??"CoreMVF",r,[...y(this,Jn).values()]))}compressUnsafeSync(t){return this.encode(t).andThen(r=>q3(r,y(this,Go))).mapErr(r=>tx(y(this,zn).$id??"CoreMVF",r,[...y(this,Jn).values()]))}async decompress(t){return Y3(t,y(this,Go)).then(r=>r.andThen(n=>this.parse(n)).andThen(n=>this.decode(n)).mapErr(n=>rx(y(this,zn).$id??"CoreMVF",n,[...y(this,Jn).values()])))}async decompressUnsafe(t){return Y3(t,y(this,Go)).then(r=>r.andThen(n=>this.decode(n)).mapErr(n=>rx(y(this,zn).$id??"CoreMVF",n,[...y(this,Jn).values()])))}decompressSync(t){return J3(t,y(this,Go)).andThen(r=>this.parse(r)).andThen(r=>this.decode(r)).mapErr(r=>rx(y(this,zn).$id??"CoreMVF",r,[...y(this,Jn).values()]))}decompressUnsafeSync(t){return J3(t,y(this,Go)).andThen(r=>this.decode(r)).mapErr(r=>rx(y(this,zn).$id??"CoreMVF",r,[...y(this,Jn).values()]))}};zn=new WeakMap,xm=new WeakMap,Go=new WeakMap,Jn=new WeakMap;Qw=K3});var bm,eT,vH=f(()=>{Xe();Q3();eT=class{constructor(){D(this,bm,[]);this.extend=this.extend.bind(this)}extend(t){return y(this,bm).push(t),this}extendOptional(t){let r={...t,schema:v.Partial(t.schema)};return y(this,bm).push(r),this}build(t){return Qw.create(this,void 0,t?.cspSafe)}get extensions(){return y(this,bm)}};bm=new WeakMap});var _H=f(()=>{G0()});var SH=f(()=>{V3()});var vm,zCe,ox,eD,wH=f(()=>{Xe();Bc();Bc();vm=v.Object({geometryId:v.Ref(xi),floorId:v.Ref(ut)},{$id:"GeometryAnchor"}),zCe=v.Object({geometryAnchor:v.Ref(vm)}),ox=(e,t)=>v.Object({geometryAnchors:v.Array(v.Ref(vm),e)},t),eD=[vm]});var TH=f(()=>{wH()});var IH=f(()=>{Z3()});var EH,so,CH=f(()=>{Xe();EH=(e,t)=>v.Unsafe(v.Transform(v.String(t)).Decode(r=>e.includes(r)?r:"unknown").Encode(r=>r)),so=(e,t)=>{let r=EH(e,t),n=[...e,"unknown"],i=Object.freeze(Object.fromEntries([...e,"unknown"].map(o=>[o,o])));return{schema:r,values:n,record:i}}});var PH=f(()=>{CH()});var MH=f(()=>{});var Pa=f(()=>{_H();SH();TH();IH();C3();PH();MH()});var AH=f(()=>{});var DH,Si=f(()=>{RG();jG();XG();vH();G3();E3();Pa();Q3();AH();DH=()=>new eT().extend(OG).extend(VG).extend(WG)});var LH=f(()=>{});var FH=f(()=>{});var Xt=f(()=>{Vw();j3();$w()});var ax,kH=f(()=>{(function(e){e.AnnotationNonPointGeometryError="AnnotationNonPointGeometryError",e.AnnotationUnknownSymbolError="AnnotationUnknownSymbolError"})(ax||(ax={}))});var OH,RH=f(()=>{_l();Xt();Xt();er();kH();OH=e=>{if(e.annotations==null)return de(!0);let t=Gr(e.annotations,i=>i.id,"annotations");if(t.isErr())return t;let r=_n(e),n=new Set(ht(e.annotationSymbols??{}));for(let i of ht(e.annotations)){let o=e.annotations[i];if(o!=null)for(let a of o){if(!n.has(a.symbolKey))return fe({kind:ax.AnnotationUnknownSymbolError,properties:{annotationId:a.id,symbolKey:a.symbolKey}});let s=r(i,a.geometryId);if(s.isErr())return s;if(s.value.geometry.type!=="Point")return fe({kind:ax.AnnotationNonPointGeometryError,properties:{annotationId:a.id,floorId:i,geometryId:a.geometryId}})}}return de(!0)}});var BH,tD,zH,NCe,UCe,NH,UH=f(()=>{ao();ao();Pa();Xt();Xe();RH();BH=jr("a","AnnotationId"),tD=v.Intersect([Ca,v.Object({id:v.Ref(BH,{description:"The unique identifier for the annotation."}),externalId:v.Optional(v.String({description:"The external identifier for the annotation."})),symbolKey:v.String({description:"The symbol identifier for the annotation."})})],{$id:"AnnotationProperties"}),zH=v.Object({url:v.String({format:"uri",description:"The URL for the symbol."}),name:v.String({description:"The name of the symbol."})},{$id:"AnnotationSymbol"}),NCe=v.Object({annotations:Hr(v.Record(ut,v.Array(v.Ref(tD)),{additionalProperties:!1})),annotationSymbols:Hr(v.Record(v.Index(tD,["symbolKey"]),v.Ref(zH)))},{$id:"AnnotationsSchema"}),UCe=/^annotations\/(.*)\.json$/,NH={name:"ext:mvf-annotations",schema:NCe,intoBundle:function*(e){if(e.annotations!=null)for(let t of ht(e.annotations))yield{path:`annotations/${t}.json`,contents:e.annotations[t]};e.annotationSymbols!=null&&(yield{path:"annotation-symbols.json",contents:e.annotationSymbols})},fromBundle:(e,t,r)=>{if(e==="annotation-symbols.json")return{annotationSymbols:r(t)};let n=e.match(UCe)?.[1];if(n)return{annotations:{[n]:r(t)}}},references:[BH,tD,zH],integrityCheck:OH}});var Pu,rD,$H,tT=f(()=>{Si();ao();Xe();Pu=jr("lcat","LocationCategoryId"),rD=v.Intersect([v.Object({id:v.Ref(Pu),parent:v.Optional(v.Ref(Pu))}),_d(["name"]),fs],{$id:"LocationCategory"}),$H=[Pu,rD]});var Ad,VH=f(()=>{(function(e){e.UnknownCategoryError="UnknownCategoryError",e.UnknownParentCategoryError="UnknownParentCategoryError",e.UnknownParentLocationError="UnknownParentLocationError"})(Ad||(Ad={}))});var jH,GH=f(()=>{_l();Xt();er();VH();jH=e=>{if(e.locationCategories==null&&e.locations==null)return de(!0);if(e.locationCategories!=null){let i=Gr(e.locationCategories,o=>o.id,"locationCategories");if(i.isErr())return i}if(e.locations!=null){let i=Gr(e.locations,o=>o.id,"locations");if(i.isErr())return i}if(e.locationInstances!=null){let i=Gr(e.locationInstances,o=>o.id,"locationInstances");if(i.isErr())return i}let t=new Set(e.locationCategories?.map(i=>i.id)??[]);for(let i of e.locationCategories??[])if(i.parent!=null&&!t.has(i.parent))return fe({kind:Ad.UnknownParentCategoryError,properties:{categoryId:i.id,parentCategoryId:i.parent}});let r=_n(e);for(let i of e.locations??[]){for(let o of i.categories)if(!t.has(o))return fe({kind:Ad.UnknownCategoryError,properties:{locationId:i.id,categoryId:o}});for(let o of i.geometryAnchors){let a=r(o.floorId,o.geometryId);if(a.isErr())return a}}let n=new Set(e.locations?.map(i=>i.id)??[]);for(let i of e.locationInstances??[]){if(!n.has(i.parentId))return fe({kind:Ad.UnknownParentLocationError,properties:{locationInstanceId:i.id,parentLocationId:i.parentId}});for(let o of i.categories??[])if(!t.has(o))return fe({kind:Ad.UnknownCategoryError,properties:{locationId:i.id,categoryId:o}});for(let o of i.geometryAnchors??[]){let a=r(o.floorId,o.geometryId);if(a.isErr())return a}}return de(!0)}});var Mu,rT,HH,ZH,nD,iD,WH,$Ce,oD,nT,iT,aD,oT,sD=f(()=>{Si();ao();Xe();tT();Mu=jr("loc","LocationId"),rT=jr("loci","LocationInstanceId"),HH=v.Object({name:v.String(),url:v.String({format:"uri"})},{$id:"LocationSocial"}),ZH=v.Object({url:v.String({format:"uri"})},{$id:"LocationImage"}),nD=v.Object({label:v.String(),url:v.String({format:"uri"})},{$id:"LocationLink"}),iD=v.String({pattern:"^[0-2][0-9]:[0-6][0-9](:[0-6][0-9])?$",$id:"OpeningHoursTime"}),WH=v.Union([v.Literal("Sunday"),v.Literal("Monday"),v.Literal("Tuesday"),v.Literal("Wednesday"),v.Literal("Thursday"),v.Literal("Friday"),v.Literal("Saturday")],{$id:"OpeningHoursDay"}),$Ce="PublicHolidays",oD=v.Union([WH,v.Literal($Ce)],{$id:"OpeningHoursDayOrPublicHoliday"}),nT=v.Object({"@type":v.Optional(v.Literal("OpeningHoursSpecification",{description:"The type of opening hours"})),opens:v.Optional(v.Ref(iD,{description:"The time the opening hours start"})),closes:v.Optional(v.Ref(iD,{description:"The time the opening hours end"})),dayOfWeek:v.Optional(v.Union([v.Ref(oD),v.Array(v.Ref(oD))],{description:"The days of the week the opening hours apply to"})),validFrom:v.Optional(v.String({format:"date",description:"The date the opening hours start, in ISO 8601 format"})),validThrough:v.Optional(v.String({format:"date",description:"The date the opening hours end, in ISO 8601 format"}))},{$id:"OpeningHoursSpecification"}),iT=v.Intersect([v.Object({id:v.Ref(Mu),categories:v.Array(v.Ref(Pu)),logo:v.Optional(v.String({format:"uri"})),phone:v.Optional(v.String()),social:v.Array(v.Ref(HH)),images:v.Array(v.Ref(ZH)),links:v.Array(v.Ref(nD)),website:v.Optional(v.Ref(nD)),openingHours:v.Optional(v.Array(v.Ref(nT)))}),_d(["name"]),ox(),fs],{$id:"Location"}),aD=v.Intersect([v.Object({id:v.Ref(rT),parentId:v.Ref(Mu)}),v.Partial(v.Omit(iT,["id","parentId","details"])),Bo],{$id:"LocationInstance",description:"A location instance is a particular instance of an location that has some properties different from the parent."}),oT=[Mu,rT,HH,ZH,nD,iD,WH,oD,nT,iT,aD]});var VCe,XH,qH,YH,JH,Vc=f(()=>{Xe();tT();GH();sD();sD();tT();VCe=v.Object({locations:v.Array(v.Ref(iT)),locationCategories:v.Array(v.Ref(rD)),locationInstances:v.Optional(v.Array(v.Ref(aD)))},{$id:"LocationsExtensionSchema"}),XH="locations.json",qH="location-categories.json",YH="location-instances.json",JH={name:"ext:locations",schema:VCe,intoBundle:function*(e){e.locations!=null&&(yield{path:XH,contents:e.locations}),e.locationCategories!=null&&(yield{path:qH,contents:e.locationCategories}),e.locationInstances!=null&&(yield{path:YH,contents:e.locationInstances})},fromBundle:(e,t,r)=>{if(e===XH)return{locations:r(t)};if(e===qH)return{locationCategories:r(t)};if(e===YH)return{locationInstances:r(t)}},references:[...$H,...oT],integrityCheck:jH}});var hs,KH=f(()=>{(function(e){e.EnterpriseLocationWithUnknownLocationError="EnterpriseLocationWithUnknownLocationError",e.EnterpriseCategoryWithUnknownLocationCategoryError="EnterpriseCategoryWithUnknownLocationCategoryError",e.InstanceWithUnknownLocationInstanceError="InstanceWithUnknownLocationInstanceError",e.InstanceWithUnknownEnterpriseLocationError="InstanceWithUnknownEnterpriseLocationError",e.EnterpriseLocationWithUnknownSibling="EnterpriseLocationWithUnknownSibling",e.EnterpriseLocationInstanceWithUnknownSibling="EnterpriseLocationInstanceWithUnknownSibling",e.EnterpriseVenueWithUnknownTopLocationError="EnterpriseVenueWithUnknownTopLocationError",e.EnterpriseLocationWithInvalidPrimaryCategory="EnterpriseLocationWithInvalidPrimaryCategory"})(hs||(hs={}))});var QH,eZ=f(()=>{Si();Xt();er();KH();QH=e=>{if(e.cms==null)return de(!0);let t=e.cms,r=Gr(e.cms.categories,d=>d.id,"cms.categories");if(r.isErr())return r;let n=new Set(e.locationCategories?.map(d=>d.id)??[]);for(let d of t.categories??[])if(!n.has(d.categoryId))return fe({kind:hs.EnterpriseCategoryWithUnknownLocationCategoryError,properties:{enterpriseCategoryId:d.id,locationCategoryId:d.categoryId}});let i=Gr(e.cms.locations,d=>d.id,"cms.locations");if(i.isErr())return i;let o=new Map(e.locations?.map(d=>[d.id,d])??[]);for(let d of t.locations??[]){if(!o.has(d.locationId))return fe({kind:hs.EnterpriseLocationWithUnknownLocationError,properties:{enterpriseLocationId:d.id,locationId:d.locationId}});for(let h of d.siblingGroups??[])for(let m of h.siblings??[])if(!o.has(m))return fe({kind:hs.EnterpriseLocationWithUnknownSibling,properties:{enterpriseLocationId:d.id,siblingLocationId:m,label:h.label}});if(d.primaryCategory!=null){let h=o.get(d.locationId);if(h!=null&&!h.categories.includes(d.primaryCategory))return fe({kind:hs.EnterpriseLocationWithInvalidPrimaryCategory,properties:{enterpriseLocationId:d.id,locationId:d.locationId,primaryCategory:d.primaryCategory}})}}if(t.venue?.topLocations!=null){for(let d of t.venue.topLocations)if(!o.has(d))return fe({kind:hs.EnterpriseVenueWithUnknownTopLocationError,properties:{locationId:d}})}let a=new Set(e.cms.locations?.map(d=>d.id)??[]),s=Gr(e.cms.locationInstances,d=>d.id,"cms.locationInstances");if(s.isErr())return s;let l=new Set(e.locationInstances?.map(d=>d.id)??[]);for(let d of t.locationInstances??[]){if(!a.has(d.parentId))return fe({kind:hs.InstanceWithUnknownEnterpriseLocationError,properties:{enterpriseLocationInstanceId:d.id,enterpriseLocationId:d.parentId}});if(!l.has(d.locationInstanceId))return fe({kind:hs.InstanceWithUnknownLocationInstanceError,properties:{enterpriseLocationInstanceId:d.id,locationInstanceId:d.locationInstanceId}});for(let h of d.siblingGroups??[])for(let m of h.siblings??[])if(!o.has(m))return fe({kind:hs.EnterpriseLocationInstanceWithUnknownSibling,properties:{enterpriseLocationInstanceId:d.id,siblingLocationId:m,label:h.label}})}let u=ds(e),c=_n(e),p=Gr(e.cms.floorText,d=>d.properties.id,"cms.floorText");if(p.isErr())return p;for(let[d,h]of Tt(t.floorText??{})){let m=u(d);if(m.isErr())return m;for(let x of h.features){if(!("geometryId"in x.properties))continue;let b=c(d,x.properties.geometryId);if(b.isErr())return b}}for(let[d,h]of Tt(t.textures??{})){let m=u(d);if(m.isErr())return m;for(let x of h){let b=c(d,x.geometryId);if(b.isErr())return b}}for(let[d,h]of Tt(t.layers??{})){let m=u(d);if(m.isErr())return m;for(let x of ht(h??{})){let b=c(d,x);if(b.isErr())return b}}for(let[d,h]of Tt(t.textAreas??{})){let m=u(d);if(m.isErr())return m;for(let x of h.features)if("geometryId"in x.properties){let b=c(d,x.properties.geometryId);if(b.isErr())return b}}return de(!0)}});var sx,lD,uD,cD,pD,tZ,jc=f(()=>{Si();sx=jr("el","EnterpriseLocationId"),lD=jr("ec","EnterpriseCategoryId"),uD=jr("eli","EnterpriseLocationInstanceId"),cD=jr("ev","EnterpriseVenueId"),pD=jr("eft","EnterpriseFloorTextId"),tZ=[sx,lD,uD,cD,pD]});var rZ,dD,nZ,fD=f(()=>{Vc();Xe();jc();rZ=v.Object({id:v.Ref(lD),categoryId:v.Ref(Pu),color:v.Optional(v.String()),sortOrder:v.Number(),iconFromDefaultList:v.Optional(v.Union([v.String(),v.Null()])),picture:v.Optional(v.String({format:"uri",description:"The category's picture"}))},{$id:"EnterpriseCategory"}),dD=v.Object({categories:v.Optional(v.Array(v.Ref(rZ)))},{$id:"EnterpriseCategoriesSchema"}),nZ=[rZ,dD]});var iZ,jCe,m1t,hD,mD,yD,oZ,aZ,GCe,HCe,sZ,lZ,gD,uZ,xD=f(()=>{Si();Si();Xe();jc();iZ=so(["left","center","right"]),jCe=iZ.schema,m1t=iZ.values,hD=v.Object({id:v.Ref(pD),text:v.String(),visible:v.Boolean({default:!0}),fontSize:v.Number({default:12,exclusiveMinimum:0}),fontFamily:v.String({default:"Droid Sans"}),color:v.String({default:"black"}),rotation:v.Number({minimum:0,maximum:360}),align:jCe},{$id:"FloorTextCommonProperties"}),mD=v.Intersect([v.Ref(hD),Ca],{$id:"AnchoredFloorTextProperties"}),yD=v.Intersect([v.Ref(hD),v.Object({verticalOffset:v.Number()})],{$id:"FloatingFloorTextProperties"}),oZ=v.Union([v.Ref(mD),v.Ref(yD)],{$id:"FloorTextProperties"}),aZ=Zn(gi,v.Ref(oZ),{$id:"FloorTextFeature"}),GCe=Zn(gi,v.Ref(mD),{$id:"AnchoredFloorTextFeature"}),HCe=Zn(gi,v.Ref(yD),{$id:"FloatingFloorTextFeature"}),sZ=Li(v.Ref(aZ),{$id:"EnterpriseFloorTextFeatureCollection"}),lZ=v.Record(ut,v.Ref(sZ),{$id:"EnterpriseFloorTextCollectionsByFloor",additionalProperties:!1}),gD=v.Object({floorText:v.Optional(v.Ref(lZ))},{$id:"EnterpriseFloorTextSchema"}),uZ=[hD,mD,yD,oZ,aZ,GCe,HCe,sZ,lZ,gD]});var cZ,pZ,bD,dZ,vD=f(()=>{Si();ao();Xe();cZ=Hr(v.Record(xi,v.String({minLength:1}),{additionalProperties:!1,$id:"EnterpriseLayers"})),pZ=Hr(v.Record(ut,v.Ref(cZ),{additionalProperties:!1,$id:"EnterpriseLayersByFloor"})),bD=v.Object({layers:v.Optional(v.Ref(pZ))},{$id:"EnterpriseLayersSchema"}),dZ=[cZ,pZ,bD]});var _D,ZCe,T1t,I1t,SD,wD,aT,fZ,lx=f(()=>{Si();Vc();Xe();_D=so(["closed-temporarily","new","pop-up","coming-soon","relocated"]),ZCe=_D.schema,T1t=_D.values,I1t=_D.record,SD=v.Object({type:ZCe,start:v.Optional(v.String({format:"date",description:"The start date of the state"})),end:v.Optional(v.String({format:"date",description:"The end date of the state"}))},{$id:"LocationState",description:"The state of a location. Start and end dates are optional."}),wD=v.Object({label:v.String(),siblings:v.Array(v.Ref(Mu))},{$id:"SiblingGroup"}),aT=v.Object({name:v.String(),code:v.String()},{$id:"Language"}),fZ=[SD,wD,aT]});var sT,TD,hZ,lT=f(()=>{Vc();Xe();jc();lx();sT=v.Object({id:v.Ref(sx),locationId:v.Ref(Mu),cmsId:v.String(),type:v.String(),sortOrder:v.Number(),tags:v.Optional(v.Array(v.String())),picture:v.Optional(v.String({format:"uri",description:"The picture of the location"})),states:v.Optional(v.Array(v.Ref(SD),{description:"The location's state. No more than one state should be active at a time, and all but at most one should have dates set"})),siblingGroups:v.Optional(v.Array(v.Ref(wD))),gallery:v.Optional(v.Array(v.Object({caption:v.Optional(v.String()),image:v.String({format:"uri"}),embeddedUrl:v.Optional(v.String({format:"uri",description:"The URL to link from the image"}))},{description:"The location's image gallery"}),{description:"The location's image gallery"})),showFloatingLabelWhenImagePresent:v.Optional(v.Boolean({description:"Whether to show the flat label when an image is present"})),amenity:v.Optional(v.String({description:"The location's amenity type. Only set if the location is an amenity"})),showLogo:v.Optional(v.Boolean({description:"Whether to show the logo of the location"})),primaryCategory:v.Optional(v.Ref(Pu))},{$id:"EnterpriseLocation"}),TD=v.Object({locations:v.Optional(v.Array(v.Ref(sT)))},{$id:"EnterpriseLocationsSchema"}),hZ=[sT,TD]});var mZ,ID,yZ,ED=f(()=>{Vc();Xe();lT();jc();mZ=v.Intersect([v.Object({id:v.Ref(uD),parentId:v.Ref(sx),locationInstanceId:v.Ref(rT)}),v.Partial(v.Omit(sT,["id","parentId","locationId"]))],{$id:"EnterpriseLocationInstance",description:"A locationInstance is a particular instance of an Enterprise Location that has some properties different from the parent."}),ID=v.Object({locationInstances:v.Optional(v.Array(v.Ref(mZ)))},{$id:"EnterpriseLocationInstancesSchema"}),yZ=[mZ,ID]});var CD,gZ,$1t,V1t,PD,xZ,bZ,vZ,_Z,SZ,wZ,TZ,IZ,MD=f(()=>{ix();ao();Pa();Xe();CD=so(["near","center"],{$id:"EnterpriseTextAreaAlignment"}),gZ=CD.schema,$1t=CD.values,V1t=CD.record,PD=v.Object({maxWidth:v.Number({exclusiveMinimum:0,description:"The maximum width of the label, in meters."}),maxHeight:v.Number({exclusiveMinimum:0,description:"The maximum height of the label, in meters."}),align:v.Ref(gZ),rotation:v.Number({minimum:0,maximum:360,description:"Rotation in degrees, about the center of the image. North is 0, east is 90."})},{$id:"EnterpriseBaseTextAreaProperties"}),xZ=v.Intersect([v.Ref(PD),Ca],{$id:"EnterpriseAnchoredTextAreaProperties"}),bZ=v.Intersect([v.Ref(PD),v.Object({verticalOffset:v.Number({minimum:0,description:"How high to position the image, in meters, relative to the ground plane."})})],{$id:"EnterpriseFloatingTextAreaProperties"}),vZ=v.Union([xZ,bZ],{$id:"EnterpriseTextAreaProperties"}),_Z=Zn(v.Ref(gi),vZ,{$id:"EnterpriseTextAreaFeature"}),SZ=Li(v.Ref(_Z),{$id:"EnterpriseTextAreaCollection"}),wZ=v.Record(ut,v.Ref(SZ),{$id:"EnterpriseTextAreasByFloor",additionalProperties:!1}),TZ=v.Object({textAreas:v.Optional(v.Ref(wZ))},{$id:"EnterpriseTextAreasSchema"}),IZ=[gZ,PD,xZ,bZ,vZ,_Z,SZ,wZ]});var AD,DD,EZ,Z1t,W1t,LD,CZ,X1t,q1t,PZ,MZ,AZ,DZ,FD,LZ,kD=f(()=>{Si();Xe();AD=v.Object({u:v.Number(),v:v.Number()},{$id:"EnterpriseTextureUV"}),DD=so(["top","side"],{$id:"EnterpriseTextureFace"}),EZ=DD.schema,Z1t=DD.values,W1t=DD.record,LD=so(["inside","outside","both"],{$id:"EnterpriseTextureSurface"}),CZ=LD.schema,X1t=LD.values,q1t=LD.record,PZ=v.Tuple([Hh,Zh,Hh,Zh],{$id:"EnterpriseTextureBounds"}),MZ=v.Intersect([v.Object({repeat:v.Ref(AD),offset:v.Ref(AD),rotation:v.Number({minimum:0,maximum:360}),path:v.String({format:"uri"}),face:v.Ref(EZ),surface:v.Ref(CZ),bounds:v.Ref(PZ)},{$id:"EnterpriseTextureProperties"}),Ca],{$id:"EnterpriseTexture"}),AZ=v.Array(v.Ref(MZ),{$id:"EnterpriseTextures"}),DZ=v.Record(ut,v.Ref(AZ),{$id:"EnterpriseTexturesByFloor",additionalProperties:!1}),FD=v.Object({textures:v.Optional(v.Ref(DZ))},{$id:"EnterpriseTexturesSchema"}),LZ=[MZ,AZ,FD,AD,EZ,CZ,PZ,DZ]});var FZ,OD,kZ,RD=f(()=>{Si();Vc();Xe();jc();lx();FZ=v.Intersect([v.Object({id:v.Ref(cD),slug:v.String(),defaultLanguage:v.Ref(aT),languages:v.Array(v.Ref(aT)),countrycode:v.Optional(v.String()),logo:v.Optional(v.String({format:"uri"})),mappedinWebUrl:v.Optional(v.String({format:"uri"})),topLocations:v.Optional(v.Array(v.Ref(Mu))),operationHours:v.Optional(v.Array(v.Ref(nT))),coverImage:v.Optional(v.String({format:"uri"}))}),_d(["name"]),fs],{$id:"EnterpriseVenue"}),OD=v.Object({venue:v.Optional(v.Ref(FZ))},{$id:"EnterpriseVenueSchema"}),kZ=[FZ,OD]});var OZ=f(()=>{fD();xD();vD();ED();lT();MD();kD();RD();jc();lx()});var BZ,RZ,WCe,zZ,NZ=f(()=>{Xt();Vc();Xe();eZ();fD();xD();vD();ED();lT();MD();kD();RD();jc();lx();OZ();BZ=v.Intersect([OD,TD,ID,dD,FD,gD,bD,TZ],{$id:"CMSProperties"}),RZ=v.Object({cms:v.Optional(v.Ref(BZ))},{$id:"CMSExtensionSchema"}),WCe=/^cms\/(?:([^/]+)\/)?([^/]+)\.(?:json|geojson)$/,zZ={name:"ext:cms",schema:RZ,intoBundle:function*(e){if(e.cms==null)return;let t=e.cms;for(let r of ht(t))switch(r){case"floorText":for(let n of ht(t.floorText??{}))yield{path:`cms/floorText/${n}.geojson`,contents:(t.floorText??{})[n]};continue;case"textures":for(let n of ht(t.textures??{}))yield{path:`cms/textures/${n}.json`,contents:(t.textures??{})[n]};continue;case"textAreas":for(let n of ht(t.textAreas??{}))yield{path:`cms/textAreas/${n}.geojson`,contents:(t.textAreas??{})[n]};continue;default:yield{path:`cms/${r}.json`,contents:t[r]};continue}},fromBundle:(e,t,r)=>{let n=e.match(WCe);if(!n)return;let[,i,o]=n,a=r(t);switch(i){case"floorText":case"textures":case"textAreas":return{cms:{[i]:{[o]:a}}};default:return{cms:{[o]:a}}}},references:[BZ,RZ,...kZ,...hZ,...yZ,...nZ,...LZ,...dZ,...uZ,...IZ,...tZ,...fZ,...oT],integrityCheck:QH}});var ms,BD=f(()=>{(function(e){e.NavigationFlagMissingDeclaration="NavigationFlagMissingDeclaration",e.NavigationFlagDuplicateBit="NavigationFlagDuplicateBit",e.NavigationFlagIncorrectFlagsLength="NavigationFlagIncorrectFlagsLength",e.NavigationFlagValueTooBig="NavigationFlagValueTooBig"})(ms||(ms={}))});var UZ,$Z=f(()=>{er();BD();UZ=e=>{let{navigationFlags:t}=e;if(!t||Object.keys(t).length===0)return de(!0);let r=Object.entries(t).map(([o,a])=>({key:o,...a})).sort((o,a)=>o.index!==a.index?o.index-a.index:o.bit-a.bit),n=0,i=-1;for(let o of r){if(o.bit===i)return fe({kind:ms.NavigationFlagDuplicateBit,properties:{index:o.index,bit:o.bit,path:`navigationFlags.${o.key}`}});if(o.index!=n){if(i!=31)return fe({kind:ms.NavigationFlagMissingDeclaration,properties:{index:n,bit:i+1,path:"navigationFlags"}});if(o.index!=n+1||o.bit!=0)return fe({kind:ms.NavigationFlagMissingDeclaration,properties:{index:n+1,bit:0,path:"navigationFlags"}});n=o.index,i=0}else{if(o.bit!==i+1)return fe({kind:ms.NavigationFlagMissingDeclaration,properties:{index:o.index,bit:i+1,path:"navigationFlags"}});i=o.bit}}return de(!0)}});function Gc(e,t){return t&&(e.flags[t.index]&1<<t.bit)!==0}var VZ=f(()=>{});var jZ,ux,_m,GZ=f(()=>{er();BD();jZ=2**32-1,ux=e=>{let t=Object.keys(e.navigationFlags??{}).length;if(t===0)return{index:-1,flag:0};let r=Math.floor(t/32),n=t%32;return{index:r,flag:2**n-1}},_m=(e,t,r)=>{if(t.index==-1&&e.length===0)return de(!0);let n=t.flag>0||t.index===-1?t.index+1:t.index;if(e.length!==n)return fe({kind:ms.NavigationFlagIncorrectFlagsLength,properties:{expected:n,actual:e.length,path:r}});for(let i=0;i<e.length;i++){let o=e[i];if(i<t.index){if(o>jZ)return fe({kind:ms.NavigationFlagValueTooBig,properties:{index:i,flagValue:o,expectedMaxFlagValue:jZ,path:r}});continue}else if(o>t.flag)return fe({kind:ms.NavigationFlagValueTooBig,properties:{index:i,flagValue:o,expectedMaxFlagValue:t.flag,path:r}})}return de(!0)}});var XCe,HZ,zD,ZZ,qCe,uT,ND,Dd,YCe,JCe,WZ,Hc=f(()=>{Si();Xe();$Z();VZ();GZ();XCe=v.Object({index:v.Integer({description:"The index of the flag in a flags array.",minimum:0}),bit:v.Integer({description:"The bit position of the flag in a flag's bitfield.",minimum:0,maximum:31})},{$id:"NavigationFlagDeclarationCore"}),HZ=v.Intersect([XCe,Bo],{$id:"NavigationFlagDeclaration",description:'A NavigationFlagDeclaration describes the relationship between a "key" that a developer might use to wayfind using that flag, and the index and bit position in an object\'s `flags` array.'}),zD={accessible:"accessible",outdoors:"outdoors",public:"public"},ZZ=v.Record(v.String(),HZ,{$id:"NavigationFlagDeclarations",description:"Any well known and custom flags present in the MVF"}),qCe=v.Object({navigationFlags:v.Ref(ZZ)},{$id:"NavigationFlagsSchema"}),uT=v.Array(v.Integer({minimum:0,maximum:Math.pow(2,32)-1}),{$id:"Flags"}),ND=v.Object({flags:v.Ref(uT)},{$id:"WithFlags"}),Dd=v.Intersect([vm,ND],{$id:"FlaggedGeometryAnchor"}),YCe=v.Object({geometryAnchor:Dd},{$id:"WithFlaggedGeometryAnchor"}),JCe=v.Object({geometryAnchors:v.Array(Dd)},{$id:"WithFlaggedGeometryAnchors"}),WZ={name:"ext:mvf-navigation-flags",schema:qCe,intoBundle:function*(e){e.navigationFlags!=null&&(yield{path:"navigationFlags.json",contents:e.navigationFlags})},fromBundle:(e,t,r)=>e!=="navigationFlags.json"?void 0:{navigationFlags:r(t)},references:[HZ,ZZ,uT,Dd,YCe,JCe],integrityCheck:UZ}});var XZ,qZ=f(()=>{_l();Xt();Hc();er();XZ=e=>{if(e.connections==null)return de(!0);let t=Gr(e.connections,i=>i.id,"connections");if(t.isErr())return t;let r=_n(e),n=ux(e);for(let[i,o]of e.connections.entries()){for(let[a,s]of o.entrances.entries()){let l=r(s.floorId,s.geometryId);if(l.isErr())return l;let u=_m(s.flags,n,`connections[${i}].entrances[${a}]`);if(u.isErr())return u}for(let[a,s]of o.exits.entries()){let l=r(s.floorId,s.geometryId);if(l.isErr())return l;let u=_m(s.flags,n,`connections[${i}].exits[${a}]`);if(u.isErr())return u}}return de(!0)}});var JZ,KCe,ewt,QCe,KZ,UD,QZ,eW,ePe,YZ,tW,$D=f(()=>{Pa();Si();Hc();Xe();qZ();JZ=jr("c","ConnectionId"),{schema:KCe,values:ewt,record:QCe}=so(["elevator","escalator","travelator","stairs","door","ramp","ladder"],{$id:"ConnectionType"}),KZ=KCe,UD=QCe,QZ=v.Intersect([v.Object({id:v.Ref(JZ,{description:"The unique identifier for the connection."}),entrances:v.Array(v.Ref(Dd)),exits:v.Array(v.Ref(Dd)),entryCost:v.Number({description:"The cost to enter the connection.",minimum:0}),floorCostMultiplier:v.Number({description:"The cost multiplier for each floor transitioned.",minimum:1}),type:v.Ref(KZ,{description:"The type of connection."})}),Bo,fs],{$id:"ConnectionsProperties"}),eW=v.Array(v.Ref(QZ),{$id:"ConnectionsCollection"}),ePe=v.Object({connections:v.Ref(eW)},{$id:"ConnectionsExtensionSchema"}),YZ="connections.json",tW={name:"ext:connections",schema:ePe,intoBundle:function*(e){e.connections!=null&&(yield{path:YZ,contents:e.connections})},fromBundle:(e,t,r)=>{if(e===YZ)return{connections:r(t)}},references:[QZ,eW,KZ,JZ,Dd,uT],integrityCheck:XZ}});var rW,nW=f(()=>{_l();er();rW=e=>{if(e.defaultStyle==null)return de(!0);let t=_n(e);for(let r of Object.values(e.defaultStyle))if(r!=null)for(let n of r.geometryAnchors){let i=t(n.floorId,n.geometryId);if(i.isErr())return i}return de(!0)}});var iW,oW,tPe,aW,sW=f(()=>{Pa();Xe();nW();iW=v.Intersect([ox(),fs,v.Object({altitude:v.Number({description:"How far off the bottom of the floor the objects with this style should be drawn, in meters."}),color:v.String({pattern:"^#[0-9a-fA-F]{6}$",description:"Color should be represented with a hash (#), followed by 6 hexadecimal digits. ex: #RRGGBB"}),height:v.Number({minimum:0,description:"The height of the objects belonging to this layer, in meters."}),opacity:v.Number({minimum:0,maximum:1,description:"The opacity of the objects belonging to this layer, from 0 to 1."}),buffer:v.Number({description:"The buffer amount to apply to the geometry, in meters. This can be used to inflate line string geometry for walls, but might also be applicable as a way to grow or shrink polygon geometry for aesthetic purposes. Can be negative."}),hidden:v.Optional(v.Boolean({description:"Whether or not the objects with this style should be hidden."}))})],{$id:"DefaultStyle"}),oW=v.Record(v.String(),v.Ref(iW),{$id:"DefaultStyleCollection",additionalProperties:!1}),tPe=v.Object({defaultStyle:v.Ref(oW)},{$id:"DefaultStyleSchema"}),aW={name:"ext:mvf-default-style",schema:tPe,intoBundle:function*(e){e.defaultStyle!=null&&(yield{path:"default-style.json",contents:e.defaultStyle})},fromBundle:(e,t,r)=>{if(e==="default-style.json")return{defaultStyle:r(t)}},references:[iW,oW],integrityCheck:rW}});var cT,lW=f(()=>{(function(e){e.InvalidDefaultFloorError="InvalidDefaultFloorError"})(cT||(cT={}))});var uW,cW=f(()=>{nx();Xt();er();lW();uW=e=>{if(e.floorStacks==null)return de(!0);let t=Gr(e.floorStacks,n=>n.id,"floorStacks");if(t.isErr())return t;let r=ds(e);for(let n of e.floorStacks){for(let i of n.floors){let o=r(i);if(o.isErr())return o}if(n.defaultFloor!=null&&!n.floors.includes(n.defaultFloor))return fe({kind:cT.InvalidDefaultFloorError,properties:{floorStackId:n.id,floorId:n.defaultFloor}})}return de(!0)}});var cx,dW,fW,rPe,pW,hW,VD=f(()=>{ao();Pa();Xe();cW();cx=jr("fs","FloorStackId"),dW=v.Intersect([v.Object({id:v.Ref(cx,{description:"The unique identifier for the floor stack."}),floors:v.Array(v.Ref(ut),{uniqueItems:!0,minItems:1,description:"The floors that are part of this floor stack."}),defaultFloor:v.Optional(v.Ref(ut,{description:"The default floor for the floor stack."}))}),Bo],{$id:"FloorStacksProperties"}),fW=v.Array(v.Ref(dW),{$id:"FloorStackCollection"}),rPe=v.Object({floorStacks:v.Ref(fW)},{$id:"FloorStackExtensionSchema"}),pW="floor-stacks.json",hW={name:"ext:floor-stacks",schema:rPe,intoBundle:function*(e){e.floorStacks!=null&&(yield{path:pW,contents:e.floorStacks})},fromBundle:(e,t,r)=>{if(e===pW)return{floorStacks:r(t)}},references:[cx,dW,fW],integrityCheck:uW}});var px,mW=f(()=>{(function(e){e.MissingFloorStackError="MissingFloorStackError",e.UnknownFloorStackError="UnknownFloorStackError"})(px||(px={}))});var yW,gW=f(()=>{nx();_l();Xt();er();mW();yW=e=>{if(e.facade==null)return de(!0);if(e.floorStacks==null)return fe({kind:px.MissingFloorStackError,properties:null});let t=new Set(e.floorStacks.map(i=>i.id)),r=_n(e),n=ds(e);for(let[i,o]of Tt(e.facade)){if(o==null)continue;let a=n(i);if(a.isErr())return a;for(let s of o){let{floorStackId:l,geometryIds:u}=s;if(!t.has(l))return fe({kind:px.UnknownFloorStackError,properties:{floorStackId:l}});for(let c of u){let p=r(i,c);if(p.isErr())return p}}}return de(!0)}});var xW,nPe,iPe,bW,vW=f(()=>{Si();Pa();Xt();VD();Xe();gW();xW=v.Intersect([v.Object({floorStackId:v.Ref(cx)}),mm],{$id:"Facade"}),nPe=v.Object({facade:Hr(v.Record(ut,v.Array(v.Ref(xW)),{additionalProperties:!1}))},{$id:"FacadeExtensionSchema"}),iPe=/^facade\/(.*)\.json$/,bW={name:"ext:facade",schema:nPe,intoBundle:function*(e){if(e.facade!=null)for(let t of ht(e.facade))yield{path:`facade/${t}.json`,contents:e.facade[t]}},fromBundle:(e,t,r)=>{let n=e.match(iPe)?.[1];if(n)return{facade:{[n]:r(t)}}},references:[cx,xW],integrityCheck:yW}});var _W,SW=f(()=>{_l();Xt();er();_W=e=>{if(e.floorImages==null)return de(!0);let t=_n(e);for(let[r,n]of Tt(e.floorImages))if(n!=null)for(let i of n.features){if(!("geometryId"in i.properties))continue;let o=i.properties.geometryId,a=t(r,o);if(a.isErr())return a}return de(!0)}});var jD,wW,TW,IW,EW,CW,oPe,aPe,PW,MW=f(()=>{ix();ao();Pa();Xt();Xe();SW();jD=v.Object({path:v.String({format:"uri",description:"The path to the image. This will be a remote URL."}),width:v.Number({minimum:0,description:"The width of the image when represented on the map, in meters."}),height:v.Number({minimum:0,description:"The height of the image when represented on the map, in meters."}),rotation:v.Number({minimum:0,maximum:360,description:"Rotation in degrees, about the center of the image. North is 0, east is 90."})},{$id:"BaseFloorImageProperties"}),wW=v.Intersect([v.Ref(jD),Ca],{$id:"AnchoredFloorImageProperties"}),TW=v.Intersect([v.Ref(jD),v.Object({verticalOffset:v.Number({minimum:0,description:"How high to position the image, in meters, relative to the ground plane."})})],{$id:"FloatingFloorImageProperties"}),IW=v.Union([wW,TW],{$id:"FloorImageProperties"}),EW=Zn(v.Ref(gi),IW,{$id:"FloorImageFeature"}),CW=Li(v.Ref(EW),{$id:"FloorImageCollection"}),oPe=v.Object({floorImages:Hr(v.Record(ut,v.Ref(CW),{additionalProperties:!1}))},{$id:"FloorImagesExtensionSchema"}),aPe=/^floorImages\/(.*)\.geojson$/,PW={name:"ext:floor-images",schema:oPe,intoBundle:function*(e){if(e.floorImages!=null)for(let t of ht(e.floorImages))yield{path:`floorImages/${t}.geojson`,contents:e.floorImages[t]}},fromBundle:(e,t,r)=>{let n=e.match(aPe)?.[1];if(n)return{floorImages:{[n]:r(t)}}},references:[jD,wW,TW,IW,EW,CW],integrityCheck:_W}});var AW,DW=f(()=>{_l();Xt();er();AW=e=>{if(e.kinds==null)return de(!0);let t=_n(e);for(let[r,n]of Tt(e.kinds))if(n!=null)for(let i of ht(n)){let o=t(r,i);if(o.isErr())return o}return de(!0)}});var eTt,sPe,tTt,LW,FW,lPe,uPe,kW,OW=f(()=>{ao();Pa();Xt();Xe();DW();({values:eTt,schema:sPe,record:tTt}=so(["room","hallway","wall","object","poi","area","window"],{$id:"Kind"})),LW=sPe,FW=Hr(v.Record(xi,v.Ref(LW),{additionalProperties:!1,$id:"GeometryKinds"})),lPe=v.Object({kinds:Hr(v.Record(ut,v.Ref(FW),{additionalProperties:!1}))},{$id:"KindsExtensionSchema"}),uPe=/^kinds\/(.*)\.json$/,kW={name:"ext:kinds",schema:lPe,intoBundle:function*(e){if(e.kinds!=null)for(let t of ht(e.kinds))yield{path:`kinds/${t}.json`,contents:e.kinds[t]}},fromBundle:(e,t,r)=>{let n=e.match(uPe)?.[1];if(n)return{kinds:{[n]:r(t)}}},references:[LW,FW],integrityCheck:AW}});var dx,GD=f(()=>{(function(e){e.UnknownNeighbor="UnknownNeighbor",e.SelfReference="SelfReference"})(dx||(dx={}))});var RW,BW=f(()=>{_l();Xt();Xt();Hc();er();GD();RW=e=>{if(e.nodes==null)return de(!0);let t=Gr(e.nodes,i=>i.properties.id,"nodes");if(t.isErr())return t;let r=_n(e),n=ux(e);for(let[i,o]of Tt(e.nodes)){if(o==null)continue;let a=new Set(o.features.map(s=>s.properties.id));for(let[s,l]of o.features.entries()){for(let u of l.properties.geometryIds){let c=r(i,u);if(c.isErr())return c}for(let[u,c]of l.properties.neighbors.entries()){if(!a.has(c.id))return fe({kind:dx.UnknownNeighbor,properties:{floorId:i,nodeId:l.properties.id,neighborId:c.id}});if(c.id===l.properties.id)return fe({kind:dx.SelfReference,properties:{floorId:i,nodeId:l.properties.id}});let p=_m(c.flags,n,`nodes["${i}"].features[${s}].properties.neighbors[${u}]`);if(p.isErr())return p}}}return de(!0)}});var HD,zW,NW,UW,$W,cPe,pPe,VW,jW=f(()=>{ix();ao();Pa();Xt();Hc();Xe();BW();GD();HD=jr("n","NodeId"),zW=v.Intersect([v.Object({id:v.Ref(HD,{description:"The unique identifier for the node."}),extraCost:v.Number({minimum:0,description:"The extra cost to traverse to the node, above the straight-line distance."})}),ND],{$id:"NodeNeighbor"}),NW=v.Intersect([v.Object({id:v.Ref(HD,{description:"The unique identifier for the node."}),neighbors:v.Array(v.Ref(zW),{description:"The neighbors of the node."})}),mm],{$id:"NodeProperties"}),UW=Zn(v.Ref(gi),NW,{$id:"NodeFeature"}),$W=Li(v.Ref(UW),{$id:"NodeCollection"}),cPe=v.Object({nodes:Hr(v.Record(ut,v.Ref($W),{additionalProperties:!1}))},{$id:"NodesExtensionSchema"}),pPe=/^nodes\/(.*)\.(geo)?json$/,VW={name:"ext:nodes",schema:cPe,intoBundle:function*(e){if(e.nodes!=null)for(let t of ht(e.nodes))yield{path:`nodes/${t}.geojson`,contents:e.nodes[t]}},fromBundle:(e,t,r)=>{let n=e.match(pPe)?.[1];if(n)return{nodes:{[n]:r(t)}}},references:[HD,zW,NW,UW,$W],integrityCheck:RW}});var pT,GW=f(()=>{(function(e){e.FloorInFloorStackError="FloorInFloorStackError"})(pT||(pT={}))});var HW,ZW=f(()=>{nx();er();GW();HW=e=>{if(e.outdoors==null)return de(!0);let t=ds(e);for(let r of e.outdoors.floors){let n=t(r);if(n.isErr())return n;if(e.floorStacks!=null){for(let i of e.floorStacks)if(i.floors.includes(r))return fe({kind:pT.FloorInFloorStackError,properties:{floorId:r,floorStackId:i.id}})}}return de(!0)}});var XW,dPe,WW,qW,YW=f(()=>{ao();Xe();ZW();XW=v.Object({floors:v.Array(v.Ref(ut),{uniqueItems:!0,description:"A list of floor IDs that should be considered to contain outdoor features."})},{$id:"Outdoors"}),dPe=v.Object({outdoors:v.Ref(XW)},{$id:"OutdoorsExtensionSchema"}),WW="outdoors.json",qW={name:"ext:outdoors",schema:dPe,intoBundle:function*(e){e.outdoors!=null&&(yield{path:WW,contents:e.outdoors})},fromBundle:(e,t,r)=>{if(e===WW)return{outdoors:r(t)}},references:[XW],integrityCheck:HW}});var dT,JW=f(()=>{(function(e){e.TilesetDuplicateKeyError="TilesetDuplicateKeyError"})(dT||(dT={}))});var KW,QW=f(()=>{er();JW();KW=e=>{if(e.tileset==null)return de(!0);let t=new Set;if(t.add(e.tileset.default.key),e.tileset.others)for(let r of e.tileset.others){if(t.has(r.key))return fe({kind:dT.TilesetDuplicateKeyError,properties:{key:r.key}});t.add(r.key)}return de(!0)}});var ZD,eX,fPe,tX,rX=f(()=>{Xe();QW();ZD=v.Object({key:v.String({minLength:1,description:"Unique identifier for the tileset style."}),name:v.String({minLength:1,description:"Display name of the tileset style."}),url:v.String({format:"uri",description:"URL of the tileset style."})},{$id:"TilesetStyle",description:"A tileset style definition."}),eX=v.Object({default:v.Ref(ZD,{description:"The default tileset style, which should be used."}),others:v.Optional(v.Array(v.Ref(ZD,{description:"Additional tileset styles that can be used."})))},{$id:"TilesetCollection"}),fPe=v.Object({tileset:v.Ref(eX)},{$id:"TilesetExtensionSchema"}),tX={name:"ext:mvf-tileset",schema:fPe,intoBundle:function*(e){e.tileset!=null&&(yield{path:"tileset.json",contents:e.tileset})},fromBundle:(e,t,r)=>{if(e==="tileset.json")return{tileset:r(t)}},references:[ZD,eX],integrityCheck:KW}});var nX,iX,oX,aX,hPe,mPe,yPe,sX,lX=f(()=>{ao();Pa();Xt();Xe();nX=v.Object({},{$id:"WalkableProperties"}),iX=v.Object({},{$id:"NonWalkableProperties"}),oX=Hr(v.Record(xi,v.Ref(nX),{$id:"WalkableGeometries",additionalProperties:!1})),aX=Hr(v.Record(xi,v.Ref(iX),{$id:"NonWalkableGeometries",additionalProperties:!1})),hPe=v.Object({walkable:Hr(v.Record(ut,v.Ref(oX),{additionalProperties:!1})),nonwalkable:Hr(v.Record(ut,v.Ref(aX),{additionalProperties:!1}))},{$id:"TraversabilitySchema"}),mPe=/^walkable\/(.*)\.json$/,yPe=/^nonwalkable\/(.*)\.json$/,sX={name:"ext:mvf-traversability",schema:hPe,intoBundle:function*(e){if(e.walkable!=null)for(let t of ht(e.walkable))yield{path:`walkable/${t}.json`,contents:e.walkable[t]};if(e.nonwalkable!=null)for(let t of ht(e.nonwalkable))yield{path:`nonwalkable/${t}.json`,contents:e.nonwalkable[t]}},fromBundle:(e,t,r)=>{let n=e.match(mPe)?.[1];if(n!=null)return{walkable:{[n]:r(t)}};let i=e.match(yPe)?.[1];if(i!=null)return{nonwalkable:{[i]:r(t)}}},references:[nX,iX,oX,aX]}});function uX(e){return e.replace(/^g_/,"s_")}function fT(e){return e.replace(/^g_/,"o_")}function gPe(e){return e.replace(/^g_/,"w_")}function cX(e){return e.replace(/^loci_/,"eli_")}function fx(e){return e.replace(/^loc_/,"el_")}function hT(e){return e.replace(/^lcat_/,"ec_")}function xPe(e){return e.replace(/^g_/,"ar_")}function pX(e){return e.replace(/^n_/,"s_")}function bPe(e,t,r){switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":{let n=[],i=0,o=e.geometry.type.replace("Multi","");for(let a of e.geometry.coordinates)n.push({...e,geometry:{type:o,coordinates:a},properties:{...e.properties,id:`${t}-${i++}`,kind:r}});return n}default:return[{...e,properties:{...e.properties,id:t,kind:r}}]}}function Sm(e,t,r,n){let i=new Map;for(let{feature:o,floorId:a}of e){let s=o.properties.id,l=n.get(s);if(t.has(s)){let u=bPe(o,r(s),l),c=u.map(d=>d.properties.id),p=c.map(d=>({geometryId:d,floorId:a}));i.set(s,{ids:c,features:u,anchors:p})}}return i}function dX(e){let t={space:new Map,obstruction:new Map,area:new Map,window:new Map,object:new Map};if(!e.geometry)return t;let r=vPe(e),n=Tt(e.geometry).flatMap(([u,c])=>(c?.features??[]).map(p=>({feature:p,floorId:u}))).flat(),i=new Set(Object.values(e.walkable??{}).filter(u=>u!==void 0).flatMap(ht)),o=new Set(Object.values(e.nonwalkable??{}).filter(u=>u!==void 0).flatMap(ht)),a=new Set(Array.from(r.entries()).filter(([u,c])=>c==="area").map(([u])=>u)),s=new Set(Array.from(r.entries()).filter(([u,c])=>c==="object").map(([u])=>u)),l=new Set(Array.from(r.entries()).filter(([u,c])=>c==="window").map(([u])=>u));return i.size>0&&(t.space=Sm(n,i,uX,r)),o.size>0&&(t.obstruction=Sm(n,o,fT,r)),a.size>0&&(t.area=Sm(n,a,xPe,r)),s.size>0&&(t.object=Sm(n,s,fT,r)),l.size>0&&(t.window=Sm(n,l,gPe,r)),i.size===0&&o.size===0&&a.size===0&&(t.space=Sm(n,new Set(n.map(u=>u.feature.properties.id)),uX,r)),t}function vPe(e){let t=new Map(Object.values(e.kinds??{}).filter(r=>r!==void 0).flatMap(Tt));for(let r of e.connections?.filter(n=>n.type!=="door")??[]){for(let n of r.entrances)t.set(n.geometryId,`connection.${r.type}`);for(let n of r.exits)t.set(n.geometryId,`connection.${r.type}`)}return t}var mT=f(()=>{Xt()});function fX(e){let{nodesByGeometryId:t,incomingEdgesByNodeId:r,nodesById:n}=_Pe(e),i=dX(e),o=SPe(e),a=e.navigationFlags??{};return{geometryMaps:i,nodesByGeometryId:t,geometryFeatureById:o,navigationFlags:a,incomingEdgesByNodeId:r,nodesById:n}}function _Pe(e){let t=new Map,r=new Map,n=new Map;for(let i of Object.values(e.nodes??{}))for(let o of i?.features??[]){if(n.set(o.properties.id,o),o.properties.geometryIds.length>0)for(let a of o.properties.geometryIds){let s=t.get(a)??[];s.push(o.properties.id),t.set(a,s)}if(o.properties.neighbors.length>0)for(let a of o.properties.neighbors){let s=r.get(a.id);s!=null?s.push(a):r.set(a.id,[a])}}return{nodesByGeometryId:t,incomingEdgesByNodeId:r,nodesById:n}}function SPe(e){let t=new Map;for(let r of Object.values(e.geometry??{}))for(let n of r?.features??[])t.set(n.properties.id,n);return t}var hX=f(()=>{mT()});function mX(e,t){if(!e.annotations||!e.annotationSymbols||!e.geometry)return{};let r={};for(let[n,i]of Tt(e.annotations)){if(!i||i.length===0||!e.geometry[n]||e.geometry[n].features.length===0)continue;let o=new Map(e.geometry[n].features.map(s=>[s.properties.id,s])),a={type:"FeatureCollection",features:[]};for(let s of i){let l=o.get(s.geometryId);if(!l||l.geometry.type!=="Point")continue;let u={id:s.id,externalId:s.externalId,symbolId:s.symbolKey};a.features.push({type:"Feature",geometry:l.geometry,properties:u})}r[n]=a}return{annotation:r}}var yX=f(()=>{Xt()});function gX(e,{nodesByGeometryId:t}){let r={"connection.json":[],entrance:{}},n=e.navigationFlags?.[zD.accessible],i=e.navigationFlags?.[zD.outdoors],o=new Map(Object.values(e.geometry??{}).flatMap(a=>a?.features??[]).map(a=>[a.properties.id,a]));for(let a of e.connections??[]){if(WD(a,o)&&!wPe(a)){let c=TPe(a,o,t,i);for(let[p,d]of c)r.entrance[p]||(r.entrance[p]={type:"FeatureCollection",features:[]}),r.entrance[p].features.push(d);continue}let s=n!=null&&a.entrances.some(c=>Gc(c,n))&&a.exits.some(c=>Gc(c,n)),l=Array.from(new Set([...a.entrances.map(c=>t.get(c.geometryId)),...a.exits.map(c=>t.get(c.geometryId))].flat().filter(c=>c!=null))),u={id:a.id,externalId:a.details?.externalId??"",type:a.type,accessible:s,nodes:l};a.details?.name&&(u.details={name:a.details.name}),a.extra&&(u.extra=a.extra),r["connection.json"].push(u)}return r}function WD(e,t){return e.type==UD.door&&e.entrances.every(r=>t.get(r.geometryId)?.geometry.type==="LineString")}function wPe(e){return e.entrances.length===0||e.exits.length===0?!1:new Set([...e.entrances.map(r=>r.floorId),...e.exits.map(r=>r.floorId)]).size>=2}function TPe(e,t,r,n){if(e.type!==UD.door)return[];let i=[];for(let o of e.entrances){let a=t.get(o.geometryId);if(a?.geometry.type==="LineString"){let s={type:"Feature",geometry:a.geometry,properties:{id:e.id,externalId:e.details?.externalId??"",isExterior:IPe(e,n)}},l=e.details;l&&(s.properties.details={name:l.name,description:l.description},l.icon&&(s.properties.details.images=[{url:l.icon,altText:`${l.name} icon`}]));let u=r.get(o.geometryId);u&&u.length>0&&(s.properties.node=u[0]),i.push([o.floorId,s])}}return i}function IPe(e,t){return e.entrances.some(r=>Gc(r,t))||e.exits.some(r=>Gc(r,t))}var XD=f(()=>{$D();Hc()});function bX(e,{geometryMaps:t,nodesByGeometryId:r}){let n={categories:[],locations:[],locationInstances:[],layers:[],venue:{slug:"",name:"",externalId:"",defaultLanguage:{name:"English",code:"en"},languages:[]}},i=e.manifest?.features[0];i&&(n.venue.defaultFloor=i.properties.defaultFloor,n.venue.tzid=i.properties.tzid,n.venue.name=i.properties.name,n.venue.defaultLanguage={name:i.properties.language??"English",code:i.properties.language??"en"});let o=e.cms?.venue;o&&(n.venue={...n.venue,slug:o.slug,name:o.details?.name??n.venue.name??i.properties.name,externalId:o.details?.externalId??"",defaultLanguage:o.defaultLanguage,languages:o.languages??[],countrycode:o.countrycode,coverImage:o.coverImage,logo:o.logo,icon:o.details?.icon,extra:o.extra,mappedinWebUrl:o.mappedinWebUrl,operationHours:o.operationHours,topLocations:o.topLocations});let a=new Map,s=e.locations??[],l=e.cms?.locations??[],u=e.cms?.categories??[],c=new Map((u??[]).map(I=>[I.categoryId,I]));if(s.length>0){let I=new Map(l.map(S=>[S.locationId,S]));for(let S of s){let E=I.get(S.id)??{};if(S){let P=S.details,L={id:E?.cmsId!==void 0?`el_${E?.cmsId}`:fx(S.id),name:P.name,externalId:P.externalId??"",type:E.type??"location",sortOrder:E.sortOrder??0,amenity:E.amenity,description:P.description,extra:S.extra,links:S.links,operationHours:S.openingHours,gallery:E.gallery,logo:S.logo,shortName:P.shortName,picture:E.picture,showFloatingLabelWhenImagePresent:E.showFloatingLabelWhenImagePresent,showLogo:E.showLogo,siblingGroups:E.siblingGroups,states:E.states,tags:E.tags,spaces:[],nodes:[],polygons:[]};if(S.phone&&(L.phone={number:S.phone}),E.primaryCategory){let z=c.get(E.primaryCategory);z&&(L.primaryCategory=z.id)}let k=xX(S.social);S.website&&(k.website=S.website.url),L.social=k;for(let z of S.geometryAnchors){let W=t.space.get(z.geometryId),Z=t.obstruction.get(z.geometryId),Y=W??Z;if(Y){let j=new Set(Y.features.filter(ae=>ae.geometry.type==="Polygon").map(ae=>ae.properties.id));for(let ae of Y.anchors)W!=null&&Y===W&&L.spaces.push({floor:ae.floorId,id:ae.geometryId}),j.has(ae.geometryId)&&L.polygons.push({map:ae.floorId,id:ae.geometryId})}let J=r.get(z.geometryId);for(let j of J??[])L.nodes.push({map:z.floorId,id:j})}n.locations.push(L);for(let z of S.categories)a.set(z,[...a.get(z)??[],S.id])}}}let p=e.cms?.locationInstances??[],d=e.locationInstances;if(d){let I=new Map(p.map(E=>[E.locationInstanceId,E])),S=[];for(let E of d){let P=I.get(E.id)??{};if(E){let L={id:cX(E.id),parent:P.parentId??fx(E.parentId),name:E.details?.name,externalId:E.details?.externalId,type:P.type,sortOrder:P.sortOrder,amenity:P.amenity,description:E.details?.description,extra:E.extra,links:E.links,operationHours:E.openingHours,gallery:P.gallery,picture:P.picture,showFloatingLabelWhenImagePresent:P.showFloatingLabelWhenImagePresent,showLogo:P.showLogo,siblingGroups:P.siblingGroups,states:P.states,tags:P.tags,logo:E.logo,shortName:E.details?.shortName};E.phone&&(L.phone={number:E.phone});let k=xX(E.social??[]);if(E.website&&(k.website=E.website.url),Object.keys(k).length>0&&(L.social=k),E.geometryAnchors?.length){let z=E.geometryAnchors.flatMap(W=>t.space.get(W.geometryId)?.anchors??[]);z.length>0&&(L.spaces=z.map(W=>({floor:W.floorId,id:W.geometryId})))}if(E.geometryAnchors){L.spaces=[],L.polygons=[],L.nodes=[];for(let z of E.geometryAnchors){let W=t.space.get(z.geometryId);if(W){let Y=new Set(W.features.filter(J=>J.geometry.type==="Polygon").map(J=>J.properties.id));for(let J of W.anchors)L.spaces.push({floor:J.floorId,id:J.geometryId}),Y.has(J.geometryId)&&L.polygons.push({map:J.floorId,id:J.geometryId})}let Z=r.get(z.geometryId);for(let Y of Z??[])L.nodes.push({map:z.floorId,id:Y})}}S.push(L)}}S.length>0&&(n.locationInstances=S)}let h=e.locationCategories;if(h){let I=[],S=new Map(h.map(k=>[k.id,k])),E=new Map((u??[]).map(k=>[k.categoryId,k])),P=new Map;for(let k of h){let z=S.get(k.parent);if(z){let W=P.get(z.id)??[];W.push(k.id),P.set(z.id,W)}}for(let k of h){let z=E.get(k.id);if(k){let W=(P.get(k.id)??[]).map(hT),Z={id:hT(k.id),name:k.details.name,externalId:k.details.externalId??"",sortOrder:z?.sortOrder??0,children:W,locations:(a.get(k.id)??[]).map(fx),icon:k.details.icon,picture:z?.picture,color:z?.color,extra:k.extra,iconFromDefaultList:z?.iconFromDefaultList};I.push(Z)}}n.categories=I;let L={};for(let k of s)L[fx(k.id)]=k.categories.map(hT).filter(z=>z!==void 0);n.categoryPriorities=L}let m={};for(let[I,S]of Object.entries(e.defaultStyle??{}))if(S.buffer){let E=S.geometryAnchors.flatMap(P=>t.space.get(P.geometryId)?.anchors??[]);m[I]={edgeOffset:S.buffer,geometryAnchors:E}}Object.keys(m).length>0&&(n.enterpriseStyles=m);let x=new Map;for(let I of Object.values(e.cms?.layers??{}))if(I)for(let[S,E]of Tt(I)){if(typeof E!="string")continue;let P=x.get(E)??{name:E,id:`ely_${E}`,spaces:[]};P.spaces.push(...t.space.get(S)?.anchors.map(L=>({floorId:L.floorId,spaceId:L.geometryId}))??[]),x.set(E,P)}x.size>0&&(n.layers=Array.from(x.values()));let b=[];for(let I of Object.values(e.cms?.textures??{}))for(let S of I){let E=t.space.get(S.geometryId)?.anchors;!E||E.length<1||S.face==="unknown"||S.surface==="unknown"||b.push({repeat:S.repeat,offset:S.offset,rotation:S.rotation,path:S.path,face:S.face,surface:S.surface,bounds:S.bounds,geometryAnchors:E})}b.length>0&&(n.textures=b);let _={};for(let[I,S]of Object.entries(e.cms?.floorText??{})){let E={type:"FeatureCollection",features:[]};for(let P of S.features){if(P.properties.align==="unknown")continue;let L={align:P.properties.align,color:P.properties.color,fontFamily:P.properties.fontFamily,fontSize:P.properties.fontSize,rotation:P.properties.rotation,text:P.properties.text,visible:P.properties.visible};"geometryId"in P.properties?L.geometryId=P.properties.geometryId:L.verticalOffset=P.properties.verticalOffset,E.features.push({type:"Feature",geometry:P.geometry,properties:L})}E.features.length>0&&(_[I]=E)}Object.keys(_).length>0&&(n.floorText=_);let T={enterprise:n};if(e.cms?.textAreas){let I={};for(let[S,E]of Tt(e.cms.textAreas)){let P={type:"FeatureCollection",features:[]};for(let L of E.features){if(L.properties.align==="unknown")continue;let k={align:L.properties.align,maxWidth:L.properties.maxWidth,maxHeight:L.properties.maxHeight,rotation:L.properties.rotation};"geometryId"in L.properties?k.anchorId=L.properties.geometryId:k.verticalOffset=L.properties.verticalOffset;let z={type:"Feature",geometry:L.geometry,properties:k};P.features.push(z)}I[S]=P}T.textAreas=I}return T}function xX(e){let t={};for(let{name:r,url:n}of e){let i=r.toLowerCase();EPe.includes(i)&&(t[i]=n)}return t}var EPe,vX=f(()=>{Xt();mT();EPe=["facebook","instagram","twitter"]});function _X(e,{geometryMaps:t}){if(!e.facade)return{};let r={},n={};for(let[i,o]of Tt(e.facade))if(o)for(let a of Object.values(o)){let{floorStackId:s,geometryIds:l}=a,u=CPe(s);n[s]??(n[s]={id:u,spaces:[]}),n[s].spaces.push(...l.map(c=>({floorId:i,spaceId:t.space.get(c)?.ids[0]??""})))}return Object.keys(n).length>0&&(r.facade=n),r}var CPe,SX=f(()=>{Xt();CPe=e=>`fc_${e.slice(3)}`});function wX(e,t={}){let r={type:"FeatureCollection",features:[]},n=[];for(let i of e.floors.features)n.push({id:i.properties.id,externalId:i.properties.details?.externalId??"",elevation:i.properties.elevation,name:i.properties.details?.name??"",shortName:i.properties.details?.shortName??"",subtitle:i.properties.subtitle,maxHeight:i.properties.maxHeight}),r.features.push({type:"Feature",geometry:i.geometry,properties:{id:i.properties.id,externalId:i.properties.details?.externalId??"",elevation:i.properties.elevation,name:i.properties.details?.name??"",shortName:i.properties.details?.shortName??"",subtitle:i.properties.subtitle,maxHeight:i.properties.maxHeight}});return{"floor.geojson":r,"map.geojson":n}}var TX=f(()=>{});function IX(e,{geometryMaps:t}){let r={},n={};for(let[i,o]of Tt(e.floorImages??{})){let a={features:[],type:"FeatureCollection"};for(let s of o?.features??[])if("verticalOffset"in s.properties)a.features.push(s);else{let{geometryId:l,...u}=s.properties,c=t.space.get(l)?.ids[0]??t.obstruction.get(l)?.ids[0];if(!c)continue;let p={geometry:s.geometry,properties:{...u,anchorId:c},type:s.type};a.features.push(p)}n[i]=a}return Object.keys(n).length>0&&(r.floorImages=n),r}var EX=f(()=>{Xt()});function CX(e,t={}){let r=[];for(let i of e?.floorStacks??[]){let o={id:i.id,floors:i.floors,maps:i.floors,externalId:i.details?.externalId??"",name:i.details?.name??"",shortName:i.details?.shortName??"",type:"Building"};i.defaultFloor&&(o.defaultFloor=i.defaultFloor),r.push(o)}if(e.outdoors&&e.outdoors.floors.length>0){let i={id:"outdoors",floors:e.outdoors.floors,maps:e.outdoors.floors,type:"Outdoor",name:"Outdoors",externalId:"outdoors"};r.push(i)}return{"floorstack.json":r,"mapstack.geojson":r}}var PX=f(()=>{});var MX={};Fr(MX,{default:()=>yT});function PPe(e,t){return e<t?-1:e>t?1:0}var yT,AX=f(()=>{yT=class{constructor(t=[],r=PPe){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let t=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:r,compare:n}=this,i=r[t];for(;t>0;){let o=t-1>>1,a=r[o];if(n(i,a)>=0)break;r[t]=a,t=o}r[t]=i}_down(t){let{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let a=(t<<1)+1,s=r[a],l=a+1;if(l<this.length&&n(r[l],s)<0&&(a=l,s=r[l]),n(s,o)>=0)break;r[t]=s,t=a}r[t]=o}}});var LX=ui((oIt,qD)=>{"use strict";var gT=(AX(),Tg(MX));gT.default&&(gT=gT.default);qD.exports=DX;qD.exports.default=DX;function DX(e,t,r){t=t||1;for(var n,i,o,a,s=0;s<e[0].length;s++){var l=e[0][s];(!s||l[0]<n)&&(n=l[0]),(!s||l[1]<i)&&(i=l[1]),(!s||l[0]>o)&&(o=l[0]),(!s||l[1]>a)&&(a=l[1])}var u=o-n,c=a-i,p=Math.min(u,c),d=p/2;if(p===0){var h=[n,i];return h.distance=0,h}for(var m=new gT(void 0,MPe),x=n;x<o;x+=p)for(var b=i;b<a;b+=p)m.push(new Zc(x+d,b+d,d,e));var _=DPe(e),T=new Zc(n+u/2,i+c/2,0,e);T.d>_.d&&(_=T);for(var I=m.length;m.length;){var S=m.pop();S.d>_.d&&(_=S,r&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,I)),!(S.max-_.d<=t)&&(d=S.h/2,m.push(new Zc(S.x-d,S.y-d,d,e)),m.push(new Zc(S.x+d,S.y-d,d,e)),m.push(new Zc(S.x-d,S.y+d,d,e)),m.push(new Zc(S.x+d,S.y+d,d,e)),I+=4)}r&&(console.log("num probes: "+I),console.log("best distance: "+_.d));var E=[_.x,_.y];return E.distance=_.d,E}function MPe(e,t){return t.max-e.max}function Zc(e,t,r,n){this.x=e,this.y=t,this.h=r,this.d=APe(e,t,n),this.max=this.d+this.h*Math.SQRT2}function APe(e,t,r){for(var n=!1,i=1/0,o=0;o<r.length;o++)for(var a=r[o],s=0,l=a.length,u=l-1;s<l;u=s++){var c=a[s],p=a[u];c[1]>t!=p[1]>t&&e<(p[0]-c[0])*(t-c[1])/(p[1]-c[1])+c[0]&&(n=!n),i=Math.min(i,LPe(e,t,c,p))}return i===0?0:(n?1:-1)*Math.sqrt(i)}function DPe(e){for(var t=0,r=0,n=0,i=e[0],o=0,a=i.length,s=a-1;o<a;s=o++){var l=i[o],u=i[s],c=l[0]*u[1]-u[0]*l[1];r+=(l[0]+u[0])*c,n+=(l[1]+u[1])*c,t+=c*3}return t===0?new Zc(i[0][0],i[0][1],0,e):new Zc(r/t,n/t,0,e)}function LPe(e,t,r,n){var i=r[0],o=r[1],a=n[0]-i,s=n[1]-o;if(a!==0||s!==0){var l=((e-i)*a+(t-o)*s)/(a*a+s*s);l>1?(i=n[0],o=n[1]):l>0&&(i+=a*l,o+=s*l)}return a=e-i,s=t-o,a*a+s*s}});var FX,FPe,kPe,OPe,RPe,xT,kX=f(()=>{er();FX=Ie(LX(),1),FPe=e=>{let t=e.geometry.coordinates[0],r=0;for(let n=0;n<t.length-1;n++)r+=t[n][0]*t[n+1][1]-t[n+1][0]*t[n][1];return Math.abs(r/2)},kPe=(e,t)=>{let[r,n]=e,i=t.geometry.coordinates[0],o=!1;for(let a=0,s=i.length-1;a<i.length;s=a++){let[l,u]=i[a],[c,p]=i[s];u>n!=p>n&&r<(c-l)*(n-u)/(p-u)+l&&(o=!o)}return o},OPe=e=>{let t=e.geometry.coordinates[0],r=0,n=0;for(let i=0;i<t.length-1;i++)r+=t[i][0],n+=t[i][1];return{geometry:{coordinates:[r/(t.length-1),n/(t.length-1)]}}},RPe=e=>{let t=FPe(e),r=Number.isFinite(t)?Math.max(t,1):1;return Math.sqrt(r)*1e-6},xT=e=>{try{let r=OPe(e).geometry.coordinates;if(!kPe(r,e)){let i=(0,FX.default)(e.geometry.coordinates,RPe(e));return de([i[0],i[1]])}return de(r)}catch{return fe(new Error("Unable to calculate center of polygon"))}}});function YD(e){return e?.geometry?.type==="Polygon"}function RX(e,{geometryMaps:t,nodesByGeometryId:r,nodesById:n}){let i=UPe(e.defaultStyle),o={},a={},s={},l={};for(let c of ht(e.geometry)){let p=e.geometry[c];if(!p)continue;let d=[],h=[],m=[],x=[];for(let b of p.features){let _=b.properties.id,T=i.has(_),I=r.get(_)??[];for(let S of t.space.get(_)?.features??[])d.push(OX(S,I));for(let S of t.obstruction.get(_)?.features??[])if(h.push(BPe(S,T)),t.object.get(_)){let P=r.get(_)??[],L=P.map(k=>n.get(k)).filter(k=>k!=null);for(let k of L){let z=OX({type:"Feature",geometry:k.geometry,properties:{id:pX(k.properties.id),kind:"desk-entrance",details:{externalId:fT(_)}}},P);d.push(z)}}for(let S of t.area.get(_)?.features??[])m.push(zPe(S,I));for(let S of t.window.get(_)?.features??[])x.push(NPe(S))}d.length>0&&(o[c]={type:"FeatureCollection",features:d.filter(b=>b!==null)}),h.length>0&&(a[c]={type:"FeatureCollection",features:h.filter(b=>b!==null)}),m.length>0&&(s[c]={type:"FeatureCollection",features:m.filter(b=>b!==null)}),x.length>0&&(l[c]={type:"FeatureCollection",features:x.filter(b=>b!==null)})}let u={space:o,obstruction:a};return Object.keys(s).length>0&&(u.area=s),Object.keys(l).length>0&&(u.window=l),u}function OX(e,t){switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":return null}let r={type:"Feature",geometry:e.geometry,properties:{destinationNodes:t,id:e.properties.id,externalId:e.properties.details?.externalId??"",kind:e.properties.kind}};return e.properties.details&&(r.properties.details={name:e.properties.details.name,description:e.properties.details.description,images:e.properties.details.icon?[{url:e.properties.details.icon,altText:e.properties.details.name?`${e.properties.details.name} icon`:"icon"}]:void 0}),YD(r)&&(r.properties.center=xT(r).unwrapOr(void 0)),r}function BPe(e,t){switch(e.geometry.type){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"Point":return null}let r=e.properties,n={type:"Feature",geometry:e.geometry,properties:{id:r.id,externalId:r.details?.externalId??"",entrances:[],kind:r.kind,footprintComponent:t}};return YD(n)&&(n.properties.center=xT(n).unwrapOr(void 0)),r.details&&(n.properties.details={name:r.details.name,description:r.details.description,images:r.details.icon?[{url:r.details.icon,altText:r.details.name?`${r.details.name} icon`:"icon"}]:void 0}),n}function zPe(e,t){if(e.geometry.type!=="Polygon")return null;let r=e.properties,n={type:"Feature",geometry:e.geometry,properties:{id:r.id,externalId:r.details?.externalId??"",destinationNodes:t}};return YD(n)&&(n.properties.center=xT(n).unwrapOr(void 0)),r.details&&(n.properties.details={name:r.details.name,description:r.details.description,images:r.details.icon?[{url:r.details.icon,altText:r.details.name?`${r.details.name} icon`:"icon"}]:void 0}),n}function NPe(e){return e.geometry.type!=="LineString"?null:{type:"Feature",geometry:e.geometry,properties:{id:e.properties.id}}}function UPe(e){return new Set((e?.ExteriorWalls?.geometryAnchors??[]).map(r=>r.geometryId))}var BX=f(()=>{Xt();mT();kX()});function zX(e,{geometryMaps:t,geometryFeatureById:r}){if(!e.locationCategories&&!e.locations)return{};let n={};if(e.locationCategories?.length){let i=[];for(let o of e.locationCategories){let a={id:o.id,name:o.details.name,icon:o.details.icon??""};o.parent&&(a.parent=o.parent),i.push(a)}n["category.json"]=i}if(e.locations?.length){let i=$Pe(e,{geometryFeatureById:r}),o=[];for(let a of e.locations){let s={id:a.id,name:a.details.name,categories:a.categories,spaces:[],obstructions:[],areas:[],annotations:[],connections:[],entrances:[],links:a.links,openingHoursSpecification:a.openingHours??[],pictures:a.images,social:a.social,description:a.details.description,externalId:a.details.externalId,icon:a.details.icon,logo:a.logo,phone:a.phone,website:a.website};o.push(s);for(let{geometryId:l,floorId:u}of a.geometryAnchors)s.spaces.push(...t.space.get(l)?.ids.map(c=>({id:c,floor:u}))??[]),s.obstructions.push(...t.obstruction.get(l)?.ids.map(c=>({id:c,floor:u}))??[]),s.areas.push(...t.area.get(l)?.ids.map(c=>({id:c,floor:u}))??[]),s.entrances.push(...i.entrancesByGeometryId.get(l)??[]),s.connections.push(...i.connectionsByGeometryId.get(l)??[]),s.annotations.push(...i.annotationsByGeometryId.get(l)??[])}n["location.json"]=o}return n}function $Pe(e,{geometryFeatureById:t}){let r={annotationsByGeometryId:new Map,connectionsByGeometryId:new Map,entrancesByGeometryId:new Map};if(e.annotations)for(let[n,i]of Tt(e.annotations))for(let o of i??[]){let a=o.geometryId,s=o.id,l=r.annotationsByGeometryId.get(a)??[];l.push({floor:n,id:s}),r.annotationsByGeometryId.set(a,l)}if(e.connections)for(let n of e.connections){let i=WD(n,t),o=Array.from(new Map([...n.entrances,...n.exits].map(a=>[`${a.geometryId}_${a.floorId}`,a])).values());for(let a of o){let s=a.geometryId;if(i){let l=r.entrancesByGeometryId.get(s)??[];l.push({floor:a.floorId,id:n.id}),r.entrancesByGeometryId.set(s,l)}else{let l=r.connectionsByGeometryId.get(s)??[];l.push(n.id),r.connectionsByGeometryId.set(s,l)}}}return r}var NX=f(()=>{Xt();XD()});function UX(e,t){let r={features:[],type:"FeatureCollection"},n={"manifest.geojson":r},i=e.manifest;if(i.features.length>0){let o=i.features[0],a=o.properties,s={type:"Feature",geometry:o.geometry,properties:{folder_struct:[],version:"2.0.0",time:a.time,name:a.name,naturalBearing:a.naturalBearing,tzid:a.tzid,map:a.mapId,org_id:a.orgId,language:a.language}};r.features.push(s)}return n}var $X=f(()=>{});function VX(e,{geometryMaps:t,navigationFlags:r,incomingEdgesByNodeId:n}){let i={"node.geojson":{type:"FeatureCollection",features:[]}},o=i["node.geojson"].features,a=VPe(e),s=jPe(e),l=GPe(e,s,a);for(let[u,c]of Tt(e.nodes??{}))for(let p of c?.features??[]){let d=t.space.get(p.properties.geometryIds[0])?.features[0],h=d?.geometry.type==="Point"&&d?.properties.details?.externalId?d.properties.details.externalId:"",m=n.get(p.properties.id)??[],x=Object.keys(r??{}),b=[];for(let T of m)for(let I of x)Gc(T,r[I])&&b.push(r[I]);let _={type:"Feature",geometry:p.geometry,properties:{id:p.properties.id,floor:u,space:p.properties.geometryIds.map(T=>t.space.get(T)?.ids).flat().filter(T=>T!==void 0),neighbors:[...p.properties.neighbors.map(T=>({id:T.id,weight:T.extraCost})),...l.get(p.properties.id)??[]],map:u,externalId:h,flags:b.length>0?HPe(b):void 0}};o.push(_)}return i}function VPe(e){let t=new Map;for(let r of e.floors?.features??[])t.set(r.properties.id,r.properties.elevation);return t}function jPe(e){let t=new Map;for(let r of Object.values(e.nodes??{}))for(let n of r?.features??[])if(n.properties.geometryIds.length!==0)for(let i of n.properties.geometryIds){let o=t.get(i)??[];o.includes(n.properties.id)||(o.push(n.properties.id),t.set(i,o))}return t}function GPe(e,t,r){let n=new Map;for(let i of e.connections??[]){let o=i.exits.map(a=>({...a,nodes:t.get(a.geometryId)??[]}));for(let a of i.entrances){let s=t.get(a.geometryId)??[];for(let l of s)for(let u of o){let c=Math.abs((r.get(a.floorId)??0)-(r.get(u.floorId)??0))*i.floorCostMultiplier,p=n.get(l)??[];p.push(...u.nodes.filter(d=>d!==l).map(d=>({id:d,weight:c+i.entryCost}))),n.set(l,p)}}}return n}function HPe(e){if(e==null||e.length===0)return;let t=new Array(Math.max(...e.map(r=>r.index))+1).fill(0);for(let r of e)t[r.index]|=1<<r.bit;return t}var jX=f(()=>{Xt();Hc()});function ZPe(e,t){let r={};for(let n of e){let i=t.get(n);i&&(r[i]??(r[i]=[]),r[i].push(n))}return r}function GX(e,{geometryMaps:t}){if(!e.defaultStyle)return{};let r={},n={};r["styles.json"]=n;let i=[...Array.from(t.space.values()).map(a=>a.features),...Array.from(t.obstruction.values()).map(a=>a.features)],o=new Map(i.flatMap(a=>a.map(s=>[s.properties.id,s.geometry.type])));for(let[a,s]of Tt(e.defaultStyle)){let l=ZPe(s.geometryAnchors.flatMap(u=>[...t.space.get(u.geometryId)?.ids??[],...t.obstruction.get(u.geometryId)?.ids??[]]),o);if(l.Point&&l.Point.length>0){let u={points:Array.from(l.Point.values()),showImage:s.extra?.showImage!==void 0?s.extra?.showImage===!0:s.opacity!==0};n[`${a}.Point`]=u}if(l.LineString&&l.LineString.length>0){let u={lineStrings:Array.from(l.LineString.values()),altitude:s.altitude,color:s.color,height:s.height,opacity:s.opacity,width:s.buffer};n[`${a}.LineString`]=u}if(l.Polygon&&l.Polygon.length>0){let u={polygons:Array.from(l.Polygon.values()),altitude:s.altitude,color:s.color,height:s.height,opacity:s.opacity};s.extra?.showImage!==void 0&&(u.showImage=s.extra.showImage===!0),n[`${a}.Polygon`]=u}}return r}var HX=f(()=>{Xt()});function ZX(e){let t=fX(e),r=wX(e,t),n=RX(e,t),i=VX(e,t),o=gX(e,t),a=GX(e,t),s=CX(e,t),l=IX(e,t),u=_X(e,t),c=mX(e,t),p=zX(e,t),d=bX(e,t),h=UX(e,t);return{...e.tileset?{"tileset.json":e.tileset}:{},...e.navigationFlags?{"navigationFlags.json":e.navigationFlags}:{},...r,...n,...i,...o,...a,...s,...l,...u,...c,...p,...d,...h}}function JD(e){let t=WPe.decompressUnsafeSync(e);return t.isOk()?de(ZX(t.value)):fe(t.error)}var WPe,WX=f(()=>{UH();NZ();$D();Si();sW();vW();MW();VD();OW();Vc();Hc();jW();YW();rX();lX();er();hX();yX();XD();vX();SX();TX();EX();PX();BX();NX();$X();jX();HX();WPe=DH().extendOptional(WZ).extendOptional(VW).extendOptional(tW).extendOptional(kW).extendOptional(sX).extendOptional(aW).extendOptional(hW).extendOptional(qW).extendOptional(tX).extendOptional(PW).extendOptional(bW).extendOptional(NH).extendOptional(JH).extendOptional(zZ).build({cspSafe:!0}).expect("Invalid parser, this should never happen. Likely a bug in the MVFv2 library, or one of the extensions.")});var KD=f(()=>{E7();C7();P7();V7();j7();LH();FH();WX()});function hx(e){return e.endsWith("/")?e:`${e}/`}var bT=f(()=>{"use strict"});function YX(e){return KPe[e]}var mx,XX,qX,XPe,qPe,YPe,JPe,KPe,vT=f(()=>{"use strict";mx="https://app.mappedin.com/",XX="https://auth.mappedin.com/",qX=Object.freeze({baseUri:"https://app.mappedin.com/",baseAuthUri:"https://app.mappedin.com/",analyticsBaseUri:"https://api-gateway.mappedin.com/track-analytics/a/",tileServerUri:"https://tiles-cdn.mappedin.com/styles/mappedin/style.json"}),XPe=Object.freeze({...qX,baseUri:"https://api-gateway.mappedin.com/",baseAuthUri:"https://auth.mappedin.com/"}),qPe=Object.freeze({baseUri:"https://api-gateway.eu.mappedin.com/",baseAuthUri:"https://auth.eu.mappedin.com/",analyticsBaseUri:"https://api-gateway.eu.mappedin.com/track-analytics/a/",tileServerUri:"https://tiles-cdn.eu.mappedin.com/styles/mappedin/style.json"}),YPe=Object.freeze({baseUri:"https://api-gateway-staging.mappedin.net/",baseAuthUri:"https://auth-staging.mappedin.net/",analyticsBaseUri:"https://api-gateway-staging.mappedin.net/track-analytics/a/",tileServerUri:"https://tiles-cdn.mappedin.com/styles/mappedin/style.json"}),JPe=Object.freeze({baseUri:"https://app-staging.mappedin.net/",baseAuthUri:"https://app-staging.mappedin.net/",analyticsBaseUri:"https://api-gateway-staging.mappedin.net/track-analytics/a/",tileServerUri:"https://tiles-cdn.mappedin.com/styles/mappedin/style.json"}),KPe={eu:qPe,us:qX,"us-enterprise":XPe,"us-staging-enterprise":YPe,"us-staging-self-serve":JPe}});var QPe,_T,QD=f(()=>{"use strict";QPe=e=>{let t=Date.now();return e-t},_T=(e,t)=>QPe(e)<=t*60*1e3});async function ST(e,t=!1){let r=`${e.key}`,n=oa.getInstance(),i=n?.loadSessionData(JX)||{},o=Math.floor(Date.now()/1e3);if(i[r]&&!_T(i[r].expiresTimestamp*1e3,KX))return i[r];let a=t?await eMe(e,o):await tMe(e,o),s={...i,[r]:a};return n?.saveSessionData(JX,s),a}async function eMe(e,t){let r;e.customAuthUri?r=e.customAuthUri:r=`${e.baseAuthUri??XX}oauth2/token`;let n;try{n=await Wc()(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"client_credentials",client_id:e.key,client_secret:e.secret})})}catch(o){let a=o instanceof Error?o.message:String(o);throw new Error(`Failed to fetch enterprise access token from ${r}: ${a}`)}if(!n.ok)throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);let i=await n.json();return{accessToken:i.access_token,expiresTimestamp:t+i.expires_in}}async function tMe(e,t){let r;e.customAuthUri?r=e.customAuthUri:r=`${e.baseAuthUri?hx(e.baseAuthUri):mx}api/v1/api-key/token`;let n;try{n=await Wc()(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e.key,secret:e.secret})})}catch(o){let a=o instanceof Error?o.message:String(o);throw new Error(`Failed to fetch access token from ${r}: ${a}`)}if(!n.ok)throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);let i=await n.json();return{accessToken:i.access_token,expiresTimestamp:t+i.expires_in}}var KX,QX,JX,eL=f(()=>{"use strict";bT();T1();vT();Au();QD();KX=60,QX=KX*60*1e3,JX="accessTokens"});async function tL(e,t){let r=`${t}__${e.mapId}`,n=oa.getInstance(),i=n?.loadSessionData(eq)||{};if(i[r]&&!_T(i[r].expires,tq))return i[r];let o=await rMe(e,t),a={...i,[r]:{token:o.token,expires:new Date(o.expires).getTime()}};return n?.saveSessionData(eq,a),o}async function rMe(e,t){let r=`${e.baseUri?hx(e.baseUri):mx}api/v1/venue/${e.mapId}/sas-token`,n=await Wc()(r,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error(`${n.status} ${n.statusText}: ${await n.text()}`);let i=await n.json();return{token:i.token,expires:new Date(i.expires).getTime()}}var tq,rq,eq,rL=f(()=>{"use strict";bT();T1();vT();Au();QD();tq=60,rq=tq*60*1e3,eq="miSasTokens"});function dMe(e,t){return cMe(e,t)}function mMe(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(sL)return sL.decode(e);var i=hMe(e),o=i[0],a=i[1];return a.length&&gs(8),o}}function uL(e,t){for(var r={},n=e.length-22;xs(e,n)!=101010256;--n)(!n||e.length-n>65558)&&gs(13);var i=Sl(e,n+8);if(!i)return{};var o=xs(e,n+16),a=o==4294967295||i==65535;if(a){var s=xs(e,n-12);a=xs(e,s)==101075792,a&&(i=xs(e,s+32),o=xs(e,s+48))}for(var l=t&&t.filter,u=0;u<i;++u){var c=gMe(e,o,a),p=c[0],d=c[1],h=c[2],m=c[3],x=c[4],b=c[5],_=yMe(e,b);o=x,(!l||l({name:m,size:d,originalSize:h,compression:p}))&&(p?p==8?r[m]=dMe(e.subarray(_,_+d),new Ho(h)):gs(14,"unknown compression type "+p):r[m]=lL(e,_,_+d))}return r}var Ho,Ld,nq,iq,oq,nMe,aq,sq,lq,iMe,uq,oMe,IEt,aL,Du,Lt,yx,gx,Lt,Lt,Lt,Lt,cq,Lt,aMe,sMe,nL,ys,iL,lMe,lL,uMe,gs,cMe,pMe,Sl,xs,oL,sL,fMe,hMe,yMe,gMe,xMe,pq=f(()=>{Ho=Uint8Array,Ld=Uint16Array,nq=Uint32Array,iq=new Ho([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oq=new Ho([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nMe=new Ho([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aq=function(e,t){for(var r=new Ld(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new nq(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},sq=aq(iq,2),lq=sq[0],iMe=sq[1];lq[28]=258,iMe[258]=28;uq=aq(oq,0),oMe=uq[0],IEt=uq[1],aL=new Ld(32768);for(Lt=0;Lt<32768;++Lt)Du=(Lt&43690)>>>1|(Lt&21845)<<1,Du=(Du&52428)>>>2|(Du&13107)<<2,Du=(Du&61680)>>>4|(Du&3855)<<4,aL[Lt]=((Du&65280)>>>8|(Du&255)<<8)>>>1;yx=function(e,t,r){for(var n=e.length,i=0,o=new Ld(t);i<n;++i)e[i]&&++o[e[i]-1];var a=new Ld(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;var s;if(r){s=new Ld(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],p=a[e[i]-1]++<<c,d=p|(1<<c)-1;p<=d;++p)s[aL[p]>>>l]=u}else for(s=new Ld(n),i=0;i<n;++i)e[i]&&(s[i]=aL[a[e[i]-1]++]>>>15-e[i]);return s},gx=new Ho(288);for(Lt=0;Lt<144;++Lt)gx[Lt]=8;for(Lt=144;Lt<256;++Lt)gx[Lt]=9;for(Lt=256;Lt<280;++Lt)gx[Lt]=7;for(Lt=280;Lt<288;++Lt)gx[Lt]=8;cq=new Ho(32);for(Lt=0;Lt<32;++Lt)cq[Lt]=5;aMe=yx(gx,9,1),sMe=yx(cq,5,1),nL=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ys=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},iL=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},lMe=function(e){return(e+7)/8|0},lL=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var n=new(e.BYTES_PER_ELEMENT==2?Ld:e.BYTES_PER_ELEMENT==4?nq:Ho)(r-t);return n.set(e.subarray(t,r)),n},uMe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gs=function(e,t,r){var n=new Error(t||uMe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,gs),!r)throw n;return n},cMe=function(e,t,r){var n=e.length;if(!n||r&&r.f&&!r.l)return t||new Ho(0);var i=!t||r,o=!r||r.i;r||(r={}),t||(t=new Ho(n*3));var a=function(Lr){var Mn=t.length;if(Lr>Mn){var ii=new Ho(Math.max(Mn*2,Lr));ii.set(t),t=ii}},s=r.f||0,l=r.p||0,u=r.b||0,c=r.l,p=r.d,d=r.m,h=r.n,m=n*8;do{if(!c){s=ys(e,l,1);var x=ys(e,l+1,3);if(l+=3,x)if(x==1)c=aMe,p=sMe,d=9,h=5;else if(x==2){var I=ys(e,l,31)+257,S=ys(e,l+10,15)+4,E=I+ys(e,l+5,31)+1;l+=14;for(var P=new Ho(E),L=new Ho(19),k=0;k<S;++k)L[nMe[k]]=ys(e,l+k*3,7);l+=S*3;for(var z=nL(L),W=(1<<z)-1,Z=yx(L,z,1),k=0;k<E;){var Y=Z[ys(e,l,W)];l+=Y&15;var b=Y>>>4;if(b<16)P[k++]=b;else{var J=0,j=0;for(b==16?(j=3+ys(e,l,3),l+=2,J=P[k-1]):b==17?(j=3+ys(e,l,7),l+=3):b==18&&(j=11+ys(e,l,127),l+=7);j--;)P[k++]=J}}var ae=P.subarray(0,I),ve=P.subarray(I);d=nL(ae),h=nL(ve),c=yx(ae,d,1),p=yx(ve,h,1)}else gs(1);else{var b=lMe(l)+4,_=e[b-4]|e[b-3]<<8,T=b+_;if(T>n){o&&gs(0);break}i&&a(u+_),t.set(e.subarray(b,T),u),r.b=u+=_,r.p=l=T*8,r.f=s;continue}if(l>m){o&&gs(0);break}}i&&a(u+131072);for(var xe=(1<<d)-1,Le=(1<<h)-1,Te=l;;Te=l){var J=c[iL(e,l)&xe],rt=J>>>4;if(l+=J&15,l>m){o&&gs(0);break}if(J||gs(2),rt<256)t[u++]=rt;else if(rt==256){Te=l,c=null;break}else{var Re=rt-254;if(rt>264){var k=rt-257,zt=iq[k];Re=ys(e,l,(1<<zt)-1)+lq[k],l+=zt}var He=p[iL(e,l)&Le],Yt=He>>>4;He||gs(3),l+=He&15;var ve=oMe[Yt];if(Yt>3){var zt=oq[Yt];ve+=iL(e,l)&(1<<zt)-1,l+=zt}if(l>m){o&&gs(0);break}i&&a(u+131072);for(var Fe=u+Re;u<Fe;u+=4)t[u]=t[u-ve],t[u+1]=t[u+1-ve],t[u+2]=t[u+2-ve],t[u+3]=t[u+3-ve];u=Fe}}r.l=c,r.p=Te,r.b=u,r.f=s,c&&(s=1,r.m=d,r.d=p,r.n=h)}while(!s);return u==t.length?t:lL(t,0,u)},pMe=new Ho(0),Sl=function(e,t){return e[t]|e[t+1]<<8},xs=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},oL=function(e,t){return xs(e,t)+xs(e,t+4)*4294967296};sL=typeof TextDecoder<"u"&&new TextDecoder,fMe=0;try{sL.decode(pMe,{stream:!0}),fMe=1}catch{}hMe=function(e){for(var t="",r=0;;){var n=e[r++],i=(n>127)+(n>223)+(n>239);if(r+i>e.length)return[t,lL(e,r-1)];i?i==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};yMe=function(e,t){return t+30+Sl(e,t+26)+Sl(e,t+28)},gMe=function(e,t,r){var n=Sl(e,t+28),i=mMe(e.subarray(t+46,t+46+n),!(Sl(e,t+8)&2048)),o=t+46+n,a=xs(e,t+20),s=r&&a==4294967295?xMe(e,o):[a,xs(e,t+24),xs(e,t+42)],l=s[0],u=s[1],c=s[2];return[Sl(e,t+10),l,u,i,o+Sl(e,t+30)+Sl(e,t+32),c]},xMe=function(e,t){for(;Sl(e,t)!=1;t+=4+Sl(e,t+2));return[oL(e,t+12),oL(e,t+4),oL(e,t+20)]}});function Wc(){if(dq==null)throw new Error("fetch is not available in your environment. Pass your own function into `setFetchFn` (node-fetch, etc)");return dq}async function cL(e,{signal:t}){let r=await(await Wc()(e,{signal:t})).arrayBuffer();return new Uint8Array(r)}async function Tm(e){let t=uL(e),r={};if(t["enterprise/"]!=null){r.enterprise={};let n=t["enterprise/locations.json"];n&&(r.enterprise.locations=JSON.parse(wm().decode(n)));let i=t["enterprise/locationInstances.json"];i&&(r.enterprise.locationInstances=JSON.parse(wm().decode(i)));let o=t["enterprise/categories.json"];o&&(r.enterprise.categories=JSON.parse(wm().decode(o)))}return t["floorstack.json"]&&(r["floorstack.json"]=JSON.parse(wm().decode(t["floorstack.json"]))),t["floor.geojson"]&&(r["floor.geojson"]=JSON.parse(wm().decode(t["floor.geojson"]))),t["manifest.json"]&&(r["manifest.geojson"]=JSON.parse(wm().decode(t["manifest.json"]))),r}async function hq(e,{signal:t}){try{let r=await(await Wc()(e,{signal:t})).arrayBuffer();if(t.aborted)return;let n=new Uint8Array(r);return await Tm(n)}catch(r){let n=new Error("downloadLanguagePack failed");throw n.cause=r,n}}function pL(e){let t=new TextDecoder,r=t.decode.bind(t);try{let n={"connection.json":JSON.parse(r(e["connection.json"])),"manifest.geojson":JSON.parse(r(e["manifest.geojson"])),"map.geojson":e["map.geojson"]?JSON.parse(r(e["map.geojson"])):void 0,"mapstack.geojson":e["mapstack.geojson"]?JSON.parse(r(e["mapstack.geojson"])):void 0,"node.geojson":JSON.parse(r(e["node.geojson"])),obstruction:{},space:{},entrance:{},facade:{},"tileset.json":e["tileset.json"]?JSON.parse(r(e["tileset.json"])):void 0,"navigationFlags.json":e["navigationFlags.json"]?JSON.parse(r(e["navigationFlags.json"])):void 0};if(e.enterprise!=null&&(n.enterprise={},e.enterprise?.["locations.json"]&&(n.enterprise.locations=JSON.parse(r(e.enterprise?.["locations.json"]))),e.enterprise?.["categories.json"]&&(n.enterprise.categories=JSON.parse(r(e.enterprise?.["categories.json"]))),e.enterprise?.["venue.json"]&&(n.enterprise.venue=JSON.parse(r(e.enterprise?.["venue.json"]))),e.enterprise?.["layers.json"]&&(n.enterprise.layers=JSON.parse(r(e.enterprise?.["layers.json"]))),e.enterprise?.["locationInstances.json"]&&(n.enterprise.locationInstances=JSON.parse(r(e.enterprise?.["locationInstances.json"]))),e.enterprise?.["enterpriseStyles.json"]&&(n.enterprise.enterpriseStyles=JSON.parse(r(e.enterprise?.["enterpriseStyles.json"]))),e.enterprise?.["textures.json"]&&(n.enterprise.textures=JSON.parse(r(e.enterprise?.["textures.json"]))),e.enterprise?.["floorText.json"]&&(n.enterprise.floorText=JSON.parse(r(e.enterprise?.["floorText.json"]))),e.enterprise?.["categoryPriorities.json"]&&(n.enterprise.categoryPriorities=JSON.parse(r(e.enterprise?.["categoryPriorities.json"])))),e["floorstack.json"]!=null?n["floorstack.json"]=JSON.parse(r(e["floorstack.json"])):e["mapstack.json"]!=null&&(n["mapstack.json"]=JSON.parse(r(e["mapstack.json"]))),n["floorstack.json"]==null&&n["mapstack.json"]==null&&n["mapstack.geojson"]==null)throw new Error("MVF is missing floorstack.json or mapstack.json/mapstack.geojson");if(e["floor.geojson"]&&(n["floor.geojson"]=JSON.parse(r(e["floor.geojson"]))),n["floor.geojson"]==null&&n["map.geojson"]==null)throw new Error("MVF is missing floor.geojson or map.geojson");if("styles.json"in e&&(n["styles.json"]=JSON.parse(r(e["styles.json"]))),"shapes.json"in e&&(n["shapes.json"]=JSON.parse(r(e["shapes.json"]))),"location.json"in e&&(n["location.json"]=JSON.parse(r(e["location.json"]))),"category.json"in e&&(n["category.json"]=JSON.parse(r(e["category.json"]))),e.annotation!=null){n.annotation={};let o=Object.keys(e.annotation);for(let a of o){let s=a.replace(/\.json|\.geojson/g,"");n.annotation[s]=JSON.parse(r(e.annotation[a]))}}let i=Object.keys(e.space);for(let o of i){let a=o.replace(/\.json|\.geojson/g,"");n.space[a]=JSON.parse(r(e.space[o]))}if(e.obstruction!=null){let o=Object.keys(e.obstruction);for(let a of o){let s=a.replace(/\.json|\.geojson/g,"");n.obstruction[s]=JSON.parse(r(e.obstruction[a]))}}else n.obstruction={};if(e.entrance!=null){let o=Object.keys(e.entrance);for(let a of o){let s=a.replace(/\.json|\.geojson/g,"");n.entrance[s]=JSON.parse(r(e.entrance[a]))}}else n.entrance={};if("floorImages"in e&&e.floorImages!=null){n.floorImages={};for(let o of Object.keys(e.floorImages)){let a=o.replace(/\.json|\.geojson/g,"");n.floorImages[a]=JSON.parse(r(e.floorImages[o]))}}if("textAreas"in e&&e.textAreas!=null){n.textAreas={};for(let o of Object.keys(e.textAreas)){let a=o.replace(/\.json|\.geojson/g,"");n.textAreas[a]=JSON.parse(r(e.textAreas[o]))}}if("facade"in e&&e.facade!=null){n.facade={};for(let o of Object.keys(e.facade)){let a=o.replace(/\.json|\.geojson/g,"");n.facade[a]=JSON.parse(r(e.facade[o]))}}if("area"in e&&e.area!=null){n.area={};for(let o of Object.keys(e.area)){let a=o.replace(/\.json|\.geojson/g,"");n.area[a]=JSON.parse(r(e.area[o]))}}return n}catch(n){throw ie.error(n),new Error("MVF parsing failed! Probably encountered a bad file.")}}function vMe(e){if(e==null||typeof e!="object")return!1;let t=["connection.json","manifest.geojson","floor.geojson"in e?"floor.geojson":"map.geojson","node.geojson","floorstack.json"in e?"floorstack.json":"mapstack.json"in e?"mapstack.json":"mapstack.geojson"];"styles.json"in e&&t.push("styles.json"),"shapes.json"in e&&t.push("shapes.json");for(let r of t)if(e[r]==null||e[r][Symbol.toStringTag]!=="Uint8Array")return!1;return!0}async function dL(e){return new Promise(async(t,r)=>{try{if(e==null||typeof e!="object")throw new Error("Error parsing data! Unzipping failed.");if(e[Symbol.toStringTag]!=="Uint8Array")throw new Error("Unexpected file type! Unzipping failed.");let n=uL(e);if(!vMe(n))throw new Error("MVF is missing some expect static files. Unzipping failed.");let i={},o=Object.keys(n);for(let a of o){if(n[a].length===0)continue;let s=a.split("/");if(s.length<0)throw new Error("Encounted a file with no name! Unzipping failed.");if(s.length>2)throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");if(s.length===1){i[s[0]]=n[a];continue}if(s[0]==="image"){ie.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");continue}else i[s[0]]==null&&(i[s[0]]={}),i[s[0]][s[1]]=n[a]}t(i)}catch(n){r(n)}})}function Im(){let e="us",t={};function r(){return _Me(YX(e),t)}return{updateByUserOption(n){n.environment&&(e=n.environment),n.baseUri&&(t.baseUri=n.baseUri),n.baseAuthUri&&(t.baseAuthUri=n.baseAuthUri),n.analytics?.baseUri&&(t.analyticsBaseUri=n.analytics?.baseUri)},updateTileServerBaseUrl(n){t.tileServerUri=n},updateEnvironment(n){e=n},setEnterprise(n){(e==="us"||e==="us-enterprise")&&(e=n?"us-enterprise":"us")},getBaseUri(){return r().baseUri},getBaseAuthUri(){return r().baseAuthUri},getAnalyticsBaseUri(){return r().analyticsBaseUri},getTileServerUri(){return r().tileServerUri},reset(){e="us",t={}},__getState:r}}function _Me(e,t){return{...e,...t}}async function wT(e,t="2.0.0"){switch(t){case"2.0.0":case"2.0.0-c":try{let r=await dL(e);return pL(r)}catch{return fq(e)}case"3.0.0":return fq(e);default:throw new Error(`Unsupported MVF version: ${t}`)}}var dq,AEt,wm,fL,fq,Au=f(()=>{"use strict";KD();Pe();bT();vT();eL();rL();pq();dq=globalThis.fetch,AEt=process?.env?.npm_package_version;wm=function(){let e;return()=>(e||(e=new TextDecoder),e)}();fL=e=>{let t=Object.values(e["floorstack.json"]??e["mapstack.json"]??{});return t.length===1?[]:t.filter(r=>r.type!=="Outdoor").map(r=>r.id.replace("fs_","").replace("ms_",""))},fq=async e=>{let t=performance.now(),r=JD(e);return ie.log(`Parsed MVFv3 in ${performance.now()-t}ms`),r.inspectErr(i=>{throw ie.error(i),new Error("MVFv3 parsing failed!")}),r.unwrap()}});var mq=f(()=>{"use strict"});var yq=f(()=>{"use strict"});function Fd(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hL(e){return e.type==="Feature"?e.geometry:e}var bs=f(()=>{Xi()});var gq=f(()=>{bs()});var mL=f(()=>{bs();Xi()});var xq=f(()=>{mL();Qs()});var bq=f(()=>{Xi();bs()});function xx(e,t,r,n){n===void 0&&(n={});var i=Fd(e),o=zp(i[0]),a=zp(i[1]),s=zp(r),l=Jg(t,n.units),u=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s)),c=o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(u)),p=qf(c),d=qf(u);return fi([p,d],n.properties)}var yL=f(()=>{Xi();bs()});var vq=f(()=>{Xi();bs();Qs()});function gL(e,t,r,n,i){_q(e,t,r||0,n||e.length-1,i||wMe)}function _q(e,t,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=t-r+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1),c=Math.max(r,Math.floor(t-a*l/o+u)),p=Math.min(n,Math.floor(t+(o-a)*l/o+u));_q(e,t,c,p,i)}var d=e[t],h=r,m=n;for(bx(e,r,t),i(e[n],d)>0&&bx(e,r,n);h<m;){for(bx(e,h,m),h++,m--;i(e[h],d)<0;)h++;for(;i(e[m],d)>0;)m--}i(e[r],d)===0?bx(e,r,m):(m++,bx(e,m,n)),m<=t&&(r=m+1),t<=m&&(n=m-1)}}function bx(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function wMe(e,t){return e<t?-1:e>t?1:0}var Sq=f(()=>{});var Tq={};Fr(Tq,{default:()=>CT});function TMe(e,t,r){if(!r)return t.indexOf(e);for(let n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function Em(e,t){vx(e,0,e.children.length,t,e)}function vx(e,t,r,n,i){i||(i=Cm(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=t;o<r;o++){let a=e.children[o];_x(i,e.leaf?n(a):a)}return i}function _x(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function IMe(e,t){return e.minX-t.minX}function EMe(e,t){return e.minY-t.minY}function xL(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function IT(e){return e.maxX-e.minX+(e.maxY-e.minY)}function CMe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function PMe(e,t){let r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function bL(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ET(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Cm(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function wq(e,t,r,n,i){let o=[t,r];for(;o.length;){if(r=o.pop(),t=o.pop(),r-t<=n)continue;let a=t+Math.ceil((r-t)/n/2)*n;gL(e,a,t,r,i),o.push(t,a,a,r)}}var CT,Iq=f(()=>{Sq();CT=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let r=this.data,n=[];if(!ET(t,r))return n;let i=this.toBBox,o=[];for(;r;){for(let a=0;a<r.children.length;a++){let s=r.children[a],l=r.leaf?i(s):s;ET(t,l)&&(r.leaf?n.push(s):bL(t,l)?this._all(s,n):o.push(s))}r=o.pop()}return n}collides(t){let r=this.data;if(!ET(t,r))return!1;let n=[];for(;r;){for(let i=0;i<r.children.length;i++){let o=r.children[i],a=r.leaf?this.toBBox(o):o;if(ET(t,a)){if(r.leaf||bL(t,a))return!0;n.push(o)}}r=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let r=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=r;else if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){let n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Cm([]),this}remove(t,r){if(!t)return this;let n=this.data,i=this.toBBox(t),o=[],a=[],s,l,u;for(;n||o.length;){if(n||(n=o.pop(),l=o[o.length-1],s=a.pop(),u=!0),n.leaf){let c=TMe(t,n.children,r);if(c!==-1)return n.children.splice(c,1),o.push(n),this._condense(o),this}!u&&!n.leaf&&bL(n,i)?(o.push(n),a.push(s),s=0,l=n,n=n.children[0]):l?(s++,n=l.children[s],u=!1):n=null}return this}toBBox(t){return t}compareMinX(t,r){return t.minX-r.minX}compareMinY(t,r){return t.minY-r.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,r){let n=[];for(;t;)t.leaf?r.push(...t.children):n.push(...t.children),t=n.pop();return r}_build(t,r,n,i){let o=n-r+1,a=this._maxEntries,s;if(o<=a)return s=Cm(t.slice(r,n+1)),Em(s,this.toBBox),s;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),s=Cm([]),s.leaf=!1,s.height=i;let l=Math.ceil(o/a),u=l*Math.ceil(Math.sqrt(a));wq(t,r,n,u,this.compareMinX);for(let c=r;c<=n;c+=u){let p=Math.min(c+u-1,n);wq(t,c,p,l,this.compareMinY);for(let d=c;d<=p;d+=l){let h=Math.min(d+l-1,p);s.children.push(this._build(t,d,h,i-1))}}return Em(s,this.toBBox),s}_chooseSubtree(t,r,n,i){for(;i.push(r),!(r.leaf||i.length-1===n);){let o=1/0,a=1/0,s;for(let l=0;l<r.children.length;l++){let u=r.children[l],c=xL(u),p=CMe(t,u)-c;p<a?(a=p,o=c<o?c:o,s=u):p===a&&c<o&&(o=c,s=u)}r=s||r.children[0]}return r}_insert(t,r,n){let i=n?t:this.toBBox(t),o=[],a=this._chooseSubtree(i,this.data,r,o);for(a.children.push(t),_x(a,i);r>=0&&o[r].children.length>this._maxEntries;)this._split(o,r),r--;this._adjustParentBBoxes(i,o,r)}_split(t,r){let n=t[r],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);let a=this._chooseSplitIndex(n,o,i),s=Cm(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,Em(n,this.toBBox),Em(s,this.toBBox),r?t[r-1].children.push(s):this._splitRoot(n,s)}_splitRoot(t,r){this.data=Cm([t,r]),this.data.height=t.height+1,this.data.leaf=!1,Em(this.data,this.toBBox)}_chooseSplitIndex(t,r,n){let i,o=1/0,a=1/0;for(let s=r;s<=n-r;s++){let l=vx(t,0,s,this.toBBox),u=vx(t,s,n,this.toBBox),c=PMe(l,u),p=xL(l)+xL(u);c<o?(o=c,i=s,a=p<a?p:a):c===o&&p<a&&(a=p,i=s)}return i||n-r}_chooseSplitAxis(t,r,n){let i=t.leaf?this.compareMinX:IMe,o=t.leaf?this.compareMinY:EMe,a=this._allDistMargin(t,r,n,i),s=this._allDistMargin(t,r,n,o);a<s&&t.children.sort(i)}_allDistMargin(t,r,n,i){t.children.sort(i);let o=this.toBBox,a=vx(t,0,r,o),s=vx(t,n-r,n,o),l=IT(a)+IT(s);for(let u=r;u<n-r;u++){let c=t.children[u];_x(a,t.leaf?o(c):c),l+=IT(a)}for(let u=n-r-1;u>=r;u--){let c=t.children[u];_x(s,t.leaf?o(c):c),l+=IT(s)}return l}_adjustParentBBoxes(t,r,n){for(let i=n;i>=0;i--)_x(r[i],t)}_condense(t){for(let r=t.length-1,n;r>=0;r--)t[r].children.length===0?r>0?(n=t[r-1].children,n.splice(n.indexOf(t[r]),1)):this.clear():Em(t[r],this.toBBox)}}});var Aq=ui((iCt,vL)=>{var wl=(Iq(),Tg(Tq)),Cq=(Xi(),Tg(X8)),Pq=(Qs(),Tg(Q8)),Pm=(Yf(),Tg(e7)).default,MMe=Pq.featureEach,rCt=Pq.coordEach,nCt=Cq.polygon,Eq=Cq.featureCollection;function Mq(e){var t=new wl(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Pm(r),wl.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Pm(i),n.push(i)}):MMe(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:Pm(i),n.push(i)}),wl.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Pm(r),wl.prototype.remove.call(this,r,n)},t.clear=function(){return wl.prototype.clear.call(this)},t.search=function(r){var n=wl.prototype.search.call(this,this.toBBox(r));return Eq(n)},t.collides=function(r){return wl.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=wl.prototype.all.call(this);return Eq(r)},t.toJSON=function(){return wl.prototype.toJSON.call(this)},t.fromJSON=function(r){return wl.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=Pm(r);else if(r.type==="FeatureCollection")n=Pm(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}vL.exports=Mq;vL.exports.default=Mq});var AMe,_L=f(()=>{Xi();bs();vq();Qs();AMe=Ie(Aq(),1)});var SL=f(()=>{bq();mL();yL();_L();Qs();Xi();bs()});var Dq=f(()=>{bs();Xi();SL()});var wL=f(()=>{"use strict";gq();L1();xq();Dq();SL()});var Lq=f(()=>{"use strict";mq();yq();Au();wL()});var Fq=f(()=>{"use strict";globalThis.requestIdleCallback=globalThis.requestIdleCallback||function(e){var t=performance.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(performance.now()-t))}})},0)};globalThis.cancelIdleCallback=globalThis.cancelIdleCallback||function(e){clearTimeout(e)}});var kq=f(()=>{"use strict";(function(){typeof globalThis!="object"&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})()});var Oq=f(()=>{"use strict";Yf()});var Rq=f(()=>{"use strict"});function B(e,t,r){function n(s,l){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(e),t(s,l);for(let c in a.prototype)c in s||Object.defineProperty(s,c,{value:a.prototype[c].bind(s)});s._zod.constr=a,s._zod.def=l}let i=r?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function a(s){var l;let u=r?.Parent?new o:this;n(u,s),(l=u._zod).deferred??(l.deferred=[]);for(let c of u._zod.deferred)c();return u}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}function en(e){return e&&Object.assign(Sx,e),Sx}var TL,PT,vs,Xc,Sx,Mm=f(()=>{TL=Object.freeze({status:"aborted"});PT=Symbol("zod_brand"),vs=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Xc=class extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}},Sx={}});var re={};Fr(re,{BIGINT_FORMAT_RANGES:()=>FL,Class:()=>EL,NUMBER_FORMAT_RANGES:()=>LL,aborted:()=>Qc,allowsEval:()=>PL,assert:()=>UMe,assertEqual:()=>RMe,assertIs:()=>zMe,assertNever:()=>NMe,assertNotEqual:()=>BMe,assignProp:()=>Yc,base64ToUint8Array:()=>zq,base64urlToUint8Array:()=>n2e,cached:()=>Dm,captureStackTrace:()=>AT,cleanEnum:()=>r2e,cleanRegex:()=>Ix,clone:()=>ki,cloneDef:()=>VMe,createTransparentProxy:()=>XMe,defineLazy:()=>ot,esc:()=>MT,escapeRegex:()=>Tl,extend:()=>JMe,finalizeIssue:()=>Wo,floatSafeRemainder:()=>CL,getElementAtPath:()=>jMe,getEnumValues:()=>Tx,getLengthableOrigin:()=>Px,getParsedType:()=>WMe,getSizableOrigin:()=>Cx,hexToUint8Array:()=>o2e,isObject:()=>kd,isPlainObject:()=>Kc,issue:()=>Lm,joinValues:()=>$,jsonStringifyReplacer:()=>Am,merge:()=>QMe,mergeDefs:()=>Jc,normalizeParams:()=>te,nullish:()=>qc,numKeys:()=>ZMe,objectClone:()=>$Me,omit:()=>YMe,optionalKeys:()=>DL,partial:()=>e2e,pick:()=>qMe,prefixIssues:()=>Zo,primitiveTypes:()=>AL,promiseAllObject:()=>GMe,propertyKeyTypes:()=>Ex,randomString:()=>HMe,required:()=>t2e,safeExtend:()=>KMe,shallowClone:()=>ML,stringifyPrimitive:()=>Q,uint8ArrayToBase64:()=>Nq,uint8ArrayToBase64url:()=>i2e,uint8ArrayToHex:()=>a2e,unwrapMessage:()=>wx});function RMe(e){return e}function BMe(e){return e}function zMe(e){}function NMe(e){throw new Error}function UMe(e){}function Tx(e){let t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,i])=>t.indexOf(+n)===-1).map(([n,i])=>i)}function $(e,t="|"){return e.map(r=>Q(r)).join(t)}function Am(e,t){return typeof t=="bigint"?t.toString():t}function Dm(e){return{get value(){{let r=e();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function qc(e){return e==null}function Ix(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function CL(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(n)){let l=n.match(/\d?e-(\d?)/);l?.[1]&&(i=Number.parseInt(l[1]))}let o=r>i?r:i,a=Number.parseInt(e.toFixed(o).replace(".","")),s=Number.parseInt(t.toFixed(o).replace(".",""));return a%s/10**o}function ot(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Bq)return n===void 0&&(n=Bq,n=r()),n},set(i){Object.defineProperty(e,t,{value:i})},configurable:!0})}function $Me(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Yc(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Jc(...e){let t={};for(let r of e){let n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function VMe(e){return Jc(e._zod.def)}function jMe(e,t){return t?t.reduce((r,n)=>r?.[n],e):e}function GMe(e){let t=Object.keys(e),r=t.map(n=>e[n]);return Promise.all(r).then(n=>{let i={};for(let o=0;o<t.length;o++)i[t[o]]=n[o];return i})}function HMe(e=10){let t="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}function MT(e){return JSON.stringify(e)}function kd(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Kc(e){if(kd(e)===!1)return!1;let t=e.constructor;if(t===void 0)return!0;let r=t.prototype;return!(kd(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function ML(e){return Kc(e)?{...e}:Array.isArray(e)?[...e]:e}function ZMe(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Tl(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ki(e,t,r){let n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function te(e){let t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function XMe(e){let t;return new Proxy({},{get(r,n,i){return t??(t=e()),Reflect.get(t,n,i)},set(r,n,i,o){return t??(t=e()),Reflect.set(t,n,i,o)},has(r,n){return t??(t=e()),Reflect.has(t,n)},deleteProperty(r,n){return t??(t=e()),Reflect.deleteProperty(t,n)},ownKeys(r){return t??(t=e()),Reflect.ownKeys(t)},getOwnPropertyDescriptor(r,n){return t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)},defineProperty(r,n,i){return t??(t=e()),Reflect.defineProperty(t,n,i)}})}function Q(e){return typeof e=="bigint"?e.toString()+"n":typeof e=="string"?`"${e}"`:`${e}`}function DL(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}function qMe(e,t){let r=e._zod.def,n=Jc(e._zod.def,{get shape(){let i={};for(let o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(i[o]=r.shape[o])}return Yc(this,"shape",i),i},checks:[]});return ki(e,n)}function YMe(e,t){let r=e._zod.def,n=Jc(e._zod.def,{get shape(){let i={...e._zod.def.shape};for(let o in t){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete i[o]}return Yc(this,"shape",i),i},checks:[]});return ki(e,n)}function JMe(e,t){if(!Kc(t))throw new Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=Jc(e._zod.def,{get shape(){let o={...e._zod.def.shape,...t};return Yc(this,"shape",o),o},checks:[]});return ki(e,i)}function KMe(e,t){if(!Kc(t))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let n={...e._zod.def.shape,...t};return Yc(this,"shape",n),n},checks:e._zod.def.checks};return ki(e,r)}function QMe(e,t){let r=Jc(e._zod.def,{get shape(){let n={...e._zod.def.shape,...t._zod.def.shape};return Yc(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return ki(e,r)}function e2e(e,t,r){let n=Jc(t._zod.def,{get shape(){let i=t._zod.def.shape,o={...i};if(r)for(let a in r){if(!(a in i))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=e?new e({type:"optional",innerType:i[a]}):i[a])}else for(let a in i)o[a]=e?new e({type:"optional",innerType:i[a]}):i[a];return Yc(this,"shape",o),o},checks:[]});return ki(t,n)}function t2e(e,t,r){let n=Jc(t._zod.def,{get shape(){let i=t._zod.def.shape,o={...i};if(r)for(let a in r){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(o[a]=new e({type:"nonoptional",innerType:i[a]}))}else for(let a in i)o[a]=new e({type:"nonoptional",innerType:i[a]});return Yc(this,"shape",o),o},checks:[]});return ki(t,n)}function Qc(e,t=0){if(e.aborted===!0)return!0;for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Zo(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function wx(e){return typeof e=="string"?e:e?.message}function Wo(e,t,r){let n={...e,path:e.path??[]};if(!e.message){let i=wx(e.inst?._zod.def?.error?.(e))??wx(t?.error?.(e))??wx(r.customError?.(e))??wx(r.localeError?.(e))??"Invalid input";n.message=i}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Cx(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function Px(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Lm(...e){let[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}function r2e(e){return Object.entries(e).filter(([t,r])=>Number.isNaN(Number.parseInt(t,10))).map(t=>t[1])}function zq(e){let t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function Nq(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function n2e(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return zq(t+r)}function i2e(e){return Nq(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function o2e(e){let t=e.replace(/^0x/,"");if(t.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n/2]=Number.parseInt(t.slice(n,n+2),16);return r}function a2e(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}var Bq,AT,PL,WMe,Ex,AL,LL,FL,EL,Ae=f(()=>{Bq=Symbol("evaluating");AT="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};PL=Dm(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let e=Function;return new e(""),!0}catch{return!1}});WMe=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":e===null?"null":e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},Ex=new Set(["string","number","symbol"]),AL=new Set(["string","number","bigint","boolean","symbol","undefined"]);LL={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},FL={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};EL=class{constructor(...t){}}});function Ax(e,t=r=>r.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function Dx(e,t=r=>r.message){let r={_errors:[]},n=i=>{for(let o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>n({issues:a}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let a=r,s=0;for(;s<o.path.length;){let l=o.path[s];s===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],s++}}};return n(e),r}function kL(e,t=r=>r.message){let r={errors:[]},n=(i,o=[])=>{var a,s;for(let l of i.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(u=>n({issues:u},l.path));else if(l.code==="invalid_key")n({issues:l.issues},l.path);else if(l.code==="invalid_element")n({issues:l.issues},l.path);else{let u=[...o,...l.path];if(u.length===0){r.errors.push(t(l));continue}let c=r,p=0;for(;p<u.length;){let d=u[p],h=p===u.length-1;typeof d=="string"?(c.properties??(c.properties={}),(a=c.properties)[d]??(a[d]={errors:[]}),c=c.properties[d]):(c.items??(c.items=[]),(s=c.items)[d]??(s[d]={errors:[]}),c=c.items[d]),h&&c.errors.push(t(l)),p++}}};return n(e),r}function $q(e){let t=[],r=e.map(n=>typeof n=="object"?n.key:n);for(let n of r)typeof n=="number"?t.push(`[${n}]`):typeof n=="symbol"?t.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?t.push(`[${JSON.stringify(n)}]`):(t.length&&t.push("."),t.push(n));return t.join("")}function OL(e){let t=[],r=[...e.issues].sort((n,i)=>(n.path??[]).length-(i.path??[]).length);for(let n of r)t.push(`\u2716 ${n.message}`),n.path?.length&&t.push(`  \u2192 at ${$q(n.path)}`);return t.join(`
`)}var Uq,Mx,lo,RL=f(()=>{Mm();Ae();Uq=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Am,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Mx=B("$ZodError",Uq),lo=B("$ZodError",Uq,{Parent:Error})});var Fm,DT,km,LT,Om,BL,Rm,zL,FT,l2e,kT,u2e,OT,c2e,RT,p2e,BT,d2e,zT,f2e,NT,h2e,UT,m2e,NL=f(()=>{Mm();RL();Ae();Fm=e=>(t,r,n,i)=>{let o=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise)throw new vs;if(a.issues.length){let s=new(i?.Err??e)(a.issues.map(l=>Wo(l,o,en())));throw AT(s,i?.callee),s}return a.value},DT=Fm(lo),km=e=>async(t,r,n,i)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){let s=new(i?.Err??e)(a.issues.map(l=>Wo(l,o,en())));throw AT(s,i?.callee),s}return a.value},LT=km(lo),Om=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new vs;return o.issues.length?{success:!1,error:new(e??Mx)(o.issues.map(a=>Wo(a,i,en())))}:{success:!0,data:o.value}},BL=Om(lo),Rm=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=t._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(a=>Wo(a,i,en())))}:{success:!0,data:o.value}},zL=Rm(lo),FT=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Fm(e)(t,r,i)},l2e=FT(lo),kT=e=>(t,r,n)=>Fm(e)(t,r,n),u2e=kT(lo),OT=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return km(e)(t,r,i)},c2e=OT(lo),RT=e=>async(t,r,n)=>km(e)(t,r,n),p2e=RT(lo),BT=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Om(e)(t,r,i)},d2e=BT(lo),zT=e=>(t,r,n)=>Om(e)(t,r,n),f2e=zT(lo),NT=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Rm(e)(t,r,i)},h2e=NT(lo),UT=e=>async(t,r,n)=>Rm(e)(t,r,n),m2e=UT(lo)});var Ma={};Fr(Ma,{base64:()=>eF,base64url:()=>$T,bigint:()=>sF,boolean:()=>cF,browserEmail:()=>w2e,cidrv4:()=>KL,cidrv6:()=>QL,cuid:()=>UL,cuid2:()=>$L,date:()=>nF,datetime:()=>oF,domain:()=>I2e,duration:()=>ZL,e164:()=>rF,email:()=>XL,emoji:()=>qL,extendedDuration:()=>y2e,guid:()=>WL,hex:()=>E2e,hostname:()=>tF,html5Email:()=>v2e,idnEmail:()=>S2e,integer:()=>lF,ipv4:()=>YL,ipv6:()=>JL,ksuid:()=>GL,lowercase:()=>fF,md5_base64:()=>P2e,md5_base64url:()=>M2e,md5_hex:()=>C2e,nanoid:()=>HL,null:()=>pF,number:()=>uF,rfc5322Email:()=>_2e,sha1_base64:()=>D2e,sha1_base64url:()=>L2e,sha1_hex:()=>A2e,sha256_base64:()=>k2e,sha256_base64url:()=>O2e,sha256_hex:()=>F2e,sha384_base64:()=>B2e,sha384_base64url:()=>z2e,sha384_hex:()=>R2e,sha512_base64:()=>U2e,sha512_base64url:()=>$2e,sha512_hex:()=>N2e,string:()=>aF,time:()=>iF,ulid:()=>VL,undefined:()=>dF,unicodeEmail:()=>Vq,uppercase:()=>hF,uuid:()=>Od,uuid4:()=>g2e,uuid6:()=>x2e,uuid7:()=>b2e,xid:()=>jL});function qL(){return new RegExp(T2e,"u")}function Gq(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function iF(e){return new RegExp(`^${Gq(e)}$`)}function oF(e){let t=Gq({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return new RegExp(`^${jq}T(?:${n})$`)}function Lx(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function Fx(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var UL,$L,VL,jL,GL,HL,ZL,y2e,WL,Od,g2e,x2e,b2e,XL,v2e,_2e,Vq,S2e,w2e,T2e,YL,JL,KL,QL,eF,$T,tF,I2e,rF,jq,nF,aF,sF,lF,uF,cF,pF,dF,fF,hF,E2e,C2e,P2e,M2e,A2e,D2e,L2e,F2e,k2e,O2e,R2e,B2e,z2e,N2e,U2e,$2e,VT=f(()=>{UL=/^[cC][^\s-]{8,}$/,$L=/^[0-9a-z]+$/,VL=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,jL=/^[0-9a-vA-V]{20}$/,GL=/^[A-Za-z0-9]{27}$/,HL=/^[a-zA-Z0-9_-]{21}$/,ZL=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,y2e=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,WL=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Od=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,g2e=Od(4),x2e=Od(6),b2e=Od(7),XL=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,v2e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_2e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Vq=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,S2e=Vq,w2e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,T2e="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";YL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,JL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,KL=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,QL=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eF=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,$T=/^[A-Za-z0-9_-]*$/,tF=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,I2e=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,rF=/^\+(?:[0-9]){6,14}[0-9]$/,jq="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nF=new RegExp(`^${jq}$`);aF=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},sF=/^-?\d+n?$/,lF=/^-?\d+$/,uF=/^-?\d+(?:\.\d+)?/,cF=/^(?:true|false)$/i,pF=/^null$/i,dF=/^undefined$/i,fF=/^[^A-Z]*$/,hF=/^[^a-z]*$/,E2e=/^[0-9a-fA-F]*$/;C2e=/^[0-9a-fA-F]{32}$/,P2e=Lx(22,"=="),M2e=Fx(22),A2e=/^[0-9a-fA-F]{40}$/,D2e=Lx(27,"="),L2e=Fx(27),F2e=/^[0-9a-fA-F]{64}$/,k2e=Lx(43,"="),O2e=Fx(43),R2e=/^[0-9a-fA-F]{96}$/,B2e=Lx(64,""),z2e=Fx(64),N2e=/^[0-9a-fA-F]{128}$/,U2e=Lx(86,"=="),$2e=Fx(86)});function Hq(e,t,r){e.issues.length&&t.issues.push(...Zo(r,e.issues))}var gr,Zq,jT,GT,mF,yF,gF,xF,bF,vF,_F,SF,wF,Bm,TF,IF,EF,CF,PF,MF,AF,DF,LF,HT=f(()=>{Mm();VT();Ae();gr=B("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Zq={number:"number",bigint:"bigint",object:"date"},jT=B("$ZodCheckLessThan",(e,t)=>{gr.init(e,t);let r=Zq[typeof t.value];e._zod.onattach.push(n=>{let i=n._zod.bag,o=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),GT=B("$ZodCheckGreaterThan",(e,t)=>{gr.init(e,t);let r=Zq[typeof t.value];e._zod.onattach.push(n=>{let i=n._zod.bag,o=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),mF=B("$ZodCheckMultipleOf",(e,t)=>{gr.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):CL(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),yF=B("$ZodCheckNumberFormat",(e,t)=>{gr.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,o]=LL[t.format];e._zod.onattach.push(a=>{let s=a._zod.bag;s.format=t.format,s.minimum=i,s.maximum=o,r&&(s.pattern=lF)}),e._zod.check=a=>{let s=a.value;if(r){if(!Number.isInteger(s)){a.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<i&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),s>o&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:o,inst:e})}}),gF=B("$ZodCheckBigIntFormat",(e,t)=>{gr.init(e,t);let[r,n]=FL[t.format];e._zod.onattach.push(i=>{let o=i._zod.bag;o.format=t.format,o.minimum=r,o.maximum=n}),e._zod.check=i=>{let o=i.value;o<r&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),o>n&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:n,inst:e})}}),xF=B("$ZodCheckMaxSize",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;i.size<=t.maximum||n.issues.push({origin:Cx(i),code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),bF=B("$ZodCheckMinSize",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;i.size>=t.minimum||n.issues.push({origin:Cx(i),code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),vF=B("$ZodCheckSizeEquals",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.size!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.size,i.maximum=t.size,i.size=t.size}),e._zod.check=n=>{let i=n.value,o=i.size;if(o===t.size)return;let a=o>t.size;n.issues.push({origin:Cx(i),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),_F=B("$ZodCheckMaxLength",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{let i=n.value;if(i.length<=t.maximum)return;let a=Px(i);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),SF=B("$ZodCheckMinLength",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{let i=n.value;if(i.length>=t.minimum)return;let a=Px(i);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),wF=B("$ZodCheckLengthEquals",(e,t)=>{var r;gr.init(e,t),(r=e._zod.def).when??(r.when=n=>{let i=n.value;return!qc(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{let i=n.value,o=i.length;if(o===t.length)return;let a=Px(i),s=o>t.length;n.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Bm=B("$ZodCheckStringFormat",(e,t)=>{var r,n;gr.init(e,t),e._zod.onattach.push(i=>{let o=i._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),TF=B("$ZodCheckRegex",(e,t)=>{Bm.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),IF=B("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=fF),Bm.init(e,t)}),EF=B("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=hF),Bm.init(e,t)}),CF=B("$ZodCheckIncludes",(e,t)=>{gr.init(e,t);let r=Tl(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(i=>{let o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),PF=B("$ZodCheckStartsWith",(e,t)=>{gr.init(e,t);let r=new RegExp(`^${Tl(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{let i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),MF=B("$ZodCheckEndsWith",(e,t)=>{gr.init(e,t);let r=new RegExp(`.*${Tl(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{let i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}});AF=B("$ZodCheckProperty",(e,t)=>{gr.init(e,t),e._zod.check=r=>{let n=t.schema._zod.run({value:r.value[t.property],issues:[]},{});if(n instanceof Promise)return n.then(i=>Hq(i,r,t.property));Hq(n,r,t.property)}}),DF=B("$ZodCheckMimeType",(e,t)=>{gr.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(n=>{n._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),LF=B("$ZodCheckOverwrite",(e,t)=>{gr.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}})});var kx,FF=f(()=>{kx=class{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}let n=t.split(`
`).filter(a=>a),i=Math.min(...n.map(a=>a.length-a.trimStart().length)),o=n.map(a=>a.slice(i)).map(a=>" ".repeat(this.indent*2)+a);for(let a of o)this.content.push(a)}compile(){let t=Function,r=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,i.join(`
`))}}});var kF,OF=f(()=>{kF={major:4,minor:1,patch:12}});function rk(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}function iY(e){if(!$T.test(e))return!1;let t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return rk(r)}function oY(e,t=null){try{let r=e.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}function Xq(e,t,r){e.issues.length&&t.issues.push(...Zo(r,e.issues)),t.value[r]=e.value}function YT(e,t,r,n){e.issues.length&&t.issues.push(...Zo(r,e.issues)),e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function aY(e){let t=Object.keys(e.shape);for(let n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let r=DL(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function sY(e,t,r,n,i,o){let a=[],s=i.keySet,l=i.catchall._zod,u=l.def.type;for(let c of Object.keys(t)){if(s.has(c))continue;if(u==="never"){a.push(c);continue}let p=l.run({value:t[c],issues:[]},n);p instanceof Promise?e.push(p.then(d=>YT(d,r,c,t))):YT(p,r,c,t)}return a.length&&r.issues.push({code:"unrecognized_keys",keys:a,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}function qq(e,t,r,n){for(let o of e)if(o.issues.length===0)return t.value=o.value,t;let i=e.filter(o=>!Qc(o));return i.length===1?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(a=>Wo(a,n,en())))}),t)}function RF(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Kc(e)&&Kc(t)){let r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),i={...e,...t};for(let o of n){let a=RF(e[o],t[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};i[o]=a.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<e.length;n++){let i=e[n],o=t[n],a=RF(i,o);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Yq(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Qc(e))return e;let n=RF(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}function ZT(e,t,r){e.issues.length&&t.issues.push(...Zo(r,e.issues)),t.value[r]=e.value}function Jq(e,t,r,n,i,o,a){e.issues.length&&(Ex.has(typeof n)?r.issues.push(...Zo(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:e.issues.map(s=>Wo(s,a,en()))})),t.issues.length&&(Ex.has(typeof n)?r.issues.push(...Zo(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:n,issues:t.issues.map(s=>Wo(s,a,en()))})),r.value.set(e.value,t.value)}function Kq(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}function Qq(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}function eY(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}function tY(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}function WT(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}function XT(e,t,r){if(e.issues.length)return e.aborted=!0,e;if((r.direction||"forward")==="forward"){let i=t.transform(e.value,e);return i instanceof Promise?i.then(o=>qT(e,o,t.out,r)):qT(e,i,t.out,r)}else{let i=t.reverseTransform(e.value,e);return i instanceof Promise?i.then(o=>qT(e,o,t.in,r)):qT(e,i,t.in,r)}}function qT(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}function rY(e){return e.value=Object.freeze(e.value),e}function nY(e,t,r,n){if(!e){let i={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),t.issues.push(Lm(i))}}var Ue,Rd,tr,BF,zF,NF,UF,$F,VF,jF,GF,HF,ZF,WF,XF,qF,YF,JF,KF,QF,ek,tk,nk,ik,ok,ak,sk,JT,lk,Ox,KT,uk,ck,pk,dk,fk,hk,mk,yk,gk,xk,lY,bk,QT,vk,_k,eI,Sk,wk,Tk,Ik,Ek,Ck,Pk,Mk,Ak,Dk,Lk,Fk,kk,Ok,Rk,Bk,Rx,zk,Nk,Uk,$k,Vk,jk,Gk=f(()=>{HT();Mm();FF();NL();VT();Ae();OF();Ae();Ue=B("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=kF;let n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(let i of n)for(let o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let i=(a,s,l)=>{let u=Qc(a),c;for(let p of s){if(p._zod.def.when){if(!p._zod.def.when(a))continue}else if(u)continue;let d=a.issues.length,h=p._zod.check(a);if(h instanceof Promise&&l?.async===!1)throw new vs;if(c||h instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await h,a.issues.length!==d&&(u||(u=Qc(a,d)))});else{if(a.issues.length===d)continue;u||(u=Qc(a,d))}}return c?c.then(()=>a):a},o=(a,s,l)=>{if(Qc(a))return a.aborted=!0,a;let u=i(s,n,l);if(u instanceof Promise){if(l.async===!1)throw new vs;return u.then(c=>e._zod.parse(c,l))}return e._zod.parse(u,l)};e._zod.run=(a,s)=>{if(s.skipChecks)return e._zod.parse(a,s);if(s.direction==="backward"){let u=e._zod.parse({value:a.value,issues:[]},{...s,skipChecks:!0});return u instanceof Promise?u.then(c=>o(c,a,s)):o(u,a,s)}let l=e._zod.parse(a,s);if(l instanceof Promise){if(s.async===!1)throw new vs;return l.then(u=>i(u,n,s))}return i(l,n,s)}}e["~standard"]={validate:i=>{try{let o=BL(e,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return zL(e,i).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Rd=B("$ZodString",(e,t)=>{Ue.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??aF(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),tr=B("$ZodStringFormat",(e,t)=>{Bm.init(e,t),Rd.init(e,t)}),BF=B("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=WL),tr.init(e,t)}),zF=B("$ZodUUID",(e,t)=>{if(t.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Od(n))}else t.pattern??(t.pattern=Od());tr.init(e,t)}),NF=B("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=XL),tr.init(e,t)}),UF=B("$ZodURL",(e,t)=>{tr.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:tF.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=i.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),$F=B("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=qL()),tr.init(e,t)}),VF=B("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=HL),tr.init(e,t)}),jF=B("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=UL),tr.init(e,t)}),GF=B("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=$L),tr.init(e,t)}),HF=B("$ZodULID",(e,t)=>{t.pattern??(t.pattern=VL),tr.init(e,t)}),ZF=B("$ZodXID",(e,t)=>{t.pattern??(t.pattern=jL),tr.init(e,t)}),WF=B("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=GL),tr.init(e,t)}),XF=B("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=oF(t)),tr.init(e,t)}),qF=B("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=nF),tr.init(e,t)}),YF=B("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=iF(t)),tr.init(e,t)}),JF=B("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ZL),tr.init(e,t)}),KF=B("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=YL),tr.init(e,t),e._zod.onattach.push(r=>{let n=r._zod.bag;n.format="ipv4"})}),QF=B("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=JL),tr.init(e,t),e._zod.onattach.push(r=>{let n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),ek=B("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=KL),tr.init(e,t)}),tk=B("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=QL),tr.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(n.length!==2)throw new Error;let[i,o]=n;if(!o)throw new Error;let a=Number(o);if(`${a}`!==o)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${i}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});nk=B("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=eF),tr.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{rk(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});ik=B("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=$T),tr.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{iY(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),ok=B("$ZodE164",(e,t)=>{t.pattern??(t.pattern=rF),tr.init(e,t)});ak=B("$ZodJWT",(e,t)=>{tr.init(e,t),e._zod.check=r=>{oY(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),sk=B("$ZodCustomStringFormat",(e,t)=>{tr.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),JT=B("$ZodNumber",(e,t)=>{Ue.init(e,t),e._zod.pattern=e._zod.bag.pattern??uF,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}let i=r.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return r;let o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),r}}),lk=B("$ZodNumber",(e,t)=>{yF.init(e,t),JT.init(e,t)}),Ox=B("$ZodBoolean",(e,t)=>{Ue.init(e,t),e._zod.pattern=cF,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}let i=r.value;return typeof i=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),KT=B("$ZodBigInt",(e,t)=>{Ue.init(e,t),e._zod.pattern=sF,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),uk=B("$ZodBigInt",(e,t)=>{gF.init(e,t),KT.init(e,t)}),ck=B("$ZodSymbol",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;return typeof i=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:e}),r}}),pk=B("$ZodUndefined",(e,t)=>{Ue.init(e,t),e._zod.pattern=dF,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(r,n)=>{let i=r.value;return typeof i>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:e}),r}}),dk=B("$ZodNull",(e,t)=>{Ue.init(e,t),e._zod.pattern=pF,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{let i=r.value;return i===null||r.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),r}}),fk=B("$ZodAny",(e,t)=>{Ue.init(e,t),e._zod.parse=r=>r}),hk=B("$ZodUnknown",(e,t)=>{Ue.init(e,t),e._zod.parse=r=>r}),mk=B("$ZodNever",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)}),yk=B("$ZodVoid",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;return typeof i>"u"||r.issues.push({expected:"void",code:"invalid_type",input:i,inst:e}),r}}),gk=B("$ZodDate",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch{}let i=r.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:e}),r}});xk=B("$ZodArray",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let o=[];for(let a=0;a<i.length;a++){let s=i[a],l=t.element._zod.run({value:s,issues:[]},n);l instanceof Promise?o.push(l.then(u=>Xq(u,r,a))):Xq(l,r,a)}return o.length?Promise.all(o).then(()=>r):r}});lY=B("$ZodObject",(e,t)=>{if(Ue.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){let s=t.shape;Object.defineProperty(t,"shape",{get:()=>{let l={...s};return Object.defineProperty(t,"shape",{value:l}),l}})}let n=Dm(()=>aY(t));ot(e._zod,"propValues",()=>{let s=t.shape,l={};for(let u in s){let c=s[u]._zod;if(c.values){l[u]??(l[u]=new Set);for(let p of c.values)l[u].add(p)}}return l});let i=kd,o=t.catchall,a;e._zod.parse=(s,l)=>{a??(a=n.value);let u=s.value;if(!i(u))return s.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),s;s.value={};let c=[],p=a.shape;for(let d of a.keys){let m=p[d]._zod.run({value:u[d],issues:[]},l);m instanceof Promise?c.push(m.then(x=>YT(x,s,d,u))):YT(m,s,d,u)}return o?sY(c,u,s,l,n.value,e):c.length?Promise.all(c).then(()=>s):s}}),bk=B("$ZodObjectJIT",(e,t)=>{lY.init(e,t);let r=e._zod.parse,n=Dm(()=>aY(t)),i=d=>{let h=new kx(["shape","payload","ctx"]),m=n.value,x=I=>{let S=MT(I);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};h.write("const input = payload.value;");let b=Object.create(null),_=0;for(let I of m.keys)b[I]=`key_${_++}`;h.write("const newResult = {};");for(let I of m.keys){let S=b[I],E=MT(I);h.write(`const ${S} = ${x(I)};`),h.write(`
        if (${S}.issues.length) {
          payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${E}, ...iss.path] : [${E}]
          })));
        }
        
        
        if (${S}.value === undefined) {
          if (${E} in input) {
            newResult[${E}] = undefined;
          }
        } else {
          newResult[${E}] = ${S}.value;
        }
        
      `)}h.write("payload.value = newResult;"),h.write("return payload;");let T=h.compile();return(I,S)=>T(d,I,S)},o,a=kd,s=!Sx.jitless,u=s&&PL.value,c=t.catchall,p;e._zod.parse=(d,h)=>{p??(p=n.value);let m=d.value;return a(m)?s&&u&&h?.async===!1&&h.jitless!==!0?(o||(o=i(t.shape)),d=o(d,h),c?sY([],m,d,h,p,e):d):r(d,h):(d.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),d)}});QT=B("$ZodUnion",(e,t)=>{Ue.init(e,t),ot(e._zod,"optin",()=>t.options.some(i=>i._zod.optin==="optional")?"optional":void 0),ot(e._zod,"optout",()=>t.options.some(i=>i._zod.optout==="optional")?"optional":void 0),ot(e._zod,"values",()=>{if(t.options.every(i=>i._zod.values))return new Set(t.options.flatMap(i=>Array.from(i._zod.values)))}),ot(e._zod,"pattern",()=>{if(t.options.every(i=>i._zod.pattern)){let i=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>Ix(o.source)).join("|")})$`)}});let r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(i,o)=>{if(r)return n(i,o);let a=!1,s=[];for(let l of t.options){let u=l._zod.run({value:i.value,issues:[]},o);if(u instanceof Promise)s.push(u),a=!0;else{if(u.issues.length===0)return u;s.push(u)}}return a?Promise.all(s).then(l=>qq(l,i,e,o)):qq(s,i,e,o)}}),vk=B("$ZodDiscriminatedUnion",(e,t)=>{QT.init(e,t);let r=e._zod.parse;ot(e._zod,"propValues",()=>{let i={};for(let o of t.options){let a=o._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(let[s,l]of Object.entries(a)){i[s]||(i[s]=new Set);for(let u of l)i[s].add(u)}}return i});let n=Dm(()=>{let i=t.options,o=new Map;for(let a of i){let s=a._zod.propValues?.[t.discriminator];if(!s||s.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(let l of s){if(o.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);o.set(l,a)}}return o});e._zod.parse=(i,o)=>{let a=i.value;if(!kd(a))return i.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),i;let s=n.value.get(a?.[t.discriminator]);return s?s._zod.run(i,o):t.unionFallback?r(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:a,path:[t.discriminator],inst:e}),i)}}),_k=B("$ZodIntersection",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value,o=t.left._zod.run({value:i,issues:[]},n),a=t.right._zod.run({value:i,issues:[]},n);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([l,u])=>Yq(r,l,u)):Yq(r,o,a)}});eI=B("$ZodTuple",(e,t)=>{Ue.init(e,t);let r=t.items,n=r.length-[...r].reverse().findIndex(i=>i._zod.optin!=="optional");e._zod.parse=(i,o)=>{let a=i.value;if(!Array.isArray(a))return i.issues.push({input:a,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];let s=[];if(!t.rest){let u=a.length>r.length,c=a.length<n-1;if(u||c)return i.issues.push({...u?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:a,inst:e,origin:"array"}),i}let l=-1;for(let u of r){if(l++,l>=a.length&&l>=n)continue;let c=u._zod.run({value:a[l],issues:[]},o);c instanceof Promise?s.push(c.then(p=>ZT(p,i,l))):ZT(c,i,l)}if(t.rest){let u=a.slice(r.length);for(let c of u){l++;let p=t.rest._zod.run({value:c,issues:[]},o);p instanceof Promise?s.push(p.then(d=>ZT(d,i,l))):ZT(p,i,l)}}return s.length?Promise.all(s).then(()=>i):i}});Sk=B("$ZodRecord",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Kc(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let o=[];if(t.keyType._zod.values){let a=t.keyType._zod.values;r.value={};for(let l of a)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){let u=t.valueType._zod.run({value:i[l],issues:[]},n);u instanceof Promise?o.push(u.then(c=>{c.issues.length&&r.issues.push(...Zo(l,c.issues)),r.value[l]=c.value})):(u.issues.length&&r.issues.push(...Zo(l,u.issues)),r.value[l]=u.value)}let s;for(let l in i)a.has(l)||(s=s??[],s.push(l));s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else{r.value={};for(let a of Reflect.ownKeys(i)){if(a==="__proto__")continue;let s=t.keyType._zod.run({value:a,issues:[]},n);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:s.issues.map(u=>Wo(u,n,en())),input:a,path:[a],inst:e}),r.value[s.value]=s.value;continue}let l=t.valueType._zod.run({value:i[a],issues:[]},n);l instanceof Promise?o.push(l.then(u=>{u.issues.length&&r.issues.push(...Zo(a,u.issues)),r.value[s.value]=u.value})):(l.issues.length&&r.issues.push(...Zo(a,l.issues)),r.value[s.value]=l.value)}}return o.length?Promise.all(o).then(()=>r):r}}),wk=B("$ZodMap",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let o=[];r.value=new Map;for(let[a,s]of i){let l=t.keyType._zod.run({value:a,issues:[]},n),u=t.valueType._zod.run({value:s,issues:[]},n);l instanceof Promise||u instanceof Promise?o.push(Promise.all([l,u]).then(([c,p])=>{Jq(c,p,r,a,i,e,n)})):Jq(l,u,r,a,i,e,n)}return o.length?Promise.all(o).then(()=>r):r}});Tk=B("$ZodSet",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let o=[];r.value=new Set;for(let a of i){let s=t.valueType._zod.run({value:a,issues:[]},n);s instanceof Promise?o.push(s.then(l=>Kq(l,r))):Kq(s,r)}return o.length?Promise.all(o).then(()=>r):r}});Ik=B("$ZodEnum",(e,t)=>{Ue.init(e,t);let r=Tx(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(i=>Ex.has(typeof i)).map(i=>typeof i=="string"?Tl(i):i.toString()).join("|")})$`),e._zod.parse=(i,o)=>{let a=i.value;return n.has(a)||i.issues.push({code:"invalid_value",values:r,input:a,inst:e}),i}}),Ek=B("$ZodLiteral",(e,t)=>{if(Ue.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Tl(r):r?Tl(r.toString()):String(r)).join("|")})$`),e._zod.parse=(r,n)=>{let i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),r}}),Ck=B("$ZodFile",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;return i instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:i,inst:e}),r}}),Pk=B("$ZodTransform",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Xc(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(a=>(r.value=a,r));if(i instanceof Promise)throw new vs;return r.value=i,r}});Mk=B("$ZodOptional",(e,t)=>{Ue.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ot(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ot(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ix(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>Qq(o,r.value)):Qq(i,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),Ak=B("$ZodNullable",(e,t)=>{Ue.init(e,t),ot(e._zod,"optin",()=>t.innerType._zod.optin),ot(e._zod,"optout",()=>t.innerType._zod.optout),ot(e._zod,"pattern",()=>{let r=t.innerType._zod.pattern;return r?new RegExp(`^(${Ix(r.source)}|null)$`):void 0}),ot(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),Dk=B("$ZodDefault",(e,t)=>{Ue.init(e,t),e._zod.optin="optional",ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>eY(o,t)):eY(i,t)}});Lk=B("$ZodPrefault",(e,t)=>{Ue.init(e,t),e._zod.optin="optional",ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Fk=B("$ZodNonOptional",(e,t)=>{Ue.init(e,t),ot(e._zod,"values",()=>{let r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>tY(o,e)):tY(i,e)}});kk=B("$ZodSuccess",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Xc("ZodSuccess");let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.issues.length===0,r)):(r.value=i.issues.length===0,r)}}),Ok=B("$ZodCatch",(e,t)=>{Ue.init(e,t),ot(e._zod,"optin",()=>t.innerType._zod.optin),ot(e._zod,"optout",()=>t.innerType._zod.optout),ot(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(a=>Wo(a,n,en()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>Wo(o,n,en()))},input:r.value}),r.issues=[]),r)}}),Rk=B("$ZodNaN",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:e,expected:"nan",code:"invalid_type"}),r)}),Bk=B("$ZodPipe",(e,t)=>{Ue.init(e,t),ot(e._zod,"values",()=>t.in._zod.values),ot(e._zod,"optin",()=>t.in._zod.optin),ot(e._zod,"optout",()=>t.out._zod.optout),ot(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){let o=t.out._zod.run(r,n);return o instanceof Promise?o.then(a=>WT(a,t.in,n)):WT(o,t.in,n)}let i=t.in._zod.run(r,n);return i instanceof Promise?i.then(o=>WT(o,t.out,n)):WT(i,t.out,n)}});Rx=B("$ZodCodec",(e,t)=>{Ue.init(e,t),ot(e._zod,"values",()=>t.in._zod.values),ot(e._zod,"optin",()=>t.in._zod.optin),ot(e._zod,"optout",()=>t.out._zod.optout),ot(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if((n.direction||"forward")==="forward"){let o=t.in._zod.run(r,n);return o instanceof Promise?o.then(a=>XT(a,t,n)):XT(o,t,n)}else{let o=t.out._zod.run(r,n);return o instanceof Promise?o.then(a=>XT(a,t,n)):XT(o,t,n)}}});zk=B("$ZodReadonly",(e,t)=>{Ue.init(e,t),ot(e._zod,"propValues",()=>t.innerType._zod.propValues),ot(e._zod,"values",()=>t.innerType._zod.values),ot(e._zod,"optin",()=>t.innerType._zod.optin),ot(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(rY):rY(i)}});Nk=B("$ZodTemplateLiteral",(e,t)=>{Ue.init(e,t);let r=[];for(let n of t.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let i=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!i)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let o=i.startsWith("^")?1:0,a=i.endsWith("$")?i.length-1:i.length;r.push(i.slice(o,a))}else if(n===null||AL.has(typeof n))r.push(Tl(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(n,i)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:e,expected:"template_literal",code:"invalid_type"}),n):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),n)}),Uk=B("$ZodFunction",(e,t)=>(Ue.init(e,t),e._def=t,e._zod.def=t,e.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...n){let i=e._def.input?DT(e._def.input,n):n,o=Reflect.apply(r,this,i);return e._def.output?DT(e._def.output,o):o}},e.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let i=e._def.input?await LT(e._def.input,n):n,o=await Reflect.apply(r,this,i);return e._def.output?await LT(e._def.output,o):o}},e._zod.parse=(r,n)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:e}),r):(e._def.output&&e._def.output._zod.def.type==="promise"?r.value=e.implementAsync(r.value):r.value=e.implement(r.value),r),e.input=(...r)=>{let n=e.constructor;return Array.isArray(r[0])?new n({type:"function",input:new eI({type:"tuple",items:r[0],rest:r[1]}),output:e._def.output}):new n({type:"function",input:r[0],output:e._def.output})},e.output=r=>{let n=e.constructor;return new n({type:"function",input:e._def.input,output:r})},e)),$k=B("$ZodPromise",(e,t)=>{Ue.init(e,t),e._zod.parse=(r,n)=>Promise.resolve(r.value).then(i=>t.innerType._zod.run({value:i,issues:[]},n))}),Vk=B("$ZodLazy",(e,t)=>{Ue.init(e,t),ot(e._zod,"innerType",()=>t.getter()),ot(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),ot(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),ot(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),ot(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)}),jk=B("$ZodCustom",(e,t)=>{gr.init(e,t),Ue.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(o=>nY(o,r,n,e));nY(i,r,n,e)}})});function uY(){return{localeError:j2e()}}var j2e,cY=f(()=>{Ae();j2e=()=>{let e={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return i=>{switch(i.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${i.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${Q(i.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()} ${a.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${i.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${n[o.format]??i.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${i.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${i.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${i.keys.length>1?"\u0629":""}: ${$(i.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}}});function pY(){return{localeError:G2e()}}var G2e,dY=f(()=>{Ae();G2e=()=>{let e={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${i.expected}, daxil olan ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${Q(i.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()} ${a.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()} ${a.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[o.format]??i.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${i.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${i.keys.length>1?"lar":""}: ${$(i.keys,", ")}`;case"invalid_key":return`${i.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${i.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}}});function fY(e,t,r,n){let i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?n:o===1?t:o>=2&&o<=4?r:n}function hY(){return{localeError:H2e()}}var H2e,mY=f(()=>{Ae();H2e=()=>{let e={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0456\u045E";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${i.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${Q(i.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);if(a){let s=Number(i.maximum),l=fY(s,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${o}${i.maximum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);if(a){let s=Number(i.minimum),l=fY(s,a.unit.one,a.unit.few,a.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${a.verb} ${o}${i.minimum.toString()} ${l}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${i.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${$(i.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${i.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}}});function yY(){return{localeError:W2e()}}var Z2e,W2e,gY=f(()=>{Ae();Z2e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(e))return"\u043C\u0430\u0441\u0438\u0432";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},W2e=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function t(n){return e[n]??null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Z2e(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${Q(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${$(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${n.maximum.toString()} ${o.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${n.minimum.toString()} ${o.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;if(i.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${i.prefix}"`;if(i.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${i.suffix}"`;if(i.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${i.includes}"`;if(i.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${i.pattern}`;let o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return i.format==="emoji"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="datetime"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="date"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),i.format==="time"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="duration"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${o} ${r[i.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${$(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}}});function xY(){return{localeError:X2e()}}var X2e,bY=f(()=>{Ae();X2e=()=>{let e={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${i.expected}, s'ha rebut ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Valor inv\xE0lid: s'esperava ${Q(i.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${$(i.values," o ")}`;case"too_big":{let o=i.inclusive?"com a m\xE0xim":"menys de",a=t(i.origin);return a?`Massa gran: s'esperava que ${i.origin??"el valor"} contingu\xE9s ${o} ${i.maximum.toString()} ${a.unit??"elements"}`:`Massa gran: s'esperava que ${i.origin??"el valor"} fos ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"com a m\xEDnim":"m\xE9s de",a=t(i.origin);return a?`Massa petit: s'esperava que ${i.origin} contingu\xE9s ${o} ${i.minimum.toString()} ${a.unit}`:`Massa petit: s'esperava que ${i.origin} fos ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${n[o.format]??i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${i.divisor}`;case"unrecognized_keys":return`Clau${i.keys.length>1?"s":""} no reconeguda${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${i.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${i.origin}`;default:return"Entrada inv\xE0lida"}}}});function vY(){return{localeError:q2e()}}var q2e,_Y=f(()=>{Ae();q2e=()=>{let e={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(i))return"pole";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return i=>{switch(i.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${i.expected}, obdr\u017Eeno ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${Q(i.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.maximum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.minimum.toString()} ${a.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${n[o.format]??i.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${i.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${$(i.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${i.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${i.origin}`;default:return"Neplatn\xFD vstup"}}}});function SY(){return{localeError:Y2e()}}var Y2e,wY=f(()=>{Ae();Y2e=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(a){return e[a]??null}function n(a){return t[a]??a}let i=a=>{let s=typeof a;switch(s){case"number":return Number.isNaN(a)?"NaN":"tal";case"object":return Array.isArray(a)?"liste":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype&&a.constructor?a.constructor.name:"objekt"}return s},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return a=>{switch(a.code){case"invalid_type":return`Ugyldigt input: forventede ${n(a.expected)}, fik ${n(i(a.input))}`;case"invalid_value":return a.values.length===1?`Ugyldig v\xE6rdi: forventede ${Q(a.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${$(a.values,"|")}`;case"too_big":{let s=a.inclusive?"<=":"<",l=r(a.origin),u=n(a.origin);return l?`For stor: forventede ${u??"value"} ${l.verb} ${s} ${a.maximum.toString()} ${l.unit??"elementer"}`:`For stor: forventede ${u??"value"} havde ${s} ${a.maximum.toString()}`}case"too_small":{let s=a.inclusive?">=":">",l=r(a.origin),u=n(a.origin);return l?`For lille: forventede ${u} ${l.verb} ${s} ${a.minimum.toString()} ${l.unit}`:`For lille: forventede ${u} havde ${s} ${a.minimum.toString()}`}case"invalid_format":{let s=a;return s.format==="starts_with"?`Ugyldig streng: skal starte med "${s.prefix}"`:s.format==="ends_with"?`Ugyldig streng: skal ende med "${s.suffix}"`:s.format==="includes"?`Ugyldig streng: skal indeholde "${s.includes}"`:s.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${s.pattern}`:`Ugyldig ${o[s.format]??a.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${a.divisor}`;case"unrecognized_keys":return`${a.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${$(a.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${a.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${a.origin}`;default:return"Ugyldigt input"}}}});function TY(){return{localeError:J2e()}}var J2e,IY=f(()=>{Ae();J2e=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"Zahl";case"object":{if(Array.isArray(i))return"Array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return i=>{switch(i.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${i.expected}, erhalten ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ung\xFCltige Eingabe: erwartet ${Q(i.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ${a.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ist`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ${a.unit} hat`:`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ist`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${n[o.format]??i.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${i.divisor} sein`;case"unrecognized_keys":return`${i.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${$(i.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${i.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${i.origin}`;default:return"Ung\xFCltige Eingabe"}}}});function tI(){return{localeError:Q2e()}}var K2e,Q2e,Hk=f(()=>{Ae();K2e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},Q2e=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(n){return e[n]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${K2e(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${Q(n.values[0])}`:`Invalid option: expected one of ${$(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`Too big: expected ${n.origin??"value"} to have ${i}${n.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`Too small: expected ${n.origin} to have ${i}${n.minimum.toString()} ${o.unit}`:`Too small: expected ${n.origin} to be ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Invalid string: must start with "${i.prefix}"`:i.format==="ends_with"?`Invalid string: must end with "${i.suffix}"`:i.format==="includes"?`Invalid string: must include "${i.includes}"`:i.format==="regex"?`Invalid string: must match pattern ${i.pattern}`:`Invalid ${r[i.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${$(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}}});function EY(){return{localeError:t4e()}}var e4e,t4e,CY=f(()=>{Ae();e4e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":{if(Array.isArray(e))return"tabelo";if(e===null)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},t4e=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(n){return e[n]??null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${e4e(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${Q(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${$(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${i}${n.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${i}${n.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${i.prefix}"`:i.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${i.suffix}"`:i.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${i.includes}"`:i.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${i.pattern}`:`Nevalida ${r[i.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${$(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}}});function PY(){return{localeError:r4e()}}var r4e,MY=f(()=>{Ae();r4e=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(a){return e[a]??null}function n(a){return t[a]??a}let i=a=>{let s=typeof a;switch(s){case"number":return Number.isNaN(a)?"NaN":"number";case"object":return Array.isArray(a)?"array":a===null?"null":Object.getPrototypeOf(a)!==Object.prototype?a.constructor.name:"object"}return s},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return a=>{switch(a.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(a.expected)}, recibido ${n(i(a.input))}`;case"invalid_value":return a.values.length===1?`Entrada inv\xE1lida: se esperaba ${Q(a.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${$(a.values,"|")}`;case"too_big":{let s=a.inclusive?"<=":"<",l=r(a.origin),u=n(a.origin);return l?`Demasiado grande: se esperaba que ${u??"valor"} tuviera ${s}${a.maximum.toString()} ${l.unit??"elementos"}`:`Demasiado grande: se esperaba que ${u??"valor"} fuera ${s}${a.maximum.toString()}`}case"too_small":{let s=a.inclusive?">=":">",l=r(a.origin),u=n(a.origin);return l?`Demasiado peque\xF1o: se esperaba que ${u} tuviera ${s}${a.minimum.toString()} ${l.unit}`:`Demasiado peque\xF1o: se esperaba que ${u} fuera ${s}${a.minimum.toString()}`}case"invalid_format":{let s=a;return s.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${s.prefix}"`:s.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${s.suffix}"`:s.format==="includes"?`Cadena inv\xE1lida: debe incluir "${s.includes}"`:s.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${s.pattern}`:`Inv\xE1lido ${o[s.format]??a.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${a.divisor}`;case"unrecognized_keys":return`Llave${a.keys.length>1?"s":""} desconocida${a.keys.length>1?"s":""}: ${$(a.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(a.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(a.origin)}`;default:return"Entrada inv\xE1lida"}}}});function AY(){return{localeError:n4e()}}var n4e,DY=f(()=>{Ae();n4e=()=>{let e={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0622\u0631\u0627\u06CC\u0647";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return i=>{switch(i.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${i.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(i.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return i.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${Q(i.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${$(i.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${a.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[o.format]??i.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${i.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${i.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${$(i.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${i.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${i.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}}});function LY(){return{localeError:i4e()}}var i4e,FY=f(()=>{Ae();i4e=()=>{let e={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return i=>{switch(i.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${i.expected}, oli ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${Q(i.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Liian suuri: ${a.subject} t\xE4ytyy olla ${o}${i.maximum.toString()} ${a.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Liian pieni: ${a.subject} t\xE4ytyy olla ${o}${i.minimum.toString()} ${a.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${n[o.format]??i.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${i.divisor} monikerta`;case"unrecognized_keys":return`${i.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${$(i.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}}});function kY(){return{localeError:o4e()}}var o4e,OY=f(()=>{Ae();o4e=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombre";case"object":{if(Array.isArray(i))return"tableau";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : ${i.expected} attendu, ${r(i.input)} re\xE7u`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : ${Q(i.values[0])} attendu`:`Option invalide : une valeur parmi ${$(i.values,"|")} attendue`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Trop grand : ${i.origin??"valeur"} doit ${a.verb} ${o}${i.maximum.toString()} ${a.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${i.origin??"valeur"} doit \xEAtre ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Trop petit : ${i.origin} doit ${a.verb} ${o}${i.minimum.toString()} ${a.unit}`:`Trop petit : ${i.origin} doit \xEAtre ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${n[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${$(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}}});function RY(){return{localeError:a4e()}}var a4e,BY=f(()=>{Ae();a4e=()=>{let e={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${i.expected}, re\xE7u ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : attendu ${Q(i.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u2264":"<",a=t(i.origin);return a?`Trop grand : attendu que ${i.origin??"la valeur"} ait ${o}${i.maximum.toString()} ${a.unit}`:`Trop grand : attendu que ${i.origin??"la valeur"} soit ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u2265":">",a=t(i.origin);return a?`Trop petit : attendu que ${i.origin} ait ${o}${i.minimum.toString()} ${a.unit}`:`Trop petit : attendu que ${i.origin} soit ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${n[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${$(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}}});function zY(){return{localeError:s4e()}}var s4e,NY=f(()=>{Ae();s4e=()=>{let e={string:{unit:"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u05E7\u05DC\u05D8",email:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",url:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",emoji:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",date:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",time:"\u05D6\u05DE\u05DF ISO",duration:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",ipv4:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",ipv6:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",cidrv4:"\u05D8\u05D5\u05D5\u05D7 IPv4",cidrv6:"\u05D8\u05D5\u05D5\u05D7 IPv6",base64:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",base64url:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",json_string:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",e164:"\u05DE\u05E1\u05E4\u05E8 E.164",jwt:"JWT",template_literal:"\u05E7\u05DC\u05D8"};return i=>{switch(i.code){case"invalid_type":return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${i.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${Q(i.values[0])}`:`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${i.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.maximum.toString()} ${a.unit??"elements"}`:`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${i.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${i.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.minimum.toString()} ${a.unit}`:`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${i.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1"${o.prefix}"`:o.format==="ends_with"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${o.suffix}"`:o.format==="includes"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${o.includes}"`:o.format==="regex"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${o.pattern}`:`${n[o.format]??i.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${i.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${i.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${i.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${$(i.keys,", ")}`;case"invalid_key":return`\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i.origin}`;case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i.origin}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}}});function UY(){return{localeError:l4e()}}var l4e,$Y=f(()=>{Ae();l4e=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(i))return"t\xF6mb";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return i=>{switch(i.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${i.expected}, a kapott \xE9rt\xE9k ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${Q(i.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`T\xFAl nagy: ${i.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${i.maximum.toString()} ${a.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${i.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} m\xE9rete t\xFAl kicsi ${o}${i.minimum.toString()} ${a.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} t\xFAl kicsi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[o.format]??i.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${i.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${i.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${i.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}}});function VY(){return{localeError:u4e()}}var u4e,jY=f(()=>{Ae();u4e=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak valid: diharapkan ${i.expected}, diterima ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak valid: diharapkan ${Q(i.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Terlalu besar: diharapkan ${i.origin??"value"} memiliki ${o}${i.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: diharapkan ${i.origin??"value"} menjadi ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Terlalu kecil: diharapkan ${i.origin} memiliki ${o}${i.minimum.toString()} ${a.unit}`:`Terlalu kecil: diharapkan ${i.origin} menjadi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${n[o.format]??i.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${i.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${i.origin}`;default:return"Input tidak valid"}}}});function GY(){return{localeError:p4e()}}var c4e,p4e,HY=f(()=>{Ae();c4e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(e))return"fylki";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},p4e=()=>{let e={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function t(n){return e[n]??null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${c4e(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${Q(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${$(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${i}${n.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${i}${n.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${i.prefix}"`:i.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${i.suffix}"`:i.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${i.includes}"`:i.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${i.pattern}`:`Rangt ${r[i.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${$(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}}});function ZY(){return{localeError:d4e()}}var d4e,WY=f(()=>{Ae();d4e=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numero";case"object":{if(Array.isArray(i))return"vettore";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input non valido: atteso ${i.expected}, ricevuto ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input non valido: atteso ${Q(i.values[0])}`:`Opzione non valida: atteso uno tra ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Troppo grande: ${i.origin??"valore"} deve avere ${o}${i.maximum.toString()} ${a.unit??"elementi"}`:`Troppo grande: ${i.origin??"valore"} deve essere ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Troppo piccolo: ${i.origin} deve avere ${o}${i.minimum.toString()} ${a.unit}`:`Troppo piccolo: ${i.origin} deve essere ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${n[o.format]??i.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${i.divisor}`;case"unrecognized_keys":return`Chiav${i.keys.length>1?"i":"e"} non riconosciut${i.keys.length>1?"e":"a"}: ${$(i.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${i.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${i.origin}`;default:return"Input non valido"}}}});function XY(){return{localeError:f4e()}}var f4e,qY=f(()=>{Ae();f4e=()=>{let e={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(i))return"\u914D\u5217";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${i.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(i.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return i.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${Q(i.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${$(i.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=i.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",a=t(i.origin);return a?`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${a.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=i.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",a=t(i.origin);return a?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${a.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${i.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${i.keys.length>1?"\u7FA4":""}: ${$(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}}});function YY(){return{localeError:m4e()}}var h4e,m4e,JY=f(()=>{Ae();h4e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(e))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[t]??t},m4e=()=>{let e={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function t(n){return e[n]??null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${h4e(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${Q(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${$(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${o.verb} ${i}${n.maximum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${o.verb} ${i}${n.minimum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.prefix}"-\u10D8\u10D7`:i.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.suffix}"-\u10D8\u10D7`:i.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${i.includes}"-\u10E1`:i.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${i.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[i.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${$(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}}});function rI(){return{localeError:y4e()}}var y4e,Zk=f(()=>{Ae();y4e=()=>{let e={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(i))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(i===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return i=>{switch(i.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Q(i.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()} ${a.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()} ${a.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${i.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${$(i.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}}});function KY(){return rI()}var QY=f(()=>{Zk()});function eJ(){return{localeError:g4e()}}var g4e,tJ=f(()=>{Ae();g4e=()=>{let e={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return i=>{switch(i.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${i.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(i.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return i.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${Q(i.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${$(i.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=i.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",a=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",s=t(i.origin),l=s?.unit??"\uC694\uC18C";return s?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()}${l} ${o}${a}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()} ${o}${a}`}case"too_small":{let o=i.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",a=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",s=t(i.origin),l=s?.unit??"\uC694\uC18C";return s?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()}${l} ${o}${a}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()} ${o}${a}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[o.format]??i.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${i.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${$(i.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${i.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${i.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}}});function rJ(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||r===0?"many":r===1?"one":"few"}function nJ(){return{localeError:b4e()}}var x4e,zx,Bx,b4e,iJ=f(()=>{Ae();x4e=e=>zx(typeof e,e),zx=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return t===void 0?"ne\u017Einomas objektas":t===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return e},Bx=e=>e.charAt(0).toUpperCase()+e.slice(1);b4e=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function t(n,i,o,a){let s=e[n]??null;return s===null?s:{unit:s.unit[i],verb:s.verb[a][o?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${x4e(n.input)}, o tik\u0117tasi - ${zx(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${Q(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${$(n.values,"|")} pasirinkim\u0173`;case"too_big":{let i=zx(n.origin),o=t(n.origin,rJ(Number(n.maximum)),n.inclusive??!1,"smaller");if(o?.verb)return`${Bx(i??n.origin??"reik\u0161m\u0117")} ${o.verb} ${n.maximum.toString()} ${o.unit??"element\u0173"}`;let a=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Bx(i??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.maximum.toString()} ${o?.unit}`}case"too_small":{let i=zx(n.origin),o=t(n.origin,rJ(Number(n.minimum)),n.inclusive??!1,"bigger");if(o?.verb)return`${Bx(i??n.origin??"reik\u0161m\u0117")} ${o.verb} ${n.minimum.toString()} ${o.unit??"element\u0173"}`;let a=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Bx(i??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${a} ${n.minimum.toString()} ${o?.unit}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${i.prefix}"`:i.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${i.suffix}"`:i.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${i.includes}"`:i.format==="regex"?`Eilut\u0117 privalo atitikti ${i.pattern}`:`Neteisingas ${r[i.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${$(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let i=zx(n.origin);return`${Bx(i??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}}});function oJ(){return{localeError:v4e()}}var v4e,aJ=f(()=>{Ae();v4e=()=>{let e={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(i))return"\u043D\u0438\u0437\u0430";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return i=>{switch(i.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${Q(i.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.minimum.toString()} ${a.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${$(i.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${i.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${i.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}}});function sJ(){return{localeError:_4e()}}var _4e,lJ=f(()=>{Ae();_4e=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombor";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak sah: dijangka ${i.expected}, diterima ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak sah: dijangka ${Q(i.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Terlalu besar: dijangka ${i.origin??"nilai"} ${a.verb} ${o}${i.maximum.toString()} ${a.unit??"elemen"}`:`Terlalu besar: dijangka ${i.origin??"nilai"} adalah ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Terlalu kecil: dijangka ${i.origin} ${a.verb} ${o}${i.minimum.toString()} ${a.unit}`:`Terlalu kecil: dijangka ${i.origin} adalah ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${n[o.format]??i.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${$(i.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${i.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${i.origin}`;default:return"Input tidak sah"}}}});function uJ(){return{localeError:S4e()}}var S4e,cJ=f(()=>{Ae();S4e=()=>{let e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"getal";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return i=>{switch(i.code){case"invalid_type":return`Ongeldige invoer: verwacht ${i.expected}, ontving ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ongeldige invoer: verwacht ${Q(i.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Te lang: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} ${a.unit??"elementen"} bevat`:`Te lang: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} is`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Te kort: verwacht dat ${i.origin} ${o}${i.minimum.toString()} ${a.unit} bevat`:`Te kort: verwacht dat ${i.origin} ${o}${i.minimum.toString()} is`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${n[o.format]??i.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${i.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${i.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${i.origin}`;default:return"Ongeldige invoer"}}}});function pJ(){return{localeError:w4e()}}var w4e,dJ=f(()=>{Ae();w4e=()=>{let e={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"tall";case"object":{if(Array.isArray(i))return"liste";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Ugyldig input: forventet ${i.expected}, fikk ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ugyldig verdi: forventet ${Q(i.values[0])}`:`Ugyldig valg: forventet en av ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()} ${a.unit??"elementer"}`:`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()} ${a.unit}`:`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${n[o.format]??i.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${$(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${i.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${i.origin}`;default:return"Ugyldig input"}}}});function fJ(){return{localeError:T4e()}}var T4e,hJ=f(()=>{Ae();T4e=()=>{let e={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numara";case"object":{if(Array.isArray(i))return"saf";if(i===null)return"gayb";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return i=>{switch(i.code){case"invalid_type":return`F\xE2sit giren: umulan ${i.expected}, al\u0131nan ${r(i.input)}`;case"invalid_value":return i.values.length===1?`F\xE2sit giren: umulan ${Q(i.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} ${a.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} ${a.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=i;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[o.format]??i.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${i.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${i.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}}});function mJ(){return{localeError:I4e()}}var I4e,yJ=f(()=>{Ae();I4e=()=>{let e={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0627\u0631\u06D0";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return i=>{switch(i.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${i.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(i.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return i.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${Q(i.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${$(i.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${a.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0648\u064A`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${a.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[o.format]??i.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${i.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${i.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${$(i.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${i.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${i.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}}});function gJ(){return{localeError:E4e()}}var E4e,xJ=f(()=>{Ae();E4e=()=>{let e={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"liczba";case"object":{if(Array.isArray(i))return"tablica";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return i=>{switch(i.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${i.expected}, otrzymano ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${Q(i.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.maximum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.minimum.toString()} ${a.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[o.format]??i.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${i.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${i.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${i.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}}});function bJ(){return{localeError:C4e()}}var C4e,vJ=f(()=>{Ae();C4e=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"array";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${i.expected}, recebido ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: esperado ${Q(i.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Muito grande: esperado que ${i.origin??"valor"} tivesse ${o}${i.maximum.toString()} ${a.unit??"elementos"}`:`Muito grande: esperado que ${i.origin??"valor"} fosse ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Muito pequeno: esperado que ${i.origin} tivesse ${o}${i.minimum.toString()} ${a.unit}`:`Muito pequeno: esperado que ${i.origin} fosse ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${n[o.format]??i.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Chave${i.keys.length>1?"s":""} desconhecida${i.keys.length>1?"s":""}: ${$(i.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${i.origin}`;default:return"Campo inv\xE1lido"}}}});function _J(e,t,r,n){let i=Math.abs(e),o=i%10,a=i%100;return a>=11&&a<=19?n:o===1?t:o>=2&&o<=4?r:n}function SJ(){return{localeError:P4e()}}var P4e,wJ=f(()=>{Ae();P4e=()=>{let e={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${Q(i.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);if(a){let s=Number(i.maximum),l=_J(s,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.maximum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);if(a){let s=Number(i.minimum),l=_J(s,a.unit.one,a.unit.few,a.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.minimum.toString()} ${l}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${i.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0438":""}: ${$(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}}});function TJ(){return{localeError:M4e()}}var M4e,IJ=f(()=>{Ae();M4e=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(i))return"tabela";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return i=>{switch(i.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${i.expected}, prejeto ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${Q(i.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} imelo ${o}${i.maximum.toString()} ${a.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Premajhno: pri\u010Dakovano, da bo ${i.origin} imelo ${o}${i.minimum.toString()} ${a.unit}`:`Premajhno: pri\u010Dakovano, da bo ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${n[o.format]??i.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${i.divisor}`;case"unrecognized_keys":return`Neprepoznan${i.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${$(i.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${i.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${i.origin}`;default:return"Neveljaven vnos"}}}});function EJ(){return{localeError:A4e()}}var A4e,CJ=f(()=>{Ae();A4e=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"antal";case"object":{if(Array.isArray(i))return"lista";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return i=>{switch(i.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${i.expected}, fick ${r(i.input)}`;case"invalid_value":return i.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${Q(i.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`F\xF6r stor(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()} ${a.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()} ${a.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${n[o.format]??i.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${$(i.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${i.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${i.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}}});function PJ(){return{localeError:D4e()}}var D4e,MJ=f(()=>{Ae();D4e=()=>{let e={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(i))return"\u0B85\u0BA3\u0BBF";if(i===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Q(i.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${$(i.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} ${a.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} ${a.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${i.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${i.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${$(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}}});function AJ(){return{localeError:L4e()}}var L4e,DJ=f(()=>{Ae();L4e=()=>{let e={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(i))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(i===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return i=>{switch(i.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${i.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${Q(i.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",a=t(i.origin);return a?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()} ${a.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",a=t(i.origin);return a?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()} ${a.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${i.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${$(i.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}}});function LJ(){return{localeError:k4e()}}var F4e,k4e,FJ=f(()=>{Ae();F4e=e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":{if(Array.isArray(e))return"array";if(e===null)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}}return t},k4e=()=>{let e={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function t(n){return e[n]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${F4e(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${Q(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${$(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=t(n.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${i}${n.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=t(n.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${i}${n.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ge\xE7ersiz metin: "${i.prefix}" ile ba\u015Flamal\u0131`:i.format==="ends_with"?`Ge\xE7ersiz metin: "${i.suffix}" ile bitmeli`:i.format==="includes"?`Ge\xE7ersiz metin: "${i.includes}" i\xE7ermeli`:i.format==="regex"?`Ge\xE7ersiz metin: ${i.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[i.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${$(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}}});function nI(){return{localeError:O4e()}}var O4e,Wk=f(()=>{Ae();O4e=()=>{let e={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${i.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${Q(i.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${a.verb} ${o}${i.maximum.toString()} ${a.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} ${a.verb} ${o}${i.minimum.toString()} ${a.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} \u0431\u0443\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0456":""}: ${$(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${i.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}}});function kJ(){return nI()}var OJ=f(()=>{Wk()});function RJ(){return{localeError:R4e()}}var R4e,BJ=f(()=>{Ae();R4e=()=>{let e={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(i))return"\u0622\u0631\u06D2";if(i===null)return"\u0646\u0644";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return i=>{switch(i.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${i.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(i.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return i.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${Q(i.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${$(i.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${i.maximum.toString()} ${a.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${i.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u06D2 ${o}${i.minimum.toString()} ${a.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u0627 ${o}${i.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${i.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${i.keys.length>1?"\u0632":""}: ${$(i.keys,"\u060C ")}`;case"invalid_key":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}}});function zJ(){return{localeError:B4e()}}var B4e,NJ=f(()=>{Ae();B4e=()=>{let e={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(i))return"m\u1EA3ng";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return i=>{switch(i.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${i.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${Q(i.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${a.verb} ${o}${i.maximum.toString()} ${a.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${a.verb} ${o}${i.minimum.toString()} ${a.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${n[o.format]??i.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${i.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${$(i.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}}});function UJ(){return{localeError:z4e()}}var z4e,$J=f(()=>{Ae();z4e=()=>{let e={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(i))return"\u6570\u7EC4";if(i===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${i.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${Q(i.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()} ${a.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()} ${a.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${n[o.format]??i.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${i.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${$(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${i.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}}});function VJ(){return{localeError:N4e()}}var N4e,jJ=f(()=>{Ae();N4e=()=>{let e={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${i.expected}\uFF0C\u4F46\u6536\u5230 ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${Q(i.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()} ${a.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()} ${a.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${i.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${i.keys.length>1?"\u5011":""}\uFF1A${$(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}}});function GJ(){return{localeError:U4e()}}var U4e,HJ=f(()=>{Ae();U4e=()=>{let e={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function t(i){return e[i]??null}let r=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(i))return"akop\u1ECD";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return i=>{switch(i.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${i.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(i.input)}`;case"invalid_value":return i.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${Q(i.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${$(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",a=t(i.origin);return a?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin??"iye"} ${a.verb} ${o}${i.maximum} ${a.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.maximum}`}case"too_small":{let o=i.inclusive?">=":">",a=t(i.origin);return a?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin} ${a.verb} ${o}${i.minimum} ${a.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.minimum}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${n[o.format]??i.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${i.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${$(i.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}}});var Nx={};Fr(Nx,{ar:()=>uY,az:()=>pY,be:()=>hY,bg:()=>yY,ca:()=>xY,cs:()=>vY,da:()=>SY,de:()=>TY,en:()=>tI,eo:()=>EY,es:()=>PY,fa:()=>AY,fi:()=>LY,fr:()=>kY,frCA:()=>RY,he:()=>zY,hu:()=>UY,id:()=>VY,is:()=>GY,it:()=>ZY,ja:()=>XY,ka:()=>YY,kh:()=>KY,km:()=>rI,ko:()=>eJ,lt:()=>nJ,mk:()=>oJ,ms:()=>sJ,nl:()=>uJ,no:()=>pJ,ota:()=>fJ,pl:()=>gJ,ps:()=>mJ,pt:()=>bJ,ru:()=>SJ,sl:()=>TJ,sv:()=>EJ,ta:()=>PJ,th:()=>AJ,tr:()=>LJ,ua:()=>kJ,uk:()=>nI,ur:()=>RJ,vi:()=>zJ,yo:()=>GJ,zhCN:()=>UJ,zhTW:()=>VJ});var Xk=f(()=>{cY();dY();mY();gY();bY();_Y();wY();IY();Hk();CY();MY();DY();FY();OY();BY();NY();$Y();jY();HY();WY();qY();JY();QY();Zk();tJ();iJ();aJ();lJ();cJ();dJ();hJ();yJ();xJ();vJ();wJ();IJ();CJ();MJ();DJ();FJ();OJ();Wk();BJ();NJ();$J();jJ();HJ()});function iI(){return new zm}var qk,Yk,zm,Il,Jk=f(()=>{qk=Symbol("ZodOutput"),Yk=Symbol("ZodInput"),zm=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){let n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){let r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){let r=t._zod.parent;if(r){let n={...this.get(r)??{}};delete n.id;let i={...n,...this._map.get(t)};return Object.keys(i).length?i:void 0}return this._map.get(t)}has(t){return this._map.has(t)}};Il=iI()});function Kk(e,t){return new e({type:"string",...te(t)})}function Qk(e,t){return new e({type:"string",coerce:!0,...te(t)})}function oI(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...te(t)})}function Ux(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...te(t)})}function aI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...te(t)})}function sI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...te(t)})}function lI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...te(t)})}function uI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...te(t)})}function $x(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...te(t)})}function cI(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...te(t)})}function pI(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...te(t)})}function dI(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...te(t)})}function fI(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...te(t)})}function hI(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...te(t)})}function mI(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...te(t)})}function yI(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...te(t)})}function gI(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...te(t)})}function xI(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...te(t)})}function bI(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...te(t)})}function vI(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...te(t)})}function _I(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...te(t)})}function SI(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...te(t)})}function wI(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...te(t)})}function TI(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...te(t)})}function tO(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...te(t)})}function rO(e,t){return new e({type:"string",format:"date",check:"string_format",...te(t)})}function nO(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...te(t)})}function iO(e,t){return new e({type:"string",format:"duration",check:"string_format",...te(t)})}function oO(e,t){return new e({type:"number",checks:[],...te(t)})}function aO(e,t){return new e({type:"number",coerce:!0,checks:[],...te(t)})}function sO(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...te(t)})}function lO(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...te(t)})}function uO(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...te(t)})}function cO(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...te(t)})}function pO(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...te(t)})}function dO(e,t){return new e({type:"boolean",...te(t)})}function fO(e,t){return new e({type:"boolean",coerce:!0,...te(t)})}function hO(e,t){return new e({type:"bigint",...te(t)})}function mO(e,t){return new e({type:"bigint",coerce:!0,...te(t)})}function yO(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...te(t)})}function gO(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...te(t)})}function xO(e,t){return new e({type:"symbol",...te(t)})}function bO(e,t){return new e({type:"undefined",...te(t)})}function vO(e,t){return new e({type:"null",...te(t)})}function _O(e){return new e({type:"any"})}function SO(e){return new e({type:"unknown"})}function wO(e,t){return new e({type:"never",...te(t)})}function TO(e,t){return new e({type:"void",...te(t)})}function IO(e,t){return new e({type:"date",...te(t)})}function EO(e,t){return new e({type:"date",coerce:!0,...te(t)})}function CO(e,t){return new e({type:"nan",...te(t)})}function Lu(e,t){return new jT({check:"less_than",...te(t),value:e,inclusive:!1})}function Aa(e,t){return new jT({check:"less_than",...te(t),value:e,inclusive:!0})}function Fu(e,t){return new GT({check:"greater_than",...te(t),value:e,inclusive:!1})}function uo(e,t){return new GT({check:"greater_than",...te(t),value:e,inclusive:!0})}function PO(e){return Fu(0,e)}function MO(e){return Lu(0,e)}function AO(e){return Aa(0,e)}function DO(e){return uo(0,e)}function Bd(e,t){return new mF({check:"multiple_of",...te(t),value:e})}function Nm(e,t){return new xF({check:"max_size",...te(t),maximum:e})}function zd(e,t){return new bF({check:"min_size",...te(t),minimum:e})}function Vx(e,t){return new vF({check:"size_equals",...te(t),size:e})}function Um(e,t){return new _F({check:"max_length",...te(t),maximum:e})}function ep(e,t){return new SF({check:"min_length",...te(t),minimum:e})}function $m(e,t){return new wF({check:"length_equals",...te(t),length:e})}function jx(e,t){return new TF({check:"string_format",format:"regex",...te(t),pattern:e})}function Gx(e){return new IF({check:"string_format",format:"lowercase",...te(e)})}function Hx(e){return new EF({check:"string_format",format:"uppercase",...te(e)})}function Zx(e,t){return new CF({check:"string_format",format:"includes",...te(t),includes:e})}function Wx(e,t){return new PF({check:"string_format",format:"starts_with",...te(t),prefix:e})}function Xx(e,t){return new MF({check:"string_format",format:"ends_with",...te(t),suffix:e})}function LO(e,t,r){return new AF({check:"property",property:e,schema:t,...te(r)})}function qx(e,t){return new DF({check:"mime_type",mime:e,...te(t)})}function ku(e){return new LF({check:"overwrite",tx:e})}function Yx(e){return ku(t=>t.normalize(e))}function Jx(){return ku(e=>e.trim())}function Kx(){return ku(e=>e.toLowerCase())}function Qx(){return ku(e=>e.toUpperCase())}function FO(e,t,r){return new e({type:"array",element:t,...te(r)})}function $4e(e,t,r){return new e({type:"union",options:t,...te(r)})}function V4e(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...te(n)})}function j4e(e,t,r){return new e({type:"intersection",left:t,right:r})}function G4e(e,t,r,n){let i=r instanceof Ue,o=i?n:r,a=i?r:null;return new e({type:"tuple",items:t,rest:a,...te(o)})}function H4e(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...te(n)})}function Z4e(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...te(n)})}function W4e(e,t,r){return new e({type:"set",valueType:t,...te(r)})}function X4e(e,t,r){let n=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new e({type:"enum",entries:n,...te(r)})}function q4e(e,t,r){return new e({type:"enum",entries:t,...te(r)})}function Y4e(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...te(r)})}function kO(e,t){return new e({type:"file",...te(t)})}function J4e(e,t){return new e({type:"transform",transform:t})}function K4e(e,t){return new e({type:"optional",innerType:t})}function Q4e(e,t){return new e({type:"nullable",innerType:t})}function eAe(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return typeof r=="function"?r():ML(r)}})}function tAe(e,t,r){return new e({type:"nonoptional",innerType:t,...te(r)})}function rAe(e,t){return new e({type:"success",innerType:t})}function nAe(e,t,r){return new e({type:"catch",innerType:t,catchValue:typeof r=="function"?r:()=>r})}function iAe(e,t,r){return new e({type:"pipe",in:t,out:r})}function oAe(e,t){return new e({type:"readonly",innerType:t})}function aAe(e,t,r){return new e({type:"template_literal",parts:t,...te(r)})}function sAe(e,t){return new e({type:"lazy",getter:t})}function lAe(e,t){return new e({type:"promise",innerType:t})}function OO(e,t,r){let n=te(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function RO(e,t,r){return new e({type:"custom",check:"custom",fn:t,...te(r)})}function BO(e){let t=ZJ(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Lm(n,r.value,t._zod.def));else{let i=n;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),r.issues.push(Lm(i))}},e(r.value,r)));return t}function ZJ(e,t){let r=new gr({check:"custom",...te(t)});return r._zod.check=e,r}function zO(e,t){let r=te(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(n=n.map(h=>typeof h=="string"?h.toLowerCase():h),i=i.map(h=>typeof h=="string"?h.toLowerCase():h));let o=new Set(n),a=new Set(i),s=e.Codec??Rx,l=e.Boolean??Ox,u=e.String??Rd,c=new u({type:"string",error:r.error}),p=new l({type:"boolean",error:r.error}),d=new s({type:"pipe",in:c,out:p,transform:(h,m)=>{let x=h;return r.case!=="sensitive"&&(x=x.toLowerCase()),o.has(x)?!0:a.has(x)?!1:(m.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...a],input:m.value,inst:d,continue:!1}),{})},reverseTransform:(h,m)=>h===!0?n[0]||"true":i[0]||"false",error:r.error});return d}function Vm(e,t,r,n={}){let i=te(n),o={...te(n),check:"string_format",type:"string",format:t,fn:typeof r=="function"?r:s=>r.test(s),...i};return r instanceof RegExp&&(o.pattern=r),new e(o)}var eO,WJ=f(()=>{HT();Gk();Ae();eO={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6}});function NO(e,t){if(e instanceof zm){let n=new eb(t),i={};for(let s of e._idmap.entries()){let[l,u]=s;n.process(u)}let o={},a={registry:e,uri:t?.uri,defs:i};for(let s of e._idmap.entries()){let[l,u]=s;o[l]=n.emit(u,{...t,external:a})}if(Object.keys(i).length>0){let s=n.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[s]:i}}return{schemas:o}}let r=new eb(t);return r.process(e),r.emit(e,t)}function Sn(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let i=e._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Sn(i.element,r);case"object":{for(let o in i.shape)if(Sn(i.shape[o],r))return!0;return!1}case"union":{for(let o of i.options)if(Sn(o,r))return!0;return!1}case"intersection":return Sn(i.left,r)||Sn(i.right,r);case"tuple":{for(let o of i.items)if(Sn(o,r))return!0;return!!(i.rest&&Sn(i.rest,r))}case"record":return Sn(i.keyType,r)||Sn(i.valueType,r);case"map":return Sn(i.keyType,r)||Sn(i.valueType,r);case"set":return Sn(i.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Sn(i.innerType,r);case"lazy":return Sn(i.getter(),r);case"default":return Sn(i.innerType,r);case"prefault":return Sn(i.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return Sn(i.in,r)||Sn(i.out,r);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw new Error(`Unknown schema type: ${i.type}`)}var eb,XJ=f(()=>{Jk();Ae();eb=class{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Il,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;let i=t._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(t);if(a)return a.count++,r.schemaPath.includes(t)&&(a.cycle=r.path),a.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,s);let l=t._zod.toJSONSchema?.();if(l)s.schema=l;else{let p={...r,schemaPath:[...r.schemaPath,t],path:r.path},d=t._zod.parent;if(d)s.ref=d,this.process(d,p),this.seen.get(d).isParent=!0;else{let h=s.schema;switch(i.type){case"string":{let m=h;m.type="string";let{minimum:x,maximum:b,format:_,patterns:T,contentEncoding:I}=t._zod.bag;if(typeof x=="number"&&(m.minLength=x),typeof b=="number"&&(m.maxLength=b),_&&(m.format=o[_]??_,m.format===""&&delete m.format),I&&(m.contentEncoding=I),T&&T.size>0){let S=[...T];S.length===1?m.pattern=S[0].source:S.length>1&&(s.schema.allOf=[...S.map(E=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:E.source}))])}break}case"number":{let m=h,{minimum:x,maximum:b,format:_,multipleOf:T,exclusiveMaximum:I,exclusiveMinimum:S}=t._zod.bag;typeof _=="string"&&_.includes("int")?m.type="integer":m.type="number",typeof S=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(m.minimum=S,m.exclusiveMinimum=!0):m.exclusiveMinimum=S),typeof x=="number"&&(m.minimum=x,typeof S=="number"&&this.target!=="draft-4"&&(S>=x?delete m.minimum:delete m.exclusiveMinimum)),typeof I=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(m.maximum=I,m.exclusiveMaximum=!0):m.exclusiveMaximum=I),typeof b=="number"&&(m.maximum=b,typeof I=="number"&&this.target!=="draft-4"&&(I<=b?delete m.maximum:delete m.exclusiveMaximum)),typeof T=="number"&&(m.multipleOf=T);break}case"boolean":{let m=h;m.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(h.type="string",h.nullable=!0,h.enum=[null]):h.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{h.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let m=h,{minimum:x,maximum:b}=t._zod.bag;typeof x=="number"&&(m.minItems=x),typeof b=="number"&&(m.maxItems=b),m.type="array",m.items=this.process(i.element,{...p,path:[...p.path,"items"]});break}case"object":{let m=h;m.type="object",m.properties={};let x=i.shape;for(let T in x)m.properties[T]=this.process(x[T],{...p,path:[...p.path,"properties",T]});let b=new Set(Object.keys(x)),_=new Set([...b].filter(T=>{let I=i.shape[T]._zod;return this.io==="input"?I.optin===void 0:I.optout===void 0}));_.size>0&&(m.required=Array.from(_)),i.catchall?._zod.def.type==="never"?m.additionalProperties=!1:i.catchall?i.catchall&&(m.additionalProperties=this.process(i.catchall,{...p,path:[...p.path,"additionalProperties"]})):this.io==="output"&&(m.additionalProperties=!1);break}case"union":{let m=h,x=i.options.map((b,_)=>this.process(b,{...p,path:[...p.path,"anyOf",_]}));m.anyOf=x;break}case"intersection":{let m=h,x=this.process(i.left,{...p,path:[...p.path,"allOf",0]}),b=this.process(i.right,{...p,path:[...p.path,"allOf",1]}),_=I=>"allOf"in I&&Object.keys(I).length===1,T=[..._(x)?x.allOf:[x],..._(b)?b.allOf:[b]];m.allOf=T;break}case"tuple":{let m=h;m.type="array";let x=this.target==="draft-2020-12"?"prefixItems":"items",b=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",_=i.items.map((E,P)=>this.process(E,{...p,path:[...p.path,x,P]})),T=i.rest?this.process(i.rest,{...p,path:[...p.path,b,...this.target==="openapi-3.0"?[i.items.length]:[]]}):null;this.target==="draft-2020-12"?(m.prefixItems=_,T&&(m.items=T)):this.target==="openapi-3.0"?(m.items={anyOf:_},T&&m.items.anyOf.push(T),m.minItems=_.length,T||(m.maxItems=_.length)):(m.items=_,T&&(m.additionalItems=T));let{minimum:I,maximum:S}=t._zod.bag;typeof I=="number"&&(m.minItems=I),typeof S=="number"&&(m.maxItems=S);break}case"record":{let m=h;m.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(m.propertyNames=this.process(i.keyType,{...p,path:[...p.path,"propertyNames"]})),m.additionalProperties=this.process(i.valueType,{...p,path:[...p.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let m=h,x=Tx(i.entries);x.every(b=>typeof b=="number")&&(m.type="number"),x.every(b=>typeof b=="string")&&(m.type="string"),m.enum=x;break}case"literal":{let m=h,x=[];for(let b of i.values)if(b===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof b=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");x.push(Number(b))}else x.push(b);if(x.length!==0)if(x.length===1){let b=x[0];m.type=b===null?"null":typeof b,this.target==="draft-4"||this.target==="openapi-3.0"?m.enum=[b]:m.const=b}else x.every(b=>typeof b=="number")&&(m.type="number"),x.every(b=>typeof b=="string")&&(m.type="string"),x.every(b=>typeof b=="boolean")&&(m.type="string"),x.every(b=>b===null)&&(m.type="null"),m.enum=x;break}case"file":{let m=h,x={type:"string",format:"binary",contentEncoding:"binary"},{minimum:b,maximum:_,mime:T}=t._zod.bag;b!==void 0&&(x.minLength=b),_!==void 0&&(x.maxLength=_),T?T.length===1?(x.contentMediaType=T[0],Object.assign(m,x)):m.anyOf=T.map(I=>({...x,contentMediaType:I})):Object.assign(m,x);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let m=this.process(i.innerType,p);this.target==="openapi-3.0"?(s.ref=i.innerType,h.nullable=!0):h.anyOf=[m,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,p),s.ref=i.innerType;break}case"success":{let m=h;m.type="boolean";break}case"default":{this.process(i.innerType,p),s.ref=i.innerType,h.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,p),s.ref=i.innerType,this.io==="input"&&(h._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,p),s.ref=i.innerType;let m;try{m=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}h.default=m;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let m=h,x=t._zod.pattern;if(!x)throw new Error("Pattern not found in template literal");m.type="string",m.pattern=x.source;break}case"pipe":{let m=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(m,p),s.ref=m;break}case"readonly":{this.process(i.innerType,p),s.ref=i.innerType,h.readOnly=!0;break}case"promise":{this.process(i.innerType,p),s.ref=i.innerType;break}case"optional":{this.process(i.innerType,p),s.ref=i.innerType;break}case"lazy":{let m=t._zod.innerType;this.process(m,p),s.ref=m;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let u=this.metadataRegistry.get(t);return u&&Object.assign(s.schema,u),this.io==="input"&&Sn(t)&&(delete s.schema.examples,delete s.schema.default),this.io==="input"&&s.schema._prefault&&((n=s.schema).default??(n.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(t).schema}emit(t,r){let n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},i=this.seen.get(t);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=c=>{let p=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let x=n.external.registry.get(c[0])?.id,b=n.external.uri??(T=>T);if(x)return{ref:b(x)};let _=c[1].defId??c[1].schema.id??`schema${this.counter++}`;return c[1].defId=_,{defId:_,ref:`${b("__shared")}#/${p}/${_}`}}if(c[1]===i)return{ref:"#"};let h=`#/${p}/`,m=c[1].schema.id??`__schema${this.counter++}`;return{defId:m,ref:h+m}},a=c=>{if(c[1].schema.$ref)return;let p=c[1],{ref:d,defId:h}=o(c);p.def={...p.schema},h&&(p.defId=h);let m=p.schema;for(let x in m)delete m[x];m.$ref=d};if(n.cycles==="throw")for(let c of this.seen.entries()){let p=c[1];if(p.cycle)throw new Error(`Cycle detected: #/${p.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of this.seen.entries()){let p=c[1];if(t===c[0]){a(c);continue}if(n.external){let h=n.external.registry.get(c[0])?.id;if(t!==c[0]&&h){a(c);continue}}if(this.metadataRegistry.get(c[0])?.id){a(c);continue}if(p.cycle){a(c);continue}if(p.count>1&&n.reused==="ref"){a(c);continue}}let s=(c,p)=>{let d=this.seen.get(c),h=d.def??d.schema,m={...h};if(d.ref===null)return;let x=d.ref;if(d.ref=null,x){s(x,p);let b=this.seen.get(x).schema;b.$ref&&(p.target==="draft-7"||p.target==="draft-4"||p.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(b)):(Object.assign(h,b),Object.assign(h,m))}d.isParent||this.override({zodSchema:c,jsonSchema:h,path:d.path??[]})};for(let c of[...this.seen.entries()].reverse())s(c[0],{target:this.target});let l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?l.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let c=n.external.registry.get(t)?.id;if(!c)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(c)}Object.assign(l,i.def);let u=n.external?.defs??{};for(let c of this.seen.entries()){let p=c[1];p.def&&p.defId&&(u[p.defId]=p.def)}n.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?l.$defs=u:l.definitions=u);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}});var qJ={};var YJ=f(()=>{});var Ou={};Fr(Ou,{$ZodAny:()=>fk,$ZodArray:()=>xk,$ZodAsyncError:()=>vs,$ZodBase64:()=>nk,$ZodBase64URL:()=>ik,$ZodBigInt:()=>KT,$ZodBigIntFormat:()=>uk,$ZodBoolean:()=>Ox,$ZodCIDRv4:()=>ek,$ZodCIDRv6:()=>tk,$ZodCUID:()=>jF,$ZodCUID2:()=>GF,$ZodCatch:()=>Ok,$ZodCheck:()=>gr,$ZodCheckBigIntFormat:()=>gF,$ZodCheckEndsWith:()=>MF,$ZodCheckGreaterThan:()=>GT,$ZodCheckIncludes:()=>CF,$ZodCheckLengthEquals:()=>wF,$ZodCheckLessThan:()=>jT,$ZodCheckLowerCase:()=>IF,$ZodCheckMaxLength:()=>_F,$ZodCheckMaxSize:()=>xF,$ZodCheckMimeType:()=>DF,$ZodCheckMinLength:()=>SF,$ZodCheckMinSize:()=>bF,$ZodCheckMultipleOf:()=>mF,$ZodCheckNumberFormat:()=>yF,$ZodCheckOverwrite:()=>LF,$ZodCheckProperty:()=>AF,$ZodCheckRegex:()=>TF,$ZodCheckSizeEquals:()=>vF,$ZodCheckStartsWith:()=>PF,$ZodCheckStringFormat:()=>Bm,$ZodCheckUpperCase:()=>EF,$ZodCodec:()=>Rx,$ZodCustom:()=>jk,$ZodCustomStringFormat:()=>sk,$ZodDate:()=>gk,$ZodDefault:()=>Dk,$ZodDiscriminatedUnion:()=>vk,$ZodE164:()=>ok,$ZodEmail:()=>NF,$ZodEmoji:()=>$F,$ZodEncodeError:()=>Xc,$ZodEnum:()=>Ik,$ZodError:()=>Mx,$ZodFile:()=>Ck,$ZodFunction:()=>Uk,$ZodGUID:()=>BF,$ZodIPv4:()=>KF,$ZodIPv6:()=>QF,$ZodISODate:()=>qF,$ZodISODateTime:()=>XF,$ZodISODuration:()=>JF,$ZodISOTime:()=>YF,$ZodIntersection:()=>_k,$ZodJWT:()=>ak,$ZodKSUID:()=>WF,$ZodLazy:()=>Vk,$ZodLiteral:()=>Ek,$ZodMap:()=>wk,$ZodNaN:()=>Rk,$ZodNanoID:()=>VF,$ZodNever:()=>mk,$ZodNonOptional:()=>Fk,$ZodNull:()=>dk,$ZodNullable:()=>Ak,$ZodNumber:()=>JT,$ZodNumberFormat:()=>lk,$ZodObject:()=>lY,$ZodObjectJIT:()=>bk,$ZodOptional:()=>Mk,$ZodPipe:()=>Bk,$ZodPrefault:()=>Lk,$ZodPromise:()=>$k,$ZodReadonly:()=>zk,$ZodRealError:()=>lo,$ZodRecord:()=>Sk,$ZodRegistry:()=>zm,$ZodSet:()=>Tk,$ZodString:()=>Rd,$ZodStringFormat:()=>tr,$ZodSuccess:()=>kk,$ZodSymbol:()=>ck,$ZodTemplateLiteral:()=>Nk,$ZodTransform:()=>Pk,$ZodTuple:()=>eI,$ZodType:()=>Ue,$ZodULID:()=>HF,$ZodURL:()=>UF,$ZodUUID:()=>zF,$ZodUndefined:()=>pk,$ZodUnion:()=>QT,$ZodUnknown:()=>hk,$ZodVoid:()=>yk,$ZodXID:()=>ZF,$brand:()=>PT,$constructor:()=>B,$input:()=>Yk,$output:()=>qk,Doc:()=>kx,JSONSchema:()=>qJ,JSONSchemaGenerator:()=>eb,NEVER:()=>TL,TimePrecision:()=>eO,_any:()=>_O,_array:()=>FO,_base64:()=>_I,_base64url:()=>SI,_bigint:()=>hO,_boolean:()=>dO,_catch:()=>nAe,_check:()=>ZJ,_cidrv4:()=>bI,_cidrv6:()=>vI,_coercedBigint:()=>mO,_coercedBoolean:()=>fO,_coercedDate:()=>EO,_coercedNumber:()=>aO,_coercedString:()=>Qk,_cuid:()=>dI,_cuid2:()=>fI,_custom:()=>OO,_date:()=>IO,_decode:()=>kT,_decodeAsync:()=>RT,_default:()=>eAe,_discriminatedUnion:()=>V4e,_e164:()=>wI,_email:()=>oI,_emoji:()=>cI,_encode:()=>FT,_encodeAsync:()=>OT,_endsWith:()=>Xx,_enum:()=>X4e,_file:()=>kO,_float32:()=>lO,_float64:()=>uO,_gt:()=>Fu,_gte:()=>uo,_guid:()=>Ux,_includes:()=>Zx,_int:()=>sO,_int32:()=>cO,_int64:()=>yO,_intersection:()=>j4e,_ipv4:()=>gI,_ipv6:()=>xI,_isoDate:()=>rO,_isoDateTime:()=>tO,_isoDuration:()=>iO,_isoTime:()=>nO,_jwt:()=>TI,_ksuid:()=>yI,_lazy:()=>sAe,_length:()=>$m,_literal:()=>Y4e,_lowercase:()=>Gx,_lt:()=>Lu,_lte:()=>Aa,_map:()=>Z4e,_max:()=>Aa,_maxLength:()=>Um,_maxSize:()=>Nm,_mime:()=>qx,_min:()=>uo,_minLength:()=>ep,_minSize:()=>zd,_multipleOf:()=>Bd,_nan:()=>CO,_nanoid:()=>pI,_nativeEnum:()=>q4e,_negative:()=>MO,_never:()=>wO,_nonnegative:()=>DO,_nonoptional:()=>tAe,_nonpositive:()=>AO,_normalize:()=>Yx,_null:()=>vO,_nullable:()=>Q4e,_number:()=>oO,_optional:()=>K4e,_overwrite:()=>ku,_parse:()=>Fm,_parseAsync:()=>km,_pipe:()=>iAe,_positive:()=>PO,_promise:()=>lAe,_property:()=>LO,_readonly:()=>oAe,_record:()=>H4e,_refine:()=>RO,_regex:()=>jx,_safeDecode:()=>zT,_safeDecodeAsync:()=>UT,_safeEncode:()=>BT,_safeEncodeAsync:()=>NT,_safeParse:()=>Om,_safeParseAsync:()=>Rm,_set:()=>W4e,_size:()=>Vx,_startsWith:()=>Wx,_string:()=>Kk,_stringFormat:()=>Vm,_stringbool:()=>zO,_success:()=>rAe,_superRefine:()=>BO,_symbol:()=>xO,_templateLiteral:()=>aAe,_toLowerCase:()=>Kx,_toUpperCase:()=>Qx,_transform:()=>J4e,_trim:()=>Jx,_tuple:()=>G4e,_uint32:()=>pO,_uint64:()=>gO,_ulid:()=>hI,_undefined:()=>bO,_union:()=>$4e,_unknown:()=>SO,_uppercase:()=>Hx,_url:()=>$x,_uuid:()=>aI,_uuidv4:()=>sI,_uuidv6:()=>lI,_uuidv7:()=>uI,_void:()=>TO,_xid:()=>mI,clone:()=>ki,config:()=>en,decode:()=>u2e,decodeAsync:()=>p2e,encode:()=>l2e,encodeAsync:()=>c2e,flattenError:()=>Ax,formatError:()=>Dx,globalConfig:()=>Sx,globalRegistry:()=>Il,isValidBase64:()=>rk,isValidBase64URL:()=>iY,isValidJWT:()=>oY,locales:()=>Nx,parse:()=>DT,parseAsync:()=>LT,prettifyError:()=>OL,regexes:()=>Ma,registry:()=>iI,safeDecode:()=>f2e,safeDecodeAsync:()=>m2e,safeEncode:()=>d2e,safeEncodeAsync:()=>h2e,safeParse:()=>BL,safeParseAsync:()=>zL,toDotPath:()=>$q,toJSONSchema:()=>NO,treeifyError:()=>kL,util:()=>re,version:()=>kF});var co=f(()=>{Mm();NL();RL();Gk();HT();OF();Ae();VT();Xk();Jk();FF();WJ();XJ();YJ()});var UO=f(()=>{co()});var MI={};Fr(MI,{ZodISODate:()=>EI,ZodISODateTime:()=>II,ZodISODuration:()=>PI,ZodISOTime:()=>CI,date:()=>VO,datetime:()=>$O,duration:()=>GO,time:()=>jO});function $O(e){return tO(II,e)}function VO(e){return rO(EI,e)}function jO(e){return nO(CI,e)}function GO(e){return iO(PI,e)}var II,EI,CI,PI,AI=f(()=>{co();DI();II=B("ZodISODateTime",(e,t)=>{XF.init(e,t),ur.init(e,t)});EI=B("ZodISODate",(e,t)=>{qF.init(e,t),ur.init(e,t)});CI=B("ZodISOTime",(e,t)=>{YF.init(e,t),ur.init(e,t)});PI=B("ZodISODuration",(e,t)=>{JF.init(e,t),ur.init(e,t)})});var KJ,cAe,po,HO=f(()=>{co();co();Ae();KJ=(e,t)=>{Mx.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Dx(e,r)},flatten:{value:r=>Ax(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Am,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Am,2)}},isEmpty:{get(){return e.issues.length===0}}})},cAe=B("ZodError",KJ),po=B("ZodError",KJ,{Parent:Error})});var ZO,WO,XO,qO,YO,JO,KO,QO,e6,t6,r6,n6,i6=f(()=>{co();HO();ZO=Fm(po),WO=km(po),XO=Om(po),qO=Rm(po),YO=FT(po),JO=kT(po),KO=OT(po),QO=RT(po),e6=BT(po),t6=zT(po),r6=NT(po),n6=UT(po)});function o6(e){return Kk(rb,e)}function dAe(e){return oI(l6,e)}function fAe(e){return Ux(LI,e)}function hAe(e){return aI(Ru,e)}function mAe(e){return sI(Ru,e)}function yAe(e){return lI(Ru,e)}function gAe(e){return uI(Ru,e)}function xAe(e){return $x(RI,e)}function bAe(e){return $x(RI,{protocol:/^https?$/,hostname:Ma.domain,...re.normalizeParams(e)})}function vAe(e){return cI(u6,e)}function _Ae(e){return pI(c6,e)}function SAe(e){return dI(p6,e)}function wAe(e){return fI(d6,e)}function TAe(e){return hI(f6,e)}function IAe(e){return mI(h6,e)}function EAe(e){return yI(m6,e)}function CAe(e){return gI(y6,e)}function PAe(e){return xI(g6,e)}function MAe(e){return bI(x6,e)}function AAe(e){return vI(b6,e)}function DAe(e){return _I(v6,e)}function LAe(e){return SI(_6,e)}function FAe(e){return wI(S6,e)}function kAe(e){return TI(w6,e)}function OAe(e,t,r={}){return Vm(nb,e,t,r)}function RAe(e){return Vm(nb,"hostname",Ma.hostname,e)}function BAe(e){return Vm(nb,"hex",Ma.hex,e)}function zAe(e,t){let r=t?.enc??"hex",n=`${e}_${r}`,i=Ma[n];if(!i)throw new Error(`Unrecognized hash format: ${n}`);return Vm(nb,n,i,t)}function QJ(e){return oO(ib,e)}function a6(e){return sO(Gm,e)}function NAe(e){return lO(Gm,e)}function UAe(e){return uO(Gm,e)}function $Ae(e){return cO(Gm,e)}function VAe(e){return pO(Gm,e)}function eK(e){return dO(ob,e)}function jAe(e){return hO(ab,e)}function GAe(e){return yO(T6,e)}function HAe(e){return gO(T6,e)}function ZAe(e){return xO(tK,e)}function WAe(e){return bO(rK,e)}function iK(e){return vO(nK,e)}function XAe(){return _O(oK)}function jm(){return SO(aK)}function I6(e){return wO(sK,e)}function qAe(e){return TO(lK,e)}function YAe(e){return IO(BI,e)}function zI(e,t){return FO(uK,e,t)}function JAe(e){let t=e._zod.def.shape;return M6(Object.keys(t))}function KAe(e,t){let r={type:"object",shape:e??{},...re.normalizeParams(t)};return new NI(r)}function QAe(e,t){return new NI({type:"object",shape:e,catchall:I6(),...re.normalizeParams(t)})}function e3e(e,t){return new NI({type:"object",shape:e,catchall:jm(),...re.normalizeParams(t)})}function C6(e,t){return new E6({type:"union",options:e,...re.normalizeParams(t)})}function t3e(e,t,r){return new cK({type:"union",options:t,discriminator:e,...re.normalizeParams(r)})}function dK(e,t){return new pK({type:"intersection",left:e,right:t})}function hK(e,t,r){let n=t instanceof Ue,i=n?r:t,o=n?t:null;return new fK({type:"tuple",items:e,rest:o,...re.normalizeParams(i)})}function mK(e,t,r){return new P6({type:"record",keyType:e,valueType:t,...re.normalizeParams(r)})}function r3e(e,t,r){let n=ki(e);return n._zod.values=void 0,new P6({type:"record",keyType:n,valueType:t,...re.normalizeParams(r)})}function n3e(e,t,r){return new yK({type:"map",keyType:e,valueType:t,...re.normalizeParams(r)})}function i3e(e,t){return new gK({type:"set",valueType:e,...re.normalizeParams(t)})}function M6(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new tb({type:"enum",entries:r,...re.normalizeParams(t)})}function o3e(e,t){return new tb({type:"enum",entries:e,...re.normalizeParams(t)})}function a3e(e,t){return new xK({type:"literal",values:Array.isArray(e)?e:[e],...re.normalizeParams(t)})}function s3e(e){return kO(bK,e)}function A6(e){return new vK({type:"transform",transform:e})}function FI(e){return new D6({type:"optional",innerType:e})}function kI(e){return new _K({type:"nullable",innerType:e})}function l3e(e){return FI(kI(e))}function wK(e,t){return new SK({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():re.shallowClone(t)}})}function IK(e,t){return new TK({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():re.shallowClone(t)}})}function EK(e,t){return new L6({type:"nonoptional",innerType:e,...re.normalizeParams(t)})}function u3e(e){return new CK({type:"success",innerType:e})}function MK(e,t){return new PK({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}function c3e(e){return CO(AK,e)}function OI(e,t){return new F6({type:"pipe",in:e,out:t})}function p3e(e,t,r){return new k6({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}function LK(e){return new DK({type:"readonly",innerType:e})}function d3e(e,t){return new FK({type:"template_literal",parts:e,...re.normalizeParams(t)})}function OK(e){return new kK({type:"lazy",getter:e})}function f3e(e){return new RK({type:"promise",innerType:e})}function h3e(e){return new BK({type:"function",input:Array.isArray(e?.input)?hK(e?.input):e?.input??zI(jm()),output:e?.output??jm()})}function m3e(e){let t=new gr({check:"custom"});return t._zod.check=e,t}function y3e(e,t){return OO(UI,e??(()=>!0),t)}function zK(e,t={}){return RO(UI,e,t)}function NK(e){return BO(e)}function g3e(e,t={error:`Input not instance of ${e.name}`}){let r=new UI({type:"custom",check:"custom",fn:n=>n instanceof e,abort:!0,...re.normalizeParams(t)});return r._zod.bag.Class=e,r}function b3e(e){let t=OK(()=>C6([o6(e),QJ(),eK(),iK(),zI(t),mK(o6(),t)]));return t}function v3e(e,t){return OI(A6(e),t)}var Ye,s6,rb,ur,l6,LI,Ru,RI,u6,c6,p6,d6,f6,h6,m6,y6,g6,x6,b6,v6,_6,S6,w6,nb,ib,Gm,ob,ab,T6,tK,rK,nK,oK,aK,sK,lK,BI,uK,NI,E6,cK,pK,fK,P6,yK,gK,tb,xK,bK,vK,D6,_K,SK,TK,L6,CK,PK,AK,F6,k6,DK,FK,kK,RK,BK,UI,x3e,DI=f(()=>{co();co();UO();AI();i6();Ye=B("ZodType",(e,t)=>(Ue.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(re.mergeDefs(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),e.clone=(r,n)=>ki(e,r,n),e.brand=()=>e,e.register=(r,n)=>(r.add(e,n),e),e.parse=(r,n)=>ZO(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>XO(e,r,n),e.parseAsync=async(r,n)=>WO(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>qO(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>YO(e,r,n),e.decode=(r,n)=>JO(e,r,n),e.encodeAsync=async(r,n)=>KO(e,r,n),e.decodeAsync=async(r,n)=>QO(e,r,n),e.safeEncode=(r,n)=>e6(e,r,n),e.safeDecode=(r,n)=>t6(e,r,n),e.safeEncodeAsync=async(r,n)=>r6(e,r,n),e.safeDecodeAsync=async(r,n)=>n6(e,r,n),e.refine=(r,n)=>e.check(zK(r,n)),e.superRefine=r=>e.check(NK(r)),e.overwrite=r=>e.check(ku(r)),e.optional=()=>FI(e),e.nullable=()=>kI(e),e.nullish=()=>FI(kI(e)),e.nonoptional=r=>EK(e,r),e.array=()=>zI(e),e.or=r=>C6([e,r]),e.and=r=>dK(e,r),e.transform=r=>OI(e,A6(r)),e.default=r=>wK(e,r),e.prefault=r=>IK(e,r),e.catch=r=>MK(e,r),e.pipe=r=>OI(e,r),e.readonly=()=>LK(e),e.describe=r=>{let n=e.clone();return Il.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return Il.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Il.get(e);let n=e.clone();return Il.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),s6=B("_ZodString",(e,t)=>{Rd.init(e,t),Ye.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(jx(...n)),e.includes=(...n)=>e.check(Zx(...n)),e.startsWith=(...n)=>e.check(Wx(...n)),e.endsWith=(...n)=>e.check(Xx(...n)),e.min=(...n)=>e.check(ep(...n)),e.max=(...n)=>e.check(Um(...n)),e.length=(...n)=>e.check($m(...n)),e.nonempty=(...n)=>e.check(ep(1,...n)),e.lowercase=n=>e.check(Gx(n)),e.uppercase=n=>e.check(Hx(n)),e.trim=()=>e.check(Jx()),e.normalize=(...n)=>e.check(Yx(...n)),e.toLowerCase=()=>e.check(Kx()),e.toUpperCase=()=>e.check(Qx())}),rb=B("ZodString",(e,t)=>{Rd.init(e,t),s6.init(e,t),e.email=r=>e.check(oI(l6,r)),e.url=r=>e.check($x(RI,r)),e.jwt=r=>e.check(TI(w6,r)),e.emoji=r=>e.check(cI(u6,r)),e.guid=r=>e.check(Ux(LI,r)),e.uuid=r=>e.check(aI(Ru,r)),e.uuidv4=r=>e.check(sI(Ru,r)),e.uuidv6=r=>e.check(lI(Ru,r)),e.uuidv7=r=>e.check(uI(Ru,r)),e.nanoid=r=>e.check(pI(c6,r)),e.guid=r=>e.check(Ux(LI,r)),e.cuid=r=>e.check(dI(p6,r)),e.cuid2=r=>e.check(fI(d6,r)),e.ulid=r=>e.check(hI(f6,r)),e.base64=r=>e.check(_I(v6,r)),e.base64url=r=>e.check(SI(_6,r)),e.xid=r=>e.check(mI(h6,r)),e.ksuid=r=>e.check(yI(m6,r)),e.ipv4=r=>e.check(gI(y6,r)),e.ipv6=r=>e.check(xI(g6,r)),e.cidrv4=r=>e.check(bI(x6,r)),e.cidrv6=r=>e.check(vI(b6,r)),e.e164=r=>e.check(wI(S6,r)),e.datetime=r=>e.check($O(r)),e.date=r=>e.check(VO(r)),e.time=r=>e.check(jO(r)),e.duration=r=>e.check(GO(r))});ur=B("ZodStringFormat",(e,t)=>{tr.init(e,t),s6.init(e,t)}),l6=B("ZodEmail",(e,t)=>{NF.init(e,t),ur.init(e,t)});LI=B("ZodGUID",(e,t)=>{BF.init(e,t),ur.init(e,t)});Ru=B("ZodUUID",(e,t)=>{zF.init(e,t),ur.init(e,t)});RI=B("ZodURL",(e,t)=>{UF.init(e,t),ur.init(e,t)});u6=B("ZodEmoji",(e,t)=>{$F.init(e,t),ur.init(e,t)});c6=B("ZodNanoID",(e,t)=>{VF.init(e,t),ur.init(e,t)});p6=B("ZodCUID",(e,t)=>{jF.init(e,t),ur.init(e,t)});d6=B("ZodCUID2",(e,t)=>{GF.init(e,t),ur.init(e,t)});f6=B("ZodULID",(e,t)=>{HF.init(e,t),ur.init(e,t)});h6=B("ZodXID",(e,t)=>{ZF.init(e,t),ur.init(e,t)});m6=B("ZodKSUID",(e,t)=>{WF.init(e,t),ur.init(e,t)});y6=B("ZodIPv4",(e,t)=>{KF.init(e,t),ur.init(e,t)});g6=B("ZodIPv6",(e,t)=>{QF.init(e,t),ur.init(e,t)});x6=B("ZodCIDRv4",(e,t)=>{ek.init(e,t),ur.init(e,t)});b6=B("ZodCIDRv6",(e,t)=>{tk.init(e,t),ur.init(e,t)});v6=B("ZodBase64",(e,t)=>{nk.init(e,t),ur.init(e,t)});_6=B("ZodBase64URL",(e,t)=>{ik.init(e,t),ur.init(e,t)});S6=B("ZodE164",(e,t)=>{ok.init(e,t),ur.init(e,t)});w6=B("ZodJWT",(e,t)=>{ak.init(e,t),ur.init(e,t)});nb=B("ZodCustomStringFormat",(e,t)=>{sk.init(e,t),ur.init(e,t)});ib=B("ZodNumber",(e,t)=>{JT.init(e,t),Ye.init(e,t),e.gt=(n,i)=>e.check(Fu(n,i)),e.gte=(n,i)=>e.check(uo(n,i)),e.min=(n,i)=>e.check(uo(n,i)),e.lt=(n,i)=>e.check(Lu(n,i)),e.lte=(n,i)=>e.check(Aa(n,i)),e.max=(n,i)=>e.check(Aa(n,i)),e.int=n=>e.check(a6(n)),e.safe=n=>e.check(a6(n)),e.positive=n=>e.check(Fu(0,n)),e.nonnegative=n=>e.check(uo(0,n)),e.negative=n=>e.check(Lu(0,n)),e.nonpositive=n=>e.check(Aa(0,n)),e.multipleOf=(n,i)=>e.check(Bd(n,i)),e.step=(n,i)=>e.check(Bd(n,i)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});Gm=B("ZodNumberFormat",(e,t)=>{lk.init(e,t),ib.init(e,t)});ob=B("ZodBoolean",(e,t)=>{Ox.init(e,t),Ye.init(e,t)});ab=B("ZodBigInt",(e,t)=>{KT.init(e,t),Ye.init(e,t),e.gte=(n,i)=>e.check(uo(n,i)),e.min=(n,i)=>e.check(uo(n,i)),e.gt=(n,i)=>e.check(Fu(n,i)),e.gte=(n,i)=>e.check(uo(n,i)),e.min=(n,i)=>e.check(uo(n,i)),e.lt=(n,i)=>e.check(Lu(n,i)),e.lte=(n,i)=>e.check(Aa(n,i)),e.max=(n,i)=>e.check(Aa(n,i)),e.positive=n=>e.check(Fu(BigInt(0),n)),e.negative=n=>e.check(Lu(BigInt(0),n)),e.nonpositive=n=>e.check(Aa(BigInt(0),n)),e.nonnegative=n=>e.check(uo(BigInt(0),n)),e.multipleOf=(n,i)=>e.check(Bd(n,i));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});T6=B("ZodBigIntFormat",(e,t)=>{uk.init(e,t),ab.init(e,t)});tK=B("ZodSymbol",(e,t)=>{ck.init(e,t),Ye.init(e,t)});rK=B("ZodUndefined",(e,t)=>{pk.init(e,t),Ye.init(e,t)});nK=B("ZodNull",(e,t)=>{dk.init(e,t),Ye.init(e,t)});oK=B("ZodAny",(e,t)=>{fk.init(e,t),Ye.init(e,t)});aK=B("ZodUnknown",(e,t)=>{hk.init(e,t),Ye.init(e,t)});sK=B("ZodNever",(e,t)=>{mk.init(e,t),Ye.init(e,t)});lK=B("ZodVoid",(e,t)=>{yk.init(e,t),Ye.init(e,t)});BI=B("ZodDate",(e,t)=>{gk.init(e,t),Ye.init(e,t),e.min=(n,i)=>e.check(uo(n,i)),e.max=(n,i)=>e.check(Aa(n,i));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});uK=B("ZodArray",(e,t)=>{xk.init(e,t),Ye.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(ep(r,n)),e.nonempty=r=>e.check(ep(1,r)),e.max=(r,n)=>e.check(Um(r,n)),e.length=(r,n)=>e.check($m(r,n)),e.unwrap=()=>e.element});NI=B("ZodObject",(e,t)=>{bk.init(e,t),Ye.init(e,t),re.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>M6(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:jm()}),e.loose=()=>e.clone({...e._zod.def,catchall:jm()}),e.strict=()=>e.clone({...e._zod.def,catchall:I6()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>re.extend(e,r),e.safeExtend=r=>re.safeExtend(e,r),e.merge=r=>re.merge(e,r),e.pick=r=>re.pick(e,r),e.omit=r=>re.omit(e,r),e.partial=(...r)=>re.partial(D6,e,r[0]),e.required=(...r)=>re.required(L6,e,r[0])});E6=B("ZodUnion",(e,t)=>{QT.init(e,t),Ye.init(e,t),e.options=t.options});cK=B("ZodDiscriminatedUnion",(e,t)=>{E6.init(e,t),vk.init(e,t)});pK=B("ZodIntersection",(e,t)=>{_k.init(e,t),Ye.init(e,t)});fK=B("ZodTuple",(e,t)=>{eI.init(e,t),Ye.init(e,t),e.rest=r=>e.clone({...e._zod.def,rest:r})});P6=B("ZodRecord",(e,t)=>{Sk.init(e,t),Ye.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});yK=B("ZodMap",(e,t)=>{wk.init(e,t),Ye.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});gK=B("ZodSet",(e,t)=>{Tk.init(e,t),Ye.init(e,t),e.min=(...r)=>e.check(zd(...r)),e.nonempty=r=>e.check(zd(1,r)),e.max=(...r)=>e.check(Nm(...r)),e.size=(...r)=>e.check(Vx(...r))});tb=B("ZodEnum",(e,t)=>{Ik.init(e,t),Ye.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(n,i)=>{let o={};for(let a of n)if(r.has(a))o[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new tb({...t,checks:[],...re.normalizeParams(i),entries:o})},e.exclude=(n,i)=>{let o={...t.entries};for(let a of n)if(r.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new tb({...t,checks:[],...re.normalizeParams(i),entries:o})}});xK=B("ZodLiteral",(e,t)=>{Ek.init(e,t),Ye.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});bK=B("ZodFile",(e,t)=>{Ck.init(e,t),Ye.init(e,t),e.min=(r,n)=>e.check(zd(r,n)),e.max=(r,n)=>e.check(Nm(r,n)),e.mime=(r,n)=>e.check(qx(Array.isArray(r)?r:[r],n))});vK=B("ZodTransform",(e,t)=>{Pk.init(e,t),Ye.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new Xc(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(re.issue(o,r.value,t));else{let a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),r.issues.push(re.issue(a))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(o=>(r.value=o,r)):(r.value=i,r)}});D6=B("ZodOptional",(e,t)=>{Mk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});_K=B("ZodNullable",(e,t)=>{Ak.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});SK=B("ZodDefault",(e,t)=>{Dk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});TK=B("ZodPrefault",(e,t)=>{Lk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});L6=B("ZodNonOptional",(e,t)=>{Fk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});CK=B("ZodSuccess",(e,t)=>{kk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});PK=B("ZodCatch",(e,t)=>{Ok.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});AK=B("ZodNaN",(e,t)=>{Rk.init(e,t),Ye.init(e,t)});F6=B("ZodPipe",(e,t)=>{Bk.init(e,t),Ye.init(e,t),e.in=t.in,e.out=t.out});k6=B("ZodCodec",(e,t)=>{F6.init(e,t),Rx.init(e,t)});DK=B("ZodReadonly",(e,t)=>{zk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});FK=B("ZodTemplateLiteral",(e,t)=>{Nk.init(e,t),Ye.init(e,t)});kK=B("ZodLazy",(e,t)=>{Vk.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.getter()});RK=B("ZodPromise",(e,t)=>{$k.init(e,t),Ye.init(e,t),e.unwrap=()=>e._zod.def.innerType});BK=B("ZodFunction",(e,t)=>{Uk.init(e,t),Ye.init(e,t)});UI=B("ZodCustom",(e,t)=>{jk.init(e,t),Ye.init(e,t)});x3e=(...e)=>zO({Codec:k6,Boolean:ob,String:rb},...e)});function S3e(e){en({customError:e})}function w3e(){return en().customError}var _3e,O6,UK=f(()=>{co();co();_3e={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};O6||(O6={})});var R6={};Fr(R6,{bigint:()=>C3e,boolean:()=>E3e,date:()=>P3e,number:()=>I3e,string:()=>T3e});function T3e(e){return Qk(rb,e)}function I3e(e){return aO(ib,e)}function E3e(e){return fO(ob,e)}function C3e(e){return mO(ab,e)}function P3e(e){return EO(BI,e)}var $K=f(()=>{co();DI()});var C={};Fr(C,{$brand:()=>PT,$input:()=>Yk,$output:()=>qk,NEVER:()=>TL,TimePrecision:()=>eO,ZodAny:()=>oK,ZodArray:()=>uK,ZodBase64:()=>v6,ZodBase64URL:()=>_6,ZodBigInt:()=>ab,ZodBigIntFormat:()=>T6,ZodBoolean:()=>ob,ZodCIDRv4:()=>x6,ZodCIDRv6:()=>b6,ZodCUID:()=>p6,ZodCUID2:()=>d6,ZodCatch:()=>PK,ZodCodec:()=>k6,ZodCustom:()=>UI,ZodCustomStringFormat:()=>nb,ZodDate:()=>BI,ZodDefault:()=>SK,ZodDiscriminatedUnion:()=>cK,ZodE164:()=>S6,ZodEmail:()=>l6,ZodEmoji:()=>u6,ZodEnum:()=>tb,ZodError:()=>cAe,ZodFile:()=>bK,ZodFirstPartyTypeKind:()=>O6,ZodFunction:()=>BK,ZodGUID:()=>LI,ZodIPv4:()=>y6,ZodIPv6:()=>g6,ZodISODate:()=>EI,ZodISODateTime:()=>II,ZodISODuration:()=>PI,ZodISOTime:()=>CI,ZodIntersection:()=>pK,ZodIssueCode:()=>_3e,ZodJWT:()=>w6,ZodKSUID:()=>m6,ZodLazy:()=>kK,ZodLiteral:()=>xK,ZodMap:()=>yK,ZodNaN:()=>AK,ZodNanoID:()=>c6,ZodNever:()=>sK,ZodNonOptional:()=>L6,ZodNull:()=>nK,ZodNullable:()=>_K,ZodNumber:()=>ib,ZodNumberFormat:()=>Gm,ZodObject:()=>NI,ZodOptional:()=>D6,ZodPipe:()=>F6,ZodPrefault:()=>TK,ZodPromise:()=>RK,ZodReadonly:()=>DK,ZodRealError:()=>po,ZodRecord:()=>P6,ZodSet:()=>gK,ZodString:()=>rb,ZodStringFormat:()=>ur,ZodSuccess:()=>CK,ZodSymbol:()=>tK,ZodTemplateLiteral:()=>FK,ZodTransform:()=>vK,ZodTuple:()=>fK,ZodType:()=>Ye,ZodULID:()=>f6,ZodURL:()=>RI,ZodUUID:()=>Ru,ZodUndefined:()=>rK,ZodUnion:()=>E6,ZodUnknown:()=>aK,ZodVoid:()=>lK,ZodXID:()=>h6,_ZodString:()=>s6,_default:()=>wK,_function:()=>h3e,any:()=>XAe,array:()=>zI,base64:()=>DAe,base64url:()=>LAe,bigint:()=>jAe,boolean:()=>eK,catch:()=>MK,check:()=>m3e,cidrv4:()=>MAe,cidrv6:()=>AAe,clone:()=>ki,codec:()=>p3e,coerce:()=>R6,config:()=>en,core:()=>Ou,cuid:()=>SAe,cuid2:()=>wAe,custom:()=>y3e,date:()=>YAe,decode:()=>JO,decodeAsync:()=>QO,discriminatedUnion:()=>t3e,e164:()=>FAe,email:()=>dAe,emoji:()=>vAe,encode:()=>YO,encodeAsync:()=>KO,endsWith:()=>Xx,enum:()=>M6,file:()=>s3e,flattenError:()=>Ax,float32:()=>NAe,float64:()=>UAe,formatError:()=>Dx,function:()=>h3e,getErrorMap:()=>w3e,globalRegistry:()=>Il,gt:()=>Fu,gte:()=>uo,guid:()=>fAe,hash:()=>zAe,hex:()=>BAe,hostname:()=>RAe,httpUrl:()=>bAe,includes:()=>Zx,instanceof:()=>g3e,int:()=>a6,int32:()=>$Ae,int64:()=>GAe,intersection:()=>dK,ipv4:()=>CAe,ipv6:()=>PAe,iso:()=>MI,json:()=>b3e,jwt:()=>kAe,keyof:()=>JAe,ksuid:()=>EAe,lazy:()=>OK,length:()=>$m,literal:()=>a3e,locales:()=>Nx,looseObject:()=>e3e,lowercase:()=>Gx,lt:()=>Lu,lte:()=>Aa,map:()=>n3e,maxLength:()=>Um,maxSize:()=>Nm,mime:()=>qx,minLength:()=>ep,minSize:()=>zd,multipleOf:()=>Bd,nan:()=>c3e,nanoid:()=>_Ae,nativeEnum:()=>o3e,negative:()=>MO,never:()=>I6,nonnegative:()=>DO,nonoptional:()=>EK,nonpositive:()=>AO,normalize:()=>Yx,null:()=>iK,nullable:()=>kI,nullish:()=>l3e,number:()=>QJ,object:()=>KAe,optional:()=>FI,overwrite:()=>ku,parse:()=>ZO,parseAsync:()=>WO,partialRecord:()=>r3e,pipe:()=>OI,positive:()=>PO,prefault:()=>IK,preprocess:()=>v3e,prettifyError:()=>OL,promise:()=>f3e,property:()=>LO,readonly:()=>LK,record:()=>mK,refine:()=>zK,regex:()=>jx,regexes:()=>Ma,registry:()=>iI,safeDecode:()=>t6,safeDecodeAsync:()=>n6,safeEncode:()=>e6,safeEncodeAsync:()=>r6,safeParse:()=>XO,safeParseAsync:()=>qO,set:()=>i3e,setErrorMap:()=>S3e,size:()=>Vx,startsWith:()=>Wx,strictObject:()=>QAe,string:()=>o6,stringFormat:()=>OAe,stringbool:()=>x3e,success:()=>u3e,superRefine:()=>NK,symbol:()=>ZAe,templateLiteral:()=>d3e,toJSONSchema:()=>NO,toLowerCase:()=>Kx,toUpperCase:()=>Qx,transform:()=>A6,treeifyError:()=>kL,trim:()=>Jx,tuple:()=>hK,uint32:()=>VAe,uint64:()=>HAe,ulid:()=>TAe,undefined:()=>WAe,union:()=>C6,unknown:()=>jm,uppercase:()=>Hx,url:()=>xAe,util:()=>re,uuid:()=>hAe,uuidv4:()=>mAe,uuidv6:()=>yAe,uuidv7:()=>gAe,void:()=>qAe,xid:()=>IAe});var B6=f(()=>{co();DI();UO();HO();i6();UK();co();Hk();co();Xk();AI();AI();$K();en(tI())});var H,xr=f(()=>{B6();B6();H=C});var Hm,_s=f(()=>{"use strict";xr();Hm=C.union([C.enum(["low","medium","high","always-visible"]),C.number()])});var z6=f(()=>{"use strict"});var M3e,A3e,D3e,L3e,VK,jK=f(()=>{"use strict";g2();xr();M3e=H.enum(v8),A3e=e=>{let t=e[0];for(let r=1;r<e.length;r++){let n=e[r];if(n<=t)return!1;t=n}return!0},D3e=e=>{let t=e[0];for(let r=1;r<e.length;r++){let n=e[r];if(n>=t)return!1;t=n}return!0},L3e=e=>A3e(e)||D3e(e),VK=H.object({on:H.literal("zoom-level"),input:H.tuple([H.number()]).rest(H.number()).refine(L3e,{message:"input array must be strictly increasing or decreasing"}),output:H.tuple([H.number()]).rest(H.number()),easing:M3e.default("linear")}).refine(e=>e.input.length===e.output.length,{message:"input and output must have the same length"})});function $I(e){"@babel/helpers - typeof";return $I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$I(e)}function be(e,t){if(e=e||"",t=t||{},e instanceof be)return e;if(!(this instanceof be))return new be(e,t);var r=O3e(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}function O3e(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,o=null,a=!1,s=!1;return typeof e=="string"&&(e=tDe(e)),$I(e)=="object"&&(Bu(e.r)&&Bu(e.g)&&Bu(e.b)?(t=R3e(e.r,e.g,e.b),a=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Bu(e.h)&&Bu(e.s)&&Bu(e.v)?(n=sb(e.s),i=sb(e.v),t=z3e(e.h,n,i),a=!0,s="hsv"):Bu(e.h)&&Bu(e.s)&&Bu(e.l)&&(n=sb(e.s),o=sb(e.l),t=B3e(e.h,n,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=YK(r),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function R3e(e,t,r){return{r:Er(e,255)*255,g:Er(t,255)*255,b:Er(r,255)*255}}function GK(e,t,r){e=Er(e,255),t=Er(t,255),r=Er(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,a,s=(n+i)/2;if(n==i)o=a=0;else{var l=n-i;switch(a=s>.5?l/(2-n-i):l/(n+i),n){case e:o=(t-r)/l+(t<r?6:0);break;case t:o=(r-e)/l+2;break;case r:o=(e-t)/l+4;break}o/=6}return{h:o,s:a,l:s}}function B3e(e,t,r){var n,i,o;e=Er(e,360),t=Er(t,100),r=Er(r,100);function a(u,c,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?u+(c-u)*6*p:p<1/2?c:p<2/3?u+(c-u)*(2/3-p)*6:u}if(t===0)n=i=o=r;else{var s=r<.5?r*(1+t):r+t-r*t,l=2*r-s;n=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:n*255,g:i*255,b:o*255}}function HK(e,t,r){e=Er(e,255),t=Er(t,255),r=Er(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),o,a,s=n,l=n-i;if(a=n===0?0:l/n,n==i)o=0;else{switch(n){case e:o=(t-r)/l+(t<r?6:0);break;case t:o=(r-e)/l+2;break;case r:o=(e-t)/l+4;break}o/=6}return{h:o,s:a,v:s}}function z3e(e,t,r){e=Er(e,360)*6,t=Er(t,100),r=Er(r,100);var n=Math.floor(e),i=e-n,o=r*(1-t),a=r*(1-i*t),s=r*(1-(1-i)*t),l=n%6,u=[r,a,o,o,s,r][l],c=[s,r,r,a,o,o][l],p=[o,o,s,r,r,a][l];return{r:u*255,g:c*255,b:p*255}}function ZK(e,t,r,n){var i=[ws(Math.round(e).toString(16)),ws(Math.round(t).toString(16)),ws(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function N3e(e,t,r,n,i){var o=[ws(Math.round(e).toString(16)),ws(Math.round(t).toString(16)),ws(Math.round(r).toString(16)),ws(JK(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function WK(e,t,r,n){var i=[ws(JK(n)),ws(Math.round(e).toString(16)),ws(Math.round(t).toString(16)),ws(Math.round(r).toString(16))];return i.join("")}function U3e(e,t){t=t===0?0:t||10;var r=be(e).toHsl();return r.s-=t/100,r.s=VI(r.s),be(r)}function $3e(e,t){t=t===0?0:t||10;var r=be(e).toHsl();return r.s+=t/100,r.s=VI(r.s),be(r)}function V3e(e){return be(e).desaturate(100)}function j3e(e,t){t=t===0?0:t||10;var r=be(e).toHsl();return r.l+=t/100,r.l=VI(r.l),be(r)}function G3e(e,t){t=t===0?0:t||10;var r=be(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),be(r)}function H3e(e,t){t=t===0?0:t||10;var r=be(e).toHsl();return r.l-=t/100,r.l=VI(r.l),be(r)}function Z3e(e,t){var r=be(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,be(r)}function W3e(e){var t=be(e).toHsl();return t.h=(t.h+180)%360,be(t)}function XK(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=be(e).toHsl(),n=[be(e)],i=360/t,o=1;o<t;o++)n.push(be({h:(r.h+o*i)%360,s:r.s,l:r.l}));return n}function X3e(e){var t=be(e).toHsl(),r=t.h;return[be(e),be({h:(r+72)%360,s:t.s,l:t.l}),be({h:(r+216)%360,s:t.s,l:t.l})]}function q3e(e,t,r){t=t||6,r=r||30;var n=be(e).toHsl(),i=360/r,o=[be(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(be(n));return o}function Y3e(e,t){t=t||6;for(var r=be(e).toHsv(),n=r.h,i=r.s,o=r.v,a=[],s=1/t;t--;)a.push(be({h:n,s:i,v:o})),o=(o+s)%1;return a}function K3e(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function YK(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Er(e,t){Q3e(e)&&(e="100%");var r=eDe(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function VI(e){return Math.min(1,Math.max(0,e))}function Xo(e){return parseInt(e,16)}function Q3e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function eDe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function ws(e){return e.length==1?"0"+e:""+e}function sb(e){return e<=1&&(e=e*100+"%"),e}function JK(e){return Math.round(parseFloat(e)*255).toString(16)}function qK(e){return Xo(e)/255}function Bu(e){return!!Ss.CSS_UNIT.exec(e)}function tDe(e){e=e.replace(F3e,"").replace(k3e,"").toLowerCase();var t=!1;if(N6[e])e=N6[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Ss.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Ss.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ss.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Ss.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ss.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Ss.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ss.hex8.exec(e))?{r:Xo(r[1]),g:Xo(r[2]),b:Xo(r[3]),a:qK(r[4]),format:t?"name":"hex8"}:(r=Ss.hex6.exec(e))?{r:Xo(r[1]),g:Xo(r[2]),b:Xo(r[3]),format:t?"name":"hex"}:(r=Ss.hex4.exec(e))?{r:Xo(r[1]+""+r[1]),g:Xo(r[2]+""+r[2]),b:Xo(r[3]+""+r[3]),a:qK(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=Ss.hex3.exec(e))?{r:Xo(r[1]+""+r[1]),g:Xo(r[2]+""+r[2]),b:Xo(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function rDe(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var F3e,k3e,N6,J3e,Ss,jI=f(()=>{F3e=/^\s+/,k3e=/\s+$/;be.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,i,o,a,s;return r=t.r/255,n=t.g/255,i=t.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*a+.0722*s},setAlpha:function(t){return this._a=YK(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=HK(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=HK(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=GK(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=GK(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return ZK(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return N3e(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Er(this._r,255)*100)+"%",g:Math.round(Er(this._g,255)*100)+"%",b:Math.round(Er(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Er(this._r,255)*100)+"%, "+Math.round(Er(this._g,255)*100)+"%, "+Math.round(Er(this._b,255)*100)+"%)":"rgba("+Math.round(Er(this._r,255)*100)+"%, "+Math.round(Er(this._g,255)*100)+"%, "+Math.round(Er(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:J3e[ZK(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+WK(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=be(t);n="#"+WK(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!r&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return be(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(j3e,arguments)},brighten:function(){return this._applyModification(G3e,arguments)},darken:function(){return this._applyModification(H3e,arguments)},desaturate:function(){return this._applyModification(U3e,arguments)},saturate:function(){return this._applyModification($3e,arguments)},greyscale:function(){return this._applyModification(V3e,arguments)},spin:function(){return this._applyModification(Z3e,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(q3e,arguments)},complement:function(){return this._applyCombination(W3e,arguments)},monochromatic:function(){return this._applyCombination(Y3e,arguments)},splitcomplement:function(){return this._applyCombination(X3e,arguments)},triad:function(){return this._applyCombination(XK,[3])},tetrad:function(){return this._applyCombination(XK,[4])}};be.fromRatio=function(e,t){if($I(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=sb(e[n]));e=r}return be(e,t)};be.equals=function(e,t){return!e||!t?!1:be(e).toRgbString()==be(t).toRgbString()};be.random=function(){return be.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};be.mix=function(e,t,r){r=r===0?0:r||50;var n=be(e).toRgb(),i=be(t).toRgb(),o=r/100,a={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return be(a)};be.readability=function(e,t){var r=be(e),n=be(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};be.isReadable=function(e,t,r){var n=be.readability(e,t),i,o;switch(o=!1,i=rDe(r),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};be.mostReadable=function(e,t,r){var n=null,i=0,o,a,s,l;r=r||{},a=r.includeFallbackColors,s=r.level,l=r.size;for(var u=0;u<t.length;u++)o=be.readability(e,t[u]),o>i&&(i=o,n=be(t[u]));return be.isReadable(e,n,{level:s,size:l})||!a?n:(r.includeFallbackColors=!1,be.mostReadable(e,["#fff","#000"],r))};N6=be.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},J3e=be.hexNames=K3e(N6);Ss=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()});var Zm,lb,GI,HI,nDe,F2t,k2t,KK,O2t,R2t,ub=f(()=>{"use strict";xr();jK();_s();jI();Zm={RIGHT:"right",LEFT:"left",TOP:"top",HIDDEN:"hidden",CENTER:"center"},lb=Object.values(Zm),GI=[Zm.RIGHT,Zm.LEFT,Zm.TOP,Zm.HIDDEN],HI=C.object({margin:C.number().min(6).default(6),maxLines:C.number().min(1).default(2),textSize:C.number().min(0).default(11.5),maxWidth:C.number().min(0).default(150),lineHeight:C.number().min(0).default(1.2),color:C.string().default("#333"),outlineColor:C.string().default("white"),textColor:C.string().optional(),textOutlineColor:C.string().optional(),pinColor:C.string().optional(),pinOutlineColor:C.string().optional(),pinColorInactive:C.string().optional(),pinOutlineColorInactive:C.string().optional(),icon:C.string().optional(),iconSize:C.number().min(0).default(20),iconScale:C.union([C.number(),VK]).default(1),iconPadding:C.number().min(0).default(2),iconFit:C.enum(["fill","contain","cover"]).default("cover"),iconOverflow:C.enum(["visible","hidden"]).default("hidden"),iconVisible:C.union([C.boolean(),C.number()]).default(!0),opacity:C.number().min(0).max(1).default(1)}),nDe=HI.transform(e=>({...e,textColor:e.textColor??e.color,textOutlineColor:e.textOutlineColor??e.outlineColor,pinColor:e.pinColor??e.color,pinOutlineColor:e.pinOutlineColor??e.outlineColor,pinColorInactive:e.pinColorInactive??be(e.pinColor??e.color).toRgbString(),pinOutlineColorInactive:e.pinOutlineColorInactive??be(e.pinOutlineColor??e.outlineColor).toRgbString()})),F2t=C.strictObject(HI.shape),k2t=C.object({rank:Hm.optional(),appearance:nDe.optional(),interactive:C.boolean().default(!1),textPlacement:C.union([C.enum(lb),C.array(C.enum(lb))]).default(GI)}),KK=["color","outlineColor","margin"],O2t=[...KK,"maxLines","lineHeight","textSize","maxWidth","textColor","textOutlineColor","opacity"],R2t=[...KK,"icon","pinColor","pinOutlineColor","pinColorInactive","pinOutlineColorInactive"]});var lDe,j2t,cb=f(()=>{"use strict";Js();_s();z6();ub();lDe=6.5,j2t=lDe/2});var eQ=f(()=>{});var Y6=ui((pb,Wm)=>{var uDe=200,cQ="__lodash_hash_undefined__",cDe=800,pDe=16,pQ=9007199254740991,dQ="[object Arguments]",dDe="[object Array]",fDe="[object AsyncFunction]",hDe="[object Boolean]",mDe="[object Date]",yDe="[object Error]",fQ="[object Function]",gDe="[object GeneratorFunction]",xDe="[object Map]",bDe="[object Number]",vDe="[object Null]",hQ="[object Object]",_De="[object Proxy]",SDe="[object RegExp]",wDe="[object Set]",TDe="[object String]",IDe="[object Undefined]",EDe="[object WeakMap]",CDe="[object ArrayBuffer]",PDe="[object DataView]",MDe="[object Float32Array]",ADe="[object Float64Array]",DDe="[object Int8Array]",LDe="[object Int16Array]",FDe="[object Int32Array]",kDe="[object Uint8Array]",ODe="[object Uint8ClampedArray]",RDe="[object Uint16Array]",BDe="[object Uint32Array]",zDe=/[\\^$.*+?()[\]{}|]/g,NDe=/^\[object .+?Constructor\]$/,UDe=/^(?:0|[1-9]\d*)$/,br={};br[MDe]=br[ADe]=br[DDe]=br[LDe]=br[FDe]=br[kDe]=br[ODe]=br[RDe]=br[BDe]=!0;br[dQ]=br[dDe]=br[CDe]=br[hDe]=br[PDe]=br[mDe]=br[yDe]=br[fQ]=br[xDe]=br[bDe]=br[hQ]=br[SDe]=br[wDe]=br[TDe]=br[EDe]=!1;var mQ=typeof global=="object"&&global&&global.Object===Object&&global,$De=typeof self=="object"&&self&&self.Object===Object&&self,hb=mQ||$De||Function("return this")(),yQ=typeof pb=="object"&&pb&&!pb.nodeType&&pb,db=yQ&&typeof Wm=="object"&&Wm&&!Wm.nodeType&&Wm,gQ=db&&db.exports===yQ,U6=gQ&&mQ.process,tQ=function(){try{var e=db&&db.require&&db.require("util").types;return e||U6&&U6.binding&&U6.binding("util")}catch{}}(),rQ=tQ&&tQ.isTypedArray;function VDe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function jDe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function GDe(e){return function(t){return e(t)}}function HDe(e,t){return e?.[t]}function ZDe(e,t){return function(r){return e(t(r))}}var WDe=Array.prototype,XDe=Function.prototype,XI=Object.prototype,$6=hb["__core-js_shared__"],qI=XDe.toString,zu=XI.hasOwnProperty,nQ=function(){var e=/[^.]+$/.exec($6&&$6.keys&&$6.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xQ=XI.toString,qDe=qI.call(Object),YDe=RegExp("^"+qI.call(zu).replace(zDe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ZI=gQ?hb.Buffer:void 0,iQ=hb.Symbol,oQ=hb.Uint8Array,aQ=ZI?ZI.allocUnsafe:void 0,bQ=ZDe(Object.getPrototypeOf,Object),sQ=Object.create,JDe=XI.propertyIsEnumerable,KDe=WDe.splice,Nd=iQ?iQ.toStringTag:void 0,WI=function(){try{var e=W6(Object,"defineProperty");return e({},"",{}),e}catch{}}(),QDe=ZI?ZI.isBuffer:void 0,lQ=Math.max,eLe=Date.now,vQ=W6(hb,"Map"),fb=W6(Object,"create"),tLe=function(){function e(){}return function(t){if(!$d(t))return{};if(sQ)return sQ(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Ud(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rLe(){this.__data__=fb?fb(null):{},this.size=0}function nLe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function iLe(e){var t=this.__data__;if(fb){var r=t[e];return r===cQ?void 0:r}return zu.call(t,e)?t[e]:void 0}function oLe(e){var t=this.__data__;return fb?t[e]!==void 0:zu.call(t,e)}function aLe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fb&&t===void 0?cQ:t,this}Ud.prototype.clear=rLe;Ud.prototype.delete=nLe;Ud.prototype.get=iLe;Ud.prototype.has=oLe;Ud.prototype.set=aLe;function Nu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function sLe(){this.__data__=[],this.size=0}function lLe(e){var t=this.__data__,r=YI(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():KDe.call(t,r,1),--this.size,!0}function uLe(e){var t=this.__data__,r=YI(t,e);return r<0?void 0:t[r][1]}function cLe(e){return YI(this.__data__,e)>-1}function pLe(e,t){var r=this.__data__,n=YI(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}Nu.prototype.clear=sLe;Nu.prototype.delete=lLe;Nu.prototype.get=uLe;Nu.prototype.has=cLe;Nu.prototype.set=pLe;function Xm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function dLe(){this.size=0,this.__data__={hash:new Ud,map:new(vQ||Nu),string:new Ud}}function fLe(e){var t=KI(this,e).delete(e);return this.size-=t?1:0,t}function hLe(e){return KI(this,e).get(e)}function mLe(e){return KI(this,e).has(e)}function yLe(e,t){var r=KI(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}Xm.prototype.clear=dLe;Xm.prototype.delete=fLe;Xm.prototype.get=hLe;Xm.prototype.has=mLe;Xm.prototype.set=yLe;function qm(e){var t=this.__data__=new Nu(e);this.size=t.size}function gLe(){this.__data__=new Nu,this.size=0}function xLe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function bLe(e){return this.__data__.get(e)}function vLe(e){return this.__data__.has(e)}function _Le(e,t){var r=this.__data__;if(r instanceof Nu){var n=r.__data__;if(!vQ||n.length<uDe-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xm(n)}return r.set(e,t),this.size=r.size,this}qm.prototype.clear=gLe;qm.prototype.delete=xLe;qm.prototype.get=bLe;qm.prototype.has=vLe;qm.prototype.set=_Le;function SLe(e,t){var r=H6(e),n=!r&&G6(e),i=!r&&!n&&TQ(e),o=!r&&!n&&!i&&EQ(e),a=r||n||i||o,s=a?jDe(e.length,String):[],l=s.length;for(var u in e)(t||zu.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||SQ(u,l)))&&s.push(u);return s}function V6(e,t,r){(r!==void 0&&!QI(e[t],r)||r===void 0&&!(t in e))&&Z6(e,t,r)}function wLe(e,t,r){var n=e[t];(!(zu.call(e,t)&&QI(n,r))||r===void 0&&!(t in e))&&Z6(e,t,r)}function YI(e,t){for(var r=e.length;r--;)if(QI(e[r][0],t))return r;return-1}function Z6(e,t,r){t=="__proto__"&&WI?WI(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var TLe=BLe();function JI(e){return e==null?e===void 0?IDe:vDe:Nd&&Nd in Object(e)?zLe(e):GLe(e)}function uQ(e){return mb(e)&&JI(e)==dQ}function ILe(e){if(!$d(e)||VLe(e))return!1;var t=q6(e)?YDe:NDe;return t.test(XLe(e))}function ELe(e){return mb(e)&&IQ(e.length)&&!!br[JI(e)]}function CLe(e){if(!$d(e))return jLe(e);var t=wQ(e),r=[];for(var n in e)n=="constructor"&&(t||!zu.call(e,n))||r.push(n);return r}function _Q(e,t,r,n,i){e!==t&&TLe(t,function(o,a){if(i||(i=new qm),$d(o))PLe(e,t,a,r,_Q,n,i);else{var s=n?n(j6(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),V6(e,a,s)}},CQ)}function PLe(e,t,r,n,i,o,a){var s=j6(e,r),l=j6(t,r),u=a.get(l);if(u){V6(e,r,u);return}var c=o?o(s,l,r+"",e,t,a):void 0,p=c===void 0;if(p){var d=H6(l),h=!d&&TQ(l),m=!d&&!h&&EQ(l);c=l,d||h||m?H6(s)?c=s:qLe(s)?c=kLe(s):h?(p=!1,c=DLe(l,!0)):m?(p=!1,c=FLe(l,!0)):c=[]:YLe(l)||G6(l)?(c=s,G6(s)?c=JLe(s):(!$d(s)||q6(s))&&(c=NLe(l))):p=!1}p&&(a.set(l,c),i(c,l,n,o,a),a.delete(l)),V6(e,r,c)}function MLe(e,t){return ZLe(HLe(e,t,PQ),e+"")}var ALe=WI?function(e,t){return WI(e,"toString",{configurable:!0,enumerable:!1,value:QLe(t),writable:!0})}:PQ;function DLe(e,t){if(t)return e.slice();var r=e.length,n=aQ?aQ(r):new e.constructor(r);return e.copy(n),n}function LLe(e){var t=new e.constructor(e.byteLength);return new oQ(t).set(new oQ(e)),t}function FLe(e,t){var r=t?LLe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function kLe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function OLe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),i?Z6(r,s,l):wLe(r,s,l)}return r}function RLe(e){return MLe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&ULe(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t})}function BLe(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(r(o[l],l,o)===!1)break}return t}}function KI(e,t){var r=e.__data__;return $Le(t)?r[typeof t=="string"?"string":"hash"]:r.map}function W6(e,t){var r=HDe(e,t);return ILe(r)?r:void 0}function zLe(e){var t=zu.call(e,Nd),r=e[Nd];try{e[Nd]=void 0;var n=!0}catch{}var i=xQ.call(e);return n&&(t?e[Nd]=r:delete e[Nd]),i}function NLe(e){return typeof e.constructor=="function"&&!wQ(e)?tLe(bQ(e)):{}}function SQ(e,t){var r=typeof e;return t=t??pQ,!!t&&(r=="number"||r!="symbol"&&UDe.test(e))&&e>-1&&e%1==0&&e<t}function ULe(e,t,r){if(!$d(r))return!1;var n=typeof t;return(n=="number"?X6(r)&&SQ(t,r.length):n=="string"&&t in r)?QI(r[t],e):!1}function $Le(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function VLe(e){return!!nQ&&nQ in e}function wQ(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||XI;return e===r}function jLe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function GLe(e){return xQ.call(e)}function HLe(e,t,r){return t=lQ(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=lQ(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),VDe(e,this,s)}}function j6(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ZLe=WLe(ALe);function WLe(e){var t=0,r=0;return function(){var n=eLe(),i=pDe-(n-r);if(r=n,i>0){if(++t>=cDe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function XLe(e){if(e!=null){try{return qI.call(e)}catch{}try{return e+""}catch{}}return""}function QI(e,t){return e===t||e!==e&&t!==t}var G6=uQ(function(){return arguments}())?uQ:function(e){return mb(e)&&zu.call(e,"callee")&&!JDe.call(e,"callee")},H6=Array.isArray;function X6(e){return e!=null&&IQ(e.length)&&!q6(e)}function qLe(e){return mb(e)&&X6(e)}var TQ=QDe||eFe;function q6(e){if(!$d(e))return!1;var t=JI(e);return t==fQ||t==gDe||t==fDe||t==_De}function IQ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=pQ}function $d(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function mb(e){return e!=null&&typeof e=="object"}function YLe(e){if(!mb(e)||JI(e)!=hQ)return!1;var t=bQ(e);if(t===null)return!0;var r=zu.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&qI.call(r)==qDe}var EQ=rQ?GDe(rQ):ELe;function JLe(e){return OLe(e,CQ(e))}function CQ(e){return X6(e)?SLe(e,!0):CLe(e)}var KLe=RLe(function(e,t,r){_Q(e,t,r)});function QLe(e){return function(){return e}}function PQ(e){return e}function eFe(){return!1}Wm.exports=KLe});var eE,Ym,tFe,rFe,J6=f(()=>{"use strict";eE={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",CENTER:"center",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",HIDDEN:"hidden"},Ym=Object.values(eE),tFe=[eE.CENTER,eE.HIDDEN],rFe=Object.freeze({size:8,color:"#666"})});var nFe,iFe,yb=f(()=>{"use strict";eQ();Js();_s();xr();nFe=Ie(Y6());J6();iFe=C.object({rank:C.union([C.enum(["low","medium","high","always-visible"]),C.number()]).optional(),interactive:C.union([C.boolean(),C.literal("pointer-events-auto")]).optional(),id:C.string().optional(),placement:C.union([C.enum(Ym),C.array(C.enum(Ym))]).optional(),dynamicResize:C.boolean().optional(),zIndex:C.number().optional(),lowPriorityPin:C.object({size:C.number().positive().optional(),color:C.string().optional()}).optional()})});var tE,K6=f(()=>{tE={name:"@packages/internal",private:!0,version:"6.0.1-beta.51",dependencies:{"@turf/boolean-point-in-polygon":"6.5.0","@turf/destination":"6.5.0","@turf/distance":"6.5.0"},files:["./common/","./outdoor-context-4/","./geojson-navigator/","./quad-tree/","./shave-text","./clipper-lib"]}});var $e=ui((o4t,MQ)=>{"use strict";MQ.exports=Jm;function Jm(e,t){this.x=e,this.y=t}Jm.prototype={clone:function(){return new Jm(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,i=r*this.x+t*this.y;return this.x=n,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.x+r*(this.x-t.x)-n*(this.y-t.y),o=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Jm.convert=function(e){return e instanceof Jm?e:Array.isArray(e)?new Jm(e[0],e[1]):e}});var LQ=ui((a4t,DQ)=>{"use strict";DQ.exports=AQ;function AQ(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}AQ.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-i/o}var a=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?a=r:s=r,r=(s-a)*.5+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}}});function rE(){return Q6==null&&(Q6=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q6}var Q6,eR=f(()=>{});function tR(){if(nE==null&&(nE=!1,rE())){let r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let i=0;i<5*5;i++){let o=i*4;r.fillStyle=`rgb(${o},${o+1},${o+2})`,r.fillRect(i%5,Math.floor(i/5),1,1)}let n=r.getImageData(0,0,5,5).data;for(let i=0;i<5*5*4;i++)if(i%4!==3&&n[i]!==i){nE=!0;break}}}return nE||!1}var nE,rR=f(()=>{eR()});var vr,Da,FQ,c4t,nR=f(()=>{vr=1e-6,Da=typeof Float32Array<"u"?Float32Array:Array,FQ=Math.random,c4t=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var iE={};Fr(iE,{add:()=>jFe,adjoint:()=>fFe,clone:()=>sFe,copy:()=>lFe,create:()=>aFe,determinant:()=>hFe,equals:()=>WFe,exactEquals:()=>ZFe,frob:()=>VFe,fromQuat:()=>LFe,fromQuat2:()=>CFe,fromRotation:()=>wFe,fromRotationTranslation:()=>BQ,fromRotationTranslationScale:()=>AFe,fromRotationTranslationScaleOrigin:()=>DFe,fromScaling:()=>SFe,fromTranslation:()=>_Fe,fromValues:()=>uFe,fromXRotation:()=>TFe,fromYRotation:()=>IFe,fromZRotation:()=>EFe,frustum:()=>FFe,getRotation:()=>MFe,getScaling:()=>zQ,getTranslation:()=>PFe,identity:()=>OQ,invert:()=>dFe,lookAt:()=>NFe,mul:()=>XFe,multiply:()=>RQ,multiplyScalar:()=>GFe,multiplyScalarAndAdd:()=>HFe,ortho:()=>BFe,orthoNO:()=>UQ,orthoZO:()=>zFe,perspective:()=>kFe,perspectiveFromFieldOfView:()=>RFe,perspectiveNO:()=>NQ,perspectiveZO:()=>OFe,rotate:()=>gFe,rotateX:()=>xFe,rotateY:()=>bFe,rotateZ:()=>vFe,scale:()=>yFe,set:()=>cFe,str:()=>$Fe,sub:()=>qFe,subtract:()=>$Q,targetTo:()=>UFe,translate:()=>mFe,transpose:()=>pFe});function aFe(){var e=new Da(16);return Da!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function sFe(e){var t=new Da(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function lFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function uFe(e,t,r,n,i,o,a,s,l,u,c,p,d,h,m,x){var b=new Da(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=n,b[4]=i,b[5]=o,b[6]=a,b[7]=s,b[8]=l,b[9]=u,b[10]=c,b[11]=p,b[12]=d,b[13]=h,b[14]=m,b[15]=x,b}function cFe(e,t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=p,e[11]=d,e[12]=h,e[13]=m,e[14]=x,e[15]=b,e}function OQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pFe(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function dFe(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],h=t[11],m=t[12],x=t[13],b=t[14],_=t[15],T=r*s-n*a,I=r*l-i*a,S=r*u-o*a,E=n*l-i*s,P=n*u-o*s,L=i*u-o*l,k=c*x-p*m,z=c*b-d*m,W=c*_-h*m,Z=p*b-d*x,Y=p*_-h*x,J=d*_-h*b,j=T*J-I*Y+S*Z+E*W-P*z+L*k;return j?(j=1/j,e[0]=(s*J-l*Y+u*Z)*j,e[1]=(i*Y-n*J-o*Z)*j,e[2]=(x*L-b*P+_*E)*j,e[3]=(d*P-p*L-h*E)*j,e[4]=(l*W-a*J-u*z)*j,e[5]=(r*J-i*W+o*z)*j,e[6]=(b*S-m*L-_*I)*j,e[7]=(c*L-d*S+h*I)*j,e[8]=(a*Y-s*W+u*k)*j,e[9]=(n*W-r*Y-o*k)*j,e[10]=(m*P-x*S+_*T)*j,e[11]=(p*S-c*P-h*T)*j,e[12]=(s*z-a*Z-l*k)*j,e[13]=(r*Z-n*z+i*k)*j,e[14]=(x*I-m*E-b*T)*j,e[15]=(c*E-p*I+d*T)*j,e):null}function fFe(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],h=t[11],m=t[12],x=t[13],b=t[14],_=t[15];return e[0]=s*(d*_-h*b)-p*(l*_-u*b)+x*(l*h-u*d),e[1]=-(n*(d*_-h*b)-p*(i*_-o*b)+x*(i*h-o*d)),e[2]=n*(l*_-u*b)-s*(i*_-o*b)+x*(i*u-o*l),e[3]=-(n*(l*h-u*d)-s*(i*h-o*d)+p*(i*u-o*l)),e[4]=-(a*(d*_-h*b)-c*(l*_-u*b)+m*(l*h-u*d)),e[5]=r*(d*_-h*b)-c*(i*_-o*b)+m*(i*h-o*d),e[6]=-(r*(l*_-u*b)-a*(i*_-o*b)+m*(i*u-o*l)),e[7]=r*(l*h-u*d)-a*(i*h-o*d)+c*(i*u-o*l),e[8]=a*(p*_-h*x)-c*(s*_-u*x)+m*(s*h-u*p),e[9]=-(r*(p*_-h*x)-c*(n*_-o*x)+m*(n*h-o*p)),e[10]=r*(s*_-u*x)-a*(n*_-o*x)+m*(n*u-o*s),e[11]=-(r*(s*h-u*p)-a*(n*h-o*p)+c*(n*u-o*s)),e[12]=-(a*(p*b-d*x)-c*(s*b-l*x)+m*(s*d-l*p)),e[13]=r*(p*b-d*x)-c*(n*b-i*x)+m*(n*d-i*p),e[14]=-(r*(s*b-l*x)-a*(n*b-i*x)+m*(n*l-i*s)),e[15]=r*(s*d-l*p)-a*(n*d-i*p)+c*(n*l-i*s),e}function hFe(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],d=e[11],h=e[12],m=e[13],x=e[14],b=e[15],_=t*a-r*o,T=t*s-n*o,I=t*l-i*o,S=r*s-n*a,E=r*l-i*a,P=n*l-i*s,L=u*m-c*h,k=u*x-p*h,z=u*b-d*h,W=c*x-p*m,Z=c*b-d*m,Y=p*b-d*x;return _*Y-T*Z+I*W+S*z-E*k+P*L}function RQ(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],h=t[10],m=t[11],x=t[12],b=t[13],_=t[14],T=t[15],I=r[0],S=r[1],E=r[2],P=r[3];return e[0]=I*n+S*s+E*p+P*x,e[1]=I*i+S*l+E*d+P*b,e[2]=I*o+S*u+E*h+P*_,e[3]=I*a+S*c+E*m+P*T,I=r[4],S=r[5],E=r[6],P=r[7],e[4]=I*n+S*s+E*p+P*x,e[5]=I*i+S*l+E*d+P*b,e[6]=I*o+S*u+E*h+P*_,e[7]=I*a+S*c+E*m+P*T,I=r[8],S=r[9],E=r[10],P=r[11],e[8]=I*n+S*s+E*p+P*x,e[9]=I*i+S*l+E*d+P*b,e[10]=I*o+S*u+E*h+P*_,e[11]=I*a+S*c+E*m+P*T,I=r[12],S=r[13],E=r[14],P=r[15],e[12]=I*n+S*s+E*p+P*x,e[13]=I*i+S*l+E*d+P*b,e[14]=I*o+S*u+E*h+P*_,e[15]=I*a+S*c+E*m+P*T,e}function mFe(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,p,d,h,m,x,b,_;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],p=t[5],d=t[6],h=t[7],m=t[8],x=t[9],b=t[10],_=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=p,e[6]=d,e[7]=h,e[8]=m,e[9]=x,e[10]=b,e[11]=_,e[12]=a*n+c*i+m*o+t[12],e[13]=s*n+p*i+x*o+t[13],e[14]=l*n+d*i+b*o+t[14],e[15]=u*n+h*i+_*o+t[15]),e}function yFe(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function gFe(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,p,d,h,m,x,b,_,T,I,S,E,P,L,k,z,W,Z,Y,J,j,ae;return s<vr?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,p=t[0],d=t[1],h=t[2],m=t[3],x=t[4],b=t[5],_=t[6],T=t[7],I=t[8],S=t[9],E=t[10],P=t[11],L=i*i*c+u,k=o*i*c+a*l,z=a*i*c-o*l,W=i*o*c-a*l,Z=o*o*c+u,Y=a*o*c+i*l,J=i*a*c+o*l,j=o*a*c-i*l,ae=a*a*c+u,e[0]=p*L+x*k+I*z,e[1]=d*L+b*k+S*z,e[2]=h*L+_*k+E*z,e[3]=m*L+T*k+P*z,e[4]=p*W+x*Z+I*Y,e[5]=d*W+b*Z+S*Y,e[6]=h*W+_*Z+E*Y,e[7]=m*W+T*Z+P*Y,e[8]=p*J+x*j+I*ae,e[9]=d*J+b*j+S*ae,e[10]=h*J+_*j+E*ae,e[11]=m*J+T*j+P*ae,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function xFe(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+p*n,e[7]=l*i+d*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=p*i-s*n,e[11]=d*i-l*n,e}function bFe(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-p*n,e[3]=l*i-d*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+p*i,e[11]=l*n+d*i,e}function vFe(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+p*n,e[3]=l*i+d*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=p*i-s*n,e[7]=d*i-l*n,e}function _Fe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function SFe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wFe(e,t,r){var n=r[0],i=r[1],o=r[2],a=Math.hypot(n,i,o),s,l,u;return a<vr?null:(a=1/a,n*=a,i*=a,o*=a,s=Math.sin(t),l=Math.cos(t),u=1-l,e[0]=n*n*u+l,e[1]=i*n*u+o*s,e[2]=o*n*u-i*s,e[3]=0,e[4]=n*i*u-o*s,e[5]=i*i*u+l,e[6]=o*i*u+n*s,e[7]=0,e[8]=n*o*u+i*s,e[9]=i*o*u-n*s,e[10]=o*o*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function TFe(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function IFe(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function EFe(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function BQ(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,c=n*s,p=n*l,d=n*u,h=i*l,m=i*u,x=o*u,b=a*s,_=a*l,T=a*u;return e[0]=1-(h+x),e[1]=p+T,e[2]=d-_,e[3]=0,e[4]=p-T,e[5]=1-(c+x),e[6]=m+b,e[7]=0,e[8]=d+_,e[9]=m-b,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function CFe(e,t){var r=new Da(3),n=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=n*n+i*i+o*o+a*a;return p>0?(r[0]=(s*a+c*n+l*o-u*i)*2/p,r[1]=(l*a+c*i+u*n-s*o)*2/p,r[2]=(u*a+c*o+s*i-l*n)*2/p):(r[0]=(s*a+c*n+l*o-u*i)*2,r[1]=(l*a+c*i+u*n-s*o)*2,r[2]=(u*a+c*o+s*i-l*n)*2),BQ(e,t,r),e}function PFe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function zQ(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function MFe(e,t){var r=new Da(3);zQ(r,t);var n=1/r[0],i=1/r[1],o=1/r[2],a=t[0]*n,s=t[1]*i,l=t[2]*o,u=t[4]*n,c=t[5]*i,p=t[6]*o,d=t[8]*n,h=t[9]*i,m=t[10]*o,x=a+c+m,b=0;return x>0?(b=Math.sqrt(x+1)*2,e[3]=.25*b,e[0]=(p-h)/b,e[1]=(d-l)/b,e[2]=(s-u)/b):a>c&&a>m?(b=Math.sqrt(1+a-c-m)*2,e[3]=(p-h)/b,e[0]=.25*b,e[1]=(s+u)/b,e[2]=(d+l)/b):c>m?(b=Math.sqrt(1+c-a-m)*2,e[3]=(d-l)/b,e[0]=(s+u)/b,e[1]=.25*b,e[2]=(p+h)/b):(b=Math.sqrt(1+m-a-c)*2,e[3]=(s-u)/b,e[0]=(d+l)/b,e[1]=(p+h)/b,e[2]=.25*b),e}function AFe(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,u=o+o,c=a+a,p=i*l,d=i*u,h=i*c,m=o*u,x=o*c,b=a*c,_=s*l,T=s*u,I=s*c,S=n[0],E=n[1],P=n[2];return e[0]=(1-(m+b))*S,e[1]=(d+I)*S,e[2]=(h-T)*S,e[3]=0,e[4]=(d-I)*E,e[5]=(1-(p+b))*E,e[6]=(x+_)*E,e[7]=0,e[8]=(h+T)*P,e[9]=(x-_)*P,e[10]=(1-(p+m))*P,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function DFe(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],l=t[3],u=o+o,c=a+a,p=s+s,d=o*u,h=o*c,m=o*p,x=a*c,b=a*p,_=s*p,T=l*u,I=l*c,S=l*p,E=n[0],P=n[1],L=n[2],k=i[0],z=i[1],W=i[2],Z=(1-(x+_))*E,Y=(h+S)*E,J=(m-I)*E,j=(h-S)*P,ae=(1-(d+_))*P,ve=(b+T)*P,xe=(m+I)*L,Le=(b-T)*L,Te=(1-(d+x))*L;return e[0]=Z,e[1]=Y,e[2]=J,e[3]=0,e[4]=j,e[5]=ae,e[6]=ve,e[7]=0,e[8]=xe,e[9]=Le,e[10]=Te,e[11]=0,e[12]=r[0]+k-(Z*k+j*z+xe*W),e[13]=r[1]+z-(Y*k+ae*z+Le*W),e[14]=r[2]+W-(J*k+ve*z+Te*W),e[15]=1,e}function LFe(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,p=n*s,d=i*a,h=i*s,m=i*l,x=o*a,b=o*s,_=o*l;return e[0]=1-p-m,e[1]=c+_,e[2]=d-b,e[3]=0,e[4]=c-_,e[5]=1-u-m,e[6]=h+x,e[7]=0,e[8]=d+b,e[9]=h-x,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function FFe(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function NQ(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function OFe(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=i*a,e[14]=i*n*a):(e[10]=-1,e[14]=-n),e}function RFe(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((a-s)*l*.5),e[9]=(i-o)*u*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function UQ(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}function zFe(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=o*u,e[15]=1,e}function NFe(e,t,r,n){var i,o,a,s,l,u,c,p,d,h,m=t[0],x=t[1],b=t[2],_=n[0],T=n[1],I=n[2],S=r[0],E=r[1],P=r[2];return Math.abs(m-S)<vr&&Math.abs(x-E)<vr&&Math.abs(b-P)<vr?OQ(e):(c=m-S,p=x-E,d=b-P,h=1/Math.hypot(c,p,d),c*=h,p*=h,d*=h,i=T*d-I*p,o=I*c-_*d,a=_*p-T*c,h=Math.hypot(i,o,a),h?(h=1/h,i*=h,o*=h,a*=h):(i=0,o=0,a=0),s=p*a-d*o,l=d*i-c*a,u=c*o-p*i,h=Math.hypot(s,l,u),h?(h=1/h,s*=h,l*=h,u*=h):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=p,e[7]=0,e[8]=a,e[9]=u,e[10]=d,e[11]=0,e[12]=-(i*m+o*x+a*b),e[13]=-(s*m+l*x+u*b),e[14]=-(c*m+p*x+d*b),e[15]=1,e)}function UFe(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2],c=i-r[0],p=o-r[1],d=a-r[2],h=c*c+p*p+d*d;h>0&&(h=1/Math.sqrt(h),c*=h,p*=h,d*=h);var m=l*d-u*p,x=u*c-s*d,b=s*p-l*c;return h=m*m+x*x+b*b,h>0&&(h=1/Math.sqrt(h),m*=h,x*=h,b*=h),e[0]=m,e[1]=x,e[2]=b,e[3]=0,e[4]=p*b-d*x,e[5]=d*m-c*b,e[6]=c*x-p*m,e[7]=0,e[8]=c,e[9]=p,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function $Fe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function VFe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function jFe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function $Q(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function GFe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function HFe(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function ZFe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function WFe(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],d=e[10],h=e[11],m=e[12],x=e[13],b=e[14],_=e[15],T=t[0],I=t[1],S=t[2],E=t[3],P=t[4],L=t[5],k=t[6],z=t[7],W=t[8],Z=t[9],Y=t[10],J=t[11],j=t[12],ae=t[13],ve=t[14],xe=t[15];return Math.abs(r-T)<=vr*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(n-I)<=vr*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(i-S)<=vr*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-E)<=vr*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-P)<=vr*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(s-L)<=vr*Math.max(1,Math.abs(s),Math.abs(L))&&Math.abs(l-k)<=vr*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-z)<=vr*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(c-W)<=vr*Math.max(1,Math.abs(c),Math.abs(W))&&Math.abs(p-Z)<=vr*Math.max(1,Math.abs(p),Math.abs(Z))&&Math.abs(d-Y)<=vr*Math.max(1,Math.abs(d),Math.abs(Y))&&Math.abs(h-J)<=vr*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(m-j)<=vr*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(x-ae)<=vr*Math.max(1,Math.abs(x),Math.abs(ae))&&Math.abs(b-ve)<=vr*Math.max(1,Math.abs(b),Math.abs(ve))&&Math.abs(_-xe)<=vr*Math.max(1,Math.abs(_),Math.abs(xe))}var kFe,BFe,XFe,qFe,VQ=f(()=>{nR();kFe=NQ;BFe=UQ;XFe=RQ,qFe=$Q});var oE={};Fr(oE,{add:()=>eke,angle:()=>vke,ceil:()=>tke,clone:()=>YFe,copy:()=>KFe,create:()=>jQ,cross:()=>dke,dist:()=>Mke,distance:()=>WQ,div:()=>Pke,divide:()=>ZQ,dot:()=>pke,equals:()=>Tke,exactEquals:()=>wke,floor:()=>rke,forEach:()=>Lke,fromValues:()=>JFe,inverse:()=>uke,len:()=>Ike,length:()=>qQ,lerp:()=>fke,max:()=>ike,min:()=>nke,mul:()=>Cke,multiply:()=>HQ,negate:()=>lke,normalize:()=>cke,random:()=>hke,rotate:()=>bke,round:()=>oke,scale:()=>ake,scaleAndAdd:()=>ske,set:()=>QFe,sqrDist:()=>Ake,sqrLen:()=>Dke,squaredDistance:()=>XQ,squaredLength:()=>YQ,str:()=>Ske,sub:()=>Eke,subtract:()=>GQ,transformMat2:()=>mke,transformMat2d:()=>yke,transformMat3:()=>gke,transformMat4:()=>xke,zero:()=>_ke});function jQ(){var e=new Da(2);return Da!=Float32Array&&(e[0]=0,e[1]=0),e}function YFe(e){var t=new Da(2);return t[0]=e[0],t[1]=e[1],t}function JFe(e,t){var r=new Da(2);return r[0]=e,r[1]=t,r}function KFe(e,t){return e[0]=t[0],e[1]=t[1],e}function QFe(e,t,r){return e[0]=t,e[1]=r,e}function eke(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function GQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function HQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function ZQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function tke(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function rke(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function nke(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function ike(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function oke(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ake(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function ske(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function WQ(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function XQ(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function qQ(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function YQ(e){var t=e[0],r=e[1];return t*t+r*r}function lke(e,t){return e[0]=-t[0],e[1]=-t[1],e}function uke(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function cke(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function pke(e,t){return e[0]*t[0]+e[1]*t[1]}function dke(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function fke(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function hke(e,t){t=t||1;var r=FQ()*2*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function mke(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function yke(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function gke(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function xke(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function bke(e,t,r,n){var i=t[0]-r[0],o=t[1]-r[1],a=Math.sin(n),s=Math.cos(n);return e[0]=i*s-o*a+r[0],e[1]=i*a+o*s+r[1],e}function vke(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+o*o),s=a&&(r*i+n*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function _ke(e){return e[0]=0,e[1]=0,e}function Ske(e){return"vec2("+e[0]+", "+e[1]+")"}function wke(e,t){return e[0]===t[0]&&e[1]===t[1]}function Tke(e,t){var r=e[0],n=e[1],i=t[0],o=t[1];return Math.abs(r-i)<=vr*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=vr*Math.max(1,Math.abs(n),Math.abs(o))}var Ike,Eke,Cke,Pke,Mke,Ake,Dke,Lke,JQ=f(()=>{nR();Ike=qQ,Eke=GQ,Cke=HQ,Pke=ZQ,Mke=WQ,Ake=XQ,Dke=YQ,Lke=function(){var e=jQ();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}()});var iR=f(()=>{VQ();JQ()});var Ot=f(()=>{});var tp=f(()=>{Ot()});function aR(e){if(e<=0)return 0;if(e>=1)return 1;let t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function aE(e,t,r,n){let i=new eee.default(e,t,r,n);return o=>i.solve(o)}function Zr(e,t,r){return Math.min(r,Math.max(t,e))}function Qm(e,t,r){let n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function ree(e,t){let r=[];for(let n in e)n in t||r.push(n);return r}function we(e,...t){for(let r of t)for(let n in r)e[n]=r[n];return e}function rp(e,t){let r={};for(let n=0;n<t.length;n++){let i=t[n];i in e&&(r[i]=e[i])}return r}function sR(){return kke++}function Oi(e){return Math.log(e)/Math.LN2}function lR(e,t,r){let n={};for(let i in e)n[i]=t.call(r||this,e[i],i,e);return n}function Cr(e){KQ[e]||(typeof console<"u"&&console.warn(e),KQ[e]=!0)}function gb(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function Uu(e){return typeof WorkerGlobalScope<"u"&&typeof e<"u"&&e instanceof WorkerGlobalScope}function nee(e){let t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,r={};if(e.replace(t,(n,i,o,a)=>{let s=o||a;return r[i]=s?s.toLowerCase():!0,""}),r["max-age"]){let n=parseInt(r["max-age"],10);isNaN(n)?delete r["max-age"]:r["max-age"]=n}return r}function iee(e){if(oR==null){let t=e.navigator?e.navigator.userAgent:null;oR=!!e.safari||!!(t&&(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return oR}function Ts(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function Oke(e,t,r,n,i){let o=Math.max(-t,0)*4,l=(Math.max(0,r)-r)*n*4+o,u=n*4,c=Math.max(0,t),p=Math.max(0,r),d=Math.min(e.width,t+n),h=Math.min(e.height,r+i);return{rect:{x:c,y:p,width:d-c,height:h-p},layout:[{offset:l,stride:u}]}}async function see(e,t,r,n,i){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let o=new VideoFrame(e,{timestamp:0});try{let a=o?.format;if(!a||!(a.startsWith("BGR")||a.startsWith("RGB")))throw new Error(`Unrecognized format ${a}`);let s=a.startsWith("BGR"),l=new Uint8ClampedArray(n*i*4);if(await o.copyTo(l,Oke(e,t,r,n,i)),s)for(let u=0;u<l.length;u+=4){let c=l[u];l[u]=l[u+2],l[u+2]=c}return l}finally{o.close()}}function xb(e,t,r,n){return e.addEventListener(t,r,n),{unsubscribe:()=>{e.removeEventListener(t,r,n)}}}function qo(e){return e*Math.PI/180}var Fke,eee,tee,kke,KQ,oR,oee,QQ,aee,ey,sE,ne=f(()=>{Fke=Ie($e(),1),eee=Ie(LQ(),1);rR();tp();tee=aE(.25,.1,.25,1);kke=1;KQ={};oR=null;oee=async e=>{if(e.byteLength===0)return createImageBitmap(new ImageData(1,1));let t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}},QQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",aee=e=>new Promise((t,r)=>{let n=new Image;n.onload=()=>{t(n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame(()=>{n.src=QQ})},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let i=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?URL.createObjectURL(i):QQ});ey=25,sE=0});function Vd(){return new Error(Rke)}var Rke,bb=f(()=>{Rke="AbortError"});var Bke,lE,uR,Rt,tn=f(()=>{bb();ne();Bke=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),Rt={now:Bke,frame(e,t,r){let n=requestAnimationFrame(o=>{i(),t(o)}),{unsubscribe:i}=xb(e.signal,"abort",()=>{i(),cancelAnimationFrame(n),r(Vd())},!1)},frameAsync(e){return new Promise((t,r)=>{this.frame(e,t,r)})},getImageData(e,t=0){return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){let t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r},resolveURL(e){return lE||(lE=document.createElement("a")),lE.href=e,lE.href},hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return matchMedia?(uR==null&&(uR=matchMedia("(prefers-reduced-motion: reduce)")),uR.matches):!1}}});var lee,Et,Wr,rn=f(()=>{lee=Ie($e(),1),Et=class Et{static testProp(t){if(!Et.docStyle)return t[0];for(let r=0;r<t.length;r++)if(t[r]in Et.docStyle)return t[r];return t[0]}static create(t,r,n){let i=window.document.createElement(t);return r!==void 0&&(i.className=r),n&&n.appendChild(i),i}static createNS(t,r){return window.document.createElementNS(t,r)}static disableDrag(){Et.docStyle&&Et.selectProp&&(Et.userSelect=Et.docStyle[Et.selectProp],Et.docStyle[Et.selectProp]="none")}static enableDrag(){Et.docStyle&&Et.selectProp&&(Et.docStyle[Et.selectProp]=Et.userSelect)}static setTransform(t,r){t.style[Et.transformProp]=r}static addEventListener(t,r,n,i={}){"passive"in i?t.addEventListener(r,n,i):t.addEventListener(r,n,i.capture)}static removeEventListener(t,r,n,i={}){"passive"in i?t.removeEventListener(r,n,i):t.removeEventListener(r,n,i.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",Et.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Et.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Et.suppressClickInternal,!0)},0)}static getScale(t){let r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}static getPoint(t,r,n){let i=r.boundingClientRect;return new lee.default((n.clientX-i.left)/r.x-t.clientLeft,(n.clientY-i.top)/r.y-t.clientTop)}static mousePos(t,r){let n=Et.getScale(t);return Et.getPoint(t,n,r)}static touchPos(t,r){let n=[],i=Et.getScale(t);for(let o=0;o<r.length;o++)n.push(Et.getPoint(t,i,r[o]));return n}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){let i=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),o=i.querySelectorAll("script");for(let a of o)a.remove();return Et.clean(i),i.innerHTML}static isPossiblyDangerous(t,r){let n=r.replace(/\s+/g,"").toLowerCase();if(["src","href","xlink:href"].includes(t)&&(n.includes("javascript:")||n.includes("data:"))||t.startsWith("on"))return!0}static clean(t){let r=t.children;for(let n of r)Et.removeAttributes(n),Et.clean(n)}static removeAttributes(t){for(let{name:r,value:n}of t.attributes)Et.isPossiblyDangerous(r,n)&&t.removeAttribute(r)}};Et.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Et.selectProp=Et.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Et.transformProp=Et.testProp(["transform","WebkitTransform"]);Wr=Et});var Yo,jd=f(()=>{Yo={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""}});function uE(e){return Yo.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}var cE=f(()=>{jd()});var $u=f(()=>{});async function Nke(e,t){let r=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:cR(),signal:t.signal});e.type==="json"&&!r.headers.has("Accept")&&r.headers.set("Accept","application/json");let n;try{n=await fetch(r)}catch(a){throw new np(0,a.message,e.url,new Blob)}if(!n.ok){let a=await n.blob();throw new np(n.status,n.statusText,e.url,a)}let i;e.type==="arrayBuffer"||e.type==="image"?i=n.arrayBuffer():e.type==="json"?i=n.json():i=n.text();let o=await i;if(t.signal.aborted)throw Vd();return{data:o,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}function Uke(e,t){return new Promise((r,n)=>{let i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),(e.type==="arrayBuffer"||e.type==="image")&&(i.responseType="arraybuffer");for(let o in e.headers)i.setRequestHeader(o,e.headers[o]);e.type==="json"&&(i.responseType="text",e.headers?.Accept||i.setRequestHeader("Accept","application/json")),i.withCredentials=e.credentials==="include",i.onerror=()=>{n(new Error(i.statusText))},i.onload=()=>{if(!t.signal.aborted)if((i.status>=200&&i.status<300||i.status===0)&&i.response!==null){let o=i.response;if(e.type==="json")try{o=JSON.parse(i.response)}catch(a){n(a);return}r({data:o,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")})}else{let o=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});n(new np(i.status,i.statusText,e.url,o))}},t.signal.addEventListener("abort",()=>{i.abort(),n(Vd())}),i.send(e.body)})}function pR(e){if(!e||e.indexOf("://")<=0||e.indexOf("data:image/")===0||e.indexOf("blob:")===0)return!0;let t=new URL(e),r=window.location;return t.protocol===r.protocol&&t.host===r.host}var pE,np,cR,zke,ty,vb,uee,cee,Is=f(()=>{ne();bb();cE();$u();pE="global-dispatcher",np=class extends Error{constructor(t,r,n,i){super(`AJAXError: ${r} (${t}): ${n}`),this.status=t,this.statusText=r,this.url=n,this.body=i}},cR=()=>Uu(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,zke=e=>/^file:/.test(e)||/^file:/.test(cR())&&!/^\w+:/.test(e);ty=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){let r=uE(e.url);if(r)return r(e,t);if(Uu(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:pE},t)}if(!zke(e.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Nke(e,t);if(Uu(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:pE},t)}return Uke(e,t)},vb=(e,t)=>ty(we(e,{type:"json"}),t),uee=(e,t)=>ty(we(e,{type:"arrayBuffer"}),t);cee=e=>{let t=window.document.createElement("video");return t.muted=!0,new Promise(r=>{t.onloadstart=()=>{r(t)};for(let n of e){let i=window.document.createElement("source");pR(n)||(t.crossOrigin="Anonymous"),i.src=n,t.appendChild(i)}})}});function $ke(e){dR||!ry||(pee?dee(e):_b=e)}function dee(e){let t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ry),e.isContextLost())return;dE.supported=!0}catch{}e.deleteTexture(t),dR=!0}var dE,_b,dR,ry,pee,fR=f(()=>{dE={supported:!1,testSupport:$ke},dR=!1,pee=!1;typeof document<"u"&&(ry=document.createElement("img"),ry.onload=()=>{_b&&dee(_b),_b=null,pee=!0},ry.onerror=()=>{dR=!0,_b=null},ry.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=")});var Es,ny=f(()=>{Is();ne();fR();jd();bb();cE();(h=>{let e,t,r,n;h.resetRequestQueue=()=>{e=[],t=0,r=0,n={}},h.addThrottleControl=m=>{let x=r++;return n[x]=m,x},h.removeThrottleControl=m=>{delete n[m],p()};let s=()=>{for(let m of Object.keys(n))if(n[m]())return!0;return!1};h.getImage=(m,x,b=!0)=>new Promise((_,T)=>{dE.supported&&(m.headers||(m.headers={}),m.headers.accept="image/webp,*/*"),we(m,{type:"image"});let I={abortController:x,requestParameters:m,supportImageRefresh:b,state:"queued",onError:S=>{T(S)},onSuccess:S=>{_(S)}};e.push(I),p()});let u=m=>typeof createImageBitmap=="function"?oee(m):aee(m),c=async m=>{m.state="running";let{requestParameters:x,supportImageRefresh:b,onError:_,onSuccess:T,abortController:I}=m,S=b===!1&&!Uu(self)&&!uE(x.url)&&(!x.headers||Object.keys(x.headers).reduce((P,L)=>P&&L==="accept",!0));t++;let E=S?d(x,I):ty(x,I);try{let P=await E;if(delete m.abortController,m.state="completed",P.data instanceof HTMLImageElement||Ts(P.data))T(P);else if(P.data){let L=await u(P.data);T({data:L,cacheControl:P.cacheControl,expires:P.expires})}}catch(P){delete m.abortController,_(P)}finally{t--,p()}},p=()=>{let m=s()?Yo.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:Yo.MAX_PARALLEL_IMAGE_REQUESTS;for(let x=t;x<m&&e.length>0;x++){let b=e.shift();if(b.abortController.signal.aborted){x--;continue}c(b)}},d=(m,x)=>new Promise((b,_)=>{let T=new Image,I=m.url,S=m.credentials;S&&S==="include"?T.crossOrigin="use-credentials":(S&&S==="same-origin"||!pR(I))&&(T.crossOrigin="anonymous"),x.signal.addEventListener("abort",()=>{T.src="",_(Vd())}),T.fetchPriority="high",T.onload=()=>{T.onerror=T.onload=null,b({data:T})},T.onerror=()=>{T.onerror=T.onload=null,!x.signal.aborted&&_(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},T.src=I})})(Es||(Es={}));Es.resetRequestQueue()});var La=f(()=>{});function fee(e,t,r){r[e]&&r[e].indexOf(t)!==-1||(r[e]=r[e]||[],r[e].push(t))}function hR(e,t,r){if(r&&r[e]){let n=r[e].indexOf(t);n!==-1&&r[e].splice(n,1)}}var ze,rr,nr,qt=f(()=>{ne();ze=class{constructor(t,r={}){we(this,r),this.type=t}},rr=class extends ze{constructor(t,r={}){super("error",we({error:t},r))}},nr=class{on(t,r){return this._listeners=this._listeners||{},fee(t,r,this._listeners),{unsubscribe:()=>{this.off(t,r)}}}off(t,r){return hR(t,r,this._listeners),hR(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},fee(t,r,this._oneTimeListeners),this):new Promise(n=>this.once(t,n))}fire(t,r){typeof t=="string"&&(t=new ze(t,r||{}));let n=t.type;if(this.listens(n)){t.target=this;let i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(let s of i)s.call(this,t);let o=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(let s of o)hR(n,s,this._oneTimeListeners),s.call(this,t);let a=this._eventedParent;a&&(we(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),a.fire(t))}else t instanceof rr&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}});function sy(e,...t){for(let r of t)for(let n in r)e[n]=r[n];return e}function Jo(e,t){return{kind:"array",itemType:e,N:t}}function Pr(e){if(e.kind==="array"){let t=Pr(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}function Eb(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Eb(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(let r of MOe)if(!Eb(r,t))return null}}return`Expected ${Pr(e)} but found ${Pr(t)} instead.`}function VR(e,t){return t.some(r=>r.kind===e.kind)}function Xd(e,t){return t.some(r=>r==="null"?e===null:r==="array"?Array.isArray(e):r==="object"?e&&!Array.isArray(e)&&typeof e=="object":r===typeof e)}function ip(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}function Nee(e){return e=e%360,e<0&&(e+=360),e}function Uee([e,t,r,n]){e=mR(e),t=mR(t),r=mR(r);let i,o,a=yR((.2225045*e+.7168786*t+.0606169*r)/Oee);e===t&&t===r?i=o=a:(i=yR((.4360747*e+.3850649*t+.1430804*r)/kee),o=yR((.0139322*e+.0971045*t+.7141733*r)/Ree));let s=116*a-16;return[s<0?0:s,500*(i-a),200*(a-o),n]}function mR(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yR(e){return e>AOe?Math.pow(e,1/3):e/zee+Bee}function $ee([e,t,r,n]){let i=(e+16)/116,o=isNaN(t)?i:i+t/500,a=isNaN(r)?i:i-r/200;return i=Oee*xR(i),o=kee*xR(o),a=Ree*xR(a),[gR(3.1338561*o-1.6168667*i-.4906146*a),gR(-.9787684*o+1.9161415*i+.033454*a),gR(.0719453*o-.2289914*i+1.4052427*a),n]}function gR(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function xR(e){return e>ay?e*e*e:zee*(e-Bee)}function FOe(e){let[t,r,n,i]=Uee(e),o=Math.sqrt(r*r+n*n);return[Math.round(o*1e4)?Nee(Math.atan2(n,r)*LOe):NaN,o,t,i]}function kOe([e,t,r,n]){return e=isNaN(e)?0:e*DOe,$ee([r,Math.cos(e)*t,Math.sin(e)*t,n])}function OOe([e,t,r,n]){e=Nee(e),t/=100,r/=100;function i(o){let a=(o+e/30)%12,s=t*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),n]}function wb(e,t){return ROe(e,t)?e[t]:void 0}function BOe(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t=wb(zOe,e);if(t){let[i,o,a]=t;return[i/255,o/255,a/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){let o=e.length<6?1:2,a=1;return[fE(e.slice(a,a+=o)),fE(e.slice(a,a+=o)),fE(e.slice(a,a+=o)),fE(e.slice(a,a+o)||"ff")]}if(e.startsWith("rgb")){let i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=e.match(i);if(o){let[a,s,l,u,c,p,d,h,m,x,b,_]=o,T=[u||" ",d||" ",x].join("");if(T==="  "||T==="  /"||T===",,"||T===",,,"){let I=[l,p,m].join(""),S=I==="%%%"?100:I===""?255:0;if(S){let E=[iy(+s/S,0,1),iy(+c/S,0,1),iy(+h/S,0,1),b?hee(+b,_):1];if(mee(E))return E}}return}}let r=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=e.match(r);if(n){let[i,o,a,s,l,u,c,p,d]=n,h=[a||" ",l||" ",c].join("");if(h==="  "||h==="  /"||h===",,"||h===",,,"){let m=[+o,iy(+s,0,100),iy(+u,0,100),p?hee(+p,d):1];if(mee(m))return OOe(m)}}}function fE(e){return parseInt(e.padEnd(2,e),16)/255}function hee(e,t){return iy(t?e/100:e,0,1)}function iy(e,t,r){return Math.min(Math.max(t,e),r)}function mee(e){return!e.some(Number.isNaN)}function ap(e,t,r){return e+r*(t-e)}function ly(e,t,r){return e.map((n,i)=>ap(n,t[i],r))}function NOe(e){return e==="rgb"||e==="hcl"||e==="lab"}function Vee(e,t,r,n){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Mb(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof Vu||e instanceof Ve||e instanceof Cb||e instanceof Ms||e instanceof Oa||e instanceof Ra||e instanceof fo||e instanceof Pl||e instanceof ho)return!0;if(Array.isArray(e)){for(let t of e)if(!Mb(t))return!1;return!0}else if(typeof e=="object"){for(let t in e)if(!Mb(e[t]))return!1;return!0}else return!1}function fn(e){if(e===null)return hy;if(typeof e=="string")return Je;if(typeof e=="boolean")return Ze;if(typeof e=="number")return oe;if(e instanceof Ve)return El;if(e instanceof Vu)return LE;if(e instanceof Cb)return FE;if(e instanceof Ms)return kE;if(e instanceof Oa)return OE;if(e instanceof Ra)return RE;if(e instanceof fo)return Ib;if(e instanceof Pl)return BE;if(e instanceof ho)return Nb;if(Array.isArray(e)){let t=e.length,r;for(let n of e){let i=fn(n);if(!r)r=i;else{if(r===i)continue;r=Ge;break}}return Jo(r||Ge,t)}else return Wd}function Tb(e){let t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Ve||e instanceof Vu||e instanceof Ms||e instanceof Oa||e instanceof Ra||e instanceof fo||e instanceof Pl||e instanceof ho?e.toString():JSON.stringify(e)}function zE(e,t){let r=e.length-1,n=0,i=r,o=0,a,s;for(;n<=i;)if(o=Math.floor((n+i)/2),a=e[o],s=e[o+1],a<=t){if(o===r||t<s)return o;n=o+1}else if(a>t)i=o-1;else throw new _r("Input is not a number.");return 0}function jOe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GOe(){if(gee)return bR;gee=1,bR=e;function e(t,r,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(i-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=i}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,r){if(r===void 0&&(r=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var o=this.sampleCurveX(n)-t;if(Math.abs(o)<r)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n=n-o/a}var s=0,l=1;for(n=t,i=0;i<20&&(o=this.sampleCurveX(n),!(Math.abs(o-t)<r));i++)t>o?s=n:l=n,n=(l-s)*.5+s;return n},solve:function(t,r){return this.sampleCurveY(this.solveCurveX(t,r))}},bR}function vR(e,t,r,n){let i=n-r,o=e-r;return i===0?0:t===1?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}function xee(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function WOe(e,t,r){return t===r}function XOe(e,t,r){return t!==r}function qOe(e,t,r){return t<r}function YOe(e,t,r){return t>r}function JOe(e,t,r){return t<=r}function KOe(e,t,r){return t>=r}function jee(e,t,r,n){return n.compare(t,r)===0}function QOe(e,t,r,n){return!jee(e,t,r,n)}function e6e(e,t,r,n){return n.compare(t,r)<0}function t6e(e,t,r,n){return n.compare(t,r)>0}function r6e(e,t,r,n){return n.compare(t,r)<=0}function n6e(e,t,r,n){return n.compare(t,r)>=0}function my(e,t,r){let n=e!=="=="&&e!=="!=";return class Gee{constructor(o,a,s){this.type=Ze,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");let s=o[0],l=a.parse(o[1],1,Ge);if(!l)return null;if(!xee(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type '${Pr(l.type)}'.`);let u=a.parse(o[2],2,Ge);if(!u)return null;if(!xee(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type '${Pr(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types '${Pr(l.type)}' and '${Pr(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new Cs(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new Cs(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,FE),!c)return null}return new Gee(l,u,c)}evaluate(o){let a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){let l=fn(a),u=fn(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new _r(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){let l=fn(a),u=fn(s);if(l.kind!=="string"||u.kind!=="string")return t(o,a,s)}return this.collator?r(o,a,s,this.collator.evaluate(o)):t(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}function c6e(e,t){let r=p6e(e[0]),n=f6e(e[1]),i=Math.pow(2,t.z);return[Math.round(r*i*Cl),Math.round(n*i*Cl)]}function jR(e,t){let r=Math.pow(2,t.z),n=(e[0]/Cl+t.x)/r,i=(e[1]/Cl+t.y)/r;return[d6e(n),h6e(i)]}function p6e(e){return(180+e)/360}function d6e(e){return e*360-180}function f6e(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function h6e(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Ub(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ab(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function m6e(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function y6e(e,t,r){let n=e[0]-t[0],i=e[1]-t[1],o=e[0]-r[0],a=e[1]-r[1];return n*a-o*i===0&&n*o<=0&&i*a<=0}function UE(e,t,r,n){let i=[t[0]-e[0],t[1]-e[1]],o=[n[0]-r[0],n[1]-r[1]];return v6e(o,i)===0?!1:!!(bee(e,t,r,n)&&bee(r,n,e,t))}function g6e(e,t,r){for(let n of r)for(let i=0;i<n.length-1;++i)if(UE(e,t,n[i],n[i+1]))return!0;return!1}function yy(e,t,r=!1){let n=!1;for(let i of t)for(let o=0;o<i.length-1;o++){if(y6e(e,i[o],i[o+1]))return r;m6e(e,i[o],i[o+1])&&(n=!n)}return n}function x6e(e,t){for(let r of t)if(yy(e,r))return!0;return!1}function Hee(e,t){for(let r of e)if(!yy(r,t))return!1;for(let r=0;r<e.length-1;++r)if(g6e(e[r],e[r+1],t))return!1;return!0}function b6e(e,t){for(let r of t)if(Hee(e,r))return!0;return!1}function v6e(e,t){return e[0]*t[1]-e[1]*t[0]}function bee(e,t,r,n){let i=e[0]-r[0],o=e[1]-r[1],a=t[0]-r[0],s=t[1]-r[1],l=n[0]-r[0],u=n[1]-r[1],c=i*u-l*o,p=a*u-l*s;return c>0&&p<0||c<0&&p>0}function GR(e,t,r){let n=[];for(let i=0;i<e.length;i++){let o=[];for(let a=0;a<e[i].length;a++){let s=c6e(e[i][a],r);Ub(t,s),o.push(s)}n.push(o)}return n}function Zee(e,t,r){let n=[];for(let i=0;i<e.length;i++){let o=GR(e[i],t,r);n.push(o)}return n}function Wee(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){let i=n*.5,o=e[0]-r[0]>i?-n:r[0]-e[0]>i?n:0;o===0&&(o=e[0]-r[2]>i?-n:r[2]-e[0]>i?n:0),e[0]+=o}Ub(t,e)}function _6e(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function vee(e,t,r,n){let i=Math.pow(2,n.z)*Cl,o=[n.x*Cl,n.y*Cl],a=[];for(let s of e)for(let l of s){let u=[l.x+o[0],l.y+o[1]];Wee(u,t,r,i),a.push(u)}return a}function _ee(e,t,r,n){let i=Math.pow(2,n.z)*Cl,o=[n.x*Cl,n.y*Cl],a=[];for(let s of e){let l=[];for(let u of s){let c=[u.x+o[0],u.y+o[1]];Ub(t,c),l.push(c)}a.push(l)}if(t[2]-t[0]<=i/2){_6e(t);for(let s of a)for(let l of s)Wee(l,t,r,i)}return a}function S6e(e,t){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(t.type==="Polygon"){let o=GR(t.coordinates,n,i),a=vee(e.geometry(),r,n,i);if(!Ab(r,n))return!1;for(let s of a)if(!yy(s,o))return!1}if(t.type==="MultiPolygon"){let o=Zee(t.coordinates,n,i),a=vee(e.geometry(),r,n,i);if(!Ab(r,n))return!1;for(let s of a)if(!x6e(s,o))return!1}return!0}function w6e(e,t){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(t.type==="Polygon"){let o=GR(t.coordinates,n,i),a=_ee(e.geometry(),r,n,i);if(!Ab(r,n))return!1;for(let s of a)if(!Hee(s,o))return!1}if(t.type==="MultiPolygon"){let o=Zee(t.coordinates,n,i),a=_ee(e.geometry(),r,n,i);if(!Ab(r,n))return!1;for(let s of a)if(!b6e(s,o))return!1}return!0}function Xee(e,t,r=0,n=e.length-1,i=T6e){for(;n>r;){if(n-r>600){let l=n-r+1,u=t-r+1,c=Math.log(l),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1),h=Math.max(r,Math.floor(t-u*p/l+d)),m=Math.min(n,Math.floor(t+(l-u)*p/l+d));Xee(e,t,h,m,i)}let o=e[t],a=r,s=n;for(Sb(e,r,t),i(e[n],o)>0&&Sb(e,r,n);a<s;){for(Sb(e,a,s),a++,s--;i(e[a],o)<0;)a++;for(;i(e[s],o)>0;)s--}i(e[r],o)===0?Sb(e,r,s):(s++,Sb(e,s,n)),s<=t&&(r=s+1),t<=s&&(n=s-1)}}function Sb(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function T6e(e,t){return e<t?-1:e>t?1:0}function $b(e,t){if(e.length<=1)return[e];let n=[],i,o;for(let a of e){let s=E6e(a);s!==0&&(a.area=Math.abs(s),o===void 0&&(o=s<0),o===s<0?(i&&n.push(i),i=[a]):i.push(a))}if(i&&n.push(i),t>1)for(let a=0;a<n.length;a++)n[a].length<=t||(Xee(n[a],t,1,n[a].length-1,I6e),n[a]=n[a].slice(0,t));return n}function I6e(e,t){return t.area-e.area}function E6e(e){let t=0;for(let r=0,n=e.length,i=n-1,o,a;r<n;i=r++)o=e[r],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t}function qee(e,t){return t[0]-e[0]}function EE(e){return e[1]-e[0]+1}function ju(e,t){return e[1]>=e[0]&&e[1]<t}function BR(e,t){if(e[0]>e[1])return[null,null];let r=EE(e);if(t){if(r===2)return[e,null];let i=Math.floor(r/2);return[[e[0],e[0]+i],[e[0]+i,e[1]]]}if(r===1)return[e,null];let n=Math.floor(r/2)-1;return[[e[0],e[0]+n],[e[0]+n+1,e[1]]]}function zR(e,t){if(!ju(t,e.length))return[1/0,1/0,-1/0,-1/0];let r=[1/0,1/0,-1/0,-1/0];for(let n=t[0];n<=t[1];++n)Ub(r,e[n]);return r}function NR(e){let t=[1/0,1/0,-1/0,-1/0];for(let r of e)for(let n of r)Ub(t,n);return t}function Iee(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function HR(e,t,r){if(!Iee(e)||!Iee(t))return NaN;let n=0,i=0;return e[2]<t[0]&&(n=t[0]-e[2]),e[0]>t[2]&&(n=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),r.distance([0,0],[n,i])}function Zd(e,t,r){let n=r.pointOnLine(t,e);return r.distance(e,n.point)}function ZR(e,t,r,n,i){let o=Math.min(Zd(e,[r,n],i),Zd(t,[r,n],i)),a=Math.min(Zd(r,[e,t],i),Zd(n,[e,t],i));return Math.min(o,a)}function P6e(e,t,r,n,i){if(!(ju(t,e.length)&&ju(n,r.length)))return 1/0;let a=1/0;for(let s=t[0];s<t[1];++s){let l=e[s],u=e[s+1];for(let c=n[0];c<n[1];++c){let p=r[c],d=r[c+1];if(UE(l,u,p,d))return 0;a=Math.min(a,ZR(l,u,p,d,i))}}return a}function M6e(e,t,r,n,i){if(!(ju(t,e.length)&&ju(n,r.length)))return NaN;let a=1/0;for(let s=t[0];s<=t[1];++s)for(let l=n[0];l<=n[1];++l)if(a=Math.min(a,i.distance(e[s],r[l])),a===0)return a;return a}function A6e(e,t,r){if(yy(e,t,!0))return 0;let n=1/0;for(let i of t){let o=i[0],a=i[i.length-1];if(o!==a&&(n=Math.min(n,Zd(e,[a,o],r)),n===0))return n;let s=r.pointOnLine(i,e);if(n=Math.min(n,r.distance(e,s.point)),n===0)return n}return n}function D6e(e,t,r,n){if(!ju(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(yy(e[o],r,!0))return 0;let i=1/0;for(let o=t[0];o<t[1];++o){let a=e[o],s=e[o+1];for(let l of r)for(let u=0,c=l.length,p=c-1;u<c;p=u++){let d=l[p],h=l[u];if(UE(a,s,d,h))return 0;i=Math.min(i,ZR(a,s,d,h,n))}}return i}function Eee(e,t){for(let r of e)for(let n of r)if(yy(n,t,!0))return!0;return!1}function L6e(e,t,r,n=1/0){let i=NR(e),o=NR(t);if(n!==1/0&&HR(i,o,r)>=n)return n;if(Ab(i,o)){if(Eee(e,t))return 0}else if(Eee(t,e))return 0;let a=1/0;for(let s of e)for(let l=0,u=s.length,c=u-1;l<u;c=l++){let p=s[c],d=s[l];for(let h of t)for(let m=0,x=h.length,b=x-1;m<x;b=m++){let _=h[b],T=h[m];if(UE(p,d,_,T))return 0;a=Math.min(a,ZR(p,d,_,T,r))}}return a}function Cee(e,t,r,n,i,o){if(!o)return;let a=HR(zR(n,o),i,r);a<t&&e.push([a,o,[0,0]])}function mE(e,t,r,n,i,o,a){if(!o||!a)return;let s=HR(zR(n,o),zR(i,a),r);s<t&&e.push([s,o,a])}function CE(e,t,r,n,i=1/0){let o=Math.min(n.distance(e[0],r[0][0]),i);if(o===0)return o;let a=new IE([[0,[0,e.length-1],[0,0]]],qee),s=NR(r);for(;a.length>0;){let l=a.pop();if(l[0]>=o)continue;let u=l[1],c=t?RR:OR;if(EE(u)<=c){if(!ju(u,e.length))return NaN;if(t){let p=D6e(e,u,r,n);if(isNaN(p)||p===0)return p;o=Math.min(o,p)}else for(let p=u[0];p<=u[1];++p){let d=A6e(e[p],r,n);if(o=Math.min(o,d),o===0)return 0}}else{let p=BR(u,t);Cee(a,o,n,e,s,p[0]),Cee(a,o,n,e,s,p[1])}}return o}function PE(e,t,r,n,i,o=1/0){let a=Math.min(o,i.distance(e[0],r[0]));if(a===0)return a;let s=new IE([[0,[0,e.length-1],[0,r.length-1]]],qee);for(;s.length>0;){let l=s.pop();if(l[0]>=a)continue;let u=l[1],c=l[2],p=t?RR:OR,d=n?RR:OR;if(EE(u)<=p&&EE(c)<=d){if(!ju(u,e.length)&&ju(c,r.length))return NaN;let h;if(t&&n)h=P6e(e,u,r,c,i),a=Math.min(a,h);else if(t&&!n){let m=e.slice(u[0],u[1]+1);for(let x=c[0];x<=c[1];++x)if(h=Zd(r[x],m,i),a=Math.min(a,h),a===0)return a}else if(!t&&n){let m=r.slice(c[0],c[1]+1);for(let x=u[0];x<=u[1];++x)if(h=Zd(e[x],m,i),a=Math.min(a,h),a===0)return a}else h=M6e(e,u,r,c,i),a=Math.min(a,h)}else{let h=BR(u,t),m=BR(c,n);mE(s,a,i,e,r,h[0],m[0]),mE(s,a,i,e,r,h[0],m[1]),mE(s,a,i,e,r,h[1],m[0]),mE(s,a,i,e,r,h[1],m[1])}}return a}function F6e(e,t){let r=e.geometry(),n=r.flat().map(a=>jR([a.x,a.y],e.canonical));if(r.length===0)return NaN;let i=new Lb(n[0][1]),o=1/0;for(let a of t){switch(a.type){case"Point":o=Math.min(o,PE(n,!1,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,PE(n,!1,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,CE(n,!1,a.coordinates,i,o));break}if(o===0)return o}return o}function k6e(e,t){let r=e.geometry(),n=r.flat().map(a=>jR([a.x,a.y],e.canonical));if(r.length===0)return NaN;let i=new Lb(n[0][1]),o=1/0;for(let a of t){switch(a.type){case"Point":o=Math.min(o,PE(n,!0,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,PE(n,!0,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,CE(n,!0,a.coordinates,i,o));break}if(o===0)return o}return o}function O6e(e,t){let r=e.geometry();if(r.length===0||r[0].length===0)return NaN;let n=$b(r,0).map(a=>a.map(s=>s.map(l=>jR([l.x,l.y],e.canonical)))),i=new Lb(n[0][0][0][1]),o=1/0;for(let a of t)for(let s of n){switch(a.type){case"Point":o=Math.min(o,CE([a.coordinates],!1,s,i,o));break;case"LineString":o=Math.min(o,CE(a.coordinates,!0,s,i,o));break;case"Polygon":o=Math.min(o,L6e(s,a.coordinates,i,o));break}if(o===0)return o}return o}function _R(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}function Pee(e,[t,r,n,i]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);let o=i?i.evaluate(e):1,a=Vee(t,r,n,o);if(a)throw new _r(a);return new Ve(t/255,r/255,n/255,o,!1)}function Mee(e,t){return e in t}function SR(e,t){let r=t[e];return typeof r>"u"?null:r}function R6e(e,t,r,n){for(;r<=n;){let i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}function Hd(e){return{type:e}}function B6e(e){return Array.isArray(e)?`(${e.map(Pr).join(", ")})`:`(${Pr(e.type)}...)`}function ME(e){if(e instanceof _E)return ME(e.boundExpression);if(e instanceof Ml&&e.name==="error")return!1;if(e instanceof TE)return!1;if(e instanceof Db)return!1;if(e instanceof Fb)return!1;if(e instanceof kb)return!1;let t=e instanceof op||e instanceof Cs,r=!0;return e.eachChild(n=>{t?r=r&&ME(n):r=r&&n instanceof uy}),r?$E(e)&&VE(e,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function $E(e){if(e instanceof Ml){if(e.name==="get"&&e.args.length===1)return!1;if(e.name==="feature-state")return!1;if(e.name==="has"&&e.args.length===1)return!1;if(e.name==="properties"||e.name==="geometry-type"||e.name==="id")return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Db||e instanceof Fb)return!1;let t=!0;return e.eachChild(r=>{t&&!$E(r)&&(t=!1)}),t}function Ob(e){if(e instanceof Ml&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(r=>{t&&!Ob(r)&&(t=!1)}),t}function VE(e,t){if(e instanceof Ml&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild(n=>{r&&!VE(n,t)&&(r=!1)}),r}function UR(e){return{result:"success",value:e}}function oy(e){return{result:"error",value:e}}function cy(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Yee(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function WR(e){return!!e.expression&&e.expression.interpolated}function Ke(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function jE(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&fn(e)===Wd}function z6e(e){return e}function N6e(e){switch(e.type){case"color":return Ve.parse;case"padding":return Oa.parse;case"numberArray":return Ra.parse;case"colorArray":return fo.parse;default:return null}}function U6e(e){switch(e){case"exponential":return Kee;case"interval":return V6e;case"categorical":return $6e;case"identity":return j6e;default:throw new Error(`Unknown function type "${e}"`)}}function Jee(e,t){let r=e.stops&&typeof e.stops[0][0]=="object",n=r||e.property!==void 0,i=r||!n,o=e.type||(WR(t)?"exponential":"interval"),a=N6e(t);if(a&&(e=sy({},e),e.stops&&(e.stops=e.stops.map(c=>[c[0],a(c[1])])),e.default?e.default=a(e.default):e.default=a(t.default)),e.colorSpace&&!NOe(e.colorSpace))throw new Error(`Unknown color space: "${e.colorSpace}"`);let s=U6e(o),l,u;if(o==="categorical"){l=Object.create(null);for(let c of e.stops)l[c[0]]=c[1];u=typeof e.stops[0][0]}if(r){let c={},p=[];for(let m=0;m<e.stops.length;m++){let x=e.stops[m],b=x[0].zoom;c[b]===void 0&&(c[b]={zoom:b,type:e.type,property:e.property,default:e.default,stops:[]},p.push(b)),c[b].stops.push([x[0].value,x[1]])}let d=[];for(let m of p)d.push([c[m].zoom,Jee(c[m],t)]);let h={name:"linear"};return{kind:"composite",interpolationType:h,interpolationFactor:Ps.interpolationFactor.bind(void 0,h),zoomStops:d.map(m=>m[0]),evaluate({zoom:m},x){return Kee({stops:d,base:e.base},t,m).evaluate(m,x)}}}else if(i){let c=o==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:c,interpolationFactor:Ps.interpolationFactor.bind(void 0,c),zoomStops:e.stops.map(p=>p[0]),evaluate:({zoom:p})=>s(e,t,p,l,u)}}else return{kind:"source",evaluate(c,p){let d=p&&p.properties?p.properties[e.property]:void 0;return d===void 0?Vb(e.default,t.default):s(e,t,d,l,u)}}}function Vb(e,t,r){if(e!==void 0)return e;if(t!==void 0)return t;if(r!==void 0)return r}function $6e(e,t,r,n,i){let o=typeof r===i?n[r]:void 0;return Vb(o,e.default,t.default)}function V6e(e,t,r){if(Ke(r)!=="number")return Vb(e.default,t.default);let n=e.stops.length;if(n===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];let i=zE(e.stops.map(o=>o[0]),r);return e.stops[i][1]}function Kee(e,t,r){let n=e.base!==void 0?e.base:1;if(Ke(r)!=="number")return Vb(e.default,t.default);let i=e.stops.length;if(i===1||r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];let o=zE(e.stops.map(c=>c[0]),r),a=G6e(r,n,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],u=NE[t.type]||z6e;return typeof s.evaluate=="function"?{evaluate(...c){let p=s.evaluate.apply(void 0,c),d=l.evaluate.apply(void 0,c);if(!(p===void 0||d===void 0))return u(p,d,a,e.colorSpace)}}:u(s,l,a,e.colorSpace)}function j6e(e,t,r){switch(t.type){case"color":r=Ve.parse(r);break;case"formatted":r=Ms.fromString(r.toString());break;case"resolvedImage":r=ho.fromString(r.toString());break;case"padding":r=Oa.parse(r);break;case"colorArray":r=fo.parse(r);break;case"numberArray":r=Ra.parse(r);break;default:Ke(r)!==t.type&&(t.type!=="enum"||!t.values[r])&&(r=void 0)}return Vb(r,e.default,t.default)}function G6e(e,t,r,n){let i=n-r,o=e-r;return i===0?0:t===1?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}function XR(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Jd}function qR(e,t){let r=new bE(Jd,ME,[],t?H6e(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?UR(new Rb(n,t)):oy(r.errors)}function Qee(e,t){let r=qR(e,t);if(r.result==="error")return r;let n=r.value.expression,i=$E(n);if(!i&&!cy(t))return oy([new Fa("","data expressions not supported")]);let o=VE(n,["zoom"]);if(!o&&!Yee(t))return oy([new Fa("","zoom expressions not supported")]);let a=gE(n);if(!a&&!o)return oy([new Fa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(a instanceof Fa)return oy([a]);if(a instanceof Ps&&!WR(t))return oy([new Fa("",'"interpolate" expressions cannot be used with this property')]);if(!a)return UR(i?new py("constant",r.value):new py("source",r.value));let s=a instanceof Ps?a.interpolation:void 0;return UR(i?new dy("camera",r.value,a.labels,s):new dy("composite",r.value,a.labels,s))}function ete(e,t){if(jE(e))return new Bb(e,t);if(XR(e)){let r=Qee(e,t);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value}else{let r=e;return t.type==="color"&&typeof e=="string"?r=Ve.parse(e):t.type==="padding"&&(typeof e=="number"||Array.isArray(e))?r=Oa.parse(e):t.type==="numberArray"&&(typeof e=="number"||Array.isArray(e))?r=Ra.parse(e):t.type==="colorArray"&&(typeof e=="string"||Array.isArray(e))?r=fo.parse(e):t.type==="variableAnchorOffsetCollection"&&Array.isArray(e)?r=Pl.parse(e):t.type==="projectionDefinition"&&typeof e=="string"&&(r=Vu.parse(e)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>r}}}function gE(e){let t=null;if(e instanceof vE)t=gE(e.result);else if(e instanceof wE){for(let r of e.args)if(t=gE(r),t)break}else(e instanceof SE||e instanceof Ps)&&e.input instanceof Ml&&e.input.name==="zoom"&&(t=e);return t instanceof Fa||e.eachChild(r=>{let n=gE(r);n instanceof Fa?t=n:!t&&n?t=new Fa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new Fa("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function GE(e,t=new Set){return e instanceof kb&&t.add(e.key),e.eachChild(r=>{GE(r,t)}),t}function H6e(e){let t={color:El,string:Je,number:oe,enum:Je,boolean:Ze,formatted:kE,padding:OE,numberArray:RE,colorArray:Ib,projectionDefinition:LE,resolvedImage:Nb,variableAnchorOffsetCollection:BE};return e.type==="array"?Jo(t[e.value]||Ge,e.length):t[e.type]}function Z6e(e){if(e.type==="color"&&jE(e.default))return new Ve(0,0,0,0);switch(e.type){case"color":return Ve.parse(e.default)||null;case"padding":return Oa.parse(e.default)||null;case"numberArray":return Ra.parse(e.default)||null;case"colorArray":return fo.parse(e.default)||null;case"variableAnchorOffsetCollection":return Pl.parse(e.default)||null;case"projectionDefinition":return Vu.parse(e.default)||null;default:return e.default===void 0?null:e.default}}function YR(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(let t of e.slice(1))if(!YR(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function jb(e){if(e==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};YR(e)||(e=AE(e));let t=qR(e,W6e);if(t.result==="error")throw new Error(t.value.map(r=>`${r.key}: ${r.message}`).join(", "));{let r=tte(e);return{filter:(n,i,o)=>t.value.evaluate(n,i,{},o),needGeometry:r,getGlobalStateRefs:()=>GE(t.value.expression)}}}function X6e(e,t){return e<t?-1:e>t?1:0}function tte(e){if(!Array.isArray(e))return!1;if(e[0]==="within"||e[0]==="distance")return!0;for(let t=1;t<e.length;t++)if(tte(e[t]))return!0;return!1}function AE(e){if(!e)return!0;let t=e[0];return e.length<=1?t!=="any":t==="=="?wR(e[1],e[2],"=="):t==="!="?yE(wR(e[1],e[2],"==")):t==="<"||t===">"||t==="<="||t===">="?wR(e[1],e[2],t):t==="any"?q6e(e.slice(1)):t==="all"?["all"].concat(e.slice(1).map(AE)):t==="none"?["all"].concat(e.slice(1).map(AE).map(yE)):t==="in"?Aee(e[1],e.slice(2)):t==="!in"?yE(Aee(e[1],e.slice(2))):t==="has"?Dee(e[1]):t==="!has"?yE(Dee(e[1])):!0}function wR(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function q6e(e){return["any"].concat(e.map(AE))}function Aee(e,t){if(t.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(r=>typeof r!=typeof t[0])?["filter-in-large",e,["literal",t.sort(X6e)]]:["filter-in-small",e,["literal",t]]}}function Dee(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function yE(e){return["!",e]}function rte(){let e={},t=Ri.$version;for(let r in Ri.$root){let n=Ri.$root[r];if(n.required){let i=null;r==="version"?i=t:n.type==="array"?i=[]:i={},i!=null&&(e[r]=i)}}return e}function nte(e){let t=e.key,r=e.value;return r?[new X(t,r,"constants have been deprecated as of v8")]:[]}function Xr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function qd(e){if(Array.isArray(e))return e.map(qd);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){let t={};for(let r in e)t[r]=qd(e[r]);return t}return Xr(e)}function ka(e){let t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=e.validateSpec,l=[],u=Ke(r);if(u!=="object")return[new X(t,r,`object expected, ${u} found`)];for(let c in r){let p=c.split(".")[0],d=wb(n,p)||n["*"],h;if(wb(i,p))h=i[p];else if(wb(n,p))h=s;else if(i["*"])h=i["*"];else if(n["*"])h=s;else{l.push(new X(t,r[c],`unknown property "${c}"`));continue}l=l.concat(h({key:(t&&`${t}.`)+c,value:r[c],valueSpec:d,style:o,styleSpec:a,object:r,objectKey:c,validateSpec:s},r))}for(let c in n)i[c]||n[c].required&&n[c].default===void 0&&r[c]===void 0&&l.push(new X(t,r,`missing required property "${c}"`));return l}function JR(e){let t=e.value,r=e.valueSpec,n=e.validateSpec,i=e.style,o=e.styleSpec,a=e.key,s=e.arrayElementValidator||n;if(Ke(t)!=="array")return[new X(a,t,`array expected, ${Ke(t)} found`)];if(r.length&&t.length!==r.length)return[new X(a,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new X(a,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let l={type:r.value,values:r.values};o.$version<7&&(l.function=r.function),Ke(r.value)==="object"&&(l=r.value);let u=[];for(let c=0;c<t.length;c++)u=u.concat(s({array:t,arrayIndex:c,value:t[c],valueSpec:l,validateSpec:e.validateSpec,style:i,styleSpec:o,key:`${a}[${c}]`}));return u}function HE(e){let t=e.key,r=e.value,n=e.valueSpec,i=Ke(r);return i==="number"&&r!==r&&(i="NaN"),i!=="number"?[new X(t,r,`number expected, ${i} found`)]:"minimum"in n&&r<n.minimum?[new X(t,r,`${r} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&r>n.maximum?[new X(t,r,`${r} is greater than the maximum value ${n.maximum}`)]:[]}function ite(e){let t=e.valueSpec,r=Xr(e.value.type),n,i={},o,a,s=r!=="categorical"&&e.value.property===void 0,l=!s,u=Ke(e.value.stops)==="array"&&Ke(e.value.stops[0])==="array"&&Ke(e.value.stops[0][0])==="object",c=ka({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:p,default:m}});return r==="identity"&&s&&c.push(new X(e.key,e.value,'missing required property "property"')),r!=="identity"&&!e.value.stops&&c.push(new X(e.key,e.value,'missing required property "stops"')),r==="exponential"&&e.valueSpec.expression&&!WR(e.valueSpec)&&c.push(new X(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!cy(e.valueSpec)?c.push(new X(e.key,e.value,"property functions not supported")):s&&!Yee(e.valueSpec)&&c.push(new X(e.key,e.value,"zoom functions not supported"))),(r==="categorical"||u)&&e.value.property===void 0&&c.push(new X(e.key,e.value,'"property" property is required')),c;function p(x){if(r==="identity")return[new X(x.key,x.value,'identity function may not have a "stops" property')];let b=[],_=x.value;return b=b.concat(JR({key:x.key,value:_,valueSpec:x.valueSpec,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec,arrayElementValidator:d})),Ke(_)==="array"&&_.length===0&&b.push(new X(x.key,_,"array must have at least one stop")),b}function d(x){let b=[],_=x.value,T=x.key;if(Ke(_)!=="array")return[new X(T,_,`array expected, ${Ke(_)} found`)];if(_.length!==2)return[new X(T,_,`array length 2 expected, length ${_.length} found`)];if(u){if(Ke(_[0])!=="object")return[new X(T,_,`object expected, ${Ke(_[0])} found`)];if(_[0].zoom===void 0)return[new X(T,_,"object stop key must have zoom")];if(_[0].value===void 0)return[new X(T,_,"object stop key must have value")];if(a&&a>Xr(_[0].zoom))return[new X(T,_[0].zoom,"stop zoom values must appear in ascending order")];Xr(_[0].zoom)!==a&&(a=Xr(_[0].zoom),o=void 0,i={}),b=b.concat(ka({key:`${T}[0]`,value:_[0],valueSpec:{zoom:{}},validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{zoom:HE,value:h}}))}else b=b.concat(h({key:`${T}[0]`,value:_[0],validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec},_));return XR(qd(_[1]))?b.concat([new X(`${T}[1]`,_[1],"expressions are not allowed in function stops.")]):b.concat(x.validateSpec({key:`${T}[1]`,value:_[1],valueSpec:t,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec}))}function h(x,b){let _=Ke(x.value),T=Xr(x.value),I=x.value!==null?x.value:b;if(!n)n=_;else if(_!==n)return[new X(x.key,I,`${_} stop domain type must match previous stop domain type ${n}`)];if(_!=="number"&&_!=="string"&&_!=="boolean")return[new X(x.key,I,"stop domain value must be a number, string, or boolean")];if(_!=="number"&&r!=="categorical"){let S=`number expected, ${_} found`;return cy(t)&&r===void 0&&(S+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new X(x.key,I,S)]}return r==="categorical"&&_==="number"&&(!isFinite(T)||Math.floor(T)!==T)?[new X(x.key,I,`integer expected, found ${T}`)]:r!=="categorical"&&_==="number"&&o!==void 0&&T<o?[new X(x.key,I,"stop domain values must appear in ascending order")]:(o=T,r==="categorical"&&T in i?[new X(x.key,I,"stop domain values must be unique")]:(i[T]=!0,[]))}function m(x){return x.validateSpec({key:x.key,value:x.value,valueSpec:t,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec})}}function fy(e){let t=(e.expressionContext==="property"?Qee:qR)(qd(e.value),e.valueSpec);if(t.result==="error")return t.value.map(n=>new X(`${e.key}${n.key}`,e.value,n.message));let r=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!r.outputDefined())return[new X(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Ob(r))return[new X(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Ob(r))return[new X(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!VE(r,["zoom","feature-state"]))return[new X(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!$E(r))return[new X(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Y6e(e){let t=e.value,r=e.key,n=Ke(t);return n!=="boolean"?[new X(r,t,`boolean expected, ${n} found`)]:[]}function $R(e){let t=e.key,r=e.value,n=Ke(r);return n!=="string"?[new X(t,r,`color expected, ${n} found`)]:Ve.parse(String(r))?[]:[new X(t,r,`color expected, "${r}" found`)]}function zb(e){let t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?n.values.indexOf(Xr(r))===-1&&i.push(new X(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(n.values).indexOf(Xr(r))===-1&&i.push(new X(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function KR(e){return YR(qd(e.value))?fy(sy({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ote(e)}function ote(e){let t=e.value,r=e.key;if(Ke(t)!=="array")return[new X(r,t,`array expected, ${Ke(t)} found`)];let n=e.styleSpec,i,o=[];if(t.length<1)return[new X(r,t,"filter array must have at least 1 element")];switch(o=o.concat(zb({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Xr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Xr(t[1])==="$type"&&o.push(new X(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&o.push(new X(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Ke(t[1]),i!=="string"&&o.push(new X(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Ke(t[a]),Xr(t[1])==="$type"?o=o.concat(zb({key:`${r}[${a}]`,value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&o.push(new X(`${r}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<t.length;a++)o=o.concat(ote({key:`${r}[${a}]`,value:t[a],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Ke(t[1]),t.length!==2?o.push(new X(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):i!=="string"&&o.push(new X(`${r}[1]`,t[1],`string expected, ${i} found`));break}return o}function ate(e,t){let r=e.key,n=e.validateSpec,i=e.style,o=e.styleSpec,a=e.value,s=e.objectKey,l=o[`${t}_${e.layerType}`];if(!l)return[];let u=s.match(/^(.*)-transition$/);if(t==="paint"&&u&&l[u[1]]&&l[u[1]].transition)return n({key:r,value:a,valueSpec:o.transition,style:i,styleSpec:o});let c=e.valueSpec||l[s];if(!c)return[new X(r,a,`unknown property "${s}"`)];let p;if(Ke(a)==="string"&&cy(c)&&!c.tokens&&(p=/^{([^}]+)}$/.exec(a)))return[new X(r,a,`"${s}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(p[1])} }\`.`)];let d=[];return e.layerType==="symbol"&&(s==="text-field"&&i&&!i.glyphs&&d.push(new X(r,a,'use of "text-field" requires a style "glyphs" property')),s==="text-font"&&jE(qd(a))&&Xr(a.type)==="identity"&&d.push(new X(r,a,'"text-font" does not support identity functions'))),d.concat(n({key:e.key,value:a,valueSpec:c,style:i,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:s}))}function ste(e){return ate(e,"paint")}function lte(e){return ate(e,"layout")}function ute(e){let t=[],r=e.value,n=e.key,i=e.style,o=e.styleSpec;if(Ke(r)!=="object")return[new X(n,r,`object expected, ${Ke(r)} found`)];!r.type&&!r.ref&&t.push(new X(n,r,'either "type" or "ref" is required'));let a=Xr(r.type),s=Xr(r.ref);if(r.id){let l=Xr(r.id);for(let u=0;u<e.arrayIndex;u++){let c=i.layers[u];Xr(c.id)===l&&t.push(new X(n,r.id,`duplicate layer id "${r.id}", previously used at line ${c.id.__line__}`))}}if("ref"in r){["type","source","source-layer","filter","layout"].forEach(u=>{u in r&&t.push(new X(n,r[u],`"${u}" is prohibited for ref layers`))});let l;i.layers.forEach(u=>{Xr(u.id)===s&&(l=u)}),l?l.ref?t.push(new X(n,r.ref,"ref cannot reference another ref layer")):a=Xr(l.type):t.push(new X(n,r.ref,`ref layer "${s}" not found`))}else if(a!=="background")if(!r.source)t.push(new X(n,r,'missing required property "source"'));else{let l=i.sources&&i.sources[r.source],u=l&&Xr(l.type);l?u==="vector"&&a==="raster"?t.push(new X(n,r.source,`layer "${r.id}" requires a raster source`)):u!=="raster-dem"&&a==="hillshade"?t.push(new X(n,r.source,`layer "${r.id}" requires a raster-dem source`)):u!=="raster-dem"&&a==="color-relief"?t.push(new X(n,r.source,`layer "${r.id}" requires a raster-dem source`)):u==="raster"&&a!=="raster"?t.push(new X(n,r.source,`layer "${r.id}" requires a vector source`)):u==="vector"&&!r["source-layer"]?t.push(new X(n,r,`layer "${r.id}" must specify a "source-layer"`)):u==="raster-dem"&&a!=="hillshade"&&a!=="color-relief"?t.push(new X(n,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):a==="line"&&r.paint&&r.paint["line-gradient"]&&(u!=="geojson"||!l.lineMetrics)&&t.push(new X(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new X(n,r.source,`source "${r.source}" not found`))}return t=t.concat(ka({key:n,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"})},filter:KR,layout(l){return ka({layer:r,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return lte(sy({layerType:a},u))}}})},paint(l){return ka({layer:r,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return ste(sy({layerType:a},u))}}})}}})),t}function Yd(e){let t=e.value,r=e.key,n=Ke(t);return n!=="string"?[new X(r,t,`string expected, ${n} found`)]:[]}function J6e(e){var t;let r=(t=e.sourceName)!==null&&t!==void 0?t:"",n=e.value,i=e.styleSpec,o=i.source_raster_dem,a=e.style,s=[],l=Ke(n);if(n===void 0)return s;if(l!=="object")return s.push(new X("source_raster_dem",n,`object expected, ${l} found`)),s;let c=Xr(n.encoding)==="custom",p=["redFactor","greenFactor","blueFactor","baseShift"],d=e.value.encoding?`"${e.value.encoding}"`:"Default";for(let h in n)!c&&p.includes(h)?s.push(new X(h,n[h],`In "${r}": "${h}" is only valid when "encoding" is set to "custom". ${d} encoding found`)):o[h]?s=s.concat(e.validateSpec({key:h,value:n[h],valueSpec:o[h],validateSpec:e.validateSpec,style:a,styleSpec:i})):s.push(new X(h,n[h],`unknown property "${h}"`));return s}function cte(e){let t=e.value,r=e.key,n=e.styleSpec,i=e.style,o=e.validateSpec;if(!t.type)return[new X(r,t,'"type" is required')];let a=Xr(t.type),s;switch(a){case"vector":case"raster":return s=ka({key:r,value:t,valueSpec:n[`source_${a.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:Lee,validateSpec:o}),s;case"raster-dem":return s=J6e({sourceName:r,value:t,style:e.style,styleSpec:n,validateSpec:o}),s;case"geojson":if(s=ka({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,validateSpec:o,objectElementValidators:Lee}),t.cluster)for(let l in t.clusterProperties){let[u,c]=t.clusterProperties[l],p=typeof u=="string"?[u,["accumulated"],["get",l]]:u;s.push(...fy({key:`${r}.${l}.map`,value:c,expressionContext:"cluster-map"})),s.push(...fy({key:`${r}.${l}.reduce`,value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return ka({key:r,value:t,valueSpec:n.source_video,style:i,validateSpec:o,styleSpec:n});case"image":return ka({key:r,value:t,valueSpec:n.source_image,style:i,validateSpec:o,styleSpec:n});case"canvas":return[new X(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zb({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function K6e({key:e,value:t}){if(Ke(t)==="string")return Yd({key:e,value:t});{let r=[];for(let n in t)r.push(...Yd({key:`${e}.${n}`,value:t[n]}));return r}}function pte(e){let t=e.value,r=e.styleSpec,n=r.light,i=e.style,o=[],a=Ke(t);if(t===void 0)return o;if(a!=="object")return o=o.concat([new X("light",t,`object expected, ${a} found`)]),o;for(let s in t){let l=s.match(/^(.*)-transition$/);l&&n[l[1]]&&n[l[1]].transition?o=o.concat(e.validateSpec({key:s,value:t[s],valueSpec:r.transition,validateSpec:e.validateSpec,style:i,styleSpec:r})):n[s]?o=o.concat(e.validateSpec({key:s,value:t[s],valueSpec:n[s],validateSpec:e.validateSpec,style:i,styleSpec:r})):o=o.concat([new X(s,t[s],`unknown property "${s}"`)])}return o}function dte(e){let t=e.value,r=e.styleSpec,n=r.sky,i=e.style,o=Ke(t);if(t===void 0)return[];if(o!=="object")return[new X("sky",t,`object expected, ${o} found`)];let a=[];for(let s in t)n[s]?a=a.concat(e.validateSpec({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r})):a=a.concat([new X(s,t[s],`unknown property "${s}"`)]);return a}function fte(e){let t=e.value,r=e.styleSpec,n=r.terrain,i=e.style,o=[],a=Ke(t);if(t===void 0)return o;if(a!=="object")return o=o.concat([new X("terrain",t,`object expected, ${a} found`)]),o;for(let s in t)n[s]?o=o.concat(e.validateSpec({key:s,value:t[s],valueSpec:n[s],validateSpec:e.validateSpec,style:i,styleSpec:r})):o=o.concat([new X(s,t[s],`unknown property "${s}"`)]);return o}function Q6e(e){return Yd(e).length===0?[]:fy(e)}function eRe(e){return Yd(e).length===0?[]:fy(e)}function tRe(e){let t=e.key,r=e.value;if(Ke(r)==="array"){if(r.length<1||r.length>4)return[new X(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];let i={type:"number"},o=[];for(let a=0;a<r.length;a++)o=o.concat(e.validateSpec({key:`${t}[${a}]`,value:r[a],validateSpec:e.validateSpec,valueSpec:i}));return o}else return HE({key:t,value:r,valueSpec:{}})}function rRe(e){let t=e.key,r=e.value;if(Ke(r)==="array"){let i={type:"number"};if(r.length<1)return[new X(t,r,"array length at least 1 expected, length 0 found")];let o=[];for(let a=0;a<r.length;a++)o=o.concat(e.validateSpec({key:`${t}[${a}]`,value:r[a],validateSpec:e.validateSpec,valueSpec:i}));return o}else return HE({key:t,value:r,valueSpec:{}})}function nRe(e){let t=e.key,r=e.value;if(Ke(r)==="array"){if(r.length<1)return[new X(t,r,"array length at least 1 expected, length 0 found")];let i=[];for(let o=0;o<r.length;o++)i=i.concat($R({key:`${t}[${o}]`,value:r[o]}));return i}else return $R({key:t,value:r})}function iRe(e){let t=e.key,r=e.value,n=Ke(r),i=e.styleSpec;if(n!=="array"||r.length<1||r.length%2!==0)return[new X(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<r.length;a+=2)o=o.concat(zb({key:`${t}[${a}]`,value:r[a],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(JR({key:`${t}[${a+1}]`,value:r[a+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return o}function hte(e){let t=[],r=e.value,n=e.key;if(Array.isArray(r)){let i=[],o=[];for(let a in r){r[a].id&&i.includes(r[a].id)&&t.push(new X(n,r,`all the sprites' ids must be unique, but ${r[a].id} is duplicated`)),i.push(r[a].id),r[a].url&&o.includes(r[a].url)&&t.push(new X(n,r,`all the sprites' URLs must be unique, but ${r[a].url} is duplicated`)),o.push(r[a].url);let s={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(ka({key:`${n}[${a}]`,value:r[a],valueSpec:s,validateSpec:e.validateSpec}))}return t}else return Yd({key:n,value:r})}function oRe(e){let t=e.value,r=e.styleSpec,n=r.projection,i=e.style,o=Ke(t);if(t===void 0)return[];if(o!=="object")return[new X("projection",t,`object expected, ${o} found`)];let a=[];for(let s in t)n[s]?a=a.concat(e.validateSpec({key:s,value:t[s],valueSpec:n[s],style:i,styleSpec:r})):a=a.concat([new X(s,t[s],`unknown property "${s}"`)]);return a}function aRe(e){let t=e.key,r=e.value;r=r instanceof String?r.valueOf():r;let n=Ke(r);return n==="array"&&!lRe(r)&&!sRe(r)?[new X(t,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]:["array","string"].includes(n)?[]:[new X(t,r,`projection expected, invalid type "${n}" found`)]}function sRe(e){return!!["interpolate","step","literal"].includes(e[0])}function lRe(e){return Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"}function uRe(e){return!!e&&e.constructor===Object}function mte(e){return uRe(e.value)?[]:[new X(e.key,e.value,`object expected, ${Ke(e.value)} found`)]}function DE(e){let t=e.value,r=e.valueSpec,n=e.styleSpec;return e.validateSpec=DE,r.expression&&jE(Xr(t))?ite(e):r.expression&&XR(qd(t))?fy(e):r.type&&Fee[r.type]?Fee[r.type](e):ka(sy({},e,{valueSpec:r.type?n[r.type]:r}))}function yte(e){let t=e.value,r=e.key,n=Yd(e);return n.length||(t.indexOf("{fontstack}")===-1&&n.push(new X(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&n.push(new X(r,t,'"glyphs" url must include a "{range}" token'))),n}function Ko(e,t=Ri){let r=[];return r=r.concat(DE({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:DE,objectElementValidators:{glyphs:yte,"*"(){return[]}}})),e.constants&&(r=r.concat(nte({key:"constants",value:e.constants}))),gte(r)}function As(e){return function(t){return e({...t,validateSpec:DE})}}function gte(e){return[].concat(e).sort((t,r)=>t.line-r.line)}function Ds(e){return function(...t){return gte(e.apply(this,t))}}var Vke,jke,Gke,Hke,Zke,Wke,Xke,qke,Yke,Jke,Kke,Qke,eOe,tOe,rOe,nOe,iOe,oOe,aOe,sOe,lOe,uOe,cOe,pOe,dOe,fOe,hOe,mOe,yOe,gOe,xOe,bOe,vOe,_Oe,SOe,wOe,TOe,IOe,EOe,COe,Ri,X,Fa,TR,hy,oe,Je,Ze,El,LE,Wd,Ge,POe,FE,kE,OE,Ib,RE,Nb,BE,MOe,kee,Oee,Ree,Bee,ay,zee,AOe,DOe,LOe,ROe,zOe,Ve,Cb,UOe,Pb,Ms,Oa,Ra,fo,_r,$Oe,Pl,ho,Vu,uy,hE,Cs,yee,op,VOe,xE,bE,vE,_E,IR,ER,CR,PR,MR,AR,SE,bR,gee,HOe,ZOe,Ps,NE,wE,i6e,o6e,a6e,s6e,l6e,u6e,TE,DR,LR,FR,kR,Cl,Db,IE,C6e,See,wee,Tee,Lb,OR,RR,Fb,kb,Jd,Ml,Rb,py,dy,Bb,W6e,Lee,Fee,wn=f(()=>{Vke=8,jke={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Gke={"*":{type:"source"}},Hke=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Zke={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Wke={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Xke={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},qke={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Yke={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Jke={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Kke={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Qke=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],eOe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tOe={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rOe={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nOe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},iOe={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oOe={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},aOe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sOe={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lOe={type:"array",value:"*"},uOe={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},cOe={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},pOe={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},dOe={type:"array",value:"*",minimum:1},fOe={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},hOe={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},mOe={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},yOe={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},gOe=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],xOe={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},bOe={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},vOe={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},_Oe={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},SOe={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},wOe={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},TOe={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},IOe={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},EOe={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},COe={"*":{type:"string"}},Ri={$version:Vke,$root:jke,sources:Gke,source:Hke,source_vector:Zke,source_raster:Wke,source_raster_dem:Xke,source_geojson:qke,source_video:Yke,source_image:Jke,layer:Kke,layout:Qke,layout_background:eOe,layout_fill:tOe,layout_circle:rOe,layout_heatmap:nOe,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:iOe,layout_symbol:oOe,layout_raster:aOe,layout_hillshade:sOe,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:lOe,filter_operator:uOe,geometry_type:cOe,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:pOe,expression:dOe,light:fOe,sky:hOe,terrain:mOe,projection:yOe,paint:gOe,paint_fill:xOe,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:bOe,paint_circle:vOe,paint_heatmap:_Oe,paint_symbol:SOe,paint_raster:wOe,paint_hillshade:TOe,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:IOe,transition:EOe,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:COe},X=class{constructor(t,r,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),r!=null&&r.__line__&&(this.line=r.__line__)}};Fa=class extends Error{constructor(t,r){super(r),this.message=r,this.key=t}},TR=class e{constructor(t,r=[]){this.parent=t,this.bindings={};for(let[n,i]of r)this.bindings[n]=i}concat(t){return new e(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}},hy={kind:"null"},oe={kind:"number"},Je={kind:"string"},Ze={kind:"boolean"},El={kind:"color"},LE={kind:"projectionDefinition"},Wd={kind:"object"},Ge={kind:"value"},POe={kind:"error"},FE={kind:"collator"},kE={kind:"formatted"},OE={kind:"padding"},Ib={kind:"colorArray"},RE={kind:"numberArray"},Nb={kind:"resolvedImage"},BE={kind:"variableAnchorOffsetCollection"};MOe=[hy,oe,Je,Ze,El,LE,kE,Wd,Jo(Ge),OE,RE,Ib,Nb,BE];kee=.96422,Oee=1,Ree=.82521,Bee=4/29,ay=6/29,zee=3*ay*ay,AOe=ay*ay*ay,DOe=Math.PI/180,LOe=180/Math.PI;ROe=Object.hasOwn||function(t,r){return Object.prototype.hasOwnProperty.call(t,r)};zOe={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};Ve=class e{constructor(t,r,n,i=1,o=!0){this.r=t,this.g=r,this.b=n,this.a=i,o||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[t,r,n,i]))}static parse(t){if(t instanceof e)return t;if(typeof t!="string")return;let r=BOe(t);if(r)return new e(...r,!1)}get rgb(){let{r:t,g:r,b:n,a:i}=this,o=i||1/0;return this.overwriteGetter("rgb",[t/o,r/o,n/o,i])}get hcl(){return this.overwriteGetter("hcl",FOe(this.rgb))}get lab(){return this.overwriteGetter("lab",Uee(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){let[t,r,n,i]=this.rgb;return`rgba(${[t,r,n].map(o=>Math.round(o*255)).join(",")},${i})`}static interpolate(t,r,n,i="rgb"){switch(i){case"rgb":{let[o,a,s,l]=ly(t.rgb,r.rgb,n);return new e(o,a,s,l,!1)}case"hcl":{let[o,a,s,l]=t.hcl,[u,c,p,d]=r.hcl,h,m;if(!isNaN(o)&&!isNaN(u)){let I=u-o;u>o&&I>180?I-=360:u<o&&o-u>180&&(I+=360),h=o+n*I}else isNaN(o)?isNaN(u)?h=NaN:(h=u,(s===1||s===0)&&(m=c)):(h=o,(p===1||p===0)&&(m=a));let[x,b,_,T]=kOe([h,m??ap(a,c,n),ap(s,p,n),ap(l,d,n)]);return new e(x,b,_,T,!1)}case"lab":{let[o,a,s,l]=$ee(ly(t.lab,r.lab,n));return new e(o,a,s,l,!1)}}}};Ve.black=new Ve(0,0,0,1);Ve.white=new Ve(1,1,1,1);Ve.transparent=new Ve(0,0,0,0);Ve.red=new Ve(1,0,0,1);Cb=class{constructor(t,r,n){t?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},UOe=["bottom","center","top"],Pb=class{constructor(t,r,n,i,o,a){this.text=t,this.image=r,this.scale=n,this.fontStack=i,this.textColor=o,this.verticalAlign=a}},Ms=class e{constructor(t){this.sections=t}static fromString(t){return new e([new Pb(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof e?t:e.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}},Oa=class e{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof e)return t;if(typeof t=="number")return new e([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(let r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new e(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,n){return new e(ly(t.values,r.values,n))}},Ra=class e{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof e)return t;if(typeof t=="number")return new e([t]);if(Array.isArray(t)){for(let r of t)if(typeof r!="number")return;return new e(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,n){return new e(ly(t.values,r.values,n))}},fo=class e{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof e)return t;if(typeof t=="string"){let n=Ve.parse(t);return n?new e([n]):void 0}if(!Array.isArray(t))return;let r=[];for(let n of t){if(typeof n!="string")return;let i=Ve.parse(n);if(!i)return;r.push(i)}return new e(r)}toString(){return JSON.stringify(this.values)}static interpolate(t,r,n,i="rgb"){let o=[];if(t.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let a=0;a<t.values.length;a++)o.push(Ve.interpolate(t.values[a],r.values[a],n,i));return new e(o)}},_r=class extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}},$Oe=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]),Pl=class e{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof e)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let r=0;r<t.length;r+=2){let n=t[r],i=t[r+1];if(typeof n!="string"||!$Oe.has(n)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new e(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,r,n){let i=t.values,o=r.values;if(i.length!==o.length)throw new _r(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${r.toString()}`);let a=[];for(let s=0;s<i.length;s+=2){if(i[s]!==o[s])throw new _r(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${o[s]}`);a.push(i[s]);let[l,u]=i[s+1],[c,p]=o[s+1];a.push([ap(l,c,n),ap(u,p,n)])}return new e(a)}},ho=class e{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new e({name:t,available:!1}):null}},Vu=class e{constructor(t,r,n){this.from=t,this.to=r,this.transition=n}static interpolate(t,r,n){return new e(t,r,n)}static parse(t){if(t instanceof e)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new e(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new e(t.from,t.to,t.transition);if(typeof t=="string")return new e(t,t,1)}};uy=class e{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Mb(t[1]))return r.error("invalid value");let n=t[1],i=fn(n),o=r.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new e(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}},hE={string:Je,number:oe,boolean:Ze,object:Wd},Cs=class e{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=1,i,o=t[0];if(o==="array"){let s;if(t.length>2){let u=t[1];if(typeof u!="string"||!(u in hE)||u==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);s=hE[u],n++}else s=Ge;let l;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);l=t[2],n++}i=Jo(s,l)}else{if(!hE[o])throw new Error(`Types doesn't contain name = ${o}`);i=hE[o]}let a=[];for(;n<t.length;n++){let s=r.parse(t[n],n,Ge);if(!s)return null;a.push(s)}return new e(i,a)}evaluate(t){for(let r=0;r<this.args.length;r++){let n=this.args[r].evaluate(t);if(Eb(this.type,fn(n))){if(r===this.args.length-1)throw new _r(`Expected value to be of type ${Pr(this.type)}, but found ${Pr(fn(n))} instead.`)}else return n}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}},yee={"to-boolean":Ze,"to-color":El,"to-number":oe,"to-string":Je},op=class e{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=t[0];if(!yee[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&t.length!==2)return r.error("Expected one argument.");let i=yee[n],o=[];for(let a=1;a<t.length;a++){let s=r.parse(t[a],a,Ge);if(!s)return null;o.push(s)}return new e(i,o)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,n;for(let i of this.args){if(r=i.evaluate(t),n=null,r instanceof Ve)return r;if(typeof r=="string"){let o=t.parseColor(r);if(o)return o}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=Vee(r[0],r[1],r[2],r[3]),!n))return new Ve(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new _r(n||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(let n of this.args){r=n.evaluate(t);let i=Oa.parse(r);if(i)return i}throw new _r(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(let n of this.args){r=n.evaluate(t);let i=Ra.parse(r);if(i)return i}throw new _r(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(let n of this.args){r=n.evaluate(t);let i=fo.parse(r);if(i)return i}throw new _r(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(let n of this.args){r=n.evaluate(t);let i=Pl.parse(r);if(i)return i}throw new _r(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(let n of this.args){if(r=n.evaluate(t),r===null)return 0;let i=Number(r);if(!isNaN(i))return i}throw new _r(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Ms.fromString(Tb(this.args[0].evaluate(t)));case"resolvedImage":return ho.fromString(Tb(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Tb(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}},VOe=["Unknown","Point","LineString","Polygon"],xE=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?VOe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache.get(t);return r||(r=Ve.parse(t),this._parseColorCache.set(t,r)),r}},bE=class e{constructor(t,r,n=[],i,o=new TR,a=[]){this.registry=t,this.path=n,this.key=n.map(s=>`[${s}]`).join(""),this.scope=o,this.errors=a,this.expectedType=i,this._isConstant=r}parse(t,r,n,i,o={}){return r?this.concat(r,n,i)._parse(t,o):this._parse(t,o)}_parse(t,r){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function n(i,o,a){return a==="assert"?new Cs(o,[i]):a==="coerce"?new op(o,[i]):i}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let i=t[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let o=this.registry[i];if(o){let a=o.parse(t,this);if(!a)return null;if(this.expectedType){let s=this.expectedType,l=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")a=n(a,s,r.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(l.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(l.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(l.kind)||s.kind==="colorArray"&&["value","string","array"].includes(l.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(l.kind))a=n(a,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(a instanceof uy)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){let s=new xE;try{a=new uy(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,r,n){let i=typeof t=="number"?this.path.concat(t):this.path,o=n?this.scope.concat(n):this.scope;return new e(this.registry,this._isConstant,i,r||null,o,this.errors)}error(t,...r){let n=`${this.key}${r.map(i=>`[${i}]`).join("")}`;this.errors.push(new Fa(n,t))}checkSubtype(t,r){let n=Eb(t,r);return n&&this.error(n),n}},vE=class e{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(let r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);let n=[];for(let o=1;o<t.length-1;o+=2){let a=t[o];if(typeof a!="string")return r.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return r.error("Variable names must contain only alphanumeric characters or '_'.",o);let s=r.parse(t[o+1],o+1);if(!s)return null;n.push([a,s])}let i=r.parse(t[t.length-1],t.length-1,r.expectedType,n);return i?new e(n,i):null}outputDefined(){return this.result.outputDefined()}},_E=class e{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");let n=t[1];return r.scope.has(n)?new e(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}},IR=class e{constructor(t,r,n){this.type=t,this.index=r,this.input=n}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let n=r.parse(t[1],1,oe),i=r.parse(t[2],2,Jo(r.expectedType||Ge));if(!n||!i)return null;let o=i.type;return new e(o.itemType,n,i)}evaluate(t){let r=this.index.evaluate(t),n=this.input.evaluate(t);if(r<0)throw new _r(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new _r(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new _r(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}},ER=class e{constructor(t,r){this.type=Ze,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let n=r.parse(t[1],1,Ge),i=r.parse(t[2],2,Ge);return!n||!i?null:VR(n.type,[Ze,Je,oe,hy,Ge])?new e(n,i):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(n.type)} instead`)}evaluate(t){let r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Xd(r,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(fn(r))} instead.`);if(!Xd(n,["string","array"]))throw new _r(`Expected second argument to be of type array or string, but found ${Pr(fn(n))} instead.`);return n.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}},CR=class e{constructor(t,r,n){this.type=oe,this.needle=t,this.haystack=r,this.fromIndex=n}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let n=r.parse(t[1],1,Ge),i=r.parse(t[2],2,Ge);if(!n||!i)return null;if(!VR(n.type,[Ze,Je,oe,hy,Ge]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(n.type)} instead`);if(t.length===4){let o=r.parse(t[3],3,oe);return o?new e(n,i,o):null}else return new e(n,i)}evaluate(t){let r=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Xd(r,["boolean","string","number","null"]))throw new _r(`Expected first argument to be of type boolean, string, number or null, but found ${Pr(fn(r))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(t)),Xd(n,["string"])){let o=n.indexOf(r,i);return o===-1?-1:[...n.slice(0,o)].length}else{if(Xd(n,["array"]))return n.indexOf(r,i);throw new _r(`Expected second argument to be of type array or string, but found ${Pr(fn(n))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}},PR=class e{constructor(t,r,n,i,o,a){this.inputType=t,this.type=r,this.input=n,this.cases=i,this.outputs=o,this.otherwise=a}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return r.error("Expected an even number of arguments.");let n,i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);let o={},a=[];for(let u=2;u<t.length-1;u+=2){let c=t[u],p=t[u+1];Array.isArray(c)||(c=[c]);let d=r.concat(u);if(c.length===0)return d.error("Expected at least one branch label.");for(let m of c){if(typeof m!="number"&&typeof m!="string")return d.error("Branch labels must be numbers or strings.");if(typeof m=="number"&&Math.abs(m)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof m=="number"&&Math.floor(m)!==m)return d.error("Numeric branch labels must be integer values.");if(!n)n=fn(m);else if(d.checkSubtype(n,fn(m)))return null;if(typeof o[String(m)]<"u")return d.error("Branch labels must be unique.");o[String(m)]=a.length}let h=r.parse(p,u,i);if(!h)return null;i=i||h.type,a.push(h)}let s=r.parse(t[1],1,Ge);if(!s)return null;let l=r.parse(t[t.length-1],t.length-1,i);return!l||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new e(n,i,s,o,a,l)}evaluate(t){let r=this.input.evaluate(t);return(fn(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}},MR=class e{constructor(t,r,n){this.type=t,this.branches=r,this.otherwise=n}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);let i=[];for(let a=1;a<t.length-1;a+=2){let s=r.parse(t[a],a,Ze);if(!s)return null;let l=r.parse(t[a+1],a+1,n);if(!l)return null;i.push([s,l]),n=n||l.type}let o=r.parse(t[t.length-1],t.length-1,n);if(!o)return null;if(!n)throw new Error("Can't infer output type");return new e(n,i,o)}evaluate(t){for(let[r,n]of this.branches)if(r.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(let[r,n]of this.branches)t(r),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,r])=>r.outputDefined())&&this.otherwise.outputDefined()}},AR=class e{constructor(t,r,n,i){this.type=t,this.input=r,this.beginIndex=n,this.endIndex=i}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let n=r.parse(t[1],1,Ge),i=r.parse(t[2],2,oe);if(!n||!i)return null;if(!VR(n.type,[Jo(Ge),Je,Ge]))return r.error(`Expected first argument to be of type array or string, but found ${Pr(n.type)} instead`);if(t.length===4){let o=r.parse(t[3],3,oe);return o?new e(n.type,n,i,o):null}else return new e(n.type,n,i)}evaluate(t){let r=this.input.evaluate(t),n=this.beginIndex.evaluate(t),i;if(this.endIndex&&(i=this.endIndex.evaluate(t)),Xd(r,["string"]))return[...r].slice(n,i).join("");if(Xd(r,["array"]))return r.slice(n,i);throw new _r(`Expected first argument to be of type array or string, but found ${Pr(fn(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}};SE=class e{constructor(t,r,n){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(let[i,o]of n)this.labels.push(i),this.outputs.push(o)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");let n=r.parse(t[1],1,oe);if(!n)return null;let i=[],o=null;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);for(let a=1;a<t.length;a+=2){let s=a===1?-1/0:t[a],l=t[a+1],u=a,c=a+1;if(typeof s!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);let p=r.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new e(o,n,i)}evaluate(t){let r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);let i=this.input.evaluate(t);if(i<=r[0])return n[0].evaluate(t);let o=r.length;if(i>=r[o-1])return n[o-1].evaluate(t);let a=zE(r,i);return n[a].evaluate(t)}eachChild(t){t(this.input);for(let r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};HOe=GOe(),ZOe=jOe(HOe),Ps=class e{constructor(t,r,n,i,o){this.type=t,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(let[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(t,r,n,i){let o=0;if(t.name==="exponential")o=vR(r,t.base,n,i);else if(t.name==="linear")o=vR(r,1,n,i);else if(t.name==="cubic-bezier"){let a=t.controlPoints;o=new ZOe(a[0],a[1],a[2],a[3]).solve(vR(r,1,n,i))}return o}static parse(t,r){let[n,i,o,...a]=t;if(!Array.isArray(i)||i.length===0)return r.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){let u=i[1];if(typeof u!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:u}}else if(i[0]==="cubic-bezier"){let u=i.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:u}}else return r.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(o=r.parse(o,2,oe),!o)return null;let s=[],l=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&r.expectedType!=Ib?l=El:r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let u=0;u<a.length;u+=2){let c=a[u],p=a[u+1],d=u+3,h=u+4;if(typeof c!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(s.length&&s[s.length-1][0]>=c)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);let m=r.parse(p,h,l);if(!m)return null;l=l||m.type,s.push([c,m])}return!ip(l,oe)&&!ip(l,LE)&&!ip(l,El)&&!ip(l,OE)&&!ip(l,RE)&&!ip(l,Ib)&&!ip(l,BE)&&!ip(l,Jo(oe))?r.error(`Type ${Pr(l)} is not interpolatable.`):new e(l,n,i,o,s)}evaluate(t){let r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(t);let i=this.input.evaluate(t);if(i<=r[0])return n[0].evaluate(t);let o=r.length;if(i>=r[o-1])return n[o-1].evaluate(t);let a=zE(r,i),s=r[a],l=r[a+1],u=e.interpolationFactor(this.interpolation,i,s,l),c=n[a].evaluate(t),p=n[a+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ap(c,p,u);case"color":return Ve.interpolate(c,p,u);case"padding":return Oa.interpolate(c,p,u);case"colorArray":return fo.interpolate(c,p,u);case"numberArray":return Ra.interpolate(c,p,u);case"variableAnchorOffsetCollection":return Pl.interpolate(c,p,u);case"array":return ly(c,p,u);case"projectionDefinition":return Vu.interpolate(c,p,u)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ve.interpolate(c,p,u,"hcl");case"colorArray":return fo.interpolate(c,p,u,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ve.interpolate(c,p,u,"lab");case"colorArray":return fo.interpolate(c,p,u,"lab")}}}eachChild(t){t(this.input);for(let r of this.outputs)t(r)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};NE={color:Ve.interpolate,number:ap,padding:Oa.interpolate,numberArray:Ra.interpolate,colorArray:fo.interpolate,variableAnchorOffsetCollection:Pl.interpolate,array:ly},wE=class e{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=null,i=r.expectedType;i&&i.kind!=="value"&&(n=i);let o=[];for(let s of t.slice(1)){let l=r.parse(s,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}if(!n)throw new Error("No output type");return i&&o.some(s=>Eb(i,s.type))?new e(Ge,o):new e(n,o)}evaluate(t){let r=null,n=0,i;for(let o of this.args)if(n++,r=o.evaluate(t),r&&r instanceof ho&&!r.available&&(i||(i=r.name),r=null,n===this.args.length&&(r=i)),r!==null)break;return r}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};i6e=my("==",WOe,jee),o6e=my("!=",XOe,QOe),a6e=my("<",qOe,e6e),s6e=my(">",YOe,t6e),l6e=my("<=",JOe,r6e),u6e=my(">=",KOe,n6e),TE=class e{constructor(t,r,n){this.type=FE,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");let n=t[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");let i=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,Ze);if(!i)return null;let o=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,Ze);if(!o)return null;let a=null;return n.locale&&(a=r.parse(n.locale,1,Je),!a)?null:new e(i,o,a)}evaluate(t){return new Cb(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}},DR=class e{constructor(t,r,n,i,o){this.type=Je,this.number=t,this.locale=r,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");let n=r.parse(t[1],1,oe);if(!n)return null;let i=t[2];if(typeof i!="object"||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=r.parse(i.locale,1,Je),!o))return null;let a=null;if(i.currency&&(a=r.parse(i.currency,1,Je),!a))return null;let s=null;if(i["min-fraction-digits"]&&(s=r.parse(i["min-fraction-digits"],1,oe),!s))return null;let l=null;return i["max-fraction-digits"]&&(l=r.parse(i["max-fraction-digits"],1,oe),!l)?null:new e(n,o,a,s,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}},LR=class e{constructor(t){this.type=kE,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let n=t[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");let i=[],o=!1;for(let a=1;a<=t.length-1;++a){let s=t[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=r.parse(s["font-scale"],1,oe),!l))return null;let u=null;if(s["text-font"]&&(u=r.parse(s["text-font"],1,Jo(Je)),!u))return null;let c=null;if(s["text-color"]&&(c=r.parse(s["text-color"],1,El),!c))return null;let p=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!UOe.includes(s["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(p=r.parse(s["vertical-align"],1,Je),!p)return null}let d=i[i.length-1];d.scale=l,d.font=u,d.textColor=c,d.verticalAlign=p}else{let l=r.parse(t[a],1,Ge);if(!l)return null;let u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new e(i)}evaluate(t){let r=n=>{let i=n.content.evaluate(t);return fn(i)===Nb?new Pb("",i,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new Pb(Tb(i),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)};return new Ms(this.sections.map(r))}eachChild(t){for(let r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor),r.verticalAlign&&t(r.verticalAlign)}outputDefined(){return!1}},FR=class e{constructor(t){this.type=Nb,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");let n=r.parse(t[1],1,Je);return n?new e(n):r.error("No image name provided.")}evaluate(t){let r=this.input.evaluate(t),n=ho.fromString(r);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(r)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}},kR=class e{constructor(t){this.type=oe,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);let n=r.parse(t[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Pr(n.type)} instead.`):new e(n):null}evaluate(t){let r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new _r(`Expected value to be of type string or array, but found ${Pr(fn(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}},Cl=8192;Db=class e{constructor(t,r){this.type=Ze,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Mb(t[1])){let n=t[1];if(n.type==="FeatureCollection"){let i=[];for(let o of n.features){let{type:a,coordinates:s}=o.geometry;a==="Polygon"&&i.push(s),a==="MultiPolygon"&&i.push(...s)}if(i.length){let o={type:"MultiPolygon",coordinates:i};return new e(n,o)}}else if(n.type==="Feature"){let i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new e(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new e(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return S6e(t,this.geometries);if(t.geometryType()==="LineString")return w6e(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},IE=class{constructor(t=[],r=(n,i)=>n<i?-1:n>i?1:0){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;let t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:r,compare:n}=this,i=r[t];for(;t>0;){let o=t-1>>1,a=r[o];if(n(i,a)>=0)break;r[t]=a,t=o}r[t]=i}_down(t){let{data:r,compare:n}=this,i=this.length>>1,o=r[t];for(;t<i;){let a=(t<<1)+1,s=a+1;if(s<this.length&&n(r[s],r[a])<0&&(a=s),n(r[a],o)>=0)break;r[t]=r[a],t=a}r[t]=o}};C6e=6378.137,See=1/298.257223563,wee=See*(2-See),Tee=Math.PI/180,Lb=class{constructor(t){let r=Tee*C6e*1e3,n=Math.cos(t*Tee),i=1/(1-wee*(1-n*n)),o=Math.sqrt(i);this.kx=r*o*n,this.ky=r*o*i*(1-wee)}distance(t,r){let n=this.wrap(t[0]-r[0])*this.kx,i=(t[1]-r[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(t,r){let n=1/0,i,o,a,s;for(let l=0;l<t.length-1;l++){let u=t[l][0],c=t[l][1],p=this.wrap(t[l+1][0]-u)*this.kx,d=(t[l+1][1]-c)*this.ky,h=0;(p!==0||d!==0)&&(h=(this.wrap(r[0]-u)*this.kx*p+(r[1]-c)*this.ky*d)/(p*p+d*d),h>1?(u=t[l+1][0],c=t[l+1][1]):h>0&&(u+=p/this.kx*h,c+=d/this.ky*h)),p=this.wrap(r[0]-u)*this.kx,d=(r[1]-c)*this.ky;let m=p*p+d*d;m<n&&(n=m,i=u,o=c,a=l,s=h)}return{point:[i,o],index:a,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}},OR=100,RR=50;Fb=class e{constructor(t,r){this.type=oe,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Mb(t[1])){let n=t[1];if(n.type==="FeatureCollection")return new e(n,n.features.map(i=>_R(i.geometry)).flat());if(n.type==="Feature")return new e(n,_R(n.geometry));if("type"in n&&"coordinates"in n)return new e(n,_R(n))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return F6e(t,this.geometries);if(t.geometryType()==="LineString")return k6e(t,this.geometries);if(t.geometryType()==="Polygon")return O6e(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},kb=class e{constructor(t){this.type=Ge,this.key=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);let n=t[1];return n==null?r.error("Global state property must be defined."):typeof n!="string"?r.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new e(n)}evaluate(t){var r;let n=(r=t.globals)===null||r===void 0?void 0:r.globalState;return!n||Object.keys(n).length===0?null:wb(n,this.key)}eachChild(){}outputDefined(){return!1}},Jd={"==":i6e,"!=":o6e,">":s6e,"<":a6e,">=":u6e,"<=":l6e,array:Cs,at:IR,boolean:Cs,case:MR,coalesce:wE,collator:TE,format:LR,image:FR,in:ER,"index-of":CR,interpolate:Ps,"interpolate-hcl":Ps,"interpolate-lab":Ps,length:kR,let:vE,literal:uy,match:PR,number:Cs,"number-format":DR,object:Cs,slice:AR,step:SE,string:Cs,"to-boolean":op,"to-color":op,"to-number":op,"to-string":op,var:_E,within:Db,distance:Fb,"global-state":kb},Ml=class e{constructor(t,r,n,i){this.name=t,this.type=r,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){let n=t[0],i=e.definitions[n];if(!i)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);let o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===t.length-1),l=null;for(let[u,c]of s){l=new bE(r.registry,ME,r.path,null,r.scope);let p=[],d=!1;for(let h=1;h<t.length;h++){let m=t[h],x=Array.isArray(u)?u[h-1]:u.type,b=l.parse(m,1+p.length,x);if(!b){d=!0;break}p.push(b)}if(!d){if(Array.isArray(u)&&u.length!==p.length){l.error(`Expected ${u.length} arguments, but found ${p.length} instead.`);continue}for(let h=0;h<p.length;h++){let m=Array.isArray(u)?u[h]:u.type,x=p[h];l.concat(h+1).checkSubtype(m,x.type)}if(l.errors.length===0)return new e(n,o,c,p)}}if(s.length===1)r.errors.push(...l.errors);else{let c=(s.length?s:a).map(([d])=>B6e(d)).join(" | "),p=[];for(let d=1;d<t.length;d++){let h=r.parse(t[d],1+p.length);if(!h)return null;p.push(Pr(h.type))}r.error(`Expected arguments of type ${c}, but found (${p.join(", ")}) instead.`)}return null}static register(t,r){e.definitions=r;for(let n in r)t[n]=e}};Ml.register(Jd,{error:[POe,[Je],(e,[t])=>{throw new _r(t.evaluate(e))}],typeof:[Je,[Ge],(e,[t])=>Pr(fn(t.evaluate(e)))],"to-rgba":[Jo(oe,4),[El],(e,[t])=>{let[r,n,i,o]=t.evaluate(e).rgb;return[r*255,n*255,i*255,o]}],rgb:[El,[oe,oe,oe],Pee],rgba:[El,[oe,oe,oe,oe],Pee],has:{type:Ze,overloads:[[[Je],(e,[t])=>Mee(t.evaluate(e),e.properties())],[[Je,Wd],(e,[t,r])=>Mee(t.evaluate(e),r.evaluate(e))]]},get:{type:Ge,overloads:[[[Je],(e,[t])=>SR(t.evaluate(e),e.properties())],[[Je,Wd],(e,[t,r])=>SR(t.evaluate(e),r.evaluate(e))]]},"feature-state":[Ge,[Je],(e,[t])=>SR(t.evaluate(e),e.featureState||{})],properties:[Wd,[],e=>e.properties()],"geometry-type":[Je,[],e=>e.geometryType()],id:[Ge,[],e=>e.id()],zoom:[oe,[],e=>e.globals.zoom],"heatmap-density":[oe,[],e=>e.globals.heatmapDensity||0],elevation:[oe,[],e=>e.globals.elevation||0],"line-progress":[oe,[],e=>e.globals.lineProgress||0],accumulated:[Ge,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[oe,Hd(oe),(e,t)=>{let r=0;for(let n of t)r+=n.evaluate(e);return r}],"*":[oe,Hd(oe),(e,t)=>{let r=1;for(let n of t)r*=n.evaluate(e);return r}],"-":{type:oe,overloads:[[[oe,oe],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[oe],(e,[t])=>-t.evaluate(e)]]},"/":[oe,[oe,oe],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[oe,[oe,oe],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[oe,[],()=>Math.LN2],pi:[oe,[],()=>Math.PI],e:[oe,[],()=>Math.E],"^":[oe,[oe,oe],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[oe,[oe],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[oe,[oe],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[oe,[oe],(e,[t])=>Math.log(t.evaluate(e))],log2:[oe,[oe],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[oe,[oe],(e,[t])=>Math.sin(t.evaluate(e))],cos:[oe,[oe],(e,[t])=>Math.cos(t.evaluate(e))],tan:[oe,[oe],(e,[t])=>Math.tan(t.evaluate(e))],asin:[oe,[oe],(e,[t])=>Math.asin(t.evaluate(e))],acos:[oe,[oe],(e,[t])=>Math.acos(t.evaluate(e))],atan:[oe,[oe],(e,[t])=>Math.atan(t.evaluate(e))],min:[oe,Hd(oe),(e,t)=>Math.min(...t.map(r=>r.evaluate(e)))],max:[oe,Hd(oe),(e,t)=>Math.max(...t.map(r=>r.evaluate(e)))],abs:[oe,[oe],(e,[t])=>Math.abs(t.evaluate(e))],round:[oe,[oe],(e,[t])=>{let r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[oe,[oe],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[oe,[oe],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Ze,[Je,Ge],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[Ze,[Ge],(e,[t])=>e.id()===t.value],"filter-type-==":[Ze,[Je],(e,[t])=>e.geometryType()===t.value],"filter-<":[Ze,[Je,Ge],(e,[t,r])=>{let n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[Ze,[Ge],(e,[t])=>{let r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[Ze,[Je,Ge],(e,[t,r])=>{let n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[Ze,[Ge],(e,[t])=>{let r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[Ze,[Je,Ge],(e,[t,r])=>{let n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[Ze,[Ge],(e,[t])=>{let r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[Ze,[Je,Ge],(e,[t,r])=>{let n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[Ze,[Ge],(e,[t])=>{let r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[Ze,[Ge],(e,[t])=>t.value in e.properties()],"filter-has-id":[Ze,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Ze,[Jo(Je)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Ze,[Jo(Ge)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Ze,[Je,Jo(Ge)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Ze,[Je,Jo(Ge)],(e,[t,r])=>R6e(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Ze,overloads:[[[Ze,Ze],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[Hd(Ze),(e,t)=>{for(let r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:Ze,overloads:[[[Ze,Ze],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[Hd(Ze),(e,t)=>{for(let r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[Ze,[Ze],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Ze,[Je],(e,[t])=>{let r=e.globals&&e.globals.isSupportedScript;return r?r(t.evaluate(e)):!0}],upcase:[Je,[Je],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Je,[Je],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Je,Hd(Ge),(e,t)=>t.map(r=>Tb(r.evaluate(e))).join("")],"resolved-locale":[Je,[FE],(e,[t])=>t.evaluate(e).resolvedLocale()]});Rb=class{constructor(t,r){this.expression=t,this._warningHistory={},this._evaluator=new xE,this._defaultValue=r?Z6e(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,n,i,o,a){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(t,r,n,i,o,a){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null;try{let s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new _r(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}};py=class{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!Ob(r.expression),this.globalStateRefs=GE(r.expression)}evaluateWithoutErrorHandling(t,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,i,o,a)}evaluate(t,r,n,i,o,a){return this._styleExpression.evaluate(t,r,n,i,o,a)}},dy=class{constructor(t,r,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!Ob(r.expression),this.globalStateRefs=GE(r.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(t,r,n,i,o,a)}evaluate(t,r,n,i,o,a){return this._styleExpression.evaluate(t,r,n,i,o,a)}interpolationFactor(t,r,n){return this.interpolationType?Ps.interpolationFactor(this.interpolationType,t,r,n):0}};Bb=class e{constructor(t,r){this._parameters=t,this._specification=r,sy(this,Jee(this._parameters,this._specification))}static deserialize(t){return new e(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}};W6e={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};Lee={promoteId:K6e};Fee={"*"(){return[]},array:JR,boolean:Y6e,number:HE,color:$R,constants:nte,enum:zb,filter:KR,function:ite,layer:ute,object:ka,source:cte,light:pte,sky:dte,terrain:fte,projection:oRe,projectionDefinition:aRe,string:Yd,formatted:Q6e,resolvedImage:eRe,padding:tRe,numberArray:rRe,colorArray:nRe,variableAnchorOffsetCollection:iRe,sprite:hte,state:mte};Ko.source=Ds(As(cte));Ko.sprite=Ds(As(hte));Ko.glyphs=Ds(As(yte));Ko.light=Ds(As(pte));Ko.sky=Ds(As(dte));Ko.terrain=Ds(As(fte));Ko.state=Ds(As(mte));Ko.layer=Ds(As(ute));Ko.filter=Ds(As(KR));Ko.paintProperty=Ds(As(ste));Ko.layoutProperty=Ds(As(lte))});var Ls,Z4t,cRe,pRe,W4t,X4t,dRe,fRe,Gb=f(()=>{wn();qt();Ls=Ko,Z4t=Ls.source,cRe=Ls.light,pRe=Ls.sky,W4t=Ls.terrain,X4t=Ls.filter,dRe=Ls.paintProperty,fRe=Ls.layoutProperty});var Kd,QR=f(()=>{Kd=class e{constructor(t,r,n){let i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;let a=new Int32Array(this.arrayBuffer);t=a[0],r=a[1],n=a[2],this.d=r+2*n;for(let u=0;u<this.d*this.d;u++){let c=a[3+u],p=a[3+u+1];i.push(c===p?null:a.subarray(c,p))}let s=a[3+i.length],l=a[3+i.length+1];this.keys=a.subarray(s,l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=r+2*n;for(let a=0;a<this.d*this.d;a++)i.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=n,this.scale=r/t,this.uid=0;let o=n/r*t;this.min=-o,this.max=t+o}insert(t,r,n,i,o){this._forEachCell(r,n,i,o,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,n,i,o,a){this.cells[o].push(a)}query(t,r,n,i,o){let a=this.min,s=this.max;if(t<=a&&r<=a&&s<=n&&s<=i&&!o)return Array.prototype.slice.call(this.keys);{let l=[],u={};return this._forEachCell(t,r,n,i,this._queryCell,l,u,o),l}}_queryCell(t,r,n,i,o,a,s,l){let u=this.cells[o];if(u!==null){let c=this.keys,p=this.bboxes;for(let d=0;d<u.length;d++){let h=u[d];if(s[h]===void 0){let m=h*4;(l?l(p[m+0],p[m+1],p[m+2],p[m+3]):t<=p[m+2]&&r<=p[m+3]&&n>=p[m+0]&&i>=p[m+1])?(s[h]=!0,a.push(c[h])):s[h]=!1}}}}_forEachCell(t,r,n,i,o,a,s,l){let u=this._convertToCellCoord(t),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),d=this._convertToCellCoord(i);for(let h=u;h<=p;h++)for(let m=c;m<=d;m++){let x=this.d*m+h;if(!(l&&!l(this._convertFromCellCoord(h),this._convertFromCellCoord(m),this._convertFromCellCoord(h+1),this._convertFromCellCoord(m+1)))&&o.call(this,t,r,n,i,x,a,s,l))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let t=this.cells,r=3+this.cells.length+1+1,n=0;for(let a=0;a<this.cells.length;a++)n+=this.cells[a].length;let i=new Int32Array(r+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let o=r;for(let a=0;a<t.length;a++){let s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[3+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer}static serialize(t,r){let n=t.toArrayBuffer();return r&&r.push(n),{buffer:n}}static deserialize(t){return new e(t.buffer)}}});function K(e,t,r={}){if(Gu[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Gu[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}function xte(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function eB(e){let t=e.constructor;return e.$name||t._classRegistryKey}function hRe(e){if(e===null||typeof e!="object")return!1;let t=eB(e);return!!(t&&t!=="Object")}function bte(e){return!hRe(e)&&(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||xte(e)||Ts(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function gy(e,t){if(bte(e)){if((xte(e)||Ts(e))&&t&&t.push(e),ArrayBuffer.isView(e)){let o=e;t&&t.push(o.buffer)}return e instanceof ImageData&&t&&t.push(e.data.buffer),e}if(Array.isArray(e)){let o=[];for(let a of e)o.push(gy(a,t));return o}if(typeof e!="object")throw new Error(`can't serialize object of type ${typeof e}`);let r=eB(e);if(!r)throw new Error(`can't serialize object of unregistered class ${e.constructor.name}`);if(!Gu[r])throw new Error(`${r} is not registered.`);let{klass:n}=Gu[r],i=n.serialize?n.serialize(e,t):{};if(n.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let o in e){if(!e.hasOwnProperty(o)||Gu[r].omit.indexOf(o)>=0)continue;let a=e[o];i[o]=Gu[r].shallow.indexOf(o)>=0?a:gy(a,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(i.$name=r),i}function xy(e){if(bte(e))return e;if(Array.isArray(e))return e.map(xy);if(typeof e!="object")throw new Error(`can't deserialize object of type ${typeof e}`);let t=eB(e)||"Object";if(!Gu[t])throw new Error(`can't deserialize unregistered class ${t}`);let{klass:r}=Gu[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);let n=Object.create(r.prototype);for(let i of Object.keys(e)){if(i==="$name")continue;let o=e[i];n[i]=Gu[t].shallow.indexOf(i)>=0?o:xy(o)}return n}var Gu,nn=f(()=>{QR();wn();Is();ne();Gu={};K("Object",Object);K("Set",Set);K("TransferableGridIndex",Kd);K("Color",Ve);K("Error",Error);K("AJAXError",np);K("ResolvedImage",ho);K("StylePropertyFunction",Bb);K("StyleExpression",Rb,{omit:["_evaluator"]});K("ZoomDependentExpression",dy);K("ZoomConstantExpression",py);K("CompoundExpression",Ml,{omit:["_evaluate"]});for(let e in Jd)Jd[e]._classRegistryKey||K(`Expression_${e}`,Jd[e])});var by,tB=f(()=>{by=class{constructor(){this.first=!0}update(t,r){let n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=r),t!==this.lastZoom?(this.lastZoom=t,this.lastFloorZoom=n,!0):!1)}}});var on,rB=f(()=>{on={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Hangul Syllables":e=>e>=44032&&e<=55215,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519}});function nB(e){for(let t of e)if(vte(t.charCodeAt(0)))return!0;return!1}function iB(e){let t=e.map(r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(t.join("|"),"u")}function vte(e){return e===746||e===747?!0:e<4352?!1:!!(on["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||on["CJK Compatibility"](e)||on["CJK Strokes"](e)||on["CJK Symbols and Punctuation"](e)&&!(e>=12296&&e<=12305)&&!(e>=12308&&e<=12319)&&e!==12336||on["Enclosed CJK Letters and Months"](e)||on["Ideographic Description Characters"](e)||on.Kanbun(e)||on.Katakana(e)&&e!==12540||on["Halfwidth and Fullwidth Forms"](e)&&e!==65288&&e!==65289&&e!==65293&&!(e>=65306&&e<=65310)&&e!==65339&&e!==65341&&e!==65343&&!(e>=65371&&e<=65503)&&e!==65507&&!(e>=65512&&e<=65519)||on["Small Form Variants"](e)&&!(e>=65112&&e<=65118)&&!(e>=65123&&e<=65126)||on["Vertical Forms"](e)||on["Yijing Hexagram Symbols"](e)||/\p{sc=Cans}/u.test(String.fromCodePoint(e))||/\p{sc=Hang}/u.test(String.fromCodePoint(e))||gRe.test(String.fromCodePoint(e)))}function _te(e){return bRe.test(String.fromCodePoint(e))}function vRe(e,t){return!(!t&&_te(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||on.Khmer(e))}function Ste(e){for(let t of e)if(_te(t.charCodeAt(0)))return!0;return!1}function wte(e,t){for(let r of e)if(!vRe(r.charCodeAt(0),t))return!1;return!0}var mRe,oAt,yRe,gRe,xRe,bRe,vy=f(()=>{rB();mRe=["Arab","Dupl","Mong","Ougr","Syrc"],oAt=iB(mRe),yRe=["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"],gRe=iB(yRe);xRe=["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"],bRe=iB(xRe)});var oB,Al,Hb=f(()=>{oB=class{constructor(){this.TIMEOUT=5e3;this.applyArabicShaping=null;this.processBidirectionalText=null;this.processStyledBidirectionalText=null;this.pluginStatus="unavailable";this.pluginURL=null;this.loadScriptResolve=()=>{}}setState(t){this.pluginStatus=t.pluginStatus,this.pluginURL=t.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(t){if(Al.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=t.applyArabicShaping,this.processBidirectionalText=t.processBidirectionalText,this.processStyledBidirectionalText=t.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}async syncState(t,r){if(this.isParsed())return this.getState();if(t.pluginStatus!=="loading")return this.setState(t),t;let n=t.pluginURL,i=new Promise(s=>{this.loadScriptResolve=s});r(n);let o=new Promise(s=>setTimeout(()=>s(),this.TIMEOUT));if(await Promise.race([i,o]),this.isParsed()){let s={pluginStatus:"loaded",pluginURL:n};return this.setState(s),s}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)}},Al=new oB});var mt,wi=f(()=>{tB();vy();Hb();mt=class{constructor(t,r){this.zoom=t,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new by,this.transition=r.transition||{},this.globalState=r.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new by,this.transition={},this.globalState={})}isSupportedScript(t){return wte(t,Al.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let t=this.zoom,r=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*r}}}});var ZE,aB,WE,mo,Zb,Mr,Fs,_y,Wb,Sy,Kn,Tn=f(()=>{ne();wn();nn();wi();ZE=class{constructor(t,r){this.property=t,this.value=r,this.expression=ete(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,r,n){return this.property.possiblyEvaluate(this,t,r,n)}},aB=class{constructor(t){this.property=t,this.value=new ZE(t,void 0)}transitioned(t,r){return new WE(this.property,this.value,r,we({},t.transition,this.transition),t.now)}untransitioned(){return new WE(this.property,this.value,null,{},0)}},WE=class{constructor(t,r,n,i,o){this.property=t,this.value=r,this.begin=o+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,r,n){let i=t.now||0,o=this.value.possiblyEvaluate(t,r,n),a=this.prior;if(a){if(i>this.end)return this.prior=null,o;if(this.value.isDataDriven())return this.prior=null,o;if(i<this.begin)return a.possiblyEvaluate(t,r,n);{let s=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,r,n),o,aR(s))}}else return o}},mo=class{constructor(t,r,n){this.property=t,this.value=r,this.parameters=n}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,n,i){return this.property.evaluate(this.value,this.parameters,t,r,n,i)}},Zb=class{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}},Mr=class{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,n){let i=this.specification.type,o=NE[i];return o?o(t,r,n):t}},Fs=class{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,n,i){return t.expression.kind==="constant"||t.expression.kind==="camera"?new mo(this,{kind:"constant",value:t.expression.evaluate(r,null,{},n,i)},r):new mo(this,t.expression,r)}interpolate(t,r,n){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new mo(this,{kind:"constant",value:void 0},t.parameters);let i=this.specification.type,o=NE[i];if(o){let a=o(t.value.value,r.value.value,n);return new mo(this,{kind:"constant",value:a},t.parameters)}else return t}evaluate(t,r,n,i,o,a){return t.kind==="constant"?t.value:t.evaluate(r,n,i,o,a)}},_y=class extends Fs{possiblyEvaluate(t,r,n,i){if(t.value===void 0)return new mo(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){let o=t.expression.evaluate(r,null,{},n,i),s=t.property.specification.type==="resolvedImage"&&typeof o!="string"?o.name:o,l=this._calculate(s,s,s,r);return new mo(this,{kind:"constant",value:l},r)}else if(t.expression.kind==="camera"){let o=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new mo(this,{kind:"constant",value:o},r)}else return new mo(this,t.expression,r)}evaluate(t,r,n,i,o,a){if(t.kind==="source"){let s=t.evaluate(r,n,i,o,a);return this._calculate(s,s,s,r)}else return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},n,i),t.evaluate({zoom:Math.floor(r.zoom)},n,i),t.evaluate({zoom:Math.floor(r.zoom)+1},n,i),r):t.value}_calculate(t,r,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:n,to:r}}interpolate(t){return t}},Wb=class{constructor(t){this.specification=t}possiblyEvaluate(t,r,n,i){if(t.value!==void 0)if(t.expression.kind==="constant"){let o=t.expression.evaluate(r,null,{},n,i);return this._calculate(o,o,o,r)}else return this._calculate(t.expression.evaluate(new mt(Math.floor(r.zoom-1),r)),t.expression.evaluate(new mt(Math.floor(r.zoom),r)),t.expression.evaluate(new mt(Math.floor(r.zoom+1),r)),r)}_calculate(t,r,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:n,to:r}}interpolate(t){return t}},Sy=class{constructor(t){this.specification=t}possiblyEvaluate(t,r,n,i){return!!t.expression.evaluate(r,null,{},n,i)}interpolate(){return!1}},Kn=class{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let r in t){let n=t[r];n.specification.overridable&&this.overridableProperties.push(r);let i=this.defaultPropertyValues[r]=new ZE(n,void 0),o=this.defaultTransitionablePropertyValues[r]=new aB(n);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate({})}}};K("DataDrivenProperty",Fs);K("DataConstantProperty",Mr);K("CrossFadedDataDrivenProperty",_y);K("CrossFadedProperty",Wb);K("ColorRampProperty",Sy)});var Ba=f(()=>{ne();Gb();qt();Tn()});function Ct(e,t=1){let r=0,n=0,i=e.map(a=>{let s=ERe(a.type),l=r=Tte(r,Math.max(t,s)),u=a.components||1;return n=Math.max(n,s),r+=s*u,{name:a.name,type:a.type,components:u,offset:l}}),o=Tte(r,Math.max(n,t));return{members:i,size:o,alignment:t}}function ERe(e){return wRe[e].BYTES_PER_ELEMENT}function Tte(e,t){return Math.ceil(e/t)*t}var wRe,sp,TRe,IRe,cr,za=f(()=>{wRe={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},sp=class{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}},TRe=128,IRe=5,cr=class{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){let r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(this.capacity*IRe),TRe),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}});var Ite,Qd,Xb,XE,qb,Yb,lp,Jb,Kb,Qb,ev,tv,rv,qE,nv,iv,ov,av,ef,sv,lv,uv,YE,wy,JE,cv,KE,pv,QE,dv,fv,hv,eC,mv,tC,yv,Hu,rC,nC,iC,oC,aC,Zu,sC,lC,uC,gv,cC,In,up,Qn=f(()=>{za();nn();Ite=Ie($e(),1),Qd=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){let n=this.length;return this.resize(n+1),this.emplace(n,t,r)}emplace(t,r,n){let i=t*2;return this.int16[i+0]=r,this.int16[i+1]=n,t}};Qd.prototype.bytesPerElement=4;K("StructArrayLayout2i4",Qd);Xb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,t,r,n)}emplace(t,r,n,i){let o=t*3;return this.int16[o+0]=r,this.int16[o+1]=n,this.int16[o+2]=i,t}};Xb.prototype.bytesPerElement=6;K("StructArrayLayout3i6",Xb);XE=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,t,r,n,i)}emplace(t,r,n,i,o){let a=t*4;return this.int16[a+0]=r,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=o,t}};XE.prototype.bytesPerElement=8;K("StructArrayLayout4i8",XE);qb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,t,r,n,i,o,a)}emplace(t,r,n,i,o,a,s){let l=t*6;return this.int16[l+0]=r,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=o,this.int16[l+4]=a,this.int16[l+5]=s,t}};qb.prototype.bytesPerElement=12;K("StructArrayLayout2i4i12",qb);Yb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,t,r,n,i,o,a)}emplace(t,r,n,i,o,a,s){let l=t*4,u=t*8;return this.int16[l+0]=r,this.int16[l+1]=n,this.uint8[u+4]=i,this.uint8[u+5]=o,this.uint8[u+6]=a,this.uint8[u+7]=s,t}};Yb.prototype.bytesPerElement=8;K("StructArrayLayout2i4ub8",Yb);lp=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){let n=this.length;return this.resize(n+1),this.emplace(n,t,r)}emplace(t,r,n){let i=t*2;return this.float32[i+0]=r,this.float32[i+1]=n,t}};lp.prototype.bytesPerElement=8;K("StructArrayLayout2f8",lp);Jb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a,s,l,u,c){let p=this.length;return this.resize(p+1),this.emplace(p,t,r,n,i,o,a,s,l,u,c)}emplace(t,r,n,i,o,a,s,l,u,c,p){let d=t*10;return this.uint16[d+0]=r,this.uint16[d+1]=n,this.uint16[d+2]=i,this.uint16[d+3]=o,this.uint16[d+4]=a,this.uint16[d+5]=s,this.uint16[d+6]=l,this.uint16[d+7]=u,this.uint16[d+8]=c,this.uint16[d+9]=p,t}};Jb.prototype.bytesPerElement=20;K("StructArrayLayout10ui20",Jb);Kb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a,s,l,u,c,p,d){let h=this.length;return this.resize(h+1),this.emplace(h,t,r,n,i,o,a,s,l,u,c,p,d)}emplace(t,r,n,i,o,a,s,l,u,c,p,d,h){let m=t*12;return this.int16[m+0]=r,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=o,this.uint16[m+4]=a,this.uint16[m+5]=s,this.uint16[m+6]=l,this.uint16[m+7]=u,this.int16[m+8]=c,this.int16[m+9]=p,this.int16[m+10]=d,this.int16[m+11]=h,t}};Kb.prototype.bytesPerElement=24;K("StructArrayLayout4i4ui4i24",Kb);Qb=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,t,r,n)}emplace(t,r,n,i){let o=t*3;return this.float32[o+0]=r,this.float32[o+1]=n,this.float32[o+2]=i,t}};Qb.prototype.bytesPerElement=12;K("StructArrayLayout3f12",Qb);ev=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){let r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){let n=t*1;return this.uint32[n+0]=r,t}};ev.prototype.bytesPerElement=4;K("StructArrayLayout1ul4",ev);tv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a,s,l,u){let c=this.length;return this.resize(c+1),this.emplace(c,t,r,n,i,o,a,s,l,u)}emplace(t,r,n,i,o,a,s,l,u,c){let p=t*10,d=t*5;return this.int16[p+0]=r,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=o,this.int16[p+4]=a,this.int16[p+5]=s,this.uint32[d+3]=l,this.uint16[p+8]=u,this.uint16[p+9]=c,t}};tv.prototype.bytesPerElement=20;K("StructArrayLayout6i1ul2ui20",tv);rv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,t,r,n,i,o,a)}emplace(t,r,n,i,o,a,s){let l=t*6;return this.int16[l+0]=r,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=o,this.int16[l+4]=a,this.int16[l+5]=s,t}};rv.prototype.bytesPerElement=12;K("StructArrayLayout2i2i2i12",rv);qE=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,t,r,n,i,o)}emplace(t,r,n,i,o,a){let s=t*4,l=t*8;return this.float32[s+0]=r,this.float32[s+1]=n,this.float32[s+2]=i,this.int16[l+6]=o,this.int16[l+7]=a,t}};qE.prototype.bytesPerElement=16;K("StructArrayLayout2f1f2i16",qE);nv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,t,r,n,i,o,a)}emplace(t,r,n,i,o,a,s){let l=t*16,u=t*4,c=t*8;return this.uint8[l+0]=r,this.uint8[l+1]=n,this.float32[u+1]=i,this.float32[u+2]=o,this.int16[c+6]=a,this.int16[c+7]=s,t}};nv.prototype.bytesPerElement=16;K("StructArrayLayout2ub2f2i16",nv);iv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,t,r,n)}emplace(t,r,n,i){let o=t*3;return this.uint16[o+0]=r,this.uint16[o+1]=n,this.uint16[o+2]=i,t}};iv.prototype.bytesPerElement=6;K("StructArrayLayout3ui6",iv);ov=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_){let T=this.length;return this.resize(T+1),this.emplace(T,t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_)}emplace(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_,T){let I=t*24,S=t*12,E=t*48;return this.int16[I+0]=r,this.int16[I+1]=n,this.uint16[I+2]=i,this.uint16[I+3]=o,this.uint32[S+2]=a,this.uint32[S+3]=s,this.uint32[S+4]=l,this.uint16[I+10]=u,this.uint16[I+11]=c,this.uint16[I+12]=p,this.float32[S+7]=d,this.float32[S+8]=h,this.uint8[E+36]=m,this.uint8[E+37]=x,this.uint8[E+38]=b,this.uint32[S+10]=_,this.int16[I+22]=T,t}};ov.prototype.bytesPerElement=48;K("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ov);av=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_,T,I,S,E,P,L,k,z,W,Z,Y){let J=this.length;return this.resize(J+1),this.emplace(J,t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_,T,I,S,E,P,L,k,z,W,Z,Y)}emplace(t,r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_,T,I,S,E,P,L,k,z,W,Z,Y,J){let j=t*32,ae=t*16;return this.int16[j+0]=r,this.int16[j+1]=n,this.int16[j+2]=i,this.int16[j+3]=o,this.int16[j+4]=a,this.int16[j+5]=s,this.int16[j+6]=l,this.int16[j+7]=u,this.uint16[j+8]=c,this.uint16[j+9]=p,this.uint16[j+10]=d,this.uint16[j+11]=h,this.uint16[j+12]=m,this.uint16[j+13]=x,this.uint16[j+14]=b,this.uint16[j+15]=_,this.uint16[j+16]=T,this.uint16[j+17]=I,this.uint16[j+18]=S,this.uint16[j+19]=E,this.uint16[j+20]=P,this.uint16[j+21]=L,this.uint16[j+22]=k,this.uint32[ae+12]=z,this.float32[ae+13]=W,this.float32[ae+14]=Z,this.uint16[j+30]=Y,this.uint16[j+31]=J,t}};av.prototype.bytesPerElement=64;K("StructArrayLayout8i15ui1ul2f2ui64",av);ef=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){let r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){let n=t*1;return this.float32[n+0]=r,t}};ef.prototype.bytesPerElement=4;K("StructArrayLayout1f4",ef);sv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,t,r,n)}emplace(t,r,n,i){let o=t*6,a=t*3;return this.uint16[o+0]=r,this.float32[a+1]=n,this.float32[a+2]=i,t}};sv.prototype.bytesPerElement=12;K("StructArrayLayout1ui2f12",sv);lv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,t,r,n)}emplace(t,r,n,i){let o=t*2,a=t*4;return this.uint32[o+0]=r,this.uint16[a+2]=n,this.uint16[a+3]=i,t}};lv.prototype.bytesPerElement=8;K("StructArrayLayout1ul2ui8",lv);uv=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){let n=this.length;return this.resize(n+1),this.emplace(n,t,r)}emplace(t,r,n){let i=t*2;return this.uint16[i+0]=r,this.uint16[i+1]=n,t}};uv.prototype.bytesPerElement=4;K("StructArrayLayout2ui4",uv);YE=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){let r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){let n=t*1;return this.uint16[n+0]=r,t}};YE.prototype.bytesPerElement=2;K("StructArrayLayout1ui2",YE);wy=class extends cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,t,r,n,i)}emplace(t,r,n,i,o){let a=t*4;return this.float32[a+0]=r,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=o,t}};wy.prototype.bytesPerElement=16;K("StructArrayLayout4f16",wy);JE=class extends sp{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ite.default(this.anchorPointX,this.anchorPointY)}};JE.prototype.size=20;cv=class extends tv{get(t){return new JE(this,t)}};K("CollisionBoxArray",cv);KE=class extends sp{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}};KE.prototype.size=48;pv=class extends ov{get(t){return new KE(this,t)}};K("PlacedSymbolArray",pv);QE=class extends sp{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}};QE.prototype.size=64;dv=class extends av{get(t){return new QE(this,t)}};K("SymbolInstanceArray",dv);fv=class extends ef{getoffsetX(t){return this.float32[t*1+0]}};K("GlyphOffsetArray",fv);hv=class extends Xb{getx(t){return this.int16[t*3+0]}gety(t){return this.int16[t*3+1]}gettileUnitDistanceFromAnchor(t){return this.int16[t*3+2]}};K("SymbolLineVertexArray",hv);eC=class extends sp{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}};eC.prototype.size=12;mv=class extends sv{get(t){return new eC(this,t)}};K("TextAnchorOffsetArray",mv);tC=class extends sp{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}};tC.prototype.size=8;yv=class extends lv{get(t){return new tC(this,t)}};K("FeatureIndexArray",yv);Hu=class extends Qd{},rC=class extends Qd{},nC=class extends Qd{},iC=class extends qb{},oC=class extends Yb{},aC=class extends lp{},Zu=class extends Jb{},sC=class extends Kb{},lC=class extends Qb{},uC=class extends ev{},gv=class extends rv{},cC=class extends nv{},In=class extends iv{},up=class extends uv{}});var CRe,Ete,PAt,MAt,Cte=f(()=>{za();CRe=Ct([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ete,size:PAt,alignment:MAt}=CRe});var Bt,Ti=f(()=>{ne();nn();Bt=class e{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1;this.segments=t}prepareSegment(t,r,n,i){let o=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${e.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${e.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!o||o.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i?this.createNewSegment(r,n,i):o}createNewSegment(t,r,n){let i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return n!==void 0&&(i.sortKey=n),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(i),i}getOrCreateLatestSegment(t,r,n){return this.prepareSegment(0,t,r,n)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let t of this.segments)for(let r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,n,i){return new e([{vertexOffset:t,primitiveOffset:r,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}};Bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;K("SegmentVector",Bt)});function uB(e,t){return e=Zr(Math.floor(e),0,255),t=Zr(Math.floor(t),0,255),256*e+t}var Pte=f(()=>{ne()});var xv,Mte=f(()=>{za();xv=Ct([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}])});var Ate=ui((zAt,cB)=>{function PRe(e,t){var r,n,i,o,a,s,l,u,c,p;for(r=e.length&3,n=e.length-r,i=t,a=3432918353,l=461845907,p=0;p<n;)c=e.charCodeAt(p)&255|(e.charCodeAt(++p)&255)<<8|(e.charCodeAt(++p)&255)<<16|(e.charCodeAt(++p)&255)<<24,++p,c=(c&65535)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(c&65535)*l+(((c>>>16)*l&65535)<<16)&4294967295,i^=c,i=i<<13|i>>>19,o=(i&65535)*5+(((i>>>16)*5&65535)<<16)&4294967295,i=(o&65535)+27492+(((o>>>16)+58964&65535)<<16);switch(c=0,r){case 3:c^=(e.charCodeAt(p+2)&255)<<16;case 2:c^=(e.charCodeAt(p+1)&255)<<8;case 1:c^=e.charCodeAt(p)&255,c=(c&65535)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(c&65535)*l+(((c>>>16)*l&65535)<<16)&4294967295,i^=c}return i^=e.length,i^=i>>>16,i=(i&65535)*2246822507+(((i>>>16)*2246822507&65535)<<16)&4294967295,i^=i>>>13,i=(i&65535)*3266489909+(((i>>>16)*3266489909&65535)<<16)&4294967295,i^=i>>>16,i>>>0}typeof cB<"u"&&(cB.exports=PRe)});var Dte=ui((NAt,pB)=>{function MRe(e,t){for(var r=e.length,n=t^r,i=0,o;r>=4;)o=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16),o^=o>>>24,o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16),n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)^o,r-=4,++i;switch(r){case 3:n^=(e.charCodeAt(i+2)&255)<<16;case 2:n^=(e.charCodeAt(i+1)&255)<<8;case 1:n^=e.charCodeAt(i)&255,n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)}return n^=n>>>13,n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16),n^=n>>>15,n>>>0}typeof pB!==void 0&&(pB.exports=MRe)});var dB=ui((UAt,pC)=>{var Lte=Ate(),ARe=Dte();pC.exports=Lte;pC.exports.murmur3=Lte;pC.exports.murmur2=ARe});function Fte(e){let t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:(0,kte.default)(String(e))}function fB(e,t,r,n){for(;r<n;){let i=e[r+n>>1],o=r-1,a=n+1;for(;;){do o++;while(e[o]<i);do a--;while(e[a]>i);if(o>=a)break;dC(e,o,a),dC(t,3*o,3*a),dC(t,3*o+1,3*a+1),dC(t,3*o+2,3*a+2)}a-r<n-a?(fB(e,t,r,a),r=a+1):(fB(e,t,a+1,n),n=a)}}function dC(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}var kte,bv,Ote=f(()=>{kte=Ie(dB(),1);nn();bv=class e{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,n,i){this.ids.push(Fte(t)),this.positions.push(r,n,i)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let r=Fte(t),n=0,i=this.ids.length-1;for(;n<i;){let a=n+i>>1;this.ids[a]>=r?i=a:n=a+1}let o=[];for(;this.ids[n]===r;){let a=this.positions[3*n],s=this.positions[3*n+1],l=this.positions[3*n+2];o.push({index:a,start:s,end:l}),n++}return o}static serialize(t,r){let n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return fB(n,i,0,n.length-1),r&&r.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){let r=new e;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}};K("FeaturePositionMap",bv)});var vv,qr,Wu,Xu,GAt,En=f(()=>{wn();vv=class{constructor(t,r){this.gl=t.gl,this.location=r}},qr=class extends vv{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}},Wu=class extends vv{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){(t[0]!==this.current[0]||t[1]!==this.current[1]||t[2]!==this.current[2]||t[3]!==this.current[3])&&(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}},Xu=class extends vv{constructor(t,r){super(t,r),this.current=Ve.transparent}set(t){(t.r!==this.current.r||t.g!==this.current.g||t.b!==this.current.b||t.a!==this.current.a)&&(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}},GAt=new Float32Array(16)});function hB(e){return[uB(255*e.r,255*e.g),uB(255*e.b,255*e.a)]}function DRe(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function LRe(e){return{"line-pattern":{source:Zu,composite:Zu},"fill-pattern":{source:Zu,composite:Zu},"fill-extrusion-pattern":{source:Zu,composite:Zu}}[e]}function Rte(e,t,r){let n={color:{source:lp,composite:wy},number:{source:ef,composite:lp}},i=LRe(e);return i&&i[r]||n[t][r]}var tf,cp,ks,Qo,Dl,fC,yo,Ty=f(()=>{Pte();wn();nn();Tn();Qn();ne();Mte();wi();Ote();En();tf=class{constructor(t,r,n){this.value=t,this.uniformNames=r.map(i=>`u_${i}`),this.type=n}setUniform(t,r,n){t.set(n.constantOr(this.value))}getBinding(t,r,n){return this.type==="color"?new Xu(t,r):new qr(t,r)}},cp=class{constructor(t,r){this.uniformNames=r.map(n=>`u_${n}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,n,i){let o=i==="u_pattern_to"?this.patternTo:i==="u_pattern_from"?this.patternFrom:i==="u_pixel_ratio_to"?this.pixelRatioTo:i==="u_pixel_ratio_from"?this.pixelRatioFrom:null;o&&t.set(o)}getBinding(t,r,n){return n.substr(0,9)==="u_pattern"?new Wu(t,r):new qr(t,r)}},ks=class{constructor(t,r,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=r.map(o=>({name:`a_${o}`,type:"Float32",components:n==="color"?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(t,r,n,i,o){let a=this.paintVertexArray.length,s=this.expression.evaluate(new mt(0),r,{},i,[],o);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,r,n,i){let o=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,r,o)}_setPaintValue(t,r,n){if(this.type==="color"){let i=hB(n);for(let o=t;o<r;o++)this.paintVertexArray.emplace(o,i[0],i[1])}else{for(let i=t;i<r;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},Qo=class{constructor(t,r,n,i,o,a){this.expression=t,this.uniformNames=r.map(s=>`u_${s}_t`),this.type=n,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=r.map(s=>({name:`a_${s}`,type:"Float32",components:n==="color"?4:2,offset:0})),this.paintVertexArray=new a}populatePaintArray(t,r,n,i,o){let a=this.expression.evaluate(new mt(this.zoom),r,{},i,[],o),s=this.expression.evaluate(new mt(this.zoom+1),r,{},i,[],o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,s)}updatePaintArray(t,r,n,i){let o=this.expression.evaluate({zoom:this.zoom},n,i),a=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,r,o,a)}_setPaintValue(t,r,n,i){if(this.type==="color"){let o=hB(n),a=hB(i);for(let s=t;s<r;s++)this.paintVertexArray.emplace(s,o[0],o[1],a[0],a[1])}else{for(let o=t;o<r;o++)this.paintVertexArray.emplace(o,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){let n=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,i=Zr(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)}getBinding(t,r,n){return new qr(t,r)}},Dl=class{constructor(t,r,n,i,o,a){this.expression=t,this.type=r,this.useIntegerZoom=n,this.zoom=i,this.layerId=a,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,r,n){let i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,r.patterns&&r.patterns[this.layerId],n)}updatePaintArray(t,r,n,i,o){this._setPaintValues(t,r,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,r,n,i){if(!i||!n)return;let{min:o,mid:a,max:s}=n,l=i[o],u=i[a],c=i[s];if(!(!l||!u||!c))for(let p=t;p<r;p++)this.zoomInPaintVertexArray.emplace(p,u.tl[0],u.tl[1],u.br[0],u.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],u.pixelRatio,l.pixelRatio),this.zoomOutPaintVertexArray.emplace(p,u.tl[0],u.tl[1],u.br[0],u.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],u.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,xv.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,xv.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}},fC=class{constructor(t,r,n){this.binders={},this._buffers=[];let i=[];for(let o in t.paint._values){if(!n(o))continue;let a=t.paint.get(o);if(!(a instanceof mo)||!cy(a.property.specification))continue;let s=DRe(o,t.type),l=a.value,u=a.property.specification.type,c=a.property.useIntegerZoom,p=a.property.specification["property-type"],d=p==="cross-faded"||p==="cross-faded-data-driven";if(l.kind==="constant")this.binders[o]=d?new cp(l.value,s):new tf(l.value,s,u),i.push(`/u_${o}`);else if(l.kind==="source"||d){let h=Rte(o,u,"source");this.binders[o]=d?new Dl(l,u,c,r,h,t.id):new ks(l,s,u,h),i.push(`/a_${o}`)}else{let h=Rte(o,u,"composite");this.binders[o]=new Qo(l,s,u,c,r,h),i.push(`/z_${o}`)}}this.cacheKey=i.sort().join("")}getMaxValue(t){let r=this.binders[t];return r instanceof ks||r instanceof Qo?r.maxValue:0}populatePaintArrays(t,r,n,i,o){for(let a in this.binders){let s=this.binders[a];(s instanceof ks||s instanceof Qo||s instanceof Dl)&&s.populatePaintArray(t,r,n,i,o)}}setConstantPatternPositions(t,r){for(let n in this.binders){let i=this.binders[n];i instanceof cp&&i.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,n,i,o){let a=!1;for(let s in t){let l=r.getPositions(s);for(let u of l){let c=n.feature(u.index);for(let p in this.binders){let d=this.binders[p];if((d instanceof ks||d instanceof Qo||d instanceof Dl)&&d.expression.isStateDependent===!0){let h=i.paint.get(p);d.expression=h.value,d.updatePaintArray(u.start,u.end,c,t[s],o),a=!0}}}}return a}defines(){let t=[];for(let r in this.binders){let n=this.binders[r];(n instanceof tf||n instanceof cp)&&t.push(...n.uniformNames.map(i=>`#define HAS_UNIFORM_${i}`))}return t}getBinderAttributes(){let t=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof ks||n instanceof Qo)for(let i=0;i<n.paintVertexAttributes.length;i++)t.push(n.paintVertexAttributes[i].name);else if(n instanceof Dl)for(let i=0;i<xv.members.length;i++)t.push(xv.members[i].name)}return t}getBinderUniforms(){let t=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof tf||n instanceof cp||n instanceof Qo)for(let i of n.uniformNames)t.push(i)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){let n=[];for(let i in this.binders){let o=this.binders[i];if(o instanceof tf||o instanceof cp||o instanceof Qo){for(let a of o.uniformNames)if(r[a]){let s=o.getBinding(t,r[a],a);n.push({name:a,property:i,binding:s})}}}return n}setUniforms(t,r,n,i){for(let{name:o,property:a,binding:s}of r)this.binders[a].setUniform(s,i,n.get(a),o)}updatePaintBuffers(t){this._buffers=[];for(let r in this.binders){let n=this.binders[r];if(t&&n instanceof Dl){let i=t.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof ks||n instanceof Qo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(let r in this.binders){let n=this.binders[r];(n instanceof ks||n instanceof Qo||n instanceof Dl)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(let t in this.binders){let r=this.binders[t];(r instanceof ks||r instanceof Qo||r instanceof Dl)&&r.destroy()}}},yo=class{constructor(t,r,n=()=>!0){this.programConfigurations={};for(let i of t)this.programConfigurations[i.id]=new fC(i,r,n);this.needsUpload=!1,this._featureMap=new bv,this._bufferOffset=0}populatePaintArrays(t,r,n,i,o,a){for(let s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(t,r,i,o,a);r.id!==void 0&&this._featureMap.add(r.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,n,i){for(let o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,r,o,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(let r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(let t in this.programConfigurations)this.programConfigurations[t].destroy()}};K("ConstantBinder",tf);K("CrossFadedConstantBinder",cp);K("SourceExpressionBinder",ks);K("CrossFadedCompositeBinder",Dl);K("CompositeExpressionBinder",Qo);K("ProgramConfiguration",fC,{omit:["_buffers"]});K("ProgramConfigurationSet",yo)});var Iy=f(()=>{Qn()});function go(e){let t=8192/e.extent,r=e.loadGeometry();for(let n=0;n<r.length;n++){let i=r[n];for(let o=0;o<i.length;o++){let a=i[o],s=Math.round(a.x*t),l=Math.round(a.y*t);a.x=Zr(s,Bte,mB),a.y=Zr(l,Bte,mB),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}var kRe,mB,Bte,pp=f(()=>{ne();Ot();kRe=15,mB=Math.pow(2,kRe-1)-1,Bte=-mB-1});function xo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?go(e):[]}}var dp=f(()=>{pp()});function ORe(e,t,r,n,i){e.emplaceBack(zte+t*8+n,zte+r*8+i)}var zte,Ey,yB=f(()=>{Qn();Cte();Ti();Ty();Iy();pp();dp();Ot();nn();wi();zte=-32768;Ey=class{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new rC,this.indexArray=new In,this.segments=new Bt,this.programConfigurations=new yo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,n){let i=this.layers[0],o=[],a=null,s=!1,l=i.type==="heatmap";if(i.type==="circle"){let c=i;a=c.layout.get("circle-sort-key"),s=!a.isConstant(),l=l||c.paint.get("circle-pitch-alignment")==="map"}let u=l?r.subdivisionGranularity.circle:1;for(let{feature:c,id:p,index:d,sourceLayerIndex:h}of t){let m=this.layers[0]._featureFilter.needGeometry,x=xo(c,m);if(!this.layers[0]._featureFilter.filter(new mt(this.zoom,{globalState:this.globalState}),x,n))continue;let b=s?a.evaluate(x,{},n):void 0,_={id:p,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:m?x.geometry:go(c),patterns:{},sortKey:b};o.push(_)}s&&o.sort((c,p)=>c.sortKey-p.sortKey);for(let c of o){let{geometry:p,index:d,sourceLayerIndex:h}=c,m=t[d].feature;this.addFeature(c,p,d,n,u),r.featureIndex.insert(m,p,d,h,this.index)}}update(t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ete),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,n,i,o=1){let a;switch(o){case 1:a=[0,7];break;case 3:a=[0,2,5,7];break;case 5:a=[0,1,3,4,6,7];break;case 7:a=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${o}; valid values are 1, 3, 5, 7.`)}let s=a.length;for(let l of r)for(let u of l){let c=u.x,p=u.y;if(c<0||c>=8192||p<0||p>=8192)continue;let d=this.segments.prepareSegment(s*s,this.layoutVertexArray,this.indexArray,t.sortKey),h=d.vertexLength;for(let m=0;m<s;m++)for(let x=0;x<s;x++)ORe(this.layoutVertexArray,c,p,a[x],a[m]);for(let m=0;m<s-1;m++)for(let x=0;x<s-1;x++){let b=h+m*s+x,_=h+(m+1)*s+x;this.indexArray.emplaceBack(b,_+1,b+1),this.indexArray.emplaceBack(b,_,_+1)}d.vertexLength+=s*s,d.primitiveLength+=(s-1)*(s-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)}};K("CircleBucket",Ey,{omit:["layers"]})});function RRe(e,t){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){let o=e[n],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function Nte(e,t,r,n,i){for(let a of e)if(t<=a.x&&r<=a.y&&n>=a.x&&i>=a.y)return!0;let o=[new _v.default(t,r),new _v.default(t,i),new _v.default(n,i),new _v.default(n,r)];if(e.length>2){for(let a of o)if(RRe(e,a))return!0}for(let a=0;a<e.length-1;a++){let s=e[a],l=e[a+1];if(BRe(s,l,o))return!0}return!1}function BRe(e,t,r){let n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;let o=gb(e,t,r[0]);return o!==gb(e,t,r[1])||o!==gb(e,t,r[2])||o!==gb(e,t,r[3])}var _v,fp=f(()=>{ne();_v=Ie($e(),1)});var NRe,Sv=f(()=>{NRe=Ie($e(),1)});var Ute=f(()=>{Tn()});var $Re,bB=f(()=>{Ba();yB();fp();Sv();Ute();$Re=Ie($e(),1)});var hC,$te=f(()=>{yB();nn();hC=class extends Ey{};K("HeatmapBucket",hC,{omit:["layers"]})});var Vte=f(()=>{Tn()});function vB(e,{width:t,height:r},n,i){if(!i)i=new Uint8Array(t*r*n);else if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*n)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${t*r*n}`);return e.width=t,e.height=r,e.data=i,e}function jte(e,{width:t,height:r},n){if(t===e.width&&r===e.height)return;let i=vB({},{width:t,height:r},n);_B(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},n),e.width=t,e.height=r,e.data=i.data}function _B(e,t,r,n,i,o){if(i.width===0||i.height===0)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");let a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){let u=((r.y+l)*e.width+r.x)*o,c=((n.y+l)*t.width+n.x)*o;for(let p=0;p<i.width*o;p++)s[c+p]=a[u+p]}return t}var rf,hn,Os=f(()=>{nn();rf=class e{constructor(t,r){vB(this,t,1,r)}resize(t){jte(this,t,1)}clone(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,n,i,o){_B(t,r,n,i,o,1)}},hn=class e{constructor(t,r){vB(this,t,4,r)}resize(t){jte(this,t,4)}replace(t,r){r?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t}clone(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,n,i,o){_B(t,r,n,i,o,4)}setPixel(t,r,n){let i=(t*this.width+r)*4;this.data[i+0]=Math.round(n.r*255/n.a),this.data[i+1]=Math.round(n.g*255/n.a),this.data[i+2]=Math.round(n.b*255/n.a),this.data[i+3]=Math.round(n.a*255)}};K("AlphaImage",rf);K("RGBAImage",hn)});var SB=f(()=>{Os();ne()});var mC=f(()=>{Ba();$te();Vte();SB()});var Gte=f(()=>{Tn()});var wB=f(()=>{Ba();Gte();ne()});var Hte=f(()=>{Tn()});var Yr,Bi=f(()=>{ne();Yr=class{constructor(t,r,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(r,i)}update(t,r,n){let{width:i,height:o}=t,a=(!this.size||this.size[0]!==i||this.size[1]!==o)&&!n,{context:s}=this,{gl:l}=s;if(this.useMipmap=!!(r&&r.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!r||r.premultiply!==!1)),a)this.size=[i,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Ts(t)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,t):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,t.data);else{let{x:u,y:c}=n||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Ts(t)?l.texSubImage2D(l.TEXTURE_2D,0,u,c,l.RGBA,l.UNSIGNED_BYTE,t):l.texSubImage2D(l.TEXTURE_2D,0,u,c,i,o,l.RGBA,l.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D),s.pixelStoreUnpackFlipY.setDefault(),s.pixelStoreUnpack.setDefault(),s.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,r,n){let{context:i}=this,{gl:o}=i;o.bindTexture(o.TEXTURE_2D,this.texture),n===o.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(n=o.LINEAR),t!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||t),this.filter=t),r!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0}destroy(){let{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}});function Zte(e,t){let r=t[0],n=t[1],i=t[2],o=t[3],a=Math.min(r,n,i),s=Math.round((e+o)/a);return{r:Math.floor(s*a/r)%256,g:Math.floor(s*a/n)%256,b:Math.floor(s*a/i)%256}}var TB,IB=f(()=>{Os();ne();nn();TB=class{constructor(t,r,n,i=1,o=1,a=1,s=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n)){Cr(`"${n}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);return}this.stride=r.height;let l=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=o,this.blueFactor=a,this.baseShift=s;break;case"mapbox":default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;break}for(let u=0;u<l;u++)this.data[this._idx(-1,u)]=this.data[this._idx(0,u)],this.data[this._idx(l,u)]=this.data[this._idx(l-1,u)],this.data[this._idx(u,-1)]=this.data[this._idx(u,0)],this.data[this._idx(u,l)]=this.data[this._idx(u,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let u=0;u<l;u++)for(let c=0;c<l;c++){let p=this.get(u,c);p>this.max&&(this.max=p),p<this.min&&(this.min=p)}}get(t,r){let n=new Uint8Array(this.data.buffer),i=this._idx(t,r)*4;return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,n){return t*this.redFactor+r*this.greenFactor+n*this.blueFactor-this.baseShift}pack(t){return Zte(t,this.getUnpackVector())}getPixels(){return new hn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=r*this.dim,o=r*this.dim+this.dim,a=n*this.dim,s=n*this.dim+this.dim;switch(r){case-1:i=o-1;break;case 1:o=i+1;break}switch(n){case-1:a=s-1;break;case 1:s=a+1;break}let l=-r*this.dim,u=-n*this.dim;for(let c=a;c<s;c++)for(let p=i;p<o;p++)this.data[this._idx(p,c)]=t.data[this._idx(p+l,c+u)]}};K("DEMData",TB)});var EB=f(()=>{Ba();Hte();ne();Bi();Os();IB()});var jRe,Wte,UDt,$Dt,Xte=f(()=>{za();jRe=Ct([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wte,size:UDt,alignment:$Dt}=jRe});function Cy(e,t,r){let n=r.patternDependencies,i=!1;for(let o of t){let a=o.paint.get(`${e}-pattern`);a.isConstant()||(i=!0);let s=a.constantOr(null);s&&(i=!0,n[s.to]=!0,n[s.from]=!0)}return i}function Py(e,t,r,n,i){let o=i.patternDependencies;for(let a of t){let l=a.paint.get(`${e}-pattern`).value;if(l.kind!=="constant"){let u=l.evaluate({zoom:n-1},r,{},i.availableImages),c=l.evaluate({zoom:n},r,{},i.availableImages),p=l.evaluate({zoom:n+1},r,{},i.availableImages);u=u&&u.name?u.name:u,c=c&&c.name?c.name:c,p=p&&p.name?p.name:p,o[u]=!0,o[c]=!0,o[p]=!0,r.patterns[a.id]={min:u,mid:c,max:p}}}return r}var yC=f(()=>{});function MB(e,t,r=2){let n=t&&t.length,i=n?t[0]*r:e.length,o=Yte(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;let s,l,u;if(n&&(o=XRe(e,t,o,r)),e.length>80*r){s=1/0,l=1/0;let c=-1/0,p=-1/0;for(let d=r;d<i;d+=r){let h=e[d],m=e[d+1];h<s&&(s=h),m<l&&(l=m),h>c&&(c=h),m>p&&(p=m)}u=Math.max(c-s,p-l),u=u!==0?32767/u:0}return Tv(o,a,r,s,l,u,0),a}function Yte(e,t,r,n,i){let o;if(i===oBe(e,t,r,n)>0)for(let a=t;a<r;a+=n)o=qte(a/n|0,e[a],e[a+1],o);else for(let a=r-n;a>=t;a-=n)o=qte(a/n|0,e[a],e[a+1],o);return o&&My(o,o.next)&&(Ev(o),o=o.next),o}function nf(e,t){if(!e)return e;t||(t=e);let r=e,n;do if(n=!1,!r.steiner&&(My(r,r.next)||Nr(r.prev,r,r.next)===0)){if(Ev(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Tv(e,t,r,n,i,o,a){if(!e)return;!a&&o&&QRe(e,n,i,o);let s=e;for(;e.prev!==e.next;){let l=e.prev,u=e.next;if(o?HRe(e,n,i,o):GRe(e)){t.push(l.i,e.i,u.i),Ev(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=ZRe(nf(e),t),Tv(e,t,r,n,i,o,2)):a===2&&WRe(e,t,r,n,i,o):Tv(nf(e),t,r,n,i,o,1);break}}}function GRe(e){let t=e.prev,r=e,n=e.next;if(Nr(t,r,n)>=0)return!1;let i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=Math.min(i,o,a),p=Math.min(s,l,u),d=Math.max(i,o,a),h=Math.max(s,l,u),m=n.next;for(;m!==t;){if(m.x>=c&&m.x<=d&&m.y>=p&&m.y<=h&&wv(i,s,o,l,a,u,m.x,m.y)&&Nr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function HRe(e,t,r,n){let i=e.prev,o=e,a=e.next;if(Nr(i,o,a)>=0)return!1;let s=i.x,l=o.x,u=a.x,c=i.y,p=o.y,d=a.y,h=Math.min(s,l,u),m=Math.min(c,p,d),x=Math.max(s,l,u),b=Math.max(c,p,d),_=CB(h,m,t,r,n),T=CB(x,b,t,r,n),I=e.prevZ,S=e.nextZ;for(;I&&I.z>=_&&S&&S.z<=T;){if(I.x>=h&&I.x<=x&&I.y>=m&&I.y<=b&&I!==i&&I!==a&&wv(s,c,l,p,u,d,I.x,I.y)&&Nr(I.prev,I,I.next)>=0||(I=I.prevZ,S.x>=h&&S.x<=x&&S.y>=m&&S.y<=b&&S!==i&&S!==a&&wv(s,c,l,p,u,d,S.x,S.y)&&Nr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;I&&I.z>=_;){if(I.x>=h&&I.x<=x&&I.y>=m&&I.y<=b&&I!==i&&I!==a&&wv(s,c,l,p,u,d,I.x,I.y)&&Nr(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;S&&S.z<=T;){if(S.x>=h&&S.x<=x&&S.y>=m&&S.y<=b&&S!==i&&S!==a&&wv(s,c,l,p,u,d,S.x,S.y)&&Nr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function ZRe(e,t){let r=e;do{let n=r.prev,i=r.next.next;!My(n,i)&&Kte(n,r,r.next,i)&&Iv(n,i)&&Iv(i,n)&&(t.push(n.i,r.i,i.i),Ev(r),Ev(r.next),r=e=i),r=r.next}while(r!==e);return nf(r)}function WRe(e,t,r,n,i,o){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&rBe(a,s)){let l=Qte(a,s);a=nf(a,a.next),l=nf(l,l.next),Tv(a,t,r,n,i,o,0),Tv(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function XRe(e,t,r,n){let i=[];for(let o=0,a=t.length;o<a;o++){let s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=Yte(e,s,l,n,!1);u===u.next&&(u.steiner=!0),i.push(tBe(u))}i.sort(qRe);for(let o=0;o<i.length;o++)r=YRe(i[o],r);return r}function qRe(e,t){let r=e.x-t.x;if(r===0&&(r=e.y-t.y,r===0)){let n=(e.next.y-e.y)/(e.next.x-e.x),i=(t.next.y-t.y)/(t.next.x-t.x);r=n-i}return r}function YRe(e,t){let r=JRe(e,t);if(!r)return t;let n=Qte(r,e);return nf(n,n.next),nf(r,r.next)}function JRe(e,t){let r=t,n=e.x,i=e.y,o=-1/0,a;if(My(e,r))return r;do{if(My(e,r.next))return r.next;if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){let p=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(p<=n&&p>o&&(o=p,a=r.x<r.next.x?r:r.next,p===n))return a}r=r.next}while(r!==t);if(!a)return null;let s=a,l=a.x,u=a.y,c=1/0;r=a;do{if(n>=r.x&&r.x>=l&&n!==r.x&&Jte(i<u?n:o,i,l,u,i<u?o:n,i,r.x,r.y)){let p=Math.abs(i-r.y)/(n-r.x);Iv(r,e)&&(p<c||p===c&&(r.x>a.x||r.x===a.x&&KRe(a,r)))&&(a=r,c=p)}r=r.next}while(r!==s);return a}function KRe(e,t){return Nr(e.prev,e,t.prev)<0&&Nr(t.next,e,e.next)<0}function QRe(e,t,r,n){let i=e;do i.z===0&&(i.z=CB(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,eBe(i)}function eBe(e){let t,r=1;do{let n=e,i;e=null;let o=null;for(t=0;n;){t++;let a=n,s=0;for(let u=0;u<r&&(s++,a=a.nextZ,!!a);u++);let l=r;for(;s>0||l>0&&a;)s!==0&&(l===0||!a||n.z<=a.z)?(i=n,n=n.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=a}o.nextZ=null,r*=2}while(t>1);return e}function CB(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function tBe(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Jte(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function wv(e,t,r,n,i,o,a,s){return!(e===a&&t===s)&&Jte(e,t,r,n,i,o,a,s)}function rBe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!nBe(e,t)&&(Iv(e,t)&&Iv(t,e)&&iBe(e,t)&&(Nr(e.prev,e,t.prev)||Nr(e,t.prev,t))||My(e,t)&&Nr(e.prev,e,e.next)>0&&Nr(t.prev,t,t.next)>0)}function Nr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function My(e,t){return e.x===t.x&&e.y===t.y}function Kte(e,t,r,n){let i=xC(Nr(e,t,r)),o=xC(Nr(e,t,n)),a=xC(Nr(r,n,e)),s=xC(Nr(r,n,t));return!!(i!==o&&a!==s||i===0&&gC(e,r,t)||o===0&&gC(e,n,t)||a===0&&gC(r,e,n)||s===0&&gC(r,t,n))}function gC(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function xC(e){return e>0?1:e<0?-1:0}function nBe(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Kte(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Iv(e,t){return Nr(e.prev,e,e.next)<0?Nr(e,t,e.next)>=0&&Nr(e,e.prev,t)>=0:Nr(e,t,e.prev)<0||Nr(e,e.next,t)<0}function iBe(e,t){let r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function Qte(e,t){let r=PB(e.i,e.x,e.y),n=PB(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function qte(e,t,r,n){let i=PB(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ev(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function PB(e,t,r){return{i:e,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function oBe(e,t,r,n){let i=0;for(let o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}var ere=f(()=>{});var ea,bC,of,vC=f(()=>{ea=class{constructor(t,r){if(r>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=r}getGranularityForZoomLevel(t){let r=1<<t;return Math.max(Math.floor(this._baseZoomGranularity/r),this._minGranularity,1)}},bC=class bC{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}};bC.noSubdivision=new bC({fill:new ea(0,0),line:new ea(0,0),tile:new ea(0,0),stencil:new ea(0,0),circle:1});of=bC});function _C(e,t,r,n=!0){return new AB(r,t).subdividePolygonInternal(e,n)}function Ay(e,t,r=!1){if(!e||e.length<1)return[];if(e.length<2)return[];let n=e[0],i=e[e.length-1],o=r&&(n.x!==i.x||n.y!==i.y);if(t<2)return o?[...e,e[0]]:[...e];let a=Math.floor(8192/t),s=[];s.push(new Cv.default(e[0].x,e[0].y));let l=e.length,u=o?l:l-1;for(let c=0;c<u;c++){let p=e[c],d=c<l-1?e[c+1]:e[0],h=p.x,m=p.y,x=d.x,b=d.y,_=h!==x,T=m!==b;if(!_&&!T)continue;let I=x-h,S=b-m,E=Math.abs(I),P=Math.abs(S),L=h,k=m;for(;;){let W=I>0?(Math.floor(L/a)+1)*a:(Math.ceil(L/a)-1)*a,Z=S>0?(Math.floor(k/a)+1)*a:(Math.ceil(k/a)-1)*a,Y=Math.abs(L-W),J=Math.abs(k-Z),j=Math.abs(L-x),ae=Math.abs(k-b),ve=_?Y/E:Number.POSITIVE_INFINITY,xe=T?J/P:Number.POSITIVE_INFINITY;if((j<=Y||!_)&&(ae<=J||!T))break;if(ve<xe&&_||!T){L=W,k=k+S*ve;let Le=new Cv.default(L,Math.round(k));(s[s.length-1].x!==Le.x||s[s.length-1].y!==Le.y)&&s.push(Le)}else{L=L+I*xe,k=Z;let Le=new Cv.default(Math.round(L),k);(s[s.length-1].x!==Le.x||s[s.length-1].y!==Le.y)&&s.push(Le)}}let z=new Cv.default(x,b);(s[s.length-1].x!==z.x||s[s.length-1].y!==z.y)&&s.push(z)}return s}function aBe(e){let t=[],r=[];for(let n of e)if(n.length!==0){n!==e[0]&&t.push(r.length/2);for(let i=0;i<n.length;i++)r.push(n[i].x),r.push(n[i].y)}return{flattened:r,holeIndices:t}}function sBe(e,t){let r=[];for(let n=0;n<t.length;n+=3){let i=t[n],o=t[n+1],a=t[n+2],s=e[i*2],l=e[i*2+1],u=e[o*2],c=e[o*2+1],p=e[a*2],d=e[a*2+1],h=u-s,m=c-l,x=p-s,b=d-l;h*b-m*x>0?(r.push(i),r.push(a),r.push(o)):(r.push(i),r.push(o),r.push(a))}return r}function lBe(e,t,r){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let n=0,i=e[t[0]*2];for(let l=1;l<t.length;l++){let u=e[t[l]*2];u<i&&(i=u,n=l)}let o=t.length,a=n,s=(a+1)%o;for(;;){let l=a-1>=0?a-1:o-1,u=(s+1)%o,c=e[t[l]*2],p=e[t[l]*2+1],d=e[t[u]*2],h=e[t[u]*2+1],m=e[t[a]*2],x=e[t[a]*2+1],b=e[t[s]*2],_=e[t[s]*2+1],T=!1;if(c<d)T=!0;else if(c>d)T=!1;else{let I=b-m,E=_-x,P=-I,L=x<_?1:-1,k=((c-m)*E+(p-x)*P)*L,z=((d-m)*E+(h-x)*P)*L;k>z&&(T=!0)}if(T){let I=t[l],S=t[a],E=t[s];I!==S&&I!==E&&S!==E&&r.push(E,S,I),a--,a<0&&(a=o-1)}else{let I=t[u],S=t[a],E=t[s];I!==S&&I!==E&&S!==E&&r.push(E,S,I),s++,s>=o&&(s=0)}if(l===u)break}}var Cv,hp,af,AB,sf=f(()=>{Cv=Ie($e(),1);Ot();ere();vC();nn();K("SubdivisionGranularityExpression",ea);K("SubdivisionGranularitySetting",of);hp=-32768,af=32767,AB=class{constructor(t,r){this._vertexBuffer=[];this._vertexDictionary=new Map;this._used=!1;this._granularity=t,this._granularityCellSize=8192/t,this._canonical=r}_getKey(t,r){return t=t+32768,r=r+32768,t<<16|r<<0}_vertexToIndex(t,r){if(t<-32768||r<-32768||t>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let n=Math.round(t)|0,i=Math.round(r)|0,o=this._getKey(n,i);if(this._vertexDictionary.has(o))return this._vertexDictionary.get(o);let a=this._vertexBuffer.length/2;return this._vertexDictionary.set(o,a),this._vertexBuffer.push(n,i),a}_subdivideTrianglesScanline(t){if(this._granularity<2)return sBe(this._vertexBuffer,t);let r=[],n=t.length;for(let i=0;i<n;i+=3){let o=[t[i+0],t[i+1],t[i+2]],a=[this._vertexBuffer[t[i+0]*2+0],this._vertexBuffer[t[i+0]*2+1],this._vertexBuffer[t[i+1]*2+0],this._vertexBuffer[t[i+1]*2+1],this._vertexBuffer[t[i+2]*2+0],this._vertexBuffer[t[i+2]*2+1]],s=1/0,l=1/0,u=-1/0,c=-1/0;for(let x=0;x<3;x++){let b=a[x*2],_=a[x*2+1];s=Math.min(s,b),u=Math.max(u,b),l=Math.min(l,_),c=Math.max(c,_)}if(s===u||l===c)continue;let p=Math.floor(s/this._granularityCellSize),d=Math.ceil(u/this._granularityCellSize),h=Math.floor(l/this._granularityCellSize),m=Math.ceil(c/this._granularityCellSize);if(p===d&&h===m){r.push(...o);continue}for(let x=h;x<m;x++){let b=this._scanlineGenerateVertexRingForCellRow(x,a,o);lBe(this._vertexBuffer,b,r)}}return r}_scanlineGenerateVertexRingForCellRow(t,r,n){let i=t*this._granularityCellSize,o=i+this._granularityCellSize,a=[];for(let s=0;s<3;s++){let l=r[s*2],u=r[s*2+1],c=r[(s+1)*2%6],p=r[((s+1)*2+1)%6],d=r[(s+2)*2%6],h=r[((s+2)*2+1)%6],m=c-l,x=p-u,b=m===0,_=x===0,T=(i-u)/x,I=(o-u)/x,S=Math.min(T,I),E=Math.max(T,I);if(!_&&(S>=1||E<=0)||_&&(u<i||u>o)){p>=i&&p<=o&&a.push(n[(s+1)%3]);continue}if(!_&&S>0){let k=l+m*S,z=u+x*S;a.push(this._vertexToIndex(k,z))}let P=l+m*Math.max(S,0),L=l+m*Math.min(E,1);if(b||this._generateIntraEdgeVertices(a,l,u,c,p,P,L),!_&&E<1){let k=l+m*E,z=u+x*E;a.push(this._vertexToIndex(k,z))}(_||p>=i&&p<=o)&&a.push(n[(s+1)%3]),!_&&(p<=i||p>=o)&&this._generateInterEdgeVertices(a,l,u,c,p,d,h,L,i,o)}return a}_generateIntraEdgeVertices(t,r,n,i,o,a,s){let l=i-r,u=o-n,c=u===0,p=c?Math.min(r,i):Math.min(a,s),d=c?Math.max(r,i):Math.max(a,s),h=Math.floor(p/this._granularityCellSize)+1,m=Math.ceil(d/this._granularityCellSize)-1;if(c?r<i:a<s)for(let b=h;b<=m;b++){let _=b*this._granularityCellSize,T=n+u*(_-r)/l;t.push(this._vertexToIndex(_,T))}else for(let b=m;b>=h;b--){let _=b*this._granularityCellSize,T=n+u*(_-r)/l;t.push(this._vertexToIndex(_,T))}}_generateInterEdgeVertices(t,r,n,i,o,a,s,l,u,c){let p=o-n,d=a-i,h=s-o,m=(u-o)/h,x=(c-o)/h,b=Math.min(m,x),_=Math.max(m,x),T=i+d*b,I=Math.floor(Math.min(T,l)/this._granularityCellSize)+1,S=Math.ceil(Math.max(T,l)/this._granularityCellSize)-1,E=l<T,P=h===0;if(P&&(s===u||s===c))return;if(P||b>=1||_<=0){let k=r-a,z=n-s,W=(u-s)/z,Z=(c-s)/z,Y=Math.min(W,Z),J=a+k*Y;I=Math.floor(Math.min(J,l)/this._granularityCellSize)+1,S=Math.ceil(Math.max(J,l)/this._granularityCellSize)-1,E=l<J}let L=p>0?c:u;if(E)for(let k=I;k<=S;k++){let z=k*this._granularityCellSize;t.push(this._vertexToIndex(z,L))}else for(let k=S;k>=I;k--){let z=k*this._granularityCellSize;t.push(this._vertexToIndex(z,L))}}_generateOutline(t){let r=[];for(let n of t){let i=Ay(n,this._granularity,!0),o=this._pointArrayToIndices(i),a=[];for(let s=1;s<o.length;s++)a.push(o[s-1]),a.push(o[s]);r.push(a)}return r}_handlePoles(t){let r=!1,n=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(n=!0)),(r||n)&&this._fillPoles(t,r,n)}_ensureNoPoleVertices(){let t=this._vertexBuffer;for(let r=0;r<t.length;r+=2){let n=t[r+1];n===hp&&(t[r+1]=hp+1),n===af&&(t[r+1]=af-1)}}_generatePoleQuad(t,r,n,i,o,a){i>o!=(a===hp)?(t.push(r),t.push(n),t.push(this._vertexToIndex(i,a)),t.push(n),t.push(this._vertexToIndex(o,a)),t.push(this._vertexToIndex(i,a))):(t.push(n),t.push(r),t.push(this._vertexToIndex(i,a)),t.push(this._vertexToIndex(o,a)),t.push(n),t.push(this._vertexToIndex(i,a)))}_fillPoles(t,r,n){let i=this._vertexBuffer,o=0,a=8192,s=t.length;for(let l=2;l<s;l+=3){let u=t[l-2],c=t[l-1],p=t[l],d=i[u*2],h=i[u*2+1],m=i[c*2],x=i[c*2+1],b=i[p*2],_=i[p*2+1];r&&(h===o&&x===o&&this._generatePoleQuad(t,u,c,d,m,hp),x===o&&_===o&&this._generatePoleQuad(t,c,p,m,b,hp),_===o&&h===o&&this._generatePoleQuad(t,p,u,b,d,hp)),n&&(h===a&&x===a&&this._generatePoleQuad(t,u,c,d,m,af),x===a&&_===a&&this._generatePoleQuad(t,c,p,m,b,af),_===a&&h===a&&this._generatePoleQuad(t,p,u,b,d,af))}}_initializeVertices(t){for(let r=0;r<t.length;r+=2)this._vertexToIndex(t[r],t[r+1])}subdividePolygonInternal(t,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:n,holeIndices:i}=aBe(t);this._initializeVertices(n);let o;try{let s=MB(n,i),l=this._convertIndices(n,s);o=this._subdivideTrianglesScanline(l)}catch(s){console.error(s)}let a=[];return r&&(a=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(o),{verticesFlattened:this._vertexBuffer,indicesTriangles:o,indicesLineList:a}}_convertIndices(t,r){let n=[];for(let i=0;i<r.length;i++){let o=t[r[i]*2],a=t[r[i]*2+1];n.push(this._vertexToIndex(o,a))}return n}_pointArrayToIndices(t){let r=[];for(let n=0;n<t.length;n++){let i=t[n];r.push(this._vertexToIndex(i.x,i.y))}return r}}});function SC(e,t,r,n,i,o,a,s,l){let u=i.length/2,c=a&&s&&l;if(u<Bt.MAX_VERTEX_ARRAY_LENGTH){let p=t.prepareSegment(u,r,n),d=p.vertexLength;for(let x=0;x<o.length;x+=3)n.emplaceBack(d+o[x],d+o[x+1],d+o[x+2]);p.vertexLength+=u,p.primitiveLength+=o.length/3;let h,m;c&&(m=a.prepareSegment(u,r,s),h=m.vertexLength,m.vertexLength+=u);for(let x=0;x<i.length;x+=2)e(i[x],i[x+1]);if(c)for(let x=0;x<l.length;x++){let b=l[x];for(let _=1;_<b.length;_+=2)s.emplaceBack(h+b[_-1],h+b[_]);m.primitiveLength+=b.length/2}}else uBe(t,r,n,i,o,e),c&&cBe(a,r,s,i,l,e),t.forceNewSegmentOnNextPrepare(),a?.forceNewSegmentOnNextPrepare()}function Pv(e,t,r,n,i,o,a){if(o){let s=n.count;return r(t[i*2],t[i*2+1]),e[i]=n.count,n.count++,a.vertexLength++,s}else return e[i]}function uBe(e,t,r,n,i,o){let a=[];for(let p=0;p<n.length/2;p++)a.push(-1);let s={count:0},l=0,u=e.getOrCreateLatestSegment(t,r),c=u.vertexLength;for(let p=2;p<i.length;p+=3){let d=i[p-2],h=i[p-1],m=i[p],x=a[d]<l,b=a[h]<l,_=a[m]<l,T=(x?1:0)+(b?1:0)+(_?1:0);u.vertexLength+T>Bt.MAX_VERTEX_ARRAY_LENGTH&&(u=e.createNewSegment(t,r),l=s.count,x=!0,b=!0,_=!0,c=0);let I=Pv(a,n,o,s,d,x,u),S=Pv(a,n,o,s,h,b,u),E=Pv(a,n,o,s,m,_,u);r.emplaceBack(c+I-l,c+S-l,c+E-l),u.primitiveLength++}}function cBe(e,t,r,n,i,o){let a=[];for(let p=0;p<n.length/2;p++)a.push(-1);let s={count:0},l=0,u=e.getOrCreateLatestSegment(t,r),c=u.vertexLength;for(let p=0;p<i.length;p++){let d=i[p];for(let h=1;h<i[p].length;h+=2){let m=d[h-1],x=d[h],b=a[m]<l,_=a[x]<l,T=(b?1:0)+(_?1:0);u.vertexLength+T>Bt.MAX_VERTEX_ARRAY_LENGTH&&(u=e.createNewSegment(t,r),l=s.count,b=!0,_=!0,c=0);let I=Pv(a,n,o,s,m,b,u),S=Pv(a,n,o,s,x,_,u);r.emplaceBack(c+I-l,c+S-l),u.primitiveLength++}}}var DB=f(()=>{Ti()});var pBe,wC,tre=f(()=>{Qn();Xte();Ti();Ty();Iy();wn();nn();yC();pp();dp();wi();sf();DB();pBe=500,wC=class{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new nC,this.indexArray=new In,this.indexArray2=new up,this.programConfigurations=new yo(t.layers,t.zoom),this.segments=new Bt,this.segments2=new Bt,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,n){this.hasPattern=Cy("fill",this.layers,r);let i=this.layers[0].layout.get("fill-sort-key"),o=!i.isConstant(),a=[];for(let{feature:s,id:l,index:u,sourceLayerIndex:c}of t){let p=this.layers[0]._featureFilter.needGeometry,d=xo(s,p);if(!this.layers[0]._featureFilter.filter(new mt(this.zoom,{globalState:this.globalState}),d,n))continue;let h=o?i.evaluate(d,{},n,r.availableImages):void 0,m={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:p?d.geometry:go(s),patterns:{},sortKey:h};a.push(m)}o&&a.sort((s,l)=>s.sortKey-l.sortKey);for(let s of a){let{geometry:l,index:u,sourceLayerIndex:c}=s;if(this.hasPattern){let d=Py("fill",this.layers,s,this.zoom,r);this.patternFeatures.push(d)}else this.addFeature(s,l,u,n,{},r.subdivisionGranularity);let p=t[u].feature;r.featureIndex.insert(p,l,u,c,this.index)}}update(t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)}addFeatures(t,r,n){for(let i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,r,n,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wte),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,n,i,o,a){for(let s of $b(r,pBe)){let l=_C(s,i,a.fill.getGranularityForZoomLevel(i.z)),u=this.layoutVertexArray;SC((c,p)=>{u.emplaceBack(c,p)},this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles,this.segments2,this.indexArray2,l.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)}};K("FillBucket",wC,{omit:["layers","patternFeatures"]})});var rre=f(()=>{Tn()});var LB=f(()=>{Ba();tre();fp();Sv();rre()});var fBe,nre,ire,CLt,PLt,ore=f(()=>{za();fBe=Ct([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nre=Ct([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ire,size:CLt,alignment:PLt}=fBe});var FB=ui((ALt,are)=>{"use strict";var hBe=$e();are.exports=Dy;function Dy(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(mBe,this,t)}function mBe(e,t,r){e==1?t.id=r.readVarint():e==2?yBe(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function yBe(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}Dy.types=["Unknown","Point","LineString","Polygon"];Dy.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,o=0,a=[],s;e.pos<t;){if(n<=0){var l=e.readVarint();r=l&7,n=l>>3}if(n--,r===1||r===2)i+=e.readSVarint(),o+=e.readSVarint(),r===1&&(s&&a.push(s),s=[]),s.push(new hBe(i,o));else if(r===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+r)}return s&&a.push(s),a};Dy.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(n<=0){var c=e.readVarint();r=c&7,n=c>>3}if(n--,r===1||r===2)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<l&&(l=o),o>u&&(u=o);else if(r!==7)throw new Error("unknown command "+r)}return[a,l,s,u]};Dy.prototype.toGeoJSON=function(e,t,r){var n=this.extent*Math.pow(2,r),i=this.extent*e,o=this.extent*t,a=this.loadGeometry(),s=Dy.types[this.type],l,u;function c(h){for(var m=0;m<h.length;m++){var x=h[m],b=180-(x.y+o)*360/n;h[m]=[(x.x+i)*360/n-180,360/Math.PI*Math.atan(Math.exp(b*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(l=0;l<a.length;l++)p[l]=a[l][0];a=p,c(a);break;case 2:for(l=0;l<a.length;l++)c(a[l]);break;case 3:for(a=gBe(a),l=0;l<a.length;l++)for(u=0;u<a[l].length;u++)c(a[l][u]);break}a.length===1?a=a[0]:s="Multi"+s;var d={type:"Feature",geometry:{type:s,coordinates:a},properties:this.properties};return"id"in this&&(d.id=this.id),d};function gBe(e){var t=e.length;if(t<=1)return[e];for(var r=[],n,i,o=0;o<t;o++){var a=xBe(e[o]);a!==0&&(i===void 0&&(i=a<0),i===a<0?(n&&r.push(n),n=[e[o]]):n.push(e[o]))}return n&&r.push(n),r}function xBe(e){for(var t=0,r=0,n=e.length,i=n-1,o,a;r<n;i=r++)o=e[r],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t}});var kB=ui((DLt,lre)=>{"use strict";var bBe=FB();lre.exports=sre;function sre(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(vBe,this,t),this.length=this._features.length}function vBe(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(_Be(r))}function _Be(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=n===1?e.readString():n===2?e.readFloat():n===3?e.readDouble():n===4?e.readVarint64():n===5?e.readVarint():n===6?e.readSVarint():n===7?e.readBoolean():null}return t}sre.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new bBe(this._pbf,t,this.extent,this._keys,this._values)}});var cre=ui((LLt,ure)=>{"use strict";var SBe=kB();ure.exports=wBe;function wBe(e,t){this.layers=e.readFields(TBe,{},t)}function TBe(e,t,r){if(e===3){var n=new SBe(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}});var Mv=ui((FLt,TC)=>{TC.exports.VectorTile=cre();TC.exports.VectorTileFeature=FB();TC.exports.VectorTileLayer=kB()});function Av(e,t,r,n,i,o,a,s){e.emplaceBack(t,r,Math.floor(n*OB)*2+a,i*OB*2,o*OB*2,Math.round(s))}function CBe(e,t){for(let r=0;r<t.length;r++){let n=t[r];r===t.length-1&&t[0].x===n.x&&t[0].y===n.y||(e.x+=n.x,e.y+=n.y,e.sampleCount++)}}function PBe(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}function pre(e){return e.every(t=>t.x<0)||e.every(t=>t.x>8192)||e.every(t=>t.y<0)||e.every(t=>t.y>8192)}var dre,IBe,EBe,OB,IC,fre=f(()=>{Qn();ore();Ti();Ty();Iy();Ot();dre=Ie(Mv(),1);wn();nn();yC();pp();dp();wi();sf();DB();IBe=dre.default.VectorTileFeature.types,EBe=500,OB=Math.pow(2,13);IC=class{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new iC,this.centroidVertexArray=new Hu,this.indexArray=new In,this.programConfigurations=new yo(t.layers,t.zoom),this.segments=new Bt,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,n){this.features=[],this.hasPattern=Cy("fill-extrusion",this.layers,r);for(let{feature:i,id:o,index:a,sourceLayerIndex:s}of t){let l=this.layers[0]._featureFilter.needGeometry,u=xo(i,l);if(!this.layers[0]._featureFilter.filter(new mt(this.zoom,{globalState:this.globalState}),u,n))continue;let c={id:o,sourceLayerIndex:s,index:a,geometry:l?u.geometry:go(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(Py("fill-extrusion",this.layers,c,this.zoom,r)):this.addFeature(c,c.geometry,a,n,{},r.subdivisionGranularity),r.featureIndex.insert(i,c.geometry,a,s,this.index,!0)}}addFeatures(t,r,n){for(let i of this.features){let{geometry:o}=i;this.addFeature(i,o,i.index,r,n,t.subdivisionGranularity)}}update(t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ire),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,nre.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,n,i,o,a){for(let s of $b(r,EBe)){let l={x:0,y:0,sampleCount:0},u=this.layoutVertexArray.length;this.processPolygon(l,i,t,s,a);let c=this.layoutVertexArray.length-u,p=Math.floor(l.x/l.sampleCount),d=Math.floor(l.y/l.sampleCount);for(let h=0;h<c;h++)this.centroidVertexArray.emplaceBack(p,d)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)}processPolygon(t,r,n,i,o){if(i.length<1||pre(i[0]))return;for(let p of i)p.length!==0&&CBe(t,p);let a={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},s=o.fill.getGranularityForZoomLevel(r.z),l=IBe[n.type]==="Polygon";for(let p of i){if(p.length===0||pre(p))continue;let d=Ay(p,s,l);this._generateSideFaces(d,a)}if(!l)return;let u=_C(i,r,s,!1),c=this.layoutVertexArray;SC((p,d)=>{Av(c,p,d,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,u.verticesFlattened,u.indicesTriangles)}_generateSideFaces(t,r){let n=0;for(let i=1;i<t.length;i++){let o=t[i],a=t[i-1];if(PBe(o,a))continue;r.segment.vertexLength+4>Bt.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let s=o.sub(a)._perp()._unit(),l=a.dist(o);n+l>32768&&(n=0),Av(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,0,n),Av(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,1,n),n+=l,Av(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,0,n),Av(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,1,n);let u=r.segment.vertexLength;this.indexArray.emplaceBack(u,u+2,u+1),this.indexArray.emplaceBack(u+1,u+2,u+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}};K("FillExtrusionBucket",IC,{omit:["layers","features"]})});var hre=f(()=>{Tn()});var ABe,RB=f(()=>{Ba();fre();fp();Sv();hre();ABe=Ie($e(),1)});var DBe,mre,uFt,cFt,yre=f(()=>{za();DBe=Ct([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mre,size:uFt,alignment:cFt}=DBe});var LBe,gre,fFt,hFt,xre=f(()=>{za();LBe=Ct([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:gre,size:fFt,alignment:hFt}=LBe});var _re,FBe,bre,kBe,OBe,RBe,BBe,Sre,vre,EC,wre=f(()=>{Qn();yre();xre();Ti();Ty();Iy();Ot();_re=Ie(Mv(),1);nn();yC();pp();dp();wi();sf();FBe=_re.default.VectorTileFeature.types,bre=63,kBe=Math.cos(75/2*(Math.PI/180)),OBe=15,RBe=20,BBe=15,Sre=1/2,vre=Math.pow(2,BBe-1)/Sre,EC=class{constructor(t){this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(r=>r.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new oC,this.layoutVertexArray2=new aC,this.indexArray=new In,this.programConfigurations=new yo(t.layers,t.zoom),this.segments=new Bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(t,r,n){this.hasPattern=Cy("line",this.layers,r);let i=this.layers[0].layout.get("line-sort-key"),o=!i.isConstant(),a=[];for(let{feature:s,id:l,index:u,sourceLayerIndex:c}of t){let p=this.layers[0]._featureFilter.needGeometry,d=xo(s,p);if(!this.layers[0]._featureFilter.filter(new mt(this.zoom,{globalState:this.globalState}),d,n))continue;let h=o?i.evaluate(d,{},n):void 0,m={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:p?d.geometry:go(s),patterns:{},sortKey:h};a.push(m)}o&&a.sort((s,l)=>s.sortKey-l.sortKey);for(let s of a){let{geometry:l,index:u,sourceLayerIndex:c}=s;if(this.hasPattern){let d=Py("line",this.layers,s,this.zoom,r);this.patternFeatures.push(d)}else this.addFeature(s,l,u,n,{},r.subdivisionGranularity);let p=t[u].feature;r.featureIndex.insert(p,l,u,c,this.index)}}update(t,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,n)}addFeatures(t,r,n){for(let i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,r,n,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,gre)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,mre),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end")){let r=+t.properties.mapbox_clip_start,n=+t.properties.mapbox_clip_end;return{start:r,end:n}}}addFeature(t,r,n,i,o,a){let s=this.layers[0].layout,l=s.get("line-join").evaluate(t,{}),u=s.get("line-cap"),c=s.get("line-miter-limit"),p=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(let d of r)this.addLine(d,t,l,u,c,p,i,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,o,i)}addLine(t,r,n,i,o,a,s,l){this.distance=0,this.scaledDistance=0,this.totalDistance=0;let u=s?l.line.getGranularityForZoomLevel(s.z):1;if(t=Ay(t,u),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let S=0;S<t.length-1;S++)this.totalDistance+=t[S].dist(t[S+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let c=FBe[r.type]==="Polygon",p=t.length;for(;p>=2&&t[p-1].equals(t[p-2]);)p--;let d=0;for(;d<p-1&&t[d].equals(t[d+1]);)d++;if(p<(c?3:2))return;n==="bevel"&&(o=1.05);let h=this.overscaling<=16?OBe*8192/(512*this.overscaling):0,m=this.segments.prepareSegment(p*10,this.layoutVertexArray,this.indexArray),x,b,_,T,I;this.e1=this.e2=-1,c&&(x=t[p-2],I=t[d].sub(x)._unit()._perp());for(let S=d;S<p;S++){if(_=S===p-1?c?t[d+1]:void 0:t[S+1],_&&t[S].equals(_))continue;I&&(T=I),x&&(b=x),x=t[S],I=_?_.sub(x)._unit()._perp():T,T=T||I;let E=T.add(I);(E.x!==0||E.y!==0)&&E._unit();let P=T.x*I.x+T.y*I.y,L=E.x*I.x+E.y*I.y,k=L!==0?1/L:1/0,z=2*Math.sqrt(2-2*L),W=L<kBe&&b&&_,Z=T.x*I.y-T.y*I.x>0;if(W&&S>d){let j=x.dist(b);if(j>2*h){let ae=x.sub(x.sub(b)._mult(h/j)._round());this.updateDistance(b,ae),this.addCurrentVertex(ae,T,0,0,m),b=ae}}let Y=b&&_,J=Y?n:c?"butt":i;if(Y&&J==="round"&&(k<a?J="miter":k<=2&&(J="fakeround")),J==="miter"&&k>o&&(J="bevel"),J==="bevel"&&(k>2&&(J="flipbevel"),k<o&&(J="miter")),b&&this.updateDistance(b,x),J==="miter")E._mult(k),this.addCurrentVertex(x,E,0,0,m);else if(J==="flipbevel"){if(k>100)E=I.mult(-1);else{let j=k*T.add(I).mag()/T.sub(I).mag();E._perp()._mult(j*(Z?-1:1))}this.addCurrentVertex(x,E,0,0,m),this.addCurrentVertex(x,E.mult(-1),0,0,m)}else if(J==="bevel"||J==="fakeround"){let j=-Math.sqrt(k*k-1),ae=Z?j:0,ve=Z?0:j;if(b&&this.addCurrentVertex(x,T,ae,ve,m),J==="fakeround"){let xe=Math.round(z*180/Math.PI/RBe);for(let Le=1;Le<xe;Le++){let Te=Le/xe;if(Te!==.5){let Re=Te-.5,zt=1.0904+P*(-3.2452+P*(3.55645-P*1.43519)),He=.848013+P*(-1.06021+P*.215638);Te=Te+Te*Re*(Te-1)*(zt*Re*Re+He)}let rt=I.sub(T)._mult(Te)._add(T)._unit()._mult(Z?-1:1);this.addHalfVertex(x,rt.x,rt.y,!1,Z,0,m)}}_&&this.addCurrentVertex(x,I,-ae,-ve,m)}else if(J==="butt")this.addCurrentVertex(x,E,0,0,m);else if(J==="square"){let j=b?1:-1;this.addCurrentVertex(x,E,j,j,m)}else J==="round"&&(b&&(this.addCurrentVertex(x,T,0,0,m),this.addCurrentVertex(x,T,1,1,m,!0)),_&&(this.addCurrentVertex(x,I,-1,-1,m,!0),this.addCurrentVertex(x,I,0,0,m)));if(W&&S<p-1){let j=x.dist(_);if(j>2*h){let ae=x.add(_.sub(x)._mult(h/j)._round());this.updateDistance(x,ae),this.addCurrentVertex(ae,I,0,0,m),x=ae}}}}addCurrentVertex(t,r,n,i,o,a=!1){let s=r.x+r.y*n,l=r.y-r.x*n,u=-r.x+r.y*i,c=-r.y-r.x*i;this.addHalfVertex(t,s,l,a,!1,n,o),this.addHalfVertex(t,u,c,a,!0,-i,o),this.distance>vre/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,n,i,o,a))}addHalfVertex({x:t,y:r},n,i,o,a,s,l){let c=(this.lineClips?this.scaledDistance*(vre-1):this.scaledDistance)*Sre;if(this.layoutVertexArray.emplaceBack((t<<1)+(o?1:0),(r<<1)+(a?1:0),Math.round(bre*n)+128,Math.round(bre*i)+128,(s===0?0:s<0?-1:1)+1|(c&63)<<2,c>>6),this.lineClips){let d=this.scaledDistance-this.lineClips.start,h=this.lineClips.end-this.lineClips.start,m=d/h;this.layoutVertexArray2.emplaceBack(m,this.lineClipsArray.length)}let p=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,p,this.e2),l.primitiveLength++),a?this.e2=p:this.e1=p}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}};K("LineBucket",EC,{omit:["layers","patternFeatures"]})});var Tre=f(()=>{Tn()});var BB=f(()=>{Ba();wre();fp();Sv();Tre();ne();wi();Tn()});var Ire,Ere,WFt,Cre,XFt,zB,zBe,qFt,YFt,JFt,KFt,QFt,ekt,NB=f(()=>{za();Ire=Ct([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ere=Ct([{name:"a_projected_pos",components:3,type:"Float32"}],4),WFt=Ct([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Cre=Ct([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]),XFt=Ct([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),zB=Ct([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zBe=Ct([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),qFt=Ct([{name:"triangle",components:3,type:"Uint16"}]),YFt=Ct([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),JFt=Ct([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),KFt=Ct([{type:"Float32",name:"offsetX"}]),QFt=Ct([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ekt=Ct([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}])});function NBe(e,t,r){let n=t.layout.get("text-transform").evaluate(r,{});return n==="uppercase"?e=e.toLocaleUpperCase():n==="lowercase"&&(e=e.toLocaleLowerCase()),Al.applyArabicShaping&&(e=Al.applyArabicShaping(e)),e}function Pre(e,t,r){return e.sections.forEach(n=>{n.text=NBe(n.text,t,r)}),e}var Mre=f(()=>{Hb()});function Are(e){let t={},r={},n=[],i=0;function o(u){n.push(e[u]),i++}function a(u,c,p){let d=r[u];return delete r[u],r[c]=d,n[d].geometry[0].pop(),n[d].geometry[0]=n[d].geometry[0].concat(p[0]),d}function s(u,c,p){let d=t[c];return delete t[c],t[u]=d,n[d].geometry[0].shift(),n[d].geometry[0]=p[0].concat(n[d].geometry[0]),d}function l(u,c,p){let d=p?c[0][c[0].length-1]:c[0][0];return`${u}:${d.x}:${d.y}`}for(let u=0;u<e.length;u++){let c=e[u],p=c.geometry,d=c.text?c.text.toString():null;if(!d){o(u);continue}let h=l(d,p),m=l(d,p,!0);if(h in r&&m in t&&r[h]!==t[m]){let x=s(h,m,p),b=a(h,m,n[x].geometry);delete t[h],delete r[m],r[l(d,n[b].geometry,!0)]=b,n[x].geometry=null}else h in r?a(h,m,p):m in t?s(h,m,p):(o(u),t[h]=i-1,r[m]=i-1)}return n.filter(u=>u.geometry)}var Dre=f(()=>{});var Lre,UB=f(()=>{vy();Lre={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"}});var lf=f(()=>{});var Fre=ui($B=>{$B.read=function(e,t,r,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,d=r?-1:1,h=e[t+p];for(p+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=o*256+e[t+p],p+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=a*256+e[t+p],p+=d,c-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(h?-1:1)*a*Math.pow(2,o-n)};$B.write=function(e,t,r,n,i,o){var a,s,l,u=o*8-i-1,c=(1<<u)-1,p=c>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,m=n?1:-1,x=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+p>=1?t+=d/l:t+=d*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a=a+p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=s&255,h+=m,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=a&255,h+=m,a/=256,u-=8);e[r+h-m]|=x*128}});var jB=ui((ckt,zre)=>{"use strict";zre.exports=Ft;var CC=Fre();function Ft(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ft.Varint=0;Ft.Fixed64=1;Ft.Bytes=2;Ft.Fixed32=5;var VB=65536*65536,kre=1/VB,UBe=12,Bre=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");Ft.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=n&7,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=PC(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Rre(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=PC(this.buf,this.pos)+PC(this.buf,this.pos+4)*VB;return this.pos+=8,e},readSFixed64:function(){var e=PC(this.buf,this.pos)+Rre(this.buf,this.pos+4)*VB;return this.pos+=8,e},readFloat:function(){var e=CC.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=CC.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,n;return n=t[this.pos++],r=n&127,n<128||(n=t[this.pos++],r|=(n&127)<<7,n<128)||(n=t[this.pos++],r|=(n&127)<<14,n<128)||(n=t[this.pos++],r|=(n&127)<<21,n<128)?r:(n=t[this.pos],r|=(n&15)<<28,$Be(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=UBe&&Bre?t5e(this.buf,t,e):e5e(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ft.Bytes)return e.push(this.readVarint(t));var r=qu(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ft.Bytes)return e.push(this.readSVarint());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ft.Bytes)return e.push(this.readBoolean());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ft.Bytes)return e.push(this.readFloat());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ft.Bytes)return e.push(this.readDouble());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ft.Bytes)return e.push(this.readFixed32());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ft.Bytes)return e.push(this.readSFixed32());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ft.Bytes)return e.push(this.readFixed64());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ft.Bytes)return e.push(this.readSFixed64());var t=qu(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Ft.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ft.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ft.Fixed32)this.pos+=4;else if(t===Ft.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Fy(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Fy(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Fy(this.buf,e&-1,this.pos),Fy(this.buf,Math.floor(e*kre),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Fy(this.buf,e&-1,this.pos),Fy(this.buf,Math.floor(e*kre),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){VBe(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=r5e(this.buf,e,this.pos);var r=this.pos-t;r>=128&&Ore(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),CC.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),CC.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&Ore(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,Ft.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,HBe,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ZBe,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,qBe,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,WBe,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,XBe,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,YBe,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,JBe,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,KBe,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,QBe,t)},writeBytesField:function(e,t){this.writeTag(e,Ft.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ft.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ft.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ft.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ft.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ft.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ft.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ft.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ft.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ft.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function $Be(e,t,r){var n=r.buf,i,o;if(o=n[r.pos++],i=(o&112)>>4,o<128||(o=n[r.pos++],i|=(o&127)<<3,o<128)||(o=n[r.pos++],i|=(o&127)<<10,o<128)||(o=n[r.pos++],i|=(o&127)<<17,o<128)||(o=n[r.pos++],i|=(o&127)<<24,o<128)||(o=n[r.pos++],i|=(o&1)<<31,o<128))return Ly(e,i,t);throw new Error("Expected varint not more than 10 bytes")}function qu(e){return e.type===Ft.Bytes?e.readVarint()+e.pos:e.pos+1}function Ly(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function VBe(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(r=~(-e%4294967296),n=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),jBe(r,n,t),GBe(n,t)}function jBe(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function GBe(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function Ore(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function HBe(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function ZBe(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function WBe(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function XBe(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function qBe(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function YBe(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function JBe(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function KBe(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function QBe(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function PC(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Fy(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function Rre(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function e5e(e,t,r){for(var n="",i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>r)break;var l,u,c;s===1?o<128&&(a=o):s===2?(l=e[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a<=127&&(a=null))):s===3?(l=e[i+1],u=e[i+2],(l&192)===128&&(u&192)===128&&(a=(o&15)<<12|(l&63)<<6|u&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):s===4&&(l=e[i+1],u=e[i+2],c=e[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(a=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),i+=s}return n}function t5e(e,t,r){return Bre.decode(e.subarray(t,r))}function r5e(e,t,r){for(var n=0,i,o;n<t.length;n++){if(i=t.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){e[r++]=239,e[r++]=191,e[r++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):o=i;continue}else o&&(e[r++]=239,e[r++]=191,e[r++]=189,o=null);i<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(i<65536?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=i&63|128)}return r}});function n5e(e,t,r){e===1&&r.readMessage(i5e,t)}function i5e(e,t,r){if(e===3){let{id:n,bitmap:i,width:o,height:a,left:s,top:l,advance:u}=r.readMessage(o5e,{});t.push({id:n,bitmap:new rf({width:o+2*Nre,height:a+2*Nre},i),metrics:{width:o,height:a,left:s,top:l,advance:u}})}}function o5e(e,t,r){e===1?t.id=r.readVarint():e===2?t.bitmap=r.readBytes():e===3?t.width=r.readVarint():e===4?t.height=r.readVarint():e===5?t.left=r.readSVarint():e===6?t.top=r.readSVarint():e===7&&(t.advance=r.readVarint())}function $re(e){return new Ure.default(e).readFields(n5e,[])}var Ure,Nre,MC=f(()=>{Os();Ure=Ie(jB(),1),Nre=3});var GB=f(()=>{});function AC(e){let t=0,r=0;for(let s of e)t+=s.w*s.h,r=Math.max(r,s.w);e.sort((s,l)=>l.h-s.h);let i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}],o=0,a=0;for(let s of e)for(let l=i.length-1;l>=0;l--){let u=i[l];if(!(s.w>u.w||s.h>u.h)){if(s.x=u.x,s.y=u.y,a=Math.max(a,s.y+s.h),o=Math.max(o,s.x+s.w),s.w===u.w&&s.h===u.h){let c=i.pop();l<i.length&&(i[l]=c)}else s.h===u.h?(u.x+=s.w,u.w-=s.w):s.w===u.w?(u.y+=s.h,u.h-=s.h):(i.push({x:u.x+s.w,y:u.y,w:u.w-s.w,h:s.h}),u.y+=s.h,u.h-=s.h);break}}return{w:o,h:a,fill:t/(o*a)||0}}var HB=f(()=>{});var bo,Dv,ZB,DC=f(()=>{Os();nn();HB();bo=1,Dv=class{constructor(t,{pixelRatio:r,version:n,stretchX:i,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=i,this.stretchY=o,this.content=a,this.version=n,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+bo,this.paddedRect.y+bo]}get br(){return[this.paddedRect.x+this.paddedRect.w-bo,this.paddedRect.y+this.paddedRect.h-bo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-bo*2)/this.pixelRatio,(this.paddedRect.h-bo*2)/this.pixelRatio]}},ZB=class{constructor(t,r){let n={},i={};this.haveRenderCallbacks=[];let o=[];this.addImages(t,n,o),this.addImages(r,i,o);let{w:a,h:s}=AC(o),l=new hn({width:a||1,height:s||1});for(let u in t){let c=t[u],p=n[u].paddedRect;hn.copy(c.data,l,{x:0,y:0},{x:p.x+bo,y:p.y+bo},c.data)}for(let u in r){let c=r[u],p=i[u].paddedRect,d=p.x+bo,h=p.y+bo,m=c.data.width,x=c.data.height;hn.copy(c.data,l,{x:0,y:0},{x:d,y:h},c.data),hn.copy(c.data,l,{x:0,y:x-1},{x:d,y:h-1},{width:m,height:1}),hn.copy(c.data,l,{x:0,y:0},{x:d,y:h+x},{width:m,height:1}),hn.copy(c.data,l,{x:m-1,y:0},{x:d-1,y:h},{width:1,height:x}),hn.copy(c.data,l,{x:0,y:0},{x:d+m,y:h},{width:1,height:x})}this.image=l,this.iconPositions=n,this.patternPositions=i}addImages(t,r,n){for(let i in t){let o=t[i],a={x:0,y:0,w:o.data.width+2*bo,h:o.data.height+2*bo};n.push(a),r[i]=new Dv(a,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),r),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),r)}patchUpdatedImage(t,r,n){if(!t||!r||t.version===r.version)return;t.version=r.version;let[i,o]=t.tl;n.update(r.data,void 0,{x:i,y:o})}};K("ImagePosition",Dv);K("ImageAtlas",ZB)});var uf,mp=f(()=>{vy();UB();Hb();lf();ne();MC();GB();DC();uf=(i=>(i[i.none=0]="none",i[i.horizontal=1]="horizontal",i[i.vertical=2]="vertical",i[i.horizontalOnly=3]="horizontalOnly",i))(uf||{})});function WB(e,t){let{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new mt(e+1))};if(r.kind==="source")return{kind:"source"};{let{zoomStops:n,interpolationType:i}=r,o=0;for(;o<n.length&&n[o]<=e;)o++;o=Math.max(0,o-1);let a=o;for(;a<n.length&&n[a]<e+1;)a++;a=Math.min(n.length-1,a);let s=n[o],l=n[a];if(r.kind==="composite")return{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i};let u=r.evaluate(new mt(s)),c=r.evaluate(new mt(l));return{kind:"camera",minZoom:s,maxZoom:l,minSize:u,maxSize:c,interpolationType:i}}}var Vre,jre,LC,ky=f(()=>{ne();wi();Vre=255,jre=128,LC=Vre*jre});function FC(e,t,r){let n="never",i=e.get(t);return i?n=i:e.get(r)&&(n="always"),n}var XB=f(()=>{});function kC(e,t,r,n,i,o,a,s,l,u,c,p,d){let h=s?Math.min(LC,Math.round(s[0])):0,m=s?Math.min(LC,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(n*32),Math.round(i*32),o,a,(h<<1)+(l?1:0),m,u*16,c*16,p*256,d*256)}function OC(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function u5e(e){for(let t of e.sections)if(Ste(t.text))return!0;return!1}var Fv,Hre,s5e,l5e,kv,Ov,Fl,Oy=f(()=>{NB();Qn();Fv=Ie($e(),1);Ti();Ty();Iy();Mre();Dre();vy();mp();pp();dp();Hre=Ie(Mv(),1);UB();ky();nn();wi();wn();Hb();XB();s5e=Hre.default.VectorTileFeature.types,l5e=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];kv=class{constructor(t){this.layoutVertexArray=new sC,this.indexArray=new In,this.programConfigurations=t,this.segments=new Bt,this.dynamicLayoutVertexArray=new lC,this.opacityVertexArray=new uC,this.hasVisibleVertices=!1,this.placedSymbolArray=new pv}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ire.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ere.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,l5e,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}};K("SymbolBuffers",kv);Ov=class{constructor(t,r,n){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new n,this.segments=new Bt,this.collisionVertexArray=new cC}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Cre.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}};K("CollisionBuffers",Ov);Fl=class{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.globalState=t.globalState,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(l=>l.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=WB(this.zoom,n["text-size"]),this.iconSizeData=WB(this.zoom,n["icon-size"]);let i=this.layers[0].layout,o=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=FC(i,"text-overlap","text-allow-overlap")!=="never"||FC(i,"icon-overlap","icon-allow-overlap")!=="never"||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=a!=="viewport-y"&&!o.isConstant();let s=a==="viewport-y"||a==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=s&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(l=>uf[l])),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.sourceID=t.sourceID}createArrays(){this.text=new kv(new yo(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new kv(new yo(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new fv,this.lineVertexArray=new hv,this.symbolInstances=new dv,this.textAnchorOffsets=new mv}calculateGlyphDependencies(t,r,n,i,o){for(let a=0;a<t.length;a++)if(r[t.charCodeAt(a)]=!0,(n||i)&&o){let s=Lre[t.charAt(a)];s&&(r[s.charCodeAt(0)]=!0)}}populate(t,r,n){let i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=(s.value.kind!=="constant"||s.value.value instanceof Ms&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&(a.value.kind!=="constant"||a.value.value.length>0),c=l.value.kind!=="constant"||!!l.value.value||Object.keys(l.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!u&&!c)return;let d=r.iconDependencies,h=r.glyphDependencies,m=r.availableImages,x=new mt(this.zoom,{globalState:this.globalState});for(let{feature:b,id:_,index:T,sourceLayerIndex:I}of t){let S=i._featureFilter.needGeometry,E=xo(b,S);if(!i._featureFilter.filter(x,E,n))continue;S||(E.geometry=go(b));let P;if(u){let W=i.getValueAndResolveTokens("text-field",E,n,m),Z=Ms.factory(W),Y=this.hasRTLText=this.hasRTLText||u5e(Z);(!Y||Al.getRTLTextPluginStatus()==="unavailable"||Y&&Al.isParsed())&&(P=Pre(Z,i,E))}let L;if(c){let W=i.getValueAndResolveTokens("icon-image",E,n,m);W instanceof ho?L=W:L=ho.fromString(W)}if(!P&&!L)continue;let k=this.sortFeaturesByKey?p.evaluate(E,{},n):void 0,z={id:_,text:P,icon:L,index:T,sourceLayerIndex:I,geometry:E.geometry,properties:b.properties,type:s5e[b.type],sortKey:k};if(this.features.push(z),L&&(d[L.name]=!0),P){let W=a.evaluate(E,{},n).join(","),Z=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(2)>=0;for(let Y of P.sections)if(Y.image)d[Y.image.name]=!0;else{let J=nB(P.toString()),j=Y.fontStack||W,ae=h[j]=h[j]||{};this.calculateGlyphDependencies(Y.text,ae,Z,this.allowVerticalPlacement,J)}}}o.get("symbol-placement")==="line"&&(this.features=Are(this.features)),this.sortFeaturesByKey&&this.features.sort((b,_)=>b.sortKey-_.sortKey)}update(t,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,n))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){let n=this.lineVertexArray.length;if(t.segment!==void 0){let i=t.dist(r[t.segment+1]),o=t.dist(r[t.segment]),a={};for(let s=t.segment+1;s<r.length;s++)a[s]={x:r[s].x,y:r[s].y,tileUnitDistanceFromAnchor:i},s<r.length-1&&(i+=r[s+1].dist(r[s]));for(let s=t.segment||0;s>=0;s--)a[s]={x:r[s].x,y:r[s].y,tileUnitDistanceFromAnchor:o},s>0&&(o+=r[s-1].dist(r[s]));for(let s=0;s<r.length;s++){let l=a[s];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,r,n,i,o,a,s,l,u,c,p,d){let h=t.indexArray,m=t.layoutVertexArray,x=t.segments.prepareSegment(4*r.length,m,h,this.canOverlap?a.sortKey:void 0),b=this.glyphOffsetArray.length,_=x.vertexLength,T=this.allowVerticalPlacement&&s===2?Math.PI/2:0,I=a.text&&a.text.sections;for(let S=0;S<r.length;S++){let{tl:E,tr:P,bl:L,br:k,tex:z,pixelOffsetTL:W,pixelOffsetBR:Z,minFontScaleX:Y,minFontScaleY:J,glyphOffset:j,isSDF:ae,sectionIndex:ve}=r[S],xe=x.vertexLength,Le=j[1];kC(m,l.x,l.y,E.x,Le+E.y,z.x,z.y,n,ae,W.x,W.y,Y,J),kC(m,l.x,l.y,P.x,Le+P.y,z.x+z.w,z.y,n,ae,Z.x,W.y,Y,J),kC(m,l.x,l.y,L.x,Le+L.y,z.x,z.y+z.h,n,ae,W.x,Z.y,Y,J),kC(m,l.x,l.y,k.x,Le+k.y,z.x+z.w,z.y+z.h,n,ae,Z.x,Z.y,Y,J),OC(t.dynamicLayoutVertexArray,l,T),h.emplaceBack(xe,xe+2,xe+1),h.emplaceBack(xe+1,xe+2,xe+3),x.vertexLength+=4,x.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(j[0]),(S===r.length-1||ve!==r[S+1].sectionIndex)&&t.programConfigurations.populatePaintArrays(m.length,a,a.index,{},d,I&&I[ve])}t.placedSymbolArray.emplaceBack(l.x,l.y,b,this.glyphOffsetArray.length-b,_,u,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],s,0,!1,0,p)}_addCollisionDebugVertex(t,r,n,i,o,a){return r.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,o,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(t,r,n,i,o,a,s){let l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=l.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,d=s.anchorX,h=s.anchorY;this._addCollisionDebugVertex(c,p,a,d,h,new Fv.default(t,r)),this._addCollisionDebugVertex(c,p,a,d,h,new Fv.default(n,r)),this._addCollisionDebugVertex(c,p,a,d,h,new Fv.default(n,i)),this._addCollisionDebugVertex(c,p,a,d,h,new Fv.default(t,i)),l.vertexLength+=4;let m=o.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}addDebugCollisionBoxes(t,r,n,i){for(let o=t;o<r;o++){let a=this.collisionBoxArray.get(o),s=a.x1,l=a.y1,u=a.x2,c=a.y2;this.addCollisionDebugVertices(s,l,u,c,i?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ov(gv,zB.members,up),this.iconCollisionBox=new Ov(gv,zB.members,up);for(let t=0;t<this.symbolInstances.length;t++){let r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,n,i,o,a,s,l,u){let c={};for(let p=r;p<n;p++){let d=t.get(p);c.textBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.textFeatureIndex=d.featureIndex;break}for(let p=i;p<o;p++){let d=t.get(p);c.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.verticalTextFeatureIndex=d.featureIndex;break}for(let p=a;p<s;p++){let d=t.get(p);c.iconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.iconFeatureIndex=d.featureIndex;break}for(let p=l;p<u;p++){let d=t.get(p);c.verticalIconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.verticalIconFeatureIndex=d.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){let n=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){let n=t.placedSymbolArray.get(r),i=n.vertexStartIndex+n.numGlyphs*4;for(let o=n.vertexStartIndex;o<i;o+=4)t.indexArray.emplaceBack(o,o+2,o+1),t.indexArray.emplaceBack(o+1,o+2,o+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let r=Math.sin(t),n=Math.cos(t),i=[],o=[],a=[];for(let s=0;s<this.symbolInstances.length;++s){a.push(s);let l=this.symbolInstances.get(s);i.push(Math.round(r*l.anchorX+n*l.anchorY)|0),o.push(l.featureIndex)}return a.sort((s,l)=>i[s]-i[l]||o[l]-o[s]),a}addToSortKeyRanges(t,r){let n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===r?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let r of this.symbolInstanceIndexes){let n=this.symbolInstances.get(r);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((i,o,a)=>{i>=0&&a.indexOf(i)===o&&this.addIndicesForPlacedSymbol(this.text,i)}),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}};K("SymbolBucket",Fl,{omit:["layers","collisionBoxArray","features","compareText"]});Fl.MAX_GLYPHS=65535;Fl.addDynamicAttributes=OC});var Zre=f(()=>{});var Wre=f(()=>{Tn()});var RC,Xre=f(()=>{wn();nn();RC=class{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:hy,this.defaultValue=t}evaluate(t){if(t.formattedSection){let r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){if(!this.defaultValue.isConstant()){let r=this.defaultValue.value;t(r._styleExpression.expression)}}outputDefined(){return!1}serialize(){return null}};K("FormatSectionOverride",RC,{omit:["defaultValue"]})});var BC=f(()=>{Ba();Oy();Zre();Wre();Tn();Xre()});var qre=f(()=>{Tn()});var qB=f(()=>{Ba();qre()});var Yre=f(()=>{Tn()});var YB=f(()=>{Ba();Yre()});var zC=f(()=>{Ba()});var Jre=f(()=>{bB();mC();wB();EB();LB();RB();BB();BC();qB();YB();zC()});var JB=f(()=>{});var Kre=f(()=>{Is();ny();La();tn();JB()});var Qre=f(()=>{HB();qt();Os();DC();Bi();GB();ne()});async function ene(e,t,r,n){let i=t*256,o=i+255,a=n.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${i}-${o}`),"Glyphs"),s=await uee(a,new AbortController);if(!s||!s.data)throw new Error(`Could not load glyph range. range: ${t}, ${i}-${o}`);let l={};for(let u of $re(s.data))l[u.id]=u;return l}var tne=f(()=>{Is();La();MC()});function rne(e,t,r,n,i,o,a,s,l){for(let u=t;u<t+n;u++)nne(e,r*o+u,o,i,a,s,l);for(let u=r;u<r+i;u++)nne(e,u*o+t,1,n,a,s,l)}function nne(e,t,r,n,i,o,a){o[0]=0,a[0]=-1e20,a[1]=1e20,i[0]=e[t];for(let s=1,l=0,u=0;s<n;s++){i[s]=e[t+s*r];let c=s*s;do{let p=o[l];u=(i[s]-i[p]+c-p*p)/(s-p)/2}while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=1e20}for(let s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;let u=o[l],c=s-u;e[t+s*r]=i[u]+c*c}}var Rv,ine=f(()=>{Rv=class{constructor({fontSize:t=24,buffer:r=3,radius:n=8,cutoff:i=.25,fontFamily:o="sans-serif",fontWeight:a="normal",fontStyle:s="normal"}={}){this.buffer=r,this.cutoff=i,this.radius=n;let l=this.size=t+r*4,u=this._createCanvas(l),c=this.ctx=u.getContext("2d",{willReadFrequently:!0});c.font=`${s} ${a} ${t}px ${o}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(t){let r=document.createElement("canvas");return r.width=r.height=t,r}draw(t){let{width:r,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:o,actualBoundingBoxRight:a}=this.ctx.measureText(t),s=Math.ceil(n),l=0,u=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-o))),c=Math.min(this.size-this.buffer,s+Math.ceil(i)),p=u+2*this.buffer,d=c+2*this.buffer,h=Math.max(p*d,0),m=new Uint8ClampedArray(h),x={data:m,width:p,height:d,glyphWidth:u,glyphHeight:c,glyphTop:s,glyphLeft:l,glyphAdvance:r};if(u===0||c===0)return x;let{ctx:b,buffer:_,gridInner:T,gridOuter:I}=this;b.clearRect(_,_,u,c),b.fillText(t,_,_+s);let S=b.getImageData(_,_,u,c);I.fill(1e20,0,h),T.fill(0,0,h);for(let E=0;E<c;E++)for(let P=0;P<u;P++){let L=S.data[4*(E*u+P)+3]/255;if(L===0)continue;let k=(E+_)*p+P+_;if(L===1)I[k]=0,T[k]=1e20;else{let z=.5-L;I[k]=z>0?z*z:0,T[k]=z<0?z*z:0}}rne(I,0,0,p,d,p,this.f,this.v,this.z),rne(T,_,_,u,c,p,this.f,this.v,this.z);for(let E=0;E<h;E++){let P=Math.sqrt(I[E])-Math.sqrt(T[E]);m[E]=Math.round(255-255*(P/this.radius+this.cutoff))}return x}}});var Ry,KB,one=f(()=>{tne();ine();rB();Os();Ry=class Ry{constructor(t,r){this.requestManager=t,this.localIdeographFontFamily=r,this.entries={}}setURL(t){this.url=t}async getGlyphs(t){let r=[];for(let o in t)for(let a of t[o])r.push(this._getAndCacheGlyphsPromise(o,a));let n=await Promise.all(r),i={};for(let{stack:o,id:a,glyph:s}of n)i[o]||(i[o]={}),i[o][a]=s&&{id:s.id,bitmap:s.bitmap.clone(),metrics:s.metrics};return i}async _getAndCacheGlyphsPromise(t,r){let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{}});let i=n.glyphs[r];if(i!==void 0)return{stack:t,id:r,glyph:i};if(i=this._tinySDF(n,t,r),i)return n.glyphs[r]=i,{stack:t,id:r,glyph:i};let o=Math.floor(r/256);if(o*256>65535)throw new Error("glyphs > 65535 not supported");if(n.ranges[o])return{stack:t,id:r,glyph:i};if(!this.url)throw new Error("glyphsUrl is not set");if(!n.requests[o]){let s=Ry.loadGlyphRange(t,o,this.url,this.requestManager);n.requests[o]=s}let a=await n.requests[o];for(let s in a)this._doesCharSupportLocalGlyph(+s)||(n.glyphs[+s]=a[+s]);return n.ranges[o]=!0,{stack:t,id:r,glyph:a[r]||null}}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(t))||on["CJK Unified Ideographs"](t)||on["Hangul Syllables"](t)||on.Hiragana(t)||on.Katakana(t)||on["CJK Symbols and Punctuation"](t)||on["Halfwidth and Fullwidth Forms"](t))}_tinySDF(t,r,n){let i=this.localIdeographFontFamily;if(!i||!this._doesCharSupportLocalGlyph(n))return;let o=2,a=t.tinySDF;if(!a){let c="400";/bold/i.test(r)?c="900":/medium/i.test(r)?c="500":/light/i.test(r)&&(c="200"),a=t.tinySDF=new Ry.TinySDF({fontSize:24*o,buffer:3*o,radius:8*o,cutoff:.25,fontFamily:i,fontWeight:c})}let s=a.draw(String.fromCharCode(n));return{id:n,bitmap:new rf({width:s.width||30*o,height:s.height||30*o},s.data),metrics:{width:s.glyphWidth/o||24,height:s.glyphHeight/o||24,left:s.glyphLeft/o+.5||0,top:s.glyphTop/o-27.5||-8,advance:s.glyphAdvance/o||24,isDoubleResolution:!0}}}};Ry.loadGlyphRange=ene,Ry.TinySDF=Rv;KB=Ry});var ane=f(()=>{ne();qt();Gb();Tn()});var K6t,sne=f(()=>{Tn();qt();wi();Gb();ne();wn();K6t=new Kn({"sky-color":new Mr(Ri.sky["sky-color"]),"horizon-color":new Mr(Ri.sky["horizon-color"]),"fog-color":new Mr(Ri.sky["fog-color"]),"fog-ground-blend":new Mr(Ri.sky["fog-ground-blend"]),"horizon-fog-blend":new Mr(Ri.sky["horizon-fog-blend"]),"sky-horizon-blend":new Mr(Ri.sky["sky-horizon-blend"]),"atmosphere-blend":new Mr(Ri.sky["atmosphere-blend"])})});var lne=f(()=>{ne()});var NC,une=f(()=>{NC=class{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}});var p5e,UC,cne=f(()=>{ne();nn();une();p5e={once:!0},UC=class{constructor(t,r){this.target=t,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new NC(()=>this.process()),this.subscription=xb(this.target,"message",n=>this.receive(n),!1),this.globalScope=Uu(self)?t:window}registerMessageHandler(t,r){this.messageHandlers[t]=r}sendAsync(t,r){return new Promise((n,i)=>{let o=Math.round(Math.random()*1e18).toString(36).substring(0,10),a=r?xb(r.signal,"abort",()=>{a?.unsubscribe(),delete this.resolveRejects[o];let u={id:o,type:"<cancel>",origin:location.origin,targetMapId:t.targetMapId,sourceMapId:this.mapId};this.target.postMessage(u)},p5e):null;this.resolveRejects[o]={resolve:u=>{a?.unsubscribe(),n(u)},reject:u=>{a?.unsubscribe(),i(u)}};let s=[],l={...t,id:o,sourceMapId:this.mapId,origin:location.origin,data:gy(t.data,s)};this.target.postMessage(l,{transfer:s})})}receive(t){let r=t.data,n=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin)&&!(r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[n];let i=this.abortControllers[n];delete this.abortControllers[n],i&&i.abort();return}if(Uu(self)||r.mustQueue){this.tasks[n]=r,this.taskQueue.push(n),this.invoker.trigger();return}this.processTask(n,r)}}process(){if(this.taskQueue.length===0)return;let t=this.taskQueue.shift(),r=this.tasks[t];delete this.tasks[t],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(t,r)}async processTask(t,r){if(r.type==="<response>"){let o=this.resolveRejects[t];if(delete this.resolveRejects[t],!o)return;r.error?o.reject(xy(r.error)):o.resolve(xy(r.data));return}if(!this.messageHandlers[r.type]){this.completeTask(t,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));return}let n=xy(r.data),i=new AbortController;this.abortControllers[t]=i;try{let o=await this.messageHandlers[r.type](r.sourceMapId,n,i);this.completeTask(t,null,o)}catch(o){this.completeTask(t,o)}}completeTask(t,r,n){let i=[];delete this.abortControllers[t];let o={id:t,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?gy(r):null,data:gy(n,i)};this.target.postMessage(o,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}}});var pne,dne=f(()=>{pne='(()=>{var Uy=Object.create;var ss=Object.defineProperty;var $y=Object.getOwnPropertyDescriptor;var jy=Object.getOwnPropertyNames;var qy=Object.getPrototypeOf,Wy=Object.prototype.hasOwnProperty;var ve=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xy=(t,e)=>{for(var r in e)ss(t,r,{get:e[r],enumerable:!0})},Hy=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jy(e))!Wy.call(t,i)&&i!==r&&ss(t,i,{get:()=>e[i],enumerable:!(n=$y(e,i))||n.enumerable});return t};var Y=(t,e,r)=>(r=t!=null?Uy(qy(t)):{},Hy(e||!t||!t.__esModule?ss(r,"default",{value:t,enumerable:!0}):r,t));var ye=ve((p0,au)=>{"use strict";au.exports=hr;function hr(t,e){this.x=t,this.y=e}hr.prototype={clone:function(){return new hr(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};hr.convert=function(t){return t instanceof hr?t:Array.isArray(t)?new hr(t[0],t[1]):t}});var uu=ve((f0,lu)=>{"use strict";lu.exports=su;function su(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n}su.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-i/o}var a=0,s=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?a=r:s=r,r=(s-a)*.5+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}}});var op=ve((Ov,el)=>{function Sg(t,e){var r,n,i,o,a,s,l,u,c,p;for(r=t.length&3,n=t.length-r,i=e,a=3432918353,l=461845907,p=0;p<n;)c=t.charCodeAt(p)&255|(t.charCodeAt(++p)&255)<<8|(t.charCodeAt(++p)&255)<<16|(t.charCodeAt(++p)&255)<<24,++p,c=(c&65535)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(c&65535)*l+(((c>>>16)*l&65535)<<16)&4294967295,i^=c,i=i<<13|i>>>19,o=(i&65535)*5+(((i>>>16)*5&65535)<<16)&4294967295,i=(o&65535)+27492+(((o>>>16)+58964&65535)<<16);switch(c=0,r){case 3:c^=(t.charCodeAt(p+2)&255)<<16;case 2:c^=(t.charCodeAt(p+1)&255)<<8;case 1:c^=t.charCodeAt(p)&255,c=(c&65535)*a+(((c>>>16)*a&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(c&65535)*l+(((c>>>16)*l&65535)<<16)&4294967295,i^=c}return i^=t.length,i^=i>>>16,i=(i&65535)*2246822507+(((i>>>16)*2246822507&65535)<<16)&4294967295,i^=i>>>13,i=(i&65535)*3266489909+(((i>>>16)*3266489909&65535)<<16)&4294967295,i^=i>>>16,i>>>0}typeof el<"u"&&(el.exports=Sg)});var ap=ve((Gv,tl)=>{function wg(t,e){for(var r=t.length,n=e^r,i=0,o;r>=4;)o=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16),o^=o>>>24,o=(o&65535)*1540483477+(((o>>>16)*1540483477&65535)<<16),n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)^o,r-=4,++i;switch(r){case 3:n^=(t.charCodeAt(i+2)&255)<<16;case 2:n^=(t.charCodeAt(i+1)&255)<<8;case 1:n^=t.charCodeAt(i)&255,n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16)}return n^=n>>>13,n=(n&65535)*1540483477+(((n>>>16)*1540483477&65535)<<16),n^=n>>>15,n>>>0}typeof tl!==void 0&&(tl.exports=wg)});var rl=ve((Nv,ta)=>{var sp=op(),Ag=ap();ta.exports=sp;ta.exports.murmur3=sp;ta.exports.murmur2=Ag});var dl=ve((MS,jp)=>{"use strict";var cb=ye();jp.exports=Rr;function Rr(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(pb,this,e)}function pb(t,e,r){t==1?e.id=r.readVarint():t==2?fb(r,e):t==3?e.type=r.readVarint():t==4&&(e._geometry=r.pos)}function fb(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}Rr.types=["Unknown","Point","LineString","Polygon"];Rr.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=[],s;t.pos<e;){if(n<=0){var l=t.readVarint();r=l&7,n=l>>3}if(n--,r===1||r===2)i+=t.readSVarint(),o+=t.readSVarint(),r===1&&(s&&a.push(s),s=[]),s.push(new cb(i,o));else if(r===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+r)}return s&&a.push(s),a};Rr.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=c&7,n=c>>3}if(n--,r===1||r===2)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<l&&(l=o),o>u&&(u=o);else if(r!==7)throw new Error("unknown command "+r)}return[a,l,s,u]};Rr.prototype.toGeoJSON=function(t,e,r){var n=this.extent*Math.pow(2,r),i=this.extent*t,o=this.extent*e,a=this.loadGeometry(),s=Rr.types[this.type],l,u;function c(y){for(var m=0;m<y.length;m++){var h=y[m],g=180-(h.y+o)*360/n;y[m]=[(h.x+i)*360/n-180,360/Math.PI*Math.atan(Math.exp(g*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(l=0;l<a.length;l++)p[l]=a[l][0];a=p,c(a);break;case 2:for(l=0;l<a.length;l++)c(a[l]);break;case 3:for(a=yb(a),l=0;l<a.length;l++)for(u=0;u<a[l].length;u++)c(a[l][u]);break}a.length===1?a=a[0]:s="Multi"+s;var f={type:"Feature",geometry:{type:s,coordinates:a},properties:this.properties};return"id"in this&&(f.id=this.id),f};function yb(t){var e=t.length;if(e<=1)return[t];for(var r=[],n,i,o=0;o<e;o++){var a=mb(t[o]);a!==0&&(i===void 0&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}function mb(t){for(var e=0,r=0,n=t.length,i=n-1,o,a;r<n;i=r++)o=t[r],a=t[i],e+=(a.x-o.x)*(o.y+a.y);return e}});var gl=ve((LS,Wp)=>{"use strict";var hb=dl();Wp.exports=qp;function qp(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(db,this,e),this.length=this._features.length}function db(t,e,r){t===15?e.version=r.readVarint():t===1?e.name=r.readString():t===5?e.extent=r.readVarint():t===2?e._features.push(r.pos):t===3?e._keys.push(r.readString()):t===4&&e._values.push(gb(r))}function gb(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return e}qp.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new hb(this._pbf,e,this.extent,this._keys,this._values)}});var Hp=ve((DS,Xp)=>{"use strict";var bb=gl();Xp.exports=xb;function xb(t,e){this.layers=t.readFields(vb,{},e)}function vb(t,e,r){if(t===3){var n=new bb(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}});var Rt=ve((BS,xa)=>{xa.exports.VectorTile=Hp();xa.exports.VectorTileFeature=dl();xa.exports.VectorTileLayer=gl()});var df=ve(Sl=>{Sl.read=function(t,e,r,n,i){var o,a,s=i*8-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,f=r?-1:1,y=t[e+p];for(p+=f,o=y&(1<<-c)-1,y>>=-c,c+=s;c>0;o=o*256+t[e+p],p+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=a*256+t[e+p],p+=f,c-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(y?-1:1)*a*Math.pow(2,o-n)};Sl.write=function(t,e,r,n,i,o){var a,s,l,u=o*8-i-1,c=(1<<u)-1,p=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,m=n?1:-1,h=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+p>=1?e+=f/l:e+=f*Math.pow(2,1-p),e*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,i),a=a+p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[r+y]=s&255,y+=m,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[r+y]=a&255,y+=m,a/=256,u-=8);t[r+y-m]|=h*128}});var mi=ve((fA,Pf)=>{"use strict";Pf.exports=J;var Aa=df();function J(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}J.Varint=0;J.Fixed64=1;J.Bytes=2;J.Fixed32=5;var wl=65536*65536,gf=1/wl,Ob=12,vf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");J.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=n&7,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=_a(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=xf(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=_a(this.buf,this.pos)+_a(this.buf,this.pos+4)*wl;return this.pos+=8,t},readSFixed64:function(){var t=_a(this.buf,this.pos)+xf(this.buf,this.pos+4)*wl;return this.pos+=8,t},readFloat:function(){var t=Aa.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Aa.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,r,n;return n=e[this.pos++],r=n&127,n<128||(n=e[this.pos++],r|=(n&127)<<7,n<128)||(n=e[this.pos++],r|=(n&127)<<14,n<128)||(n=e[this.pos++],r|=(n&127)<<21,n<128)?r:(n=e[this.pos],r|=(n&15)<<28,Gb(r,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=Ob&&vf?ex(this.buf,e,t):Qb(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==J.Bytes)return t.push(this.readVarint(e));var r=mt(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==J.Bytes)return t.push(this.readSVarint());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==J.Bytes)return t.push(this.readBoolean());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==J.Bytes)return t.push(this.readFloat());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==J.Bytes)return t.push(this.readDouble());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==J.Bytes)return t.push(this.readFixed32());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==J.Bytes)return t.push(this.readSFixed32());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==J.Bytes)return t.push(this.readFixed64());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==J.Bytes)return t.push(this.readSFixed64());var e=mt(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=t&7;if(e===J.Varint)for(;this.buf[this.pos++]>127;);else if(e===J.Bytes)this.pos=this.readVarint()+this.pos;else if(e===J.Fixed32)this.pos+=4;else if(e===J.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Gr(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Gr(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Gr(this.buf,t&-1,this.pos),Gr(this.buf,Math.floor(t*gf),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Gr(this.buf,t&-1,this.pos),Gr(this.buf,Math.floor(t*gf),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){Nb(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var e=this.pos;this.pos=tx(this.buf,t,this.pos);var r=this.pos-e;r>=128&&bf(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),Aa.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Aa.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&bf(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,J.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,jb,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,qb,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Hb,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Wb,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Xb,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Zb,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Jb,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Yb,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Kb,e)},writeBytesField:function(t,e){this.writeTag(t,J.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,J.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,J.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,J.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,J.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,J.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,J.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,J.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,J.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,J.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};function Gb(t,e,r){var n=r.buf,i,o;if(o=n[r.pos++],i=(o&112)>>4,o<128||(o=n[r.pos++],i|=(o&127)<<3,o<128)||(o=n[r.pos++],i|=(o&127)<<10,o<128)||(o=n[r.pos++],i|=(o&127)<<17,o<128)||(o=n[r.pos++],i|=(o&127)<<24,o<128)||(o=n[r.pos++],i|=(o&1)<<31,o<128))return Or(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function mt(t){return t.type===J.Bytes?t.readVarint()+t.pos:t.pos+1}function Or(t,e,r){return r?e*4294967296+(t>>>0):(e>>>0)*4294967296+(t>>>0)}function Nb(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),r^4294967295?r=r+1|0:(r=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn\'t fit into 10 bytes");e.realloc(10),Ub(r,n,e),$b(n,e)}function Ub(t,e,r){r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos++]=t&127|128,t>>>=7,r.buf[r.pos]=t&127}function $b(t,e){var r=(t&7)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=t&127)))))}function bf(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function jb(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function qb(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function Wb(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function Xb(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function Hb(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function Zb(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function Jb(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function Yb(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function Kb(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function _a(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+t[e+3]*16777216}function Gr(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function xf(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Qb(t,e,r){for(var n="",i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>r)break;var l,u,c;s===1?o<128&&(a=o):s===2?(l=t[i+1],(l&192)===128&&(a=(o&31)<<6|l&63,a<=127&&(a=null))):s===3?(l=t[i+1],u=t[i+2],(l&192)===128&&(u&192)===128&&(a=(o&15)<<12|(l&63)<<6|u&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):s===4&&(l=t[i+1],u=t[i+2],c=t[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(a=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),n+=String.fromCharCode(a),i+=s}return n}function ex(t,e,r){return vf.decode(t.subarray(e,r))}function tx(t,e,r){for(var n=0,i,o;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=i;continue}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=i&63|128)}return r}});var gy=ve((iT,dy)=>{dy.exports=Ha;function Ha(t,e){var r=t&&t.type,n;if(r==="FeatureCollection")for(n=0;n<t.features.length;n++)Ha(t.features[n],e);else if(r==="GeometryCollection")for(n=0;n<t.geometries.length;n++)Ha(t.geometries[n],e);else if(r==="Feature")Ha(t.geometry,e);else if(r==="Polygon")my(t.coordinates,e);else if(r==="MultiPolygon")for(n=0;n<t.coordinates.length;n++)my(t.coordinates[n],e);return t}function my(t,e){if(t.length!==0){hy(t[0],e);for(var r=1;r<t.length;r++)hy(t[r],!e)}}function hy(t,e){for(var r=0,n=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!e&&t.reverse()}});var Py=ve((sT,vy)=>{"use strict";var Ux=ye(),$x=Rt().VectorTileFeature;vy.exports=xy;function xy(t,e){this.options=e||{},this.features=t,this.length=t.length}xy.prototype.feature=function(t){return new Ja(this.features[t],this.options.extent)};function Ja(t,e){this.id=typeof t.id=="number"?t.id:void 0,this.type=t.type,this.rawGeometry=t.type===1?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}Ja.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var r=t[e],n=[],i=0;i<r.length;i++)n.push(new Ux(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry};Ja.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[e,n,r,i]};Ja.prototype.toGeoJSON=$x.prototype.toGeoJSON});var Ay=ve((lT,Li)=>{var jx=mi(),wy=Py();Li.exports=Ul;Li.exports.fromVectorTileJs=Ul;Li.exports.fromGeojsonVt=qx;Li.exports.GeoJSONWrapper=wy;function Ul(t){var e=new jx;return Wx(t,e),e.finish()}function qx(t,e){e=e||{};var r={};for(var n in t)r[n]=new wy(t[n].features,e),r[n].name=n,r[n].version=e.version,r[n].extent=e.extent;return Ul({layers:r})}function Wx(t,e){for(var r in t.layers)e.writeMessage(3,Xx,t.layers[r])}function Xx(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r,n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<t.length;r++)n.feature=t.feature(r),e.writeMessage(2,Hx,n);var i=n.keys;for(r=0;r<i.length;r++)e.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)e.writeMessage(4,Yx,o[r])}function Hx(t,e){var r=t.feature;r.id!==void 0&&e.writeVarintField(1,r.id),e.writeMessage(2,Zx,t),e.writeVarintField(3,r.type),e.writeMessage(4,Jx,r)}function Zx(t,e){var r=t.feature,n=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in r.properties){var l=r.properties[s],u=o[s];if(l!==null){typeof u>"u"&&(n.push(s),u=n.length-1,o[s]=u),e.writeVarint(u);var c=typeof l;c!=="string"&&c!=="boolean"&&c!=="number"&&(l=JSON.stringify(l));var p=c+":"+l,f=a[p];typeof f>"u"&&(i.push(l),f=i.length-1,a[p]=f),e.writeVarint(f)}}}function Nl(t,e){return(e<<3)+(t&7)}function Sy(t){return t<<1^t>>31}function Jx(t,e){for(var r=t.loadGeometry(),n=t.type,i=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;n===1&&(u=l.length),e.writeVarint(Nl(1,u));for(var c=n===3?l.length-1:l.length,p=0;p<c;p++){p===1&&n!==1&&e.writeVarint(Nl(2,c-1));var f=l[p].x-i,y=l[p].y-o;e.writeVarint(Sy(f)),e.writeVarint(Sy(y)),i+=f,o+=y}n===3&&e.writeVarint(Nl(7,1))}}function Yx(t,e){var r=typeof t;r==="string"?e.writeStringField(1,t):r==="boolean"?e.writeBooleanField(7,t):r==="number"&&(t%1!==0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}});var km=Y(ye(),1),Pu=Y(uu(),1);var ls;function cu(){return ls==null&&(ls=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ls}var qi;function pu(){if(qi==null&&(qi=!1,cu())){let r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let i=0;i<5*5;i++){let o=i*4;r.fillStyle=`rgb(${o},${o+1},${o+2})`,r.fillRect(i%5,Math.floor(i/5),1,1)}let n=r.getImageData(0,0,5,5).data;for(let i=0;i<5*5*4;i++)if(i%4!==3&&n[i]!==i){qi=!0;break}}}return qi||!1}var Jr=1e-6,Yr=typeof Float32Array<"u"?Float32Array:Array,Kr=Math.random;var d0=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Wi={};Xy(Wi,{add:()=>em,ceil:()=>tm,clone:()=>Jy,copy:()=>Ky,create:()=>fu,cross:()=>fm,dist:()=>Am,distance:()=>du,div:()=>wm,divide:()=>hu,dot:()=>pm,equals:()=>vm,exactEquals:()=>xm,floor:()=>rm,forEach:()=>Cm,fromValues:()=>Yy,inverse:()=>um,len:()=>Im,length:()=>bu,lerp:()=>ym,max:()=>im,min:()=>nm,mul:()=>Sm,multiply:()=>mu,negate:()=>lm,normalize:()=>cm,random:()=>mm,round:()=>om,scale:()=>am,scaleAndAdd:()=>sm,set:()=>Qy,sqrDist:()=>_m,sqrLen:()=>Tm,squaredDistance:()=>gu,squaredLength:()=>xu,str:()=>bm,sub:()=>Pm,subtract:()=>yu,transformMat4:()=>hm,transformQuat:()=>dm,zero:()=>gm});function fu(){var t=new Yr(4);return Yr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Jy(t){var e=new Yr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Yy(t,e,r,n){var i=new Yr(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function Ky(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Qy(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function em(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function yu(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function mu(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function hu(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function tm(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function rm(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function nm(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function im(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function om(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function am(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function sm(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function du(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(r,n,i,o)}function gu(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function bu(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function xu(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function lm(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function um(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function cm(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a,t}function pm(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function fm(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],l=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],c=e[0],p=e[1],f=e[2],y=e[3];return t[0]=p*u-f*l+y*s,t[1]=-(c*u)+f*a-y*o,t[2]=c*l-p*a+y*i,t[3]=-(c*s)+p*o-f*i,t}function ym(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t}function mm(t,e){e=e||1;var r,n,i,o,a,s;do r=Kr()*2-1,n=Kr()*2-1,a=r*r+n*n;while(a>=1);do i=Kr()*2-1,o=Kr()*2-1,s=i*i+o*o;while(s>=1);var l=Math.sqrt((1-a)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*l,t[3]=e*o*l,t}function hm(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function dm(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,p=u*i+l*n-a*o,f=u*o+a*i-s*n,y=-a*n-s*i-l*o;return t[0]=c*u+y*-a+p*-l-f*-s,t[1]=p*u+y*-s+f*-a-c*-l,t[2]=f*u+y*-l+c*-s-p*-a,t[3]=e[3],t}function gm(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function bm(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function xm(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vm(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],l=e[2],u=e[3];return Math.abs(r-a)<=Jr*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=Jr*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=Jr*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-u)<=Jr*Math.max(1,Math.abs(o),Math.abs(u))}var Pm=yu,Sm=mu,wm=hu,Am=du,_m=gu,Im=bu,Tm=xu,Cm=function(){var t=fu();return function(e,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,e.length):l=e.length,s=n;s<l;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Su(t){if(t<=0)return 0;if(t>=1)return 1;let e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function Fm(t,e,r,n){let i=new Pu.default(t,e,r,n);return o=>i.solve(o)}var A0=Fm(.25,.1,.25,1);function it(t,e,r){return Math.min(r,Math.max(e,t))}function wu(t,e,r){let n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function de(t,...e){for(let r of e)for(let n in r)t[n]=r[n];return t}function Au(t){return Math.log(t)/Math.LN2%1===0}function tn(t,e,r){let n={};for(let i in t)n[i]=e.call(r||this,t[i],i,t);return n}function _u(t,e,r){let n={};for(let i in t)e.call(r||this,t[i],i,t)&&(n[i]=t[i]);return n}function nt(t){return Array.isArray(t)?t.map(nt):typeof t=="object"&&t?tn(t,nt):t}var vu={};function ce(t){vu[t]||(typeof console<"u"&&console.warn(t),vu[t]=!0)}function ot(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function at(t){return typeof WorkerGlobalScope<"u"&&typeof t<"u"&&t instanceof WorkerGlobalScope}function vt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap}function Em(t,e,r,n,i){let o=Math.max(-e,0)*4,l=(Math.max(0,r)-r)*n*4+o,u=n*4,c=Math.max(0,e),p=Math.max(0,r),f=Math.min(t.width,e+n),y=Math.min(t.height,r+i);return{rect:{x:c,y:p,width:f-c,height:y-p},layout:[{offset:l,stride:u}]}}async function Mm(t,e,r,n,i){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let o=new VideoFrame(t,{timestamp:0});try{let a=o?.format;if(!a||!(a.startsWith("BGR")||a.startsWith("RGB")))throw new Error(`Unrecognized format ${a}`);let s=a.startsWith("BGR"),l=new Uint8ClampedArray(n*i*4);if(await o.copyTo(l,Em(t,e,r,n,i)),s)for(let u=0;u<l.length;u+=4){let c=l[u];l[u]=l[u+2],l[u+2]=c}return l}finally{o.close()}}var Qr,en;function Lm(t,e,r,n,i){let o=t.width,a=t.height;(!Qr||!en)&&(Qr=new OffscreenCanvas(o,a),en=Qr.getContext("2d",{willReadFrequently:!0})),Qr.width=o,Qr.height=a,en.drawImage(t,0,0,o,a);let s=en.getImageData(e,r,n,i);return en.clearRect(0,0,o,a),s.data}async function Iu(t,e,r,n,i){if(pu())try{return await Mm(t,e,r,n,i)}catch{}return Lm(t,e,r,n,i)}function us(t,e,r,n){return t.addEventListener(e,r,n),{unsubscribe:()=>{t.removeEventListener(e,r,n)}}}function cs(t){return t*Math.PI/180}var Xi=25,Hi=0;var $t=class t{constructor(e,r,n){let i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;let a=new Int32Array(this.arrayBuffer);e=a[0],r=a[1],n=a[2],this.d=r+2*n;for(let u=0;u<this.d*this.d;u++){let c=a[3+u],p=a[3+u+1];i.push(c===p?null:a.subarray(c,p))}let s=a[3+i.length],l=a[3+i.length+1];this.keys=a.subarray(s,l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=r+2*n;for(let a=0;a<this.d*this.d;a++)i.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=n,this.scale=r/e,this.uid=0;let o=n/r*e;this.min=-o,this.max=e+o}insert(e,r,n,i,o){this._forEachCell(r,n,i,o,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(o)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,r,n,i,o,a){this.cells[o].push(a)}query(e,r,n,i,o){let a=this.min,s=this.max;if(e<=a&&r<=a&&s<=n&&s<=i&&!o)return Array.prototype.slice.call(this.keys);{let l=[],u={};return this._forEachCell(e,r,n,i,this._queryCell,l,u,o),l}}_queryCell(e,r,n,i,o,a,s,l){let u=this.cells[o];if(u!==null){let c=this.keys,p=this.bboxes;for(let f=0;f<u.length;f++){let y=u[f];if(s[y]===void 0){let m=y*4;(l?l(p[m+0],p[m+1],p[m+2],p[m+3]):e<=p[m+2]&&r<=p[m+3]&&n>=p[m+0]&&i>=p[m+1])?(s[y]=!0,a.push(c[y])):s[y]=!1}}}}_forEachCell(e,r,n,i,o,a,s,l){let u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),p=this._convertToCellCoord(n),f=this._convertToCellCoord(i);for(let y=u;y<=p;y++)for(let m=c;m<=f;m++){let h=this.d*m+y;if(!(l&&!l(this._convertFromCellCoord(y),this._convertFromCellCoord(m),this._convertFromCellCoord(y+1),this._convertFromCellCoord(m+1)))&&o.call(this,e,r,n,i,h,a,s,l))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let e=this.cells,r=3+this.cells.length+1+1,n=0;for(let a=0;a<this.cells.length;a++)n+=this.cells[a].length;let i=new Int32Array(r+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let o=r;for(let a=0;a<e.length;a++){let s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),o+=this.keys.length,i[3+e.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer}static serialize(e,r){let n=e.toArrayBuffer();return r&&r.push(n),{buffer:n}}static deserialize(e){return new t(e.buffer)}};var Dm=8,Bm={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Vm={"*":{type:"source"}},Rm=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],zm={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Om={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Gm={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Nm={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Um={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},$m={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},jm={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},qm=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Wm={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xm={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hm={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zm={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jm={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ym={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Km={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Qm={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},eh={type:"array",value:"*"},th={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},rh={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},nh={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},ih={type:"array",value:"*",minimum:1},oh={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ah={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sh={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},lh={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},uh=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],ch={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},ph={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},fh={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},yh={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mh={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},hh={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dh={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},gh={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},bh={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},xh={"*":{type:"string"}},P={$version:Dm,$root:Bm,sources:Vm,source:Rm,source_vector:zm,source_raster:Om,source_raster_dem:Gm,source_geojson:Nm,source_video:Um,source_image:$m,layer:jm,layout:qm,layout_background:Wm,layout_fill:Xm,layout_circle:Hm,layout_heatmap:Zm,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Jm,layout_symbol:Ym,layout_raster:Km,layout_hillshade:Qm,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:eh,filter_operator:th,geometry_type:rh,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:nh,expression:ih,light:oh,sky:ah,terrain:sh,projection:lh,paint:uh,paint_fill:ch,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:ph,paint_circle:fh,paint_heatmap:yh,paint_symbol:mh,paint_raster:hh,paint_hillshade:dh,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:gh,transition:bh,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:xh},vh=["type","source","source-layer","minzoom","maxzoom","filter","layout"];var C=class{constructor(e,r,n,i){this.message=(e?`${e}: `:"")+n,i&&(this.identifier=i),r!=null&&r.__line__&&(this.line=r.__line__)}};function xr(t,...e){for(let r of e)for(let n in r)t[n]=r[n];return t}var Ve=class extends Error{constructor(e,r){super(r),this.message=r,this.key=e}},vs=class t{constructor(e,r=[]){this.parent=e,this.bindings={};for(let[n,i]of r)this.bindings[n]=i}concat(e){return new t(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}},wr={kind:"null"},k={kind:"number"},$={kind:"string"},U={kind:"boolean"},ze={kind:"color"},yo={kind:"projectionDefinition"},Wt={kind:"object"},N={kind:"value"},Ph={kind:"error"},mo={kind:"collator"},Ar={kind:"formatted"},ho={kind:"padding"},an={kind:"colorArray"},go={kind:"numberArray"},vn={kind:"resolvedImage"},bo={kind:"variableAnchorOffsetCollection"};function Ce(t,e){return{kind:"array",itemType:t,N:e}}function ie(t){if(t.kind==="array"){let e=ie(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}else return t.kind}var Sh=[wr,k,$,U,ze,yo,Ar,Wt,Ce(N),ho,go,an,vn,bo];function sn(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!sn(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(let r of Sh)if(!sn(r,e))return null}}return`Expected ${ie(t)} but found ${ie(e)} instead.`}function zs(t,e){return e.some(r=>r.kind===t.kind)}function Xt(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}function Pt(t,e){return t.kind==="array"&&e.kind==="array"?t.itemType.kind===e.itemType.kind&&typeof t.N=="number":t.kind===e.kind}var Xu=.96422,Hu=1,Zu=.82521,Ju=4/29,br=6/29,Yu=3*br*br,wh=br*br*br,Ah=Math.PI/180,_h=180/Math.PI;function Ku(t){return t=t%360,t<0&&(t+=360),t}function Qu([t,e,r,n]){t=ps(t),e=ps(e),r=ps(r);let i,o,a=fs((.2225045*t+.7168786*e+.0606169*r)/Hu);t===e&&e===r?i=o=a:(i=fs((.4360747*t+.3850649*e+.1430804*r)/Xu),o=fs((.0139322*t+.0971045*e+.7141733*r)/Zu));let s=116*a-16;return[s<0?0:s,500*(i-a),200*(a-o),n]}function ps(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fs(t){return t>wh?Math.pow(t,1/3):t/Yu+Ju}function ec([t,e,r,n]){let i=(t+16)/116,o=isNaN(e)?i:i+e/500,a=isNaN(r)?i:i-r/200;return i=Hu*ms(i),o=Xu*ms(o),a=Zu*ms(a),[ys(3.1338561*o-1.6168667*i-.4906146*a),ys(-.9787684*o+1.9161415*i+.033454*a),ys(.0719453*o-.2289914*i+1.4052427*a),n]}function ys(t){return t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055,t<0?0:t>1?1:t}function ms(t){return t>br?t*t*t:Yu*(t-Ju)}function Ih(t){let[e,r,n,i]=Qu(t),o=Math.sqrt(r*r+n*n);return[Math.round(o*1e4)?Ku(Math.atan2(n,r)*_h):NaN,o,e,i]}function Th([t,e,r,n]){return t=isNaN(t)?0:t*Ah,ec([r,Math.cos(t)*e,Math.sin(t)*e,n])}function Ch([t,e,r,n]){t=Ku(t),e/=100,r/=100;function i(o){let a=(o+t/30)%12,s=e*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(a-3,9-a,1))}return[i(0),i(8),i(4),n]}var kh=Object.hasOwn||function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};function nn(t,e){return kh(t,e)?t[e]:void 0}function Fh(t){if(t=t.toLowerCase().trim(),t==="transparent")return[0,0,0,0];let e=nn(Eh,t);if(e){let[i,o,a]=e;return[i/255,o/255,a/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){let o=t.length<6?1:2,a=1;return[Zi(t.slice(a,a+=o)),Zi(t.slice(a,a+=o)),Zi(t.slice(a,a+=o)),Zi(t.slice(a,a+o)||"ff")]}if(t.startsWith("rgb")){let i=/^rgba?\\(\\s*([\\de.+-]+)(%)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)(%)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)(%)?(?:\\s*([,\\/])\\s*([\\de.+-]+)(%)?)?\\s*\\)$/,o=t.match(i);if(o){let[a,s,l,u,c,p,f,y,m,h,g,d]=o,x=[u||" ",f||" ",h].join("");if(x==="  "||x==="  /"||x===",,"||x===",,,"){let b=[l,p,m].join(""),v=b==="%%%"?100:b===""?255:0;if(v){let S=[dr(+s/v,0,1),dr(+c/v,0,1),dr(+y/v,0,1),g?Tu(+g,d):1];if(Cu(S))return S}}return}}let r=/^hsla?\\(\\s*([\\de.+-]+)(?:deg)?(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)%(?:\\s+|\\s*(,)\\s*)([\\de.+-]+)%(?:\\s*([,\\/])\\s*([\\de.+-]+)(%)?)?\\s*\\)$/,n=t.match(r);if(n){let[i,o,a,s,l,u,c,p,f]=n,y=[a||" ",l||" ",c].join("");if(y==="  "||y==="  /"||y===",,"||y===",,,"){let m=[+o,dr(+s,0,100),dr(+u,0,100),p?Tu(+p,f):1];if(Cu(m))return Ch(m)}}}function Zi(t){return parseInt(t.padEnd(2,t),16)/255}function Tu(t,e){return dr(e?t/100:t,0,1)}function dr(t,e,r){return Math.min(Math.max(e,t),r)}function Cu(t){return!t.some(Number.isNaN)}var Eh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wt(t,e,r){return t+r*(e-t)}function vr(t,e,r){return t.map((n,i)=>wt(n,e[i],r))}function Mh(t){return t==="rgb"||t==="hcl"||t==="lab"}var H=class t{constructor(e,r,n,i=1,o=!0){this.r=e,this.g=r,this.b=n,this.a=i,o||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,r,n,i]))}static parse(e){if(e instanceof t)return e;if(typeof e!="string")return;let r=Fh(e);if(r)return new t(...r,!1)}get rgb(){let{r:e,g:r,b:n,a:i}=this,o=i||1/0;return this.overwriteGetter("rgb",[e/o,r/o,n/o,i])}get hcl(){return this.overwriteGetter("hcl",Ih(this.rgb))}get lab(){return this.overwriteGetter("lab",Qu(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){let[e,r,n,i]=this.rgb;return`rgba(${[e,r,n].map(o=>Math.round(o*255)).join(",")},${i})`}static interpolate(e,r,n,i="rgb"){switch(i){case"rgb":{let[o,a,s,l]=vr(e.rgb,r.rgb,n);return new t(o,a,s,l,!1)}case"hcl":{let[o,a,s,l]=e.hcl,[u,c,p,f]=r.hcl,y,m;if(!isNaN(o)&&!isNaN(u)){let b=u-o;u>o&&b>180?b-=360:u<o&&o-u>180&&(b+=360),y=o+n*b}else isNaN(o)?isNaN(u)?y=NaN:(y=u,(s===1||s===0)&&(m=c)):(y=o,(p===1||p===0)&&(m=a));let[h,g,d,x]=Th([y,m??wt(a,c,n),wt(s,p,n),wt(l,f,n)]);return new t(h,g,d,x,!1)}case"lab":{let[o,a,s,l]=ec(vr(e.lab,r.lab,n));return new t(o,a,s,l,!1)}}}};H.black=new H(0,0,0,1);H.white=new H(1,1,1,1);H.transparent=new H(0,0,0,0);H.red=new H(1,0,0,1);var ln=class{constructor(e,r,n){e?this.sensitivity=r?"variant":"case":this.sensitivity=r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},Lh=["bottom","center","top"],un=class{constructor(e,r,n,i,o,a){this.text=e,this.image=r,this.scale=n,this.fontStack=i,this.textColor=o,this.verticalAlign=a}},Fe=class t{constructor(e){this.sections=e}static fromString(e){return new t([new un(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof t?e:t.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}},Oe=class t{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof t)return e;if(typeof e=="number")return new t([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(let r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new t(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new t(vr(e.values,r.values,n))}},Ge=class t{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof t)return e;if(typeof e=="number")return new t([e]);if(Array.isArray(e)){for(let r of e)if(typeof r!="number")return;return new t(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){return new t(vr(e.values,r.values,n))}},Pe=class t{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof t)return e;if(typeof e=="string"){let n=H.parse(e);return n?new t([n]):void 0}if(!Array.isArray(e))return;let r=[];for(let n of e){if(typeof n!="string")return;let i=H.parse(n);if(!i)return;r.push(i)}return new t(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n,i="rgb"){let o=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let a=0;a<e.values.length;a++)o.push(H.interpolate(e.values[a],r.values[a],n,i));return new t(o)}},ne=class extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}},Dh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]),Ee=class t{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof t)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let r=0;r<e.length;r+=2){let n=e[r],i=e[r+1];if(typeof n!="string"||!Dh.has(n)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new t(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,n){let i=e.values,o=r.values;if(i.length!==o.length)throw new ne(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);let a=[];for(let s=0;s<i.length;s+=2){if(i[s]!==o[s])throw new ne(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${i[s]}, to[${s}]: ${o[s]}`);a.push(i[s]);let[l,u]=i[s+1],[c,p]=o[s+1];a.push([wt(l,c,n),wt(u,p,n)])}return new t(a)}},Se=class t{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new t({name:e,available:!1}):null}},At=class t{constructor(e,r,n){this.from=e,this.to=r,this.transition=n}static interpolate(e,r,n){return new t(e,r,n)}static parse(e){if(e instanceof t)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new t(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new t(e.from,e.to,e.transition);if(typeof e=="string")return new t(e,e,1)}};function tc(t,e,r,n){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: \'a\' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[t,e,r,n]:[t,e,r]).join(", ")}]: \'r\', \'g\', and \'b\' must be between 0 and 255.`}function cn(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof At||t instanceof H||t instanceof ln||t instanceof Fe||t instanceof Oe||t instanceof Ge||t instanceof Pe||t instanceof Ee||t instanceof Se)return!0;if(Array.isArray(t)){for(let e of t)if(!cn(e))return!1;return!0}else if(typeof t=="object"){for(let e in t)if(!cn(t[e]))return!1;return!0}else return!1}function ue(t){if(t===null)return wr;if(typeof t=="string")return $;if(typeof t=="boolean")return U;if(typeof t=="number")return k;if(t instanceof H)return ze;if(t instanceof At)return yo;if(t instanceof ln)return mo;if(t instanceof Fe)return Ar;if(t instanceof Oe)return ho;if(t instanceof Ge)return go;if(t instanceof Pe)return an;if(t instanceof Ee)return bo;if(t instanceof Se)return vn;if(Array.isArray(t)){let e=t.length,r;for(let n of t){let i=ue(n);if(!r)r=i;else{if(r===i)continue;r=N;break}}return Ce(r||N,e)}else return Wt}function on(t){let e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof H||t instanceof At||t instanceof Fe||t instanceof Oe||t instanceof Ge||t instanceof Pe||t instanceof Ee||t instanceof Se?t.toString():JSON.stringify(t)}var _t=class t{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`\'literal\' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!cn(e[1]))return r.error("invalid value");let n=e[1],i=ue(n),o=r.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new t(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}},Ji={string:$,number:k,boolean:U,object:Wt},$e=class t{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=1,i,o=e[0];if(o==="array"){let s;if(e.length>2){let u=e[1];if(typeof u!="string"||!(u in Ji)||u==="object")return r.error(\'The item type argument of "array" must be one of string, number, boolean\',1);s=Ji[u],n++}else s=N;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error(\'The length argument to "array" must be a positive integer literal\',2);l=e[2],n++}i=Ce(s,l)}else{if(!Ji[o])throw new Error(`Types doesn\'t contain name = ${o}`);i=Ji[o]}let a=[];for(;n<e.length;n++){let s=r.parse(e[n],n,N);if(!s)return null;a.push(s)}return new t(i,a)}evaluate(e){for(let r=0;r<this.args.length;r++){let n=this.args[r].evaluate(e);if(sn(this.type,ue(n))){if(r===this.args.length-1)throw new ne(`Expected value to be of type ${ie(this.type)}, but found ${ie(ue(n))} instead.`)}else return n}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}},ku={"to-boolean":U,"to-color":ze,"to-number":k,"to-string":$},St=class t{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=e[0];if(!ku[n])throw new Error(`Can\'t parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");let i=ku[n],o=[];for(let a=1;a<e.length;a++){let s=r.parse(e[a],a,N);if(!s)return null;o.push(s)}return new t(i,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,n;for(let i of this.args){if(r=i.evaluate(e),n=null,r instanceof H)return r;if(typeof r=="string"){let o=e.parseColor(r);if(o)return o}else if(Array.isArray(r)&&(r.length<3||r.length>4?n=`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:n=tc(r[0],r[1],r[2],r[3]),!n))return new H(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new ne(n||`Could not parse color from value \'${typeof r=="string"?r:JSON.stringify(r)}\'`)}case"padding":{let r;for(let n of this.args){r=n.evaluate(e);let i=Oe.parse(r);if(i)return i}throw new ne(`Could not parse padding from value \'${typeof r=="string"?r:JSON.stringify(r)}\'`)}case"numberArray":{let r;for(let n of this.args){r=n.evaluate(e);let i=Ge.parse(r);if(i)return i}throw new ne(`Could not parse numberArray from value \'${typeof r=="string"?r:JSON.stringify(r)}\'`)}case"colorArray":{let r;for(let n of this.args){r=n.evaluate(e);let i=Pe.parse(r);if(i)return i}throw new ne(`Could not parse colorArray from value \'${typeof r=="string"?r:JSON.stringify(r)}\'`)}case"variableAnchorOffsetCollection":{let r;for(let n of this.args){r=n.evaluate(e);let i=Ee.parse(r);if(i)return i}throw new ne(`Could not parse variableAnchorOffsetCollection from value \'${typeof r=="string"?r:JSON.stringify(r)}\'`)}case"number":{let r=null;for(let n of this.args){if(r=n.evaluate(e),r===null)return 0;let i=Number(r);if(!isNaN(i))return i}throw new ne(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Fe.fromString(on(this.args[0].evaluate(e)));case"resolvedImage":return Se.fromString(on(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return on(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}},Bh=["Unknown","Point","LineString","Polygon"],eo=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=H.parse(e),this._parseColorCache.set(e,r)),r}},to=class t{constructor(e,r,n=[],i,o=new vs,a=[]){this.registry=e,this.path=n,this.key=n.map(s=>`[${s}]`).join(""),this.scope=o,this.errors=a,this.expectedType=i,this._isConstant=r}parse(e,r,n,i,o={}){return r?this.concat(r,n,i)._parse(e,o):this._parse(e,o)}_parse(e,r){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(i,o,a){return a==="assert"?new $e(o,[i]):a==="coerce"?new St(o,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error(\'Expected an array with at least one element. If you wanted a literal array, use ["literal", []].\');let i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let o=this.registry[i];if(o){let a=o.parse(e,this);if(!a)return null;if(this.expectedType){let s=this.expectedType,l=a.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&l.kind==="value")a=n(a,s,r.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(l.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(l.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(l.kind)||s.kind==="colorArray"&&["value","string","array"].includes(l.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(l.kind))a=n(a,s,r.typeAnnotation||"coerce");else if(this.checkSubtype(s,l))return null}if(!(a instanceof _t)&&a.type.kind!=="resolvedImage"&&this._isConstant(a)){let s=new eo;try{a=new _t(a.type,a.evaluate(s))}catch(l){return this.error(l.message),null}}return a}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("\'undefined\' value invalid. Use null instead."):typeof e=="object"?this.error(\'Bare objects invalid. Use ["literal", {...}] instead.\'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,r,n){let i=typeof e=="number"?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new t(this.registry,this._isConstant,i,r||null,o,this.errors)}error(e,...r){let n=`${this.key}${r.map(i=>`[${i}]`).join("")}`;this.errors.push(new Ve(n,e))}checkSubtype(e,r){let n=sn(e,r);return n&&this.error(n),n}},ro=class t{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(let r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);let n=[];for(let o=1;o<e.length-1;o+=2){let a=e[o];if(typeof a!="string")return r.error(`Expected string, but found ${typeof a} instead.`,o);if(/[^a-zA-Z0-9_]/.test(a))return r.error("Variable names must contain only alphanumeric characters or \'_\'.",o);let s=r.parse(e[o+1],o+1);if(!s)return null;n.push([a,s])}let i=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return i?new t(n,i):null}outputDefined(){return this.result.outputDefined()}},no=class t{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("\'var\' expression requires exactly one string literal argument.");let n=e[1];return r.scope.has(n)?new t(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}},Ps=class t{constructor(e,r,n){this.type=e,this.index=r,this.input=n}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let n=r.parse(e[1],1,k),i=r.parse(e[2],2,Ce(r.expectedType||N));if(!n||!i)return null;let o=i.type;return new t(o.itemType,n,i)}evaluate(e){let r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new ne(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new ne(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new ne(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}},Ss=class t{constructor(e,r){this.type=U,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);let n=r.parse(e[1],1,N),i=r.parse(e[2],2,N);return!n||!i?null:zs(n.type,[U,$,k,wr,N])?new t(n,i):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(n.type)} instead`)}evaluate(e){let r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Xt(r,["boolean","string","number","null"]))throw new ne(`Expected first argument to be of type boolean, string, number or null, but found ${ie(ue(r))} instead.`);if(!Xt(n,["string","array"]))throw new ne(`Expected second argument to be of type array or string, but found ${ie(ue(n))} instead.`);return n.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}},ws=class t{constructor(e,r,n){this.type=k,this.needle=e,this.haystack=r,this.fromIndex=n}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let n=r.parse(e[1],1,N),i=r.parse(e[2],2,N);if(!n||!i)return null;if(!zs(n.type,[U,$,k,wr,N]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(n.type)} instead`);if(e.length===4){let o=r.parse(e[3],3,k);return o?new t(n,i,o):null}else return new t(n,i)}evaluate(e){let r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Xt(r,["boolean","string","number","null"]))throw new ne(`Expected first argument to be of type boolean, string, number or null, but found ${ie(ue(r))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Xt(n,["string"])){let o=n.indexOf(r,i);return o===-1?-1:[...n.slice(0,o)].length}else{if(Xt(n,["array"]))return n.indexOf(r,i);throw new ne(`Expected second argument to be of type array or string, but found ${ie(ue(n))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}},As=class t{constructor(e,r,n,i,o,a){this.inputType=e,this.type=r,this.input=n,this.cases=i,this.outputs=o,this.otherwise=a}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return r.error("Expected an even number of arguments.");let n,i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);let o={},a=[];for(let u=2;u<e.length-1;u+=2){let c=e[u],p=e[u+1];Array.isArray(c)||(c=[c]);let f=r.concat(u);if(c.length===0)return f.error("Expected at least one branch label.");for(let m of c){if(typeof m!="number"&&typeof m!="string")return f.error("Branch labels must be numbers or strings.");if(typeof m=="number"&&Math.abs(m)>Number.MAX_SAFE_INTEGER)return f.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof m=="number"&&Math.floor(m)!==m)return f.error("Numeric branch labels must be integer values.");if(!n)n=ue(m);else if(f.checkSubtype(n,ue(m)))return null;if(typeof o[String(m)]<"u")return f.error("Branch labels must be unique.");o[String(m)]=a.length}let y=r.parse(p,u,i);if(!y)return null;i=i||y.type,a.push(y)}let s=r.parse(e[1],1,N);if(!s)return null;let l=r.parse(e[e.length-1],e.length-1,i);return!l||s.type.kind!=="value"&&r.concat(1).checkSubtype(n,s.type)?null:new t(n,i,s,o,a,l)}evaluate(e){let r=this.input.evaluate(e);return(ue(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}},_s=class t{constructor(e,r,n){this.type=e,this.branches=r,this.otherwise=n}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);let i=[];for(let a=1;a<e.length-1;a+=2){let s=r.parse(e[a],a,U);if(!s)return null;let l=r.parse(e[a+1],a+1,n);if(!l)return null;i.push([s,l]),n=n||l.type}let o=r.parse(e[e.length-1],e.length-1,n);if(!o)return null;if(!n)throw new Error("Can\'t infer output type");return new t(n,i,o)}evaluate(e){for(let[r,n]of this.branches)if(r.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(let[r,n]of this.branches)e(r),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}},Is=class t{constructor(e,r,n,i){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);let n=r.parse(e[1],1,N),i=r.parse(e[2],2,k);if(!n||!i)return null;if(!zs(n.type,[Ce(N),$,N]))return r.error(`Expected first argument to be of type array or string, but found ${ie(n.type)} instead`);if(e.length===4){let o=r.parse(e[3],3,k);return o?new t(n.type,n,i,o):null}else return new t(n.type,n,i)}evaluate(e){let r=this.input.evaluate(e),n=this.beginIndex.evaluate(e),i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Xt(r,["string"]))return[...r].slice(n,i).join("");if(Xt(r,["array"]))return r.slice(n,i);throw new ne(`Expected first argument to be of type array or string, but found ${ie(ue(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}};function xo(t,e){let r=t.length-1,n=0,i=r,o=0,a,s;for(;n<=i;)if(o=Math.floor((n+i)/2),a=t[o],s=t[o+1],a<=e){if(o===r||e<s)return o;n=o+1}else if(a>e)i=o-1;else throw new ne("Input is not a number.");return 0}var Pr=class t{constructor(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(let[i,o]of n)this.labels.push(i),this.outputs.push(o)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");let n=r.parse(e[1],1,k);if(!n)return null;let i=[],o=null;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);for(let a=1;a<e.length;a+=2){let s=a===1?-1/0:e[a],l=e[a+1],u=a,c=a+1;if(typeof s!="number")return r.error(\'Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.\',u);if(i.length&&i[i.length-1][0]>=s)return r.error(\'Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.\',u);let p=r.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new t(o,n,i)}evaluate(e){let r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);let i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);let o=r.length;if(i>=r[o-1])return n[o-1].evaluate(e);let a=xo(r,i);return n[a].evaluate(e)}eachChild(e){e(this.input);for(let r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function Vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hs,Fu;function Rh(){if(Fu)return hs;Fu=1,hs=t;function t(e,r,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(i-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=i}return t.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var o=this.sampleCurveX(n)-e;if(Math.abs(o)<r)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n=n-o/a}var s=0,l=1;for(n=e,i=0;i<20&&(o=this.sampleCurveX(n),!(Math.abs(o-e)<r));i++)e>o?s=n:l=n,n=(l-s)*.5+s;return n},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},hs}var zh=Rh(),Oh=Vh(zh),ke=class t{constructor(e,r,n,i,o){this.type=e,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(let[a,s]of o)this.labels.push(a),this.outputs.push(s)}static interpolationFactor(e,r,n,i){let o=0;if(e.name==="exponential")o=ds(r,e.base,n,i);else if(e.name==="linear")o=ds(r,1,n,i);else if(e.name==="cubic-bezier"){let a=e.controlPoints;o=new Oh(a[0],a[1],a[2],a[3]).solve(ds(r,1,n,i))}return o}static parse(e,r){let[n,i,o,...a]=e;if(!Array.isArray(i)||i.length===0)return r.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){let u=i[1];if(typeof u!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:u}}else if(i[0]==="cubic-bezier"){let u=i.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:u}}else return r.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return r.error("Expected an even number of arguments.");if(o=r.parse(o,2,k),!o)return null;let s=[],l=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&r.expectedType!=an?l=ze:r.expectedType&&r.expectedType.kind!=="value"&&(l=r.expectedType);for(let u=0;u<a.length;u+=2){let c=a[u],p=a[u+1],f=u+3,y=u+4;if(typeof c!="number")return r.error(\'Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.\',f);if(s.length&&s[s.length-1][0]>=c)return r.error(\'Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.\',f);let m=r.parse(p,y,l);if(!m)return null;l=l||m.type,s.push([c,m])}return!Pt(l,k)&&!Pt(l,yo)&&!Pt(l,ze)&&!Pt(l,ho)&&!Pt(l,go)&&!Pt(l,an)&&!Pt(l,bo)&&!Pt(l,Ce(k))?r.error(`Type ${ie(l)} is not interpolatable.`):new t(l,n,i,o,s)}evaluate(e){let r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);let i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);let o=r.length;if(i>=r[o-1])return n[o-1].evaluate(e);let a=xo(r,i),s=r[a],l=r[a+1],u=t.interpolationFactor(this.interpolation,i,s,l),c=n[a].evaluate(e),p=n[a+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wt(c,p,u);case"color":return H.interpolate(c,p,u);case"padding":return Oe.interpolate(c,p,u);case"colorArray":return Pe.interpolate(c,p,u);case"numberArray":return Ge.interpolate(c,p,u);case"variableAnchorOffsetCollection":return Ee.interpolate(c,p,u);case"array":return vr(c,p,u);case"projectionDefinition":return At.interpolate(c,p,u)}case"interpolate-hcl":switch(this.type.kind){case"color":return H.interpolate(c,p,u,"hcl");case"colorArray":return Pe.interpolate(c,p,u,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return H.interpolate(c,p,u,"lab");case"colorArray":return Pe.interpolate(c,p,u,"lab")}}}eachChild(e){e(this.input);for(let r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}};function ds(t,e,r,n){let i=n-r,o=t-r;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var lt={color:H.interpolate,number:wt,padding:Oe.interpolate,numberArray:Ge.interpolate,colorArray:Pe.interpolate,variableAnchorOffsetCollection:Ee.interpolate,array:vr},io=class t{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=null,i=r.expectedType;i&&i.kind!=="value"&&(n=i);let o=[];for(let s of e.slice(1)){let l=r.parse(s,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}if(!n)throw new Error("No output type");return i&&o.some(s=>sn(i,s.type))?new t(N,o):new t(n,o)}evaluate(e){let r=null,n=0,i;for(let o of this.args)if(n++,r=o.evaluate(e),r&&r instanceof Se&&!r.available&&(i||(i=r.name),r=null,n===this.args.length&&(r=i)),r!==null)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}};function Eu(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Gh(t,e,r){return e===r}function Nh(t,e,r){return e!==r}function Uh(t,e,r){return e<r}function $h(t,e,r){return e>r}function jh(t,e,r){return e<=r}function qh(t,e,r){return e>=r}function rc(t,e,r,n){return n.compare(e,r)===0}function Wh(t,e,r,n){return!rc(t,e,r,n)}function Xh(t,e,r,n){return n.compare(e,r)<0}function Hh(t,e,r,n){return n.compare(e,r)>0}function Zh(t,e,r,n){return n.compare(e,r)<=0}function Jh(t,e,r,n){return n.compare(e,r)>=0}function _r(t,e,r){let n=t!=="=="&&t!=="!=";return class nc{constructor(o,a,s){this.type=U,this.lhs=o,this.rhs=a,this.collator=s,this.hasUntypedArgument=o.type.kind==="value"||a.type.kind==="value"}static parse(o,a){if(o.length!==3&&o.length!==4)return a.error("Expected two or three arguments.");let s=o[0],l=a.parse(o[1],1,N);if(!l)return null;if(!Eu(s,l.type))return a.concat(1).error(`"${s}" comparisons are not supported for type \'${ie(l.type)}\'.`);let u=a.parse(o[2],2,N);if(!u)return null;if(!Eu(s,u.type))return a.concat(2).error(`"${s}" comparisons are not supported for type \'${ie(u.type)}\'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error(`Cannot compare types \'${ie(l.type)}\' and \'${ie(u.type)}\'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new $e(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new $e(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return a.error("Cannot use collator to compare non-string types.");if(c=a.parse(o[3],3,mo),!c)return null}return new nc(l,u,c)}evaluate(o){let a=this.lhs.evaluate(o),s=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){let l=ue(a),u=ue(s);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new ne(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){let l=ue(a),u=ue(s);if(l.kind!=="string"||u.kind!=="string")return e(o,a,s)}return this.collator?r(o,a,s,this.collator.evaluate(o)):e(o,a,s)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}var Yh=_r("==",Gh,rc),Kh=_r("!=",Nh,Wh),Qh=_r("<",Uh,Xh),ed=_r(">",$h,Hh),td=_r("<=",jh,Zh),rd=_r(">=",qh,Jh),oo=class t{constructor(e,r,n){this.type=mo,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");let n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");let i=r.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,U);if(!i)return null;let o=r.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,U);if(!o)return null;let a=null;return n.locale&&(a=r.parse(n.locale,1,$),!a)?null:new t(i,o,a)}evaluate(e){return new ln(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}},Ts=class t{constructor(e,r,n,i,o){this.type=$,this.number=e,this.locale=r,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");let n=r.parse(e[1],1,k);if(!n)return null;let i=e[2];if(typeof i!="object"||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=r.parse(i.locale,1,$),!o))return null;let a=null;if(i.currency&&(a=r.parse(i.currency,1,$),!a))return null;let s=null;if(i["min-fraction-digits"]&&(s=r.parse(i["min-fraction-digits"],1,k),!s))return null;let l=null;return i["max-fraction-digits"]&&(l=r.parse(i["max-fraction-digits"],1,k),!l)?null:new t(n,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}},pn=class t{constructor(e){this.type=Ar,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");let i=[],o=!1;for(let a=1;a<=e.length-1;++a){let s=e[a];if(o&&typeof s=="object"&&!Array.isArray(s)){o=!1;let l=null;if(s["font-scale"]&&(l=r.parse(s["font-scale"],1,k),!l))return null;let u=null;if(s["text-font"]&&(u=r.parse(s["text-font"],1,Ce($)),!u))return null;let c=null;if(s["text-color"]&&(c=r.parse(s["text-color"],1,ze),!c))return null;let p=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!Lh.includes(s["vertical-align"]))return r.error(`\'vertical-align\' must be one of: \'bottom\', \'center\', \'top\' but found \'${s["vertical-align"]}\' instead.`);if(p=r.parse(s["vertical-align"],1,$),!p)return null}let f=i[i.length-1];f.scale=l,f.font=u,f.textColor=c,f.verticalAlign=p}else{let l=r.parse(e[a],1,N);if(!l)return null;let u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return r.error("Formatted text type must be \'string\', \'value\', \'image\' or \'null\'.");o=!0,i.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new t(i)}evaluate(e){let r=n=>{let i=n.content.evaluate(e);return ue(i)===vn?new un("",i,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new un(on(i),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)};return new Fe(this.sections.map(r))}eachChild(e){for(let r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}},Cs=class t{constructor(e){this.type=vn,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");let n=r.parse(e[1],1,$);return n?new t(n):r.error("No image name provided.")}evaluate(e){let r=this.input.evaluate(e),n=Se.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}},ks=class t{constructor(e){this.type=k,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);let n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${ie(n.type)} instead.`):new t(n):null}evaluate(e){let r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new ne(`Expected value to be of type string or array, but found ${ie(ue(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}},He=8192;function nd(t,e){let r=id(t[0]),n=ad(t[1]),i=Math.pow(2,e.z);return[Math.round(r*i*He),Math.round(n*i*He)]}function Os(t,e){let r=Math.pow(2,e.z),n=(t[0]/He+e.x)/r,i=(t[1]/He+e.y)/r;return[od(n),sd(i)]}function id(t){return(180+t)/360}function od(t){return t*360-180}function ad(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function sd(t){return 360/Math.PI*Math.atan(Math.exp((180-t*360)*Math.PI/180))-90}function Pn(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function fn(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ld(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function ud(t,e,r){let n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i===0&&n*o<=0&&i*a<=0}function vo(t,e,r,n){let i=[e[0]-t[0],e[1]-t[1]],o=[n[0]-r[0],n[1]-r[1]];return yd(o,i)===0?!1:!!(Mu(t,e,r,n)&&Mu(r,n,t,e))}function cd(t,e,r){for(let n of r)for(let i=0;i<n.length-1;++i)if(vo(t,e,n[i],n[i+1]))return!0;return!1}function Ir(t,e,r=!1){let n=!1;for(let i of e)for(let o=0;o<i.length-1;o++){if(ud(t,i[o],i[o+1]))return r;ld(t,i[o],i[o+1])&&(n=!n)}return n}function pd(t,e){for(let r of e)if(Ir(t,r))return!0;return!1}function ic(t,e){for(let r of t)if(!Ir(r,e))return!1;for(let r=0;r<t.length-1;++r)if(cd(t[r],t[r+1],e))return!1;return!0}function fd(t,e){for(let r of e)if(ic(t,r))return!0;return!1}function yd(t,e){return t[0]*e[1]-t[1]*e[0]}function Mu(t,e,r,n){let i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],l=n[0]-r[0],u=n[1]-r[1],c=i*u-l*o,p=a*u-l*s;return c>0&&p<0||c<0&&p>0}function Gs(t,e,r){let n=[];for(let i=0;i<t.length;i++){let o=[];for(let a=0;a<t[i].length;a++){let s=nd(t[i][a],r);Pn(e,s),o.push(s)}n.push(o)}return n}function oc(t,e,r){let n=[];for(let i=0;i<t.length;i++){let o=Gs(t[i],e,r);n.push(o)}return n}function ac(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){let i=n*.5,o=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;o===0&&(o=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=o}Pn(e,t)}function md(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}function Lu(t,e,r,n){let i=Math.pow(2,n.z)*He,o=[n.x*He,n.y*He],a=[];for(let s of t)for(let l of s){let u=[l.x+o[0],l.y+o[1]];ac(u,e,r,i),a.push(u)}return a}function Du(t,e,r,n){let i=Math.pow(2,n.z)*He,o=[n.x*He,n.y*He],a=[];for(let s of t){let l=[];for(let u of s){let c=[u.x+o[0],u.y+o[1]];Pn(e,c),l.push(c)}a.push(l)}if(e[2]-e[0]<=i/2){md(e);for(let s of a)for(let l of s)ac(l,e,r,i)}return a}function hd(t,e){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){let o=Gs(e.coordinates,n,i),a=Lu(t.geometry(),r,n,i);if(!fn(r,n))return!1;for(let s of a)if(!Ir(s,o))return!1}if(e.type==="MultiPolygon"){let o=oc(e.coordinates,n,i),a=Lu(t.geometry(),r,n,i);if(!fn(r,n))return!1;for(let s of a)if(!pd(s,o))return!1}return!0}function dd(t,e){let r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(e.type==="Polygon"){let o=Gs(e.coordinates,n,i),a=Du(t.geometry(),r,n,i);if(!fn(r,n))return!1;for(let s of a)if(!ic(s,o))return!1}if(e.type==="MultiPolygon"){let o=oc(e.coordinates,n,i),a=Du(t.geometry(),r,n,i);if(!fn(r,n))return!1;for(let s of a)if(!fd(s,o))return!1}return!0}var yn=class t{constructor(e,r){this.type=U,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`\'within\' expression requires exactly one argument, but found ${e.length-1} instead.`);if(cn(e[1])){let n=e[1];if(n.type==="FeatureCollection"){let i=[];for(let o of n.features){let{type:a,coordinates:s}=o.geometry;a==="Polygon"&&i.push(s),a==="MultiPolygon"&&i.push(...s)}if(i.length){let o={type:"MultiPolygon",coordinates:i};return new t(n,o)}}else if(n.type==="Feature"){let i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new t(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new t(n,n)}return r.error("\'within\' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return hd(e,this.geometries);if(e.geometryType()==="LineString")return dd(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}},ao=class{constructor(e=[],r=(n,i)=>n<i?-1:n>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:r,compare:n}=this,i=r[e];for(;e>0;){let o=e-1>>1,a=r[o];if(n(i,a)>=0)break;r[e]=a,e=o}r[e]=i}_down(e){let{data:r,compare:n}=this,i=this.length>>1,o=r[e];for(;e<i;){let a=(e<<1)+1,s=a+1;if(s<this.length&&n(r[s],r[a])<0&&(a=s),n(r[a],o)>=0)break;r[e]=r[a],e=a}r[e]=o}};function sc(t,e,r=0,n=t.length-1,i=gd){for(;n>r;){if(n-r>600){let l=n-r+1,u=e-r+1,c=Math.log(l),p=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1),y=Math.max(r,Math.floor(e-u*p/l+f)),m=Math.min(n,Math.floor(e+(l-u)*p/l+f));sc(t,e,y,m,i)}let o=t[e],a=r,s=n;for(rn(t,r,e),i(t[n],o)>0&&rn(t,r,n);a<s;){for(rn(t,a,s),a++,s--;i(t[a],o)<0;)a++;for(;i(t[s],o)>0;)s--}i(t[r],o)===0?rn(t,r,s):(s++,rn(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}}function rn(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function gd(t,e){return t<e?-1:t>e?1:0}function Yt(t,e){if(t.length<=1)return[t];let n=[],i,o;for(let a of t){let s=xd(a);s!==0&&(a.area=Math.abs(s),o===void 0&&(o=s<0),o===s<0?(i&&n.push(i),i=[a]):i.push(a))}if(i&&n.push(i),e>1)for(let a=0;a<n.length;a++)n[a].length<=e||(sc(n[a],e,1,n[a].length-1,bd),n[a]=n[a].slice(0,e));return n}function bd(t,e){return e.area-t.area}function xd(t){let e=0;for(let r=0,n=t.length,i=n-1,o,a;r<n;i=r++)o=t[r],a=t[i],e+=(a.x-o.x)*(o.y+a.y);return e}var vd=6378.137,Bu=1/298.257223563,Vu=Bu*(2-Bu),Ru=Math.PI/180,mn=class{constructor(e){let r=Ru*vd*1e3,n=Math.cos(e*Ru),i=1/(1-Vu*(1-n*n)),o=Math.sqrt(i);this.kx=r*o*n,this.ky=r*o*i*(1-Vu)}distance(e,r){let n=this.wrap(e[0]-r[0])*this.kx,i=(e[1]-r[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,r){let n=1/0,i,o,a,s;for(let l=0;l<e.length-1;l++){let u=e[l][0],c=e[l][1],p=this.wrap(e[l+1][0]-u)*this.kx,f=(e[l+1][1]-c)*this.ky,y=0;(p!==0||f!==0)&&(y=(this.wrap(r[0]-u)*this.kx*p+(r[1]-c)*this.ky*f)/(p*p+f*f),y>1?(u=e[l+1][0],c=e[l+1][1]):y>0&&(u+=p/this.kx*y,c+=f/this.ky*y)),p=this.wrap(r[0]-u)*this.kx,f=(r[1]-c)*this.ky;let m=p*p+f*f;m<n&&(n=m,i=u,o=c,a=l,s=y)}return{point:[i,o],index:a,t:Math.max(0,Math.min(1,s))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}},Fs=100,Es=50;function lc(t,e){return e[0]-t[0]}function so(t){return t[1]-t[0]+1}function st(t,e){return t[1]>=t[0]&&t[1]<e}function Ms(t,e){if(t[0]>t[1])return[null,null];let r=so(t);if(e){if(r===2)return[t,null];let i=Math.floor(r/2);return[[t[0],t[0]+i],[t[0]+i,t[1]]]}if(r===1)return[t,null];let n=Math.floor(r/2)-1;return[[t[0],t[0]+n],[t[0]+n+1,t[1]]]}function Ls(t,e){if(!st(e,t.length))return[1/0,1/0,-1/0,-1/0];let r=[1/0,1/0,-1/0,-1/0];for(let n=e[0];n<=e[1];++n)Pn(r,t[n]);return r}function Ds(t){let e=[1/0,1/0,-1/0,-1/0];for(let r of t)for(let n of r)Pn(e,n);return e}function zu(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function Ns(t,e,r){if(!zu(t)||!zu(e))return NaN;let n=0,i=0;return t[2]<e[0]&&(n=e[0]-t[2]),t[0]>e[2]&&(n=t[0]-e[2]),t[1]>e[3]&&(i=t[1]-e[3]),t[3]<e[1]&&(i=e[1]-t[3]),r.distance([0,0],[n,i])}function qt(t,e,r){let n=r.pointOnLine(e,t);return r.distance(t,n.point)}function Us(t,e,r,n,i){let o=Math.min(qt(t,[r,n],i),qt(e,[r,n],i)),a=Math.min(qt(r,[t,e],i),qt(n,[t,e],i));return Math.min(o,a)}function Pd(t,e,r,n,i){if(!(st(e,t.length)&&st(n,r.length)))return 1/0;let a=1/0;for(let s=e[0];s<e[1];++s){let l=t[s],u=t[s+1];for(let c=n[0];c<n[1];++c){let p=r[c],f=r[c+1];if(vo(l,u,p,f))return 0;a=Math.min(a,Us(l,u,p,f,i))}}return a}function Sd(t,e,r,n,i){if(!(st(e,t.length)&&st(n,r.length)))return NaN;let a=1/0;for(let s=e[0];s<=e[1];++s)for(let l=n[0];l<=n[1];++l)if(a=Math.min(a,i.distance(t[s],r[l])),a===0)return a;return a}function wd(t,e,r){if(Ir(t,e,!0))return 0;let n=1/0;for(let i of e){let o=i[0],a=i[i.length-1];if(o!==a&&(n=Math.min(n,qt(t,[a,o],r)),n===0))return n;let s=r.pointOnLine(i,t);if(n=Math.min(n,r.distance(t,s.point)),n===0)return n}return n}function Ad(t,e,r,n){if(!st(e,t.length))return NaN;for(let o=e[0];o<=e[1];++o)if(Ir(t[o],r,!0))return 0;let i=1/0;for(let o=e[0];o<e[1];++o){let a=t[o],s=t[o+1];for(let l of r)for(let u=0,c=l.length,p=c-1;u<c;p=u++){let f=l[p],y=l[u];if(vo(a,s,f,y))return 0;i=Math.min(i,Us(a,s,f,y,n))}}return i}function Ou(t,e){for(let r of t)for(let n of r)if(Ir(n,e,!0))return!0;return!1}function _d(t,e,r,n=1/0){let i=Ds(t),o=Ds(e);if(n!==1/0&&Ns(i,o,r)>=n)return n;if(fn(i,o)){if(Ou(t,e))return 0}else if(Ou(e,t))return 0;let a=1/0;for(let s of t)for(let l=0,u=s.length,c=u-1;l<u;c=l++){let p=s[c],f=s[l];for(let y of e)for(let m=0,h=y.length,g=h-1;m<h;g=m++){let d=y[g],x=y[m];if(vo(p,f,d,x))return 0;a=Math.min(a,Us(p,f,d,x,r))}}return a}function Gu(t,e,r,n,i,o){if(!o)return;let a=Ns(Ls(n,o),i,r);a<e&&t.push([a,o,[0,0]])}function Yi(t,e,r,n,i,o,a){if(!o||!a)return;let s=Ns(Ls(n,o),Ls(i,a),r);s<e&&t.push([s,o,a])}function lo(t,e,r,n,i=1/0){let o=Math.min(n.distance(t[0],r[0][0]),i);if(o===0)return o;let a=new ao([[0,[0,t.length-1],[0,0]]],lc),s=Ds(r);for(;a.length>0;){let l=a.pop();if(l[0]>=o)continue;let u=l[1],c=e?Es:Fs;if(so(u)<=c){if(!st(u,t.length))return NaN;if(e){let p=Ad(t,u,r,n);if(isNaN(p)||p===0)return p;o=Math.min(o,p)}else for(let p=u[0];p<=u[1];++p){let f=wd(t[p],r,n);if(o=Math.min(o,f),o===0)return 0}}else{let p=Ms(u,e);Gu(a,o,n,t,s,p[0]),Gu(a,o,n,t,s,p[1])}}return o}function uo(t,e,r,n,i,o=1/0){let a=Math.min(o,i.distance(t[0],r[0]));if(a===0)return a;let s=new ao([[0,[0,t.length-1],[0,r.length-1]]],lc);for(;s.length>0;){let l=s.pop();if(l[0]>=a)continue;let u=l[1],c=l[2],p=e?Es:Fs,f=n?Es:Fs;if(so(u)<=p&&so(c)<=f){if(!st(u,t.length)&&st(c,r.length))return NaN;let y;if(e&&n)y=Pd(t,u,r,c,i),a=Math.min(a,y);else if(e&&!n){let m=t.slice(u[0],u[1]+1);for(let h=c[0];h<=c[1];++h)if(y=qt(r[h],m,i),a=Math.min(a,y),a===0)return a}else if(!e&&n){let m=r.slice(c[0],c[1]+1);for(let h=u[0];h<=u[1];++h)if(y=qt(t[h],m,i),a=Math.min(a,y),a===0)return a}else y=Sd(t,u,r,c,i),a=Math.min(a,y)}else{let y=Ms(u,e),m=Ms(c,n);Yi(s,a,i,t,r,y[0],m[0]),Yi(s,a,i,t,r,y[0],m[1]),Yi(s,a,i,t,r,y[1],m[0]),Yi(s,a,i,t,r,y[1],m[1])}}return a}function Id(t,e){let r=t.geometry(),n=r.flat().map(a=>Os([a.x,a.y],t.canonical));if(r.length===0)return NaN;let i=new mn(n[0][1]),o=1/0;for(let a of e){switch(a.type){case"Point":o=Math.min(o,uo(n,!1,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,uo(n,!1,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,lo(n,!1,a.coordinates,i,o));break}if(o===0)return o}return o}function Td(t,e){let r=t.geometry(),n=r.flat().map(a=>Os([a.x,a.y],t.canonical));if(r.length===0)return NaN;let i=new mn(n[0][1]),o=1/0;for(let a of e){switch(a.type){case"Point":o=Math.min(o,uo(n,!0,[a.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,uo(n,!0,a.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,lo(n,!0,a.coordinates,i,o));break}if(o===0)return o}return o}function Cd(t,e){let r=t.geometry();if(r.length===0||r[0].length===0)return NaN;let n=Yt(r,0).map(a=>a.map(s=>s.map(l=>Os([l.x,l.y],t.canonical)))),i=new mn(n[0][0][0][1]),o=1/0;for(let a of e)for(let s of n){switch(a.type){case"Point":o=Math.min(o,lo([a.coordinates],!1,s,i,o));break;case"LineString":o=Math.min(o,lo(a.coordinates,!0,s,i,o));break;case"Polygon":o=Math.min(o,_d(s,a.coordinates,i,o));break}if(o===0)return o}return o}function gs(t){return t.type==="MultiPolygon"?t.coordinates.map(e=>({type:"Polygon",coordinates:e})):t.type==="MultiLineString"?t.coordinates.map(e=>({type:"LineString",coordinates:e})):t.type==="MultiPoint"?t.coordinates.map(e=>({type:"Point",coordinates:e})):[t]}var hn=class t{constructor(e,r){this.type=k,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`\'distance\' expression requires exactly one argument, but found ${e.length-1} instead.`);if(cn(e[1])){let n=e[1];if(n.type==="FeatureCollection")return new t(n,n.features.map(i=>gs(i.geometry)).flat());if(n.type==="Feature")return new t(n,gs(n.geometry));if("type"in n&&"coordinates"in n)return new t(n,gs(n))}return r.error("\'distance\' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return Id(e,this.geometries);if(e.geometryType()==="LineString")return Td(e,this.geometries);if(e.geometryType()==="Polygon")return Cd(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}},dn=class t{constructor(e){this.type=N,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);let n=e[1];return n==null?r.error("Global state property must be defined."):typeof n!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new t(n)}evaluate(e){var r;let n=(r=e.globals)===null||r===void 0?void 0:r.globalState;return!n||Object.keys(n).length===0?null:nn(n,this.key)}eachChild(){}outputDefined(){return!1}},Kt={"==":Yh,"!=":Kh,">":ed,"<":Qh,">=":rd,"<=":td,array:$e,at:Ps,boolean:$e,case:_s,coalesce:io,collator:oo,format:pn,image:Cs,in:Ss,"index-of":ws,interpolate:ke,"interpolate-hcl":ke,"interpolate-lab":ke,length:ks,let:ro,literal:_t,match:As,number:$e,"number-format":Ts,object:$e,slice:Is,step:Pr,string:$e,"to-boolean":St,"to-color":St,"to-number":St,"to-string":St,var:no,within:yn,distance:hn,"global-state":dn},Ze=class t{constructor(e,r,n,i){this.name=e,this.type=r,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){let n=e[0],i=t.definitions[n];if(!i)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);let o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(([u])=>!Array.isArray(u)||u.length===e.length-1),l=null;for(let[u,c]of s){l=new to(r.registry,co,r.path,null,r.scope);let p=[],f=!1;for(let y=1;y<e.length;y++){let m=e[y],h=Array.isArray(u)?u[y-1]:u.type,g=l.parse(m,1+p.length,h);if(!g){f=!0;break}p.push(g)}if(!f){if(Array.isArray(u)&&u.length!==p.length){l.error(`Expected ${u.length} arguments, but found ${p.length} instead.`);continue}for(let y=0;y<p.length;y++){let m=Array.isArray(u)?u[y]:u.type,h=p[y];l.concat(y+1).checkSubtype(m,h.type)}if(l.errors.length===0)return new t(n,o,c,p)}}if(s.length===1)r.errors.push(...l.errors);else{let c=(s.length?s:a).map(([f])=>Fd(f)).join(" | "),p=[];for(let f=1;f<e.length;f++){let y=r.parse(e[f],1+p.length);if(!y)return null;p.push(ie(y.type))}r.error(`Expected arguments of type ${c}, but found (${p.join(", ")}) instead.`)}return null}static register(e,r){t.definitions=r;for(let n in r)e[n]=t}};function Nu(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);let o=i?i.evaluate(t):1,a=tc(e,r,n,o);if(a)throw new ne(a);return new H(e/255,r/255,n/255,o,!1)}function Uu(t,e){return t in e}function bs(t,e){let r=e[t];return typeof r>"u"?null:r}function kd(t,e,r,n){for(;r<=n;){let i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}function jt(t){return{type:t}}Ze.register(Kt,{error:[Ph,[$],(t,[e])=>{throw new ne(e.evaluate(t))}],typeof:[$,[N],(t,[e])=>ie(ue(e.evaluate(t)))],"to-rgba":[Ce(k,4),[ze],(t,[e])=>{let[r,n,i,o]=e.evaluate(t).rgb;return[r*255,n*255,i*255,o]}],rgb:[ze,[k,k,k],Nu],rgba:[ze,[k,k,k,k],Nu],has:{type:U,overloads:[[[$],(t,[e])=>Uu(e.evaluate(t),t.properties())],[[$,Wt],(t,[e,r])=>Uu(e.evaluate(t),r.evaluate(t))]]},get:{type:N,overloads:[[[$],(t,[e])=>bs(e.evaluate(t),t.properties())],[[$,Wt],(t,[e,r])=>bs(e.evaluate(t),r.evaluate(t))]]},"feature-state":[N,[$],(t,[e])=>bs(e.evaluate(t),t.featureState||{})],properties:[Wt,[],t=>t.properties()],"geometry-type":[$,[],t=>t.geometryType()],id:[N,[],t=>t.id()],zoom:[k,[],t=>t.globals.zoom],"heatmap-density":[k,[],t=>t.globals.heatmapDensity||0],elevation:[k,[],t=>t.globals.elevation||0],"line-progress":[k,[],t=>t.globals.lineProgress||0],accumulated:[N,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[k,jt(k),(t,e)=>{let r=0;for(let n of e)r+=n.evaluate(t);return r}],"*":[k,jt(k),(t,e)=>{let r=1;for(let n of e)r*=n.evaluate(t);return r}],"-":{type:k,overloads:[[[k,k],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[k],(t,[e])=>-e.evaluate(t)]]},"/":[k,[k,k],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[k,[k,k],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[k,[],()=>Math.LN2],pi:[k,[],()=>Math.PI],e:[k,[],()=>Math.E],"^":[k,[k,k],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[k,[k],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[k,[k],(t,[e])=>Math.log(e.evaluate(t))],log2:[k,[k],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[k,[k],(t,[e])=>Math.sin(e.evaluate(t))],cos:[k,[k],(t,[e])=>Math.cos(e.evaluate(t))],tan:[k,[k],(t,[e])=>Math.tan(e.evaluate(t))],asin:[k,[k],(t,[e])=>Math.asin(e.evaluate(t))],acos:[k,[k],(t,[e])=>Math.acos(e.evaluate(t))],atan:[k,[k],(t,[e])=>Math.atan(e.evaluate(t))],min:[k,jt(k),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[k,jt(k),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[k,[k],(t,[e])=>Math.abs(e.evaluate(t))],round:[k,[k],(t,[e])=>{let r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[k,[k],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[k,[k],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[U,[$,N],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[U,[N],(t,[e])=>t.id()===e.value],"filter-type-==":[U,[$],(t,[e])=>t.geometryType()===e.value],"filter-<":[U,[$,N],(t,[e,r])=>{let n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[U,[N],(t,[e])=>{let r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[U,[$,N],(t,[e,r])=>{let n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[U,[N],(t,[e])=>{let r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[U,[$,N],(t,[e,r])=>{let n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[U,[N],(t,[e])=>{let r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[U,[$,N],(t,[e,r])=>{let n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[U,[N],(t,[e])=>{let r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[U,[N],(t,[e])=>e.value in t.properties()],"filter-has-id":[U,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[U,[Ce($)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[U,[Ce(N)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[U,[$,Ce(N)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[U,[$,Ce(N)],(t,[e,r])=>kd(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:U,overloads:[[[U,U],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[jt(U),(t,e)=>{for(let r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:U,overloads:[[[U,U],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[jt(U),(t,e)=>{for(let r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[U,[U],(t,[e])=>!e.evaluate(t)],"is-supported-script":[U,[$],(t,[e])=>{let r=t.globals&&t.globals.isSupportedScript;return r?r(e.evaluate(t)):!0}],upcase:[$,[$],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[$,[$],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[$,jt(N),(t,e)=>e.map(r=>on(r.evaluate(t))).join("")],"resolved-locale":[$,[mo],(t,[e])=>e.evaluate(t).resolvedLocale()]});function Fd(t){return Array.isArray(t)?`(${t.map(ie).join(", ")})`:`(${ie(t.type)}...)`}function co(t){if(t instanceof no)return co(t.boundExpression);if(t instanceof Ze&&t.name==="error")return!1;if(t instanceof oo)return!1;if(t instanceof yn)return!1;if(t instanceof hn)return!1;if(t instanceof dn)return!1;let e=t instanceof St||t instanceof $e,r=!0;return t.eachChild(n=>{e?r=r&&co(n):r=r&&n instanceof _t}),r?Po(t)&&So(t,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function Po(t){if(t instanceof Ze){if(t.name==="get"&&t.args.length===1)return!1;if(t.name==="feature-state")return!1;if(t.name==="has"&&t.args.length===1)return!1;if(t.name==="properties"||t.name==="geometry-type"||t.name==="id")return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof yn||t instanceof hn)return!1;let e=!0;return t.eachChild(r=>{e&&!Po(r)&&(e=!1)}),e}function gn(t){if(t instanceof Ze&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!gn(r)&&(e=!1)}),e}function So(t,e){if(t instanceof Ze&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(n=>{r&&!So(n,e)&&(r=!1)}),r}function Bs(t){return{result:"success",value:t}}function gr(t){return{result:"error",value:t}}function It(t){return t["property-type"]==="data-driven"||t["property-type"]==="cross-faded-data-driven"}function uc(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function $s(t){return!!t.expression&&t.expression.interpolated}function j(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}function wo(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&ue(t)===Wt}function Ed(t){return t}function Md(t){switch(t.type){case"color":return H.parse;case"padding":return Oe.parse;case"numberArray":return Ge.parse;case"colorArray":return Pe.parse;default:return null}}function Ld(t){switch(t){case"exponential":return pc;case"interval":return Bd;case"categorical":return Dd;case"identity":return Vd;default:throw new Error(`Unknown function type "${t}"`)}}function cc(t,e){let r=t.stops&&typeof t.stops[0][0]=="object",n=r||t.property!==void 0,i=r||!n,o=t.type||($s(e)?"exponential":"interval"),a=Md(e);if(a&&(t=xr({},t),t.stops&&(t.stops=t.stops.map(c=>[c[0],a(c[1])])),t.default?t.default=a(t.default):t.default=a(e.default)),t.colorSpace&&!Mh(t.colorSpace))throw new Error(`Unknown color space: "${t.colorSpace}"`);let s=Ld(o),l,u;if(o==="categorical"){l=Object.create(null);for(let c of t.stops)l[c[0]]=c[1];u=typeof t.stops[0][0]}if(r){let c={},p=[];for(let m=0;m<t.stops.length;m++){let h=t.stops[m],g=h[0].zoom;c[g]===void 0&&(c[g]={zoom:g,type:t.type,property:t.property,default:t.default,stops:[]},p.push(g)),c[g].stops.push([h[0].value,h[1]])}let f=[];for(let m of p)f.push([c[m].zoom,cc(c[m],e)]);let y={name:"linear"};return{kind:"composite",interpolationType:y,interpolationFactor:ke.interpolationFactor.bind(void 0,y),zoomStops:f.map(m=>m[0]),evaluate({zoom:m},h){return pc({stops:f,base:t.base},e,m).evaluate(m,h)}}}else if(i){let c=o==="exponential"?{name:"exponential",base:t.base!==void 0?t.base:1}:null;return{kind:"camera",interpolationType:c,interpolationFactor:ke.interpolationFactor.bind(void 0,c),zoomStops:t.stops.map(p=>p[0]),evaluate:({zoom:p})=>s(t,e,p,l,u)}}else return{kind:"source",evaluate(c,p){let f=p&&p.properties?p.properties[t.property]:void 0;return f===void 0?Sn(t.default,e.default):s(t,e,f,l,u)}}}function Sn(t,e,r){if(t!==void 0)return t;if(e!==void 0)return e;if(r!==void 0)return r}function Dd(t,e,r,n,i){let o=typeof r===i?n[r]:void 0;return Sn(o,t.default,e.default)}function Bd(t,e,r){if(j(r)!=="number")return Sn(t.default,e.default);let n=t.stops.length;if(n===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];let i=xo(t.stops.map(o=>o[0]),r);return t.stops[i][1]}function pc(t,e,r){let n=t.base!==void 0?t.base:1;if(j(r)!=="number")return Sn(t.default,e.default);let i=t.stops.length;if(i===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];let o=xo(t.stops.map(c=>c[0]),r),a=Rd(r,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],u=lt[e.type]||Ed;return typeof s.evaluate=="function"?{evaluate(...c){let p=s.evaluate.apply(void 0,c),f=l.evaluate.apply(void 0,c);if(!(p===void 0||f===void 0))return u(p,f,a,t.colorSpace)}}:u(s,l,a,t.colorSpace)}function Vd(t,e,r){switch(e.type){case"color":r=H.parse(r);break;case"formatted":r=Fe.fromString(r.toString());break;case"resolvedImage":r=Se.fromString(r.toString());break;case"padding":r=Oe.parse(r);break;case"colorArray":r=Pe.parse(r);break;case"numberArray":r=Ge.parse(r);break;default:j(r)!==e.type&&(e.type!=="enum"||!e.values[r])&&(r=void 0)}return Sn(r,t.default,e.default)}function Rd(t,e,r,n){let i=n-r,o=t-r;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var Ht=class{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new eo,this._defaultValue=r?Od(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,n,i,o,a){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,r,n,i,o,a){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=a||null;try{let s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new ne(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}};function wn(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in Kt}function Qt(t,e){let r=new to(Kt,co,[],e?zd(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Bs(new Ht(n,e)):gr(r.errors)}var Je=class{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!gn(r.expression),this.globalStateRefs=Ao(r.expression)}evaluateWithoutErrorHandling(e,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,o,a)}evaluate(e,r,n,i,o,a){return this._styleExpression.evaluate(e,r,n,i,o,a)}},Tt=class{constructor(e,r,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!gn(r.expression),this.globalStateRefs=Ao(r.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,r,n,i,o,a){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,i,o,a)}evaluate(e,r,n,i,o,a){return this._styleExpression.evaluate(e,r,n,i,o,a)}interpolationFactor(e,r,n){return this.interpolationType?ke.interpolationFactor(this.interpolationType,e,r,n):0}};function fc(t){return t._styleExpression!==void 0}function yc(t,e){let r=Qt(t,e);if(r.result==="error")return r;let n=r.value.expression,i=Po(n);if(!i&&!It(e))return gr([new Ve("","data expressions not supported")]);let o=So(n,["zoom"]);if(!o&&!uc(e))return gr([new Ve("","zoom expressions not supported")]);let a=Qi(n);if(!a&&!o)return gr([new Ve("",\'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.\')]);if(a instanceof Ve)return gr([a]);if(a instanceof ke&&!$s(e))return gr([new Ve("",\'"interpolate" expressions cannot be used with this property\')]);if(!a)return Bs(i?new Je("constant",r.value):new Je("source",r.value));let s=a instanceof ke?a.interpolation:void 0;return Bs(i?new Tt("camera",r.value,a.labels,s):new Tt("composite",r.value,a.labels,s))}var bn=class t{constructor(e,r){this._parameters=e,this._specification=r,xr(this,cc(this._parameters,this._specification))}static deserialize(e){return new t(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}};function mc(t,e){if(wo(t))return new bn(t,e);if(wn(t)){let r=yc(t,e);if(r.result==="error")throw new Error(r.value.map(n=>`${n.key}: ${n.message}`).join(", "));return r.value}else{let r=t;return e.type==="color"&&typeof t=="string"?r=H.parse(t):e.type==="padding"&&(typeof t=="number"||Array.isArray(t))?r=Oe.parse(t):e.type==="numberArray"&&(typeof t=="number"||Array.isArray(t))?r=Ge.parse(t):e.type==="colorArray"&&(typeof t=="string"||Array.isArray(t))?r=Pe.parse(t):e.type==="variableAnchorOffsetCollection"&&Array.isArray(t)?r=Ee.parse(t):e.type==="projectionDefinition"&&typeof t=="string"&&(r=At.parse(t)),{globalStateRefs:new Set,kind:"constant",evaluate:()=>r}}}function Qi(t){let e=null;if(t instanceof ro)e=Qi(t.result);else if(t instanceof io){for(let r of t.args)if(e=Qi(r),e)break}else(t instanceof Pr||t instanceof ke)&&t.input instanceof Ze&&t.input.name==="zoom"&&(e=t);return e instanceof Ve||t.eachChild(r=>{let n=Qi(r);n instanceof Ve?e=n:!e&&n?e=new Ve("",\'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.\'):e&&n&&e!==n&&(e=new Ve("",\'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.\'))}),e}function Ao(t,e=new Set){return t instanceof dn&&e.add(t.key),t.eachChild(r=>{Ao(r,e)}),e}function zd(t){let e={color:ze,string:$,number:k,enum:$,boolean:U,formatted:Ar,padding:ho,numberArray:go,colorArray:an,projectionDefinition:yo,resolvedImage:vn,variableAnchorOffsetCollection:bo};return t.type==="array"?Ce(e[t.value]||N,t.length):e[t.type]}function Od(t){if(t.type==="color"&&wo(t.default))return new H(0,0,0,0);switch(t.type){case"color":return H.parse(t.default)||null;case"padding":return Oe.parse(t.default)||null;case"numberArray":return Ge.parse(t.default)||null;case"colorArray":return Pe.parse(t.default)||null;case"variableAnchorOffsetCollection":return Ee.parse(t.default)||null;case"projectionDefinition":return At.parse(t.default)||null;default:return t.default===void 0?null:t.default}}function js(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(let e of t.slice(1))if(!js(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}var Gd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ct(t){if(t==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};js(t)||(t=po(t));let e=Qt(t,Gd);if(e.result==="error")throw new Error(e.value.map(r=>`${r.key}: ${r.message}`).join(", "));{let r=hc(t);return{filter:(n,i,o)=>e.value.evaluate(n,i,{},o),needGeometry:r,getGlobalStateRefs:()=>Ao(e.value.expression)}}}function Nd(t,e){return t<e?-1:t>e?1:0}function hc(t){if(!Array.isArray(t))return!1;if(t[0]==="within"||t[0]==="distance")return!0;for(let e=1;e<t.length;e++)if(hc(t[e]))return!0;return!1}function po(t){if(!t)return!0;let e=t[0];return t.length<=1?e!=="any":e==="=="?xs(t[1],t[2],"=="):e==="!="?Ki(xs(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?xs(t[1],t[2],e):e==="any"?Ud(t.slice(1)):e==="all"?["all"].concat(t.slice(1).map(po)):e==="none"?["all"].concat(t.slice(1).map(po).map(Ki)):e==="in"?$u(t[1],t.slice(2)):e==="!in"?Ki($u(t[1],t.slice(2))):e==="has"?ju(t[1]):e==="!has"?Ki(ju(t[1])):!0}function xs(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function Ud(t){return["any"].concat(t.map(po))}function $u(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",t,["literal",e.sort(Nd)]]:["filter-in-small",t,["literal",e]]}}function ju(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ki(t){return["!",t]}function Vs(t){let e=typeof t;if(e==="number"||e==="boolean"||e==="string"||t===void 0||t===null)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(let o of t)i+=`${Vs(o)},`;return`${i}]`}let r=Object.keys(t).sort(),n="{";for(let i=0;i<r.length;i++)n+=`${JSON.stringify(r[i])}:${Vs(t[r[i]])},`;return`${n}}`}function $d(t){let e="";for(let r of vh)e+=`/${Vs(t[r])}`;return e}function dc(t,e){let r={};for(let i=0;i<t.length;i++){let o=e&&e[t[i].id]||$d(t[i]);e&&(e[t[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(t[i])}let n=[];for(let i in r)n.push(r[i]);return n}function gc(t){let e=t.key,r=t.value;return r?[new C(e,r,"constants have been deprecated as of v8")]:[]}function le(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Zt(t){if(Array.isArray(t))return t.map(Zt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){let e={};for(let r in t)e[r]=Zt(t[r]);return e}return le(t)}function Re(t){let e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=t.validateSpec,l=[],u=j(r);if(u!=="object")return[new C(e,r,`object expected, ${u} found`)];for(let c in r){let p=c.split(".")[0],f=nn(n,p)||n["*"],y;if(nn(i,p))y=i[p];else if(nn(n,p))y=s;else if(i["*"])y=i["*"];else if(n["*"])y=s;else{l.push(new C(e,r[c],`unknown property "${c}"`));continue}l=l.concat(y({key:(e&&`${e}.`)+c,value:r[c],valueSpec:f,style:o,styleSpec:a,object:r,objectKey:c,validateSpec:s},r))}for(let c in n)i[c]||n[c].required&&n[c].default===void 0&&r[c]===void 0&&l.push(new C(e,r,`missing required property "${c}"`));return l}function qs(t){let e=t.value,r=t.valueSpec,n=t.validateSpec,i=t.style,o=t.styleSpec,a=t.key,s=t.arrayElementValidator||n;if(j(e)!=="array")return[new C(a,e,`array expected, ${j(e)} found`)];if(r.length&&e.length!==r.length)return[new C(a,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new C(a,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let l={type:r.value,values:r.values};o.$version<7&&(l.function=r.function),j(r.value)==="object"&&(l=r.value);let u=[];for(let c=0;c<e.length;c++)u=u.concat(s({array:e,arrayIndex:c,value:e[c],valueSpec:l,validateSpec:t.validateSpec,style:i,styleSpec:o,key:`${a}[${c}]`}));return u}function _o(t){let e=t.key,r=t.value,n=t.valueSpec,i=j(r);return i==="number"&&r!==r&&(i="NaN"),i!=="number"?[new C(e,r,`number expected, ${i} found`)]:"minimum"in n&&r<n.minimum?[new C(e,r,`${r} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&r>n.maximum?[new C(e,r,`${r} is greater than the maximum value ${n.maximum}`)]:[]}function bc(t){let e=t.valueSpec,r=le(t.value.type),n,i={},o,a,s=r!=="categorical"&&t.value.property===void 0,l=!s,u=j(t.value.stops)==="array"&&j(t.value.stops[0])==="array"&&j(t.value.stops[0][0])==="object",c=Re({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:p,default:m}});return r==="identity"&&s&&c.push(new C(t.key,t.value,\'missing required property "property"\')),r!=="identity"&&!t.value.stops&&c.push(new C(t.key,t.value,\'missing required property "stops"\')),r==="exponential"&&t.valueSpec.expression&&!$s(t.valueSpec)&&c.push(new C(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!It(t.valueSpec)?c.push(new C(t.key,t.value,"property functions not supported")):s&&!uc(t.valueSpec)&&c.push(new C(t.key,t.value,"zoom functions not supported"))),(r==="categorical"||u)&&t.value.property===void 0&&c.push(new C(t.key,t.value,\'"property" property is required\')),c;function p(h){if(r==="identity")return[new C(h.key,h.value,\'identity function may not have a "stops" property\')];let g=[],d=h.value;return g=g.concat(qs({key:h.key,value:d,valueSpec:h.valueSpec,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,arrayElementValidator:f})),j(d)==="array"&&d.length===0&&g.push(new C(h.key,d,"array must have at least one stop")),g}function f(h){let g=[],d=h.value,x=h.key;if(j(d)!=="array")return[new C(x,d,`array expected, ${j(d)} found`)];if(d.length!==2)return[new C(x,d,`array length 2 expected, length ${d.length} found`)];if(u){if(j(d[0])!=="object")return[new C(x,d,`object expected, ${j(d[0])} found`)];if(d[0].zoom===void 0)return[new C(x,d,"object stop key must have zoom")];if(d[0].value===void 0)return[new C(x,d,"object stop key must have value")];if(a&&a>le(d[0].zoom))return[new C(x,d[0].zoom,"stop zoom values must appear in ascending order")];le(d[0].zoom)!==a&&(a=le(d[0].zoom),o=void 0,i={}),g=g.concat(Re({key:`${x}[0]`,value:d[0],valueSpec:{zoom:{}},validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{zoom:_o,value:y}}))}else g=g.concat(y({key:`${x}[0]`,value:d[0],validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec},d));return wn(Zt(d[1]))?g.concat([new C(`${x}[1]`,d[1],"expressions are not allowed in function stops.")]):g.concat(h.validateSpec({key:`${x}[1]`,value:d[1],valueSpec:e,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec}))}function y(h,g){let d=j(h.value),x=le(h.value),b=h.value!==null?h.value:g;if(!n)n=d;else if(d!==n)return[new C(h.key,b,`${d} stop domain type must match previous stop domain type ${n}`)];if(d!=="number"&&d!=="string"&&d!=="boolean")return[new C(h.key,b,"stop domain value must be a number, string, or boolean")];if(d!=="number"&&r!=="categorical"){let v=`number expected, ${d} found`;return It(e)&&r===void 0&&(v+=\'\\nIf you intended to use a categorical function, specify `"type": "categorical"`.\'),[new C(h.key,b,v)]}return r==="categorical"&&d==="number"&&(!isFinite(x)||Math.floor(x)!==x)?[new C(h.key,b,`integer expected, found ${x}`)]:r!=="categorical"&&d==="number"&&o!==void 0&&x<o?[new C(h.key,b,"stop domain values must appear in ascending order")]:(o=x,r==="categorical"&&x in i?[new C(h.key,b,"stop domain values must be unique")]:(i[x]=!0,[]))}function m(h){return h.validateSpec({key:h.key,value:h.value,valueSpec:e,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec})}}function Sr(t){let e=(t.expressionContext==="property"?yc:Qt)(Zt(t.value),t.valueSpec);if(e.result==="error")return e.value.map(n=>new C(`${t.key}${n.key}`,t.value,n.message));let r=e.value.expression||e.value._styleExpression.expression;if(t.expressionContext==="property"&&t.propertyKey==="text-font"&&!r.outputDefined())return[new C(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if(t.expressionContext==="property"&&t.propertyType==="layout"&&!gn(r))return[new C(t.key,t.value,\'"feature-state" data expressions are not supported with layout properties.\')];if(t.expressionContext==="filter"&&!gn(r))return[new C(t.key,t.value,\'"feature-state" data expressions are not supported with filters.\')];if(t.expressionContext&&t.expressionContext.indexOf("cluster")===0){if(!So(r,["zoom","feature-state"]))return[new C(t.key,t.value,\'"zoom" and "feature-state" expressions are not supported with cluster properties.\')];if(t.expressionContext==="cluster-initial"&&!Po(r))return[new C(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function jd(t){let e=t.value,r=t.key,n=j(e);return n!=="boolean"?[new C(r,e,`boolean expected, ${n} found`)]:[]}function Rs(t){let e=t.key,r=t.value,n=j(r);return n!=="string"?[new C(e,r,`color expected, ${n} found`)]:H.parse(String(r))?[]:[new C(e,r,`color expected, "${r}" found`)]}function xn(t){let e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?n.values.indexOf(le(r))===-1&&i.push(new C(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(n.values).indexOf(le(r))===-1&&i.push(new C(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Ws(t){return js(Zt(t.value))?Sr(xr({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xc(t)}function xc(t){let e=t.value,r=t.key;if(j(e)!=="array")return[new C(r,e,`array expected, ${j(e)} found`)];let n=t.styleSpec,i,o=[];if(e.length<1)return[new C(r,e,"filter array must have at least 1 element")];switch(o=o.concat(xn({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),le(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&le(e[1])==="$type"&&o.push(new C(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&o.push(new C(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=j(e[1]),i!=="string"&&o.push(new C(`${r}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=j(e[a]),le(e[1])==="$type"?o=o.concat(xn({key:`${r}[${a}]`,value:e[a],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):i!=="string"&&i!=="number"&&i!=="boolean"&&o.push(new C(`${r}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let a=1;a<e.length;a++)o=o.concat(xc({key:`${r}[${a}]`,value:e[a],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=j(e[1]),e.length!==2?o.push(new C(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):i!=="string"&&o.push(new C(`${r}[1]`,e[1],`string expected, ${i} found`));break}return o}function vc(t,e){let r=t.key,n=t.validateSpec,i=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,l=o[`${e}_${t.layerType}`];if(!l)return[];let u=s.match(/^(.*)-transition$/);if(e==="paint"&&u&&l[u[1]]&&l[u[1]].transition)return n({key:r,value:a,valueSpec:o.transition,style:i,styleSpec:o});let c=t.valueSpec||l[s];if(!c)return[new C(r,a,`unknown property "${s}"`)];let p;if(j(a)==="string"&&It(c)&&!c.tokens&&(p=/^{([^}]+)}$/.exec(a)))return[new C(r,a,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \\`{ "type": "identity", "property": ${JSON.stringify(p[1])} }\\`.`)];let f=[];return t.layerType==="symbol"&&(s==="text-field"&&i&&!i.glyphs&&f.push(new C(r,a,\'use of "text-field" requires a style "glyphs" property\')),s==="text-font"&&wo(Zt(a))&&le(a.type)==="identity"&&f.push(new C(r,a,\'"text-font" does not support identity functions\'))),f.concat(n({key:t.key,value:a,valueSpec:c,style:i,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:s}))}function Pc(t){return vc(t,"paint")}function Sc(t){return vc(t,"layout")}function wc(t){let e=[],r=t.value,n=t.key,i=t.style,o=t.styleSpec;if(j(r)!=="object")return[new C(n,r,`object expected, ${j(r)} found`)];!r.type&&!r.ref&&e.push(new C(n,r,\'either "type" or "ref" is required\'));let a=le(r.type),s=le(r.ref);if(r.id){let l=le(r.id);for(let u=0;u<t.arrayIndex;u++){let c=i.layers[u];le(c.id)===l&&e.push(new C(n,r.id,`duplicate layer id "${r.id}", previously used at line ${c.id.__line__}`))}}if("ref"in r){["type","source","source-layer","filter","layout"].forEach(u=>{u in r&&e.push(new C(n,r[u],`"${u}" is prohibited for ref layers`))});let l;i.layers.forEach(u=>{le(u.id)===s&&(l=u)}),l?l.ref?e.push(new C(n,r.ref,"ref cannot reference another ref layer")):a=le(l.type):e.push(new C(n,r.ref,`ref layer "${s}" not found`))}else if(a!=="background")if(!r.source)e.push(new C(n,r,\'missing required property "source"\'));else{let l=i.sources&&i.sources[r.source],u=l&&le(l.type);l?u==="vector"&&a==="raster"?e.push(new C(n,r.source,`layer "${r.id}" requires a raster source`)):u!=="raster-dem"&&a==="hillshade"?e.push(new C(n,r.source,`layer "${r.id}" requires a raster-dem source`)):u!=="raster-dem"&&a==="color-relief"?e.push(new C(n,r.source,`layer "${r.id}" requires a raster-dem source`)):u==="raster"&&a!=="raster"?e.push(new C(n,r.source,`layer "${r.id}" requires a vector source`)):u==="vector"&&!r["source-layer"]?e.push(new C(n,r,`layer "${r.id}" must specify a "source-layer"`)):u==="raster-dem"&&a!=="hillshade"&&a!=="color-relief"?e.push(new C(n,r.source,"raster-dem source can only be used with layer type \'hillshade\' or \'color-relief\'.")):a==="line"&&r.paint&&r.paint["line-gradient"]&&(u!=="geojson"||!l.lineMetrics)&&e.push(new C(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \\`lineMetrics\\` enabled.`)):e.push(new C(n,r.source,`source "${r.source}" not found`))}return e=e.concat(Re({key:n,value:r,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*"(){return[]},type(){return t.validateSpec({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:r,objectKey:"type"})},filter:Ws,layout(l){return Re({layer:r,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return Sc(xr({layerType:a},u))}}})},paint(l){return Re({layer:r,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*"(u){return Pc(xr({layerType:a},u))}}})}}})),e}function Jt(t){let e=t.value,r=t.key,n=j(e);return n!=="string"?[new C(r,e,`string expected, ${n} found`)]:[]}function qd(t){var e;let r=(e=t.sourceName)!==null&&e!==void 0?e:"",n=t.value,i=t.styleSpec,o=i.source_raster_dem,a=t.style,s=[],l=j(n);if(n===void 0)return s;if(l!=="object")return s.push(new C("source_raster_dem",n,`object expected, ${l} found`)),s;let c=le(n.encoding)==="custom",p=["redFactor","greenFactor","blueFactor","baseShift"],f=t.value.encoding?`"${t.value.encoding}"`:"Default";for(let y in n)!c&&p.includes(y)?s.push(new C(y,n[y],`In "${r}": "${y}" is only valid when "encoding" is set to "custom". ${f} encoding found`)):o[y]?s=s.concat(t.validateSpec({key:y,value:n[y],valueSpec:o[y],validateSpec:t.validateSpec,style:a,styleSpec:i})):s.push(new C(y,n[y],`unknown property "${y}"`));return s}var qu={promoteId:Wd};function Ac(t){let e=t.value,r=t.key,n=t.styleSpec,i=t.style,o=t.validateSpec;if(!e.type)return[new C(r,e,\'"type" is required\')];let a=le(e.type),s;switch(a){case"vector":case"raster":return s=Re({key:r,value:e,valueSpec:n[`source_${a.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:qu,validateSpec:o}),s;case"raster-dem":return s=qd({sourceName:r,value:e,style:t.style,styleSpec:n,validateSpec:o}),s;case"geojson":if(s=Re({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,validateSpec:o,objectElementValidators:qu}),e.cluster)for(let l in e.clusterProperties){let[u,c]=e.clusterProperties[l],p=typeof u=="string"?[u,["accumulated"],["get",l]]:u;s.push(...Sr({key:`${r}.${l}.map`,value:c,expressionContext:"cluster-map"})),s.push(...Sr({key:`${r}.${l}.reduce`,value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return Re({key:r,value:e,valueSpec:n.source_video,style:i,validateSpec:o,styleSpec:n});case"image":return Re({key:r,value:e,valueSpec:n.source_image,style:i,validateSpec:o,styleSpec:n});case"canvas":return[new C(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xn({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Wd({key:t,value:e}){if(j(e)==="string")return Jt({key:t,value:e});{let r=[];for(let n in e)r.push(...Jt({key:`${t}.${n}`,value:e[n]}));return r}}function _c(t){let e=t.value,r=t.styleSpec,n=r.light,i=t.style,o=[],a=j(e);if(e===void 0)return o;if(a!=="object")return o=o.concat([new C("light",e,`object expected, ${a} found`)]),o;for(let s in e){let l=s.match(/^(.*)-transition$/);l&&n[l[1]]&&n[l[1]].transition?o=o.concat(t.validateSpec({key:s,value:e[s],valueSpec:r.transition,validateSpec:t.validateSpec,style:i,styleSpec:r})):n[s]?o=o.concat(t.validateSpec({key:s,value:e[s],valueSpec:n[s],validateSpec:t.validateSpec,style:i,styleSpec:r})):o=o.concat([new C(s,e[s],`unknown property "${s}"`)])}return o}function Ic(t){let e=t.value,r=t.styleSpec,n=r.sky,i=t.style,o=j(e);if(e===void 0)return[];if(o!=="object")return[new C("sky",e,`object expected, ${o} found`)];let a=[];for(let s in e)n[s]?a=a.concat(t.validateSpec({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a=a.concat([new C(s,e[s],`unknown property "${s}"`)]);return a}function Tc(t){let e=t.value,r=t.styleSpec,n=r.terrain,i=t.style,o=[],a=j(e);if(e===void 0)return o;if(a!=="object")return o=o.concat([new C("terrain",e,`object expected, ${a} found`)]),o;for(let s in e)n[s]?o=o.concat(t.validateSpec({key:s,value:e[s],valueSpec:n[s],validateSpec:t.validateSpec,style:i,styleSpec:r})):o=o.concat([new C(s,e[s],`unknown property "${s}"`)]);return o}function Xd(t){return Jt(t).length===0?[]:Sr(t)}function Hd(t){return Jt(t).length===0?[]:Sr(t)}function Zd(t){let e=t.key,r=t.value;if(j(r)==="array"){if(r.length<1||r.length>4)return[new C(e,r,`padding requires 1 to 4 values; ${r.length} values found`)];let i={type:"number"},o=[];for(let a=0;a<r.length;a++)o=o.concat(t.validateSpec({key:`${e}[${a}]`,value:r[a],validateSpec:t.validateSpec,valueSpec:i}));return o}else return _o({key:e,value:r,valueSpec:{}})}function Jd(t){let e=t.key,r=t.value;if(j(r)==="array"){let i={type:"number"};if(r.length<1)return[new C(e,r,"array length at least 1 expected, length 0 found")];let o=[];for(let a=0;a<r.length;a++)o=o.concat(t.validateSpec({key:`${e}[${a}]`,value:r[a],validateSpec:t.validateSpec,valueSpec:i}));return o}else return _o({key:e,value:r,valueSpec:{}})}function Yd(t){let e=t.key,r=t.value;if(j(r)==="array"){if(r.length<1)return[new C(e,r,"array length at least 1 expected, length 0 found")];let i=[];for(let o=0;o<r.length;o++)i=i.concat(Rs({key:`${e}[${o}]`,value:r[o]}));return i}else return Rs({key:e,value:r})}function Kd(t){let e=t.key,r=t.value,n=j(r),i=t.styleSpec;if(n!=="array"||r.length<1||r.length%2!==0)return[new C(e,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<r.length;a+=2)o=o.concat(xn({key:`${e}[${a}]`,value:r[a],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(qs({key:`${e}[${a+1}]`,value:r[a+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:i}));return o}function Cc(t){let e=[],r=t.value,n=t.key;if(Array.isArray(r)){let i=[],o=[];for(let a in r){r[a].id&&i.includes(r[a].id)&&e.push(new C(n,r,`all the sprites\' ids must be unique, but ${r[a].id} is duplicated`)),i.push(r[a].id),r[a].url&&o.includes(r[a].url)&&e.push(new C(n,r,`all the sprites\' URLs must be unique, but ${r[a].url} is duplicated`)),o.push(r[a].url);let s={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Re({key:`${n}[${a}]`,value:r[a],valueSpec:s,validateSpec:t.validateSpec}))}return e}else return Jt({key:n,value:r})}function Qd(t){let e=t.value,r=t.styleSpec,n=r.projection,i=t.style,o=j(e);if(e===void 0)return[];if(o!=="object")return[new C("projection",e,`object expected, ${o} found`)];let a=[];for(let s in e)n[s]?a=a.concat(t.validateSpec({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r})):a=a.concat([new C(s,e[s],`unknown property "${s}"`)]);return a}function eg(t){let e=t.key,r=t.value;r=r instanceof String?r.valueOf():r;let n=j(r);return n==="array"&&!rg(r)&&!tg(r)?[new C(e,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]:["array","string"].includes(n)?[]:[new C(e,r,`projection expected, invalid type "${n}" found`)]}function tg(t){return!!["interpolate","step","literal"].includes(t[0])}function rg(t){return Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"}function ng(t){return!!t&&t.constructor===Object}function kc(t){return ng(t.value)?[]:[new C(t.key,t.value,`object expected, ${j(t.value)} found`)]}var Wu={"*"(){return[]},array:qs,boolean:jd,number:_o,color:Rs,constants:gc,enum:xn,filter:Ws,function:bc,layer:wc,object:Re,source:Ac,light:_c,sky:Ic,terrain:Tc,projection:Qd,projectionDefinition:eg,string:Jt,formatted:Xd,resolvedImage:Hd,padding:Zd,numberArray:Jd,colorArray:Yd,variableAnchorOffsetCollection:Kd,sprite:Cc,state:kc};function fo(t){let e=t.value,r=t.valueSpec,n=t.styleSpec;return t.validateSpec=fo,r.expression&&wo(le(e))?bc(t):r.expression&&wn(Zt(e))?Sr(t):r.type&&Wu[r.type]?Wu[r.type](t):Re(xr({},t,{valueSpec:r.type?n[r.type]:r}))}function Fc(t){let e=t.value,r=t.key,n=Jt(t);return n.length||(e.indexOf("{fontstack}")===-1&&n.push(new C(r,e,\'"glyphs" url must include a "{fontstack}" token\')),e.indexOf("{range}")===-1&&n.push(new C(r,e,\'"glyphs" url must include a "{range}" token\'))),n}function Me(t,e=P){let r=[];return r=r.concat(fo({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:fo,objectElementValidators:{glyphs:Fc,"*"(){return[]}}})),t.constants&&(r=r.concat(gc({key:"constants",value:t.constants}))),Ec(r)}Me.source=qe(je(Ac));Me.sprite=qe(je(Cc));Me.glyphs=qe(je(Fc));Me.light=qe(je(_c));Me.sky=qe(je(Ic));Me.terrain=qe(je(Tc));Me.state=qe(je(kc));Me.layer=qe(je(wc));Me.filter=qe(je(Ws));Me.paintProperty=qe(je(Pc));Me.layoutProperty=qe(je(Sc));function je(t){return function(e){return t({...e,validateSpec:fo})}}function Ec(t){return[].concat(t).sort((e,r)=>e.line-r.line)}function qe(t){return function(...e){return Ec(t.apply(this,e))}}var Mc="AbortError";function Lc(t){return t.message===Mc}function Xs(){return new Error(Mc)}var Io={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Dc(t){return Io.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]}function Bc(t,e){Io.REGISTERED_PROTOCOLS[t]=e}function Vc(t){delete Io.REGISTERED_PROTOCOLS[t]}var Rc="global-dispatcher",er=class extends Error{constructor(e,r,n,i){super(`AJAXError: ${r} (${e}): ${n}`),this.status=e,this.statusText=r,this.url=n,this.body=i}},Oc=()=>at(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ig=t=>/^file:/.test(t)||/^file:/.test(Oc())&&!/^\\w+:/.test(t);async function og(t,e){let r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:Oc(),signal:e.signal});t.type==="json"&&!r.headers.has("Accept")&&r.headers.set("Accept","application/json");let n;try{n=await fetch(r)}catch(a){throw new er(0,a.message,t.url,new Blob)}if(!n.ok){let a=await n.blob();throw new er(n.status,n.statusText,t.url,a)}let i;t.type==="arrayBuffer"||t.type==="image"?i=n.arrayBuffer():t.type==="json"?i=n.json():i=n.text();let o=await i;if(e.signal.aborted)throw Xs();return{data:o,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}function ag(t,e){return new Promise((r,n)=>{let i=new XMLHttpRequest;i.open(t.method||"GET",t.url,!0),(t.type==="arrayBuffer"||t.type==="image")&&(i.responseType="arraybuffer");for(let o in t.headers)i.setRequestHeader(o,t.headers[o]);t.type==="json"&&(i.responseType="text",t.headers?.Accept||i.setRequestHeader("Accept","application/json")),i.withCredentials=t.credentials==="include",i.onerror=()=>{n(new Error(i.statusText))},i.onload=()=>{if(!e.signal.aborted)if((i.status>=200&&i.status<300||i.status===0)&&i.response!==null){let o=i.response;if(t.type==="json")try{o=JSON.parse(i.response)}catch(a){n(a);return}r({data:o,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")})}else{let o=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});n(new er(i.status,i.statusText,t.url,o))}},e.signal.addEventListener("abort",()=>{i.abort(),n(Xs())}),i.send(t.body)})}var Gc=function(t,e){if(/:\\/\\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){let r=Dc(t.url);if(r)return r(t,e);if(at(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,targetMapId:Rc},e)}if(!ig(t.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return og(t,e);if(at(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,mustQueue:!0,targetMapId:Rc},e)}return ag(t,e)},Nc=(t,e)=>Gc(de(t,{type:"json"}),e),Uc=(t,e)=>Gc(de(t,{type:"arrayBuffer"}),e);var ut={};function I(t,e,r={}){if(ut[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ut[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}I("Object",Object);I("Set",Set);I("TransferableGridIndex",$t);I("Color",H);I("Error",Error);I("AJAXError",er);I("ResolvedImage",Se);I("StylePropertyFunction",bn);I("StyleExpression",Ht,{omit:["_evaluator"]});I("ZoomDependentExpression",Tt);I("ZoomConstantExpression",Je);I("CompoundExpression",Ze,{omit:["_evaluate"]});for(let t in Kt)Kt[t]._classRegistryKey||I(`Expression_${t}`,Kt[t]);function $c(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}function Hs(t){let e=t.constructor;return t.$name||e._classRegistryKey}function sg(t){if(t===null||typeof t!="object")return!1;let e=Hs(t);return!!(e&&e!=="Object")}function jc(t){return!sg(t)&&(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error||$c(t)||vt(t)||ArrayBuffer.isView(t)||t instanceof ImageData)}function Tr(t,e){if(jc(t)){if(($c(t)||vt(t))&&e&&e.push(t),ArrayBuffer.isView(t)){let o=t;e&&e.push(o.buffer)}return t instanceof ImageData&&e&&e.push(t.data.buffer),t}if(Array.isArray(t)){let o=[];for(let a of t)o.push(Tr(a,e));return o}if(typeof t!="object")throw new Error(`can\'t serialize object of type ${typeof t}`);let r=Hs(t);if(!r)throw new Error(`can\'t serialize object of unregistered class ${t.constructor.name}`);if(!ut[r])throw new Error(`${r} is not registered.`);let{klass:n}=ut[r],i=n.serialize?n.serialize(t,e):{};if(n.serialize){if(e&&i===e[e.length-1])throw new Error("statically serialized object won\'t survive transfer of $name property")}else{for(let o in t){if(!t.hasOwnProperty(o)||ut[r].omit.indexOf(o)>=0)continue;let a=t[o];i[o]=ut[r].shallow.indexOf(o)>=0?a:Tr(a,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(i.$name=r),i}function Cr(t){if(jc(t))return t;if(Array.isArray(t))return t.map(Cr);if(typeof t!="object")throw new Error(`can\'t deserialize object of type ${typeof t}`);let e=Hs(t)||"Object";if(!ut[e])throw new Error(`can\'t deserialize unregistered class ${e}`);let{klass:r}=ut[e];if(!r)throw new Error(`can\'t deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);let n=Object.create(r.prototype);for(let i of Object.keys(t)){if(i==="$name")continue;let o=t[i];n[i]=ut[e].shallow.indexOf(i)>=0?o:Cr(o)}return n}var To=class{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}};var lg={once:!0},Co=class{constructor(e,r){this.target=e,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new To(()=>this.process()),this.subscription=us(this.target,"message",n=>this.receive(n),!1),this.globalScope=at(self)?e:window}registerMessageHandler(e,r){this.messageHandlers[e]=r}sendAsync(e,r){return new Promise((n,i)=>{let o=Math.round(Math.random()*1e18).toString(36).substring(0,10),a=r?us(r.signal,"abort",()=>{a?.unsubscribe(),delete this.resolveRejects[o];let u={id:o,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(u)},lg):null;this.resolveRejects[o]={resolve:u=>{a?.unsubscribe(),n(u)},reject:u=>{a?.unsubscribe(),i(u)}};let s=[],l={...e,id:o,sourceMapId:this.mapId,origin:location.origin,data:Tr(e.data,s)};this.target.postMessage(l,{transfer:s})})}receive(e){let r=e.data,n=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin)&&!(r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[n];let i=this.abortControllers[n];delete this.abortControllers[n],i&&i.abort();return}if(at(self)||r.mustQueue){this.tasks[n]=r,this.taskQueue.push(n),this.invoker.trigger();return}this.processTask(n,r)}}process(){if(this.taskQueue.length===0)return;let e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(e,r)}async processTask(e,r){if(r.type==="<response>"){let o=this.resolveRejects[e];if(delete this.resolveRejects[e],!o)return;r.error?o.reject(Cr(r.error)):o.resolve(Cr(r.data));return}if(!this.messageHandlers[r.type]){this.completeTask(e,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));return}let n=Cr(r.data),i=new AbortController;this.abortControllers[e]=i;try{let o=await this.messageHandlers[r.type](r.sourceMapId,n,i);this.completeTask(e,null,o)}catch(o){this.completeTask(e,o)}}completeTask(e,r,n){let i=[];delete this.abortControllers[e];let o={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Tr(r):null,data:Tr(n,i)};this.target.postMessage(o,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}};function qc(t,e,r){r[t]&&r[t].indexOf(e)!==-1||(r[t]=r[t]||[],r[t].push(e))}function Zs(t,e,r){if(r&&r[t]){let n=r[t].indexOf(e);n!==-1&&r[t].splice(n,1)}}var ko=class{constructor(e,r={}){de(this,r),this.type=e}},An=class extends ko{constructor(e,r={}){super("error",de({error:e},r))}},Fo=class{on(e,r){return this._listeners=this._listeners||{},qc(e,r,this._listeners),{unsubscribe:()=>{this.off(e,r)}}}off(e,r){return Zs(e,r,this._listeners),Zs(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},qc(e,r,this._oneTimeListeners),this):new Promise(n=>this.once(e,n))}fire(e,r){typeof e=="string"&&(e=new ko(e,r||{}));let n=e.type;if(this.listens(n)){e.target=this;let i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(let s of i)s.call(this,e);let o=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(let s of o)Zs(n,s,this._oneTimeListeners),s.call(this,e);let a=this._eventedParent;a&&(de(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),a.fire(e))}else e instanceof An&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}};var ct=Me,K0=ct.source,Q0=ct.light,ev=ct.sky,tv=ct.terrain,rv=ct.filter,Wc=ct.paintProperty,Xc=ct.layoutProperty;function Hc(t,e){let r=!1;if(e&&e.length)for(let n of e)t.fire(new An(new Error(n.message))),r=!0;return r}var _n=class{constructor(){this.first=!0}update(e,r){let n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=r),e!==this.lastZoom?(this.lastZoom=e,this.lastFloorZoom=n,!0):!1)}};var q={"Latin-1 Supplement":t=>t>=128&&t<=255,"Hangul Jamo":t=>t>=4352&&t<=4607,Khmer:t=>t>=6016&&t<=6143,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Kanbun:t=>t>=12688&&t<=12703,"CJK Strokes":t=>t>=12736&&t<=12783,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Hangul Syllables":t=>t>=44032&&t<=55215,"Private Use Area":t=>t>=57344&&t<=63743,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function In(t){for(let e of t)if(Eo(e.charCodeAt(0)))return!0;return!1}function Zc(t){for(let e of t)if(!pg(e.charCodeAt(0)))return!1;return!0}function Js(t){let e=t.map(r=>{try{return new RegExp(`\\\\p{sc=${r}}`,"u").source}catch{return null}}).filter(r=>r);return new RegExp(e.join("|"),"u")}var ug=["Arab","Dupl","Mong","Ougr","Syrc"],cg=Js(ug);function pg(t){return!cg.test(String.fromCodePoint(t))}var fg=["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"],Jc=Js(fg);function Yc(t){return t<11904?!1:q["CJK Compatibility Forms"](t)||q["CJK Compatibility"](t)||q["CJK Strokes"](t)||q["CJK Symbols and Punctuation"](t)||q["Enclosed CJK Letters and Months"](t)||q["Halfwidth and Fullwidth Forms"](t)||q["Ideographic Description Characters"](t)||q["Vertical Forms"](t)?!0:Jc.test(String.fromCodePoint(t))}function Eo(t){return t===746||t===747?!0:t<4352?!1:!!(q["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||q["CJK Compatibility"](t)||q["CJK Strokes"](t)||q["CJK Symbols and Punctuation"](t)&&!(t>=12296&&t<=12305)&&!(t>=12308&&t<=12319)&&t!==12336||q["Enclosed CJK Letters and Months"](t)||q["Ideographic Description Characters"](t)||q.Kanbun(t)||q.Katakana(t)&&t!==12540||q["Halfwidth and Fullwidth Forms"](t)&&t!==65288&&t!==65289&&t!==65293&&!(t>=65306&&t<=65310)&&t!==65339&&t!==65341&&t!==65343&&!(t>=65371&&t<=65503)&&t!==65507&&!(t>=65512&&t<=65519)||q["Small Form Variants"](t)&&!(t>=65112&&t<=65118)&&!(t>=65123&&t<=65126)||q["Vertical Forms"](t)||q["Yijing Hexagram Symbols"](t)||/\\p{sc=Cans}/u.test(String.fromCodePoint(t))||/\\p{sc=Hang}/u.test(String.fromCodePoint(t))||Jc.test(String.fromCodePoint(t)))}function yg(t){return!!(q["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||q["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||q["Letterlike Symbols"](t)||q["Number Forms"](t)||q["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||q["Control Pictures"](t)&&t!==9251||q["Optical Character Recognition"](t)||q["Enclosed Alphanumerics"](t)||q["Geometric Shapes"](t)||q["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||q["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||q["CJK Symbols and Punctuation"](t)||q.Katakana(t)||q["Private Use Area"](t)||q["CJK Compatibility Forms"](t)||q["Small Form Variants"](t)||q["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}function Ys(t){return!(Eo(t)||yg(t))}function Kc(t){return/\\p{sc=Arab}/u.test(String.fromCodePoint(t))}var mg=["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"],hg=Js(mg);function Qc(t){return hg.test(String.fromCodePoint(t))}function dg(t,e){return!(!e&&Qc(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||q.Khmer(t))}function ep(t){for(let e of t)if(Qc(e.charCodeAt(0)))return!0;return!1}function tp(t,e){for(let r of t)if(!dg(r.charCodeAt(0),e))return!1;return!0}var Ks=class{constructor(){this.TIMEOUT=5e3;this.applyArabicShaping=null;this.processBidirectionalText=null;this.processStyledBidirectionalText=null;this.pluginStatus="unavailable";this.pluginURL=null;this.loadScriptResolve=()=>{}}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){if(we.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}async syncState(e,r){if(this.isParsed())return this.getState();if(e.pluginStatus!=="loading")return this.setState(e),e;let n=e.pluginURL,i=new Promise(s=>{this.loadScriptResolve=s});r(n);let o=new Promise(s=>setTimeout(()=>s(),this.TIMEOUT));if(await Promise.race([i,o]),this.isParsed()){let s={pluginStatus:"loaded",pluginURL:n};return this.setState(s),s}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)}},we=new Ks;var W=class{constructor(e,r){this.zoom=e,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new _n,this.transition=r.transition||{},this.globalState=r.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _n,this.transition={},this.globalState={})}isSupportedScript(e){return tp(e,we.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let e=this.zoom,r=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*r}}};var kr=class{constructor(e,r){this.property=e,this.value=r,this.expression=mc(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,r,n){return this.property.possiblyEvaluate(this,e,r,n)}},Tn=class{constructor(e){this.property=e,this.value=new kr(e,void 0)}transitioned(e,r){return new Lo(this.property,this.value,r,de({},e.transition,this.transition),e.now)}untransitioned(){return new Lo(this.property,this.value,null,{},0)}},Mo=class{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return nt(this._values[e].value.value)}setValue(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Tn(this._values[e].property)),this._values[e].value=new kr(this._values[e].property,r===null?void 0:nt(r))}getTransition(e){return nt(this._values[e].transition)}setTransition(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Tn(this._values[e].property)),this._values[e].transition=nt(r)||void 0}serialize(){let e={};for(let r of Object.keys(this._values)){let n=this.getValue(r);n!==void 0&&(e[r]=n);let i=this.getTransition(r);i!==void 0&&(e[`${r}-transition`]=i)}return e}transitioned(e,r){let n=new Do(this._properties);for(let i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,r._values[i]);return n}untransitioned(){let e=new Do(this._properties);for(let r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}},Lo=class{constructor(e,r,n,i,o){this.property=e,this.value=r,this.begin=o+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,r,n){let i=e.now||0,o=this.value.possiblyEvaluate(e,r,n),a=this.prior;if(a){if(i>this.end)return this.prior=null,o;if(this.value.isDataDriven())return this.prior=null,o;if(i<this.begin)return a.possiblyEvaluate(e,r,n);{let s=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,r,n),o,Su(s))}}else return o}},Do=class{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,n){let i=new kt(this._properties);for(let o of Object.keys(this._values))i._values[o]=this._values[o].possiblyEvaluate(e,r,n);return i}hasTransition(){for(let e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}},Bo=class{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return this._values[e].value!==void 0}getValue(e){return nt(this._values[e].value)}setValue(e,r){this._values[e]=new kr(this._values[e].property,r===null?void 0:nt(r))}serialize(){let e={};for(let r of Object.keys(this._values)){let n=this.getValue(r);n!==void 0&&(e[r]=n)}return e}possiblyEvaluate(e,r,n){let i=new kt(this._properties);for(let o of Object.keys(this._values))i._values[o]=this._values[o].possiblyEvaluate(e,r,n);return i}},ge=class{constructor(e,r,n){this.property=e,this.value=r,this.parameters=n}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,n,i){return this.property.evaluate(this.value,this.parameters,e,r,n,i)}},kt=class{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}},F=class{constructor(e){this.specification=e}possiblyEvaluate(e,r){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(r)}interpolate(e,r,n){let i=this.specification.type,o=lt[i];return o?o(e,r,n):e}},L=class{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,n,i){return e.expression.kind==="constant"||e.expression.kind==="camera"?new ge(this,{kind:"constant",value:e.expression.evaluate(r,null,{},n,i)},r):new ge(this,e.expression,r)}interpolate(e,r,n){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new ge(this,{kind:"constant",value:void 0},e.parameters);let i=this.specification.type,o=lt[i];if(o){let a=o(e.value.value,r.value.value,n);return new ge(this,{kind:"constant",value:a},e.parameters)}else return e}evaluate(e,r,n,i,o,a){return e.kind==="constant"?e.value:e.evaluate(r,n,i,o,a)}},pt=class extends L{possiblyEvaluate(e,r,n,i){if(e.value===void 0)return new ge(this,{kind:"constant",value:void 0},r);if(e.expression.kind==="constant"){let o=e.expression.evaluate(r,null,{},n,i),s=e.property.specification.type==="resolvedImage"&&typeof o!="string"?o.name:o,l=this._calculate(s,s,s,r);return new ge(this,{kind:"constant",value:l},r)}else if(e.expression.kind==="camera"){let o=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new ge(this,{kind:"constant",value:o},r)}else return new ge(this,e.expression,r)}evaluate(e,r,n,i,o,a){if(e.kind==="source"){let s=e.evaluate(r,n,i,o,a);return this._calculate(s,s,s,r)}else return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},n,i),e.evaluate({zoom:Math.floor(r.zoom)},n,i),e.evaluate({zoom:Math.floor(r.zoom)+1},n,i),r):e.value}_calculate(e,r,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:n,to:r}}interpolate(e){return e}},tr=class{constructor(e){this.specification=e}possiblyEvaluate(e,r,n,i){if(e.value!==void 0)if(e.expression.kind==="constant"){let o=e.expression.evaluate(r,null,{},n,i);return this._calculate(o,o,o,r)}else return this._calculate(e.expression.evaluate(new W(Math.floor(r.zoom-1),r)),e.expression.evaluate(new W(Math.floor(r.zoom),r)),e.expression.evaluate(new W(Math.floor(r.zoom+1),r)),r)}_calculate(e,r,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:n,to:r}}interpolate(e){return e}},ft=class{constructor(e){this.specification=e}possiblyEvaluate(e,r,n,i){return!!e.expression.evaluate(r,null,{},n,i)}interpolate(){return!1}},ee=class{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let r in e){let n=e[r];n.specification.overridable&&this.overridableProperties.push(r);let i=this.defaultPropertyValues[r]=new kr(n,void 0),o=this.defaultTransitionablePropertyValues[r]=new Tn(n);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=i.possiblyEvaluate({})}}};I("DataDrivenProperty",L);I("DataConstantProperty",F);I("CrossFadedDataDrivenProperty",pt);I("CrossFadedProperty",tr);I("ColorRampProperty",ft);var Vo="-transition",oe=class extends Fo{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},e.type!=="custom"&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Ct(e.filter)),r.layout&&(this._unevaluatedLayout=new Bo(r.layout)),r.paint)){this._transitionablePaint=new Mo(r.paint);for(let n in e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(let n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new kt(r.paint)}}setFilter(e){this.filter=e,this._featureFilter=Ct(e)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){let e=new Set;if(this._unevaluatedLayout)for(let r in this._unevaluatedLayout._values){let n=this._unevaluatedLayout._values[r];for(let i of n.getGlobalStateRefs())e.add(i)}for(let r of this._featureFilter.getGlobalStateRefs())e.add(r);return e}setLayoutProperty(e,r,n={}){if(r!=null){let i=`layers.${this.id}.layout.${e}`;if(this._validate(Xc,i,e,r,n))return}if(e==="visibility"){this.visibility=r;return}this._unevaluatedLayout.setValue(e,r)}getPaintProperty(e){return e.endsWith(Vo)?this._transitionablePaint.getTransition(e.slice(0,-Vo.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,n={}){if(r!=null){let i=`layers.${this.id}.paint.${e}`;if(this._validate(Wc,i,e,r,n))return!1}if(e.endsWith(Vo))return this._transitionablePaint.setTransition(e.slice(0,-Vo.length),r||void 0),!1;{let i=this._transitionablePaint._values[e],o=i.property.specification["property-type"]==="cross-faded-data-driven",a=i.value.isDataDriven(),s=i.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);let l=this._transitionablePaint._values[e].value;return l.isDataDriven()||a||o||this._handleOverridablePaintPropertyUpdate(e,s,l)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,r,n){return!1}isHidden(e){return this.minzoom&&e<this.minzoom||this.maxzoom&&e>=this.maxzoom?!0:this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){let e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),_u(e,(r,n)=>r!==void 0&&!(n==="layout"&&!Object.keys(r).length)&&!(n==="paint"&&!Object.keys(r).length))}_validate(e,r,n,i,o={}){return o&&o.validate===!1?!1:Hc(this,e.call(ct,{key:r,layerType:this.type,objectKey:n,value:i,styleSpec:P,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let e in this.paint._values){let r=this.paint.get(e);if(!(!(r instanceof ge)||!It(r.property.specification))&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}};var gg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ft=class{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}},bg=128,xg=5,te=class{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){let r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(this.capacity*xg),bg),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}};function Q(t,e=1){let r=0,n=0,i=t.map(a=>{let s=vg(a.type),l=r=rp(r,Math.max(e,s)),u=a.components||1;return n=Math.max(n,s),r+=s*u,{name:a.name,type:a.type,components:u,offset:l}}),o=rp(r,Math.max(n,e));return{members:i,size:o,alignment:e}}function vg(t){return gg[t].BYTES_PER_ELEMENT}function rp(t,e){return Math.ceil(t/e)*e}var np=Y(ye(),1),rr=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){let i=e*2;return this.int16[i+0]=r,this.int16[i+1]=n,e}};rr.prototype.bytesPerElement=4;I("StructArrayLayout2i4",rr);var Cn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,e,r,n)}emplace(e,r,n,i){let o=e*3;return this.int16[o+0]=r,this.int16[o+1]=n,this.int16[o+2]=i,e}};Cn.prototype.bytesPerElement=6;I("StructArrayLayout3i6",Cn);var Ro=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,e,r,n,i)}emplace(e,r,n,i,o){let a=e*4;return this.int16[a+0]=r,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=o,e}};Ro.prototype.bytesPerElement=8;I("StructArrayLayout4i8",Ro);var kn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,r,n,i,o,a)}emplace(e,r,n,i,o,a,s){let l=e*6;return this.int16[l+0]=r,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=o,this.int16[l+4]=a,this.int16[l+5]=s,e}};kn.prototype.bytesPerElement=12;I("StructArrayLayout2i4i12",kn);var Fn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,r,n,i,o,a)}emplace(e,r,n,i,o,a,s){let l=e*4,u=e*8;return this.int16[l+0]=r,this.int16[l+1]=n,this.uint8[u+4]=i,this.uint8[u+5]=o,this.uint8[u+6]=a,this.uint8[u+7]=s,e}};Fn.prototype.bytesPerElement=8;I("StructArrayLayout2i4ub8",Fn);var Et=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){let i=e*2;return this.float32[i+0]=r,this.float32[i+1]=n,e}};Et.prototype.bytesPerElement=8;I("StructArrayLayout2f8",Et);var En=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a,s,l,u,c){let p=this.length;return this.resize(p+1),this.emplace(p,e,r,n,i,o,a,s,l,u,c)}emplace(e,r,n,i,o,a,s,l,u,c,p){let f=e*10;return this.uint16[f+0]=r,this.uint16[f+1]=n,this.uint16[f+2]=i,this.uint16[f+3]=o,this.uint16[f+4]=a,this.uint16[f+5]=s,this.uint16[f+6]=l,this.uint16[f+7]=u,this.uint16[f+8]=c,this.uint16[f+9]=p,e}};En.prototype.bytesPerElement=20;I("StructArrayLayout10ui20",En);var Mn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a,s,l,u,c,p,f){let y=this.length;return this.resize(y+1),this.emplace(y,e,r,n,i,o,a,s,l,u,c,p,f)}emplace(e,r,n,i,o,a,s,l,u,c,p,f,y){let m=e*12;return this.int16[m+0]=r,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=o,this.uint16[m+4]=a,this.uint16[m+5]=s,this.uint16[m+6]=l,this.uint16[m+7]=u,this.int16[m+8]=c,this.int16[m+9]=p,this.int16[m+10]=f,this.int16[m+11]=y,e}};Mn.prototype.bytesPerElement=24;I("StructArrayLayout4i4ui4i24",Mn);var Ln=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,e,r,n)}emplace(e,r,n,i){let o=e*3;return this.float32[o+0]=r,this.float32[o+1]=n,this.float32[o+2]=i,e}};Ln.prototype.bytesPerElement=12;I("StructArrayLayout3f12",Ln);var Dn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){let r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){let n=e*1;return this.uint32[n+0]=r,e}};Dn.prototype.bytesPerElement=4;I("StructArrayLayout1ul4",Dn);var Bn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a,s,l,u){let c=this.length;return this.resize(c+1),this.emplace(c,e,r,n,i,o,a,s,l,u)}emplace(e,r,n,i,o,a,s,l,u,c){let p=e*10,f=e*5;return this.int16[p+0]=r,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=o,this.int16[p+4]=a,this.int16[p+5]=s,this.uint32[f+3]=l,this.uint16[p+8]=u,this.uint16[p+9]=c,e}};Bn.prototype.bytesPerElement=20;I("StructArrayLayout6i1ul2ui20",Bn);var Vn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,r,n,i,o,a)}emplace(e,r,n,i,o,a,s){let l=e*6;return this.int16[l+0]=r,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+3]=o,this.int16[l+4]=a,this.int16[l+5]=s,e}};Vn.prototype.bytesPerElement=12;I("StructArrayLayout2i2i2i12",Vn);var zo=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o){let a=this.length;return this.resize(a+1),this.emplace(a,e,r,n,i,o)}emplace(e,r,n,i,o,a){let s=e*4,l=e*8;return this.float32[s+0]=r,this.float32[s+1]=n,this.float32[s+2]=i,this.int16[l+6]=o,this.int16[l+7]=a,e}};zo.prototype.bytesPerElement=16;I("StructArrayLayout2f1f2i16",zo);var Rn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a){let s=this.length;return this.resize(s+1),this.emplace(s,e,r,n,i,o,a)}emplace(e,r,n,i,o,a,s){let l=e*16,u=e*4,c=e*8;return this.uint8[l+0]=r,this.uint8[l+1]=n,this.float32[u+1]=i,this.float32[u+2]=o,this.int16[c+6]=a,this.int16[c+7]=s,e}};Rn.prototype.bytesPerElement=16;I("StructArrayLayout2ub2f2i16",Rn);var zn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,e,r,n)}emplace(e,r,n,i){let o=e*3;return this.uint16[o+0]=r,this.uint16[o+1]=n,this.uint16[o+2]=i,e}};zn.prototype.bytesPerElement=6;I("StructArrayLayout3ui6",zn);var On=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d){let x=this.length;return this.resize(x+1),this.emplace(x,e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d)}emplace(e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d,x){let b=e*24,v=e*12,S=e*48;return this.int16[b+0]=r,this.int16[b+1]=n,this.uint16[b+2]=i,this.uint16[b+3]=o,this.uint32[v+2]=a,this.uint32[v+3]=s,this.uint32[v+4]=l,this.uint16[b+10]=u,this.uint16[b+11]=c,this.uint16[b+12]=p,this.float32[v+7]=f,this.float32[v+8]=y,this.uint8[S+36]=m,this.uint8[S+37]=h,this.uint8[S+38]=g,this.uint32[v+10]=d,this.int16[b+22]=x,e}};On.prototype.bytesPerElement=48;I("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",On);var Gn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d,x,b,v,S,A,w,T,E,D,B,z){let M=this.length;return this.resize(M+1),this.emplace(M,e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d,x,b,v,S,A,w,T,E,D,B,z)}emplace(e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d,x,b,v,S,A,w,T,E,D,B,z,M){let _=e*32,V=e*16;return this.int16[_+0]=r,this.int16[_+1]=n,this.int16[_+2]=i,this.int16[_+3]=o,this.int16[_+4]=a,this.int16[_+5]=s,this.int16[_+6]=l,this.int16[_+7]=u,this.uint16[_+8]=c,this.uint16[_+9]=p,this.uint16[_+10]=f,this.uint16[_+11]=y,this.uint16[_+12]=m,this.uint16[_+13]=h,this.uint16[_+14]=g,this.uint16[_+15]=d,this.uint16[_+16]=x,this.uint16[_+17]=b,this.uint16[_+18]=v,this.uint16[_+19]=S,this.uint16[_+20]=A,this.uint16[_+21]=w,this.uint16[_+22]=T,this.uint32[V+12]=E,this.float32[V+13]=D,this.float32[V+14]=B,this.uint16[_+30]=z,this.uint16[_+31]=M,e}};Gn.prototype.bytesPerElement=64;I("StructArrayLayout8i15ui1ul2f2ui64",Gn);var nr=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){let r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){let n=e*1;return this.float32[n+0]=r,e}};nr.prototype.bytesPerElement=4;I("StructArrayLayout1f4",nr);var Nn=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,e,r,n)}emplace(e,r,n,i){let o=e*6,a=e*3;return this.uint16[o+0]=r,this.float32[a+1]=n,this.float32[a+2]=i,e}};Nn.prototype.bytesPerElement=12;I("StructArrayLayout1ui2f12",Nn);var Un=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n){let i=this.length;return this.resize(i+1),this.emplace(i,e,r,n)}emplace(e,r,n,i){let o=e*2,a=e*4;return this.uint32[o+0]=r,this.uint16[a+2]=n,this.uint16[a+3]=i,e}};Un.prototype.bytesPerElement=8;I("StructArrayLayout1ul2ui8",Un);var $n=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){let n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){let i=e*2;return this.uint16[i+0]=r,this.uint16[i+1]=n,e}};$n.prototype.bytesPerElement=4;I("StructArrayLayout2ui4",$n);var Oo=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){let r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){let n=e*1;return this.uint16[n+0]=r,e}};Oo.prototype.bytesPerElement=2;I("StructArrayLayout1ui2",Oo);var Fr=class extends te{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,i){let o=this.length;return this.resize(o+1),this.emplace(o,e,r,n,i)}emplace(e,r,n,i,o){let a=e*4;return this.float32[a+0]=r,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=o,e}};Fr.prototype.bytesPerElement=16;I("StructArrayLayout4f16",Fr);var Go=class extends Ft{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new np.default(this.anchorPointX,this.anchorPointY)}};Go.prototype.size=20;var jn=class extends Bn{get(e){return new Go(this,e)}};I("CollisionBoxArray",jn);var No=class extends Ft{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}};No.prototype.size=48;var qn=class extends On{get(e){return new No(this,e)}};I("PlacedSymbolArray",qn);var Uo=class extends Ft{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}};Uo.prototype.size=64;var Wn=class extends Gn{get(e){return new Uo(this,e)}};I("SymbolInstanceArray",Wn);var Xn=class extends nr{getoffsetX(e){return this.float32[e*1+0]}};I("GlyphOffsetArray",Xn);var Hn=class extends Cn{getx(e){return this.int16[e*3+0]}gety(e){return this.int16[e*3+1]}gettileUnitDistanceFromAnchor(e){return this.int16[e*3+2]}};I("SymbolLineVertexArray",Hn);var $o=class extends Ft{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}};$o.prototype.size=12;var Zn=class extends Nn{get(e){return new $o(this,e)}};I("TextAnchorOffsetArray",Zn);var jo=class extends Ft{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}};jo.prototype.size=8;var Jn=class extends Un{get(e){return new jo(this,e)}};I("FeatureIndexArray",Jn);var qo=class extends rr{};var Wo=class extends rr{},Xo=class extends rr{},Ho=class extends kn{};var Zo=class extends Fn{},Jo=class extends Et{},yt=class extends En{},Yo=class extends Mn{},Ko=class extends Ln{},Qo=class extends Dn{},Yn=class extends Vn{};var ea=class extends Rn{};var Le=class extends zn{},Mt=class extends $n{};var Pg=Q([{name:"a_pos",components:2,type:"Int16"}],4);var{members:ip,size:kv,alignment:Fv}=Pg;var pe=class t{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1;this.segments=e}prepareSegment(e,r,n,i){let o=this.segments[this.segments.length-1];return e>t.MAX_VERTEX_ARRAY_LENGTH&&ce(`Max vertices per segment is ${t.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \\`fillLargeMeshArrays\\` function if you require meshes with more than ${t.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!o||o.vertexLength+e>t.MAX_VERTEX_ARRAY_LENGTH||o.sortKey!==i?this.createNewSegment(r,n,i):o}createNewSegment(e,r,n){let i={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return n!==void 0&&(i.sortKey=n),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(i),i}getOrCreateLatestSegment(e,r,n){return this.prepareSegment(0,e,r,n)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let e of this.segments)for(let r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,n,i){return new t([{vertexOffset:e,primitiveOffset:r,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}};pe.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;I("SegmentVector",pe);function Qs(t,e){return t=it(Math.floor(t),0,255),e=it(Math.floor(e),0,255),256*t+e}var Kn=Q([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var up=Y(rl(),1);var Qn=class t{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,n,i){this.ids.push(lp(e)),this.positions.push(r,n,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let r=lp(e),n=0,i=this.ids.length-1;for(;n<i;){let a=n+i>>1;this.ids[a]>=r?i=a:n=a+1}let o=[];for(;this.ids[n]===r;){let a=this.positions[3*n],s=this.positions[3*n+1],l=this.positions[3*n+2];o.push({index:a,start:s,end:l}),n++}return o}static serialize(e,r){let n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return nl(n,i,0,n.length-1),r&&r.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){let r=new t;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}};function lp(t){let e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:(0,up.default)(String(t))}function nl(t,e,r,n){for(;r<n;){let i=t[r+n>>1],o=r-1,a=n+1;for(;;){do o++;while(t[o]<i);do a--;while(t[a]>i);if(o>=a)break;ra(t,o,a),ra(e,3*o,3*a),ra(e,3*o+1,3*a+1),ra(e,3*o+2,3*a+2)}a-r<n-a?(nl(t,e,r,a),r=a+1):(nl(t,e,a+1,n),n=a)}}function ra(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}I("FeaturePositionMap",Qn);var ei=class{constructor(e,r){this.gl=e.gl,this.location=r}};var Er=class extends ei{constructor(e,r){super(e,r),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}};var na=class extends ei{constructor(e,r){super(e,r),this.current=[0,0,0,0]}set(e){(e[0]!==this.current[0]||e[1]!==this.current[1]||e[2]!==this.current[2]||e[3]!==this.current[3])&&(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}},ia=class extends ei{constructor(e,r){super(e,r),this.current=H.transparent}set(e){(e.r!==this.current.r||e.g!==this.current.g||e.b!==this.current.b||e.a!==this.current.a)&&(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}};var qv=new Float32Array(16);function il(t){return[Qs(255*t.r,255*t.g),Qs(255*t.b,255*t.a)]}var ir=class{constructor(e,r,n){this.value=e,this.uniformNames=r.map(i=>`u_${i}`),this.type=n}setUniform(e,r,n){e.set(n.constantOr(this.value))}getBinding(e,r,n){return this.type==="color"?new ia(e,r):new Er(e,r)}},Lt=class{constructor(e,r){this.uniformNames=r.map(n=>`u_${n}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr}setUniform(e,r,n,i){let o=i==="u_pattern_to"?this.patternTo:i==="u_pattern_from"?this.patternFrom:i==="u_pixel_ratio_to"?this.pixelRatioTo:i==="u_pixel_ratio_from"?this.pixelRatioFrom:null;o&&e.set(o)}getBinding(e,r,n){return n.substr(0,9)==="u_pattern"?new na(e,r):new Er(e,r)}},We=class{constructor(e,r,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=r.map(o=>({name:`a_${o}`,type:"Float32",components:n==="color"?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(e,r,n,i,o){let a=this.paintVertexArray.length,s=this.expression.evaluate(new W(0),r,{},i,[],o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,r,n,i){let o=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(e,r,o)}_setPaintValue(e,r,n){if(this.type==="color"){let i=il(n);for(let o=e;o<r;o++)this.paintVertexArray.emplace(o,i[0],i[1])}else{for(let i=e;i<r;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},De=class{constructor(e,r,n,i,o,a){this.expression=e,this.uniformNames=r.map(s=>`u_${s}_t`),this.type=n,this.useIntegerZoom=i,this.zoom=o,this.maxValue=0,this.paintVertexAttributes=r.map(s=>({name:`a_${s}`,type:"Float32",components:n==="color"?4:2,offset:0})),this.paintVertexArray=new a}populatePaintArray(e,r,n,i,o){let a=this.expression.evaluate(new W(this.zoom),r,{},i,[],o),s=this.expression.evaluate(new W(this.zoom+1),r,{},i,[],o),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,a,s)}updatePaintArray(e,r,n,i){let o=this.expression.evaluate({zoom:this.zoom},n,i),a=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(e,r,o,a)}_setPaintValue(e,r,n,i){if(this.type==="color"){let o=il(n),a=il(i);for(let s=e;s<r;s++)this.paintVertexArray.emplace(s,o[0],o[1],a[0],a[1])}else{for(let o=e;o<r;o++)this.paintVertexArray.emplace(o,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r){let n=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,i=it(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,r,n){return new Er(e,r)}},Ye=class{constructor(e,r,n,i,o,a){this.expression=e,this.type=r,this.useIntegerZoom=n,this.zoom=i,this.layerId=a,this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(e,r,n){let i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,r.patterns&&r.patterns[this.layerId],n)}updatePaintArray(e,r,n,i,o){this._setPaintValues(e,r,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,r,n,i){if(!i||!n)return;let{min:o,mid:a,max:s}=n,l=i[o],u=i[a],c=i[s];if(!(!l||!u||!c))for(let p=e;p<r;p++)this.zoomInPaintVertexArray.emplace(p,u.tl[0],u.tl[1],u.br[0],u.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],u.pixelRatio,l.pixelRatio),this.zoomOutPaintVertexArray.emplace(p,u.tl[0],u.tl[1],u.br[0],u.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],u.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Kn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Kn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}},oa=class{constructor(e,r,n){this.binders={},this._buffers=[];let i=[];for(let o in e.paint._values){if(!n(o))continue;let a=e.paint.get(o);if(!(a instanceof ge)||!It(a.property.specification))continue;let s=_g(o,e.type),l=a.value,u=a.property.specification.type,c=a.property.useIntegerZoom,p=a.property.specification["property-type"],f=p==="cross-faded"||p==="cross-faded-data-driven";if(l.kind==="constant")this.binders[o]=f?new Lt(l.value,s):new ir(l.value,s,u),i.push(`/u_${o}`);else if(l.kind==="source"||f){let y=cp(o,u,"source");this.binders[o]=f?new Ye(l,u,c,r,y,e.id):new We(l,s,u,y),i.push(`/a_${o}`)}else{let y=cp(o,u,"composite");this.binders[o]=new De(l,s,u,c,r,y),i.push(`/z_${o}`)}}this.cacheKey=i.sort().join("")}getMaxValue(e){let r=this.binders[e];return r instanceof We||r instanceof De?r.maxValue:0}populatePaintArrays(e,r,n,i,o){for(let a in this.binders){let s=this.binders[a];(s instanceof We||s instanceof De||s instanceof Ye)&&s.populatePaintArray(e,r,n,i,o)}}setConstantPatternPositions(e,r){for(let n in this.binders){let i=this.binders[n];i instanceof Lt&&i.setConstantPatternPositions(e,r)}}updatePaintArrays(e,r,n,i,o){let a=!1;for(let s in e){let l=r.getPositions(s);for(let u of l){let c=n.feature(u.index);for(let p in this.binders){let f=this.binders[p];if((f instanceof We||f instanceof De||f instanceof Ye)&&f.expression.isStateDependent===!0){let y=i.paint.get(p);f.expression=y.value,f.updatePaintArray(u.start,u.end,c,e[s],o),a=!0}}}}return a}defines(){let e=[];for(let r in this.binders){let n=this.binders[r];(n instanceof ir||n instanceof Lt)&&e.push(...n.uniformNames.map(i=>`#define HAS_UNIFORM_${i}`))}return e}getBinderAttributes(){let e=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof We||n instanceof De)for(let i=0;i<n.paintVertexAttributes.length;i++)e.push(n.paintVertexAttributes[i].name);else if(n instanceof Ye)for(let i=0;i<Kn.members.length;i++)e.push(Kn.members[i].name)}return e}getBinderUniforms(){let e=[];for(let r in this.binders){let n=this.binders[r];if(n instanceof ir||n instanceof Lt||n instanceof De)for(let i of n.uniformNames)e.push(i)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,r){let n=[];for(let i in this.binders){let o=this.binders[i];if(o instanceof ir||o instanceof Lt||o instanceof De){for(let a of o.uniformNames)if(r[a]){let s=o.getBinding(e,r[a],a);n.push({name:a,property:i,binding:s})}}}return n}setUniforms(e,r,n,i){for(let{name:o,property:a,binding:s}of r)this.binders[a].setUniform(s,i,n.get(a),o)}updatePaintBuffers(e){this._buffers=[];for(let r in this.binders){let n=this.binders[r];if(e&&n instanceof Ye){let i=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;i&&this._buffers.push(i)}else(n instanceof We||n instanceof De)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(let r in this.binders){let n=this.binders[r];(n instanceof We||n instanceof De||n instanceof Ye)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(let e in this.binders){let r=this.binders[e];(r instanceof We||r instanceof De||r instanceof Ye)&&r.destroy()}}},Ae=class{constructor(e,r,n=()=>!0){this.programConfigurations={};for(let i of e)this.programConfigurations[i.id]=new oa(i,r,n);this.needsUpload=!1,this._featureMap=new Qn,this._bufferOffset=0}populatePaintArrays(e,r,n,i,o,a){for(let s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,r,i,o,a);r.id!==void 0&&this._featureMap.add(r.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,n,i){for(let o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,r,o,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(let r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(let e in this.programConfigurations)this.programConfigurations[e].destroy()}};function _g(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Ig(t){return{"line-pattern":{source:yt,composite:yt},"fill-pattern":{source:yt,composite:yt},"fill-extrusion-pattern":{source:yt,composite:yt}}[t]}function cp(t,e,r){let n={color:{source:Et,composite:Fr},number:{source:nr,composite:Et}},i=Ig(t);return i&&i[r]||n[e][r]}I("ConstantBinder",ir);I("CrossFadedConstantBinder",Lt);I("SourceExpressionBinder",We);I("CrossFadedCompositeBinder",Ye);I("CompositeExpressionBinder",De);I("ProgramConfiguration",oa,{omit:["_buffers"]});I("ProgramConfigurationSet",Ae);var Tg=15,ol=Math.pow(2,Tg-1)-1,pp=-ol-1;function _e(t){let e=8192/t.extent,r=t.loadGeometry();for(let n=0;n<r.length;n++){let i=r[n];for(let o=0;o<i.length;o++){let a=i[o],s=Math.round(a.x*e),l=Math.round(a.y*e);a.x=it(s,pp,ol),a.y=it(l,pp,ol),(s<a.x||s>a.x+1||l<a.y||l>a.y+1)&&ce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ne(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?_e(t):[]}}var fp=-32768;function Cg(t,e,r,n,i){t.emplaceBack(fp+e*8+n,fp+r*8+i)}var or=class{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wo,this.indexArray=new Le,this.segments=new pe,this.programConfigurations=new Ae(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n){let i=this.layers[0],o=[],a=null,s=!1,l=i.type==="heatmap";if(i.type==="circle"){let c=i;a=c.layout.get("circle-sort-key"),s=!a.isConstant(),l=l||c.paint.get("circle-pitch-alignment")==="map"}let u=l?r.subdivisionGranularity.circle:1;for(let{feature:c,id:p,index:f,sourceLayerIndex:y}of e){let m=this.layers[0]._featureFilter.needGeometry,h=Ne(c,m);if(!this.layers[0]._featureFilter.filter(new W(this.zoom,{globalState:this.globalState}),h,n))continue;let g=s?a.evaluate(h,{},n):void 0,d={id:p,properties:c.properties,type:c.type,sourceLayerIndex:y,index:f,geometry:m?h.geometry:_e(c),patterns:{},sortKey:g};o.push(d)}s&&o.sort((c,p)=>c.sortKey-p.sortKey);for(let c of o){let{geometry:p,index:f,sourceLayerIndex:y}=c,m=e[f].feature;this.addFeature(c,p,f,n,u),r.featureIndex.insert(m,p,f,y,this.index)}}update(e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ip),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,n,i,o=1){let a;switch(o){case 1:a=[0,7];break;case 3:a=[0,2,5,7];break;case 5:a=[0,1,3,4,6,7];break;case 7:a=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${o}; valid values are 1, 3, 5, 7.`)}let s=a.length;for(let l of r)for(let u of l){let c=u.x,p=u.y;if(c<0||c>=8192||p<0||p>=8192)continue;let f=this.segments.prepareSegment(s*s,this.layoutVertexArray,this.indexArray,e.sortKey),y=f.vertexLength;for(let m=0;m<s;m++)for(let h=0;h<s;h++)Cg(this.layoutVertexArray,c,p,a[h],a[m]);for(let m=0;m<s-1;m++)for(let h=0;h<s-1;h++){let g=y+m*s+h,d=y+(m+1)*s+h;this.indexArray.emplaceBack(g,d+1,g+1),this.indexArray.emplaceBack(g,d,d+1)}f.vertexLength+=s*s,f.primitiveLength+=(s-1)*(s-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i)}};I("CircleBucket",or,{omit:["layers"]});var ti=Y(ye(),1);function mp(t,e){for(let r=0;r<t.length;r++)if(Mr(e,t[r]))return!0;for(let r=0;r<e.length;r++)if(Mr(t,e[r]))return!0;return!!sl(t,e)}function hp(t,e,r){return!!(Mr(t,e)||al(e,t,r))}function aa(t,e){if(t.length===1)return yp(e,t[0]);for(let r=0;r<e.length;r++){let n=e[r];for(let i=0;i<n.length;i++)if(Mr(t,n[i]))return!0}for(let r=0;r<t.length;r++)if(yp(e,t[r]))return!0;for(let r=0;r<e.length;r++)if(sl(t,e[r]))return!0;return!1}function dp(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(t.length>=3){for(let o=0;o<i.length;o++)if(Mr(t,i[o]))return!0}if(kg(t,i,r))return!0}return!1}function kg(t,e,r){if(t.length>1){if(sl(t,e))return!0;for(let n=0;n<e.length;n++)if(al(e[n],t,r))return!0}for(let n=0;n<t.length;n++)if(al(t[n],e,r))return!0;return!1}function sl(t,e){if(t.length===0||e.length===0)return!1;for(let r=0;r<t.length-1;r++){let n=t[r],i=t[r+1];for(let o=0;o<e.length-1;o++){let a=e[o],s=e[o+1];if(Fg(n,i,a,s))return!0}}return!1}function Fg(t,e,r,n){return ot(t,r,n)!==ot(e,r,n)&&ot(t,e,r)!==ot(t,e,n)}function al(t,e,r){let n=r*r;if(e.length===1)return t.distSqr(e[0])<n;for(let i=1;i<e.length;i++){let o=e[i-1],a=e[i];if(ll(t,o,a)<n)return!0}return!1}function ll(t,e,r){let n=e.distSqr(r);if(n===0)return t.distSqr(e);let i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return i<0?t.distSqr(e):i>1?t.distSqr(r):t.distSqr(r.sub(e)._mult(i)._add(e))}function yp(t,e){let r=!1,n,i,o;for(let a=0;a<t.length;a++){n=t[a];for(let s=0,l=n.length-1;s<n.length;l=s++)i=n[s],o=n[l],i.y>e.y!=o.y>e.y&&e.x<(o.x-i.x)*(e.y-i.y)/(o.y-i.y)+i.x&&(r=!r)}return r}function Mr(t,e){let r=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){let o=t[n],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function gp(t,e,r,n,i){for(let a of t)if(e<=a.x&&r<=a.y&&n>=a.x&&i>=a.y)return!0;let o=[new ti.default(e,r),new ti.default(e,i),new ti.default(n,i),new ti.default(n,r)];if(t.length>2){for(let a of o)if(Mr(t,a))return!0}for(let a=0;a<t.length-1;a++){let s=t[a],l=t[a+1];if(Eg(s,l,o))return!0}return!1}function Eg(t,e,r){let n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return!1;let o=ot(t,e,r[0]);return o!==ot(t,e,r[1])||o!==ot(t,e,r[2])||o!==ot(t,e,r[3])}var sa=Y(ye(),1);function ar(t,e,r){let n=e.paint.get(t).value;return n.kind==="constant"?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function Dt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Bt(t,e,r,n,i){if(!e[0]&&!e[1])return t;let o=sa.default.convert(e)._mult(i);r==="viewport"&&o._rotate(-n);let a=[];for(let s=0;s<t.length;s++){let l=t[s];a.push(l.sub(o))}return a}function bp(t,e){let r=[];for(let n=0;n<t.length;n++){let i=t[n],o=[];for(let a=0;a<i.length;a++){let s=i[a-1],l=i[a],u=i[a+1],c=a===0?new sa.default(0,0):l.sub(s)._unit()._perp(),p=a===i.length-1?new sa.default(0,0):u.sub(l)._unit()._perp(),f=c._add(p)._unit(),y=f.x*p.x+f.y*p.y;y!==0&&f._mult(1/y),o.push(f._mult(e)._add(l))}r.push(o)}return r}var xp,Mg=()=>xp=xp||new ee({"circle-sort-key":new L(P.layout_circle["circle-sort-key"])}),vp,Lg=()=>vp=vp||new ee({"circle-radius":new L(P.paint_circle["circle-radius"]),"circle-color":new L(P.paint_circle["circle-color"]),"circle-blur":new L(P.paint_circle["circle-blur"]),"circle-opacity":new L(P.paint_circle["circle-opacity"]),"circle-translate":new F(P.paint_circle["circle-translate"]),"circle-translate-anchor":new F(P.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new F(P.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new F(P.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new L(P.paint_circle["circle-stroke-width"]),"circle-stroke-color":new L(P.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new L(P.paint_circle["circle-stroke-opacity"])}),Pp={get paint(){return Lg()},get layout(){return Mg()}};var Sp=Y(ye(),1);var la=class extends oe{constructor(e){super(e,Pp)}createBucket(e){return new or(e)}queryRadius(e){let r=e;return ar("circle-radius",this,r)+ar("circle-stroke-width",this,r)+Dt(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:n,geometry:i,transform:o,pixelsToTileUnits:a,unwrappedTileID:s,getElevation:l}){let u=Bt(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-o.bearingInRadians,a),c=this.paint.get("circle-radius").evaluate(r,n),p=this.paint.get("circle-stroke-width").evaluate(r,n),f=c+p,y=this.paint.get("circle-pitch-alignment")==="map",m=y?u:Dg(u,o,s,l),h=y?f*a:f;for(let g of i)for(let d of g){let x=y?d:wp(d,o,s,l),b=h,v=o.projectTileCoordinates(d.x,d.y,s,l).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?b*=v/o.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(b*=o.cameraToCenterDistance/v),hp(m,x,b))return!0}return!1}};function wp(t,e,r,n){let i=e.projectTileCoordinates(t.x,t.y,r,n).point;return new Sp.default((i.x*.5+.5)*e.width,(-i.y*.5+.5)*e.height)}function Dg(t,e,r,n){return t.map(i=>wp(i,e,r,n))}var ri=class extends or{};I("HeatmapBucket",ri,{omit:["layers"]});var Ap,Bg=()=>Ap=Ap||new ee({"heatmap-radius":new L(P.paint_heatmap["heatmap-radius"]),"heatmap-weight":new L(P.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new F(P.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ft(P.paint_heatmap["heatmap-color"]),"heatmap-opacity":new F(P.paint_heatmap["heatmap-opacity"])}),_p={get paint(){return Bg()}};function ul(t,{width:e,height:r},n,i){if(!i)i=new Uint8Array(e*r*n);else if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${e*r*n}`);return t.width=e,t.height=r,t.data=i,t}function Ip(t,{width:e,height:r},n){if(e===t.width&&r===t.height)return;let i=ul({},{width:e,height:r},n);cl(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,r)},n),t.width=e,t.height=r,t.data=i.data}function cl(t,e,r,n,i,o){if(i.width===0||i.height===0)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");let a=t.data,s=e.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){let u=((r.y+l)*t.width+r.x)*o,c=((n.y+l)*e.width+n.x)*o;for(let p=0;p<i.width*o;p++)s[c+p]=a[u+p]}return e}var sr=class t{constructor(e,r){ul(this,e,1,r)}resize(e){Ip(this,e,1)}clone(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,n,i,o){cl(e,r,n,i,o,1)}},fe=class t{constructor(e,r){ul(this,e,4,r)}resize(e){Ip(this,e,4)}replace(e,r){r?this.data.set(e):e instanceof Uint8ClampedArray?this.data=new Uint8Array(e.buffer):this.data=e}clone(){return new t({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,n,i,o){cl(e,r,n,i,o,4)}setPixel(e,r,n){let i=(e*this.width+r)*4;this.data[i+0]=Math.round(n.r*255/n.a),this.data[i+1]=Math.round(n.g*255/n.a),this.data[i+2]=Math.round(n.b*255/n.a),this.data[i+3]=Math.round(n.a*255)}};I("AlphaImage",sr);I("RGBAImage",fe);function Tp(t){let e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new fe({width:r,height:n});if(!Au(r))throw new Error(`width is not a power of 2 - ${r}`);let o=(a,s,l)=>{e[t.evaluationKey]=l;let u=t.expression.evaluate(e);i.setPixel(a/4/r,s/4,u)};if(t.clips)for(let a=0,s=0;a<n;++a,s+=r*4)for(let l=0,u=0;l<r;l++,u+=4){let c=l/(r-1),{start:p,end:f}=t.clips[a],y=p*(1-c)+f*c;o(s,u,y)}else for(let a=0,s=0;a<r;a++,s+=4){let l=a/(r-1);o(0,s,l)}return i}var Cp="big-fb";var ua=class extends oe{createBucket(e){return new ri(e)}constructor(e){super(e,_p),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){let e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Tp({expression:e,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Cp)&&this.heatmapFbos.delete(Cp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}};var kp,Vg=()=>kp=kp||new ee({"hillshade-illumination-direction":new F(P.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new F(P.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new F(P.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new F(P.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new F(P.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new F(P.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new F(P.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new F(P.paint_hillshade["hillshade-method"])}),Fp={get paint(){return Vg()}};var ca=class extends oe{constructor(e){super(e,Fp),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,r=this.paint.get("hillshade-illumination-altitude").values,n=this.paint.get("hillshade-highlight-color").values,i=this.paint.get("hillshade-shadow-color").values,o=Math.max(e.length,r.length,n.length,i.length);e=e.concat(Array(o-e.length).fill(e.at(-1))),r=r.concat(Array(o-r.length).fill(r.at(-1))),n=n.concat(Array(o-n.length).fill(n.at(-1))),i=i.concat(Array(o-i.length).fill(i.at(-1)));let a=r.map(cs);return{directionRadians:e.map(cs),altitudeRadians:a,shadowColor:i,highlightColor:n}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}};var Ep,Rg=()=>Ep=Ep||new ee({"color-relief-opacity":new F(P["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ft(P["paint_color-relief"]["color-relief-color"])}),Mp={get paint(){return Rg()}};var ni=class{constructor(e,r,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(r,i)}update(e,r,n){let{width:i,height:o}=e,a=(!this.size||this.size[0]!==i||this.size[1]!==o)&&!n,{context:s}=this,{gl:l}=s;if(this.useMipmap=!!(r&&r.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!r||r.premultiply!==!1)),a)this.size=[i,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||vt(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{let{x:u,y:c}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||vt(e)?l.texSubImage2D(l.TEXTURE_2D,0,u,c,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,u,c,i,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D),s.pixelStoreUnpackFlipY.setDefault(),s.pixelStoreUnpack.setDefault(),s.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,n){let{context:i}=this,{gl:o}=i;o.bindTexture(o.TEXTURE_2D,this.texture),n===o.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(n=o.LINEAR),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,n||e),this.filter=e),r!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}};var ii=class{constructor(e,r,n,i=1,o=1,a=1,s=0){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n)){ce(`"${n}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);return}this.stride=r.height;let l=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=o,this.blueFactor=a,this.baseShift=s;break;case"mapbox":default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;break}for(let u=0;u<l;u++)this.data[this._idx(-1,u)]=this.data[this._idx(0,u)],this.data[this._idx(l,u)]=this.data[this._idx(l-1,u)],this.data[this._idx(u,-1)]=this.data[this._idx(u,0)],this.data[this._idx(u,l)]=this.data[this._idx(u,l-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(l,-1)]=this.data[this._idx(l-1,0)],this.data[this._idx(-1,l)]=this.data[this._idx(0,l-1)],this.data[this._idx(l,l)]=this.data[this._idx(l-1,l-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let u=0;u<l;u++)for(let c=0;c<l;c++){let p=this.get(u,c);p>this.max&&(this.max=p),p<this.min&&(this.min=p)}}get(e,r){let n=new Uint8Array(this.data.buffer),i=this._idx(e,r)*4;return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}unpack(e,r,n){return e*this.redFactor+r*this.greenFactor+n*this.blueFactor-this.baseShift}pack(e){return pl(e,this.getUnpackVector())}getPixels(){return new fe({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,r,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=r*this.dim,o=r*this.dim+this.dim,a=n*this.dim,s=n*this.dim+this.dim;switch(r){case-1:i=o-1;break;case 1:o=i+1;break}switch(n){case-1:a=s-1;break;case 1:s=a+1;break}let l=-r*this.dim,u=-n*this.dim;for(let c=a;c<s;c++)for(let p=i;p<o;p++)this.data[this._idx(p,c)]=e.data[this._idx(p+l,c+u)]}};function pl(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=Math.min(r,n,i),s=Math.round((t+o)/a);return{r:Math.floor(s*a/r)%256,g:Math.floor(s*a/n)%256,b:Math.floor(s*a/i)%256}}I("DEMData",ii);var pa=class extends oe{constructor(e){super(e,Mp)}_createColorRamp(e){let r={elevationStops:[],colorStops:[]},n=this._transitionablePaint._values["color-relief-color"].value.expression;if(n instanceof Je&&n._styleExpression.expression instanceof ke){this.colorRampExpression=n;let a=n._styleExpression.expression;r.elevationStops=a.labels,r.colorStops=[];for(let s of r.elevationStops)r.colorStops.push(a.evaluate({globals:{elevation:s}}))}if(r.elevationStops.length<1&&(r.elevationStops=[0],r.colorStops=[H.transparent]),r.elevationStops.length<2&&(r.elevationStops.push(r.elevationStops[0]+1),r.colorStops.push(r.colorStops[0])),r.elevationStops.length<=e)return r;let i={elevationStops:[],colorStops:[]},o=(r.elevationStops.length-1)/(e-1);for(let a=0;a<r.elevationStops.length-.5;a+=o)i.elevationStops.push(r.elevationStops[Math.round(a)]),i.colorStops.push(r.colorStops[Math.round(a)]);return ce(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),i}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,r,n){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let i=this._createColorRamp(r),o=new fe({width:i.colorStops.length,height:1}),a=new fe({width:i.colorStops.length,height:1});for(let s=0;s<i.elevationStops.length;s++){let l=pl(i.elevationStops[s],n);a.setPixel(0,s,new H(l.r/255,l.g/255,l.b/255,1)),o.setPixel(0,s,i.colorStops[s])}return this.colorRampTextures={elevationTexture:new ni(e,a,e.gl.RGBA),colorTexture:new ni(e,o,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}};var zg=Q([{name:"a_pos",components:2,type:"Int16"}],4);var{members:Lp,size:U1,alignment:$1}=zg;function Lr(t,e,r){let n=r.patternDependencies,i=!1;for(let o of e){let a=o.paint.get(`${t}-pattern`);a.isConstant()||(i=!0);let s=a.constantOr(null);s&&(i=!0,n[s.to]=!0,n[s.from]=!0)}return i}function Dr(t,e,r,n,i){let o=i.patternDependencies;for(let a of e){let l=a.paint.get(`${t}-pattern`).value;if(l.kind!=="constant"){let u=l.evaluate({zoom:n-1},r,{},i.availableImages),c=l.evaluate({zoom:n},r,{},i.availableImages),p=l.evaluate({zoom:n+1},r,{},i.availableImages);u=u&&u.name?u.name:u,c=c&&c.name?c.name:c,p=p&&p.name?p.name:p,o[u]=!0,o[c]=!0,o[p]=!0,r.patterns[a.id]={min:u,mid:c,max:p}}}return r}var ci=Y(ye(),1);function ml(t,e,r=2){let n=e&&e.length,i=n?e[0]*r:t.length,o=Bp(t,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;let s,l,u;if(n&&(o=$g(t,e,o,r)),t.length>80*r){s=1/0,l=1/0;let c=-1/0,p=-1/0;for(let f=r;f<i;f+=r){let y=t[f],m=t[f+1];y<s&&(s=y),m<l&&(l=m),y>c&&(c=y),m>p&&(p=m)}u=Math.max(c-s,p-l),u=u!==0?32767/u:0}return ai(o,a,r,s,l,u,0),a}function Bp(t,e,r,n,i){let o;if(i===eb(t,e,r,n)>0)for(let a=e;a<r;a+=n)o=Dp(a/n|0,t[a],t[a+1],o);else for(let a=r-n;a>=e;a-=n)o=Dp(a/n|0,t[a],t[a+1],o);return o&&Br(o,o.next)&&(li(o),o=o.next),o}function lr(t,e){if(!t)return t;e||(e=t);let r=t,n;do if(n=!1,!r.steiner&&(Br(r,r.next)||se(r.prev,r,r.next)===0)){if(li(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function ai(t,e,r,n,i,o,a){if(!t)return;!a&&o&&Hg(t,n,i,o);let s=t;for(;t.prev!==t.next;){let l=t.prev,u=t.next;if(o?Gg(t,n,i,o):Og(t)){e.push(l.i,t.i,u.i),li(t),t=u.next,s=u.next;continue}if(t=u,t===s){a?a===1?(t=Ng(lr(t),e),ai(t,e,r,n,i,o,2)):a===2&&Ug(t,e,r,n,i,o):ai(lr(t),e,r,n,i,o,1);break}}}function Og(t){let e=t.prev,r=t,n=t.next;if(se(e,r,n)>=0)return!1;let i=e.x,o=r.x,a=n.x,s=e.y,l=r.y,u=n.y,c=Math.min(i,o,a),p=Math.min(s,l,u),f=Math.max(i,o,a),y=Math.max(s,l,u),m=n.next;for(;m!==e;){if(m.x>=c&&m.x<=f&&m.y>=p&&m.y<=y&&oi(i,s,o,l,a,u,m.x,m.y)&&se(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Gg(t,e,r,n){let i=t.prev,o=t,a=t.next;if(se(i,o,a)>=0)return!1;let s=i.x,l=o.x,u=a.x,c=i.y,p=o.y,f=a.y,y=Math.min(s,l,u),m=Math.min(c,p,f),h=Math.max(s,l,u),g=Math.max(c,p,f),d=fl(y,m,e,r,n),x=fl(h,g,e,r,n),b=t.prevZ,v=t.nextZ;for(;b&&b.z>=d&&v&&v.z<=x;){if(b.x>=y&&b.x<=h&&b.y>=m&&b.y<=g&&b!==i&&b!==a&&oi(s,c,l,p,u,f,b.x,b.y)&&se(b.prev,b,b.next)>=0||(b=b.prevZ,v.x>=y&&v.x<=h&&v.y>=m&&v.y<=g&&v!==i&&v!==a&&oi(s,c,l,p,u,f,v.x,v.y)&&se(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;b&&b.z>=d;){if(b.x>=y&&b.x<=h&&b.y>=m&&b.y<=g&&b!==i&&b!==a&&oi(s,c,l,p,u,f,b.x,b.y)&&se(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=x;){if(v.x>=y&&v.x<=h&&v.y>=m&&v.y<=g&&v!==i&&v!==a&&oi(s,c,l,p,u,f,v.x,v.y)&&se(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Ng(t,e){let r=t;do{let n=r.prev,i=r.next.next;!Br(n,i)&&Rp(n,r,r.next,i)&&si(n,i)&&si(i,n)&&(e.push(n.i,r.i,i.i),li(r),li(r.next),r=t=i),r=r.next}while(r!==t);return lr(r)}function Ug(t,e,r,n,i,o){let a=t;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&Yg(a,s)){let l=zp(a,s);a=lr(a,a.next),l=lr(l,l.next),ai(a,e,r,n,i,o,0),ai(l,e,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==t)}function $g(t,e,r,n){let i=[];for(let o=0,a=e.length;o<a;o++){let s=e[o]*n,l=o<a-1?e[o+1]*n:t.length,u=Bp(t,s,l,n,!1);u===u.next&&(u.steiner=!0),i.push(Jg(u))}i.sort(jg);for(let o=0;o<i.length;o++)r=qg(i[o],r);return r}function jg(t,e){let r=t.x-e.x;if(r===0&&(r=t.y-e.y,r===0)){let n=(t.next.y-t.y)/(t.next.x-t.x),i=(e.next.y-e.y)/(e.next.x-e.x);r=n-i}return r}function qg(t,e){let r=Wg(t,e);if(!r)return e;let n=zp(r,t);return lr(n,n.next),lr(r,r.next)}function Wg(t,e){let r=e,n=t.x,i=t.y,o=-1/0,a;if(Br(t,r))return r;do{if(Br(t,r.next))return r.next;if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){let p=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(p<=n&&p>o&&(o=p,a=r.x<r.next.x?r:r.next,p===n))return a}r=r.next}while(r!==e);if(!a)return null;let s=a,l=a.x,u=a.y,c=1/0;r=a;do{if(n>=r.x&&r.x>=l&&n!==r.x&&Vp(i<u?n:o,i,l,u,i<u?o:n,i,r.x,r.y)){let p=Math.abs(i-r.y)/(n-r.x);si(r,t)&&(p<c||p===c&&(r.x>a.x||r.x===a.x&&Xg(a,r)))&&(a=r,c=p)}r=r.next}while(r!==s);return a}function Xg(t,e){return se(t.prev,t,e.prev)<0&&se(e.next,t,t.next)<0}function Hg(t,e,r,n){let i=t;do i.z===0&&(i.z=fl(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Zg(i)}function Zg(t){let e,r=1;do{let n=t,i;t=null;let o=null;for(e=0;n;){e++;let a=n,s=0;for(let u=0;u<r&&(s++,a=a.nextZ,!!a);u++);let l=r;for(;s>0||l>0&&a;)s!==0&&(l===0||!a||n.z<=a.z)?(i=n,n=n.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=a}o.nextZ=null,r*=2}while(e>1);return t}function fl(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Jg(t){let e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Vp(t,e,r,n,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(n-s)>=(r-a)*(e-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function oi(t,e,r,n,i,o,a,s){return!(t===a&&e===s)&&Vp(t,e,r,n,i,o,a,s)}function Yg(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Kg(t,e)&&(si(t,e)&&si(e,t)&&Qg(t,e)&&(se(t.prev,t,e.prev)||se(t,e.prev,e))||Br(t,e)&&se(t.prev,t,t.next)>0&&se(e.prev,e,e.next)>0)}function se(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Br(t,e){return t.x===e.x&&t.y===e.y}function Rp(t,e,r,n){let i=ya(se(t,e,r)),o=ya(se(t,e,n)),a=ya(se(r,n,t)),s=ya(se(r,n,e));return!!(i!==o&&a!==s||i===0&&fa(t,r,e)||o===0&&fa(t,n,e)||a===0&&fa(r,t,n)||s===0&&fa(r,e,n))}function fa(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function ya(t){return t>0?1:t<0?-1:0}function Kg(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Rp(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function si(t,e){return se(t.prev,t,t.next)<0?se(t,e,t.next)>=0&&se(t,t.prev,e)>=0:se(t,e,t.prev)<0||se(t,t.next,e)<0}function Qg(t,e){let r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function zp(t,e){let r=yl(t.i,t.x,t.y),n=yl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Dp(t,e,r,n){let i=yl(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function li(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yl(t,e,r){return{i:t,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function eb(t,e,r,n){let i=0;for(let o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}var Vt=class{constructor(e,r){if(r>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=r}getGranularityForZoomLevel(e){let r=1<<e;return Math.max(Math.floor(this._baseZoomGranularity/r),this._minGranularity,1)}},ha=class ha{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}};ha.noSubdivision=new ha({fill:new Vt(0,0),line:new Vt(0,0),tile:new Vt(0,0),stencil:new Vt(0,0),circle:1});var ma=ha;I("SubdivisionGranularityExpression",Vt);I("SubdivisionGranularitySetting",ma);var Vr=-32768,ui=32767,hl=class{constructor(e,r){this._vertexBuffer=[];this._vertexDictionary=new Map;this._used=!1;this._granularity=e,this._granularityCellSize=8192/e,this._canonical=r}_getKey(e,r){return e=e+32768,r=r+32768,e<<16|r<<0}_vertexToIndex(e,r){if(e<-32768||r<-32768||e>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let n=Math.round(e)|0,i=Math.round(r)|0,o=this._getKey(n,i);if(this._vertexDictionary.has(o))return this._vertexDictionary.get(o);let a=this._vertexBuffer.length/2;return this._vertexDictionary.set(o,a),this._vertexBuffer.push(n,i),a}_subdivideTrianglesScanline(e){if(this._granularity<2)return rb(this._vertexBuffer,e);let r=[],n=e.length;for(let i=0;i<n;i+=3){let o=[e[i+0],e[i+1],e[i+2]],a=[this._vertexBuffer[e[i+0]*2+0],this._vertexBuffer[e[i+0]*2+1],this._vertexBuffer[e[i+1]*2+0],this._vertexBuffer[e[i+1]*2+1],this._vertexBuffer[e[i+2]*2+0],this._vertexBuffer[e[i+2]*2+1]],s=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0;h<3;h++){let g=a[h*2],d=a[h*2+1];s=Math.min(s,g),u=Math.max(u,g),l=Math.min(l,d),c=Math.max(c,d)}if(s===u||l===c)continue;let p=Math.floor(s/this._granularityCellSize),f=Math.ceil(u/this._granularityCellSize),y=Math.floor(l/this._granularityCellSize),m=Math.ceil(c/this._granularityCellSize);if(p===f&&y===m){r.push(...o);continue}for(let h=y;h<m;h++){let g=this._scanlineGenerateVertexRingForCellRow(h,a,o);nb(this._vertexBuffer,g,r)}}return r}_scanlineGenerateVertexRingForCellRow(e,r,n){let i=e*this._granularityCellSize,o=i+this._granularityCellSize,a=[];for(let s=0;s<3;s++){let l=r[s*2],u=r[s*2+1],c=r[(s+1)*2%6],p=r[((s+1)*2+1)%6],f=r[(s+2)*2%6],y=r[((s+2)*2+1)%6],m=c-l,h=p-u,g=m===0,d=h===0,x=(i-u)/h,b=(o-u)/h,v=Math.min(x,b),S=Math.max(x,b);if(!d&&(v>=1||S<=0)||d&&(u<i||u>o)){p>=i&&p<=o&&a.push(n[(s+1)%3]);continue}if(!d&&v>0){let T=l+m*v,E=u+h*v;a.push(this._vertexToIndex(T,E))}let A=l+m*Math.max(v,0),w=l+m*Math.min(S,1);if(g||this._generateIntraEdgeVertices(a,l,u,c,p,A,w),!d&&S<1){let T=l+m*S,E=u+h*S;a.push(this._vertexToIndex(T,E))}(d||p>=i&&p<=o)&&a.push(n[(s+1)%3]),!d&&(p<=i||p>=o)&&this._generateInterEdgeVertices(a,l,u,c,p,f,y,w,i,o)}return a}_generateIntraEdgeVertices(e,r,n,i,o,a,s){let l=i-r,u=o-n,c=u===0,p=c?Math.min(r,i):Math.min(a,s),f=c?Math.max(r,i):Math.max(a,s),y=Math.floor(p/this._granularityCellSize)+1,m=Math.ceil(f/this._granularityCellSize)-1;if(c?r<i:a<s)for(let g=y;g<=m;g++){let d=g*this._granularityCellSize,x=n+u*(d-r)/l;e.push(this._vertexToIndex(d,x))}else for(let g=m;g>=y;g--){let d=g*this._granularityCellSize,x=n+u*(d-r)/l;e.push(this._vertexToIndex(d,x))}}_generateInterEdgeVertices(e,r,n,i,o,a,s,l,u,c){let p=o-n,f=a-i,y=s-o,m=(u-o)/y,h=(c-o)/y,g=Math.min(m,h),d=Math.max(m,h),x=i+f*g,b=Math.floor(Math.min(x,l)/this._granularityCellSize)+1,v=Math.ceil(Math.max(x,l)/this._granularityCellSize)-1,S=l<x,A=y===0;if(A&&(s===u||s===c))return;if(A||g>=1||d<=0){let T=r-a,E=n-s,D=(u-s)/E,B=(c-s)/E,z=Math.min(D,B),M=a+T*z;b=Math.floor(Math.min(M,l)/this._granularityCellSize)+1,v=Math.ceil(Math.max(M,l)/this._granularityCellSize)-1,S=l<M}let w=p>0?c:u;if(S)for(let T=b;T<=v;T++){let E=T*this._granularityCellSize;e.push(this._vertexToIndex(E,w))}else for(let T=v;T>=b;T--){let E=T*this._granularityCellSize;e.push(this._vertexToIndex(E,w))}}_generateOutline(e){let r=[];for(let n of e){let i=Ke(n,this._granularity,!0),o=this._pointArrayToIndices(i),a=[];for(let s=1;s<o.length;s++)a.push(o[s-1]),a.push(o[s]);r.push(a)}return r}_handlePoles(e){let r=!1,n=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(n=!0)),(r||n)&&this._fillPoles(e,r,n)}_ensureNoPoleVertices(){let e=this._vertexBuffer;for(let r=0;r<e.length;r+=2){let n=e[r+1];n===Vr&&(e[r+1]=Vr+1),n===ui&&(e[r+1]=ui-1)}}_generatePoleQuad(e,r,n,i,o,a){i>o!=(a===Vr)?(e.push(r),e.push(n),e.push(this._vertexToIndex(i,a)),e.push(n),e.push(this._vertexToIndex(o,a)),e.push(this._vertexToIndex(i,a))):(e.push(n),e.push(r),e.push(this._vertexToIndex(i,a)),e.push(this._vertexToIndex(o,a)),e.push(n),e.push(this._vertexToIndex(i,a)))}_fillPoles(e,r,n){let i=this._vertexBuffer,o=0,a=8192,s=e.length;for(let l=2;l<s;l+=3){let u=e[l-2],c=e[l-1],p=e[l],f=i[u*2],y=i[u*2+1],m=i[c*2],h=i[c*2+1],g=i[p*2],d=i[p*2+1];r&&(y===o&&h===o&&this._generatePoleQuad(e,u,c,f,m,Vr),h===o&&d===o&&this._generatePoleQuad(e,c,p,m,g,Vr),d===o&&y===o&&this._generatePoleQuad(e,p,u,g,f,Vr)),n&&(y===a&&h===a&&this._generatePoleQuad(e,u,c,f,m,ui),h===a&&d===a&&this._generatePoleQuad(e,c,p,m,g,ui),d===a&&y===a&&this._generatePoleQuad(e,p,u,g,f,ui))}}_initializeVertices(e){for(let r=0;r<e.length;r+=2)this._vertexToIndex(e[r],e[r+1])}subdividePolygonInternal(e,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:n,holeIndices:i}=tb(e);this._initializeVertices(n);let o;try{let s=ml(n,i),l=this._convertIndices(n,s);o=this._subdivideTrianglesScanline(l)}catch(s){console.error(s)}let a=[];return r&&(a=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(o),{verticesFlattened:this._vertexBuffer,indicesTriangles:o,indicesLineList:a}}_convertIndices(e,r){let n=[];for(let i=0;i<r.length;i++){let o=e[r[i]*2],a=e[r[i]*2+1];n.push(this._vertexToIndex(o,a))}return n}_pointArrayToIndices(e){let r=[];for(let n=0;n<e.length;n++){let i=e[n];r.push(this._vertexToIndex(i.x,i.y))}return r}};function da(t,e,r,n=!0){return new hl(r,e).subdividePolygonInternal(t,n)}function Ke(t,e,r=!1){if(!t||t.length<1)return[];if(t.length<2)return[];let n=t[0],i=t[t.length-1],o=r&&(n.x!==i.x||n.y!==i.y);if(e<2)return o?[...t,t[0]]:[...t];let a=Math.floor(8192/e),s=[];s.push(new ci.default(t[0].x,t[0].y));let l=t.length,u=o?l:l-1;for(let c=0;c<u;c++){let p=t[c],f=c<l-1?t[c+1]:t[0],y=p.x,m=p.y,h=f.x,g=f.y,d=y!==h,x=m!==g;if(!d&&!x)continue;let b=h-y,v=g-m,S=Math.abs(b),A=Math.abs(v),w=y,T=m;for(;;){let D=b>0?(Math.floor(w/a)+1)*a:(Math.ceil(w/a)-1)*a,B=v>0?(Math.floor(T/a)+1)*a:(Math.ceil(T/a)-1)*a,z=Math.abs(w-D),M=Math.abs(T-B),_=Math.abs(w-h),V=Math.abs(T-g),G=d?z/S:Number.POSITIVE_INFINITY,O=x?M/A:Number.POSITIVE_INFINITY;if((_<=z||!d)&&(V<=M||!x))break;if(G<O&&d||!x){w=D,T=T+v*G;let R=new ci.default(w,Math.round(T));(s[s.length-1].x!==R.x||s[s.length-1].y!==R.y)&&s.push(R)}else{w=w+b*O,T=B;let R=new ci.default(Math.round(w),T);(s[s.length-1].x!==R.x||s[s.length-1].y!==R.y)&&s.push(R)}}let E=new ci.default(h,g);(s[s.length-1].x!==E.x||s[s.length-1].y!==E.y)&&s.push(E)}return s}function tb(t){let e=[],r=[];for(let n of t)if(n.length!==0){n!==t[0]&&e.push(r.length/2);for(let i=0;i<n.length;i++)r.push(n[i].x),r.push(n[i].y)}return{flattened:r,holeIndices:e}}function rb(t,e){let r=[];for(let n=0;n<e.length;n+=3){let i=e[n],o=e[n+1],a=e[n+2],s=t[i*2],l=t[i*2+1],u=t[o*2],c=t[o*2+1],p=t[a*2],f=t[a*2+1],y=u-s,m=c-l,h=p-s,g=f-l;y*g-m*h>0?(r.push(i),r.push(a),r.push(o)):(r.push(i),r.push(o),r.push(a))}return r}function nb(t,e,r){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let n=0,i=t[e[0]*2];for(let l=1;l<e.length;l++){let u=t[e[l]*2];u<i&&(i=u,n=l)}let o=e.length,a=n,s=(a+1)%o;for(;;){let l=a-1>=0?a-1:o-1,u=(s+1)%o,c=t[e[l]*2],p=t[e[l]*2+1],f=t[e[u]*2],y=t[e[u]*2+1],m=t[e[a]*2],h=t[e[a]*2+1],g=t[e[s]*2],d=t[e[s]*2+1],x=!1;if(c<f)x=!0;else if(c>f)x=!1;else{let b=g-m,S=d-h,A=-b,w=h<d?1:-1,T=((c-m)*S+(p-h)*A)*w,E=((f-m)*S+(y-h)*A)*w;T>E&&(x=!0)}if(x){let b=e[l],v=e[a],S=e[s];b!==v&&b!==S&&v!==S&&r.push(S,v,b),a--,a<0&&(a=o-1)}else{let b=e[u],v=e[a],S=e[s];b!==v&&b!==S&&v!==S&&r.push(S,v,b),s++,s>=o&&(s=0)}if(l===u)break}}function ga(t,e,r,n,i,o,a,s,l){let u=i.length/2,c=a&&s&&l;if(u<pe.MAX_VERTEX_ARRAY_LENGTH){let p=e.prepareSegment(u,r,n),f=p.vertexLength;for(let h=0;h<o.length;h+=3)n.emplaceBack(f+o[h],f+o[h+1],f+o[h+2]);p.vertexLength+=u,p.primitiveLength+=o.length/3;let y,m;c&&(m=a.prepareSegment(u,r,s),y=m.vertexLength,m.vertexLength+=u);for(let h=0;h<i.length;h+=2)t(i[h],i[h+1]);if(c)for(let h=0;h<l.length;h++){let g=l[h];for(let d=1;d<g.length;d+=2)s.emplaceBack(y+g[d-1],y+g[d]);m.primitiveLength+=g.length/2}}else ib(e,r,n,i,o,t),c&&ob(a,r,s,i,l,t),e.forceNewSegmentOnNextPrepare(),a?.forceNewSegmentOnNextPrepare()}function pi(t,e,r,n,i,o,a){if(o){let s=n.count;return r(e[i*2],e[i*2+1]),t[i]=n.count,n.count++,a.vertexLength++,s}else return t[i]}function ib(t,e,r,n,i,o){let a=[];for(let p=0;p<n.length/2;p++)a.push(-1);let s={count:0},l=0,u=t.getOrCreateLatestSegment(e,r),c=u.vertexLength;for(let p=2;p<i.length;p+=3){let f=i[p-2],y=i[p-1],m=i[p],h=a[f]<l,g=a[y]<l,d=a[m]<l,x=(h?1:0)+(g?1:0)+(d?1:0);u.vertexLength+x>pe.MAX_VERTEX_ARRAY_LENGTH&&(u=t.createNewSegment(e,r),l=s.count,h=!0,g=!0,d=!0,c=0);let b=pi(a,n,o,s,f,h,u),v=pi(a,n,o,s,y,g,u),S=pi(a,n,o,s,m,d,u);r.emplaceBack(c+b-l,c+v-l,c+S-l),u.primitiveLength++}}function ob(t,e,r,n,i,o){let a=[];for(let p=0;p<n.length/2;p++)a.push(-1);let s={count:0},l=0,u=t.getOrCreateLatestSegment(e,r),c=u.vertexLength;for(let p=0;p<i.length;p++){let f=i[p];for(let y=1;y<i[p].length;y+=2){let m=f[y-1],h=f[y],g=a[m]<l,d=a[h]<l,x=(g?1:0)+(d?1:0);u.vertexLength+x>pe.MAX_VERTEX_ARRAY_LENGTH&&(u=t.createNewSegment(e,r),l=s.count,g=!0,d=!0,c=0);let b=pi(a,n,o,s,m,g,u),v=pi(a,n,o,s,h,d,u);r.emplaceBack(c+b-l,c+v-l),u.primitiveLength++}}}var ab=500,ur=class{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Xo,this.indexArray=new Le,this.indexArray2=new Mt,this.programConfigurations=new Ae(e.layers,e.zoom),this.segments=new pe,this.segments2=new pe,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n){this.hasPattern=Lr("fill",this.layers,r);let i=this.layers[0].layout.get("fill-sort-key"),o=!i.isConstant(),a=[];for(let{feature:s,id:l,index:u,sourceLayerIndex:c}of e){let p=this.layers[0]._featureFilter.needGeometry,f=Ne(s,p);if(!this.layers[0]._featureFilter.filter(new W(this.zoom,{globalState:this.globalState}),f,n))continue;let y=o?i.evaluate(f,{},n,r.availableImages):void 0,m={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:p?f.geometry:_e(s),patterns:{},sortKey:y};a.push(m)}o&&a.sort((s,l)=>s.sortKey-l.sortKey);for(let s of a){let{geometry:l,index:u,sourceLayerIndex:c}=s;if(this.hasPattern){let f=Dr("fill",this.layers,s,this.zoom,r);this.patternFeatures.push(f)}else this.addFeature(s,l,u,n,{},r.subdivisionGranularity);let p=e[u].feature;r.featureIndex.insert(p,l,u,c,this.index)}}update(e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n)}addFeatures(e,r,n){for(let i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,r,n,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,n,i,o,a){for(let s of Yt(r,ab)){let l=da(s,i,a.fill.getGranularityForZoomLevel(i.z)),u=this.layoutVertexArray;ga((c,p)=>{u.emplaceBack(c,p)},this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles,this.segments2,this.indexArray2,l.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,i)}};I("FillBucket",ur,{omit:["layers","patternFeatures"]});var Op,sb=()=>Op=Op||new ee({"fill-sort-key":new L(P.layout_fill["fill-sort-key"])}),Gp,lb=()=>Gp=Gp||new ee({"fill-antialias":new F(P.paint_fill["fill-antialias"]),"fill-opacity":new L(P.paint_fill["fill-opacity"]),"fill-color":new L(P.paint_fill["fill-color"]),"fill-outline-color":new L(P.paint_fill["fill-outline-color"]),"fill-translate":new F(P.paint_fill["fill-translate"]),"fill-translate-anchor":new F(P.paint_fill["fill-translate-anchor"]),"fill-pattern":new pt(P.paint_fill["fill-pattern"])}),Np={get paint(){return lb()},get layout(){return sb()}};var ba=class extends oe{constructor(e){super(e,Np)}recalculate(e,r){super.recalculate(e,r);let n=this.paint._values["fill-outline-color"];n.value.kind==="constant"&&n.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ur(e)}queryRadius(){return Dt(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:r,transform:n,pixelsToTileUnits:i}){let o=Bt(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-n.bearingInRadians,i);return aa(o,r)}isTileClipped(){return!0}};var ub=Q([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Up=Q([{name:"a_centroid",components:2,type:"Int16"}],4);var{members:$p,size:kS,alignment:FS}=ub;var Jp=Y(Rt(),1);var Pb=Jp.default.VectorTileFeature.types,Sb=500,bl=Math.pow(2,13);function fi(t,e,r,n,i,o,a,s){t.emplaceBack(e,r,Math.floor(n*bl)*2+a,i*bl*2,o*bl*2,Math.round(s))}var cr=class{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ho,this.centroidVertexArray=new qo,this.indexArray=new Le,this.programConfigurations=new Ae(e.layers,e.zoom),this.segments=new pe,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n){this.features=[],this.hasPattern=Lr("fill-extrusion",this.layers,r);for(let{feature:i,id:o,index:a,sourceLayerIndex:s}of e){let l=this.layers[0]._featureFilter.needGeometry,u=Ne(i,l);if(!this.layers[0]._featureFilter.filter(new W(this.zoom,{globalState:this.globalState}),u,n))continue;let c={id:o,sourceLayerIndex:s,index:a,geometry:l?u.geometry:_e(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(Dr("fill-extrusion",this.layers,c,this.zoom,r)):this.addFeature(c,c.geometry,a,n,{},r.subdivisionGranularity),r.featureIndex.insert(i,c.geometry,a,s,this.index,!0)}}addFeatures(e,r,n){for(let i of this.features){let{geometry:o}=i;this.addFeature(i,o,i.index,r,n,e.subdivisionGranularity)}}update(e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,$p),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Up.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,r,n,i,o,a){for(let s of Yt(r,Sb)){let l={x:0,y:0,sampleCount:0},u=this.layoutVertexArray.length;this.processPolygon(l,i,e,s,a);let c=this.layoutVertexArray.length-u,p=Math.floor(l.x/l.sampleCount),f=Math.floor(l.y/l.sampleCount);for(let y=0;y<c;y++)this.centroidVertexArray.emplaceBack(p,f)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,i)}processPolygon(e,r,n,i,o){if(i.length<1||Zp(i[0]))return;for(let p of i)p.length!==0&&wb(e,p);let a={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},s=o.fill.getGranularityForZoomLevel(r.z),l=Pb[n.type]==="Polygon";for(let p of i){if(p.length===0||Zp(p))continue;let f=Ke(p,s,l);this._generateSideFaces(f,a)}if(!l)return;let u=da(i,r,s,!1),c=this.layoutVertexArray;ga((p,f)=>{fi(c,p,f,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,u.verticesFlattened,u.indicesTriangles)}_generateSideFaces(e,r){let n=0;for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(Ab(o,a))continue;r.segment.vertexLength+4>pe.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let s=o.sub(a)._perp()._unit(),l=a.dist(o);n+l>32768&&(n=0),fi(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,0,n),fi(this.layoutVertexArray,o.x,o.y,s.x,s.y,0,1,n),n+=l,fi(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,0,n),fi(this.layoutVertexArray,a.x,a.y,s.x,s.y,0,1,n);let u=r.segment.vertexLength;this.indexArray.emplaceBack(u,u+2,u+1),this.indexArray.emplaceBack(u+1,u+2,u+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}};function wb(t,e){for(let r=0;r<e.length;r++){let n=e[r];r===e.length-1&&e[0].x===n.x&&e[0].y===n.y||(t.x+=n.x,t.y+=n.y,t.sampleCount++)}}I("FillExtrusionBucket",cr,{omit:["layers","features"]});function Ab(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}function Zp(t){return t.every(e=>e.x<0)||t.every(e=>e.x>8192)||t.every(e=>e.y<0)||t.every(e=>e.y>8192)}var Yp,_b=()=>Yp=Yp||new ee({"fill-extrusion-opacity":new F(P["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new L(P["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new F(P["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new F(P["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new pt(P["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new L(P["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new L(P["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new F(P["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Kp={get paint(){return _b()}};var va=Y(ye(),1);var Pa=class extends oe{constructor(e){super(e,Kp)}createBucket(e){return new cr(e)}queryRadius(){return Dt(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:n,geometry:i,transform:o,pixelsToTileUnits:a,pixelPosMatrix:s}){let l=Bt(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-o.bearingInRadians,a),u=this.paint.get("fill-extrusion-height").evaluate(r,n),c=this.paint.get("fill-extrusion-base").evaluate(r,n),p=Cb(l,s,0),f=Tb(i,c,u,s),y=f[0],m=f[1];return Ib(y,m,p)}};function yi(t,e){return t.x*e.x+t.y*e.y}function Qp(t,e){if(t.length===1){let r=0,n=e[r++],i;for(;!i||n.equals(i);)if(i=e[r++],!i)return 1/0;for(;r<e.length;r++){let o=e[r],a=t[0],s=i.sub(n),l=o.sub(n),u=a.sub(n),c=yi(s,s),p=yi(s,l),f=yi(l,l),y=yi(u,s),m=yi(u,l),h=c*f-p*p,g=(f*y-p*m)/h,d=(c*m-p*y)/h,x=1-g-d,b=n.z*x+i.z*g+o.z*d;if(isFinite(b))return b}return 1/0}else{let r=1/0;for(let n of e)r=Math.min(r,n.z);return r}}function Ib(t,e,r){let n=1/0;aa(r,e)&&(n=Qp(r,e[0]));for(let i=0;i<e.length;i++){let o=e[i],a=t[i];for(let s=0;s<o.length-1;s++){let l=o[s],u=o[s+1],c=a[s],p=a[s+1],f=[l,u,p,c,l];mp(r,f)&&(n=Math.min(n,Qp(r,f)))}}return n===1/0?!1:n}function Tb(t,e,r,n){let i=[],o=[],a=n[8]*e,s=n[9]*e,l=n[10]*e,u=n[11]*e,c=n[8]*r,p=n[9]*r,f=n[10]*r,y=n[11]*r;for(let m of t){let h=[],g=[];for(let d of m){let x=d.x,b=d.y,v=n[0]*x+n[4]*b+n[12],S=n[1]*x+n[5]*b+n[13],A=n[2]*x+n[6]*b+n[14],w=n[3]*x+n[7]*b+n[15],T=v+a,E=S+s,D=A+l,B=w+u,z=v+c,M=S+p,_=A+f,V=w+y,G=new va.default(T/B,E/B);G.z=D/B,h.push(G);let O=new va.default(z/V,M/V);O.z=_/V,g.push(O)}i.push(h),o.push(g)}return[i,o]}function Cb(t,e,r){let n=[];for(let i of t){let o=[i.x,i.y,r,1];Wi.transformMat4(o,o,e),n.push(new va.default(o[0]/o[3],o[1]/o[3]))}return n}var kb=Q([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ef,size:fw,alignment:yw}=kb;var Fb=Q([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:tf,size:dw,alignment:gw}=Fb;var of=Y(Rt(),1);var Eb=of.default.VectorTileFeature.types,rf=63,Mb=Math.cos(75/2*(Math.PI/180)),Lb=15,Db=20,Bb=15,af=1/2,nf=Math.pow(2,Bb-1)/af,pr=class{constructor(e){this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Zo,this.layoutVertexArray2=new Jo,this.indexArray=new Le,this.programConfigurations=new Ae(e.layers,e.zoom),this.segments=new pe,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n){this.hasPattern=Lr("line",this.layers,r);let i=this.layers[0].layout.get("line-sort-key"),o=!i.isConstant(),a=[];for(let{feature:s,id:l,index:u,sourceLayerIndex:c}of e){let p=this.layers[0]._featureFilter.needGeometry,f=Ne(s,p);if(!this.layers[0]._featureFilter.filter(new W(this.zoom,{globalState:this.globalState}),f,n))continue;let y=o?i.evaluate(f,{},n):void 0,m={id:l,properties:s.properties,type:s.type,sourceLayerIndex:c,index:u,geometry:p?f.geometry:_e(s),patterns:{},sortKey:y};a.push(m)}o&&a.sort((s,l)=>s.sortKey-l.sortKey);for(let s of a){let{geometry:l,index:u,sourceLayerIndex:c}=s;if(this.hasPattern){let f=Dr("line",this.layers,s,this.zoom,r);this.patternFeatures.push(f)}else this.addFeature(s,l,u,n,{},r.subdivisionGranularity);let p=e[u].feature;r.featureIndex.insert(p,l,u,c,this.index)}}update(e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n)}addFeatures(e,r,n){for(let i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,r,n,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,tf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ef),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end")){let r=+e.properties.mapbox_clip_start,n=+e.properties.mapbox_clip_end;return{start:r,end:n}}}addFeature(e,r,n,i,o,a){let s=this.layers[0].layout,l=s.get("line-join").evaluate(e,{}),u=s.get("line-cap"),c=s.get("line-miter-limit"),p=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(let f of r)this.addLine(f,e,l,u,c,p,i,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,o,i)}addLine(e,r,n,i,o,a,s,l){this.distance=0,this.scaledDistance=0,this.totalDistance=0;let u=s?l.line.getGranularityForZoomLevel(s.z):1;if(e=Ke(e,u),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let v=0;v<e.length-1;v++)this.totalDistance+=e[v].dist(e[v+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let c=Eb[r.type]==="Polygon",p=e.length;for(;p>=2&&e[p-1].equals(e[p-2]);)p--;let f=0;for(;f<p-1&&e[f].equals(e[f+1]);)f++;if(p<(c?3:2))return;n==="bevel"&&(o=1.05);let y=this.overscaling<=16?Lb*8192/(512*this.overscaling):0,m=this.segments.prepareSegment(p*10,this.layoutVertexArray,this.indexArray),h,g,d,x,b;this.e1=this.e2=-1,c&&(h=e[p-2],b=e[f].sub(h)._unit()._perp());for(let v=f;v<p;v++){if(d=v===p-1?c?e[f+1]:void 0:e[v+1],d&&e[v].equals(d))continue;b&&(x=b),h&&(g=h),h=e[v],b=d?d.sub(h)._unit()._perp():x,x=x||b;let S=x.add(b);(S.x!==0||S.y!==0)&&S._unit();let A=x.x*b.x+x.y*b.y,w=S.x*b.x+S.y*b.y,T=w!==0?1/w:1/0,E=2*Math.sqrt(2-2*w),D=w<Mb&&g&&d,B=x.x*b.y-x.y*b.x>0;if(D&&v>f){let _=h.dist(g);if(_>2*y){let V=h.sub(h.sub(g)._mult(y/_)._round());this.updateDistance(g,V),this.addCurrentVertex(V,x,0,0,m),g=V}}let z=g&&d,M=z?n:c?"butt":i;if(z&&M==="round"&&(T<a?M="miter":T<=2&&(M="fakeround")),M==="miter"&&T>o&&(M="bevel"),M==="bevel"&&(T>2&&(M="flipbevel"),T<o&&(M="miter")),g&&this.updateDistance(g,h),M==="miter")S._mult(T),this.addCurrentVertex(h,S,0,0,m);else if(M==="flipbevel"){if(T>100)S=b.mult(-1);else{let _=T*x.add(b).mag()/x.sub(b).mag();S._perp()._mult(_*(B?-1:1))}this.addCurrentVertex(h,S,0,0,m),this.addCurrentVertex(h,S.mult(-1),0,0,m)}else if(M==="bevel"||M==="fakeround"){let _=-Math.sqrt(T*T-1),V=B?_:0,G=B?0:_;if(g&&this.addCurrentVertex(h,x,V,G,m),M==="fakeround"){let O=Math.round(E*180/Math.PI/Db);for(let R=1;R<O;R++){let K=R/O;if(K!==.5){let re=K-.5,me=1.0904+A*(-3.2452+A*(3.55645-A*1.43519)),Ut=.848013+A*(-1.06021+A*.215638);K=K+K*re*(K-1)*(me*re*re+Ut)}let X=b.sub(x)._mult(K)._add(x)._unit()._mult(B?-1:1);this.addHalfVertex(h,X.x,X.y,!1,B,0,m)}}d&&this.addCurrentVertex(h,b,-V,-G,m)}else if(M==="butt")this.addCurrentVertex(h,S,0,0,m);else if(M==="square"){let _=g?1:-1;this.addCurrentVertex(h,S,_,_,m)}else M==="round"&&(g&&(this.addCurrentVertex(h,x,0,0,m),this.addCurrentVertex(h,x,1,1,m,!0)),d&&(this.addCurrentVertex(h,b,-1,-1,m,!0),this.addCurrentVertex(h,b,0,0,m)));if(D&&v<p-1){let _=h.dist(d);if(_>2*y){let V=h.add(d.sub(h)._mult(y/_)._round());this.updateDistance(h,V),this.addCurrentVertex(V,b,0,0,m),h=V}}}}addCurrentVertex(e,r,n,i,o,a=!1){let s=r.x+r.y*n,l=r.y-r.x*n,u=-r.x+r.y*i,c=-r.y-r.x*i;this.addHalfVertex(e,s,l,a,!1,n,o),this.addHalfVertex(e,u,c,a,!0,-i,o),this.distance>nf/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,r,n,i,o,a))}addHalfVertex({x:e,y:r},n,i,o,a,s,l){let c=(this.lineClips?this.scaledDistance*(nf-1):this.scaledDistance)*af;if(this.layoutVertexArray.emplaceBack((e<<1)+(o?1:0),(r<<1)+(a?1:0),Math.round(rf*n)+128,Math.round(rf*i)+128,(s===0?0:s<0?-1:1)+1|(c&63)<<2,c>>6),this.lineClips){let f=this.scaledDistance-this.lineClips.start,y=this.lineClips.end-this.lineClips.start,m=f/y;this.layoutVertexArray2.emplaceBack(m,this.lineClipsArray.length)}let p=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,p,this.e2),l.primitiveLength++),a?this.e2=p:this.e1=p}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}};I("LineBucket",pr,{omit:["layers","patternFeatures"]});var sf,Vb=()=>sf=sf||new ee({"line-cap":new F(P.layout_line["line-cap"]),"line-join":new L(P.layout_line["line-join"]),"line-miter-limit":new F(P.layout_line["line-miter-limit"]),"line-round-limit":new F(P.layout_line["line-round-limit"]),"line-sort-key":new L(P.layout_line["line-sort-key"])}),lf,Rb=()=>lf=lf||new ee({"line-opacity":new L(P.paint_line["line-opacity"]),"line-color":new L(P.paint_line["line-color"]),"line-translate":new F(P.paint_line["line-translate"]),"line-translate-anchor":new F(P.paint_line["line-translate-anchor"]),"line-width":new L(P.paint_line["line-width"]),"line-gap-width":new L(P.paint_line["line-gap-width"]),"line-offset":new L(P.paint_line["line-offset"]),"line-blur":new L(P.paint_line["line-blur"]),"line-dasharray":new tr(P.paint_line["line-dasharray"]),"line-pattern":new pt(P.paint_line["line-pattern"]),"line-gradient":new ft(P.paint_line["line-gradient"])}),xl={get paint(){return Rb()},get layout(){return Vb()}};var vl=class extends L{possiblyEvaluate(e,r){return r=new W(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(e,r)}evaluate(e,r,n,i){return r=de({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(e,r,n,i)}},Sa;var wa=class extends oe{constructor(e){super(e,xl),this.gradientVersion=0,Sa||(Sa=new vl(xl.paint.properties["line-width"].specification),Sa.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){let r=this.gradientExpression();fc(r)?this.stepInterpolant=r._styleExpression.expression instanceof Pr:this.stepInterpolant=!1,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,r){super.recalculate(e,r),this.paint._values["line-floorwidth"]=Sa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new pr(e)}queryRadius(e){let r=e,n=uf(ar("line-width",this,r),ar("line-gap-width",this,r)),i=ar("line-offset",this,r);return n/2+Math.abs(i)+Dt(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:n,geometry:i,transform:o,pixelsToTileUnits:a}){let s=Bt(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-o.bearingInRadians,a),l=a/2*uf(this.paint.get("line-width").evaluate(r,n),this.paint.get("line-gap-width").evaluate(r,n)),u=this.paint.get("line-offset").evaluate(r,n);return u&&(i=bp(i,u*a)),dp(s,i,l)}isTileClipped(){return!0}};function uf(t,e){return e>0?e+2*t:t}var cf=Q([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pf=Q([{name:"a_projected_pos",components:3,type:"Float32"}],4),Zw=Q([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ff=Q([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]),Jw=Q([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Pl=Q([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yw=Q([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),Kw=Q([{name:"triangle",components:3,type:"Uint16"}]),Qw=Q([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),eA=Q([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),tA=Q([{type:"Float32",name:"offsetX"}]),rA=Q([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),nA=Q([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var vi=Y(ye(),1);function zb(t,e,r){let n=e.layout.get("text-transform").evaluate(r,{});return n==="uppercase"?t=t.toLocaleUpperCase():n==="lowercase"&&(t=t.toLocaleLowerCase()),we.applyArabicShaping&&(t=we.applyArabicShaping(t)),t}function yf(t,e,r){return t.sections.forEach(n=>{n.text=zb(n.text,e,r)}),t}function mf(t){let e={},r={},n=[],i=0;function o(u){n.push(t[u]),i++}function a(u,c,p){let f=r[u];return delete r[u],r[c]=f,n[f].geometry[0].pop(),n[f].geometry[0]=n[f].geometry[0].concat(p[0]),f}function s(u,c,p){let f=e[c];return delete e[c],e[u]=f,n[f].geometry[0].shift(),n[f].geometry[0]=p[0].concat(n[f].geometry[0]),f}function l(u,c,p){let f=p?c[0][c[0].length-1]:c[0][0];return`${u}:${f.x}:${f.y}`}for(let u=0;u<t.length;u++){let c=t[u],p=c.geometry,f=c.text?c.text.toString():null;if(!f){o(u);continue}let y=l(f,p),m=l(f,p,!0);if(y in r&&m in e&&r[y]!==e[m]){let h=s(y,m,p),g=a(y,m,n[h].geometry);delete e[y],delete r[m],r[l(f,n[g].geometry,!0)]=g,n[h].geometry=null}else y in r?a(y,m,p):m in e?s(y,m,p):(o(u),e[y]=i-1,r[m]=i-1)}return n.filter(u=>u.geometry)}var zr={"!":"\\uFE15","#":"\\uFF03",$:"\\uFF04","%":"\\uFF05","&":"\\uFF06","(":"\\uFE35",")":"\\uFE36","*":"\\uFF0A","+":"\\uFF0B",",":"\\uFE10","-":"\\uFE32",".":"\\u30FB","/":"\\uFF0F",":":"\\uFE13",";":"\\uFE14","<":"\\uFE3F","=":"\\uFF1D",">":"\\uFE40","?":"\\uFE16","@":"\\uFF20","[":"\\uFE47","\\\\":"\\uFF3C","]":"\\uFE48","^":"\\uFF3E",_:"\\uFE33","`":"\\uFF40","{":"\\uFE37","|":"\\u2015","}":"\\uFE38","~":"\\uFF5E","\\xA2":"\\uFFE0","\\xA3":"\\uFFE1","\\xA5":"\\uFFE5","\\xA6":"\\uFFE4","\\xAC":"\\uFFE2","\\xAF":"\\uFFE3","\\u2013":"\\uFE32","\\u2014":"\\uFE31","\\u2018":"\\uFE43","\\u2019":"\\uFE44","\\u201C":"\\uFE41","\\u201D":"\\uFE42","\\u2026":"\\uFE19","\\u2027":"\\u30FB","\\u20A9":"\\uFFE6","\\u3001":"\\uFE11","\\u3002":"\\uFE12","\\u3008":"\\uFE3F","\\u3009":"\\uFE40","\\u300A":"\\uFE3D","\\u300B":"\\uFE3E","\\u300C":"\\uFE41","\\u300D":"\\uFE42","\\u300E":"\\uFE43","\\u300F":"\\uFE44","\\u3010":"\\uFE3B","\\u3011":"\\uFE3C","\\u3014":"\\uFE39","\\u3015":"\\uFE3A","\\u3016":"\\uFE17","\\u3017":"\\uFE18","\\uFF01":"\\uFE15","\\uFF08":"\\uFE35","\\uFF09":"\\uFE36","\\uFF0C":"\\uFE10","\\uFF0D":"\\uFE32","\\uFF0E":"\\u30FB","\\uFF1A":"\\uFE13","\\uFF1B":"\\uFE14","\\uFF1C":"\\uFE3F","\\uFF1E":"\\uFE40","\\uFF1F":"\\uFE16","\\uFF3B":"\\uFE47","\\uFF3D":"\\uFE48","\\uFF3F":"\\uFE33","\\uFF5B":"\\uFE37","\\uFF5C":"\\u2015","\\uFF5D":"\\uFE38","\\uFF5F":"\\uFE35","\\uFF60":"\\uFE36","\\uFF61":"\\uFE12","\\uFF62":"\\uFE41","\\uFF63":"\\uFE42"};function hf(t){let e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r+1)||null,i=t.charCodeAt(r-1)||null;(!n||!Ys(n)||zr[t[r+1]])&&(!i||!Ys(i)||zr[t[r-1]])&&zr[t[r]]?e+=zr[t[r]]:e+=t[r]}return e}var ae=24;var rx=Y(mi(),1),nx=3;var Ia=nx;function hi(t){let e=0,r=0;for(let s of t)e+=s.w*s.h,r=Math.max(r,s.w);t.sort((s,l)=>l.h-s.h);let i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}],o=0,a=0;for(let s of t)for(let l=i.length-1;l>=0;l--){let u=i[l];if(!(s.w>u.w||s.h>u.h)){if(s.x=u.x,s.y=u.y,a=Math.max(a,s.y+s.h),o=Math.max(o,s.x+s.w),s.w===u.w&&s.h===u.h){let c=i.pop();l<i.length&&(i[l]=c)}else s.h===u.h?(u.x+=s.w,u.w-=s.w):s.w===u.w?(u.y+=s.h,u.h-=s.h):(i.push({x:u.x+s.w,y:u.y,w:u.w-s.w,h:s.h}),u.y+=s.h,u.h-=s.h);break}}return{w:o,h:a,fill:e/(o*a)||0}}var he=1;var Ta=class{constructor(e,{pixelRatio:r,version:n,stretchX:i,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=i,this.stretchY=o,this.content=a,this.version=n,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+he,this.paddedRect.y+he]}get br(){return[this.paddedRect.x+this.paddedRect.w-he,this.paddedRect.y+this.paddedRect.h-he]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-he*2)/this.pixelRatio,(this.paddedRect.h-he*2)/this.pixelRatio]}},di=class{constructor(e,r){let n={},i={};this.haveRenderCallbacks=[];let o=[];this.addImages(e,n,o),this.addImages(r,i,o);let{w:a,h:s}=hi(o),l=new fe({width:a||1,height:s||1});for(let u in e){let c=e[u],p=n[u].paddedRect;fe.copy(c.data,l,{x:0,y:0},{x:p.x+he,y:p.y+he},c.data)}for(let u in r){let c=r[u],p=i[u].paddedRect,f=p.x+he,y=p.y+he,m=c.data.width,h=c.data.height;fe.copy(c.data,l,{x:0,y:0},{x:f,y},c.data),fe.copy(c.data,l,{x:0,y:h-1},{x:f,y:y-1},{width:m,height:1}),fe.copy(c.data,l,{x:0,y:0},{x:f,y:y+h},{width:m,height:1}),fe.copy(c.data,l,{x:m-1,y:0},{x:f-1,y},{width:1,height:h}),fe.copy(c.data,l,{x:0,y:0},{x:f+m,y},{width:1,height:h})}this.image=l,this.iconPositions=n,this.patternPositions=i}addImages(e,r,n){for(let i in e){let o=e[i],a={x:0,y:0,w:o.data.width+2*he,h:o.data.height+2*he};n.push(a),r[i]=new Ta(a,o),o.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,r){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),r),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),r)}patchUpdatedImage(e,r,n){if(!e||!r||e.version===r.version)return;e.version=r.version;let[i,o]=e.tl;n.update(r.data,void 0,{x:i,y:o})}};I("ImagePosition",Ta);I("ImageAtlas",di);var Fa=(i=>(i[i.none=0]="none",i[i.horizontal=1]="horizontal",i[i.vertical=2]="vertical",i[i.horizontalOnly=3]="horizontalOnly",i))(Fa||{}),bi=-17;function ix(t){for(let e of t)if(e.positionedGlyphs.length!==0)return!1;return!0}var Sf=57344,wf=63743,Ca=class t{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(e,r,n){let i=new t;return i.scale=e||1,i.fontStack=r,i.verticalAlign=n||"bottom",i}static forImage(e,r){let n=new t;return n.imageName=e,n.verticalAlign=r||"bottom",n}},gi=class t{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){let n=new t;for(let i=0;i<e.sections.length;i++){let o=e.sections[i];o.image?n.addImageSection(o):n.addTextSection(o,r)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=hf(this.text)}trim(){let e=0;for(let n=0;n<this.text.length&&ka[this.text.charCodeAt(n)];n++)e++;let r=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&ka[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){let n=new t;return n.text=this.text.substring(e,r),n.sectionIndex=this.sectionIndex.slice(e,r),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}getMaxImageSize(e){let r=0,n=0;for(let i=0;i<this.length();i++){let o=this.getSection(i);if(o.imageName){let a=e[o.imageName];if(!a)continue;let s=a.displaySize;r=Math.max(r,s[0]),n=Math.max(n,s[1])}}return{maxImageWidth:r,maxImageHeight:n}}addTextSection(e,r){this.text+=e.text,this.sections.push(Ca.forText(e.scale,e.fontStack||r,e.verticalAlign));let n=this.sections.length-1;for(let i=0;i<e.text.length;++i)this.sectionIndex.push(n)}addImageSection(e){let r=e.image?e.image.name:"";if(r.length===0){ce("Can\'t add FormattedSection with an empty image.");return}let n=this.getNextImageSectionCharCode();if(!n){ce(`Reached maximum number of images ${wf-Sf+2}`);return}this.text+=String.fromCharCode(n),this.sections.push(Ca.forImage(r,e.verticalAlign)),this.sectionIndex.push(this.sections.length-1)}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=wf?null:++this.imageSectionID:(this.imageSectionID=Sf,this.imageSectionID)}};function ox(t,e){let r=[],n=t.text,i=0;for(let o of e)r.push(t.substring(i,o)),i=o;return i<n.length&&r.push(t.substring(i,n.length)),r}function xi(t,e,r,n,i,o,a,s,l,u,c,p,f,y,m){let h=gi.fromFeature(t,i);p===2&&h.verticalizePunctuation();let g,{processBidirectionalText:d,processStyledBidirectionalText:x}=we;if(d&&h.sections.length===1){g=[];let S=d(h.toString(),Al(h,u,o,e,n,y));for(let A of S){let w=new gi;w.text=A,w.sections=h.sections;for(let T=0;T<A.length;T++)w.sectionIndex.push(0);g.push(w)}}else if(x){g=[];let S=x(h.text,h.sectionIndex,Al(h,u,o,e,n,y));for(let A of S){let w=new gi;w.text=A[0],w.sectionIndex=A[1],w.sections=h.sections,g.push(w)}}else g=ox(h,Al(h,u,o,e,n,y));let b=[],v={positionedLines:b,text:h.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return yx(v,e,r,n,g,a,s,l,p,u,f,m),ix(b)?!1:v}var ka={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ax={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},sx={40:!0};function If(t,e,r,n,i,o){if(e.imageName){let a=n[e.imageName];return a?a.displaySize[0]*e.scale*ae/o+i:0}else{let a=r[e.fontStack],s=a&&a[t];return s?s.metrics.advance*e.scale+i:0}}function lx(t,e,r,n,i,o){let a=0;for(let l=0;l<t.length();l++){let u=t.getSection(l);a+=If(t.getCharCode(l),u,n,i,e,o)}let s=Math.max(1,Math.ceil(a/r));return a/s}function Af(t,e,r,n){let i=Math.pow(t-e,2);return n?t<e?i/2:i*2:i+Math.abs(r)*r}function ux(t,e,r){let n=0;return t===10&&(n-=1e4),r&&(n+=150),(t===40||t===65288)&&(n+=50),(e===41||e===65289)&&(n+=50),n}function _f(t,e,r,n,i,o){let a=null,s=Af(e,r,i,o);for(let l of n){let u=e-l.x,c=Af(u,r,i,o)+l.badness;c<=s&&(a=l,s=c)}return{index:t,x:e,priorBreak:a,badness:s}}function Tf(t){return t?Tf(t.priorBreak).concat(t.index):[]}function Al(t,e,r,n,i,o){if(!t)return[];let a=[],s=lx(t,e,r,n,i,o),l=t.text.indexOf("\\u200B")>=0,u=0;for(let c=0;c<t.length();c++){let p=t.getSection(c),f=t.getCharCode(c);if(ka[f]||(u+=If(f,p,n,i,e,o)),c<t.length()-1){let y=Yc(f);(ax[f]||y||p.imageName||c!==t.length()-2&&sx[t.getCharCode(c+1)])&&a.push(_f(c+1,u,s,a,ux(f,t.getCharCode(c+1),y&&l),!1))}}return Tf(_f(t.length(),u,s,a,0,!0))}function Cf(t){let e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0;break}return{horizontalAlign:e,verticalAlign:r}}function cx(t,e,r){let n=e.getMaxScale()*ae,{maxImageWidth:i,maxImageHeight:o}=e.getMaxImageSize(t),a=Math.max(n,o*r);return{verticalLineContentWidth:Math.max(n,i*r),horizontalLineContentHeight:a}}function kf(t){switch(t){case"top":return 0;case"center":return .5;default:return 1}}function px(t,e,r,n){if(t&&t.rect)return t;let i=e[r.fontStack],o=i&&i[n];return o?{rect:null,metrics:o.metrics}:null}function fx(t,e,r){return!(t===1||!e&&!Eo(r)||e&&(ka[r]||Kc(r)))}function yx(t,e,r,n,i,o,a,s,l,u,c,p){let f=0,y=0,m=0,h=0,g=s==="right"?1:s==="left"?0:.5,d=ae/p,x=0;for(let S of i){S.trim();let A=S.getMaxScale(),w={positionedGlyphs:[],lineOffset:0};t.positionedLines[x]=w;let T=w.positionedGlyphs,E=0;if(!S.length()){y+=o,++x;continue}let D=cx(n,S,d);for(let M=0;M<S.length();M++){let _=S.getSection(M),V=S.getSectionIndex(M),G=S.getCharCode(M),O=fx(l,c,G),R;if(_.imageName){if(t.iconsInText=!0,_.scale=_.scale*d,R=hx(_,O,A,D,n),!R)continue;E=Math.max(E,R.imageOffset)}else if(R=mx(_,G,O,D,e,r),!R)continue;let{rect:K,metrics:X,baselineOffset:re}=R;if(T.push({glyph:G,imageName:_.imageName,x:f,y:y+re+bi,vertical:O,scale:_.scale,fontStack:_.fontStack,sectionIndex:V,metrics:X,rect:K}),!O)f+=X.advance*_.scale+u;else{t.verticalizable=!0;let me=_.imageName?X.advance:ae;f+=me*_.scale+u}}if(T.length!==0){let M=f-u;m=Math.max(M,m),dx(T,0,T.length-1,g)}f=0;let B=(A-1)*ae;w.lineOffset=Math.max(E,B);let z=o*A+E;y+=z,h=Math.max(z,h),++x}let{horizontalAlign:b,verticalAlign:v}=Cf(a);gx(t.positionedLines,g,b,v,m,h,o,y,i.length),t.top+=-v*y,t.bottom=t.top+y,t.left+=-b*m,t.right=t.left+m}function mx(t,e,r,n,i,o){let a=o[t.fontStack],s=a&&a[e],l=px(s,i,t,e);if(l===null)return null;let u;if(r)u=n.verticalLineContentWidth-t.scale*ae;else{let c=kf(t.verticalAlign);u=(n.horizontalLineContentHeight-t.scale*ae)*c}return{rect:l.rect,metrics:l.metrics,baselineOffset:u}}function hx(t,e,r,n,i){let o=i[t.imageName];if(!o)return null;let a=o.paddedRect,s=o.displaySize,l={width:s[0],height:s[1],left:he,top:-Ia,advance:e?s[1]:s[0]},u;if(e)u=n.verticalLineContentWidth-s[1]*t.scale;else{let p=kf(t.verticalAlign);u=(n.horizontalLineContentHeight-s[1]*t.scale)*p}let c=(e?s[0]:s[1])*t.scale-ae*r;return{rect:a,metrics:l,baselineOffset:u,imageOffset:c}}function dx(t,e,r,n){if(n===0)return;let i=t[r],o=i.metrics.advance*i.scale,a=(t[r].x+o)*n;for(let s=e;s<=r;s++)t[s].x-=a}function gx(t,e,r,n,i,o,a,s,l){let u=(e-r)*i,c=0;o!==a?c=-s*n-bi:c=-n*l*a+.5*a;for(let p of t)for(let f of p.positionedGlyphs)f.x+=u,f.y+=c}function Ff(t,e,r){let{horizontalAlign:n,verticalAlign:i}=Cf(r),o=e[0],a=e[1],s=o-t.displaySize[0]*n,l=s+t.displaySize[0],u=a-t.displaySize[1]*i,c=u+t.displaySize[1];return{image:t,top:u,bottom:c,left:s,right:l}}function Ea(t){let e=t.left,r=t.top,n=t.right-e,i=t.bottom-r,o=t.image.content[2]-t.image.content[0],a=t.image.content[3]-t.image.content[1],s=t.image.textFitWidth??"stretchOrShrink",l=t.image.textFitHeight??"stretchOrShrink",u=o/a;if(l==="proportional"){if(s==="stretchOnly"&&n/i<u||s==="proportional"){let c=Math.ceil(i*u);e*=c/n,n=c}}else if(s==="proportional"&&l==="stretchOnly"&&u!==0&&n/i>u){let c=Math.ceil(n/u);r*=c/i,i=c}return{x1:e,y1:r,x2:e+n,y2:r+i}}function _l(t,e,r,n,i,o){let a=t.image,s;if(a.content){let g=a.content,d=a.pixelRatio||1;s=[g[0]/d,g[1]/d,a.displaySize[0]-g[2]/d,a.displaySize[1]-g[3]/d]}let l=e.left*o,u=e.right*o,c,p,f,y;r==="width"||r==="both"?(y=i[0]+l-n[3],p=i[0]+u+n[1]):(y=i[0]+(l+u-a.displaySize[0])/2,p=y+a.displaySize[0]);let m=e.top*o,h=e.bottom*o;return r==="height"||r==="both"?(c=i[1]+m-n[0],f=i[1]+h+n[2]):(c=i[1]+(m+h-a.displaySize[1])/2,f=c+a.displaySize[1]),{image:a,top:c,right:p,bottom:f,left:y,collisionPadding:s}}var Ef=Y(Rt(),1);var Nr=255,zt=128,Qe=Nr*zt;function Il(t,e){let{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new W(t+1))};if(r.kind==="source")return{kind:"source"};{let{zoomStops:n,interpolationType:i}=r,o=0;for(;o<n.length&&n[o]<=t;)o++;o=Math.max(0,o-1);let a=o;for(;a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);let s=n[o],l=n[a];if(r.kind==="composite")return{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i};let u=r.evaluate(new W(s)),c=r.evaluate(new W(l));return{kind:"camera",minZoom:s,maxZoom:l,minSize:u,maxSize:c,interpolationType:i}}}function Tl(t,e,r){let n="never",i=t.get(e);return i?n=i:t.get(r)&&(n="always"),n}var bx=Ef.default.VectorTileFeature.types,xx=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ma(t,e,r,n,i,o,a,s,l,u,c,p,f){let y=s?Math.min(Qe,Math.round(s[0])):0,m=s?Math.min(Qe,Math.round(s[1])):0;t.emplaceBack(e,r,Math.round(n*32),Math.round(i*32),o,a,(y<<1)+(l?1:0),m,u*16,c*16,p*256,f*256)}function Mf(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r)}function vx(t){for(let e of t.sections)if(ep(e.text))return!0;return!1}var Pi=class{constructor(e){this.layoutVertexArray=new Yo,this.indexArray=new Le,this.programConfigurations=e,this.segments=new pe,this.dynamicLayoutVertexArray=new Ko,this.opacityVertexArray=new Qo,this.hasVisibleVertices=!1,this.placedSymbolArray=new qn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,pf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,xx,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}};I("SymbolBuffers",Pi);var Si=class{constructor(e,r,n){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new n,this.segments=new pe,this.collisionVertexArray=new ea}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ff.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}};I("CollisionBuffers",Si);var Xe=class{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.globalState=e.globalState,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(l=>l.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Il(this.zoom,n["text-size"]),this.iconSizeData=Il(this.zoom,n["icon-size"]);let i=this.layers[0].layout,o=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=Tl(i,"text-overlap","text-allow-overlap")!=="never"||Tl(i,"icon-overlap","icon-allow-overlap")!=="never"||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=a!=="viewport-y"&&!o.isConstant();let s=a==="viewport-y"||a==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=s&&this.canOverlap,i.get("symbol-placement")==="point"&&(this.writingModes=i.get("text-writing-mode").map(l=>Fa[l])),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.sourceID=e.sourceID}createArrays(){this.text=new Pi(new Ae(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Pi(new Ae(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new Xn,this.lineVertexArray=new Hn,this.symbolInstances=new Wn,this.textAnchorOffsets=new Zn}calculateGlyphDependencies(e,r,n,i,o){for(let a=0;a<e.length;a++)if(r[e.charCodeAt(a)]=!0,(n||i)&&o){let s=zr[e.charAt(a)];s&&(r[s.charCodeAt(0)]=!0)}}populate(e,r,n){let i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=(s.value.kind!=="constant"||s.value.value instanceof Fe&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&(a.value.kind!=="constant"||a.value.value.length>0),c=l.value.kind!=="constant"||!!l.value.value||Object.keys(l.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],!u&&!c)return;let f=r.iconDependencies,y=r.glyphDependencies,m=r.availableImages,h=new W(this.zoom,{globalState:this.globalState});for(let{feature:g,id:d,index:x,sourceLayerIndex:b}of e){let v=i._featureFilter.needGeometry,S=Ne(g,v);if(!i._featureFilter.filter(h,S,n))continue;v||(S.geometry=_e(g));let A;if(u){let D=i.getValueAndResolveTokens("text-field",S,n,m),B=Fe.factory(D),z=this.hasRTLText=this.hasRTLText||vx(B);(!z||we.getRTLTextPluginStatus()==="unavailable"||z&&we.isParsed())&&(A=yf(B,i,S))}let w;if(c){let D=i.getValueAndResolveTokens("icon-image",S,n,m);D instanceof Se?w=D:w=Se.fromString(D)}if(!A&&!w)continue;let T=this.sortFeaturesByKey?p.evaluate(S,{},n):void 0,E={id:d,text:A,icon:w,index:x,sourceLayerIndex:b,geometry:S.geometry,properties:g.properties,type:bx[g.type],sortKey:T};if(this.features.push(E),w&&(f[w.name]=!0),A){let D=a.evaluate(S,{},n).join(","),B=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(2)>=0;for(let z of A.sections)if(z.image)f[z.image.name]=!0;else{let M=In(A.toString()),_=z.fontStack||D,V=y[_]=y[_]||{};this.calculateGlyphDependencies(z.text,V,B,this.allowVerticalPlacement,M)}}}o.get("symbol-placement")==="line"&&(this.features=mf(this.features)),this.sortFeaturesByKey&&this.features.sort((g,d)=>g.sortKey-d.sortKey)}update(e,r,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,n))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){let n=this.lineVertexArray.length;if(e.segment!==void 0){let i=e.dist(r[e.segment+1]),o=e.dist(r[e.segment]),a={};for(let s=e.segment+1;s<r.length;s++)a[s]={x:r[s].x,y:r[s].y,tileUnitDistanceFromAnchor:i},s<r.length-1&&(i+=r[s+1].dist(r[s]));for(let s=e.segment||0;s>=0;s--)a[s]={x:r[s].x,y:r[s].y,tileUnitDistanceFromAnchor:o},s>0&&(o+=r[s-1].dist(r[s]));for(let s=0;s<r.length;s++){let l=a[s];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,r,n,i,o,a,s,l,u,c,p,f){let y=e.indexArray,m=e.layoutVertexArray,h=e.segments.prepareSegment(4*r.length,m,y,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,d=h.vertexLength,x=this.allowVerticalPlacement&&s===2?Math.PI/2:0,b=a.text&&a.text.sections;for(let v=0;v<r.length;v++){let{tl:S,tr:A,bl:w,br:T,tex:E,pixelOffsetTL:D,pixelOffsetBR:B,minFontScaleX:z,minFontScaleY:M,glyphOffset:_,isSDF:V,sectionIndex:G}=r[v],O=h.vertexLength,R=_[1];Ma(m,l.x,l.y,S.x,R+S.y,E.x,E.y,n,V,D.x,D.y,z,M),Ma(m,l.x,l.y,A.x,R+A.y,E.x+E.w,E.y,n,V,B.x,D.y,z,M),Ma(m,l.x,l.y,w.x,R+w.y,E.x,E.y+E.h,n,V,D.x,B.y,z,M),Ma(m,l.x,l.y,T.x,R+T.y,E.x+E.w,E.y+E.h,n,V,B.x,B.y,z,M),Mf(e.dynamicLayoutVertexArray,l,x),y.emplaceBack(O,O+2,O+1),y.emplaceBack(O+1,O+2,O+3),h.vertexLength+=4,h.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_[0]),(v===r.length-1||G!==r[v+1].sectionIndex)&&e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},f,b&&b[G])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,d,u,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],s,0,!1,0,p)}_addCollisionDebugVertex(e,r,n,i,o,a){return r.emplaceBack(0,0),e.emplaceBack(n.x,n.y,i,o,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(e,r,n,i,o,a,s){let l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=l.vertexLength,c=o.layoutVertexArray,p=o.collisionVertexArray,f=s.anchorX,y=s.anchorY;this._addCollisionDebugVertex(c,p,a,f,y,new vi.default(e,r)),this._addCollisionDebugVertex(c,p,a,f,y,new vi.default(n,r)),this._addCollisionDebugVertex(c,p,a,f,y,new vi.default(n,i)),this._addCollisionDebugVertex(c,p,a,f,y,new vi.default(e,i)),l.vertexLength+=4;let m=o.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),l.primitiveLength+=4}addDebugCollisionBoxes(e,r,n,i){for(let o=e;o<r;o++){let a=this.collisionBoxArray.get(o),s=a.x1,l=a.y1,u=a.x2,c=a.y2;this.addCollisionDebugVertices(s,l,u,c,i?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Si(Yn,Pl.members,Mt),this.iconCollisionBox=new Si(Yn,Pl.members,Mt);for(let e=0;e<this.symbolInstances.length;e++){let r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(e,r,n,i,o,a,s,l,u){let c={};for(let p=r;p<n;p++){let f=e.get(p);c.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.textFeatureIndex=f.featureIndex;break}for(let p=i;p<o;p++){let f=e.get(p);c.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.verticalTextFeatureIndex=f.featureIndex;break}for(let p=a;p<s;p++){let f=e.get(p);c.iconBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.iconFeatureIndex=f.featureIndex;break}for(let p=l;p<u;p++){let f=e.get(p);c.verticalIconBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.verticalIconFeatureIndex=f.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){let n=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){let n=e.placedSymbolArray.get(r),i=n.vertexStartIndex+n.numGlyphs*4;for(let o=n.vertexStartIndex;o<i;o+=4)e.indexArray.emplaceBack(o,o+2,o+1),e.indexArray.emplaceBack(o+1,o+2,o+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let r=Math.sin(e),n=Math.cos(e),i=[],o=[],a=[];for(let s=0;s<this.symbolInstances.length;++s){a.push(s);let l=this.symbolInstances.get(s);i.push(Math.round(r*l.anchorX+n*l.anchorY)|0),o.push(l.featureIndex)}return a.sort((s,l)=>i[s]-i[l]||o[l]-o[s]),a}addToSortKeyRanges(e,r){let n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===r?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let r of this.symbolInstanceIndexes){let n=this.symbolInstances.get(r);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((i,o,a)=>{i>=0&&a.indexOf(i)===o&&this.addIndicesForPlacedSymbol(this.text,i)}),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}};I("SymbolBucket",Xe,{omit:["layers","collisionBoxArray","features","compareText"]});Xe.MAX_GLYPHS=65535;Xe.addDynamicAttributes=Mf;function Lf(t,e){return e.replace(/{([^{}]+)}/g,(r,n)=>t&&n in t?String(t[n]):"")}var Df,Px=()=>Df=Df||new ee({"symbol-placement":new F(P.layout_symbol["symbol-placement"]),"symbol-spacing":new F(P.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new F(P.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new L(P.layout_symbol["symbol-sort-key"]),"symbol-z-order":new F(P.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new F(P.layout_symbol["icon-allow-overlap"]),"icon-overlap":new F(P.layout_symbol["icon-overlap"]),"icon-ignore-placement":new F(P.layout_symbol["icon-ignore-placement"]),"icon-optional":new F(P.layout_symbol["icon-optional"]),"icon-rotation-alignment":new F(P.layout_symbol["icon-rotation-alignment"]),"icon-size":new L(P.layout_symbol["icon-size"]),"icon-text-fit":new F(P.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new F(P.layout_symbol["icon-text-fit-padding"]),"icon-image":new L(P.layout_symbol["icon-image"]),"icon-rotate":new L(P.layout_symbol["icon-rotate"]),"icon-padding":new L(P.layout_symbol["icon-padding"]),"icon-keep-upright":new F(P.layout_symbol["icon-keep-upright"]),"icon-offset":new L(P.layout_symbol["icon-offset"]),"icon-anchor":new L(P.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new F(P.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new F(P.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new F(P.layout_symbol["text-rotation-alignment"]),"text-field":new L(P.layout_symbol["text-field"]),"text-font":new L(P.layout_symbol["text-font"]),"text-size":new L(P.layout_symbol["text-size"]),"text-max-width":new L(P.layout_symbol["text-max-width"]),"text-line-height":new F(P.layout_symbol["text-line-height"]),"text-letter-spacing":new L(P.layout_symbol["text-letter-spacing"]),"text-justify":new L(P.layout_symbol["text-justify"]),"text-radial-offset":new L(P.layout_symbol["text-radial-offset"]),"text-variable-anchor":new F(P.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new L(P.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new L(P.layout_symbol["text-anchor"]),"text-max-angle":new F(P.layout_symbol["text-max-angle"]),"text-writing-mode":new F(P.layout_symbol["text-writing-mode"]),"text-rotate":new L(P.layout_symbol["text-rotate"]),"text-padding":new F(P.layout_symbol["text-padding"]),"text-keep-upright":new F(P.layout_symbol["text-keep-upright"]),"text-transform":new L(P.layout_symbol["text-transform"]),"text-offset":new L(P.layout_symbol["text-offset"]),"text-allow-overlap":new F(P.layout_symbol["text-allow-overlap"]),"text-overlap":new F(P.layout_symbol["text-overlap"]),"text-ignore-placement":new F(P.layout_symbol["text-ignore-placement"]),"text-optional":new F(P.layout_symbol["text-optional"])}),Bf,Sx=()=>Bf=Bf||new ee({"icon-opacity":new L(P.paint_symbol["icon-opacity"]),"icon-color":new L(P.paint_symbol["icon-color"]),"icon-halo-color":new L(P.paint_symbol["icon-halo-color"]),"icon-halo-width":new L(P.paint_symbol["icon-halo-width"]),"icon-halo-blur":new L(P.paint_symbol["icon-halo-blur"]),"icon-translate":new F(P.paint_symbol["icon-translate"]),"icon-translate-anchor":new F(P.paint_symbol["icon-translate-anchor"]),"text-opacity":new L(P.paint_symbol["text-opacity"]),"text-color":new L(P.paint_symbol["text-color"],{runtimeType:ze,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new L(P.paint_symbol["text-halo-color"]),"text-halo-width":new L(P.paint_symbol["text-halo-width"]),"text-halo-blur":new L(P.paint_symbol["text-halo-blur"]),"text-translate":new F(P.paint_symbol["text-translate"]),"text-translate-anchor":new F(P.paint_symbol["text-translate-anchor"])}),La={get paint(){return Sx()},get layout(){return Px()}};var wi=class{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:wr,this.defaultValue=e}evaluate(e){if(e.formattedSection){let r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){if(!this.defaultValue.isConstant()){let r=this.defaultValue.value;e(r._styleExpression.expression)}}outputDefined(){return!1}serialize(){return null}};I("FormatSectionOverride",wi,{omit:["defaultValue"]});var Da=class t extends oe{constructor(e){super(e,La)}recalculate(e,r){if(super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let n=this.layout.get("text-writing-mode");if(n){let i=[];for(let o of n)i.indexOf(o)<0&&i.push(o);this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,r,n,i){let o=this.layout.get(e).evaluate(r,{},n,i),a=this._unevaluatedLayout._values[e];return!a.isDataDriven()&&!wn(a.value)&&o?Lf(r.properties,o):o}createBucket(e){return new Xe(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let e of La.paint.overridableProperties){if(!t.hasPaintOverride(this.layout,e))continue;let r=this.paint.get(e),n=new wi(r),i=new Ht(n,r.property.specification),o=null;r.value.kind==="constant"||r.value.kind==="source"?o=new Je("source",i):o=new Tt("composite",i,r.value.zoomStops),this.paint._values[e]=new ge(r.property,o,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,n){return!this.layout||r.isDataDriven()||n.isDataDriven()?!1:t.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){let n=e.get("text-field"),i=La.paint.properties[r],o=!1,a=s=>{for(let l of s)if(i.overrides&&i.overrides.hasOverride(l)){o=!0;return}};if(n.value.kind==="constant"&&n.value.value instanceof Fe)a(n.value.value.sections);else if(n.value.kind==="source"){let s=u=>{if(!o)if(u instanceof _t&&ue(u.value)===Ar){let c=u.value;a(c.sections)}else u instanceof pn?a(u.sections):u.eachChild(s)},l=n.value;l._styleExpression&&s(l._styleExpression.expression)}return o}};function Vf(t,e,r,n=1){let i=t.get("icon-padding").evaluate(e,{},r),o=i&&i.values;return[o[0]*n,o[1]*n,o[2]*n,o[3]*n]}var Rf,wx=()=>Rf=Rf||new ee({"background-color":new F(P.paint_background["background-color"]),"background-pattern":new tr(P.paint_background["background-pattern"]),"background-opacity":new F(P.paint_background["background-opacity"])}),zf={get paint(){return wx()}};var Ba=class extends oe{constructor(e){super(e,zf)}};var Of,Ax=()=>Of=Of||new ee({"raster-opacity":new F(P.paint_raster["raster-opacity"]),"raster-hue-rotate":new F(P.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new F(P.paint_raster["raster-brightness-min"]),"raster-brightness-max":new F(P.paint_raster["raster-brightness-max"]),"raster-saturation":new F(P.paint_raster["raster-saturation"]),"raster-contrast":new F(P.paint_raster["raster-contrast"]),"raster-resampling":new F(P.paint_raster["raster-resampling"]),"raster-fade-duration":new F(P.paint_raster["raster-fade-duration"])}),Gf={get paint(){return Ax()}};var Va=class extends oe{constructor(e){super(e,Gf)}};var Ra=class extends oe{constructor(r){super(r,{});this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)};this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)};this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}};function Nf(t){if(t.type==="custom")return new Ra(t);switch(t.type){case"background":return new Ba(t);case"circle":return new la(t);case"color-relief":return new pa(t);case"fill":return new ba(t);case"fill-extrusion":return new Pa(t);case"heatmap":return new ua(t);case"hillshade":return new ca(t);case"line":return new wa(t);case"raster":return new Va(t);case"symbol":return new Da(t)}}var za=class{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(e,r){for(let i of e){this._layerConfigs[i.id]=i;let o=this._layers[i.id]=Nf(i);o._featureFilter=Ct(o.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(let i of r)delete this.keyCache[i],delete this._layerConfigs[i],delete this._layers[i];this.familiesBySource={};let n=dc(Object.values(this._layerConfigs),this.keyCache);for(let i of n){let o=i.map(p=>this._layers[p.id]),a=o[0];if(a.visibility==="none")continue;let s=a.source||"",l=this.familiesBySource[s];l||(l=this.familiesBySource[s]={});let u=a.sourceLayer||"_geojsonTileLayer",c=l[u];c||(c=l[u]=[]),c.push(o)}}};var fy=Y(Rt(),1),yy=Y(mi(),1);var Ur=class{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){let n=e[r];this._stringToNumber[n]=r,this._numberToString[r]=n}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can\'t be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}};var $f=Y(Rt(),1),jf=Y(mi(),1);var Oa=class{constructor(e,r,n,i,o){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=n,e._y=i,this.properties=e.properties,this.id=o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){let e={geometry:this.geometry};for(let r in this)r==="_geometry"||r==="_vectorTileFeature"||(e[r]=this[r]);return e}};var Ai=Y(ye(),1),fr=class t{constructor(){this.minX=1/0;this.maxX=-1/0;this.minY=1/0;this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){let r=new t;return r.extend(e(new Ai.default(this.minX,this.minY))),r.extend(e(new Ai.default(this.maxX,this.minY))),r.extend(e(new Ai.default(this.minX,this.maxY))),r.extend(e(new Ai.default(this.maxX,this.maxY))),r}static fromPoints(e){let r=new t;for(let n of e)r.extend(n);return r}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}};var _i=class{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new $t(8192,16,0),this.grid3D=new $t(8192,16,0),this.featureIndexArray=new Jn,this.promoteId=r}insert(e,r,n,i,o,a){let s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,o);let l=a?this.grid3D:this.grid;for(let u=0;u<r.length;u++){let c=r[u],p=[1/0,1/0,-1/0,-1/0];for(let f=0;f<c.length;f++){let y=c[f];p[0]=Math.min(p[0],y.x),p[1]=Math.min(p[1],y.y),p[2]=Math.max(p[2],y.x),p[3]=Math.max(p[3],y.y)}p[0]<8192&&p[1]<8192&&p[2]>=0&&p[3]>=0&&l.insert(s,p[0],p[1],p[2],p[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new $f.default.VectorTile(new jf.default(this.rawTileData)).layers,this.sourceLayerCoder=new Ur(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,r,n,i){this.loadVTLayers();let o=e.params,a=8192/e.tileSize/e.scale,s=Ct(o.filter),l=e.queryGeometry,u=e.queryPadding*a,c=fr.fromPoints(l),p=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),f=fr.fromPoints(e.cameraQueryGeometry).expandBy(u),y=this.grid3D.query(f.minX,f.minY,f.maxX,f.maxY,(g,d,x,b)=>gp(e.cameraQueryGeometry,g-u,d-u,x+u,b+u));for(let g of y)p.push(g);p.sort(_x);let m={},h;for(let g=0;g<p.length;g++){let d=p[g];if(d===h)continue;h=d;let x=this.featureIndexArray.get(d),b=null;this.loadMatchingFeature(m,x.bucketIndex,x.sourceLayerIndex,x.featureIndex,s,o.layers,o.availableImages,r,n,i,(v,S,A)=>(b||(b=_e(v)),S.queryIntersectsFeature({queryGeometry:l,feature:v,featureState:A,geometry:b,zoom:this.z,transform:e.transform,pixelsToTileUnits:a,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation})))}return m}loadMatchingFeature(e,r,n,i,o,a,s,l,u,c,p){let f=this.bucketLayerIDs[r];if(a&&!f.some(d=>a.has(d)))return;let y=this.sourceLayerCoder.decode(n),h=this.vtLayers[y].feature(i);if(o.needGeometry){let d=Ne(h,!0);if(!o.filter(new W(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!o.filter(new W(this.tileID.overscaledZ),h))return;let g=this.getId(h,y);for(let d=0;d<f.length;d++){let x=f[d];if(a&&!a.has(x))continue;let b=l[x];if(!b)continue;let v={};g&&c&&(v=c.getState(b.sourceLayer||"_geojsonTileLayer",g));let S=de({},u[x]);S.paint=Uf(S.paint,b.paint,h,v,s),S.layout=Uf(S.layout,b.layout,h,v,s);let A=!p||p(h,b,v);if(!A)continue;let w=new Oa(h,this.z,this.x,this.y,g);w.layer=S;let T=e[x];T===void 0&&(T=e[x]=[]),T.push({featureIndex:i,feature:w,intersectionZ:A})}}lookupSymbolFeatures(e,r,n,i,o,a,s,l){let u={};this.loadVTLayers();let c=Ct(o);for(let p of e)this.loadMatchingFeature(u,n,i,p,c,a,s,l,r);return u}hasLayer(e){for(let r of this.bucketLayerIDs)for(let n of r)if(e===n)return!0;return!1}getId(e,r){let n=e.id;if(this.promoteId){let i=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];n=e.properties[i],typeof n=="boolean"&&(n=Number(n)),n===void 0&&e.properties?.cluster&&this.promoteId&&(n=Number(e.properties.cluster_id))}return n}};I("FeatureIndex",_i,{omit:["rawTileData","sourceLayerCoder"]});function Uf(t,e,r,n,i){return tn(t,(o,a)=>{let s=e instanceof kt?e.get(a):null;return s&&s.evaluate?s.evaluate(r,n,i):s})}function _x(t,e){return e-t}var qf=Y(ye(),1);var et=class t extends qf.default{constructor(e,r,n,i){super(e,r),this.angle=n,i!==void 0&&(this.segment=i)}clone(){return new t(this.x,this.y,this.angle,this.segment)}};I("Anchor",et);function Cl(t,e,r,n,i){if(e.segment===void 0||r===0)return!0;let o=e,a=e.segment+1,s=0;for(;s>-r/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;let l=[],u=0;for(;s<r/2;){let c=t[a-1],p=t[a],f=t[a+1];if(!f)return!1;let y=c.angleTo(p)-p.angleTo(f);for(y=Math.abs((y+3*Math.PI)%(Math.PI*2)-Math.PI),l.push({distance:s,angleDelta:y}),u+=y;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=p.dist(f)}return!0}function Wf(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Xf(t,e,r){return t?3/5*e*r:0}function Hf(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Zf(t,e,r,n,i,o){let a=Xf(r,i,o),s=Hf(r,n)*o,l=0,u=Wf(t)/2;for(let c=0;c<t.length-1;c++){let p=t[c],f=t[c+1],y=p.dist(f);if(l+y>u){let m=(u-l)/y,h=lt.number(p.x,f.x,m),g=lt.number(p.y,f.y,m),d=new et(h,g,f.angleTo(p),c);return d._round(),!a||Cl(t,d,s,a,e)?d:void 0}l+=y}}function Jf(t,e,r,n,i,o,a,s,l){let u=Xf(n,o,a),c=Hf(n,i),p=c*a,f=t[0].x===0||t[0].x===l||t[0].y===0||t[0].y===l;e-p<e/4&&(e=p+e/4);let y=o*2,m=f?e/2*s%e:(c/2+y)*a*s%e;return Yf(t,m,e,u,r,p,f,!1,l)}function Yf(t,e,r,n,i,o,a,s,l){let u=o/2,c=Wf(t),p=0,f=e-r,y=[];for(let m=0;m<t.length-1;m++){let h=t[m],g=t[m+1],d=h.dist(g),x=g.angleTo(h);for(;f+r<p+d;){f+=r;let b=(f-p)/d,v=lt.number(h.x,g.x,b),S=lt.number(h.y,g.y,b);if(v>=0&&v<l&&S>=0&&S<l&&f-u>=0&&f+u<=c){let A=new et(v,S,x,m);A._round(),(!n||Cl(t,A,o,n,i))&&y.push(A)}}p+=d}return!s&&!y.length&&!a&&(y=Yf(t,p/2,r,n,i,o,a,!0,l)),y}var ht=Y(ye(),1);function Kf(t,e,r,n,i){let o=[];for(let a=0;a<t.length;a++){let s=t[a],l;for(let u=0;u<s.length-1;u++){let c=s[u],p=s[u+1];c.x<e&&p.x<e||(c.x<e?c=new ht.default(e,c.y+(p.y-c.y)*((e-c.x)/(p.x-c.x)))._round():p.x<e&&(p=new ht.default(e,c.y+(p.y-c.y)*((e-c.x)/(p.x-c.x)))._round()),!(c.y<r&&p.y<r)&&(c.y<r?c=new ht.default(c.x+(p.x-c.x)*((r-c.y)/(p.y-c.y)),r)._round():p.y<r&&(p=new ht.default(c.x+(p.x-c.x)*((r-c.y)/(p.y-c.y)),r)._round()),!(c.x>=n&&p.x>=n)&&(c.x>=n?c=new ht.default(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round():p.x>=n&&(p=new ht.default(n,c.y+(p.y-c.y)*((n-c.x)/(p.x-c.x)))._round()),!(c.y>=i&&p.y>=i)&&(c.y>=i?c=new ht.default(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round():p.y>=i&&(p=new ht.default(c.x+(p.x-c.x)*((i-c.y)/(p.y-c.y)),i)._round()),(!l||!c.equals(l[l.length-1]))&&(l=[c],o.push(l)),l.push(p)))))}}return o}var be=Y(ye(),1);var $r=he;function kl(t,e,r,n){let i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2*$r,l=o.paddedRect.h-2*$r,u={x1:t.left,y1:t.top,x2:t.right,y2:t.bottom},c=o.stretchX||[[0,s]],p=o.stretchY||[[0,l]],f=(_,V)=>_+V[1]-V[0],y=c.reduce(f,0),m=p.reduce(f,0),h=s-y,g=l-m,d=0,x=y,b=0,v=m,S=0,A=h,w=0,T=g;if(o.content&&n){let _=o.content,V=_[2]-_[0],G=_[3]-_[1];(o.textFitWidth||o.textFitHeight)&&(u=Ea(t)),d=Ga(c,0,_[0]),b=Ga(p,0,_[1]),x=Ga(c,_[0],_[2]),v=Ga(p,_[1],_[3]),S=_[0]-d,w=_[1]-b,A=V-x,T=G-v}let E=u.x1,D=u.y1,B=u.x2-E,z=u.y2-D,M=(_,V,G,O)=>{let R=Na(_.stretch-d,x,B,E),K=Ua(_.fixed-S,A,_.stretch,y),X=Na(V.stretch-b,v,z,D),re=Ua(V.fixed-w,T,V.stretch,m),me=Na(G.stretch-d,x,B,E),Ut=Ua(G.fixed-S,A,G.stretch,y),tt=Na(O.stretch-b,v,z,D),gt=Ua(O.fixed-w,T,O.stretch,m),Gi=new be.default(R,X),Ni=new be.default(me,X),Ui=new be.default(me,tt),$i=new be.default(R,tt),is=new be.default(K/a,re/a),Ie=new be.default(Ut/a,gt/a),bt=e*Math.PI/180;if(bt){let xt=Math.sin(bt),Zr=Math.cos(bt),Be=[Zr,-xt,xt,Zr];Gi._matMult(Be),Ni._matMult(Be),$i._matMult(Be),Ui._matMult(Be)}let Hr=_.stretch+_.fixed,os=G.stretch+G.fixed,ji=V.stretch+V.fixed,as=O.stretch+O.fixed,Te={x:o.paddedRect.x+$r+Hr,y:o.paddedRect.y+$r+ji,w:os-Hr,h:as-ji},xe=A/a/B,rt=T/a/z;return{tl:Gi,tr:Ni,bl:$i,br:Ui,tex:Te,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:is,pixelOffsetBR:Ie,minFontScaleX:xe,minFontScaleY:rt,isSDF:r}};if(!n||!o.stretchX&&!o.stretchY)i.push(M({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));else{let _=Qf(c,h,y),V=Qf(p,g,m);for(let G=0;G<_.length-1;G++){let O=_[G],R=_[G+1];for(let K=0;K<V.length-1;K++){let X=V[K],re=V[K+1];i.push(M(O,X,R,re))}}}return i}function Ga(t,e,r){let n=0;for(let i of t)n+=Math.max(e,Math.min(r,i[1]))-Math.max(e,Math.min(r,i[0]));return n}function Qf(t,e,r){let n=[{fixed:-$r,stretch:0}];for(let[i,o]of t){let a=n[n.length-1];n.push({fixed:i-a.stretch,stretch:a.stretch}),n.push({fixed:i-a.stretch,stretch:a.stretch+(o-i)})}return n.push({fixed:e+$r,stretch:r}),n}function Na(t,e,r,n){return t/e*r+n}function Ua(t,e,r,n){return t-e*r/n}function ey(t,e,r,n,i,o,a,s){let l=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(let c of e.positionedLines)for(let p of c.positionedGlyphs){if(!p.rect)continue;let f=p.rect||{},m=Ia+1,h=!0,g=1,d=0,x=(i||s)&&p.vertical,b=p.metrics.advance*p.scale/2;if(s&&e.verticalizable){let X=(p.scale-1)*ae,re=(ae-p.metrics.width*p.scale)/2;d=c.lineOffset/2-(p.imageName?-re:X)}if(p.imageName){let X=a[p.imageName];h=X.sdf,g=X.pixelRatio,m=he/g}let v=i?[p.x+b,p.y]:[0,0],S=i?[0,0]:[p.x+b+r[0],p.y+r[1]-d],A=[0,0];x&&(A=S,S=[0,0]);let w=p.metrics.isDoubleResolution?2:1,T=(p.metrics.left-m)*p.scale-b+S[0],E=(-p.metrics.top-m)*p.scale+S[1],D=T+f.w/w*p.scale/g,B=E+f.h/w*p.scale/g,z=new be.default(T,E),M=new be.default(D,E),_=new be.default(T,B),V=new be.default(D,B);if(x){let X=new be.default(-b,b-bi),re=-Math.PI/2,me=ae/2-b,Ut=p.imageName?me:0,tt=new be.default(5-bi-me,-Ut),gt=new be.default(...A);z._rotateAround(re,X)._add(tt)._add(gt),M._rotateAround(re,X)._add(tt)._add(gt),_._rotateAround(re,X)._add(tt)._add(gt),V._rotateAround(re,X)._add(tt)._add(gt)}if(l){let X=Math.sin(l),re=Math.cos(l),me=[re,-X,X,re];z._matMult(me),M._matMult(me),_._matMult(me),V._matMult(me)}let G=new be.default(0,0),O=new be.default(0,0);u.push({tl:z,tr:M,bl:_,br:V,tex:f,writingMode:e.writingMode,glyphOffset:v,sectionIndex:p.sectionIndex,isSDF:h,pixelOffsetTL:G,pixelOffsetBR:O,minFontScaleX:0,minFontScaleY:0})}return u}var Ii=Y(ye(),1);var yr=class{constructor(e,r,n,i,o,a,s,l,u,c){if(this.boxStartIndex=e.length,u){let p=a.top,f=a.bottom,y=a.collisionPadding;y&&(p-=y[1],f+=y[3]);let m=f-p;m>0&&(m=Math.max(10,m),this.circleDiameter=m)}else{let p=a.image?.content&&(a.image.textFitWidth||a.image.textFitHeight)?Ea(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};p.y1=p.y1*s-l[0],p.y2=p.y2*s+l[2],p.x1=p.x1*s-l[3],p.x2=p.x2*s+l[1];let f=a.collisionPadding;if(f&&(p.x1-=f[0]*s,p.y1-=f[1]*s,p.x2+=f[2]*s,p.y2+=f[3]*s),c){let y=new Ii.default(p.x1,p.y1),m=new Ii.default(p.x2,p.y1),h=new Ii.default(p.x1,p.y2),g=new Ii.default(p.x2,p.y2),d=c*Math.PI/180;y._rotate(d),m._rotate(d),h._rotate(d),g._rotate(d),p.x1=Math.min(y.x,m.x,h.x,g.x),p.x2=Math.max(y.x,m.x,h.x,g.x),p.y1=Math.min(y.y,m.y,h.y,g.y),p.y2=Math.max(y.y,m.y,h.y,g.y)}e.emplaceBack(r.x,r.y,p.x1,p.y1,p.x2,p.y2,n,i,o)}this.boxEndIndex=e.length}};var Ti=class{constructor(e=[],r=(n,i)=>n<i?-1:n>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;let e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:r,compare:n}=this,i=r[e];for(;e>0;){let o=e-1>>1,a=r[o];if(n(i,a)>=0)break;r[e]=a,e=o}r[e]=i}_down(e){let{data:r,compare:n}=this,i=this.length>>1,o=r[e];for(;e<i;){let a=(e<<1)+1,s=a+1;if(s<this.length&&n(r[s],r[a])<0&&(a=s),n(r[a],o)>=0)break;r[e]=r[a],e=a}r[e]=o}};var Fl=Y(ye(),1);function ty(t,e=1,r=!1){let n=fr.fromPoints(t[0]),i=Math.min(n.width(),n.height()),o=i/2,a=new Ti([],Ix),{minX:s,minY:l,maxX:u,maxY:c}=n;if(i===0)return new Fl.default(s,l);for(let y=s;y<u;y+=i)for(let m=l;m<c;m+=i)a.push(new jr(y+o,m+o,o,t));let p=Cx(t),f=a.length;for(;a.length;){let y=a.pop();(y.d>p.d||!p.d)&&(p=y,r&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,f)),!(y.max-p.d<=e)&&(o=y.h/2,a.push(new jr(y.p.x-o,y.p.y-o,o,t)),a.push(new jr(y.p.x+o,y.p.y-o,o,t)),a.push(new jr(y.p.x-o,y.p.y+o,o,t)),a.push(new jr(y.p.x+o,y.p.y+o,o,t)),f+=4)}return r&&(console.log(`num probes: ${f}`),console.log(`best distance: ${p.d}`)),p.p}function Ix(t,e){return e.max-t.max}function jr(t,e,r,n){this.p=new Fl.default(t,e),this.h=r,this.d=Tx(this.p,n),this.max=this.d+this.h*Math.SQRT2}function Tx(t,e){let r=!1,n=1/0;for(let i=0;i<e.length;i++){let o=e[i];for(let a=0,s=o.length,l=s-1;a<s;l=a++){let u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(r=!r),n=Math.min(n,ll(t,u,c))}}return(r?1:-1)*Math.sqrt(n)}function Cx(t){let e=0,r=0,n=0,i=t[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){let l=i[o],u=i[s],c=l.x*u.y-u.x*l.y;r+=(l.x+u.x)*c,n+=(l.y+u.y)*c,e+=c*3}return new jr(r/e,n/e,0,t)}var Dl=Y(rl(),1);var El=(o=>(o[o.center=1]="center",o[o.left=2]="left",o[o.right=3]="right",o[o.top=4]="top",o[o.bottom=5]="bottom",o[o["top-left"]=6]="top-left",o[o["top-right"]=7]="top-right",o[o["bottom-left"]=8]="bottom-left",o[o["bottom-right"]=9]="bottom-right",o))(El||{}),Ot=7,$a=Number.POSITIVE_INFINITY;function Ml(t,e){function r(i,o){let a=0,s=0;o<0&&(o=0);let l=o/Math.SQRT2;switch(i){case"top-right":case"top-left":s=l-Ot;break;case"bottom-right":case"bottom-left":s=-l+Ot;break;case"bottom":s=-o+Ot;break;case"top":s=o-Ot;break}switch(i){case"top-right":case"bottom-right":a=-l;break;case"top-left":case"bottom-left":a=l;break;case"left":a=o;break;case"right":a=-o;break}return[a,s]}function n(i,o,a){let s=0,l=0;switch(o=Math.abs(o),a=Math.abs(a),i){case"top-right":case"top-left":case"top":l=a-Ot;break;case"bottom-right":case"bottom-left":case"bottom":l=-a+Ot;break}switch(i){case"top-right":case"bottom-right":case"right":s=-o;break;case"top-left":case"bottom-left":case"left":s=o;break}return[s,l]}return e[1]!==$a?n(t,e[0],e[1]):r(t,e[0])}function Ll(t,e,r){let n=t.layout,i=n.get("text-variable-anchor-offset")?.evaluate(e,{},r);if(i){let a=i.values,s=[];for(let l=0;l<a.length;l+=2){let u=s[l]=a[l],c=a[l+1].map(p=>p*ae);u.startsWith("top")?c[1]-=Ot:u.startsWith("bottom")&&(c[1]+=Ot),s[l+1]=c}return new Ee(s)}let o=n.get("text-variable-anchor");if(o){let a;t._unevaluatedLayout.getValue("text-radial-offset")!==void 0?a=[n.get("text-radial-offset").evaluate(e,{},r)*ae,$a]:a=n.get("text-offset").evaluate(e,{},r).map(u=>u*ae);let l=[];for(let u of o)l.push(u,Ml(u,a));return new Ee(l)}return null}function iy(t){t.bucket.createArrays();let e=512*t.bucket.overscaling;t.bucket.tilePixelRatio=8192/e,t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;let r=t.bucket.layers[0],n=r.layout,i=r._unevaluatedLayout._values,o={layoutIconSize:i["icon-size"].possiblyEvaluate(new W(t.bucket.zoom+1),t.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new W(t.bucket.zoom+1),t.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new W(18))};if(t.bucket.textSizeData.kind==="composite"){let{minZoom:c,maxZoom:p}=t.bucket.textSizeData;o.compositeTextSizes=[i["text-size"].possiblyEvaluate(new W(c),t.canonical),i["text-size"].possiblyEvaluate(new W(p),t.canonical)]}if(t.bucket.iconSizeData.kind==="composite"){let{minZoom:c,maxZoom:p}=t.bucket.iconSizeData;o.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new W(c),t.canonical),i["icon-size"].possiblyEvaluate(new W(p),t.canonical)]}let a=n.get("text-line-height")*ae,s=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",l=n.get("text-keep-upright"),u=n.get("text-size");for(let c of t.bucket.features){let p=n.get("text-font").evaluate(c,{},t.canonical).join(","),f=u.evaluate(c,{},t.canonical),y=o.layoutTextSize.evaluate(c,{},t.canonical),m=o.layoutIconSize.evaluate(c,{},t.canonical),h={horizontal:{},vertical:void 0},g=c.text,d=[0,0];if(g){let S=g.toString(),A=n.get("text-letter-spacing").evaluate(c,{},t.canonical)*ae,w=Zc(S)?A:0,T=n.get("text-anchor").evaluate(c,{},t.canonical),E=Ll(r,c,t.canonical);if(!E){let _=n.get("text-radial-offset").evaluate(c,{},t.canonical);_?d=Ml(T,[_*ae,$a]):d=n.get("text-offset").evaluate(c,{},t.canonical).map(V=>V*ae)}let D=s?"center":n.get("text-justify").evaluate(c,{},t.canonical),z=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(c,{},t.canonical)*ae:1/0,M=()=>{t.bucket.allowVerticalPlacement&&In(S)&&(h.vertical=xi(g,t.glyphMap,t.glyphPositions,t.imagePositions,p,z,a,T,"left",w,d,2,!0,y,f))};if(!s&&E){let _=new Set;if(D==="auto")for(let G=0;G<E.values.length;G+=2)_.add(ry(E.values[G]));else _.add(D);let V=!1;for(let G of _)if(!h.horizontal[G])if(V)h.horizontal[G]=h.horizontal[0];else{let O=xi(g,t.glyphMap,t.glyphPositions,t.imagePositions,p,z,a,"center",G,w,d,1,!1,y,f);O&&(h.horizontal[G]=O,V=O.positionedLines.length===1)}M()}else{D==="auto"&&(D=ry(T));let _=xi(g,t.glyphMap,t.glyphPositions,t.imagePositions,p,z,a,T,D,w,d,1,!1,y,f);_&&(h.horizontal[D]=_),M(),In(S)&&s&&l&&(h.vertical=xi(g,t.glyphMap,t.glyphPositions,t.imagePositions,p,z,a,T,D,w,d,2,!1,y,f))}}let x,b=!1;if(c.icon&&c.icon.name){let S=t.imageMap[c.icon.name];S&&(x=Ff(t.imagePositions[c.icon.name],n.get("icon-offset").evaluate(c,{},t.canonical),n.get("icon-anchor").evaluate(c,{},t.canonical)),b=!!S.sdf,t.bucket.sdfIcons===void 0?t.bucket.sdfIcons=b:t.bucket.sdfIcons!==b&&ce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(S.pixelRatio!==t.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(t.bucket.iconsNeedLinear=!0))}let v=oy(h.horizontal)||h.vertical;t.bucket.iconsInText=v?v.iconsInText:!1,(v||x)&&kx(t.bucket,c,h,x,t.imageMap,o,y,m,d,b,t.canonical,t.subdivisionGranularity)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()}function ry(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kx(t,e,r,n,i,o,a,s,l,u,c,p){let f=o.textMaxSize.evaluate(e,{});f===void 0&&(f=a);let y=t.layers[0].layout,m=y.get("icon-offset").evaluate(e,{},c),h=oy(r.horizontal),g=24,d=a/g,x=t.tilePixelRatio*d,b=t.tilePixelRatio*f/g,v=t.tilePixelRatio*s,S=t.tilePixelRatio*y.get("symbol-spacing"),A=y.get("text-padding")*t.tilePixelRatio,w=Vf(y,e,c,t.tilePixelRatio),T=y.get("text-max-angle")/180*Math.PI,E=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point",D=y.get("icon-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point",B=y.get("symbol-placement"),z=S/2,M=y.get("icon-text-fit"),_;n&&M!=="none"&&(t.allowVerticalPlacement&&r.vertical&&(_=_l(n,r.vertical,M,y.get("icon-text-fit-padding"),m,d)),h&&(n=_l(n,h,M,y.get("icon-text-fit-padding"),m,d)));let V=c?p.line.getGranularityForZoomLevel(c.z):1,G=(O,R)=>{R.x<0||R.x>=8192||R.y<0||R.y>=8192||Ex(t,R,O,r,n,i,_,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,x,[A,A,A,A],E,l,v,w,D,m,e,o,u,c,a)};if(B==="line")for(let O of Kf(e.geometry,0,0,8192,8192)){let R=Ke(O,V),K=Jf(R,S,T,r.vertical||h,n,g,b,t.overscaling,8192);for(let X of K){let re=h;(!re||!Mx(t,re.text,z,X))&&G(R,X)}}else if(B==="line-center"){for(let O of e.geometry)if(O.length>1){let R=Ke(O,V),K=Zf(R,T,r.vertical||h,n,g,b);K&&G(R,K)}}else if(e.type==="Polygon")for(let O of Yt(e.geometry,0)){let R=ty(O,16),K=Ke(O[0],V,!0);G(K,new et(R.x,R.y,0))}else if(e.type==="LineString")for(let O of e.geometry){let R=Ke(O,V);G(R,new et(R[0].x,R[0].y,0))}else if(e.type==="Point")for(let O of e.geometry)for(let R of O)G([R],new et(R.x,R.y,0))}function Fx(t,e){let r=t.length,n=e?.values;if(n?.length>0)for(let i=0;i<n.length;i+=2){let o=El[n[i]],a=n[i+1];t.emplaceBack(o,a[0],a[1])}return[r,t.length]}function ny(t,e,r,n,i,o,a,s,l,u,c,p,f,y,m){let h=ey(e,r,s,i,o,a,n,t.allowVerticalPlacement),g=t.textSizeData,d=null;g.kind==="source"?(d=[zt*i.layout.get("text-size").evaluate(a,{})],d[0]>Qe&&ce(`${t.layerIds[0]}: Value for "text-size" is >= ${Nr}. Reduce your "text-size".`)):g.kind==="composite"&&(d=[zt*y.compositeTextSizes[0].evaluate(a,{},m),zt*y.compositeTextSizes[1].evaluate(a,{},m)],(d[0]>Qe||d[1]>Qe)&&ce(`${t.layerIds[0]}: Value for "text-size" is >= ${Nr}. Reduce your "text-size".`)),t.addSymbols(t.text,h,d,s,o,a,u,e,l.lineStartIndex,l.lineLength,f,m);for(let x of c)p[x]=t.text.placedSymbolArray.length-1;return h.length*4}function oy(t){for(let e in t)return t[e];return null}function Ex(t,e,r,n,i,o,a,s,l,u,c,p,f,y,m,h,g,d,x,b,v,S,A,w,T){let E=t.addToLineVertexArray(e,r),D,B,z,M,_=0,V=0,G=0,O=0,R=-1,K=-1,X={},re=(0,Dl.default)("");if(t.allowVerticalPlacement&&n.vertical){let xe=s.layout.get("text-rotate").evaluate(v,{},w)+90,rt=n.vertical;z=new yr(l,e,u,c,p,rt,f,y,m,xe),a&&(M=new yr(l,e,u,c,p,a,g,d,m,xe))}if(i){let Te=s.layout.get("icon-rotate").evaluate(v,{}),xe=s.layout.get("icon-text-fit")!=="none",rt=kl(i,Te,A,xe),xt=a?kl(a,Te,A,xe):void 0;B=new yr(l,e,u,c,p,i,g,d,!1,Te),_=rt.length*4;let Zr=t.iconSizeData,Be=null;Zr.kind==="source"?(Be=[zt*s.layout.get("icon-size").evaluate(v,{})],Be[0]>Qe&&ce(`${t.layerIds[0]}: Value for "icon-size" is >= ${Nr}. Reduce your "icon-size".`)):Zr.kind==="composite"&&(Be=[zt*S.compositeIconSizes[0].evaluate(v,{},w),zt*S.compositeIconSizes[1].evaluate(v,{},w)],(Be[0]>Qe||Be[1]>Qe)&&ce(`${t.layerIds[0]}: Value for "icon-size" is >= ${Nr}. Reduce your "icon-size".`)),t.addSymbols(t.icon,rt,Be,b,x,v,0,e,E.lineStartIndex,E.lineLength,-1,w),R=t.icon.placedSymbolArray.length-1,xt&&(V=xt.length*4,t.addSymbols(t.icon,xt,Be,b,x,v,2,e,E.lineStartIndex,E.lineLength,-1,w),K=t.icon.placedSymbolArray.length-1)}let me=Object.keys(n.horizontal);for(let Te of me){let xe=n.horizontal[Te];if(!D){re=(0,Dl.default)(xe.text);let xt=s.layout.get("text-rotate").evaluate(v,{},w);D=new yr(l,e,u,c,p,xe,f,y,m,xt)}let rt=xe.positionedLines.length===1;if(G+=ny(t,e,xe,o,s,m,v,h,E,n.vertical?1:3,rt?me:[Te],X,R,S,w),rt)break}n.vertical&&(O+=ny(t,e,n.vertical,o,s,m,v,h,E,2,["vertical"],X,K,S,w));let Ut=D?D.boxStartIndex:t.collisionBoxArray.length,tt=D?D.boxEndIndex:t.collisionBoxArray.length,gt=z?z.boxStartIndex:t.collisionBoxArray.length,Gi=z?z.boxEndIndex:t.collisionBoxArray.length,Ni=B?B.boxStartIndex:t.collisionBoxArray.length,Ui=B?B.boxEndIndex:t.collisionBoxArray.length,$i=M?M.boxStartIndex:t.collisionBoxArray.length,is=M?M.boxEndIndex:t.collisionBoxArray.length,Ie=-1,bt=(Te,xe)=>Te&&Te.circleDiameter?Math.max(Te.circleDiameter,xe):xe;Ie=bt(D,Ie),Ie=bt(z,Ie),Ie=bt(B,Ie),Ie=bt(M,Ie);let Hr=Ie>-1?1:0;Hr&&(Ie*=T/ae),t.glyphOffsetArray.length>=Xe.MAX_GLYPHS&&ce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),v.sortKey!==void 0&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey);let os=Ll(s,v,w),[ji,as]=Fx(t.textAnchorOffsets,os);t.symbolInstances.emplaceBack(e.x,e.y,X.right>=0?X.right:-1,X.center>=0?X.center:-1,X.left>=0?X.left:-1,X.vertical||-1,R,K,re,Ut,tt,gt,Gi,Ni,Ui,$i,is,u,G,O,_,V,Hr,0,f,Ie,ji,as)}function Mx(t,e,r,n){let i=t.compareText;if(!(e in i))i[e]=[];else{let o=i[e];for(let a=o.length-1;a>=0;a--)if(n.dist(o[a])<r)return!0}return i[e].push(n),!1}var ja=1,Ci=class{constructor(e){let r={},n=[];for(let s in e){let l=e[s],u=r[s]={};for(let c in l){let p=l[+c];if(!p||p.bitmap.width===0||p.bitmap.height===0)continue;let f={x:0,y:0,w:p.bitmap.width+2*ja,h:p.bitmap.height+2*ja};n.push(f),u[c]={rect:f,metrics:p.metrics}}}let{w:i,h:o}=hi(n),a=new sr({width:i||1,height:o||1});for(let s in e){let l=e[s];for(let u in l){let c=l[+u];if(!c||c.bitmap.width===0||c.bitmap.height===0)continue;let p=r[s][u].rect;sr.copy(c.bitmap,a,{x:0,y:0},{x:p.x+ja,y:p.y+ja},c.bitmap)}}this.image=a,this.positions=r}};I("GlyphAtlas",Ci);function sy(t,e,r){e=Math.pow(2,r)-e-1;var n=ay(t*256,e*256,r),i=ay((t+1)*256,(e+1)*256,r);return n[0]+","+n[1]+","+i[0]+","+i[1]}function ay(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r),i=t*n-2*Math.PI*6378137/2,o=e*n-2*Math.PI*6378137/2;return[i,o]}var py=Y(ye(),1);var Bl=63710088e-1,ki=class t{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new t(wu(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){let r=Math.PI/180,n=this.lat*r,i=e.lat*r,o=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*r);return Bl*Math.acos(Math.min(o,1))}static convert(e){if(e instanceof t)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new t(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}};var ly=2*Math.PI*Bl;function uy(t){return ly*Math.cos(t*Math.PI/180)}function Lx(t){return(180+t)/360}function Dx(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Bx(t,e){return t/uy(e)}function Vx(t){return t*360-180}function Vl(t){let e=180-t*360;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function Rx(t,e){return t*uy(Vl(e))}function zx(t){return 1/Math.cos(t*Math.PI/180)}var Fi=class t{constructor(e,r,n=0){this.x=+e,this.y=+r,this.z=+n}static fromLngLat(e,r=0){let n=ki.convert(e);return new t(Lx(n.lng),Dx(n.lat),Bx(r,n.lat))}toLngLat(){return new ki(Vx(this.x),Vl(this.y))}toAltitude(){return Rx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ly*zx(Vl(this.y))}};function cy(t,e,r){return!(t<Hi||t>Xi||r<0||r>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))}var qa=class{constructor(e,r,n){if(!cy(e,r,n))throw new Error(`x=${r}, y=${n}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} ${Hi}<=z<=${Xi} `);this.z=e,this.x=r,this.y=n,this.key=Ei(0,e,e,r,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r,n){let i=sy(this.x,this.y,this.z),o=Ox(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(n==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,o).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){let r=this.z-e.z;return r>0&&e.x===this.x>>r&&e.y===this.y>>r}getTilePoint(e){let r=Math.pow(2,this.z);return new py.default((e.x*r-this.x)*8192,(e.y*r-this.y)*8192)}toString(){return`${this.z}/${this.x}/${this.y}`}},Rl=class{constructor(e,r){this.wrap=e,this.canonical=r,this.key=Ei(e,r.z,r.z,r.x,r.y)}},Mi=class t{constructor(e,r,n,i,o){this.terrainRttPosMatrix32f=null;if(e<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${n}`);this.overscaledZ=e,this.wrap=r,this.canonical=new qa(n,+i,+o),this.key=Ei(r,e,n,i,o)}clone(){return new t(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let r=this.canonical.z-e;return e>this.canonical.z?new t(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new t(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);let n=this.canonical.z-e;return e>this.canonical.z?Ei(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):Ei(this.wrap*+r,e,e,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(e){if(e.wrap!==this.wrap)return!1;let r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new t(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let r=this.canonical.z+1,n=this.canonical.x*2,i=this.canonical.y*2;return[new t(r,this.wrap,r,n,i),new t(r,this.wrap,r,n+1,i),new t(r,this.wrap,r,n,i+1),new t(r,this.wrap,r,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap?!0:this.wrap>e.wrap?!1:this.overscaledZ<e.overscaledZ?!0:this.overscaledZ>e.overscaledZ?!1:this.canonical.x<e.canonical.x?!0:this.canonical.x>e.canonical.x?!1:this.canonical.y<e.canonical.y}wrapped(){return new t(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new t(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rl(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Fi(e.x-this.wrap,e.y))}};function Ei(t,e,r,n,i){t*=2,t<0&&(t=t*-1-1);let o=1<<r;return(o*o*t+o*i+n).toString(36)+r.toString(36)+e.toString(36)}function Ox(t,e,r){let n="",i;for(let o=t;o>0;o--)i=1<<o-1,n+=(e&i?1:0)+(r&i?2:0);return n}I("CanonicalTileID",qa);I("OverscaledTileID",Mi,{omit:["terrainRttPosMatrix32f"]});var Wa=class{constructor(e){this.tileID=new Mi(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.inFlightDependencies=[],this.globalState=e.globalState}async parse(e,r,n,i,o){this.status="parsing",this.data=e,this.collisionBoxArray=new jn;let a=new Ur(Object.keys(e.layers).sort()),s=new _i(this.tileID,this.promoteId);s.bucketLayerIDs=[];let l={},u={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n,subdivisionGranularity:o},c=r.familiesBySource[this.source];for(let A in c){let w=e.layers[A];if(!w)continue;w.version===1&&ce(`Vector tile source "${this.source}" layer "${A}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let T=a.encode(A),E=[];for(let D=0;D<w.length;D++){let B=w.feature(D),z=s.getId(B,A);E.push({feature:B,id:z,index:D,sourceLayerIndex:T})}for(let D of c[A]){let B=D[0];if(B.source!==this.source&&ce(`layer.source = ${B.source} does not equal this.source = ${this.source}`),B.minzoom&&this.zoom<Math.floor(B.minzoom)||B.maxzoom&&this.zoom>=B.maxzoom||B.visibility==="none")continue;zl(D,this.zoom,n),(l[B.id]=B.createBucket({index:s.bucketLayerIDs.length,layers:D,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:T,sourceID:this.source,globalState:this.globalState})).populate(E,u,this.tileID.canonical),s.bucketLayerIDs.push(D.map(M=>M.id))}}let p=tn(u.glyphDependencies,A=>Object.keys(A).map(Number));this.inFlightDependencies.forEach(A=>A?.abort()),this.inFlightDependencies=[];let f=Promise.resolve({});if(Object.keys(p).length){let A=new AbortController;this.inFlightDependencies.push(A),f=i.sendAsync({type:"GG",data:{stacks:p,source:this.source,tileID:this.tileID,type:"glyphs"}},A)}let y=Object.keys(u.iconDependencies),m=Promise.resolve({});if(y.length){let A=new AbortController;this.inFlightDependencies.push(A),m=i.sendAsync({type:"GI",data:{icons:y,source:this.source,tileID:this.tileID,type:"icons"}},A)}let h=Object.keys(u.patternDependencies),g=Promise.resolve({});if(h.length){let A=new AbortController;this.inFlightDependencies.push(A),g=i.sendAsync({type:"GI",data:{icons:h,source:this.source,tileID:this.tileID,type:"patterns"}},A)}let[d,x,b]=await Promise.all([f,m,g]),v=new Ci(d),S=new di(x,b);for(let A in l){let w=l[A];w instanceof Xe?(zl(w.layers,this.zoom,n),iy({bucket:w,glyphMap:d,glyphPositions:v.positions,imageMap:x,imagePositions:S.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:u.subdivisionGranularity})):w.hasPattern&&(w instanceof pr||w instanceof ur||w instanceof cr)&&(zl(w.layers,this.zoom,n),w.addFeatures(u,this.tileID.canonical,S.patternPositions))}return this.status="done",{buckets:Object.values(l).filter(A=>!A.isEmpty()),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:v.image,imageAtlas:S,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?x:null,glyphPositions:this.returnDependencies?v.positions:null}}};function zl(t,e,r){let n=new W(e);for(let i of t)i.recalculate(n,r)}var Gx=60,XI=1e3/Gx;var qr=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return e.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}};var Wr=class{constructor(e,r,n){this.actor=e,this.layerIndex=r,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}async loadVectorTile(e,r){let n=await Uc(e.request,r);try{return{vectorTile:new fy.default.VectorTile(new yy.default(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires}}catch(i){let o=new Uint8Array(n.data),a=o[0]===31&&o[1]===139,s=`Unable to parse the tile at ${e.request.url}, `;throw a?s+="please make sure the data is not gzipped and that you have configured the relevant header in the server":s+=`got error: ${i.message}`,new Error(s)}}async loadTile(e){let r=e.uid,n=e&&e.request&&e.request.collectResourceTiming?new qr(e.request):!1,i=new Wa(e);this.loading[r]=i;let o=new AbortController;i.abort=o;try{let a=await this.loadVectorTile(e,o);if(delete this.loading[r],!a)return null;let s=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);let u={};if(n){let p=n.finish();p&&(u.resourceTiming=JSON.parse(JSON.stringify(p)))}i.vectorTile=a.vectorTile;let c=i.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,e.subdivisionGranularity);this.loaded[r]=i,this.fetching[r]={rawTileData:s,cacheControl:l,resourceTiming:u};try{let p=await c;return de({rawTileData:s.slice(0)},p,l,u)}finally{delete this.fetching[r]}}catch(a){throw delete this.loading[r],i.status="done",this.loaded[r]=i,a}}async reloadTile(e){let r=e.uid;if(!this.loaded||!this.loaded[r])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let n=this.loaded[r];if(n.showCollisionBoxes=e.showCollisionBoxes,n.globalState=e.globalState,n.status==="parsing"){let i=await n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,e.subdivisionGranularity),o;if(this.fetching[r]){let{rawTileData:a,cacheControl:s,resourceTiming:l}=this.fetching[r];delete this.fetching[r],o=de({rawTileData:a.slice(0)},i,s,l)}else o=i;return o}if(n.status==="done"&&n.vectorTile)return n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,e.subdivisionGranularity)}async abortTile(e){let r=this.loading,n=e.uid;r&&r[n]&&r[n].abort&&(r[n].abort.abort(),delete r[n])}async removeTile(e){this.loaded&&this.loaded[e.uid]&&delete this.loaded[e.uid]}};var Xa=class{constructor(){this.loaded={}}async loadTile(e){let{uid:r,encoding:n,rawImageData:i,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=e,u=i.width+2,c=i.height+2,p=vt(i)?new fe({width:u,height:c},await Iu(i,-1,-1,u,c)):i,f=new ii(r,p,n,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[r]=f,f}removeTile(e){let r=this.loaded,n=e.uid;r&&r[n]&&delete r[n]}};var Gy=Y(gy(),1);var Ol=Y(ye(),1),by=Y(Rt(),1);var Nx=by.default.VectorTileFeature.prototype.toGeoJSON,Gl=class{constructor(e){this._feature=e,this.extent=8192,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(this._feature.type===1){let e=[];for(let r of this._feature.geometry)e.push([new Ol.default(r[0],r[1])]);return e}else{let e=[];for(let r of this._feature.geometry){let n=[];for(let i of r)n.push(new Ol.default(i[0],i[1]));e.push(n)}return e}}toGeoJSON(e,r,n){return Nx.call(this,e,r,n)}},Za=class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=8192,this.length=e.length,this._features=e}feature(e){return new Gl(this._features[e])}};var Ny=Y(Ay(),1);var _y=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],$l=1,Di=8,Vi=class t{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[r,n]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");let i=n>>4;if(i!==$l)throw new Error(`Got v${i} data when expected v${$l}.`);let o=_y[n&15];if(!o)throw new Error("Unrecognized array type.");let[a]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new t(s,a,o,e)}constructor(e,r=64,n=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;let o=_y.indexOf(this.ArrayType),a=e*2*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Di,e),this.coords=new this.ArrayType(this.data,Di+s+l,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Di+a+s+l),this.ids=new this.IndexArrayType(this.data,Di,e),this.coords=new this.ArrayType(this.data,Di+s+l,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,($l<<4)+o]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){let n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=r,n}finish(){let e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ql(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:o,coords:a,nodeSize:s}=this,l=[0,o.length-1,0],u=[];for(;l.length;){let c=l.pop()||0,p=l.pop()||0,f=l.pop()||0;if(p-f<=s){for(let g=f;g<=p;g++){let d=a[2*g],x=a[2*g+1];d>=e&&d<=n&&x>=r&&x<=i&&u.push(o[g])}continue}let y=f+p>>1,m=a[2*y],h=a[2*y+1];m>=e&&m<=n&&h>=r&&h<=i&&u.push(o[y]),(c===0?e<=m:r<=h)&&(l.push(f),l.push(y-1),l.push(1-c)),(c===0?n>=m:i>=h)&&(l.push(y+1),l.push(p),l.push(1-c))}return u}within(e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[],u=n*n;for(;s.length;){let c=s.pop()||0,p=s.pop()||0,f=s.pop()||0;if(p-f<=a){for(let g=f;g<=p;g++)Iy(o[2*g],o[2*g+1],e,r)<=u&&l.push(i[g]);continue}let y=f+p>>1,m=o[2*y],h=o[2*y+1];Iy(m,h,e,r)<=u&&l.push(i[y]),(c===0?e-n<=m:r-n<=h)&&(s.push(f),s.push(y-1),s.push(1-c)),(c===0?e+n>=m:r+n>=h)&&(s.push(y+1),s.push(p),s.push(1-c))}return l}};function ql(t,e,r,n,i,o){if(i-n<=r)return;let a=n+i>>1;Ty(t,e,a,n,i,o),ql(t,e,r,n,a-1,1-o),ql(t,e,r,a+1,i,1-o)}function Ty(t,e,r,n,i,o){for(;i>n;){if(i-n>600){let u=i-n+1,c=r-n+1,p=Math.log(u),f=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*f*(u-f)/u)*(c-u/2<0?-1:1),m=Math.max(n,Math.floor(r-c*f/u+y)),h=Math.min(i,Math.floor(r+(u-c)*f/u+y));Ty(t,e,r,m,h,o)}let a=e[2*r+o],s=n,l=i;for(Bi(t,e,n,r),e[2*i+o]>a&&Bi(t,e,n,i);s<l;){for(Bi(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*n+o]===a?Bi(t,e,n,l):(l++,Bi(t,e,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function Bi(t,e,r,n){jl(t,r,n),jl(e,2*r,2*n),jl(e,2*r+1,2*n+1)}function jl(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function Iy(t,e,r,n){let i=t-r,o=e-n;return i*i+o*o}var Kx={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Cy=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),mr=2,Nt=3,Wl=4,Gt=5,Fy=6,Ri=class{constructor(e){this.options=Object.assign(Object.create(Kx),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){let{log:r,minZoom:n,maxZoom:i}=this.options;r&&console.time("total time");let o=`prepare ${e.length} points`;r&&console.time(o),this.points=e;let a=[];for(let l=0;l<e.length;l++){let u=e[l];if(!u.geometry)continue;let[c,p]=u.geometry.coordinates,f=Cy(Ya(c)),y=Cy(Ka(p));a.push(f,y,1/0,l,-1,1),this.options.reduce&&a.push(0)}let s=this.trees[i+1]=this._createTree(a);r&&console.timeEnd(o);for(let l=i;l>=n;l--){let u=+Date.now();s=this.trees[l]=this._createTree(this._cluster(s,l)),r&&console.log("z%d: %d clusters in %dms",l,s.numItems,+Date.now()-u)}return r&&console.timeEnd("total time"),this}getClusters(e,r){let n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),o=e[2]===180?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,o=180;else if(n>o){let p=this.getClusters([n,i,180,a],r),f=this.getClusters([-180,i,o,a],r);return p.concat(f)}let s=this.trees[this._limitZoom(r)],l=s.range(Ya(n),Ka(a),Ya(o),Ka(i)),u=s.data,c=[];for(let p of l){let f=this.stride*p;c.push(u[f+Gt]>1?ky(u,f,this.clusterProps):this.points[u[f+Nt]])}return c}getChildren(e){let r=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",o=this.trees[n];if(!o)throw new Error(i);let a=o.data;if(r*this.stride>=a.length)throw new Error(i);let s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=a[r*this.stride],u=a[r*this.stride+1],c=o.within(l,u,s),p=[];for(let f of c){let y=f*this.stride;a[y+Wl]===e&&p.push(a[y+Gt]>1?ky(a,y,this.clusterProps):this.points[a[y+Nt]])}if(p.length===0)throw new Error(i);return p}getLeaves(e,r,n){r=r||10,n=n||0;let i=[];return this._appendLeaves(i,e,r,n,0),i}getTile(e,r,n){let i=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:a,radius:s}=this.options,l=s/a,u=(n-l)/o,c=(n+1+l)/o,p={features:[]};return this._addTileFeatures(i.range((r-l)/o,u,(r+1+l)/o,c),i.data,r,n,o,p),r===0&&this._addTileFeatures(i.range(1-l/o,u,1,c),i.data,o,n,o,p),r===o-1&&this._addTileFeatures(i.range(0,u,l/o,c),i.data,-1,n,o,p),p.features.length?p:null}getClusterExpansionZoom(e){let r=this._getOriginZoom(e)-1;for(;r<=this.options.maxZoom;){let n=this.getChildren(e);if(r++,n.length!==1)break;e=n[0].properties.cluster_id}return r}_appendLeaves(e,r,n,i,o){let a=this.getChildren(r);for(let s of a){let l=s.properties;if(l&&l.cluster?o+l.point_count<=i?o+=l.point_count:o=this._appendLeaves(e,l.cluster_id,n,i,o):o<i?o++:e.push(s),e.length===n)break}return o}_createTree(e){let r=new Vi(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)r.add(e[n],e[n+1]);return r.finish(),r.data=e,r}_addTileFeatures(e,r,n,i,o,a){for(let s of e){let l=s*this.stride,u=r[l+Gt]>1,c,p,f;if(u)c=Ey(r,l,this.clusterProps),p=r[l],f=r[l+1];else{let h=this.points[r[l+Nt]];c=h.properties;let[g,d]=h.geometry.coordinates;p=Ya(g),f=Ka(d)}let y={type:1,geometry:[[Math.round(this.options.extent*(p*o-n)),Math.round(this.options.extent*(f*o-i))]],tags:c},m;u||this.options.generateId?m=r[l+Nt]:m=this.points[r[l+Nt]].id,m!==void 0&&(y.id=m),a.features.push(y)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,r){let{radius:n,extent:i,reduce:o,minPoints:a}=this.options,s=n/(i*Math.pow(2,r)),l=e.data,u=[],c=this.stride;for(let p=0;p<l.length;p+=c){if(l[p+mr]<=r)continue;l[p+mr]=r;let f=l[p],y=l[p+1],m=e.within(l[p],l[p+1],s),h=l[p+Gt],g=h;for(let d of m){let x=d*c;l[x+mr]>r&&(g+=l[x+Gt])}if(g>h&&g>=a){let d=f*h,x=y*h,b,v=-1,S=((p/c|0)<<5)+(r+1)+this.points.length;for(let A of m){let w=A*c;if(l[w+mr]<=r)continue;l[w+mr]=r;let T=l[w+Gt];d+=l[w]*T,x+=l[w+1]*T,l[w+Wl]=S,o&&(b||(b=this._map(l,p,!0),v=this.clusterProps.length,this.clusterProps.push(b)),o(b,this._map(l,w)))}l[p+Wl]=S,u.push(d/g,x/g,1/0,S,-1,g),o&&u.push(v)}else{for(let d=0;d<c;d++)u.push(l[p+d]);if(g>1)for(let d of m){let x=d*c;if(!(l[x+mr]<=r)){l[x+mr]=r;for(let b=0;b<c;b++)u.push(l[x+b])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,r,n){if(e[r+Gt]>1){let a=this.clusterProps[e[r+Fy]];return n?Object.assign({},a):a}let i=this.points[e[r+Nt]].properties,o=this.options.map(i);return n&&o===i?Object.assign({},o):o}};function ky(t,e,r){return{type:"Feature",id:t[e+Nt],properties:Ey(t,e,r),geometry:{type:"Point",coordinates:[Qx(t[e]),e0(t[e+1])]}}}function Ey(t,e,r){let n=t[e+Gt],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,o=t[e+Fy],a=o===-1?{}:Object.assign({},r[o]);return Object.assign(a,{cluster:!0,cluster_id:t[e+Nt],point_count:n,point_count_abbreviated:i})}function Ya(t){return t/360+.5}function Ka(t){let e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Qx(t){return(t-.5)*360}function e0(t){let e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function zi(t,e,r,n){let i=n,o=e+(r-e>>1),a=r-e,s,l=t[e],u=t[e+1],c=t[r],p=t[r+1];for(let f=e+3;f<r;f+=3){let y=t0(t[f],t[f+1],l,u,c,p);if(y>i)s=f,i=y;else if(y===i){let m=Math.abs(f-o);m<a&&(s=f,a=m)}}i>n&&(s-e>3&&zi(t,e,s,n),t[s+2]=i,r-s>3&&zi(t,s,r,n))}function t0(t,e,r,n,i,o){let a=i-r,s=o-n;if(a!==0||s!==0){let l=((t-r)*a+(e-n)*s)/(a*a+s*s);l>1?(r=i,n=o):l>0&&(r+=a*l,n+=s*l)}return a=t-r,s=e-n,a*a+s*s}function dt(t,e,r,n){let i={id:t??null,type:e,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(e==="Point"||e==="MultiPoint"||e==="LineString")Qa(i,r);else if(e==="Polygon")Qa(i,r[0]);else if(e==="MultiLineString")for(let o of r)Qa(i,o);else if(e==="MultiPolygon")for(let o of r)Qa(i,o[0]);return i}function Qa(t,e){for(let r=0;r<e.length;r+=3)t.minX=Math.min(t.minX,e[r]),t.minY=Math.min(t.minY,e[r+1]),t.maxX=Math.max(t.maxX,e[r]),t.maxY=Math.max(t.maxY,e[r+1])}function Zl(t,e){let r=[];if(t.type==="FeatureCollection")for(let n=0;n<t.features.length;n++)es(r,t.features[n],e,n);else t.type==="Feature"?es(r,t,e):es(r,{geometry:t},e);return r}function es(t,e,r,n){if(!e.geometry)return;let i=e.geometry.coordinates;if(i&&i.length===0)return;let o=e.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=e.id;if(r.promoteId?l=e.properties[r.promoteId]:r.generateId&&(l=n||0),o==="Point")My(i,s);else if(o==="MultiPoint")for(let u of i)My(u,s);else if(o==="LineString")Hl(i,s,a,!1);else if(o==="MultiLineString")if(r.lineMetrics){for(let u of i)s=[],Hl(u,s,a,!1),t.push(dt(l,"LineString",s,e.properties));return}else Xl(i,s,a,!1);else if(o==="Polygon")Xl(i,s,a,!0);else if(o==="MultiPolygon")for(let u of i){let c=[];Xl(u,c,a,!0),s.push(c)}else if(o==="GeometryCollection"){for(let u of e.geometry.geometries)es(t,{id:l,geometry:u,properties:e.properties},r,n);return}else throw new Error("Input data is not a valid GeoJSON object.");t.push(dt(l,o,s,e.properties))}function My(t,e){e.push(Ly(t[0]),Dy(t[1]),0)}function Hl(t,e,r,n){let i,o,a=0;for(let l=0;l<t.length;l++){let u=Ly(t[l][0]),c=Dy(t[l][1]);e.push(u,c,0),l>0&&(n?a+=(i*c-u*o)/2:a+=Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}let s=e.length-3;e[2]=1,zi(e,0,s,r),e[s+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Xl(t,e,r,n){for(let i=0;i<t.length;i++){let o=[];Hl(t[i],o,r,n),e.push(o)}}function Ly(t){return t/360+.5}function Dy(t){let e=Math.sin(t*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function Ue(t,e,r,n,i,o,a,s){if(r/=e,n/=e,o>=r&&a<n)return t;if(a<r||o>=n)return null;let l=[];for(let u of t){let c=u.geometry,p=u.type,f=i===0?u.minX:u.minY,y=i===0?u.maxX:u.maxY;if(f>=r&&y<n){l.push(u);continue}else if(y<r||f>=n)continue;let m=[];if(p==="Point"||p==="MultiPoint")r0(c,m,r,n,i);else if(p==="LineString")Vy(c,m,r,n,i,!1,s.lineMetrics);else if(p==="MultiLineString")Jl(c,m,r,n,i,!1);else if(p==="Polygon")Jl(c,m,r,n,i,!0);else if(p==="MultiPolygon")for(let h of c){let g=[];Jl(h,g,r,n,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&p==="LineString"){for(let h of m)l.push(dt(u.id,p,h,u.tags));continue}(p==="LineString"||p==="MultiLineString")&&(m.length===1?(p="LineString",m=m[0]):p="MultiLineString"),(p==="Point"||p==="MultiPoint")&&(p=m.length===3?"Point":"MultiPoint"),l.push(dt(u.id,p,m,u.tags))}}return l.length?l:null}function r0(t,e,r,n,i){for(let o=0;o<t.length;o+=3){let a=t[o+i];a>=r&&a<=n&&Xr(e,t[o],t[o+1],t[o+2])}}function Vy(t,e,r,n,i,o,a){let s=By(t),l=i===0?n0:i0,u=t.start,c,p;for(let d=0;d<t.length-3;d+=3){let x=t[d],b=t[d+1],v=t[d+2],S=t[d+3],A=t[d+4],w=i===0?x:b,T=i===0?S:A,E=!1;a&&(c=Math.sqrt(Math.pow(x-S,2)+Math.pow(b-A,2))),w<r?T>r&&(p=l(s,x,b,S,A,r),a&&(s.start=u+c*p)):w>n?T<n&&(p=l(s,x,b,S,A,n),a&&(s.start=u+c*p)):Xr(s,x,b,v),T<r&&w>=r&&(p=l(s,x,b,S,A,r),E=!0),T>n&&w<=n&&(p=l(s,x,b,S,A,n),E=!0),!o&&E&&(a&&(s.end=u+c*p),e.push(s),s=By(t)),a&&(u+=c)}let f=t.length-3,y=t[f],m=t[f+1],h=t[f+2],g=i===0?y:m;g>=r&&g<=n&&Xr(s,y,m,h),f=s.length-3,o&&f>=3&&(s[f]!==s[0]||s[f+1]!==s[1])&&Xr(s,s[0],s[1],s[2]),s.length&&e.push(s)}function By(t){let e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Jl(t,e,r,n,i,o){for(let a of t)Vy(a,e,r,n,i,o,!1)}function Xr(t,e,r,n){t.push(e,r,n)}function n0(t,e,r,n,i,o){let a=(o-e)/(n-e);return Xr(t,o,r+(i-r)*a,1),a}function i0(t,e,r,n,i,o){let a=(o-r)/(i-r);return Xr(t,e+(n-e)*a,o,1),a}function Kl(t,e){let r=e.buffer/e.extent,n=t,i=Ue(t,1,-1-r,r,0,-1,2,e),o=Ue(t,1,1-r,2+r,0,-1,2,e);return(i||o)&&(n=Ue(t,1,-r,1+r,0,-1,2,e)||[],i&&(n=Ry(i,1).concat(n)),o&&(n=n.concat(Ry(o,-1)))),n}function Ry(t,e){let r=[];for(let n=0;n<t.length;n++){let i=t[n],o=i.type,a;if(o==="Point"||o==="MultiPoint"||o==="LineString")a=Yl(i.geometry,e);else if(o==="MultiLineString"||o==="Polygon"){a=[];for(let s of i.geometry)a.push(Yl(s,e))}else if(o==="MultiPolygon"){a=[];for(let s of i.geometry){let l=[];for(let u of s)l.push(Yl(u,e));a.push(l)}}r.push(dt(i.id,o,a,i.tags))}return r}function Yl(t,e){let r=[];r.size=t.size,t.start!==void 0&&(r.start=t.start,r.end=t.end);for(let n=0;n<t.length;n+=3)r.push(t[n]+e,t[n+1],t[n+2]);return r}function ts(t,e){if(t.transformed)return t;let r=1<<t.z,n=t.x,i=t.y;for(let o of t.features){let a=o.geometry,s=o.type;if(o.geometry=[],s===1)for(let l=0;l<a.length;l+=2)o.geometry.push(zy(a[l],a[l+1],e,r,n,i));else for(let l=0;l<a.length;l++){let u=[];for(let c=0;c<a[l].length;c+=2)u.push(zy(a[l][c],a[l][c+1],e,r,n,i));o.geometry.push(u)}}return t.transformed=!0,t}function zy(t,e,r,n,i,o){return[Math.round(r*(t*n-i)),Math.round(r*(e*n-o))]}function eu(t,e,r,n,i){let o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:t.length,source:null,x:r,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let s of t)o0(a,s,o,i);return a}function o0(t,e,r,n){let i=e.geometry,o=e.type,a=[];if(t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),o==="Point"||o==="MultiPoint")for(let s=0;s<i.length;s+=3)a.push(i[s],i[s+1]),t.numPoints++,t.numSimplified++;else if(o==="LineString")Ql(a,i,t,r,!1,!1);else if(o==="MultiLineString"||o==="Polygon")for(let s=0;s<i.length;s++)Ql(a,i[s],t,r,o==="Polygon",s===0);else if(o==="MultiPolygon")for(let s=0;s<i.length;s++){let l=i[s];for(let u=0;u<l.length;u++)Ql(a,l[u],t,r,!0,u===0)}if(a.length){let s=e.tags||null;if(o==="LineString"&&n.lineMetrics){s={};for(let u in e.tags)s[u]=e.tags[u];s.mapbox_clip_start=i.start/i.size,s.mapbox_clip_end=i.end/i.size}let l={geometry:a,type:o==="Polygon"||o==="MultiPolygon"?3:o==="LineString"||o==="MultiLineString"?2:1,tags:s};e.id!==null&&(l.id=e.id),t.features.push(l)}}function Ql(t,e,r,n,i,o){let a=n*n;if(n>0&&e.size<(i?a:n)){r.numPoints+=e.length/3;return}let s=[];for(let l=0;l<e.length;l+=3)(n===0||e[l+2]>a)&&(r.numSimplified++,s.push(e[l],e[l+1])),r.numPoints++;i&&a0(s,o),t.push(s)}function a0(t,e){let r=0;for(let n=0,i=t.length,o=i-2;n<i;o=n,n+=2)r+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(r>0===e)for(let n=0,i=t.length;n<i/2;n+=2){let o=t[n],a=t[n+1];t[n]=t[i-2-n],t[n+1]=t[i-1-n],t[i-2-n]=o,t[i-1-n]=a}}var s0={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ru=class{constructor(e,r){r=this.options=l0(Object.create(s0),r);let n=r.debug;if(n&&console.time("preprocess data"),r.maxZoom<0||r.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(r.promoteId&&r.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=Zl(e,r);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",r.indexMaxZoom,r.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=Kl(i,r),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,r,n,i,o,a,s){let l=[e,r,n,i],u=this.options,c=u.debug;for(;l.length;){i=l.pop(),n=l.pop(),r=l.pop(),e=l.pop();let p=1<<r,f=tu(r,n,i),y=this.tiles[f];if(!y&&(c>1&&console.time("creation"),y=this.tiles[f]=eu(e,r,n,i,u),this.tileCoords.push({z:r,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",r,n,i,y.numFeatures,y.numPoints,y.numSimplified),console.timeEnd("creation"));let T=`z${r}`;this.stats[T]=(this.stats[T]||0)+1,this.total++}if(y.source=e,o==null){if(r===u.indexMaxZoom||y.numPoints<=u.indexMaxPoints)continue}else{if(r===u.maxZoom||r===o)continue;if(o!=null){let T=o-r;if(n!==a>>T||i!==s>>T)continue}}if(y.source=null,e.length===0)continue;c>1&&console.time("clipping");let m=.5*u.buffer/u.extent,h=.5-m,g=.5+m,d=1+m,x=null,b=null,v=null,S=null,A=Ue(e,p,n-m,n+g,0,y.minX,y.maxX,u),w=Ue(e,p,n+h,n+d,0,y.minX,y.maxX,u);e=null,A&&(x=Ue(A,p,i-m,i+g,1,y.minY,y.maxY,u),b=Ue(A,p,i+h,i+d,1,y.minY,y.maxY,u),A=null),w&&(v=Ue(w,p,i-m,i+g,1,y.minY,y.maxY,u),S=Ue(w,p,i+h,i+d,1,y.minY,y.maxY,u),w=null),c>1&&console.timeEnd("clipping"),l.push(x||[],r+1,n*2,i*2),l.push(b||[],r+1,n*2,i*2+1),l.push(v||[],r+1,n*2+1,i*2),l.push(S||[],r+1,n*2+1,i*2+1)}}getTile(e,r,n){e=+e,r=+r,n=+n;let i=this.options,{extent:o,debug:a}=i;if(e<0||e>24)return null;let s=1<<e;r=r+s&s-1;let l=tu(e,r,n);if(this.tiles[l])return ts(this.tiles[l],o);a>1&&console.log("drilling down to z%d-%d-%d",e,r,n);let u=e,c=r,p=n,f;for(;!f&&u>0;)u--,c=c>>1,p=p>>1,f=this.tiles[tu(u,c,p)];return!f||!f.source?null:(a>1&&(console.log("found parent tile z%d-%d-%d",u,c,p),console.time("drilling down")),this.splitTile(f.source,u,c,p,e,r,n),a>1&&console.timeEnd("drilling down"),this.tiles[l]?ts(this.tiles[l],o):null)}};function tu(t,e,r){return((1<<t)*r+e)*32+t}function l0(t,e){for(let r in e)t[r]=e[r];return t}function nu(t,e){return new ru(t,e)}function Oi(t,e){return e?t.properties[e]:t.id}function iu(t,e){if(t==null)return!0;if(t.type==="Feature")return Oi(t,e)!=null;if(t.type==="FeatureCollection"){let r=new Set;for(let n of t.features){let i=Oi(n,e);if(i==null||r.has(i))return!1;r.add(i)}return!0}return!1}function ou(t,e){let r=new Map;if(t!=null)if(t.type==="Feature")r.set(Oi(t,e),t);else for(let n of t.features)r.set(Oi(n,e),n);return r}function Oy(t,e,r){if(e.removeAll&&t.clear(),e.remove)for(let n of e.remove)t.delete(n);if(e.add)for(let n of e.add){let i=Oi(n,r);i!=null&&t.set(i,n)}if(e.update)for(let n of e.update){let i=t.get(n.id);if(i==null)continue;let o=n.newGeometry||n.removeAllProperties,a=!n.removeAllProperties&&(n.removeProperties?.length>0||n.addOrUpdateProperties?.length>0);if((o||a)&&(i={...i},t.set(n.id,i),a&&(i.properties={...i.properties})),n.newGeometry&&(i.geometry=n.newGeometry),n.removeAllProperties)i.properties={};else if(n.removeProperties?.length>0)for(let s of n.removeProperties)Object.prototype.hasOwnProperty.call(i.properties,s)&&delete i.properties[s];if(n.addOrUpdateProperties?.length>0)for(let{key:s,value:l}of n.addOrUpdateProperties)i.properties[s]=l}}var rs=class extends Wr{constructor(){super(...arguments);this._dataUpdateable=new Map}async loadVectorTile(r,n){let i=r.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let o=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!o)return null;let a=new Za(o.features),s=(0,Ny.default)(a);return(s.byteOffset!==0||s.byteLength!==s.buffer.byteLength)&&(s=new Uint8Array(s)),{vectorTile:a,rawData:s.buffer}}async loadData(r){this._pendingRequest?.abort();let n=r&&r.request&&r.request.collectResourceTiming?new qr(r.request):!1;this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(r,this._pendingRequest),this._geoJSONIndex=r.cluster?new Ri(u0(r)).load((await this._pendingData).features):nu(await this._pendingData,r.geojsonVtOptions),this.loaded={};let i={};if(n){let o=n.finish();o&&(i.resourceTiming={},i.resourceTiming[r.source]=JSON.parse(JSON.stringify(o)))}return i}catch(i){if(delete this._pendingRequest,Lc(i))return{abandoned:!0};throw i}}async getData(){return this._pendingData}reloadTile(r){let n=this.loaded,i=r.uid;return n&&n[i]?super.reloadTile(r):this.loadTile(r)}async loadAndProcessGeoJSON(r,n){let i=await this.loadGeoJSON(r,n);if(delete this._pendingRequest,typeof i!="object")throw new Error(`Input data given to \'${r.source}\' is not a valid GeoJSON object.`);if((0,Gy.default)(i,!0),r.filter){let o=Qt(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(o.result==="error")throw new Error(o.value.map(s=>`${s.key}: ${s.message}`).join(", "));i={type:"FeatureCollection",features:i.features.filter(s=>o.value.evaluate({zoom:0},s))}}return i}async loadGeoJSON(r,n){let{promoteId:i}=r;if(r.request){let o=await Nc(r.request,n);return this._dataUpdateable=iu(o.data,i)?ou(o.data,i):void 0,o.data}if(typeof r.data=="string")try{let o=JSON.parse(r.data);return this._dataUpdateable=iu(o,i)?ou(o,i):void 0,o}catch{throw new Error(`Input data given to \'${r.source}\' is not a valid GeoJSON object.`)}if(!r.dataDiff)throw new Error(`Input data given to \'${r.source}\' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${r.source}`);return Oy(this._dataUpdateable,r.dataDiff,i),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}async removeSource(r){this._pendingRequest&&this._pendingRequest.abort()}getClusterExpansionZoom(r){return this._geoJSONIndex.getClusterExpansionZoom(r.clusterId)}getClusterChildren(r){return this._geoJSONIndex.getChildren(r.clusterId)}getClusterLeaves(r){return this._geoJSONIndex.getLeaves(r.clusterId,r.limit,r.offset)}};function u0({superclusterOptions:t,clusterProperties:e}){if(!e||!t)return t;let r={},n={},i={accumulated:null,zoom:0},o={properties:null},a=Object.keys(e);for(let s of a){let[l,u]=e[s],c=Qt(u),p=Qt(typeof l=="string"?[l,["accumulated"],["get",s]]:l);r[s]=c.value,n[s]=p.value}return t.map=s=>{o.properties=s;let l={};for(let u of a)l[u]=r[u].evaluate(i,o);return l},t.reduce=(s,l)=>{o.properties=l;for(let u of a)i.accumulated=s[u],s[u]=n[u].evaluate(i,o)},t}var ns=class{constructor(e){this.self=e,this.actor=new Co(e),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(r,n)=>{if(this.externalWorkerSourceTypes[r])throw new Error(`Worker source with name "${r}" already registered.`);this.externalWorkerSourceTypes[r]=n},this.self.addProtocol=Bc,this.self.removeProtocol=Vc,this.self.registerRTLTextPlugin=r=>{we.setMethods(r)},this.actor.registerMessageHandler("LDT",(r,n)=>this._getDEMWorkerSource(r,n.source).loadTile(n)),this.actor.registerMessageHandler("RDT",async(r,n)=>{this._getDEMWorkerSource(r,n.source).removeTile(n)}),this.actor.registerMessageHandler("GCEZ",async(r,n)=>this._getWorkerSource(r,n.type,n.source).getClusterExpansionZoom(n)),this.actor.registerMessageHandler("GCC",async(r,n)=>this._getWorkerSource(r,n.type,n.source).getClusterChildren(n)),this.actor.registerMessageHandler("GCL",async(r,n)=>this._getWorkerSource(r,n.type,n.source).getClusterLeaves(n)),this.actor.registerMessageHandler("LD",(r,n)=>this._getWorkerSource(r,n.type,n.source).loadData(n)),this.actor.registerMessageHandler("GD",(r,n)=>this._getWorkerSource(r,n.type,n.source).getData()),this.actor.registerMessageHandler("LT",(r,n)=>this._getWorkerSource(r,n.type,n.source).loadTile(n)),this.actor.registerMessageHandler("RT",(r,n)=>this._getWorkerSource(r,n.type,n.source).reloadTile(n)),this.actor.registerMessageHandler("AT",(r,n)=>this._getWorkerSource(r,n.type,n.source).abortTile(n)),this.actor.registerMessageHandler("RMT",(r,n)=>this._getWorkerSource(r,n.type,n.source).removeTile(n)),this.actor.registerMessageHandler("RS",async(r,n)=>{if(!this.workerSources[r]||!this.workerSources[r][n.type]||!this.workerSources[r][n.type][n.source])return;let i=this.workerSources[r][n.type][n.source];delete this.workerSources[r][n.type][n.source],i.removeSource!==void 0&&i.removeSource(n)}),this.actor.registerMessageHandler("RM",async r=>{delete this.layerIndexes[r],delete this.availableImages[r],delete this.workerSources[r],delete this.demWorkerSources[r]}),this.actor.registerMessageHandler("SR",async(r,n)=>{this.referrer=n}),this.actor.registerMessageHandler("SRPS",(r,n)=>this._syncRTLPluginState(r,n)),this.actor.registerMessageHandler("IS",async(r,n)=>{this.self.importScripts(n)}),this.actor.registerMessageHandler("SI",(r,n)=>this._setImages(r,n)),this.actor.registerMessageHandler("UL",async(r,n)=>{this._getLayerIndex(r).update(n.layers,n.removedIds)}),this.actor.registerMessageHandler("SL",async(r,n)=>{this._getLayerIndex(r).replace(n)})}async _setImages(e,r){this.availableImages[e]=r;for(let n in this.workerSources[e]){let i=this.workerSources[e][n];for(let o in i)i[o].availableImages=r}}async _syncRTLPluginState(e,r){return await we.syncState(r,this.self.importScripts)}_getAvailableImages(e){let r=this.availableImages[e];return r||(r=[]),r}_getLayerIndex(e){let r=this.layerIndexes[e];return r||(r=this.layerIndexes[e]=new za),r}_getWorkerSource(e,r,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][r]||(this.workerSources[e][r]={}),!this.workerSources[e][r][n]){let i={sendAsync:(o,a)=>(o.targetMapId=e,this.actor.sendAsync(o,a))};switch(r){case"vector":this.workerSources[e][r][n]=new Wr(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][r][n]=new rs(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][r][n]=new this.externalWorkerSourceTypes[r](i,this._getLayerIndex(e),this._getAvailableImages(e));break}}return this.workerSources[e][r][n]}_getDEMWorkerSource(e,r){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][r]||(this.demWorkerSources[e][r]=new Xa),this.demWorkerSources[e][r]}};at(self)&&(self.worker=new ns(self));})();\n/*! Bundled license information:\n\nieee754/index.js:\n  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)\n*/\n'});function fne(){return new Worker(d5e())}var d5e,hne=f(()=>{jd();dne();d5e=()=>Yo.WORKER_URL?Yo.WORKER_URL:URL.createObjectURL(new Blob([pne],{type:"text/javascript"}))});var mne,By,f5e,QB=f(()=>{hne();tn();ne();mne="maplibre_preloaded_worker_pool",By=class e{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(fne());return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mne]}numActive(){return Object.keys(this.active).length}},f5e=Math.floor(Rt.hardwareConcurrency/2);By.workerCount=iee(globalThis)?Math.max(Math.min(f5e,3),1):1});function t5(){return e5||(e5=new By),e5}var e5,$C=f(()=>{QB()});function r5(){return VC||(VC=new jC(t5(),pE),VC.registerMessageHandler("GR",(e,t,r)=>ty(t,r))),VC}var jC,VC,GC=f(()=>{cne();$C();Is();$u();jC=class{constructor(t,r){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r;let n=this.workerPool.acquire(r);for(let i=0;i<n.length;i++){let o=n[i],a=new UC(o,r);a.name=`Worker ${i}`,this.actors.push(a)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,r){let n=[];for(let i of this.actors)n.push(i.sendAsync({type:t,data:r}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(r=>{r.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,r){for(let n of this.actors)n.registerMessageHandler(t,r)}}});var yne=f(()=>{});async function HC(e,t,r){let n=e;if(e.url?n=(await vb(t.transformRequest(e.url,"Source"),r)).data:await Rt.frameAsync(r),!n)return null;let i=rp(we(n,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in n&&n.vector_layers&&(i.vectorLayerIds=n.vector_layers.map(o=>o.id)),i}var n5=f(()=>{ne();Is();La();tn()});var zy,We,mn=f(()=>{ne();zy=63710088e-1,We=class e{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new e(Qm(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){let r=Math.PI/180,n=this.lat*r,i=t.lat*r,o=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*r);return zy*Math.acos(Math.min(o,1))}static convert(t){if(t instanceof e)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}});var vo,Ol=f(()=>{mn();vo=class e{constructor(t,r){t&&(r?this.setSouthWest(t).setNorthEast(r):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof We?new We(t.lng,t.lat):We.convert(t),this}setSouthWest(t){return this._sw=t instanceof We?new We(t.lng,t.lat):We.convert(t),this}extend(t){let r=this._sw,n=this._ne,i,o;if(t instanceof We)i=t,o=t;else if(t instanceof e){if(i=t._sw,o=t._ne,!i||!o)return this}else{if(Array.isArray(t))if(t.length===4||t.every(Array.isArray)){let a=t;return this.extend(e.convert(a))}else{let a=t;return this.extend(We.convert(a))}else if(t&&("lng"in t||"lon"in t)&&"lat"in t)return this.extend(We.convert(t));return this}return!r&&!n?(this._sw=new We(i.lng,i.lat),this._ne=new We(o.lng,o.lat)):(r.lng=Math.min(i.lng,r.lng),r.lat=Math.min(i.lat,r.lat),n.lng=Math.max(o.lng,n.lng),n.lat=Math.max(o.lat,n.lat)),this}getCenter(){return new We((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new We(this.getWest(),this.getNorth())}getSouthEast(){return new We(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){let{lng:r,lat:n}=We.convert(t),i=this._sw.lat<=n&&n<=this._ne.lat,o=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=r&&r>=this._ne.lng),i&&o}static convert(t){return t instanceof e||!t?t:new e(t)}static fromLngLat(t,r=0){let i=360*r/40075017,o=i/Math.cos(Math.PI/180*t.lat);return new e(new We(t.lng-o,t.lat-i),new We(t.lng+o,t.lat+i))}adjustAntiMeridian(){let t=new We(this._sw.lng,this._sw.lat),r=new We(this._ne.lng,this._ne.lat);return t.lng>r.lng?new e(t,new We(r.lng+360,r.lat)):new e(t,r)}}});function xne(e){return gne*Math.cos(e*Math.PI/180)}function Ny(e){return(180+e)/360}function cf(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ZC(e,t){return e/xne(t)}function h5e(e){return e*360-180}function i5(e){let t=180-e*360;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}function bne(e,t){return e*xne(i5(t))}function m5e(e){return 1/Math.cos(e*Math.PI/180)}var gne,an,Ii=f(()=>{mn();gne=2*Math.PI*zy;an=class e{constructor(t,r,n=0){this.x=+t,this.y=+r,this.z=+n}static fromLngLat(t,r=0){let n=We.convert(t);return new e(Ny(n.lng),cf(n.lat),ZC(r,n.lat))}toLngLat(){return new We(h5e(this.x),i5(this.y))}toAltitude(){return bne(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gne*m5e(i5(this.y))}}});var Uy,o5=f(()=>{Ol();Ii();Uy=class{constructor(t,r,n){this.bounds=vo.convert(this.validateBounds(t)),this.minzoom=r||0,this.maxzoom=n||24}validateBounds(t){return!Array.isArray(t)||t.length!==4?[-180,-90,180,90]:[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]}contains(t){let r=Math.pow(2,t.z),n={minX:Math.floor(Ny(this.bounds.getWest())*r),minY:Math.floor(cf(this.bounds.getNorth())*r),maxX:Math.ceil(Ny(this.bounds.getEast())*r),maxY:Math.ceil(cf(this.bounds.getSouth())*r)};return t.x>=n.minX&&t.x<n.maxX&&t.y>=n.minY&&t.y<n.maxY}}});var Bv,a5=f(()=>{qt();ne();n5();o5();La();$u();Bv=class extends nr{constructor(t,r,n,i){if(super(),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,we(this,rp(r,["url","scheme","tileSize","promoteId"])),this._options=we({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}async load(){this._loaded=!1,this.fire(new ze("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let t=await HC(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(we(this,t),t.bounds&&(this.tileBounds=new Uy(t.bounds,this.minzoom,this.maxzoom)),this.fire(new ze("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new ze("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new rr(t))}}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return we({},this._options)}async loadTile(t){let r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(r,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};n.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(!t.actor||t.state==="expired")t.actor=this.dispatcher.getActor(),i="LT";else if(t.state==="loading")return new Promise((o,a)=>{t.reloadPromise={resolve:o,reject:a}});t.abortController=new AbortController;try{let o=await t.actor.sendAsync({type:i,data:n},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,o)}catch(o){if(delete t.abortController,t.aborted)return;if(o&&o.status!==404)throw o;this._afterTileLoadWorkerResponse(t,null)}}_afterTileLoadWorkerResponse(t,r){if(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),r&&this.map._refreshExpiredTiles&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),t.reloadPromise){let n=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(n.resolve).catch(n.reject)}}async abortTile(t){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&await t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}})}async unloadTile(t){t.unloadVectorData(),t.actor&&await t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}hasTransition(){return!1}}});var pf,WC=f(()=>{ne();ny();La();qt();n5();o5();Bi();pf=class extends nr{constructor(t,r,n,i){super(),this.id=t,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=we({type:"raster"},r),we(this,rp(r,["url","scheme","tileSize"]))}async load(t=!1){this._loaded=!1,this.fire(new ze("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=await HC(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(we(this,r),r.bounds&&(this.tileBounds=new Uy(r.bounds,this.minzoom,this.maxzoom)),this.fire(new ze("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new ze("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(r){this._tileJSONRequest=null,this.fire(new rr(r))}}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return we({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}async loadTile(t){let r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{let n=await Es.getImage(this.map._requestManager.transformRequest(r,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted){t.state="unloaded";return}if(n&&n.data){this.map._refreshExpiredTiles&&(n.cacheControl||n.expires)&&t.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});let i=this.map.painter.context,o=i.gl,a=n.data;t.texture=this.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new Yr(i,a,o.RGBA,{useMipmap:!0}),t.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(n){if(delete t.abortController,t.aborted)t.state="unloaded";else if(n)throw t.state="errored",n}}async abortTile(t){t.abortController&&(t.abortController.abort(),delete t.abortController)}async unloadTile(t){t.texture&&this.map.painter.saveTileTexture(t.texture)}hasTransition(){return!1}}});function _ne(e,t,r){t=Math.pow(2,r)-t-1;var n=vne(e*256,t*256,r),i=vne((e+1)*256,(t+1)*256,r);return n[0]+","+n[1]+","+i[0]+","+i[1]}function vne(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r),i=e*n-2*Math.PI*6378137/2,o=t*n-2*Math.PI*6378137/2;return[i,o]}var Sne=f(()=>{});function wne(e,t,r){return!(e<sE||e>ey||r<0||r>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}var s5=f(()=>{ne();Ii()});function $y(e,t,r,n,i){e*=2,e<0&&(e=e*-1-1);let o=1<<r;return(o*o*e+o*i+n).toString(36)+r.toString(36)+t.toString(36)}function y5e(e,t,r){let n="",i;for(let o=e;o>0;o--)i=1<<o-1,n+=(t&i?1:0)+(r&i?2:0);return n}var Tne,df,zv,sn,Rs=f(()=>{Sne();Ot();Tne=Ie($e(),1);Ii();nn();ne();s5();df=class{constructor(t,r,n){if(!wne(t,r,n))throw new Error(`x=${r}, y=${n}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} ${sE}<=z<=${ey} `);this.z=t,this.x=r,this.y=n,this.key=$y(0,t,t,r,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,n){let i=_ne(this.x,this.y,this.z),o=y5e(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(n==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,o).replace(/{bbox-epsg-3857}/g,i)}isChildOf(t){let r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){let r=Math.pow(2,this.z);return new Tne.default((t.x*r-this.x)*8192,(t.y*r-this.y)*8192)}toString(){return`${this.z}/${this.x}/${this.y}`}},zv=class{constructor(t,r){this.wrap=t,this.canonical=r,this.key=$y(t,r.z,r.z,r.x,r.y)}},sn=class e{constructor(t,r,n,i,o){this.terrainRttPosMatrix32f=null;if(t<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${n}`);this.overscaledZ=t,this.wrap=r,this.canonical=new df(n,+i,+o),this.key=$y(r,t,n,i,o)}clone(){return new e(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let r=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let n=this.canonical.z-t;return t>this.canonical.z?$y(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):$y(this.wrap*+r,t,t,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(t){if(t.wrap!==this.wrap)return!1;let r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let r=this.canonical.z+1,n=this.canonical.x*2,i=this.canonical.y*2;return[new e(r,this.wrap,r,n,i),new e(r,this.wrap,r,n+1,i),new e(r,this.wrap,r,n,i+1),new e(r,this.wrap,r,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap?!0:this.wrap>t.wrap?!1:this.overscaledZ<t.overscaledZ?!0:this.overscaledZ>t.overscaledZ?!1:this.canonical.x<t.canonical.x?!0:this.canonical.x>t.canonical.x?!1:this.canonical.y<t.canonical.y}wrapped(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zv(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new an(t.x-this.wrap,t.y))}};K("CanonicalTileID",df);K("OverscaledTileID",sn,{omit:["terrainRttPosMatrix32f"]})});var Nv,l5=f(()=>{ny();La();ne();tn();eR();Rs();WC();IB();rR();Os();$u();Nv=class extends pf{constructor(t,r,n,i){super(t,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=we({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}async loadTile(t){let r=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n=this.map._requestManager.transformRequest(r,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{let i=await Es.getImage(n,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted){t.state="unloaded";return}if(i&&i.data){let o=i.data;this.map._refreshExpiredTiles&&(i.cacheControl||i.expires)&&t.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});let s=Ts(o)&&rE()?o:await this.readImageNow(o),l={type:this.type,uid:t.uid,source:this.id,rawImageData:s,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();let u=await t.actor.sendAsync({type:"LDT",data:l});t.dem=u,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(i){if(delete t.abortController,t.aborted)t.state="unloaded";else if(i)throw t.state="errored",i}}async readImageNow(t){if(typeof VideoFrame<"u"&&tR()){let r=t.width+2,n=t.height+2;try{return new hn({width:r,height:n},await see(t,-1,-1,r,n))}catch{}}return Rt.getImageData(t,1)}_getNeighboringTiles(t){let r=t.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=r.x===0?t.wrap-1:t.wrap,a=(r.x+1+n)%n,s=r.x+1===n?t.wrap+1:t.wrap,l={};return l[new sn(t.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},l[new sn(t.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new sn(t.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},l[new sn(t.overscaledZ,t.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new sn(t.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new sn(t.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},l[new sn(t.overscaledZ,t.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new sn(t.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l}async unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&await t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}})}}});var Uv,u5=f(()=>{qt();ne();Ot();La();tn();Ol();$u();Uv=class extends nr{constructor(t,r,n,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=we({},r),this._collectResourceTiming=r.collectResourceTiming,r.maxzoom!==void 0&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId,r.clusterMaxZoom!==void 0&&this.maxzoom<=r.clusterMaxZoom&&Cr(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=we({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(r.buffer!==void 0?r.buffer:128),tolerance:this._pixelsToTileUnits(r.tolerance!==void 0?r.tolerance:.375),extent:8192,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(r.clusterMaxZoom),minPoints:Math.max(2,r.clusterMinPoints||2),extent:8192,radius:this._pixelsToTileUnits(r.clusterRadius||50),log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(t){return t*(8192/this.tileSize)}_getClusterMaxZoom(t){let r=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||Cr(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${r}"`),r}async load(){await this._updateWorkerData()}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}async getData(){let t=we({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}getCoordinatesFromGeometry(t){return t.type==="GeometryCollection"?t.geometries.map(r=>r.coordinates).flat(1/0):t.coordinates.flat(1/0)}async getBounds(){let t=new vo,r=await this.getData(),n;switch(r.type){case"FeatureCollection":n=r.features.map(i=>this.getCoordinatesFromGeometry(i.geometry)).flat(1/0);break;case"Feature":n=this.getCoordinatesFromGeometry(r.geometry);break;default:n=this.getCoordinatesFromGeometry(r);break}if(n.length==0)return t;for(let i=0;i<n.length-1;i+=2)t.extend([n[i],n[i+1]]);return t}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,r,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:r,offset:n}})}async _updateWorkerData(t){let r=we({type:this.type},this.workerOptions);t?r.dataDiff=t:typeof this._data=="string"?(r.request=this.map._requestManager.transformRequest(Rt.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new ze("dataloading",{dataType:"source"}));try{let n=await this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||n.abandoned){this.fire(new ze("dataabort",{dataType:"source"}));return}let i=null;n.resourceTiming&&n.resourceTiming[this.id]&&(i=n.resourceTiming[this.id].slice(0));let o={dataType:"source"};this._collectResourceTiming&&i&&i.length>0&&we(o,{resourceTiming:i}),this.fire(new ze("data",{...o,sourceDataType:"metadata"})),this.fire(new ze("data",{...o,sourceDataType:"content"}))}catch(n){if(this._pendingLoads--,this._removed){this.fire(new ze("dataabort",{dataType:"source"}));return}this.fire(new rr(n))}}loaded(){return this._pendingLoads===0}async loadTile(t){let r=t.actor?"RT":"LT";t.actor=this.actor;let n={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};t.abortController=new AbortController;let i=await this.actor.sendAsync({type:r,data:n},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(i,this.map.painter,r==="RT")}async abortTile(t){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}async unloadTile(t){t.unloadVectorData(),await this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return we({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}});var $v,ei,yp=f(()=>{$v=Ie($e(),1),ei=class e{constructor(){this.minX=1/0;this.maxX=-1/0;this.minY=1/0;this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){let r=new e;return r.extend(t(new $v.default(this.minX,this.minY))),r.extend(t(new $v.default(this.maxX,this.minY))),r.extend(t(new $v.default(this.minX,this.maxY))),r.extend(t(new $v.default(this.maxX,this.maxY))),r}static fromPoints(t){let r=new e;for(let n of t)r.extend(n);return r}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}});function g5e(e){let t=ei.fromPoints(e),r=t.width(),n=t.height(),i=Math.max(r,n),o=Math.max(0,Math.floor(-Math.log(i)/Math.LN2)),a=Math.pow(2,o);return new df(o,Math.floor((t.minX+t.maxX)/2*a),Math.floor((t.minY+t.maxY)/2*a))}function x5e(e){let t=e[1].x-e[0].x,r=e[1].y-e[0].y,n=e[2].x-e[0].x,i=e[2].y-e[0].y;return t*i-r*n<0}var Bs,ff=f(()=>{Rs();qt();ny();La();Bi();Ii();ne();yp();Bs=class extends nr{constructor(r,n,i,o){super();this.flippedWindingOrder=!1;this.id=r,this.dispatcher=i,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=n}async load(r){this._loaded=!1,this.fire(new ze("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let n=await Es.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,r&&(this.coordinates=r),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,this.fire(new rr(n))}}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ze("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let n=r.map(an.fromLngLat);return this.tileID=g5e(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map(i=>this.tileID.getTilePoint(i)._round()),this.flippedWindingOrder=x5e(this.tileCoords),this.fire(new ze("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,n=r.gl;this.texture||(this.texture=new Yr(r,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(let o in this.tiles){let a=this.tiles[o];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,i=!0)}i&&this.fire(new ze("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}async loadTile(r){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let{minX:n,minY:i,maxX:o,maxY:a}=ei.fromPoints(r),s={};for(let l=0;l<=ey;l++){let u=Math.pow(2,l),c=Math.floor(n*u),p=Math.floor(i*u),d=Math.floor(o*u),h=Math.floor(a*u);s[l]={minTileX:c,minTileY:p,maxTileX:d,maxTileY:h}}return s}}});var Vv,c5=f(()=>{Is();La();ff();Bi();qt();wn();Vv=class extends Bs{constructor(t,r,n,i){super(t,r,n,i),this.roundZoom=!0,this.type="video",this.options=r}async load(){this._loaded=!1;let t=this.options;this.urls=[];for(let r of t.urls)this.urls.push(this.map._requestManager.transformRequest(r,"Source").url);try{let r=await cee(this.urls);if(this._loaded=!0,!r)return;this.video=r,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(r){this.fire(new rr(r))}}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){let r=this.video.seekable;t<r.start(0)||t>r.end(0)?this.fire(new rr(new X(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let t=this.map.painter.context,r=t.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new Yr(t,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let n=!1;for(let i in this.tiles){let o=this.tiles[i];o.state!=="loaded"&&(o.state="loaded",o.texture=this.texture,n=!0)}n&&this.fire(new ze("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}});var jv,p5=f(()=>{ff();Bi();qt();wn();jv=class extends Bs{constructor(t,r,n,i){super(t,r,n,i),r.coordinates?(!Array.isArray(r.coordinates)||r.coordinates.length!==4||r.coordinates.some(o=>!Array.isArray(o)||o.length!==2||o.some(a=>typeof a!="number")))&&this.fire(new rr(new X(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new rr(new X(`sources.${t}`,null,'missing required property "coordinates"'))),r.animate&&typeof r.animate!="boolean"&&this.fire(new rr(new X(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),r.canvas?typeof r.canvas!="string"&&!(r.canvas instanceof HTMLCanvasElement)&&this.fire(new rr(new X(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new rr(new X(`sources.${t}`,null,'missing required property "canvas"'))),this.options=r,this.animate=r.animate!==void 0?r.animate:!0}async load(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new rr(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let r=this.map.painter.context,n=r.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Yr(r,this.canvas,n.RGBA,{premultiply:!0});let i=!1;for(let o in this.tiles){let a=this.tiles[o];a.state!=="loaded"&&(a.state="loaded",a.texture=this.texture,i=!0)}i&&this.fire(new ze("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}});var b5e,Ine,v5e,d5=f(()=>{a5();WC();l5();u5();c5();ff();p5();b5e={},Ine=(e,t,r,n)=>{let i=v5e(t.type),o=new i(e,t,r,n);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return o},v5e=e=>{switch(e){case"geojson":return Uv;case"image":return Bs;case"raster":return pf;case"raster-dem":return Nv;case"vector":return Bv;case"video":return Vv;case"canvas":return jv}return b5e[e]}});function Ene(e,t){let r={};if(!t)return r;for(let n of e){let i=n.layerIds.map(o=>t.getLayer(o)).filter(Boolean);if(i.length!==0){n.layers=i,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map(o=>i.filter(a=>a.id===o)[0]));for(let o of i)r[o.id]=n}}return r}var Cne=f(()=>{});var XC,Pne=f(()=>{XC=class{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){let n=t[r];this._stringToNumber[n]=r,this._numberToString[r]=n}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}});var Vy,f5=f(()=>{Vy=class{constructor(t,r,n,i,o){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=n,t._y=i,this.properties=t.properties,this.id=o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){let t={geometry:this.geometry};for(let r in this)r==="_geometry"||r==="_vectorTileFeature"||(t[r]=this[r]);return t}}});function Mne(e,t,r,n,i){return lR(e,(o,a)=>{let s=t instanceof Zb?t.get(a):null;return s&&s.evaluate?s.evaluate(r,n,i):s})}function _5e(e,t){return t-e}var Ane,Dne,h5,Lne=f(()=>{pp();dp();Ot();wn();QR();Pne();Ane=Ie(Mv(),1),Dne=Ie(jB(),1);f5();ne();nn();wi();fp();Tn();Qn();yp();h5=class{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Kd(8192,16,0),this.grid3D=new Kd(8192,16,0),this.featureIndexArray=new yv,this.promoteId=r}insert(t,r,n,i,o,a){let s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,o);let l=a?this.grid3D:this.grid;for(let u=0;u<r.length;u++){let c=r[u],p=[1/0,1/0,-1/0,-1/0];for(let d=0;d<c.length;d++){let h=c[d];p[0]=Math.min(p[0],h.x),p[1]=Math.min(p[1],h.y),p[2]=Math.max(p[2],h.x),p[3]=Math.max(p[3],h.y)}p[0]<8192&&p[1]<8192&&p[2]>=0&&p[3]>=0&&l.insert(s,p[0],p[1],p[2],p[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ane.default.VectorTile(new Dne.default(this.rawTileData)).layers,this.sourceLayerCoder=new XC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,n,i){this.loadVTLayers();let o=t.params,a=8192/t.tileSize/t.scale,s=jb(o.filter),l=t.queryGeometry,u=t.queryPadding*a,c=ei.fromPoints(l),p=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),d=ei.fromPoints(t.cameraQueryGeometry).expandBy(u),h=this.grid3D.query(d.minX,d.minY,d.maxX,d.maxY,(b,_,T,I)=>Nte(t.cameraQueryGeometry,b-u,_-u,T+u,I+u));for(let b of h)p.push(b);p.sort(_5e);let m={},x;for(let b=0;b<p.length;b++){let _=p[b];if(_===x)continue;x=_;let T=this.featureIndexArray.get(_),I=null;this.loadMatchingFeature(m,T.bucketIndex,T.sourceLayerIndex,T.featureIndex,s,o.layers,o.availableImages,r,n,i,(S,E,P)=>(I||(I=go(S)),E.queryIntersectsFeature({queryGeometry:l,feature:S,featureState:P,geometry:I,zoom:this.z,transform:t.transform,pixelsToTileUnits:a,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return m}loadMatchingFeature(t,r,n,i,o,a,s,l,u,c,p){let d=this.bucketLayerIDs[r];if(a&&!d.some(_=>a.has(_)))return;let h=this.sourceLayerCoder.decode(n),x=this.vtLayers[h].feature(i);if(o.needGeometry){let _=xo(x,!0);if(!o.filter(new mt(this.tileID.overscaledZ),_,this.tileID.canonical))return}else if(!o.filter(new mt(this.tileID.overscaledZ),x))return;let b=this.getId(x,h);for(let _=0;_<d.length;_++){let T=d[_];if(a&&!a.has(T))continue;let I=l[T];if(!I)continue;let S={};b&&c&&(S=c.getState(I.sourceLayer||"_geojsonTileLayer",b));let E=we({},u[T]);E.paint=Mne(E.paint,I.paint,x,S,s),E.layout=Mne(E.layout,I.layout,x,S,s);let P=!p||p(x,I,S);if(!P)continue;let L=new Vy(x,this.z,this.x,this.y,b);L.layer=E;let k=t[T];k===void 0&&(k=t[T]=[]),k.push({featureIndex:i,feature:L,intersectionZ:P})}}lookupSymbolFeatures(t,r,n,i,o,a,s,l){let u={};this.loadVTLayers();let c=jb(o);for(let p of t)this.loadMatchingFeature(u,n,i,p,c,a,s,l,r);return u}hasLayer(t){for(let r of this.bucketLayerIDs)for(let n of r)if(t===n)return!0;return!1}getId(t,r){let n=t.id;if(this.promoteId){let i=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];n=t.properties[i],typeof n=="boolean"&&(n=Number(n)),n===void 0&&t.properties?.cluster&&this.promoteId&&(n=Number(t.properties.cluster_id))}return n}};K("FeatureIndex",h5,{omit:["rawTileData","sourceLayerCoder"]})});var m5,y5=f(()=>{m5="RTLPluginLoaded"});function qC(){return g5||(g5=new x5),g5}var x5,g5,YC=f(()=>{tn();qt();y5();GC();$u();x5=class extends nr{constructor(){super(...arguments);this.status="unavailable";this.url=null;this.dispatcher=r5()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(n=>{throw this.status="error",n})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}async setRTLTextPlugin(r,n=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Rt.resolveURL(r),!this.url)throw new Error(`requested url ${r} is invalid`);if(this.status==="unavailable")if(n)this.status="deferred",this._syncState(this.status);else return this._requestImport();else if(this.status==="requested")return this._requestImport()}async _requestImport(){await this._syncState("loading"),this.status="loaded",this.fire(new ze(m5))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}},g5=null});var S5e,Gv,b5=f(()=>{ne();Cne();Lne();f5();wn();Oy();Qn();Bi();tn();dp();wi();YC();S5e=3e4,Gv=class{constructor(t,r){this.timeAdded=0;this.fadeEndTime=0;this.tileID=t,this.uid=sR(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){let r=t+this.timeAdded;r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,r,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!t){this.collisionBoxArray=new cv;return}t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=Ene(t.buckets,r?.style),this.hasSymbolBuckets=!1;for(let i in this.buckets){let o=this.buckets[i];if(o instanceof Fl)if(this.hasSymbolBuckets=!0,n)o.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let i in this.buckets){let o=this.buckets[i];if(o instanceof Fl&&o.hasRTLText){this.hasRTLText=!0,qC().lazyLoad();break}}this.queryPadding=0;for(let i in this.buckets){let o=this.buckets[i];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(i).queryRadius(o))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}unloadVectorData(){for(let t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(let n in this.buckets){let i=this.buckets[n];i.uploadPending()&&i.upload(t)}let r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yr(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yr(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,r,n,i,o,a,s,l,u,c,p){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:o,scale:a,tileSize:this.tileSize,pixelPosMatrix:c,transform:l,params:s,queryPadding:this.queryPadding*u,getElevation:p},t,r,n)}querySourceFeatures(t,r){let n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;let i=n.loadVTLayers(),o=r&&r.sourceLayer?r.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(!a)return;let s=jb(r&&r.filter),{z:l,x:u,y:c}=this.tileID.canonical,p={z:l,x:u,y:c};for(let d=0;d<a.length;d++){let h=a.feature(d);if(s.needGeometry){let b=xo(h,!0);if(!s.filter(new mt(this.tileID.overscaledZ),b,this.tileID.canonical))continue}else if(!s.filter(new mt(this.tileID.overscaledZ),h))continue;let m=n.getId(h,o),x=new Vy(h,l,u,c,m);x.tile=p,t.push(x)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){let r=this.expirationTime;if(t.cacheControl){let n=nee(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+n["max-age"]*1e3)}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){let n=Date.now(),i=!1;if(this.expirationTime>n)i=!1;else if(!r)i=!0;else if(this.expirationTime<r)i=!0;else{let o=this.expirationTime-r;o?this.expirationTime=n+Math.max(o,S5e):i=!0}i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;let n=this.latestFeatureIndex.loadVTLayers();for(let i in this.buckets){if(!r.style.hasLayer(i))continue;let o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=t[a];if(!s||!l||Object.keys(l).length===0)continue;o.update(l,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});let u=r&&r.style&&r.style.getLayer(i);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(o)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Rt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Rt.now()+t}setDependencies(t,r){let n={};for(let i of r)n[i]=!0;this.dependencies[t]=n}hasDependency(t,r){for(let n of t){let i=this.dependencies[n];if(i){for(let o of r)if(i[o])return!0}}return!1}}});var JC,Fne=f(()=>{JC=class{constructor(t,r){this.max=t,this.onRemove=r,this.reset()}reset(){for(let t in this.data)for(let r of this.data[t])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(t,r,n){let i=t.wrapped().key;this.data[i]===void 0&&(this.data[i]=[]);let o={value:r,timeout:void 0};if(n!==void 0&&(o.timeout=setTimeout(()=>{this.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){let a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){let r=this.data[t].shift();return r.timeout&&clearTimeout(r.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),r.value}getByKey(t){let r=this.data[t];return r?r[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,r){if(!this.has(t))return this;let n=t.wrapped().key,i=r===void 0?0:this.data[n].indexOf(r),o=this.data[n][i];return this.data[n].splice(i,1),o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.onRemove(o.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){let r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(t){let r=[];for(let n in this.data)for(let i of this.data[n])t(i.value)||r.push(i);for(let n of r)this.remove(n.value.tileID,n)}}});var KC,kne=f(()=>{ne();KC=class{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,r,n){let i=String(r);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},we(this.stateChanges[t][i],n),this.deletedStates[t]===null){this.deletedStates[t]={};for(let o in this.state[t])o!==i&&(this.deletedStates[t][o]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][i]===null){this.deletedStates[t][i]={};for(let a in this.state[t][i])n[a]||(this.deletedStates[t][i][a]=null)}else for(let a in n)this.deletedStates[t]&&this.deletedStates[t][i]&&this.deletedStates[t][i][a]===null&&delete this.deletedStates[t][i][a]}removeFeatureState(t,r,n){if(this.deletedStates[t]===null)return;let o=String(r);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&r!==void 0)this.deletedStates[t][o]!==null&&(this.deletedStates[t][o]=this.deletedStates[t][o]||{},this.deletedStates[t][o][n]=null);else if(r!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][o]){this.deletedStates[t][o]={};for(n in this.stateChanges[t][o])this.deletedStates[t][o][n]=null}else this.deletedStates[t][o]=null;else this.deletedStates[t]=null}getState(t,r){let n=String(r),i=this.state[t]||{},o=this.stateChanges[t]||{},a=we({},i[n],o[n]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){let s=this.deletedStates[t][r];if(s===null)return{};for(let l in s)delete a[l]}return a}initializeTileState(t,r){t.setFeatureState(this.state,r)}coalesceChanges(t,r){let n={};for(let i in this.stateChanges){this.state[i]=this.state[i]||{};let o={};for(let a in this.stateChanges[i])this.state[i][a]||(this.state[i][a]={}),we(this.state[i][a],this.stateChanges[i][a]),o[a]=this.state[i][a];n[i]=o}for(let i in this.deletedStates){this.state[i]=this.state[i]||{};let o={};if(this.deletedStates[i]===null)for(let a in this.state[i])o[a]={},this.state[i][a]={};else for(let a in this.deletedStates[i]){if(this.deletedStates[i][a]===null)this.state[i][a]={};else for(let l of Object.keys(this.deletedStates[i][a]))delete this.state[i][a][l];o[a]=this.state[i][a]}n[i]=n[i]||{},we(n[i],o)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(let i in t)t[i].setFeatureState(n,r)}}});var w5e,Hv,gp=f(()=>{Ot();ne();Ii();w5e=Ie($e(),1),Hv=89.25});var eP=f(()=>{});function T5e(e,t,r){let n=t.intersectsFrustum(e);if(!r||n===0)return n;let i=t.intersectsPlane(r);return i===0?0:n===2&&i===2?2:1}function One(e,t,r){let i=0,o=(r-t)/10;for(let a=0;a<10;a++){let s=t+(a+.5)/10*(r-t);i+=o*Math.pow(Math.cos(s),e)}return i}function Bne(e,t){return function(r,n,i,o,a){let s=2*((e-1)/Oi(Math.cos(qo(Hv-a))/Math.cos(qo(Hv)))-1),l=Math.acos(i/o),u=2*One(s-1,0,qo(a/2)),c=Math.min(qo(Hv),l+qo(a/2)),p=Math.min(c,l-qo(a/2)),d=One(s-1,p,c),h=Math.atan(n/i),m=Math.hypot(n,i),x=r;return x=x+Oi(o/m/Math.max(.5,Math.cos(qo(a/2)))),x+=s*Oi(Math.cos(h))/2,x-=Oi(Math.max(1,d/u/t))/2,x}}function Zv(e,t){let r=(t.roundZoom?Math.round:Math.floor)(e.zoom+Oi(e.tileSize/t.tileSize));return Math.max(0,r)}function Wv(e,t){let r=e.getCameraFrustum(),n=e.getClippingPlane(),i=e.screenPointToMercatorCoordinate(e.getCameraPoint()),o=an.fromLngLat(e.center,e.elevation);i.z=o.z+Math.cos(e.pitchInRadians)*e.cameraToCenterDistance/e.worldSize;let a=e.getCoveringTilesDetailsProvider(),s=a.allowVariableZoom(e,t),l=Zv(e,t),u=t.minzoom||0,c=t.maxzoom!==void 0?t.maxzoom:e.maxZoom,p=Math.min(Math.max(0,l),c),d=Math.pow(2,p),h=[d*i.x,d*i.y,0],m=[d*o.x,d*o.y,0],x=Math.hypot(o.x-i.x,o.y-i.y),b=Math.abs(o.z-i.z),_=Math.hypot(x,b),T=E=>({zoom:0,x:0,y:0,wrap:E,fullyVisible:!1}),I=[],S=[];if(e.renderWorldCopies&&a.allowWorldCopies())for(let E=1;E<=3;E++)I.push(T(-E)),I.push(T(E));for(I.push(T(0));I.length>0;){let E=I.pop(),P=E.x,L=E.y,k=E.fullyVisible,z={x:P,y:L,z:E.zoom},W=a.getTileBoundingVolume(z,E.wrap,e.elevation,t);if(!k){let j=T5e(r,W,n);if(j===0)continue;k=j===2}let Z=a.distanceToTile2d(i.x,i.y,z,W),Y=l;s&&(Y=(t.calculateTileZoom||C5e)(e.zoom+Oi(e.tileSize/t.tileSize),Z,b,_,e.fov)),Y=(t.roundZoom?Math.round:Math.floor)(Y),Y=Math.max(0,Y);let J=Math.min(Y,c);if(E.wrap=a.getWrap(o,z,E.wrap),E.zoom>=J){if(E.zoom<u)continue;let j=p-E.zoom,ae=h[0]-.5-(P<<j),ve=h[1]-.5-(L<<j),xe=t.reparseOverscaled?Math.max(E.zoom,Y):E.zoom;S.push({tileID:new sn(E.zoom===c?xe:E.zoom,E.wrap,E.zoom,P,L),distanceSq:oE.sqrLen([m[0]-.5-P,m[1]-.5-L]),tileDistanceToCamera:Math.sqrt(ae*ae+ve*ve)});continue}for(let j=0;j<4;j++){let ae=(P<<1)+j%2,ve=(L<<1)+(j>>1),xe=E.zoom+1;I.push({zoom:xe,x:ae,y:ve,wrap:E.wrap,fullyVisible:k})}}return S.sort((E,P)=>E.distanceSq-P.distanceSq).map(E=>E.tileID)}var I5e,E5e,C5e,xp=f(()=>{Rs();iR();Ii();ne();gp();eP();I5e=9.314,E5e=3,C5e=Bne(I5e,E5e)});var v5,zne,Nne=f(()=>{v5=Ie($e(),1);yp();Ot();zne=ei.fromPoints([new v5.default(0,0),new v5.default(8192,8192)])});function Une(e,t){let r=Math.abs(e.wrap*2)-+(e.wrap<0),n=Math.abs(t.wrap*2)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function $ne(e){return e==="raster"||e==="image"||e==="video"}var _5,Gy,S5=f(()=>{d5();b5();qt();Fne();Ii();ne();Ot();_5=Ie($e(),1);tn();Rs();kne();jd();xp();yp();Nne();Gy=class e extends nr{constructor(t,r,n){super(),this.id=t,this.dispatcher=n,this.on("data",i=>this._dataHandler(i)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=Ine(t,r,n,this),this._tiles={},this._cache=new JC(0,i=>this._unloadTile(i)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new KC,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if((this.used!==void 0||this.usedForTerrain!==void 0)&&!this.used&&!this.usedForTerrain)return!0;if(!this._updated)return!1;for(let t in this._tiles){let r=this._tiles[t];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}async _loadTile(t,r,n){try{await this._source.loadTile(t),this._tileLoaded(t,r,n)}catch(i){t.state="errored",i.status!==404?this._source.fire(new rr(i,{tile:t})):this.update(this.transform,this.terrain)}}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new ze("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let r in this._tiles){let n=this._tiles[r];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(Une).map(t=>t.key)}getRenderableIds(t){let r=[];for(let n in this._tiles)this._isIdRenderable(n,t)&&r.push(this._tiles[n]);return t?r.sort((n,i)=>{let o=n.tileID,a=i.tileID,s=new _5.default(o.canonical.x,o.canonical.y)._rotate(-this.transform.bearingInRadians),l=new _5.default(a.canonical.x,a.canonical.y)._rotate(-this.transform.bearingInRadians);return o.overscaledZ-a.overscaledZ||l.y-s.y||l.x-s.x}).map(n=>n.tileID.key):r.map(n=>n.tileID).sort(Une).map(n=>n.key)}hasRenderableParent(t){let r=this.findLoadedParent(t,0);return r?this._isIdRenderable(r.tileID.key):!1}_isIdRenderable(t,r){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(r||!this._tiles[t].holdingForFade())}reload(t){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(let r in this._tiles)t?this._reloadTile(r,"expired"):this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}async _reloadTile(t,r){let n=this._tiles[t];n&&(n.state!=="loading"&&(n.state=r),await this._loadTile(n,t,r))}_tileLoaded(t,r,n){t.timeAdded=Rt.now(),n==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(r,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new ze("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){let r=this.getRenderableIds();for(let i=0;i<r.length;i++){let o=r[i];if(t.neighboringTiles&&t.neighboringTiles[o]){let a=this.getTileByID(o);n(t,a),n(a,t)}}function n(i,o){i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0;let a=o.tileID.canonical.x-i.tileID.canonical.x,s=o.tileID.canonical.y-i.tileID.canonical.y,l=Math.pow(2,i.tileID.canonical.z),u=o.tileID.key;a===0&&s===0||Math.abs(s)>1||(Math.abs(a)>1&&(Math.abs(a+l)===1?a+=l:Math.abs(a-l)===1&&(a-=l)),!(!o.dem||!i.dem)&&(i.dem.backfillBorder(o.dem,a,s),i.neighboringTiles&&i.neighboringTiles[u]&&(i.neighboringTiles[u].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,r,n,i){for(let o in this._tiles){let a=this._tiles[o];if(i[o]||!a.hasData()||a.tileID.overscaledZ<=r||a.tileID.overscaledZ>n)continue;let s=a.tileID;for(;a&&a.tileID.overscaledZ>r+1;){let u=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[u.key],a&&a.hasData()&&(s=u)}let l=s;for(;l.overscaledZ>r;)if(l=l.scaledTo(l.overscaledZ-1),t[l.key]||t[l.canonical.key]){i[s.key]=s;break}}}findLoadedParent(t,r){if(t.key in this._loadedParentTiles){let n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=r?n:null}for(let n=t.overscaledZ-1;n>=r;n--){let i=t.scaledTo(n),o=this._getLoadedTile(i);if(o)return o}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){let r=this._tiles[t.key];return r&&r.hasData()?r:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){let r=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,i=r*n,o=this._maxTileCacheZoomLevels===null?Yo.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels,a=Math.floor(i*o),s=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(s)}handleWrapJump(t){let r=this._prevLng===void 0?t:this._prevLng,i=(t-r)/360,o=Math.round(i);if(this._prevLng=t,o){let a={};for(let s in this._tiles){let l=this._tiles[s];l.tileID=l.tileID.unwrapTo(l.tileID.wrap+o),a[l.tileID.key]=l}this._tiles=a;for(let s in this._timers)clearTimeout(this._timers[s]),delete this._timers[s];for(let s in this._tiles){let l=this._tiles[s];this._setTileReloadTimer(s,l)}}}_updateCoveredAndRetainedTiles(t,r,n,i,o,a){let s={},l={},u=Object.keys(t),c=Rt.now();for(let p of u){let d=t[p],h=this._tiles[p];if(!h||h.fadeEndTime!==0&&h.fadeEndTime<=c)continue;let m=this.findLoadedParent(d,r),x=this.findLoadedSibling(d),b=m||x||null;b&&(this._addTile(b.tileID),s[b.tileID.key]=b.tileID),l[p]=d}this._retainLoadedChildren(l,i,n,t);for(let p in s)t[p]||(this._coveredTiles[p]=!0,t[p]=s[p]);if(a){let p={},d={};for(let h of o)this._tiles[h.key].hasData()?p[h.key]=h:d[h.key]=h;for(let h in d){let m=d[h].children(this._source.maxzoom);this._tiles[m[0].key]&&this._tiles[m[1].key]&&this._tiles[m[2].key]&&this._tiles[m[3].key]&&(p[m[0].key]=t[m[0].key]=m[0],p[m[1].key]=t[m[1].key]=m[1],p[m[2].key]=t[m[2].key]=m[2],p[m[3].key]=t[m[3].key]=m[3],delete d[h])}for(let h in d){let m=d[h],x=this.findLoadedParent(m,this._source.minzoom),b=this.findLoadedSibling(m),_=x||b||null;if(_){p[_.tileID.key]=t[_.tileID.key]=_.tileID;for(let T in p)p[T].isChildOf(_.tileID)&&delete p[T]}}for(let h in this._tiles)p[h]||(this._coveredTiles[h]=!0)}}update(t,r){if(!this._sourceLoaded||this._paused)return;this.transform=t,this.terrain=r,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};let n;!this.used&&!this.usedForTerrain?n=[]:this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(c=>new sn(c.canonical.z,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y)):(n=Wv(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this.usedForTerrain?!1:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(n=n.filter(c=>this._source.hasTile(c))));let i=Zv(t,this._source),o=Math.max(i-e.maxOverzooming,this._source.minzoom),a=Math.max(i+e.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let c={};for(let p of n)if(p.canonical.z>this._source.minzoom){let d=p.scaledTo(p.canonical.z-1);c[d.key]=d;let h=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));c[h.key]=h}n=n.concat(Object.values(c))}let s=n.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new ze("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let l=this._updateRetainedTiles(n,i);$ne(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,i,n,r);for(let c in l)this._tiles[c].clearFadeHold();let u=ree(this._tiles,l);for(let c of u){let p=this._tiles[c];p.hasSymbolBuckets&&!p.holdingForFade()?p.setHoldDuration(this.map._fadeDuration):(!p.hasSymbolBuckets||p.symbolFadeFinished())&&this._removeTile(c)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,r){let n={},i={},o=Math.max(r-e.maxOverzooming,this._source.minzoom),a=Math.max(r+e.maxUnderzooming,this._source.minzoom),s={};for(let l of t){let u=this._addTile(l);n[l.key]=l,!u.hasData()&&r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,n);for(let l of t){let u=this._tiles[l.key];if(u.hasData())continue;if(r+1>this._source.maxzoom){let p=l.children(this._source.maxzoom)[0],d=this.getTile(p);if(d&&d.hasData()){n[p.key]=p;continue}}else{let p=l.children(this._source.maxzoom);if(n[p[0].key]&&n[p[1].key]&&n[p[2].key]&&n[p[3].key])continue}let c=u.wasRequested();for(let p=l.overscaledZ-1;p>=o;--p){let d=l.scaledTo(p);if(i[d.key])break;if(i[d.key]=!0,u=this.getTile(d),!u&&c&&(u=this._addTile(d)),u){let h=u.hasData();if((h||!this.map?.cancelPendingTileRequestsWhileZooming||c)&&(n[d.key]=d),c=u.wasRequested(),h)break}}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let t in this._tiles){let r=[],n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}r.push(i.key);let o=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(o),n)break;i=o}for(let o of r)this._loadedParentTiles[o]=n}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let t in this._tiles){let r=this._tiles[t].tileID,n=this._getLoadedTile(r);this._loadedSiblingTiles[r.key]=n}}_addTile(t){let r=this._tiles[t.key];if(r)return r;r=this._cache.getAndRemove(t),r&&(this._setTileReloadTimer(t.key,r),r.tileID=t,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,r)));let n=r;return r||(r=new Gv(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(r,t.key,r.state)),r.uses++,this._tiles[t.key]=r,n||this._source.fire(new ze("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(t,r){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);let n=r.getExpiryTimeout();n&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},n))}refreshTiles(t){for(let r in this._tiles)!this._isIdRenderable(r)&&this._tiles[r].state!="errored"||t.some(n=>n.equals(this._tiles[r].tileID.canonical))&&this._reloadTile(r,"expired")}_removeTile(t){let r=this._tiles[t];r&&(r.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(r.uses>0)&&(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}_dataHandler(t){let r=t.sourceDataType;t.dataType==="source"&&r==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&r==="content"&&(this.reload(t.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,r,n){let i=[],o=this.transform;if(!o)return i;let a=o.getCoveringTilesDetailsProvider().allowWorldCopies(),s=n?o.getCameraQueryGeometry(t):t,l=h=>o.screenPointToMercatorCoordinate(h,this.terrain),u=this.transformBbox(t,l,!a),c=this.transformBbox(s,l,!a),p=this.getIds(),d=ei.fromPoints(c);for(let h=0;h<p.length;h++){let m=this._tiles[p[h]];if(m.holdingForFade())continue;let x=a?[m.tileID]:[m.tileID.unwrapTo(-1),m.tileID.unwrapTo(0)],b=Math.pow(2,o.zoom-m.tileID.overscaledZ),_=r*m.queryPadding*8192/m.tileSize/b;for(let T of x){let I=d.map(S=>T.getTilePoint(new an(S.x,S.y)));if(I.expandBy(_),I.intersects(zne)){let S=u.map(P=>T.getTilePoint(P)),E=c.map(P=>T.getTilePoint(P));i.push({tile:m,tileID:a?T:T.unwrapTo(0),queryGeometry:S,cameraQueryGeometry:E,scale:b})}}}return i}transformBbox(t,r,n){let i=t.map(r);if(n){let o=ei.fromPoints(t);o.shrinkBy(Math.min(o.width(),o.height())*.001);let a=o.map(r);ei.fromPoints(i).covers(a)||(i=i.map(l=>l.x>.5?new an(l.x-1,l.y,l.z):l))}return i}getVisibleCoordinates(t){let r=this.getRenderableIds(t).map(n=>this._tiles[n].tileID);return this.transform&&this.transform.populateCache(r),r}hasTransition(){if(this._source.hasTransition())return!0;if($ne(this._source.type)){let t=Rt.now();for(let r in this._tiles)if(this._tiles[r].fadeEndTime>=t)return!0}return!1}setFeatureState(t,r,n){t=t||"_geojsonTileLayer",this._state.updateState(t,r,n)}removeFeatureState(t,r,n){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,r,n)}getFeatureState(t,r){return t=t||"_geojsonTileLayer",this._state.getState(t,r)}setDependencies(t,r,n){let i=this._tiles[t];i&&i.setDependencies(r,n)}reloadTilesForDependencies(t,r){for(let n in this._tiles)this._tiles[n].hasDependency(t,r)&&this._reloadTile(n,"reloading");this._cache.filter(n=>!n.hasDependency(t,r))}};Gy.maxOverzooming=10;Gy.maxUnderzooming=3});var P5e,w5=f(()=>{P5e=Ie($e(),1)});var Vne=f(()=>{ne()});var jne=f(()=>{});var M5e,Azt,Xv=f(()=>{M5e=Ie($e(),1);ky();Oy();mp();ne();Azt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])});var F5e,Zne=f(()=>{F5e=Ie($e(),1);w5();Vne();fp();jne();lf();Xv();ne();yp()});var Wne,qv,T5=f(()=>{Wne=Ie($e(),1);nn();qv=class e extends Wne.default{constructor(t,r,n,i){super(t,r),this.angle=n,i!==void 0&&(this.segment=i)}clone(){return new e(this.x,this.y,this.angle,this.segment)}};K("Anchor",qv)});var Xne=f(()=>{});var qne=f(()=>{T5();Xne()});var O5e,Yne=f(()=>{O5e=Ie($e(),1);MC();mp();DC();lf()});var R5e,Jne=f(()=>{R5e=Ie($e(),1);mp()});var Kne=f(()=>{});var B5e,Qne=f(()=>{Kne();B5e=Ie($e(),1);fp();yp()});var z5e,I5=f(()=>{lf();z5e=Number.POSITIVE_INFINITY});var U5e,eie=f(()=>{T5();qne();w5();mp();Yne();Jne();ne();vy();Qne();Ot();Oy();wi();ky();lf();U5e=Ie(dB(),1);BC();I5();sf()});var j5e,iUt,oUt,aUt,sUt,lUt,uUt,cUt,tie=f(()=>{Zne();Ot();ky();Xv();eie();mp();tp();j5e=Ie($e(),1);XB();ne();I5();iUt=Math.pow(2,25),oUt=Math.pow(2,24),aUt=Math.pow(2,17),sUt=Math.pow(2,16),lUt=Math.pow(2,9),uUt=Math.pow(2,8),cUt=Math.pow(2,1)});var rie=f(()=>{tn();tie()});var gUt,E5=f(()=>{Ot();gUt=512/8192/2});var nie,iie=f(()=>{nie=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`});var oie,aie=f(()=>{oie=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`});var sie,lie=f(()=>{sie=`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var uie,cie=f(()=>{uie="in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"});var pie,die=f(()=>{pie=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var fie,hie=f(()=>{fie="uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"});var mie,yie=f(()=>{mie=`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var gie,xie=f(()=>{gie=`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`});var C5,bie=f(()=>{C5="void main() {fragColor=vec4(1.0);}"});var vie,_ie=f(()=>{vie="in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"});var Sie,wie=f(()=>{Sie=`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Tie,Iie=f(()=>{Tie=`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`});var Eie,Cie=f(()=>{Eie=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`});var Pie,Mie=f(()=>{Pie="uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"});var Aie,Die=f(()=>{Aie="in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}"});var Lie,Fie=f(()=>{Lie="in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"});var kie,Oie=f(()=>{kie="in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}"});var Rie,Bie=f(()=>{Rie="in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"});var zie,Nie=f(()=>{zie=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Uie,$ie=f(()=>{Uie="uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"});var Vie,jie=f(()=>{Vie="uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}"});var Gie,Hie=f(()=>{Gie="in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"});var Zie,Wie=f(()=>{Zie=`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`});var Xie,qie=f(()=>{Xie=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Yie,Jie=f(()=>{Yie=`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`});var Kie,Qie=f(()=>{Kie=`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var eoe,toe=f(()=>{eoe=`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`});var roe,noe=f(()=>{roe=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var ioe,ooe=f(()=>{ioe=`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`});var aoe,soe=f(()=>{aoe=`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var loe,uoe=f(()=>{loe=`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`});var coe,poe=f(()=>{coe=`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var doe,foe=f(()=>{doe=`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`});var hoe,moe=f(()=>{hoe=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var yoe,goe=f(()=>{yoe=`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`});var xoe,boe=f(()=>{xoe=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var voe,_oe=f(()=>{voe="uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"});var Soe,woe=f(()=>{Soe=`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Toe,Ioe=f(()=>{Toe="uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"});var Eoe,Coe=f(()=>{Eoe=`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Poe,Moe=f(()=>{Poe=`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`});var Aoe,Doe=f(()=>{Aoe=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Loe,Foe=f(()=>{Loe=`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`});var koe,Ooe=f(()=>{koe=`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Roe,Boe=f(()=>{Roe=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`});var zoe,Noe=f(()=>{zoe=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Uoe,$oe=f(()=>{Uoe=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`});var Voe,joe=f(()=>{Voe=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Goe,Hoe=f(()=>{Goe=`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`});var Zoe,Woe=f(()=>{Zoe=`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Xoe,qoe=f(()=>{Xoe=`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`});var Yoe,Joe=f(()=>{Yoe=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var Koe,Qoe=f(()=>{Koe=`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`});var eae,tae=f(()=>{eae=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`});var rae,nae=f(()=>{rae=`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`});var iae,oae=f(()=>{iae="in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}"});var aae,sae=f(()=>{aae="precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}"});var lae,uae=f(()=>{lae="uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}"});var cae,pae=f(()=>{cae="in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"});var dae,fae=f(()=>{dae="in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"});var hae,mae=f(()=>{hae="in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"});var yae,gae=f(()=>{yae="in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"});var xae,bae=f(()=>{xae="in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}"});var vae,_ae=f(()=>{vae="float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"});var Sae,wae=f(()=>{Sae=`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`});var Tae,Iae=f(()=>{Tae=`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`});var Eae,Cae=f(()=>{Eae="in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"});var Pae,Mae=f(()=>{Pae="uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}"});var Aae,Dae=f(()=>{Aae="in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}"});function ct(e,t){let r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/in ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return e=e.replace(r,(l,u,c,p,d)=>(s[d]=!0,u==="define"?`
#ifndef HAS_UNIFORM_u_${d}
in ${c} ${p} ${d};
#else
uniform ${c} ${p} u_${d};
#endif
`:`
#ifdef HAS_UNIFORM_u_${d}
    ${c} ${p} ${d} = u_${d};
#endif
`)),t=t.replace(r,(l,u,c,p,d)=>{let h=p==="float"?"vec2":"vec4",m=d.match(/color/)?"color":h;return s[d]?u==="define"?`
#ifndef HAS_UNIFORM_u_${d}
uniform lowp float u_${d}_t;
in ${c} ${h} a_${d};
out ${c} ${p} ${d};
#else
uniform ${c} ${p} u_${d};
#endif
`:m==="vec4"?`
#ifndef HAS_UNIFORM_u_${d}
    ${d} = a_${d};
#else
    ${c} ${p} ${d} = u_${d};
#endif
`:`
#ifndef HAS_UNIFORM_u_${d}
    ${d} = unpack_mix_${m}(a_${d}, u_${d}_t);
#else
    ${c} ${p} ${d} = u_${d};
#endif
`:u==="define"?`
#ifndef HAS_UNIFORM_u_${d}
uniform lowp float u_${d}_t;
in ${c} ${h} a_${d};
#else
uniform ${c} ${p} u_${d};
#endif
`:m==="vec4"?`
#ifndef HAS_UNIFORM_u_${d}
    ${c} ${p} ${d} = a_${d};
#else
    ${c} ${p} ${d} = u_${d};
#endif
`:`
#ifndef HAS_UNIFORM_u_${d}
    ${c} ${p} ${d} = unpack_mix_${m}(a_${d}, u_${d}_t);
#else
    ${c} ${p} ${d} = u_${d};
#endif
`}),{fragmentSource:e,vertexSource:t,staticAttributes:n,staticUniforms:a}}var tP,Jv=f(()=>{iie();aie();lie();cie();die();hie();yie();xie();bie();_ie();wie();Iie();Cie();Mie();Die();Fie();Oie();Bie();Nie();$ie();jie();Hie();Wie();qie();Jie();Qie();toe();noe();ooe();soe();uoe();poe();foe();moe();goe();boe();_oe();woe();Ioe();Coe();Moe();Doe();Foe();Ooe();Boe();Noe();$oe();joe();Hoe();Woe();qoe();Joe();Qoe();tae();nae();oae();sae();uae();pae();fae();mae();gae();bae();_ae();wae();Iae();Cae();Mae();Dae();tP={prelude:ct(nie,oie),projectionMercator:ct("",vae),projectionGlobe:ct("",Sae),background:ct(sie,uie),backgroundPattern:ct(pie,fie),circle:ct(mie,gie),clippingMask:ct(C5,vie),heatmap:ct(Sie,Tie),heatmapTexture:ct(Eie,Pie),collisionBox:ct(Aie,Lie),collisionCircle:ct(kie,Rie),colorRelief:ct(zie,Uie),debug:ct(Vie,Gie),depth:ct(C5,Zie),fill:ct(Xie,Yie),fillOutline:ct(Kie,eoe),fillOutlinePattern:ct(roe,ioe),fillPattern:ct(aoe,loe),fillExtrusion:ct(coe,doe),fillExtrusionPattern:ct(hoe,yoe),hillshadePrepare:ct(xoe,voe),hillshade:ct(Soe,Toe),line:ct(Eoe,Poe),lineGradient:ct(Aoe,Loe),linePattern:ct(koe,Roe),lineSDF:ct(zoe,Uoe),raster:ct(Voe,Goe),symbolIcon:ct(Zoe,Xoe),symbolSDF:ct(Yoe,Koe),symbolTextAndIcon:ct(eae,rae),terrain:ct(lae,cae),terrainDepth:ct(iae,dae),terrainCoords:ct(aae,hae),projectionErrorMeasurement:ct(xae,yae),atmosphere:ct(Tae,Eae),sky:ct(Pae,Aae)}});var hf=f(()=>{});var Kv,Hy=f(()=>{za();Kv=Ct([{name:"a_pos",type:"Int16",components:2}])});var rP=f(()=>{Ot();Jv();hf();Qn();Ti();Hy();vC()});var G5e,P5=f(()=>{G5e=Ie($e(),1);ne()});var W5e,Zy=f(()=>{mn();Ol();W5e=Ie($e(),1);ne();P5();Ii();gp();Ot();yp()});var M5=f(()=>{eP()});var Lae=f(()=>{Rs();M5();ne()});var A5=f(()=>{M5();ne()});var eze,nP=f(()=>{mn();Ii();eze=Ie($e(),1);ne();Rs();Xv();Ol();gp();Ot();Zy();Lae();A5()});var tze,D5=f(()=>{tze=Ie($e(),1);ne();gp()});var iP=f(()=>{mn();D5();Zy();ne();gp()});var aze,Bae,sze,Cn,Yu=f(()=>{wn();aze=0,Bae=1,sze=771,Cn=class{constructor(t,r,n){this.blendFunction=t,this.blendColor=r,this.mask=n}};Cn.Replace=[Bae,aze];Cn.disabled=new Cn(Cn.Replace,Ve.transparent,[!1,!1,!1,!1]);Cn.unblended=new Cn(Cn.Replace,Ve.transparent,[!0,!0,!0,!0]);Cn.alphaBlended=new Cn([Bae,sze],Ve.transparent,[!0,!0,!0,!0])});var Ar,ti=f(()=>{Ar=class{constructor(t,r,n){this.enable=t,this.mode=r,this.frontFace=n}};Ar.disabled=new Ar(!1,1029,2305);Ar.backCCW=new Ar(!0,1029,2305);Ar.frontCCW=new Ar(!0,1028,2305)});var Dr,Nn=f(()=>{Dr=class{constructor(t,r,n){this.func=t,this.mask=r,this.range=n}};Dr.ReadOnly=!1;Dr.ReadWrite=!0;Dr.disabled=new Dr(519,Dr.ReadOnly,[0,1])});var Un,zi=f(()=>{Un=class{constructor(t,r,n,i,o,a){this.test=t,this.ref=r,this.mask=n,this.fail=i,this.depthFail=o,this.pass=a}};Un.disabled=new Un({func:519,mask:0},0,0,7680,7680,7680)});var L5=f(()=>{En()});var e_=f(()=>{});var zae=f(()=>{Yu();ti();Nn();zi();ne();L5();hf();Ti();Qn();Hy();e_()});var C9t,k5=f(()=>{hf();Qn();Ti();sf();Ot();Hy();C9t=8192/128});var z9t,O5=f(()=>{tn();ne();Ii();vC();Jv();zae();k5();z9t=new of({fill:new ea(128,2),line:new ea(512,0),tile:new ea(128,32),stencil:new ea(128,1),circle:3})});var Z9t,Uae=f(()=>{wn();Tn();qt();wi();rP();O5();Z9t=new Kn({type:new Mr(Ri.projection.type)})});var t_=f(()=>{ne();mn();Ot()});var Vae=f(()=>{});var jae=f(()=>{eP()});var Gae=f(()=>{Ot();t_();Vae();xp();Rs();mn();jae();ne()});var mze,R5=f(()=>{Zy();mn();ne();Rs();mze=Ie($e(),1);Ii();Ol();gp();t_();Gae();A5()});var Wae=f(()=>{Zy();nP();R5();ne()});var gze,B5=f(()=>{gze=Ie($e(),1);D5();mn();t_();ne();Zy()});var qae=f(()=>{iP();B5()});var Yae=f(()=>{ne();rP();nP();iP();Uae();Wae();qae();B5();R5();O5()});var Qjt,z5=f(()=>{qt();Jre();Kre();Qre();one();ane();sne();lne();ne();JB();Is();La();tn();GC();Gb();yne();S5();wn();$C();YC();y5();rie();tB();E5();zC();$u();Yae();Qjt=rte()});var _ze,Jae=f(()=>{za();_ze=Ct([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])});var Kae=f(()=>{});var oP=f(()=>{En()});var Qae=f(()=>{En()});var ese=f(()=>{Jv();Kae();e_();oP();Qae()});var aP=f(()=>{tp()});var N5=f(()=>{aP();En();ne()});var U5=f(()=>{aP();En();ne()});var $5=f(()=>{En();tp();Ot()});var V5=f(()=>{En()});var j5=f(()=>{En()});var G5=f(()=>{En();tp();Ot()});var H5=f(()=>{En();Ot();Ii()});var Z5=f(()=>{En()});var W5=f(()=>{En();tp();ne()});var X5=f(()=>{En()});var q5=f(()=>{En();ne()});var Y5=f(()=>{aP();En();ne()});var J5=f(()=>{En()});var K5=f(()=>{En();gp()});var tse=f(()=>{N5();U5();$5();V5();j5();G5();H5();Z5();W5();X5();q5();Y5();oP();L5();J5();K5()});var rse=f(()=>{});var nse=f(()=>{});var Q5=f(()=>{e_()});var ez=f(()=>{});var ise=f(()=>{Q5();ez()});var ose=f(()=>{rse();nse();ise();Yu();ne();Q5();e_()});var ase=f(()=>{Nn();zi();ti();V5();Qn();NB();Ti()});var wze,ZWt,sse=f(()=>{wze=Ie($e(),1);ase();Ti();tp();ky();iR();zi();Nn();ti();Oy();mp();lf();q5();Xv();ne();ZWt=iE.identity(new Float32Array(16))});var lse=f(()=>{zi();Nn();ti();$5();Ti();ne()});var use=f(()=>{Bi();Nn();zi();Yu();ti();G5();mC()});var cse=f(()=>{Nn();ti();Bi();W5();ne();SB();Ot()});var tz=f(()=>{});var pse=f(()=>{Nn();ti();U5();tz();ne()});var dse=f(()=>{Nn();zi();Yu();ti();N5();tz();ne()});var fse=f(()=>{Bi();zi();Nn();ti();H5()});var hse=f(()=>{Bi();Nn();ti();Z5()});var n_,gqt,mse=f(()=>{ne();ff();tn();zi();Nn();ti();X5();Ot();xp();n_=Ie($e(),1),gqt=[new n_.default(0,0),new n_.default(8192,0),new n_.default(8192,8192),new n_.default(0,8192)]});var yse=f(()=>{zi();Nn();ti();Y5();xp()});var kqt,Oqt,Rqt,Bqt,zqt,gse=f(()=>{Nn();zi();ti();j5();wn();Yu();kqt=new Ve(1,0,0,1),Oqt=new Ve(0,1,0,1),Rqt=new Ve(0,0,1,1),Bqt=new Ve(1,0,1,1),zqt=new Ve(0,1,1,1)});var xse=f(()=>{Nn();zi()});var rz=f(()=>{zi();Nn();oP();ti();Yu()});var bse=f(()=>{zi();Nn();ti();Qn();Hy();Ti();K5();J5();hf();Yu();t_()});var vse=f(()=>{tn();S5();Ot();Ti();Qn();Jae();Hy();E5();Jv();ese();tse();ose();Nn();zi();Yu();ti();Bi();sse();lse();use();cse();pse();dse();fse();hse();mse();yse();gse();xse();rz();bse();hf();rP();xp();BC();bB();mC();BB();LB();RB();wB();EB();YB();qB();zC()});var lP=f(()=>{});var nz=f(()=>{lP();mn()});var Ize,i_,HJt,ZJt,WJt,XJt,qJt,Sse=f(()=>{tn();ne();Ize=Ie($e(),1),i_={linearity:.3,easing:aE(0,0,.3,1)},HJt=we({deceleration:2500,maxSpeed:1400},i_),ZJt=we({deceleration:20,maxSpeed:1400},i_),WJt=we({deceleration:1e3,maxSpeed:360},i_),XJt=we({deceleration:1e3,maxSpeed:90},i_),qJt=we({deceleration:1e3,maxSpeed:360},i_)});var Eze,uP=f(()=>{qt();rn();Eze=Ie($e(),1);ne()});var Tse=f(()=>{uP()});var Mze,Wy=f(()=>{Mze=Ie($e(),1)});var iz=f(()=>{rn();qt();Wy()});var oz=f(()=>{});var Dze,az=f(()=>{Dze=Ie($e(),1);oz()});var Ise=f(()=>{az();Wy()});var sz=f(()=>{rn()});var Fze,kze,gKt,lz=f(()=>{rn();Fze=0,kze=2,gKt={[Fze]:1,[kze]:2}});var Bze,Ese=f(()=>{Bze=Ie($e(),1);rn();sz();lz();ne()});var zze,Cse=f(()=>{zze=Ie($e(),1);oz()});var uz=f(()=>{rn()});var cz=f(()=>{Wy()});var RKt,BKt,pz=f(()=>{rn();ne();tn();mn();Wy();RKt=1/100,BKt=1/450});var dz=f(()=>{});var Pse=f(()=>{Wy()});var Mse=f(()=>{az()});var fz=f(()=>{});var hz=f(()=>{});var mz=f(()=>{});var yz=f(()=>{rn();qt()});var Yze,Ase=f(()=>{qt();rn();Sse();Tse();iz();Ise();Ese();Cse();uz();cz();pz();dz();Pse();Mse();fz();hz();mz();yz();ne();tn();Yze=Ie($e(),1)});var Jze,Dse=f(()=>{ne();tn();mn();Ol();Jze=Ie($e(),1);qt();Ii()});var Lse,gz=f(()=>{rn();Lse={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'}});var xz=f(()=>{rn()});var Fse=f(()=>{});var Kze,HQt,kse=f(()=>{Kze=60,HQt=1e3/Kze});var Qze,Ose=f(()=>{za();Qze=Ct([{name:"a_pos3d",type:"Int16",components:3}])});var Rse=f(()=>{b5();Ot();qt();tn();xp();ne()});var Bse=f(()=>{Rs();Os();ne();Qn();Ose();Ti();Bi();Ii();Rse();Ot();mn();hf();s5();sf()});var zse=f(()=>{Bi()});var Nse=f(()=>{rz();zse();ff()});var Use=f(()=>{});var iNe,_tr,oNe,aNe,sNe,lNe,Str,$se=f(()=>{ne();tn();rn();K6();Is();ny();La();z5();wi();vse();nz();Ase();Dse();mn();Ol();iNe=Ie($e(),1);gz();xz();Os();qt();uP();Fse();lP();fR();kse();Bse();Nse();jd();Use();nP();iP();bb();ez();xp();Rs();_tr=tE.version,oNe=-2,aNe=22,sNe=0,lNe=60,Str={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Lse,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:oNe,maxZoom:aNe,minPitch:sNe,maxPitch:lNe,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:Yo.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0}});var uNe,Vse=f(()=>{uNe=Ie($e(),1);rn();ne();sz();lz()});var jse=f(()=>{});var bz=f(()=>{mn()});var vz=f(()=>{});var fNe,_z=f(()=>{rn();tn();mn();fNe=Ie($e(),1);bz();vz();qt()});var Gse=f(()=>{qt();rn();ne();jse();mn();_z();Ol()});var Hse=f(()=>{rn()});var Zse=f(()=>{rn();ne();qt()});var Wse=f(()=>{rn()});var Xse=f(()=>{rn()});var mNe,drr,qse=f(()=>{ne();qt();rn();mn();mNe=Ie($e(),1);bz();vz();drr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ")});var Yse,bnr,o_=f(()=>{K6();$se();Vse();Gse();gz();xz();Hse();Zse();Wse();Xse();qse();_z();z5();mn();Ol();Yse=Ie($e(),1);Ii();qt();jd();YC();QB();$C();Is();u5();p5();ff();l5();WC();a5();c5();d5();cE();GC();P5();uP();iz();hz();fz();pz();mz();nz();yz();dz();cz();uz();$u();k5();bnr=tE.version});var Na=f(()=>{"use strict";Js()});var _o=f(()=>{"use strict";Js();Ju()});var So=f(()=>{"use strict"});var Jse=f(()=>{"use strict"});var Dnr,Sz=f(()=>{"use strict";Jl();Dnr=new pe});var Kse=f(()=>{"use strict"});var pP=f(()=>{"use strict"});var gNe,Qse,ele,xNe,tle,rle=f(()=>{"use strict";gNe=(()=>{let e;return{getDeviceType(){if(e)return e;let{userAgent:t,platform:r,maxTouchPoints:n}=window.navigator,i=/(iphone|ipod|ipad)/i.test(t),o=r==="iPad"||r.indexOf("Mac")===0&&n>0&&!window.MSStream,a=/android/i.test(t);return e={isIpad:o,isMobile:a||i||o,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t),isWindows:/windows/i.test(t)},e},_reset(){e=void 0}}})(),Qse=gNe.getDeviceType,ele=(()=>{let e,t,r;function n(){if(t!==void 0)return t;e||(e=document.createElement("canvas"));let o=e.getContext("webgl")||e.getContext("experimental-webgl");if(!o)return t;try{let a=Qse().isFirefox?null:o.getExtension("WEBGL_debug_renderer_info");return t=a?o.getParameter(a.UNMASKED_RENDERER_WEBGL):o.getParameter(o.RENDERER),t}catch{let s=new Error("Failed getting device info");throw s.name="FailedGettingDeviceInfo",s}}function i(){if(!Qse().isWindows)return!1;if(r!==void 0)return r;let o=xNe()?.toLowerCase()??"";return r=o.includes("intel")&&(o.includes("uhd")||o.includes("iris")),r}return{getInfo:n,shouldDisableOffscreenCanvas:i,_setCanvas(o){e=o,t=void 0,r=void 0}}})(),xNe=ele.getInfo,tle=ele.shouldDisableOffscreenCanvas});var nle=f(()=>{"use strict"});var ile=f(()=>{"use strict"});var ole=f(()=>{"use strict"});var Xnr,qnr,Ua=f(()=>{"use strict";o_();Jl();Ku();Na();_o();So();X_();Ju();Pe();Jse();Sz();Kse();pP();rle();nle();ile();ole();Xnr=new pe,qnr=new Ci});var dir,fir,dP=f(()=>{"use strict";ln();Jl();Pe();Ua();a_();Ku();dir=new Zi,fir=new pe});var wz,ple,Tz,ENe,a_=f(()=>{"use strict";xr();_o();dP();wz=C.object({visible:C.boolean(),color:C.string(),flipToFaceCamera:C.boolean(),font:C.string().optional(),fontSize:C.number(),margin:C.union([C.number(),C.tuple([C.number(),C.number(),C.number(),C.number()])]),outlineColor:C.string(),outlineOpacity:C.number(),outlineBlur:C.union([C.number(),C.string()]),outlineWidth:C.number(),outlineOffsetX:C.number(),outlineOffsetY:C.number(),strokeWidth:C.number(),maxWidth:C.number().optional(),maxHeight:C.number().optional(),strokeOpacity:C.number(),strokeColor:C.string(),fillOpacity:C.number(),hoverColor:C.string().optional(),id:C.union([C.string(),C.number()]),type:C.literal("text3d"),position:C.tuple([C.number(),C.number(),C.number()]),content:C.string()}),ple=C.strictObject(wz.partial().omit({id:!0,type:!0}).shape),Tz=C.strictObject(ple.omit({margin:!0,position:!0,maxWidth:!0,maxHeight:!0,content:!0}).shape),ENe=C.strictObject({appearance:ple.optional(),parentId:C.string().optional()})});var Iz=f(()=>{"use strict"});var dle=f(()=>{"use strict"});var fle=f(()=>{"use strict"});var hle=f(()=>{"use strict"});var Ez=f(()=>{"use strict";dle();fle();hle()});var Cz=f(()=>{"use strict"});var Pz=f(()=>{"use strict";Ez();_o();ta();So();Cz();jI()});var fP=f(()=>{"use strict"});var l_=f(()=>{"use strict"});var yle=f(()=>{"use strict"});var Mz=f(()=>{"use strict"});var hP=f(()=>{"use strict";Rq();cb();ub();yb();Ua();_s();Ju();Ku();_o();Na();ta();Pe();a_();Iz();Pz();fP();l_();yle();Mz()});var ln=f(()=>{"use strict";hP();Na();_o()});var Cle=ui((Aor,u_)=>{"use strict";var FNe=!1,yf=!1,vle=!0,_le=!1,g={},Sle=!1;typeof u_<"u"&&u_.exports?(u_.exports=g,Sle=!0):typeof document<"u"?window.ClipperLib=g:self.ClipperLib=g;var mP;Sle?(Pn="chrome",mP="Netscape"):(Pn=navigator.userAgent.toString().toLowerCase(),mP=navigator.appName);var Pn,at={};Pn.indexOf("chrome")!=-1&&Pn.indexOf("chromium")==-1?at.chrome=1:at.chrome=0;Pn.indexOf("chromium")!=-1?at.chromium=1:at.chromium=0;Pn.indexOf("safari")!=-1&&Pn.indexOf("chrome")==-1&&Pn.indexOf("chromium")==-1?at.safari=1:at.safari=0;Pn.indexOf("firefox")!=-1?at.firefox=1:at.firefox=0;Pn.indexOf("firefox/17")!=-1?at.firefox17=1:at.firefox17=0;Pn.indexOf("firefox/15")!=-1?at.firefox15=1:at.firefox15=0;Pn.indexOf("firefox/3")!=-1?at.firefox3=1:at.firefox3=0;Pn.indexOf("opera")!=-1?at.opera=1:at.opera=0;Pn.indexOf("msie 10")!=-1?at.msie10=1:at.msie10=0;Pn.indexOf("msie 9")!=-1?at.msie9=1:at.msie9=0;Pn.indexOf("msie 8")!=-1?at.msie8=1:at.msie8=0;Pn.indexOf("msie 7")!=-1?at.msie7=1:at.msie7=0;Pn.indexOf("msie ")!=-1?at.msie=1:at.msie=0;g.biginteger_used=null;var vp,kNe=0xdeadbeefcafe,xle=(kNe&16777215)==15715070;function q(e,t,r){g.biginteger_used=1,e!=null&&(typeof e=="number"&&typeof t>"u"?this.fromInt(e):typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function yt(){return new q(null)}function ONe(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=a&67108863}return i}function RNe(e,t,r,n,i,o){for(var a=t&32767,s=t>>15;--o>=0;){var l=this[e]&32767,u=this[e++]>>15,c=s*l+u*a;l=a*l+((c&32767)<<15)+r[n]+(i&1073741823),i=(l>>>30)+(c>>>15)+s*u+(i>>>30),r[n++]=l&1073741823}return i}function BNe(e,t,r,n,i,o){for(var a=t&16383,s=t>>14;--o>=0;){var l=this[e]&16383,u=this[e++]>>14,c=s*l+u*a;l=a*l+((c&16383)<<14)+r[n]+i,i=(l>>28)+(c>>14)+s*u,r[n++]=l&268435455}return i}xle&&mP=="Microsoft Internet Explorer"?(q.prototype.am=RNe,vp=30):xle&&mP!="Netscape"?(q.prototype.am=ONe,vp=26):(q.prototype.am=BNe,vp=28);q.prototype.DB=vp;q.prototype.DM=(1<<vp)-1;q.prototype.DV=1<<vp;var kz=52;q.prototype.FV=Math.pow(2,kz);q.prototype.F1=kz-vp;q.prototype.F2=2*vp-kz;var zNe="0123456789abcdefghijklmnopqrstuvwxyz",gP=new Array,Yy,$a;Yy=48;for($a=0;$a<=9;++$a)gP[Yy++]=$a;Yy=97;for($a=10;$a<36;++$a)gP[Yy++]=$a;Yy=65;for($a=10;$a<36;++$a)gP[Yy++]=$a;function ble(e){return zNe.charAt(e)}function wle(e,t){var r=gP[e.charCodeAt(t)];return r??-1}function NNe(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function UNe(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function bp(e){var t=yt();return t.fromInt(e),t}function $Ne(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var a=r==8?e[n]&255:wle(e,n);if(a<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this[this.t++]=a:o+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&q.ZERO.subTo(this,this)}function VNe(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function jNe(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(i=!0,o=ble(n));a>=0;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&r,s<=0&&(s+=this.DB,--a)),n>0&&(i=!0),i&&(o+=ble(n));return i?o:"0"}function GNe(){var e=yt();return q.ZERO.subTo(this,e),e}function HNe(){return this.s<0?this.negate():this}function ZNe(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function xP(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function WNe(){return this.t<=0?0:this.DB*(this.t-1)+xP(this[this.t-1]^this.s&this.DM)}function XNe(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function qNe(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function YNe(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(e/this.DB),a=this.s<<r&this.DM,s;for(s=this.t-1;s>=0;--s)t[s+o+1]=this[s]>>n|a,a=(this[s]&i)<<r;for(s=o-1;s>=0;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function JNe(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&o)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}function KNe(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function QNe(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&q.ZERO.subTo(t,t)}function eUe(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function tUe(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=yt());var o=yt(),a=this.s,s=e.s,l=this.DB-xP(n[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,c=o[u-1];if(c!=0){var p=c*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),d=this.FV/p,h=(1<<this.F1)/p,m=1<<this.F2,x=r.t,b=x-u,_=t??yt();for(o.dlShiftTo(b,_),r.compareTo(_)>=0&&(r[r.t++]=1,r.subTo(_,r)),q.ONE.dlShiftTo(u,_),_.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--b>=0;){var T=r[--x]==c?this.DM:Math.floor(r[x]*d+(r[x-1]+m)*h);if((r[x]+=o.am(0,T,r,b,0,u))<T)for(o.dlShiftTo(b,_),r.subTo(_,r);r[x]<--T;)r.subTo(_,r)}t!=null&&(r.drShiftTo(u,t),a!=s&&q.ZERO.subTo(t,t)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&q.ZERO.subTo(r,r)}}}function rUe(e){var t=yt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(q.ZERO)>0&&e.subTo(t,t),t}function gf(e){this.m=e}function nUe(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function iUe(e){return e}function oUe(e){e.divRemTo(this.m,null,e)}function aUe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function sUe(e,t){e.squareTo(t),this.reduce(t)}gf.prototype.convert=nUe;gf.prototype.revert=iUe;gf.prototype.reduce=oUe;gf.prototype.mulTo=aUe;gf.prototype.sqrTo=sUe;function lUe(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function xf(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function uUe(e){var t=yt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(q.ZERO)>0&&this.m.subTo(t,t),t}function cUe(e){var t=yt();return e.copyTo(t),this.reduce(t),t}function pUe(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function dUe(e,t){e.squareTo(t),this.reduce(t)}function fUe(e,t,r){e.multiplyTo(t,r),this.reduce(r)}xf.prototype.convert=uUe;xf.prototype.revert=cUe;xf.prototype.reduce=pUe;xf.prototype.mulTo=fUe;xf.prototype.sqrTo=dUe;function hUe(){return(this.t>0?this[0]&1:this.s)==0}function mUe(e,t){if(e>4294967295||e<1)return q.ONE;var r=yt(),n=yt(),i=t.convert(this),o=xP(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)}function yUe(e,t){var r;return e<256||t.isEven()?r=new gf(t):r=new xf(t),this.exp(e,r)}q.prototype.copyTo=NNe;q.prototype.fromInt=UNe;q.prototype.fromString=$Ne;q.prototype.clamp=VNe;q.prototype.dlShiftTo=XNe;q.prototype.drShiftTo=qNe;q.prototype.lShiftTo=YNe;q.prototype.rShiftTo=JNe;q.prototype.subTo=KNe;q.prototype.multiplyTo=QNe;q.prototype.squareTo=eUe;q.prototype.divRemTo=tUe;q.prototype.invDigit=lUe;q.prototype.isEven=hUe;q.prototype.exp=mUe;q.prototype.toString=jNe;q.prototype.negate=GNe;q.prototype.abs=HNe;q.prototype.compareTo=ZNe;q.prototype.bitLength=WNe;q.prototype.mod=rUe;q.prototype.modPowInt=yUe;q.ZERO=bp(0);q.ONE=bp(1);function gUe(){var e=yt();return this.copyTo(e),e}function xUe(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bUe(){return this.t==0?this.s:this[0]<<24>>24}function vUe(){return this.t==0?this.s:this[0]<<16>>16}function _Ue(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function SUe(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function wUe(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=bp(r),i=yt(),o=yt(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(e)+a}function TUe(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,a=0,s=0;s<e.length;++s){var l=wle(e,s);if(l<0){e.charAt(s)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&q.ZERO.subTo(this,this)}function IUe(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(q.ONE.shiftLeft(e-1),Oz,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(q.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function EUe(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function CUe(e){return this.compareTo(e)==0}function PUe(e){return this.compareTo(e)<0?this:e}function MUe(e){return this.compareTo(e)>0?this:e}function AUe(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function DUe(e,t){return e&t}function LUe(e){var t=yt();return this.bitwiseTo(e,DUe,t),t}function Oz(e,t){return e|t}function FUe(e){var t=yt();return this.bitwiseTo(e,Oz,t),t}function Tle(e,t){return e^t}function kUe(e){var t=yt();return this.bitwiseTo(e,Tle,t),t}function Ile(e,t){return e&~t}function OUe(e){var t=yt();return this.bitwiseTo(e,Ile,t),t}function RUe(){for(var e=yt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function BUe(e){var t=yt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function zUe(e){var t=yt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function NUe(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function UUe(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+NUe(this[e]);return this.s<0?this.t*this.DB:-1}function $Ue(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function VUe(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=$Ue(this[r]^t);return e}function jUe(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function GUe(e,t){var r=q.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function HUe(e){return this.changeBit(e,Oz)}function ZUe(e){return this.changeBit(e,Ile)}function WUe(e){return this.changeBit(e,Tle)}function XUe(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function qUe(e){var t=yt();return this.addTo(e,t),t}function YUe(e){var t=yt();return this.subTo(e,t),t}function JUe(e){var t=yt();return this.multiplyTo(e,t),t}function KUe(){var e=yt();return this.squareTo(e),e}function QUe(e){var t=yt();return this.divRemTo(e,t,null),t}function e8e(e){var t=yt();return this.divRemTo(e,null,t),t}function t8e(e){var t=yt(),r=yt();return this.divRemTo(e,t,r),new Array(t,r)}function r8e(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function n8e(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function c_(){}function Ele(e){return e}function i8e(e,t,r){e.multiplyTo(t,r)}function o8e(e,t){e.squareTo(t)}c_.prototype.convert=Ele;c_.prototype.revert=Ele;c_.prototype.mulTo=i8e;c_.prototype.sqrTo=o8e;function a8e(e){return this.exp(e,new c_)}function s8e(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function l8e(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Jy(e){this.r2=yt(),this.q3=yt(),q.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function u8e(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=yt();return e.copyTo(t),this.reduce(t),t}function c8e(e){return e}function p8e(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function d8e(e,t){e.squareTo(t),this.reduce(t)}function f8e(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Jy.prototype.convert=u8e;Jy.prototype.revert=c8e;Jy.prototype.reduce=p8e;Jy.prototype.mulTo=f8e;Jy.prototype.sqrTo=d8e;function h8e(e,t){var r=e.bitLength(),n,i=bp(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new gf(t):t.isEven()?o=new Jy(t):o=new xf(t);var a=new Array,s=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var c=yt();for(o.sqrTo(a[1],c);s<=u;)a[s]=yt(),o.mulTo(c,a[s-2],a[s]),s+=2}var p=e.t-1,d,h=!0,m=yt(),x;for(r=xP(e[p])-1;p>=0;){for(r>=l?d=e[p]>>r-l&u:(d=(e[p]&(1<<r+1)-1)<<l-r,p>0&&(d|=e[p-1]>>this.DB+r-l)),s=n;(d&1)==0;)d>>=1,--s;if((r-=s)<0&&(r+=this.DB,--p),h)a[d].copyTo(i),h=!1;else{for(;s>1;)o.sqrTo(i,m),o.sqrTo(m,i),s-=2;s>0?o.sqrTo(i,m):(x=i,i=m,m=x),o.mulTo(m,a[d],i)}for(;p>=0&&(e[p]&1<<r)==0;)o.sqrTo(i,m),x=i,i=m,m=x,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}function m8e(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function y8e(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function g8e(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return q.ZERO;for(var r=e.clone(),n=this.clone(),i=bp(1),o=bp(0),a=bp(0),s=bp(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?((!a.isEven()||!s.isEven())&&(a.addTo(this,a),s.subTo(e,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),o.subTo(s,o)):(n.subTo(r,n),t&&a.subTo(i,a),s.subTo(o,s))}if(n.compareTo(q.ONE)!=0)return q.ZERO;if(s.compareTo(e)>=0)return s.subtract(e);if(s.signum()<0)s.addTo(e,s);else return s;return s.signum()<0?s.add(e):s}var Ni=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],x8e=(1<<26)/Ni[Ni.length-1];function b8e(e){var t,r=this.abs();if(r.t==1&&r[0]<=Ni[Ni.length-1]){for(t=0;t<Ni.length;++t)if(r[0]==Ni[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ni.length;){for(var n=Ni[t],i=t+1;i<Ni.length&&n<x8e;)n*=Ni[i++];for(n=r.modInt(n);t<i;)if(n%Ni[t++]==0)return!1}return r.millerRabin(e)}function v8e(e){var t=this.subtract(q.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);e=e+1>>1,e>Ni.length&&(e=Ni.length);for(var i=yt(),o=0;o<e;++o){i.fromInt(Ni[Math.floor(Math.random()*Ni.length)]);var a=i.modPow(n,this);if(a.compareTo(q.ONE)!=0&&a.compareTo(t)!=0){for(var s=1;s++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(q.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}q.prototype.chunkSize=_Ue;q.prototype.toRadix=wUe;q.prototype.fromRadix=TUe;q.prototype.fromNumber=IUe;q.prototype.bitwiseTo=AUe;q.prototype.changeBit=GUe;q.prototype.addTo=XUe;q.prototype.dMultiply=r8e;q.prototype.dAddOffset=n8e;q.prototype.multiplyLowerTo=s8e;q.prototype.multiplyUpperTo=l8e;q.prototype.modInt=y8e;q.prototype.millerRabin=v8e;q.prototype.clone=gUe;q.prototype.intValue=xUe;q.prototype.byteValue=bUe;q.prototype.shortValue=vUe;q.prototype.signum=SUe;q.prototype.toByteArray=EUe;q.prototype.equals=CUe;q.prototype.min=PUe;q.prototype.max=MUe;q.prototype.and=LUe;q.prototype.or=FUe;q.prototype.xor=kUe;q.prototype.andNot=OUe;q.prototype.not=RUe;q.prototype.shiftLeft=BUe;q.prototype.shiftRight=zUe;q.prototype.getLowestSetBit=UUe;q.prototype.bitCount=VUe;q.prototype.testBit=jUe;q.prototype.setBit=HUe;q.prototype.clearBit=ZUe;q.prototype.flipBit=WUe;q.prototype.add=qUe;q.prototype.subtract=YUe;q.prototype.multiply=JUe;q.prototype.divide=QUe;q.prototype.remainder=e8e;q.prototype.divideAndRemainder=t8e;q.prototype.modPow=h8e;q.prototype.modInverse=g8e;q.prototype.pow=a8e;q.prototype.gcd=m8e;q.prototype.isProbablePrime=b8e;q.prototype.square=KUe;var tt=q;tt.prototype.IsNegative=function(){return this.compareTo(tt.ZERO)==-1};tt.op_Equality=function(e,t){return e.compareTo(t)==0};tt.op_Inequality=function(e,t){return e.compareTo(t)!=0};tt.op_GreaterThan=function(e,t){return e.compareTo(t)>0};tt.op_LessThan=function(e,t){return e.compareTo(t)<0};tt.op_Addition=function(e,t){return new tt(e).add(new tt(t))};tt.op_Subtraction=function(e,t){return new tt(e).subtract(new tt(t))};tt.Int128Mul=function(e,t){return new tt(e).multiply(new tt(t))};tt.op_Division=function(e,t){return e.divide(t)};tt.prototype.ToDouble=function(){return parseFloat(this.toString())};typeof yP>"u"&&(yP=function(e,t){var r;if(typeof Object.getOwnPropertyNames>"u"){for(r in t.prototype)(typeof e.prototype[r]>"u"||e.prototype[r]==Object.prototype[r])&&(e.prototype[r]=t.prototype[r]);for(r in t)typeof e[r]>"u"&&(e[r]=t[r]);e.$baseCtor=t}else{for(var n=Object.getOwnPropertyNames(t.prototype),i=0;i<n.length;i++)typeof Object.getOwnPropertyDescriptor(e.prototype,n[i])>"u"&&Object.defineProperty(e.prototype,n[i],Object.getOwnPropertyDescriptor(t.prototype,n[i]));for(r in t)typeof e[r]>"u"&&(e[r]=t[r]);e.$baseCtor=t}});var yP;g.Path=function(){return[]};g.Paths=function(){return[]};g.DoublePoint=function(){var e=arguments;this.X=0,this.Y=0,e.length==1?(this.X=e[0].X,this.Y=e[0].Y):e.length==2&&(this.X=e[0],this.Y=e[1])};g.DoublePoint0=function(){this.X=0,this.Y=0};g.DoublePoint1=function(e){this.X=e.X,this.Y=e.Y};g.DoublePoint2=function(e,t){this.X=e,this.Y=t};g.PolyNode=function(){this.m_Parent=null,this.m_polygon=new g.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1};g.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,t=this.m_Parent;t!==null;)e=!e,t=t.m_Parent;return e};g.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length};g.PolyNode.prototype.Contour=function(){return this.m_polygon};g.PolyNode.prototype.AddChild=function(e){var t=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=t};g.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()};g.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]};g.PolyNode.prototype.Childs=function(){return this.m_Childs};g.PolyNode.prototype.Parent=function(){return this.m_Parent};g.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()};g.PolyTree=function(){this.m_AllPolys=[],g.PolyNode.call(this)};g.PolyTree.prototype.Clear=function(){for(var e=0,t=this.m_AllPolys.length;e<t;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0};g.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null};g.PolyTree.prototype.Total=function(){return this.m_AllPolys.length};yP(g.PolyTree,g.PolyNode);g.Math_Abs_Int64=g.Math_Abs_Int32=g.Math_Abs_Double=function(e){return Math.abs(e)};g.Math_Max_Int32_Int32=function(e,t){return Math.max(e,t)};at.msie||at.opera||at.safari?g.Cast_Int32=function(e){return e|0}:g.Cast_Int32=function(e){return~~e};at.chrome?g.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):~~e}:at.firefox&&typeof Number.toInteger=="function"?g.Cast_Int64=function(e){return Number.toInteger(e)}:at.msie7||at.msie8?g.Cast_Int64=function(e){return parseInt(e,10)}:at.msie?g.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):e|0}:g.Cast_Int64=function(e){return e<0?Math.ceil(e):Math.floor(e)};g.Clear=function(e){e.length=0};g.PI=3.141592653589793;g.PI2=2*3.141592653589793;g.IntPoint=function(){var e=arguments,t=e.length;if(this.X=0,this.Y=0,yf)if(this.Z=0,t==3)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(t==2)this.X=e[0],this.Y=e[1],this.Z=0;else if(t==1)if(e[0]instanceof g.DoublePoint){var r=e[0];this.X=g.Clipper.Round(r.X),this.Y=g.Clipper.Round(r.Y),this.Z=0}else{var n=e[0];typeof n.Z>"u"&&(n.Z=0),this.X=n.X,this.Y=n.Y,this.Z=n.Z}else this.X=0,this.Y=0,this.Z=0;else if(t==2)this.X=e[0],this.Y=e[1];else if(t==1)if(e[0]instanceof g.DoublePoint){var r=e[0];this.X=g.Clipper.Round(r.X),this.Y=g.Clipper.Round(r.Y)}else{var n=e[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0};g.IntPoint.op_Equality=function(e,t){return e.X==t.X&&e.Y==t.Y};g.IntPoint.op_Inequality=function(e,t){return e.X!=t.X||e.Y!=t.Y};yf?(g.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},g.IntPoint1=function(e){this.X=e.X,this.Y=e.Y,this.Z=e.Z},g.IntPoint1dp=function(e){this.X=g.Clipper.Round(e.X),this.Y=g.Clipper.Round(e.Y),this.Z=0},g.IntPoint2=function(e,t){this.X=e,this.Y=t,this.Z=0},g.IntPoint3=function(e,t,r){this.X=e,this.Y=t,this.Z=r}):(g.IntPoint0=function(){this.X=0,this.Y=0},g.IntPoint1=function(e){this.X=e.X,this.Y=e.Y},g.IntPoint1dp=function(e){this.X=g.Clipper.Round(e.X),this.Y=g.Clipper.Round(e.Y)},g.IntPoint2=function(e,t){this.X=e,this.Y=t});g.IntRect=function(){var e=arguments,t=e.length;t==4?(this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3]):t==1?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)};g.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0};g.IntRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom};g.IntRect4=function(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n};g.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};g.PolyType={ptSubject:0,ptClip:1};g.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};g.JoinType={jtSquare:0,jtRound:1,jtMiter:2};g.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4};_le&&(g.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3});g.EdgeSide={esLeft:0,esRight:1};g.Direction={dRightToLeft:0,dLeftToRight:1};g.TEdge=function(){this.Bot=new g.IntPoint,this.Curr=new g.IntPoint,this.Top=new g.IntPoint,this.Delta=new g.IntPoint,this.Dx=0,this.PolyTyp=g.PolyType.ptSubject,this.Side=g.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null};g.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new g.IntPoint};g.MyIntersectNodeSort=function(){};g.MyIntersectNodeSort.Compare=function(e,t){return t.Pt.Y-e.Pt.Y};g.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null};g.Scanbeam=function(){this.Y=0,this.Next=null};g.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null};g.OutPt=function(){this.Idx=0,this.Pt=new g.IntPoint,this.Next=null,this.Prev=null};g.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new g.IntPoint};g.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1};g.ClipperBase.horizontal=-9007199254740992;g.ClipperBase.Skip=-2;g.ClipperBase.Unassigned=-1;g.ClipperBase.tolerance=1e-20;FNe?(g.ClipperBase.loRange=46340,g.ClipperBase.hiRange=46340):(g.ClipperBase.loRange=47453132,g.ClipperBase.hiRange=0xfffffffffffff);g.ClipperBase.near_zero=function(e){return e>-g.ClipperBase.tolerance&&e<g.ClipperBase.tolerance};g.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0};g.ClipperBase.prototype.PointIsVertex=function(e,t){var r=t;do{if(g.IntPoint.op_Equality(r.Pt,e))return!0;r=r.Next}while(r!=t);return!1};g.ClipperBase.prototype.PointOnLineSegment=function(e,t,r,n){return n?e.X==t.X&&e.Y==t.Y||e.X==r.X&&e.Y==r.Y||e.X>t.X==e.X<r.X&&e.Y>t.Y==e.Y<r.Y&&tt.op_Equality(tt.Int128Mul(e.X-t.X,r.Y-t.Y),tt.Int128Mul(r.X-t.X,e.Y-t.Y)):e.X==t.X&&e.Y==t.Y||e.X==r.X&&e.Y==r.Y||e.X>t.X==e.X<r.X&&e.Y>t.Y==e.Y<r.Y&&(e.X-t.X)*(r.Y-t.Y)==(r.X-t.X)*(e.Y-t.Y)};g.ClipperBase.prototype.PointOnPolygon=function(e,t,r){for(var n=t;;){if(this.PointOnLineSegment(e,n.Pt,n.Next.Pt,r))return!0;if(n=n.Next,n==t)break}return!1};g.ClipperBase.prototype.SlopesEqual=g.ClipperBase.SlopesEqual=function(){var e=arguments,t=e.length,r,n,i,o,a,s,l;return t==3?(r=e[0],n=e[1],l=e[2],l?tt.op_Equality(tt.Int128Mul(r.Delta.Y,n.Delta.X),tt.Int128Mul(r.Delta.X,n.Delta.Y)):g.Cast_Int64(r.Delta.Y*n.Delta.X)==g.Cast_Int64(r.Delta.X*n.Delta.Y)):t==4?(i=e[0],o=e[1],a=e[2],l=e[3],l?tt.op_Equality(tt.Int128Mul(i.Y-o.Y,o.X-a.X),tt.Int128Mul(i.X-o.X,o.Y-a.Y)):g.Cast_Int64((i.Y-o.Y)*(o.X-a.X))-g.Cast_Int64((i.X-o.X)*(o.Y-a.Y))===0):(i=e[0],o=e[1],a=e[2],s=e[3],l=e[4],l?tt.op_Equality(tt.Int128Mul(i.Y-o.Y,a.X-s.X),tt.Int128Mul(i.X-o.X,a.Y-s.Y)):g.Cast_Int64((i.Y-o.Y)*(a.X-s.X))-g.Cast_Int64((i.X-o.X)*(a.Y-s.Y))===0)};g.ClipperBase.SlopesEqual3=function(e,t,r){return r?tt.op_Equality(tt.Int128Mul(e.Delta.Y,t.Delta.X),tt.Int128Mul(e.Delta.X,t.Delta.Y)):g.Cast_Int64(e.Delta.Y*t.Delta.X)==g.Cast_Int64(e.Delta.X*t.Delta.Y)};g.ClipperBase.SlopesEqual4=function(e,t,r,n){return n?tt.op_Equality(tt.Int128Mul(e.Y-t.Y,t.X-r.X),tt.Int128Mul(e.X-t.X,t.Y-r.Y)):g.Cast_Int64((e.Y-t.Y)*(t.X-r.X))-g.Cast_Int64((e.X-t.X)*(t.Y-r.Y))===0};g.ClipperBase.SlopesEqual5=function(e,t,r,n,i){return i?tt.op_Equality(tt.Int128Mul(e.Y-t.Y,r.X-n.X),tt.Int128Mul(e.X-t.X,r.Y-n.Y)):g.Cast_Int64((e.Y-t.Y)*(r.X-n.X))-g.Cast_Int64((e.X-t.X)*(r.Y-n.Y))===0};g.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,t=this.m_edges.length;e<t;++e){for(var r=0,n=this.m_edges[e].length;r<n;++r)this.m_edges[e][r]=null;g.Clear(this.m_edges[e])}g.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1};g.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null};g.ClipperBase.prototype.RangeTest=function(e,t){t.Value?(e.X>g.ClipperBase.hiRange||e.Y>g.ClipperBase.hiRange||-e.X>g.ClipperBase.hiRange||-e.Y>g.ClipperBase.hiRange)&&g.Error("Coordinate outside allowed range in RangeTest()."):(e.X>g.ClipperBase.loRange||e.Y>g.ClipperBase.loRange||-e.X>g.ClipperBase.loRange||-e.Y>g.ClipperBase.loRange)&&(t.Value=!0,this.RangeTest(e,t))};g.ClipperBase.prototype.InitEdge=function(e,t,r,n){e.Next=t,e.Prev=r,e.Curr.X=n.X,e.Curr.Y=n.Y,e.OutIdx=-1};g.ClipperBase.prototype.InitEdge2=function(e,t){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y),this.SetDx(e),e.PolyTyp=t};g.ClipperBase.prototype.FindNextLocMin=function(e){for(var t;;){for(;g.IntPoint.op_Inequality(e.Bot,e.Prev.Bot)||g.IntPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!=g.ClipperBase.horizontal&&e.Prev.Dx!=g.ClipperBase.horizontal)break;for(;e.Prev.Dx==g.ClipperBase.horizontal;)e=e.Prev;for(t=e;e.Dx==g.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!=e.Prev.Bot.Y){t.Prev.Bot.X<e.Bot.X&&(e=t);break}}return e};g.ClipperBase.prototype.ProcessBound=function(e,t){var r=e,n=e,i,o;if(e.Dx==g.ClipperBase.horizontal&&(t?o=e.Prev.Bot.X:o=e.Next.Bot.X,e.Bot.X!=o&&this.ReverseHorizontal(e)),n.OutIdx!=g.ClipperBase.Skip)if(t){for(;n.Top.Y==n.Next.Bot.Y&&n.Next.OutIdx!=g.ClipperBase.Skip;)n=n.Next;if(n.Dx==g.ClipperBase.horizontal&&n.Next.OutIdx!=g.ClipperBase.Skip){for(i=n;i.Prev.Dx==g.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==n.Next.Top.X?t||(n=i.Prev):i.Prev.Top.X>n.Next.Top.X&&(n=i.Prev)}for(;e!=n;)e.NextInLML=e.Next,e.Dx==g.ClipperBase.horizontal&&e!=r&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx==g.ClipperBase.horizontal&&e!=r&&e.Bot.X!=e.Prev.Top.X&&this.ReverseHorizontal(e),n=n.Next}else{for(;n.Top.Y==n.Prev.Bot.Y&&n.Prev.OutIdx!=g.ClipperBase.Skip;)n=n.Prev;if(n.Dx==g.ClipperBase.horizontal&&n.Prev.OutIdx!=g.ClipperBase.Skip){for(i=n;i.Next.Dx==g.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==n.Prev.Top.X?t||(n=i.Next):i.Next.Top.X>n.Prev.Top.X&&(n=i.Next)}for(;e!=n;)e.NextInLML=e.Prev,e.Dx==g.ClipperBase.horizontal&&e!=r&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx==g.ClipperBase.horizontal&&e!=r&&e.Bot.X!=e.Next.Top.X&&this.ReverseHorizontal(e),n=n.Prev}if(n.OutIdx==g.ClipperBase.Skip){if(e=n,t){for(;e.Top.Y==e.Next.Bot.Y;)e=e.Next;for(;e!=n&&e.Dx==g.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y==e.Prev.Bot.Y;)e=e.Prev;for(;e!=n&&e.Dx==g.ClipperBase.horizontal;)e=e.Next}if(e==n)t?n=e.Next:n=e.Prev;else{t?e=n.Next:e=n.Prev;var a=new g.LocalMinima;a.Next=null,a.Y=e.Bot.Y,a.LeftBound=null,a.RightBound=e,a.RightBound.WindDelta=0,n=this.ProcessBound(a.RightBound,t),this.InsertLocalMinima(a)}}return n};g.ClipperBase.prototype.AddPath=function(e,t,r){vle?!r&&t==g.PolyType.ptClip&&g.Error("AddPath: Open paths must be subject."):r||g.Error("AddPath: Open paths have been disabled.");var n=e.length-1;if(r)for(;n>0&&g.IntPoint.op_Equality(e[n],e[0]);)--n;for(;n>0&&g.IntPoint.op_Equality(e[n],e[n-1]);)--n;if(r&&n<2||!r&&n<1)return!1;for(var i=new Array,o=0;o<=n;o++)i.push(new g.TEdge);var a=!0;i[1].Curr.X=e[1].X,i[1].Curr.Y=e[1].Y;var s={Value:this.m_UseFullRange};this.RangeTest(e[0],s),this.m_UseFullRange=s.Value,s.Value=this.m_UseFullRange,this.RangeTest(e[n],s),this.m_UseFullRange=s.Value,this.InitEdge(i[0],i[1],i[n],e[0]),this.InitEdge(i[n],i[0],i[n-1],e[n]);for(var o=n-1;o>=1;--o)s.Value=this.m_UseFullRange,this.RangeTest(e[o],s),this.m_UseFullRange=s.Value,this.InitEdge(i[o],i[o+1],i[o-1],e[o]);for(var l=i[0],u=l,c=l;;){if(g.IntPoint.op_Equality(u.Curr,u.Next.Curr)){if(u==u.Next)break;u==l&&(l=u.Next),u=this.RemoveEdge(u),c=u;continue}if(u.Prev==u.Next)break;if(r&&g.ClipperBase.SlopesEqual(u.Prev.Curr,u.Curr,u.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(u.Prev.Curr,u.Curr,u.Next.Curr))){u==l&&(l=u.Next),u=this.RemoveEdge(u),u=u.Prev,c=u;continue}if(u=u.Next,u==c)break}if(!r&&u==u.Next||r&&u.Prev==u.Next)return!1;r||(this.m_HasOpenPaths=!0,l.Prev.OutIdx=g.ClipperBase.Skip);var p=l;u=l;do this.InitEdge2(u,t),u=u.Next,a&&u.Curr.Y!=l.Curr.Y&&(a=!1);while(u!=l);if(a){if(r)return!1;u.Prev.OutIdx=g.ClipperBase.Skip,u.Prev.Bot.X<u.Prev.Top.X&&this.ReverseHorizontal(u.Prev);var d=new g.LocalMinima;for(d.Next=null,d.Y=u.Bot.Y,d.LeftBound=null,d.RightBound=u,d.RightBound.Side=g.EdgeSide.esRight,d.RightBound.WindDelta=0;u.Next.OutIdx!=g.ClipperBase.Skip;)u.NextInLML=u.Next,u.Bot.X!=u.Prev.Top.X&&this.ReverseHorizontal(u),u=u.Next;return this.InsertLocalMinima(d),this.m_edges.push(i),!0}this.m_edges.push(i);for(var h,m=null;u=this.FindNextLocMin(u),u!=m;){m==null&&(m=u);var d=new g.LocalMinima;d.Next=null,d.Y=u.Bot.Y,u.Dx<u.Prev.Dx?(d.LeftBound=u.Prev,d.RightBound=u,h=!1):(d.LeftBound=u,d.RightBound=u.Prev,h=!0),d.LeftBound.Side=g.EdgeSide.esLeft,d.RightBound.Side=g.EdgeSide.esRight,r?d.LeftBound.Next==d.RightBound?d.LeftBound.WindDelta=-1:d.LeftBound.WindDelta=1:d.LeftBound.WindDelta=0,d.RightBound.WindDelta=-d.LeftBound.WindDelta,u=this.ProcessBound(d.LeftBound,h);var x=this.ProcessBound(d.RightBound,!h);d.LeftBound.OutIdx==g.ClipperBase.Skip?d.LeftBound=null:d.RightBound.OutIdx==g.ClipperBase.Skip&&(d.RightBound=null),this.InsertLocalMinima(d),h||(u=x)}return!0};g.ClipperBase.prototype.AddPaths=function(e,t,r){for(var n=!1,i=0,o=e.length;i<o;++i)this.AddPath(e[i],t,r)&&(n=!0);return n};g.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,t,r){return g.IntPoint.op_Equality(e,r)||g.IntPoint.op_Equality(e,t)||g.IntPoint.op_Equality(r,t)?!1:e.X!=r.X?t.X>e.X==t.X<r.X:t.Y>e.Y==t.Y<r.Y};g.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var t=e.Next;return e.Prev=null,t};g.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=g.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y};g.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var t=this.m_MinimaList;t.Next!==null&&e.Y<t.Next.Y;)t=t.Next;e.Next=t.Next,t.Next=e}};g.ClipperBase.prototype.PopLocalMinima=function(){this.m_CurrentLM!==null&&(this.m_CurrentLM=this.m_CurrentLM.Next)};g.ClipperBase.prototype.ReverseHorizontal=function(e){var t=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=t,yf&&(t=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=t)};g.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!=null)for(var e=this.m_MinimaList;e!=null;){var t=e.LeftBound;t!=null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.Side=g.EdgeSide.esLeft,t.OutIdx=g.ClipperBase.Unassigned),t=e.RightBound,t!=null&&(t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.Side=g.EdgeSide.esRight,t.OutIdx=g.ClipperBase.Unassigned),e=e.Next}};g.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=g.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=g.PolyFillType.pftEvenOdd,this.m_SubjFillType=g.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,g.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=g.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0,yf&&(this.ZFillFunction=null)};g.Clipper.ioReverseSolution=1;g.Clipper.ioStrictlySimple=2;g.Clipper.ioPreserveCollinear=4;g.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),g.ClipperBase.prototype.Clear.call(this))};g.Clipper.prototype.DisposeScanbeamList=function(){for(;this.m_Scanbeam!==null;){var e=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=e}};g.Clipper.prototype.Reset=function(){g.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var e=this.m_MinimaList;e!==null;)this.InsertScanbeam(e.Y),e=e.Next};g.Clipper.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new g.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var t=new g.Scanbeam;t.Y=e,t.Next=this.m_Scanbeam,this.m_Scanbeam=t}else{for(var r=this.m_Scanbeam;r.Next!==null&&e<=r.Next.Y;)r=r.Next;if(e==r.Y)return;var t=new g.Scanbeam;t.Y=e,t.Next=r.Next,r.Next=t}};g.Clipper.prototype.Execute=function(){var e=arguments,t=e.length,r=e[1]instanceof g.PolyTree;if(t==4&&!r){var n=e[0],i=e[1],o=e[2],a=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&g.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,g.Clear(i),this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{var s=this.ExecuteInternal();s&&this.BuildResult(i)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}else if(t==4&&r){var n=e[0],l=e[1],o=e[2],a=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var s=this.ExecuteInternal();s&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return s}else if(t==2&&!r){var n=e[0],i=e[1];return this.Execute(n,i,g.PolyFillType.pftEvenOdd,g.PolyFillType.pftEvenOdd)}else if(t==2&&r){var n=e[0],l=e[1];return this.Execute(n,l,g.PolyFillType.pftEvenOdd,g.PolyFillType.pftEvenOdd)}};g.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!=e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var t=e.FirstLeft;t!==null&&(t.IsHole==e.IsHole||t.Pts===null);)t=t.FirstLeft;e.FirstLeft=t}};g.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),this.m_CurrentLM===null)return!1;var e=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(e),g.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),this.m_Scanbeam===null)break;var t=this.PopScanbeam();if(!this.ProcessIntersections(e,t))return!1;this.ProcessEdgesAtTopOfScanbeam(t),e=t}while(this.m_Scanbeam!==null||this.m_CurrentLM!==null);for(var r=0,n=this.m_PolyOuts.length;r<n;r++){var i=this.m_PolyOuts[r];i.Pts===null||i.IsOpen||(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)}this.JoinCommonEdges();for(var r=0,n=this.m_PolyOuts.length;r<n;r++){var i=this.m_PolyOuts[r];i.Pts!==null&&!i.IsOpen&&this.FixupOutPolygon(i)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{g.Clear(this.m_Joins),g.Clear(this.m_GhostJoins)}};g.Clipper.prototype.PopScanbeam=function(){var e=this.m_Scanbeam.Y,t=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,t=null,e};g.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,t=this.m_PolyOuts.length;e<t;++e)this.DisposeOutRec(e);g.Clear(this.m_PolyOuts)};g.Clipper.prototype.DisposeOutRec=function(e){var t=this.m_PolyOuts[e];t.Pts!==null&&this.DisposeOutPts(t.Pts),t=null,this.m_PolyOuts[e]=null};g.Clipper.prototype.DisposeOutPts=function(e){if(e!==null){var t=null;for(e.Prev.Next=null;e!==null;)t=e,e=e.Next,t=null}};g.Clipper.prototype.AddJoin=function(e,t,r){var n=new g.Join;n.OutPt1=e,n.OutPt2=t,n.OffPt.X=r.X,n.OffPt.Y=r.Y,this.m_Joins.push(n)};g.Clipper.prototype.AddGhostJoin=function(e,t){var r=new g.Join;r.OutPt1=e,r.OffPt.X=t.X,r.OffPt.Y=t.Y,this.m_GhostJoins.push(r)};yf&&(g.Clipper.prototype.SetZ=function(e,t){e.Z=0,this.ZFillFunction!==null&&(t.OutIdx<0?this.ZFillFunction(t.Bot,t.Top,e):this.ZFillFunction(t.Top,t.Bot,e))});g.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(;this.m_CurrentLM!==null&&this.m_CurrentLM.Y==e;){var t=this.m_CurrentLM.LeftBound,r=this.m_CurrentLM.RightBound;this.PopLocalMinima();var n=null;if(t===null?(this.InsertEdgeIntoAEL(r,null),this.SetWindingCount(r),this.IsContributing(r)&&(n=this.AddOutPt(r,r.Bot))):r==null?(this.InsertEdgeIntoAEL(t,null),this.SetWindingCount(t),this.IsContributing(t)&&(n=this.AddOutPt(t,t.Bot)),this.InsertScanbeam(t.Top.Y)):(this.InsertEdgeIntoAEL(t,null),this.InsertEdgeIntoAEL(r,t),this.SetWindingCount(t),r.WindCnt=t.WindCnt,r.WindCnt2=t.WindCnt2,this.IsContributing(t)&&(n=this.AddLocalMinPoly(t,r,t.Bot)),this.InsertScanbeam(t.Top.Y)),r!=null&&(g.ClipperBase.IsHorizontal(r)?this.AddEdgeToSEL(r):this.InsertScanbeam(r.Top.Y)),!(t==null||r==null)){if(n!==null&&g.ClipperBase.IsHorizontal(r)&&this.m_GhostJoins.length>0&&r.WindDelta!==0)for(var i=0,o=this.m_GhostJoins.length;i<o;i++){var a=this.m_GhostJoins[i];this.HorzSegmentsOverlap(a.OutPt1.Pt,a.OffPt,r.Bot,r.Top)&&this.AddJoin(a.OutPt1,n,a.OffPt)}if(t.OutIdx>=0&&t.PrevInAEL!==null&&t.PrevInAEL.Curr.X==t.Bot.X&&t.PrevInAEL.OutIdx>=0&&g.ClipperBase.SlopesEqual(t.PrevInAEL,t,this.m_UseFullRange)&&t.WindDelta!==0&&t.PrevInAEL.WindDelta!==0){var s=this.AddOutPt(t.PrevInAEL,t.Bot);this.AddJoin(n,s,t.Top)}if(t.NextInAEL!=r){if(r.OutIdx>=0&&r.PrevInAEL.OutIdx>=0&&g.ClipperBase.SlopesEqual(r.PrevInAEL,r,this.m_UseFullRange)&&r.WindDelta!==0&&r.PrevInAEL.WindDelta!==0){var s=this.AddOutPt(r.PrevInAEL,r.Bot);this.AddJoin(n,s,r.Top)}var l=t.NextInAEL;if(l!==null)for(;l!=r;)this.IntersectEdges(r,l,t.Curr,!1),l=l.NextInAEL}}}};g.Clipper.prototype.InsertEdgeIntoAEL=function(e,t){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(t===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(t===null&&(t=this.m_ActiveEdges);t.NextInAEL!==null&&!this.E2InsertsBeforeE1(t.NextInAEL,e);)t=t.NextInAEL;e.NextInAEL=t.NextInAEL,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=e),e.PrevInAEL=t,t.NextInAEL=e}};g.Clipper.prototype.E2InsertsBeforeE1=function(e,t){return t.Curr.X==e.Curr.X?t.Top.Y>e.Top.Y?t.Top.X<g.Clipper.TopX(e,t.Top.Y):e.Top.X>g.Clipper.TopX(t,e.Top.Y):t.Curr.X<e.Curr.X};g.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp==g.PolyType.ptSubject?this.m_SubjFillType==g.PolyFillType.pftEvenOdd:this.m_ClipFillType==g.PolyFillType.pftEvenOdd};g.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp==g.PolyType.ptSubject?this.m_ClipFillType==g.PolyFillType.pftEvenOdd:this.m_SubjFillType==g.PolyFillType.pftEvenOdd};g.Clipper.prototype.IsContributing=function(e){var t,r;switch(e.PolyTyp==g.PolyType.ptSubject?(t=this.m_SubjFillType,r=this.m_ClipFillType):(t=this.m_ClipFillType,r=this.m_SubjFillType),t){case g.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!=1)return!1;break;case g.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!=1)return!1;break;case g.PolyFillType.pftPositive:if(e.WindCnt!=1)return!1;break;default:if(e.WindCnt!=-1)return!1;break}switch(this.m_ClipType){case g.ClipType.ctIntersection:switch(r){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return e.WindCnt2!==0;case g.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case g.ClipType.ctUnion:switch(r){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return e.WindCnt2===0;case g.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case g.ClipType.ctDifference:if(e.PolyTyp==g.PolyType.ptSubject)switch(r){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return e.WindCnt2===0;case g.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(r){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return e.WindCnt2!==0;case g.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case g.ClipType.ctXor:if(e.WindDelta===0)switch(r){case g.PolyFillType.pftEvenOdd:case g.PolyFillType.pftNonZero:return e.WindCnt2===0;case g.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0};g.Clipper.prototype.SetWindingCount=function(e){for(var t=e.PrevInAEL;t!==null&&(t.PolyTyp!=e.PolyTyp||t.WindDelta===0);)t=t.PrevInAEL;if(t===null)e.WindCnt=e.WindDelta===0?1:e.WindDelta,e.WindCnt2=0,t=this.m_ActiveEdges;else if(e.WindDelta===0&&this.m_ClipType!=g.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var r=!0,n=t.PrevInAEL;n!==null;)n.PolyTyp==t.PolyTyp&&n.WindDelta!==0&&(r=!r),n=n.PrevInAEL;e.WindCnt=r?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=t.WindCnt2,t=t.NextInAEL}else t.WindCnt*t.WindDelta<0?Math.abs(t.WindCnt)>1?t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=t.WindCnt<0?t.WindCnt-1:t.WindCnt+1:t.WindDelta*e.WindDelta<0?e.WindCnt=t.WindCnt:e.WindCnt=t.WindCnt+e.WindDelta,e.WindCnt2=t.WindCnt2,t=t.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;t!=e;)t.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),t=t.NextInAEL;else for(;t!=e;)e.WindCnt2+=t.WindDelta,t=t.NextInAEL};g.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)};g.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL};g.Clipper.prototype.SwapPositionsInAEL=function(e,t){if(!(e.NextInAEL==e.PrevInAEL||t.NextInAEL==t.PrevInAEL)){if(e.NextInAEL==t){var r=t.NextInAEL;r!==null&&(r.PrevInAEL=e);var n=e.PrevInAEL;n!==null&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=r}else if(t.NextInAEL==e){var r=e.NextInAEL;r!==null&&(r.PrevInAEL=t);var n=t.PrevInAEL;n!==null&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=r}else{var r=e.NextInAEL,n=e.PrevInAEL;e.NextInAEL=t.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=t.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),t.NextInAEL=r,t.NextInAEL!==null&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=n,t.PrevInAEL!==null&&(t.PrevInAEL.NextInAEL=t)}e.PrevInAEL===null?this.m_ActiveEdges=e:t.PrevInAEL===null&&(this.m_ActiveEdges=t)}};g.Clipper.prototype.SwapPositionsInSEL=function(e,t){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(t.NextInSEL===null&&t.PrevInSEL===null)){if(e.NextInSEL==t){var r=t.NextInSEL;r!==null&&(r.PrevInSEL=e);var n=e.PrevInSEL;n!==null&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=r}else if(t.NextInSEL==e){var r=e.NextInSEL;r!==null&&(r.PrevInSEL=t);var n=t.PrevInSEL;n!==null&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=r}else{var r=e.NextInSEL,n=e.PrevInSEL;e.NextInSEL=t.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=t.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),t.NextInSEL=r,t.NextInSEL!==null&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=n,t.PrevInSEL!==null&&(t.PrevInSEL.NextInSEL=t)}e.PrevInSEL===null?this.m_SortedEdges=e:t.PrevInSEL===null&&(this.m_SortedEdges=t)}};g.Clipper.prototype.AddLocalMaxPoly=function(e,t,r){this.AddOutPt(e,r),t.WindDelta==0&&this.AddOutPt(t,r),e.OutIdx==t.OutIdx?(e.OutIdx=-1,t.OutIdx=-1):e.OutIdx<t.OutIdx?this.AppendPolygon(e,t):this.AppendPolygon(t,e)};g.Clipper.prototype.AddLocalMinPoly=function(e,t,r){var n,i,o;if(g.ClipperBase.IsHorizontal(t)||e.Dx>t.Dx?(n=this.AddOutPt(e,r),t.OutIdx=e.OutIdx,e.Side=g.EdgeSide.esLeft,t.Side=g.EdgeSide.esRight,i=e,i.PrevInAEL==t?o=t.PrevInAEL:o=i.PrevInAEL):(n=this.AddOutPt(t,r),e.OutIdx=t.OutIdx,e.Side=g.EdgeSide.esRight,t.Side=g.EdgeSide.esLeft,i=t,i.PrevInAEL==e?o=e.PrevInAEL:o=i.PrevInAEL),o!==null&&o.OutIdx>=0&&g.Clipper.TopX(o,r.Y)==g.Clipper.TopX(i,r.Y)&&g.ClipperBase.SlopesEqual(i,o,this.m_UseFullRange)&&i.WindDelta!==0&&o.WindDelta!==0){var a=this.AddOutPt(o,r);this.AddJoin(n,a,i.Top)}return n};g.Clipper.prototype.CreateOutRec=function(){var e=new g.OutRec;return e.Idx=-1,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e};g.Clipper.prototype.AddOutPt=function(e,t){var r=e.Side==g.EdgeSide.esLeft;if(e.OutIdx<0){var n=this.CreateOutRec();n.IsOpen=e.WindDelta===0;var i=new g.OutPt;return n.Pts=i,i.Idx=n.Idx,i.Pt.X=t.X,i.Pt.Y=t.Y,i.Next=i,i.Prev=i,n.IsOpen||this.SetHoleState(e,n),yf&&(g.IntPoint.op_Equality(t,e.Bot)?(i.Pt.X=e.Bot.X,i.Pt.Y=e.Bot.Y,i.Pt.Z=e.Bot.Z):g.IntPoint.op_Equality(t,e.Top)?(i.Pt.X=e.Top.X,i.Pt.Y=e.Top.Y,i.Pt.Z=e.Top.Z):this.SetZ(i.Pt,e)),e.OutIdx=n.Idx,i}else{var n=this.m_PolyOuts[e.OutIdx],o=n.Pts;if(r&&g.IntPoint.op_Equality(t,o.Pt))return o;if(!r&&g.IntPoint.op_Equality(t,o.Prev.Pt))return o.Prev;var i=new g.OutPt;return i.Idx=n.Idx,i.Pt.X=t.X,i.Pt.Y=t.Y,i.Next=o,i.Prev=o.Prev,i.Prev.Next=i,o.Prev=i,r&&(n.Pts=i),yf&&(g.IntPoint.op_Equality(t,e.Bot)?(i.Pt.X=e.Bot.X,i.Pt.Y=e.Bot.Y,i.Pt.Z=e.Bot.Z):g.IntPoint.op_Equality(t,e.Top)?(i.Pt.X=e.Top.X,i.Pt.Y=e.Top.Y,i.Pt.Z=e.Top.Z):this.SetZ(i.Pt,e)),i}};g.Clipper.prototype.SwapPoints=function(e,t){var r=new g.IntPoint(e.Value);e.Value.X=t.Value.X,e.Value.Y=t.Value.Y,t.Value.X=r.X,t.Value.Y=r.Y};g.Clipper.prototype.HorzSegmentsOverlap=function(e,t,r,n){return e.X>r.X==e.X<n.X||t.X>r.X==t.X<n.X||r.X>e.X==r.X<t.X||n.X>e.X==n.X<t.X||e.X==r.X&&t.X==n.X?!0:e.X==n.X&&t.X==r.X};g.Clipper.prototype.InsertPolyPtBetween=function(e,t,r){var n=new g.OutPt;return n.Pt.X=r.X,n.Pt.Y=r.Y,t==e.Next?(e.Next=n,t.Prev=n,n.Next=t,n.Prev=e):(t.Next=n,e.Prev=n,n.Next=e,n.Prev=t),n};g.Clipper.prototype.SetHoleState=function(e,t){for(var r=!1,n=e.PrevInAEL;n!==null;)n.OutIdx>=0&&n.WindDelta!=0&&(r=!r,t.FirstLeft===null&&(t.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;r&&(t.IsHole=!0)};g.Clipper.prototype.GetDx=function(e,t){return e.Y==t.Y?g.ClipperBase.horizontal:(t.X-e.X)/(t.Y-e.Y)};g.Clipper.prototype.FirstIsBottomPt=function(e,t){for(var r=e.Prev;g.IntPoint.op_Equality(r.Pt,e.Pt)&&r!=e;)r=r.Prev;var n=Math.abs(this.GetDx(e.Pt,r.Pt));for(r=e.Next;g.IntPoint.op_Equality(r.Pt,e.Pt)&&r!=e;)r=r.Next;var i=Math.abs(this.GetDx(e.Pt,r.Pt));for(r=t.Prev;g.IntPoint.op_Equality(r.Pt,t.Pt)&&r!=t;)r=r.Prev;var o=Math.abs(this.GetDx(t.Pt,r.Pt));for(r=t.Next;g.IntPoint.op_Equality(r.Pt,t.Pt)&&r!=t;)r=r.Next;var a=Math.abs(this.GetDx(t.Pt,r.Pt));return n>=o&&n>=a||i>=o&&i>=a};g.Clipper.prototype.GetBottomPt=function(e){for(var t=null,r=e.Next;r!=e;)r.Pt.Y>e.Pt.Y?(e=r,t=null):r.Pt.Y==e.Pt.Y&&r.Pt.X<=e.Pt.X&&(r.Pt.X<e.Pt.X?(t=null,e=r):r.Next!=e&&r.Prev!=e&&(t=r)),r=r.Next;if(t!==null)for(;t!=r;)for(this.FirstIsBottomPt(r,t)||(e=t),t=t.Next;g.IntPoint.op_Inequality(t.Pt,e.Pt);)t=t.Next;return e};g.Clipper.prototype.GetLowermostRec=function(e,t){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),t.BottomPt===null&&(t.BottomPt=this.GetBottomPt(t.Pts));var r=e.BottomPt,n=t.BottomPt;return r.Pt.Y>n.Pt.Y?e:r.Pt.Y<n.Pt.Y?t:r.Pt.X<n.Pt.X?e:r.Pt.X>n.Pt.X||r.Next==r?t:n.Next==n||this.FirstIsBottomPt(r,n)?e:t};g.Clipper.prototype.Param1RightOfParam2=function(e,t){do if(e=e.FirstLeft,e==t)return!0;while(e!==null);return!1};g.Clipper.prototype.GetOutRec=function(e){for(var t=this.m_PolyOuts[e];t!=this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t};g.Clipper.prototype.AppendPolygon=function(e,t){var r=this.m_PolyOuts[e.OutIdx],n=this.m_PolyOuts[t.OutIdx],i;this.Param1RightOfParam2(r,n)?i=n:this.Param1RightOfParam2(n,r)?i=r:i=this.GetLowermostRec(r,n);var o=r.Pts,a=o.Prev,s=n.Pts,l=s.Prev,u;e.Side==g.EdgeSide.esLeft?(t.Side==g.EdgeSide.esLeft?(this.ReversePolyPtLinks(s),s.Next=o,o.Prev=s,a.Next=l,l.Prev=a,r.Pts=l):(l.Next=o,o.Prev=l,s.Prev=a,a.Next=s,r.Pts=s),u=g.EdgeSide.esLeft):(t.Side==g.EdgeSide.esRight?(this.ReversePolyPtLinks(s),a.Next=l,l.Prev=a,s.Next=o,o.Prev=s):(a.Next=s,s.Prev=a,o.Prev=l,l.Next=o),u=g.EdgeSide.esRight),r.BottomPt=null,i==n&&(n.FirstLeft!=r&&(r.FirstLeft=n.FirstLeft),r.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=r;var c=e.OutIdx,p=t.OutIdx;e.OutIdx=-1,t.OutIdx=-1;for(var d=this.m_ActiveEdges;d!==null;){if(d.OutIdx==p){d.OutIdx=c,d.Side=u;break}d=d.NextInAEL}n.Idx=r.Idx};g.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var t,r;t=e;do r=t.Next,t.Next=t.Prev,t.Prev=r,t=r;while(t!=e)}};g.Clipper.SwapSides=function(e,t){var r=e.Side;e.Side=t.Side,t.Side=r};g.Clipper.SwapPolyIndexes=function(e,t){var r=e.OutIdx;e.OutIdx=t.OutIdx,t.OutIdx=r};g.Clipper.prototype.IntersectEdges=function(e,t,r,n){var i=!n&&e.NextInLML===null&&e.Top.X==r.X&&e.Top.Y==r.Y,o=!n&&t.NextInLML===null&&t.Top.X==r.X&&t.Top.Y==r.Y,a=e.OutIdx>=0,s=t.OutIdx>=0;if(vle&&(e.WindDelta===0||t.WindDelta===0)){e.WindDelta===0&&t.WindDelta===0?(i||o)&&a&&s&&this.AddLocalMaxPoly(e,t,r):e.PolyTyp==t.PolyTyp&&e.WindDelta!=t.WindDelta&&this.m_ClipType==g.ClipType.ctUnion?e.WindDelta===0?s&&(this.AddOutPt(e,r),a&&(e.OutIdx=-1)):a&&(this.AddOutPt(t,r),s&&(t.OutIdx=-1)):e.PolyTyp!=t.PolyTyp&&(e.WindDelta===0&&Math.abs(t.WindCnt)==1&&(this.m_ClipType!=g.ClipType.ctUnion||t.WindCnt2===0)?(this.AddOutPt(e,r),a&&(e.OutIdx=-1)):t.WindDelta===0&&Math.abs(e.WindCnt)==1&&(this.m_ClipType!=g.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(t,r),s&&(t.OutIdx=-1))),i&&(e.OutIdx<0?this.DeleteFromAEL(e):g.Error("Error intersecting polylines")),o&&(t.OutIdx<0?this.DeleteFromAEL(t):g.Error("Error intersecting polylines"));return}if(e.PolyTyp==t.PolyTyp)if(this.IsEvenOddFillType(e)){var l=e.WindCnt;e.WindCnt=t.WindCnt,t.WindCnt=l}else e.WindCnt+t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=t.WindDelta,t.WindCnt-e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(t)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=t.WindDelta,this.IsEvenOddFillType(e)?t.WindCnt2=t.WindCnt2===0?1:0:t.WindCnt2-=e.WindDelta;var u,c,p,d;e.PolyTyp==g.PolyType.ptSubject?(u=this.m_SubjFillType,p=this.m_ClipFillType):(u=this.m_ClipFillType,p=this.m_SubjFillType),t.PolyTyp==g.PolyType.ptSubject?(c=this.m_SubjFillType,d=this.m_ClipFillType):(c=this.m_ClipFillType,d=this.m_SubjFillType);var h,m;switch(u){case g.PolyFillType.pftPositive:h=e.WindCnt;break;case g.PolyFillType.pftNegative:h=-e.WindCnt;break;default:h=Math.abs(e.WindCnt);break}switch(c){case g.PolyFillType.pftPositive:m=t.WindCnt;break;case g.PolyFillType.pftNegative:m=-t.WindCnt;break;default:m=Math.abs(t.WindCnt);break}if(a&&s)i||o||h!==0&&h!=1||m!==0&&m!=1||e.PolyTyp!=t.PolyTyp&&this.m_ClipType!=g.ClipType.ctXor?this.AddLocalMaxPoly(e,t,r):(this.AddOutPt(e,r),this.AddOutPt(t,r),g.Clipper.SwapSides(e,t),g.Clipper.SwapPolyIndexes(e,t));else if(a)(m===0||m==1)&&(this.AddOutPt(e,r),g.Clipper.SwapSides(e,t),g.Clipper.SwapPolyIndexes(e,t));else if(s)(h===0||h==1)&&(this.AddOutPt(t,r),g.Clipper.SwapSides(e,t),g.Clipper.SwapPolyIndexes(e,t));else if((h===0||h==1)&&(m===0||m==1)&&!i&&!o){var x,b;switch(p){case g.PolyFillType.pftPositive:x=e.WindCnt2;break;case g.PolyFillType.pftNegative:x=-e.WindCnt2;break;default:x=Math.abs(e.WindCnt2);break}switch(d){case g.PolyFillType.pftPositive:b=t.WindCnt2;break;case g.PolyFillType.pftNegative:b=-t.WindCnt2;break;default:b=Math.abs(t.WindCnt2);break}if(e.PolyTyp!=t.PolyTyp)this.AddLocalMinPoly(e,t,r);else if(h==1&&m==1)switch(this.m_ClipType){case g.ClipType.ctIntersection:x>0&&b>0&&this.AddLocalMinPoly(e,t,r);break;case g.ClipType.ctUnion:x<=0&&b<=0&&this.AddLocalMinPoly(e,t,r);break;case g.ClipType.ctDifference:(e.PolyTyp==g.PolyType.ptClip&&x>0&&b>0||e.PolyTyp==g.PolyType.ptSubject&&x<=0&&b<=0)&&this.AddLocalMinPoly(e,t,r);break;case g.ClipType.ctXor:this.AddLocalMinPoly(e,t,r);break}else g.Clipper.SwapSides(e,t)}i!=o&&(i&&e.OutIdx>=0||o&&t.OutIdx>=0)&&(g.Clipper.SwapSides(e,t),g.Clipper.SwapPolyIndexes(e,t)),i&&this.DeleteFromAEL(e),o&&this.DeleteFromAEL(t)};g.Clipper.prototype.DeleteFromAEL=function(e){var t=e.PrevInAEL,r=e.NextInAEL;t===null&&r===null&&e!=this.m_ActiveEdges||(t!==null?t.NextInAEL=r:this.m_ActiveEdges=r,r!==null&&(r.PrevInAEL=t),e.NextInAEL=null,e.PrevInAEL=null)};g.Clipper.prototype.DeleteFromSEL=function(e){var t=e.PrevInSEL,r=e.NextInSEL;t===null&&r===null&&e!=this.m_SortedEdges||(t!==null?t.NextInSEL=r:this.m_SortedEdges=r,r!==null&&(r.PrevInSEL=t),e.NextInSEL=null,e.PrevInSEL=null)};g.Clipper.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&g.Error("UpdateEdgeIntoAEL: invalid call");var t=e.PrevInAEL,r=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,t!==null?t.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,r!==null&&(r.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=t,e.NextInAEL=r,g.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e};g.Clipper.prototype.ProcessHorizontals=function(e){for(var t=this.m_SortedEdges;t!==null;)this.DeleteFromSEL(t),this.ProcessHorizontal(t,e),t=this.m_SortedEdges};g.Clipper.prototype.GetHorzDirection=function(e,t){e.Bot.X<e.Top.X?(t.Left=e.Bot.X,t.Right=e.Top.X,t.Dir=g.Direction.dLeftToRight):(t.Left=e.Top.X,t.Right=e.Bot.X,t.Dir=g.Direction.dRightToLeft)};g.Clipper.prototype.PrepareHorzJoins=function(e,t){var r=this.m_PolyOuts[e.OutIdx].Pts;e.Side!=g.EdgeSide.esLeft&&(r=r.Prev),t&&(g.IntPoint.op_Equality(r.Pt,e.Top)?this.AddGhostJoin(r,e.Bot):this.AddGhostJoin(r,e.Top))};g.Clipper.prototype.ProcessHorizontal=function(e,t){var r={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,r);for(var n=r.Dir,i=r.Left,o=r.Right,a=e,s=null;a.NextInLML!==null&&g.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;for(a.NextInLML===null&&(s=this.GetMaximaPair(a));;){for(var l=e==a,u=this.GetNextInAEL(e,n);u!==null&&!(u.Curr.X==e.Top.X&&e.NextInLML!==null&&u.Dx<e.NextInLML.Dx);){var c=this.GetNextInAEL(u,n);if(n==g.Direction.dLeftToRight&&u.Curr.X<=o||n==g.Direction.dRightToLeft&&u.Curr.X>=i){if(e.OutIdx>=0&&e.WindDelta!=0&&this.PrepareHorzJoins(e,t),u==s&&l){n==g.Direction.dLeftToRight?this.IntersectEdges(e,u,u.Top,!1):this.IntersectEdges(u,e,u.Top,!1),s.OutIdx>=0&&g.Error("ProcessHorizontal error");return}else if(n==g.Direction.dLeftToRight){var p=new g.IntPoint(u.Curr.X,e.Curr.Y);this.IntersectEdges(e,u,p,!0)}else{var p=new g.IntPoint(u.Curr.X,e.Curr.Y);this.IntersectEdges(u,e,p,!0)}this.SwapPositionsInAEL(e,u)}else if(n==g.Direction.dLeftToRight&&u.Curr.X>=o||n==g.Direction.dRightToLeft&&u.Curr.X<=i)break;u=c}if(e.OutIdx>=0&&e.WindDelta!==0&&this.PrepareHorzJoins(e,t),e.NextInLML!==null&&g.ClipperBase.IsHorizontal(e.NextInLML)){e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot);var r={Dir:n,Left:i,Right:o};this.GetHorzDirection(e,r),n=r.Dir,i=r.Left,o=r.Right}else break}if(e.NextInLML!==null)if(e.OutIdx>=0){var d=this.AddOutPt(e,e.Top);if(e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var h=e.PrevInAEL,c=e.NextInAEL;if(h!==null&&h.Curr.X==e.Bot.X&&h.Curr.Y==e.Bot.Y&&h.WindDelta!==0&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&g.ClipperBase.SlopesEqual(e,h,this.m_UseFullRange)){var m=this.AddOutPt(h,e.Bot);this.AddJoin(d,m,e.Top)}else if(c!==null&&c.Curr.X==e.Bot.X&&c.Curr.Y==e.Bot.Y&&c.WindDelta!==0&&c.OutIdx>=0&&c.Curr.Y>c.Top.Y&&g.ClipperBase.SlopesEqual(e,c,this.m_UseFullRange)){var m=this.AddOutPt(c,e.Bot);this.AddJoin(d,m,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else s!==null?s.OutIdx>=0?(n==g.Direction.dLeftToRight?this.IntersectEdges(e,s,e.Top,!1):this.IntersectEdges(s,e,e.Top,!1),s.OutIdx>=0&&g.Error("ProcessHorizontal error")):(this.DeleteFromAEL(e),this.DeleteFromAEL(s)):(e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e))};g.Clipper.prototype.GetNextInAEL=function(e,t){return t==g.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL};g.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!=e&&e.Next.NextInLML!=e};g.Clipper.prototype.IsMaxima=function(e,t){return e!==null&&e.Top.Y==t&&e.NextInLML===null};g.Clipper.prototype.IsIntermediate=function(e,t){return e.Top.Y==t&&e.NextInLML!==null};g.Clipper.prototype.GetMaximaPair=function(e){var t=null;return g.IntPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?t=e.Next:g.IntPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null&&(t=e.Prev),t!==null&&(t.OutIdx==-2||t.NextInAEL==t.PrevInAEL&&!g.ClipperBase.IsHorizontal(t))?null:t};g.Clipper.prototype.ProcessIntersections=function(e,t){if(this.m_ActiveEdges==null)return!0;try{if(this.BuildIntersectList(e,t),this.m_IntersectList.length==0)return!0;if(this.m_IntersectList.length==1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,g.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0};g.Clipper.prototype.BuildIntersectList=function(e,t){if(this.m_ActiveEdges!==null){var r=this.m_ActiveEdges;for(this.m_SortedEdges=r;r!==null;)r.PrevInSEL=r.PrevInAEL,r.NextInSEL=r.NextInAEL,r.Curr.X=g.Clipper.TopX(r,t),r=r.NextInAEL;for(var n=!0;n&&this.m_SortedEdges!==null;){for(n=!1,r=this.m_SortedEdges;r.NextInSEL!==null;){var i=r.NextInSEL,o=new g.IntPoint;if(r.Curr.X>i.Curr.X){!this.IntersectPoint(r,i,o)&&r.Curr.X>i.Curr.X+1&&g.Error("Intersection error"),o.Y>e&&(o.Y=e,Math.abs(r.Dx)>Math.abs(i.Dx)?o.X=g.Clipper.TopX(i,e):o.X=g.Clipper.TopX(r,e));var a=new g.IntersectNode;a.Edge1=r,a.Edge2=i,a.Pt.X=o.X,a.Pt.Y=o.Y,this.m_IntersectList.push(a),this.SwapPositionsInSEL(r,i),n=!0}else r=i}if(r.PrevInSEL!==null)r.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}};g.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL==e.Edge2||e.Edge1.PrevInSEL==e.Edge2};g.Clipper.IntersectNodeSort=function(e,t){return t.Pt.Y-e.Pt.Y};g.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,t=0;t<e;t++){if(!this.EdgesAdjacent(this.m_IntersectList[t])){for(var r=t+1;r<e&&!this.EdgesAdjacent(this.m_IntersectList[r]);)r++;if(r==e)return!1;var n=this.m_IntersectList[t];this.m_IntersectList[t]=this.m_IntersectList[r],this.m_IntersectList[r]=n}this.SwapPositionsInSEL(this.m_IntersectList[t].Edge1,this.m_IntersectList[t].Edge2)}return!0};g.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,t=this.m_IntersectList.length;e<t;e++){var r=this.m_IntersectList[e];this.IntersectEdges(r.Edge1,r.Edge2,r.Pt,!0),this.SwapPositionsInAEL(r.Edge1,r.Edge2)}this.m_IntersectList.length=0};var _8e=function(e){return e<0?Math.ceil(e-.5):Math.round(e)},S8e=function(e){return e<0?Math.ceil(e-.5):Math.floor(e+.5)},w8e=function(e){return e<0?-Math.round(Math.abs(e)):Math.round(e)},T8e=function(e){return e<0?(e-=.5,e<-2147483648?Math.ceil(e):e|0):(e+=.5,e>2147483647?Math.floor(e):e|0)};at.msie?g.Clipper.Round=_8e:at.chromium?g.Clipper.Round=w8e:at.safari?g.Clipper.Round=T8e:g.Clipper.Round=S8e;g.Clipper.TopX=function(e,t){return t==e.Top.Y?e.Top.X:e.Bot.X+g.Clipper.Round(e.Dx*(t-e.Bot.Y))};g.Clipper.prototype.IntersectPoint=function(e,t,r){r.X=0,r.Y=0;var n,i;if(g.ClipperBase.SlopesEqual(e,t,this.m_UseFullRange)||e.Dx==t.Dx)return t.Bot.Y>e.Bot.Y?(r.X=t.Bot.X,r.Y=t.Bot.Y):(r.X=e.Bot.X,r.Y=e.Bot.Y),!1;if(e.Delta.X===0)r.X=e.Bot.X,g.ClipperBase.IsHorizontal(t)?r.Y=t.Bot.Y:(i=t.Bot.Y-t.Bot.X/t.Dx,r.Y=g.Clipper.Round(r.X/t.Dx+i));else if(t.Delta.X===0)r.X=t.Bot.X,g.ClipperBase.IsHorizontal(e)?r.Y=e.Bot.Y:(n=e.Bot.Y-e.Bot.X/e.Dx,r.Y=g.Clipper.Round(r.X/e.Dx+n));else{n=e.Bot.X-e.Bot.Y*e.Dx,i=t.Bot.X-t.Bot.Y*t.Dx;var o=(i-n)/(e.Dx-t.Dx);r.Y=g.Clipper.Round(o),Math.abs(e.Dx)<Math.abs(t.Dx)?r.X=g.Clipper.Round(e.Dx*o+n):r.X=g.Clipper.Round(t.Dx*o+i)}if(r.Y<e.Top.Y||r.Y<t.Top.Y){if(e.Top.Y>t.Top.Y)return r.Y=e.Top.Y,r.X=g.Clipper.TopX(t,e.Top.Y),r.X<e.Top.X;r.Y=t.Top.Y,Math.abs(e.Dx)<Math.abs(t.Dx)?r.X=g.Clipper.TopX(e,r.Y):r.X=g.Clipper.TopX(t,r.Y)}return!0};g.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var t=this.m_ActiveEdges;t!==null;){var r=this.IsMaxima(t,e);if(r){var n=this.GetMaximaPair(t);r=n===null||!g.ClipperBase.IsHorizontal(n)}if(r){var i=t.PrevInAEL;this.DoMaxima(t),i===null?t=this.m_ActiveEdges:t=i.NextInAEL}else{if(this.IsIntermediate(t,e)&&g.ClipperBase.IsHorizontal(t.NextInLML)?(t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot),this.AddEdgeToSEL(t)):(t.Curr.X=g.Clipper.TopX(t,e),t.Curr.Y=e),this.StrictlySimple){var i=t.PrevInAEL;if(t.OutIdx>=0&&t.WindDelta!==0&&i!==null&&i.OutIdx>=0&&i.Curr.X==t.Curr.X&&i.WindDelta!==0){var o=this.AddOutPt(i,t.Curr),a=this.AddOutPt(t,t.Curr);this.AddJoin(o,a,t.Curr)}}t=t.NextInAEL}}for(this.ProcessHorizontals(!0),t=this.m_ActiveEdges;t!==null;){if(this.IsIntermediate(t,e)){var o=null;t.OutIdx>=0&&(o=this.AddOutPt(t,t.Top)),t=this.UpdateEdgeIntoAEL(t);var i=t.PrevInAEL,s=t.NextInAEL;if(i!==null&&i.Curr.X==t.Bot.X&&i.Curr.Y==t.Bot.Y&&o!==null&&i.OutIdx>=0&&i.Curr.Y>i.Top.Y&&g.ClipperBase.SlopesEqual(t,i,this.m_UseFullRange)&&t.WindDelta!==0&&i.WindDelta!==0){var a=this.AddOutPt(i,t.Bot);this.AddJoin(o,a,t.Top)}else if(s!==null&&s.Curr.X==t.Bot.X&&s.Curr.Y==t.Bot.Y&&o!==null&&s.OutIdx>=0&&s.Curr.Y>s.Top.Y&&g.ClipperBase.SlopesEqual(t,s,this.m_UseFullRange)&&t.WindDelta!==0&&s.WindDelta!==0){var a=this.AddOutPt(s,t.Bot);this.AddJoin(o,a,t.Top)}}t=t.NextInAEL}};g.Clipper.prototype.DoMaxima=function(e){var t=this.GetMaximaPair(e);if(t===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var r=e.NextInAEL,n=!0;r!==null&&r!=t;)this.IntersectEdges(e,r,e.Top,!0),this.SwapPositionsInAEL(e,r),r=e.NextInAEL;e.OutIdx==-1&&t.OutIdx==-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(t)):e.OutIdx>=0&&t.OutIdx>=0?this.IntersectEdges(e,t,e.Top,!1):n&&e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=-1),this.DeleteFromAEL(e),t.OutIdx>=0&&(this.AddOutPt(t,e.Top),t.OutIdx=-1),this.DeleteFromAEL(t)):g.Error("DoMaxima error")};g.Clipper.ReversePaths=function(e){for(var t=0,r=e.length;t<r;t++)e[t].reverse()};g.Clipper.Orientation=function(e){return g.Clipper.Area(e)>=0};g.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var t=0,r=e;do t++,r=r.Next;while(r!=e);return t};g.Clipper.prototype.BuildResult=function(e){g.Clear(e);for(var t=0,r=this.m_PolyOuts.length;t<r;t++){var n=this.m_PolyOuts[t];if(n.Pts!==null){var i=n.Pts.Prev,o=this.PointCount(i);if(!(o<2)){for(var a=new Array(o),s=0;s<o;s++)a[s]=i.Pt,i=i.Prev;e.push(a)}}}};g.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var t=0,r=this.m_PolyOuts.length;t<r;t++){var n=this.m_PolyOuts[t],i=this.PointCount(n.Pts);if(!(n.IsOpen&&i<2||!n.IsOpen&&i<3)){this.FixHoleLinkage(n);var o=new g.PolyNode;e.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=i;for(var a=n.Pts.Prev,s=0;s<i;s++)o.m_polygon[s]=a.Pt,a=a.Prev}}for(var t=0,r=this.m_PolyOuts.length;t<r;t++){var n=this.m_PolyOuts[t];n.PolyNode!==null&&(n.IsOpen?(n.PolyNode.IsOpen=!0,e.AddChild(n.PolyNode)):n.FirstLeft!==null&&n.FirstLeft.PolyNode!=null?n.FirstLeft.PolyNode.AddChild(n.PolyNode):e.AddChild(n.PolyNode))}};g.Clipper.prototype.FixupOutPolygon=function(e){var t=null;e.BottomPt=null;for(var r=e.Pts;;){if(r.Prev==r||r.Prev==r.Next){this.DisposeOutPts(r),e.Pts=null;return}if(g.IntPoint.op_Equality(r.Pt,r.Next.Pt)||g.IntPoint.op_Equality(r.Pt,r.Prev.Pt)||g.ClipperBase.SlopesEqual(r.Prev.Pt,r.Pt,r.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(r.Prev.Pt,r.Pt,r.Next.Pt))){t=null;var n=r;r.Prev.Next=r.Next,r.Next.Prev=r.Prev,r=r.Prev,n=null}else{if(r==t)break;t===null&&(t=r),r=r.Next}}e.Pts=r};g.Clipper.prototype.DupOutPt=function(e,t){var r=new g.OutPt;return r.Pt.X=e.Pt.X,r.Pt.Y=e.Pt.Y,r.Idx=e.Idx,t?(r.Next=e.Next,r.Prev=e,e.Next.Prev=r,e.Next=r):(r.Prev=e.Prev,r.Next=e,e.Prev.Next=r,e.Prev=r),r};g.Clipper.prototype.GetOverlap=function(e,t,r,n,i){return e<t?r<n?(i.Left=Math.max(e,r),i.Right=Math.min(t,n)):(i.Left=Math.max(e,n),i.Right=Math.min(t,r)):r<n?(i.Left=Math.max(t,r),i.Right=Math.min(e,n)):(i.Left=Math.max(t,n),i.Right=Math.min(e,r)),i.Left<i.Right};g.Clipper.prototype.JoinHorz=function(e,t,r,n,i,o){var a=e.Pt.X>t.Pt.X?g.Direction.dRightToLeft:g.Direction.dLeftToRight,s=r.Pt.X>n.Pt.X?g.Direction.dRightToLeft:g.Direction.dLeftToRight;if(a==s)return!1;if(a==g.Direction.dLeftToRight){for(;e.Next.Pt.X<=i.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y==i.Y;)e=e.Next;o&&e.Pt.X!=i.X&&(e=e.Next),t=this.DupOutPt(e,!o),g.IntPoint.op_Inequality(t.Pt,i)&&(e=t,e.Pt.X=i.X,e.Pt.Y=i.Y,t=this.DupOutPt(e,!o))}else{for(;e.Next.Pt.X>=i.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y==i.Y;)e=e.Next;!o&&e.Pt.X!=i.X&&(e=e.Next),t=this.DupOutPt(e,o),g.IntPoint.op_Inequality(t.Pt,i)&&(e=t,e.Pt.X=i.X,e.Pt.Y=i.Y,t=this.DupOutPt(e,o))}if(s==g.Direction.dLeftToRight){for(;r.Next.Pt.X<=i.X&&r.Next.Pt.X>=r.Pt.X&&r.Next.Pt.Y==i.Y;)r=r.Next;o&&r.Pt.X!=i.X&&(r=r.Next),n=this.DupOutPt(r,!o),g.IntPoint.op_Inequality(n.Pt,i)&&(r=n,r.Pt.X=i.X,r.Pt.Y=i.Y,n=this.DupOutPt(r,!o))}else{for(;r.Next.Pt.X>=i.X&&r.Next.Pt.X<=r.Pt.X&&r.Next.Pt.Y==i.Y;)r=r.Next;!o&&r.Pt.X!=i.X&&(r=r.Next),n=this.DupOutPt(r,o),g.IntPoint.op_Inequality(n.Pt,i)&&(r=n,r.Pt.X=i.X,r.Pt.Y=i.Y,n=this.DupOutPt(r,o))}return a==g.Direction.dLeftToRight==o?(e.Prev=r,r.Next=e,t.Next=n,n.Prev=t):(e.Next=r,r.Prev=e,t.Prev=n,n.Next=t),!0};g.Clipper.prototype.JoinPoints=function(e,t,r){var n=e.OutPt1,i=new g.OutPt,o=e.OutPt2,a=new g.OutPt,s=e.OutPt1.Pt.Y==e.OffPt.Y;if(s&&g.IntPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&g.IntPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){for(i=e.OutPt1.Next;i!=n&&g.IntPoint.op_Equality(i.Pt,e.OffPt);)i=i.Next;var l=i.Pt.Y>e.OffPt.Y;for(a=e.OutPt2.Next;a!=o&&g.IntPoint.op_Equality(a.Pt,e.OffPt);)a=a.Next;var u=a.Pt.Y>e.OffPt.Y;return l==u?!1:l?(i=this.DupOutPt(n,!1),a=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,i.Next=a,a.Prev=i,e.OutPt1=n,e.OutPt2=i,!0):(i=this.DupOutPt(n,!0),a=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,i.Prev=a,a.Next=i,e.OutPt1=n,e.OutPt2=i,!0)}else if(s){for(i=n;n.Prev.Pt.Y==n.Pt.Y&&n.Prev!=i&&n.Prev!=o;)n=n.Prev;for(;i.Next.Pt.Y==i.Pt.Y&&i.Next!=n&&i.Next!=o;)i=i.Next;if(i.Next==n||i.Next==o)return!1;for(a=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=a&&o.Prev!=i;)o=o.Prev;for(;a.Next.Pt.Y==a.Pt.Y&&a.Next!=o&&a.Next!=n;)a=a.Next;if(a.Next==o||a.Next==n)return!1;var c={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,i.Pt.X,o.Pt.X,a.Pt.X,c))return!1;var p=c.Left,d=c.Right,h=new g.IntPoint,m;return n.Pt.X>=p&&n.Pt.X<=d?(h.X=n.Pt.X,h.Y=n.Pt.Y,m=n.Pt.X>i.Pt.X):o.Pt.X>=p&&o.Pt.X<=d?(h.X=o.Pt.X,h.Y=o.Pt.Y,m=o.Pt.X>a.Pt.X):i.Pt.X>=p&&i.Pt.X<=d?(h.X=i.Pt.X,h.Y=i.Pt.Y,m=i.Pt.X>n.Pt.X):(h.X=a.Pt.X,h.Y=a.Pt.Y,m=a.Pt.X>o.Pt.X),e.OutPt1=n,e.OutPt2=o,this.JoinHorz(n,i,o,a,h,m)}else{for(i=n.Next;g.IntPoint.op_Equality(i.Pt,n.Pt)&&i!=n;)i=i.Next;var x=i.Pt.Y>n.Pt.Y||!g.ClipperBase.SlopesEqual(n.Pt,i.Pt,e.OffPt,this.m_UseFullRange);if(x){for(i=n.Prev;g.IntPoint.op_Equality(i.Pt,n.Pt)&&i!=n;)i=i.Prev;if(i.Pt.Y>n.Pt.Y||!g.ClipperBase.SlopesEqual(n.Pt,i.Pt,e.OffPt,this.m_UseFullRange))return!1}for(a=o.Next;g.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Next;var b=a.Pt.Y>o.Pt.Y||!g.ClipperBase.SlopesEqual(o.Pt,a.Pt,e.OffPt,this.m_UseFullRange);if(b){for(a=o.Prev;g.IntPoint.op_Equality(a.Pt,o.Pt)&&a!=o;)a=a.Prev;if(a.Pt.Y>o.Pt.Y||!g.ClipperBase.SlopesEqual(o.Pt,a.Pt,e.OffPt,this.m_UseFullRange))return!1}return i==n||a==o||i==a||t==r&&x==b?!1:x?(i=this.DupOutPt(n,!1),a=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,i.Next=a,a.Prev=i,e.OutPt1=n,e.OutPt2=i,!0):(i=this.DupOutPt(n,!0),a=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,i.Prev=a,a.Next=i,e.OutPt1=n,e.OutPt2=i,!0)}};g.Clipper.GetBounds=function(e){for(var t=0,r=e.length;t<r&&e[t].length==0;)t++;if(t==r)return new g.IntRect(0,0,0,0);var n=new g.IntRect;for(n.left=e[t][0].X,n.right=n.left,n.top=e[t][0].Y,n.bottom=n.top;t<r;t++)for(var i=0,o=e[t].length;i<o;i++)e[t][i].X<n.left?n.left=e[t][i].X:e[t][i].X>n.right&&(n.right=e[t][i].X),e[t][i].Y<n.top?n.top=e[t][i].Y:e[t][i].Y>n.bottom&&(n.bottom=e[t][i].Y);return n};g.Clipper.prototype.GetBounds2=function(e){var t=e,r=new g.IntRect;for(r.left=e.Pt.X,r.right=e.Pt.X,r.top=e.Pt.Y,r.bottom=e.Pt.Y,e=e.Next;e!=t;)e.Pt.X<r.left&&(r.left=e.Pt.X),e.Pt.X>r.right&&(r.right=e.Pt.X),e.Pt.Y<r.top&&(r.top=e.Pt.Y),e.Pt.Y>r.bottom&&(r.bottom=e.Pt.Y),e=e.Next;return r};g.Clipper.PointInPolygon=function(e,t){var r=0,n=t.length;if(n<3)return 0;for(var i=t[0],o=1;o<=n;++o){var a=o==n?t[0]:t[o];if(a.Y==e.Y&&(a.X==e.X||i.Y==e.Y&&a.X>e.X==i.X<e.X))return-1;if(i.Y<e.Y!=a.Y<e.Y){if(i.X>=e.X)if(a.X>e.X)r=1-r;else{var s=(i.X-e.X)*(a.Y-e.Y)-(a.X-e.X)*(i.Y-e.Y);if(s==0)return-1;s>0==a.Y>i.Y&&(r=1-r)}else if(a.X>e.X){var s=(i.X-e.X)*(a.Y-e.Y)-(a.X-e.X)*(i.Y-e.Y);if(s==0)return-1;s>0==a.Y>i.Y&&(r=1-r)}}i=a}return r};g.Clipper.prototype.PointInPolygon=function(e,t){for(var r=0,n=t;;){var i=t.Pt.X,o=t.Pt.Y,a=t.Next.Pt.X,s=t.Next.Pt.Y;if(s==e.Y&&(a==e.X||o==e.Y&&a>e.X==i<e.X))return-1;if(o<e.Y!=s<e.Y){if(i>=e.X)if(a>e.X)r=1-r;else{var l=(i-e.X)*(s-e.Y)-(a-e.X)*(o-e.Y);if(l==0)return-1;l>0==s>o&&(r=1-r)}else if(a>e.X){var l=(i-e.X)*(s-e.Y)-(a-e.X)*(o-e.Y);if(l==0)return-1;l>0==s>o&&(r=1-r)}}if(t=t.Next,n==t)break}return r};g.Clipper.prototype.Poly2ContainsPoly1=function(e,t){var r=e;do{var n=this.PointInPolygon(r.Pt,t);if(n>=0)return n!=0;r=r.Next}while(r!=e);return!0};g.Clipper.prototype.FixupFirstLefts1=function(e,t){for(var r=0,n=this.m_PolyOuts.length;r<n;r++){var i=this.m_PolyOuts[r];i.Pts!==null&&i.FirstLeft==e&&this.Poly2ContainsPoly1(i.Pts,t.Pts)&&(i.FirstLeft=t)}};g.Clipper.prototype.FixupFirstLefts2=function(e,t){for(var r=0,n=this.m_PolyOuts,i=n.length,o=n[r];r<i;r++,o=n[r])o.FirstLeft==e&&(o.FirstLeft=t)};g.Clipper.ParseFirstLeft=function(e){for(;e!=null&&e.Pts==null;)e=e.FirstLeft;return e};g.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,t=this.m_Joins.length;e<t;e++){var r=this.m_Joins[e],n=this.GetOutRec(r.OutPt1.Idx),i=this.GetOutRec(r.OutPt2.Idx);if(!(n.Pts==null||i.Pts==null)){var o;if(n==i?o=n:this.Param1RightOfParam2(n,i)?o=i:this.Param1RightOfParam2(i,n)?o=n:o=this.GetLowermostRec(n,i),!!this.JoinPoints(r,n,i))if(n==i){if(n.Pts=r.OutPt1,n.BottomPt=null,i=this.CreateOutRec(),i.Pts=r.OutPt2,this.UpdateOutPtIdxs(i),this.m_UsingPolyTree)for(var a=0,s=this.m_PolyOuts.length;a<s-1;a++){var l=this.m_PolyOuts[a];l.Pts==null||g.Clipper.ParseFirstLeft(l.FirstLeft)!=n||l.IsHole==n.IsHole||this.Poly2ContainsPoly1(l.Pts,r.OutPt2)&&(l.FirstLeft=i)}this.Poly2ContainsPoly1(i.Pts,n.Pts)?(i.IsHole=!n.IsHole,i.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,n),(i.IsHole^this.ReverseSolution)==this.Area(i)>0&&this.ReversePolyPtLinks(i.Pts)):this.Poly2ContainsPoly1(n.Pts,i.Pts)?(i.IsHole=n.IsHole,n.IsHole=!i.IsHole,i.FirstLeft=n.FirstLeft,n.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,i),(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)):(i.IsHole=n.IsHole,i.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,i))}else i.Pts=null,i.BottomPt=null,i.Idx=n.Idx,n.IsHole=o.IsHole,o==i&&(n.FirstLeft=i.FirstLeft),i.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,n)}}};g.Clipper.prototype.UpdateOutPtIdxs=function(e){var t=e.Pts;do t.Idx=e.Idx,t=t.Prev;while(t!=e.Pts)};g.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var t=this.m_PolyOuts[e++],r=t.Pts;if(r!==null)do{for(var n=r.Next;n!=t.Pts;){if(g.IntPoint.op_Equality(r.Pt,n.Pt)&&n.Next!=r&&n.Prev!=r){var i=r.Prev,o=n.Prev;r.Prev=o,o.Next=r,n.Prev=i,i.Next=n,t.Pts=r;var a=this.CreateOutRec();a.Pts=n,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,t.Pts)?(a.IsHole=!t.IsHole,a.FirstLeft=t):this.Poly2ContainsPoly1(t.Pts,a.Pts)?(a.IsHole=t.IsHole,t.IsHole=!a.IsHole,a.FirstLeft=t.FirstLeft,t.FirstLeft=a):(a.IsHole=t.IsHole,a.FirstLeft=t.FirstLeft),n=r}n=n.Next}r=r.Next}while(r!=t.Pts)}};g.Clipper.Area=function(e){var t=e.length;if(t<3)return 0;for(var r=0,n=0,i=t-1;n<t;++n)r+=(e[i].X+e[n].X)*(e[i].Y-e[n].Y),i=n;return-r*.5};g.Clipper.prototype.Area=function(e){var t=e.Pts;if(t==null)return 0;var r=0;do r=r+(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next;while(t!=e.Pts);return r*.5};_le&&(g.Clipper.OffsetPaths=function(e,t,r,n,i){var o=new g.Paths,a=new g.ClipperOffset(i,i);return a.AddPaths(e,r,n),a.Execute(o,t),o});g.Clipper.SimplifyPolygon=function(e,t){var r=new Array,n=new g.Clipper(0);return n.StrictlySimple=!0,n.AddPath(e,g.PolyType.ptSubject,!0),n.Execute(g.ClipType.ctUnion,r,t,t),r};g.Clipper.SimplifyPolygons=function(e,t){typeof t>"u"&&(t=g.PolyFillType.pftEvenOdd);var r=new Array,n=new g.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(e,g.PolyType.ptSubject,!0),n.Execute(g.ClipType.ctUnion,r,t,t),r};g.Clipper.DistanceSqrd=function(e,t){var r=e.X-t.X,n=e.Y-t.Y;return r*r+n*n};g.Clipper.DistanceFromLineSqrd=function(e,t,r){var n=t.Y-r.Y,i=r.X-t.X,o=n*t.X+i*t.Y;return o=n*e.X+i*e.Y-o,o*o/(n*n+i*i)};g.Clipper.SlopesNearCollinear=function(e,t,r,n){return g.Clipper.DistanceFromLineSqrd(t,e,r)<n};g.Clipper.PointsAreClose=function(e,t,r){var n=e.X-t.X,i=e.Y-t.Y;return n*n+i*i<=r};g.Clipper.ExcludeOp=function(e){var t=e.Prev;return t.Next=e.Next,e.Next.Prev=t,t.Idx=0,t};g.Clipper.CleanPolygon=function(e,t){typeof t>"u"&&(t=1.415);var r=e.length;if(r==0)return new Array;for(var n=new Array(r),i=0;i<r;++i)n[i]=new g.OutPt;for(var i=0;i<r;++i)n[i].Pt=e[i],n[i].Next=n[(i+1)%r],n[i].Next.Prev=n[i],n[i].Idx=0;for(var o=t*t,a=n[0];a.Idx==0&&a.Next!=a.Prev;)g.Clipper.PointsAreClose(a.Pt,a.Prev.Pt,o)?(a=g.Clipper.ExcludeOp(a),r--):g.Clipper.PointsAreClose(a.Prev.Pt,a.Next.Pt,o)?(g.Clipper.ExcludeOp(a.Next),a=g.Clipper.ExcludeOp(a),r-=2):g.Clipper.SlopesNearCollinear(a.Prev.Pt,a.Pt,a.Next.Pt,o)?(a=g.Clipper.ExcludeOp(a),r--):(a.Idx=1,a=a.Next);r<3&&(r=0);for(var s=new Array(r),i=0;i<r;++i)s[i]=new g.IntPoint(a.Pt),a=a.Next;return n=null,s};g.Clipper.CleanPolygons=function(e,t){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++)r[n]=g.Clipper.CleanPolygon(e[n],t);return r};g.Clipper.Minkowski=function(e,t,r,n){var i=n?1:0,o=e.length,a=t.length,s=new Array;if(r)for(var l=0;l<a;l++){for(var u=new Array(o),c=0,p=e.length,d=e[c];c<p;c++,d=e[c])u[c]=new g.IntPoint(t[l].X+d.X,t[l].Y+d.Y);s.push(u)}else for(var l=0;l<a;l++){for(var u=new Array(o),c=0,p=e.length,d=e[c];c<p;c++,d=e[c])u[c]=new g.IntPoint(t[l].X-d.X,t[l].Y-d.Y);s.push(u)}for(var h=new Array,l=0;l<a-1+i;l++)for(var c=0;c<o;c++){var m=new Array;m.push(s[l%a][c%o]),m.push(s[(l+1)%a][c%o]),m.push(s[(l+1)%a][(c+1)%o]),m.push(s[l%a][(c+1)%o]),g.Clipper.Orientation(m)||m.reverse(),h.push(m)}var x=new g.Clipper(0);return x.AddPaths(h,g.PolyType.ptSubject,!0),x.Execute(g.ClipType.ctUnion,s,g.PolyFillType.pftNonZero,g.PolyFillType.pftNonZero),s};g.Clipper.MinkowskiSum=function(){var e=arguments,t=e.length;if(t==3){var r=e[0],n=e[1],i=e[2];return g.Clipper.Minkowski(r,n,!0,i)}else if(t==4){for(var r=e[0],o=e[1],a=e[2],i=e[3],s=new g.Clipper,l,u=0,c=o.length;u<c;++u){var l=g.Clipper.Minkowski(r,o[u],!0,i);s.AddPaths(l,g.PolyType.ptSubject,!0)}i&&s.AddPaths(o,g.PolyType.ptClip,!0);var p=new g.Paths;return s.Execute(g.ClipType.ctUnion,p,a,a),p}};g.Clipper.MinkowskiDiff=function(e,t,r){return g.Clipper.Minkowski(e,t,!1,r)};g.Clipper.PolyTreeToPaths=function(e){var t=new Array;return g.Clipper.AddPolyNodeToPaths(e,g.Clipper.NodeType.ntAny,t),t};g.Clipper.AddPolyNodeToPaths=function(e,t,r){var n=!0;switch(t){case g.Clipper.NodeType.ntOpen:return;case g.Clipper.NodeType.ntClosed:n=!e.IsOpen;break;default:break}e.m_polygon.length>0&&n&&r.push(e.m_polygon);for(var i=0,o=e.Childs(),a=o.length,s=o[i];i<a;i++,s=o[i])g.Clipper.AddPolyNodeToPaths(s,t,r)};g.Clipper.OpenPathsFromPolyTree=function(e){for(var t=new g.Paths,r=0,n=e.ChildCount();r<n;r++)e.Childs()[r].IsOpen&&t.push(e.Childs()[r].m_polygon);return t};g.Clipper.ClosedPathsFromPolyTree=function(e){var t=new g.Paths;return g.Clipper.AddPolyNodeToPaths(e,g.Clipper.NodeType.ntClosed,t),t};yP(g.Clipper,g.ClipperBase);g.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2};g.ClipperOffset=function(e,t){typeof e>"u"&&(e=2),typeof t>"u"&&(t=g.ClipperOffset.def_arc_tolerance),this.m_destPolys=new g.Paths,this.m_srcPoly=new g.Path,this.m_destPoly=new g.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new g.IntPoint,this.m_polyNodes=new g.PolyNode,this.MiterLimit=e,this.ArcTolerance=t,this.m_lowest.X=-1};g.ClipperOffset.two_pi=6.28318530717959;g.ClipperOffset.def_arc_tolerance=.25;g.ClipperOffset.prototype.Clear=function(){g.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1};g.ClipperOffset.Round=g.Clipper.Round;g.ClipperOffset.prototype.AddPath=function(e,t,r){var n=e.length-1;if(!(n<0)){var i=new g.PolyNode;if(i.m_jointype=t,i.m_endtype=r,r==g.EndType.etClosedLine||r==g.EndType.etClosedPolygon)for(;n>0&&g.IntPoint.op_Equality(e[0],e[n]);)n--;i.m_polygon.push(e[0]);for(var o=0,a=0,s=1;s<=n;s++)g.IntPoint.op_Inequality(i.m_polygon[o],e[s])&&(o++,i.m_polygon.push(e[s]),(e[s].Y>i.m_polygon[a].Y||e[s].Y==i.m_polygon[a].Y&&e[s].X<i.m_polygon[a].X)&&(a=o));if(!(r==g.EndType.etClosedPolygon&&o<2||r!=g.EndType.etClosedPolygon&&o<0)&&(this.m_polyNodes.AddChild(i),r==g.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new g.IntPoint(0,a);else{var l=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(i.m_polygon[a].Y>l.Y||i.m_polygon[a].Y==l.Y&&i.m_polygon[a].X<l.X)&&(this.m_lowest=new g.IntPoint(this.m_polyNodes.ChildCount()-1,a))}}};g.ClipperOffset.prototype.AddPaths=function(e,t,r){for(var n=0,i=e.length;n<i;n++)this.AddPath(e[n],t,r)};g.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!g.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];(t.m_endtype==g.EndType.etClosedPolygon||t.m_endtype==g.EndType.etClosedLine&&g.Clipper.Orientation(t.m_polygon))&&t.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var t=this.m_polyNodes.Childs()[e];t.m_endtype==g.EndType.etClosedLine&&!g.Clipper.Orientation(t.m_polygon)&&t.m_polygon.reverse()}};g.ClipperOffset.GetUnitNormal=function(e,t){var r=t.X-e.X,n=t.Y-e.Y;if(r==0&&n==0)return new g.DoublePoint(0,0);var i=1/Math.sqrt(r*r+n*n);return r*=i,n*=i,new g.DoublePoint(n,-r)};g.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,g.ClipperBase.near_zero(e)){for(var t=0;t<this.m_polyNodes.ChildCount();t++){var r=this.m_polyNodes.Childs()[t];r.m_endtype==g.EndType.etClosedPolygon&&this.m_destPolys.push(r.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var n;this.ArcTolerance<=0?n=g.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*g.ClipperOffset.def_arc_tolerance?n=Math.abs(e)*g.ClipperOffset.def_arc_tolerance:n=this.ArcTolerance;var i=3.14159265358979/Math.acos(1-n/Math.abs(e));this.m_sin=Math.sin(g.ClipperOffset.two_pi/i),this.m_cos=Math.cos(g.ClipperOffset.two_pi/i),this.m_StepsPerRad=i/g.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var t=0;t<this.m_polyNodes.ChildCount();t++){var r=this.m_polyNodes.Childs()[t];this.m_srcPoly=r.m_polygon;var o=this.m_srcPoly.length;if(!(o==0||e<=0&&(o<3||r.m_endtype!=g.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,o==1){if(r.m_jointype==g.JoinType.jtRound)for(var a=1,s=0,l=1;l<=i;l++){this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[0].X+a*e),g.ClipperOffset.Round(this.m_srcPoly[0].Y+s*e)));var u=a;a=a*this.m_cos-this.m_sin*s,s=u*this.m_sin+s*this.m_cos}else for(var a=-1,s=-1,l=0;l<4;++l)this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[0].X+a*e),g.ClipperOffset.Round(this.m_srcPoly[0].Y+s*e))),a<0?a=1:s<0?s=1:a=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var l=0;l<o-1;l++)this.m_normals.push(g.ClipperOffset.GetUnitNormal(this.m_srcPoly[l],this.m_srcPoly[l+1]));if(r.m_endtype==g.EndType.etClosedLine||r.m_endtype==g.EndType.etClosedPolygon?this.m_normals.push(g.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new g.DoublePoint(this.m_normals[o-2])),r.m_endtype==g.EndType.etClosedPolygon){for(var c=o-1,l=0;l<o;l++)c=this.OffsetPoint(l,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(r.m_endtype==g.EndType.etClosedLine){for(var c=o-1,l=0;l<o;l++)c=this.OffsetPoint(l,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var p=this.m_normals[o-1],l=o-1;l>0;l--)this.m_normals[l]=new g.DoublePoint(-this.m_normals[l-1].X,-this.m_normals[l-1].Y);this.m_normals[0]=new g.DoublePoint(-p.X,-p.Y),c=0;for(var l=o-1;l>=0;l--)c=this.OffsetPoint(l,c,r.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var c=0,l=1;l<o-1;++l)c=this.OffsetPoint(l,c,r.m_jointype);var d;if(r.m_endtype==g.EndType.etOpenButt){var l=o-1;d=new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[l].X+this.m_normals[l].X*e),g.ClipperOffset.Round(this.m_srcPoly[l].Y+this.m_normals[l].Y*e)),this.m_destPoly.push(d),d=new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[l].X-this.m_normals[l].X*e),g.ClipperOffset.Round(this.m_srcPoly[l].Y-this.m_normals[l].Y*e)),this.m_destPoly.push(d)}else{var l=o-1;c=o-2,this.m_sinA=0,this.m_normals[l]=new g.DoublePoint(-this.m_normals[l].X,-this.m_normals[l].Y),r.m_endtype==g.EndType.etOpenSquare?this.DoSquare(l,c):this.DoRound(l,c)}for(var l=o-1;l>0;l--)this.m_normals[l]=new g.DoublePoint(-this.m_normals[l-1].X,-this.m_normals[l-1].Y);this.m_normals[0]=new g.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),c=o-1;for(var l=c-1;l>0;--l)c=this.OffsetPoint(l,c,r.m_jointype);r.m_endtype==g.EndType.etOpenButt?(d=new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*e),g.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*e)),this.m_destPoly.push(d),d=new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*e),g.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*e)),this.m_destPoly.push(d)):(c=1,this.m_sinA=0,r.m_endtype==g.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}};g.ClipperOffset.prototype.Execute=function(){var e=arguments,t=e[0]instanceof g.PolyTree;if(t){var r=e[0],n=e[1];r.Clear(),this.FixOrientations(),this.DoOffset(n);var i=new g.Clipper(0);if(i.AddPaths(this.m_destPolys,g.PolyType.ptSubject,!0),n>0)i.Execute(g.ClipType.ctUnion,r,g.PolyFillType.pftPositive,g.PolyFillType.pftPositive);else{var o=g.Clipper.GetBounds(this.m_destPolys),a=new g.Path;if(a.push(new g.IntPoint(o.left-10,o.bottom+10)),a.push(new g.IntPoint(o.right+10,o.bottom+10)),a.push(new g.IntPoint(o.right+10,o.top-10)),a.push(new g.IntPoint(o.left-10,o.top-10)),i.AddPath(a,g.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(g.ClipType.ctUnion,r,g.PolyFillType.pftNegative,g.PolyFillType.pftNegative),r.ChildCount()==1&&r.Childs()[0].ChildCount()>0){var s=r.Childs()[0];r.Childs()[0]=s.Childs()[0];for(var l=1;l<s.ChildCount();l++)r.AddChild(s.Childs()[l])}else r.Clear()}}else{var r=e[0],n=e[1];g.Clear(r),this.FixOrientations(),this.DoOffset(n);var i=new g.Clipper(0);if(i.AddPaths(this.m_destPolys,g.PolyType.ptSubject,!0),n>0)i.Execute(g.ClipType.ctUnion,r,g.PolyFillType.pftPositive,g.PolyFillType.pftPositive);else{var o=g.Clipper.GetBounds(this.m_destPolys),a=new g.Path;a.push(new g.IntPoint(o.left-10,o.bottom+10)),a.push(new g.IntPoint(o.right+10,o.bottom+10)),a.push(new g.IntPoint(o.right+10,o.top-10)),a.push(new g.IntPoint(o.left-10,o.top-10)),i.AddPath(a,g.PolyType.ptSubject,!0),i.ReverseSolution=!0,i.Execute(g.ClipType.ctUnion,r,g.PolyFillType.pftNegative,g.PolyFillType.pftNegative),r.length>0&&r.splice(0,1)}}};g.ClipperOffset.prototype.OffsetPoint=function(e,t,r){if(this.m_sinA=this.m_normals[t].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[t].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return t;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[t].X*this.m_delta),g.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[t].Y*this.m_delta))),this.m_destPoly.push(new g.IntPoint(this.m_srcPoly[e])),this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),g.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)));else switch(r){case g.JoinType.jtMiter:{var n=1+(this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y);n>=this.m_miterLim?this.DoMiter(e,t,n):this.DoSquare(e,t);break}case g.JoinType.jtSquare:this.DoSquare(e,t);break;case g.JoinType.jtRound:this.DoRound(e,t);break}return t=e,t};g.ClipperOffset.prototype.DoSquare=function(e,t){var r=Math.tan(Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[t].X-this.m_normals[t].Y*r)),g.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[t].Y+this.m_normals[t].X*r)))),this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*r)),g.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*r))))};g.ClipperOffset.prototype.DoMiter=function(e,t,r){var n=this.m_delta/r;this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+(this.m_normals[t].X+this.m_normals[e].X)*n),g.ClipperOffset.Round(this.m_srcPoly[e].Y+(this.m_normals[t].Y+this.m_normals[e].Y)*n)))};g.ClipperOffset.prototype.DoRound=function(e,t){for(var r=Math.atan2(this.m_sinA,this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y),n=g.Cast_Int32(g.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),i=this.m_normals[t].X,o=this.m_normals[t].Y,a,s=0;s<n;++s)this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+i*this.m_delta),g.ClipperOffset.Round(this.m_srcPoly[e].Y+o*this.m_delta))),a=i,i=i*this.m_cos-this.m_sin*o,o=a*this.m_sin+o*this.m_cos;this.m_destPoly.push(new g.IntPoint(g.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),g.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)))};g.Error=function(e){try{throw new Error(e)}catch(t){alert(t.message)}};g.JS={};g.JS.AreaOfPolygon=function(e,t){return t||(t=1),g.Clipper.Area(e)/(t*t)};g.JS.AreaOfPolygons=function(e,t){t||(t=1);for(var r=0,n=0;n<e.length;n++)r+=g.Clipper.Area(e[n]);return r/(t*t)};g.JS.BoundsOfPath=function(e,t){return g.JS.BoundsOfPaths([e],t)};g.JS.BoundsOfPaths=function(e,t){t||(t=1);var r=g.Clipper.GetBounds(e);return r.left/=t,r.bottom/=t,r.right/=t,r.top/=t,r};g.JS.Clean=function(n,t){if(!(n instanceof Array))return[];var r=n[0]instanceof Array,n=g.JS.Clone(n);if(typeof t!="number"||t===null)return g.Error("Delta is not a number in Clean()."),n;if(n.length===0||n.length==1&&n[0].length===0||t<0)return n;r||(n=[n]);for(var i=n.length,o,a,s,l,u,c,p,d=[],h=0;h<i;h++)if(a=n[h],o=a.length,o!==0){if(o<3){s=a,d.push(s);continue}for(s=a,l=t*t,u=a[0],c=1,p=1;p<o;p++)(a[p].X-u.X)*(a[p].X-u.X)+(a[p].Y-u.Y)*(a[p].Y-u.Y)<=l||(s[c]=a[p],u=a[p],c++);u=a[c-1],(a[0].X-u.X)*(a[0].X-u.X)+(a[0].Y-u.Y)*(a[0].Y-u.Y)<=l&&c--,c<o&&s.splice(c,o-c),s.length&&d.push(s)}return!r&&d.length?d=d[0]:!r&&d.length===0?d=[]:r&&d.length===0&&(d=[[]]),d};g.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length==1&&e[0].length===0)return[[]];var t=e[0]instanceof Array;t||(e=[e]);var r=e.length,n,i,o,a,s=new Array(r);for(i=0;i<r;i++){for(n=e[i].length,a=new Array(n),o=0;o<n;o++)a[o]={X:e[i][o].X,Y:e[i][o].Y};s[i]=a}return t||(s=s[0]),s};g.JS.Lighten=function(e,t){if(!(e instanceof Array))return[];if(typeof t!="number"||t===null)return g.Error("Tolerance is not a number in Lighten()."),g.JS.Clone(e);if(e.length===0||e.length==1&&e[0].length===0||t<0)return g.JS.Clone(e);e[0]instanceof Array||(e=[e]);var r,n,i,o,a,s,l,u,c,p,d,h,m,x,b,_,T,I=e.length,S=t*t,E=[];for(r=0;r<I;r++)if(i=e[r],s=i.length,s!=0){for(o=0;o<1e6;o++){for(a=[],s=i.length,i[s-1].X!=i[0].X||i[s-1].Y!=i[0].Y?(h=1,i.push({X:i[0].X,Y:i[0].Y}),s=i.length):h=0,d=[],n=0;n<s-2;n++)l=i[n],c=i[n+1],u=i[n+2],_=l.X,T=l.Y,m=u.X-_,x=u.Y-T,(m!==0||x!==0)&&(b=((c.X-_)*m+(c.Y-T)*x)/(m*m+x*x),b>1?(_=u.X,T=u.Y):b>0&&(_+=m*b,T+=x*b)),m=c.X-_,x=c.Y-T,p=m*m+x*x,p<=S&&(d[n+1]=1,n++);for(a.push({X:i[0].X,Y:i[0].Y}),n=1;n<s-1;n++)d[n]||a.push({X:i[n].X,Y:i[n].Y});if(a.push({X:i[s-1].X,Y:i[s-1].Y}),h&&i.pop(),d.length)i=a;else break}s=a.length,a[s-1].X==a[0].X&&a[s-1].Y==a[0].Y&&a.pop(),a.length>2&&E.push(a)}return!e[0]instanceof Array&&(E=E[0]),typeof E>"u"&&(E=[[]]),E};g.JS.PerimeterOfPath=function(e,t,r){if(typeof e>"u")return 0;var n=Math.sqrt,i=0,o,a,s=0,l=0,u=0,c=0,p=e.length;if(p<2)return 0;for(t&&(e[p]=e[0],p++);--p;)o=e[p],s=o.X,l=o.Y,a=e[p-1],u=a.X,c=a.Y,i+=n((s-u)*(s-u)+(l-c)*(l-c));return t&&e.pop(),i/r};g.JS.PerimeterOfPaths=function(e,t,r){r||(r=1);for(var n=0,i=0;i<e.length;i++)n+=g.JS.PerimeterOfPath(e[i],t,r);return n};g.JS.ScaleDownPath=function(e,t){var r,n;for(t||(t=1),r=e.length;r--;)n=e[r],n.X=n.X/t,n.Y=n.Y/t};g.JS.ScaleDownPaths=function(e,t){var r,n,i,o=Math.round;for(t||(t=1),r=e.length;r--;)for(n=e[r].length;n--;)i=e[r][n],i.X=i.X/t,i.Y=i.Y/t};g.JS.ScaleUpPath=function(e,t){var r,n,i=Math.round;for(t||(t=1),r=e.length;r--;)n=e[r],n.X=i(n.X*t),n.Y=i(n.Y*t)};g.JS.ScaleUpPaths=function(e,t){var r,n,i,o=Math.round;for(t||(t=1),r=e.length;r--;)for(n=e[r].length;n--;)i=e[r][n],i.X=o(i.X*t),i.Y=o(i.Y*t)};g.ExPolygons=function(){return[]};g.ExPolygon=function(){this.outer=null,this.holes=null};g.JS.AddOuterPolyNodeToExPolygons=function(e,t){var r=new g.ExPolygon;r.outer=e.Contour();var n=e.Childs(),i=n.length;r.holes=new Array(i);var o,a,s,l,u,c;for(s=0;s<i;s++)for(o=n[s],r.holes[s]=o.Contour(),l=0,u=o.Childs(),c=u.length;l<c;l++)a=u[l],g.JS.AddOuterPolyNodeToExPolygons(a,t);t.push(r)};g.JS.ExPolygonsToPaths=function(e){var t,r,n,i,o=new g.Paths;for(t=0,n=e.length;t<n;t++)for(o.push(e[t].outer),r=0,i=e[t].holes.length;r<i;r++)o.push(e[t].holes[r]);return o};g.JS.PolyTreeToExPolygons=function(e){var t=new g.ExPolygons,r,n,i,o;for(n=0,i=e.Childs(),o=i.length;n<o;n++)r=i[n],g.JS.AddOuterPolyNodeToExPolygons(r,t);return t};u_.exports=g});function Ple(e){this.name="JSClipperError",this.message=e,this.stack=new Error().stack}var Rz,p_,bP=f(()=>{"use strict";Rz=Ie(Cle());Ple.prototype=Error.prototype;Rz.default.Error=function(e){throw new Ple(e)};p_=Rz.default});var For,Bz=f(()=>{"use strict";bP();For=new p_.ClipperOffset});var _p=f(()=>{"use strict"});var Mle=f(()=>{"use strict"});var zz=f(()=>{"use strict";ta();ln();Bz();_p();Pe();Mle()});var d_=f(()=>{"use strict";Pe();zz()});var ta=f(()=>{"use strict";Oq();d_()});var Ju=f(()=>{"use strict";ta()});var Ku=f(()=>{"use strict";Ju();Na();_o()});var Nz=f(()=>{"use strict"});var Dle=f(()=>{"use strict";Gl();Nz();So()});var Lle=f(()=>{});var Fle=f(()=>{"use strict"});var kle=f(()=>{"use strict"});var Ole=f(()=>{"use strict"});var Rle=f(()=>{"use strict"});var Uz=f(()=>{"use strict";Fle();kle();Ole();Rle()});var $z=f(()=>{"use strict";Uz()});var Ble=f(()=>{"use strict";Uz();$z()});var zle=f(()=>{"use strict";Ble();$z()});var vf=f(()=>{"use strict";zle()});var Nle=f(()=>{});var jz=f(()=>{"use strict";_s()});var Gz=f(()=>{"use strict";vf();_s()});var $le=f(()=>{"use strict";Gz();jz()});var Vle=f(()=>{"use strict";Lle();vf();Nle();jz();Na();yc();Gz();_s();$le();Sp()});var Hz=f(()=>{"use strict"});var jle=f(()=>{"use strict";Hz()});var Gle=f(()=>{});var Hle=f(()=>{"use strict";Ku()});var Zle=f(()=>{"use strict";vf();_o();yc();jle();Hz();Gle();Hle();So();Pe()});var Wle=f(()=>{"use strict";Zle()});var Zz,Xle=f(()=>{"use strict";Zz=Object.freeze({visible:!0,color:"black",flipToFaceCamera:!0,fillOpacity:1,font:void 0,fontSize:2,margin:[.2,1,.2,1.5],outlineColor:"black",outlineOpacity:1,outlineWidth:0,outlineOffsetX:0,outlineOffsetY:0,outlineBlur:0,strokeOpacity:1,strokeWidth:0,maxWidth:void 0,maxHeight:void 0,strokeColor:"black",hoverColor:void 0})});var qle=f(()=>{"use strict"});var Yle=f(()=>{"use strict"});var f_=f(()=>{"use strict";d_();Xle();qle();Yle()});var tue=f(()=>{"use strict";ln();f_()});var rue=f(()=>{"use strict";tue()});var dlr,Wz=f(()=>{"use strict";bP();So();dlr=new p_.ClipperOffset});var Xz=f(()=>{"use strict";So()});var nue=f(()=>{"use strict";bP()});var Qy,_P=f(()=>{"use strict";xr();Qy=C.object({type:C.enum(["Point"]),coordinates:C.array(C.number()).min(2).max(3)})});var Yz,L8e,Tlr,Jz,Ilr,SP=f(()=>{"use strict";_P();xr();Pe();So();Yz=C.object({rotation:C.array(C.number()).length(3).optional(),altitude:C.number().optional(),scale:C.array(C.number()).length(3).optional(),interactive:C.boolean().optional(),verticalOffset:C.number().optional(),id:C.union([C.number(),C.string()]).optional()}),L8e=C.object({type:C.enum(["Feature"]),geometry:Qy,properties:Yz}),Tlr=C.object({type:C.enum(["FeatureCollection"]),features:C.array(L8e)}),Jz=C.object({color:C.string()}),Ilr=C.object({url:C.string(),color:C.string().optional(),opacity:C.number().optional(),material:C.record(C.string(),Jz).optional()})});var wP=f(()=>{"use strict";ln();ta()});var iue=f(()=>{"use strict";_o();Pz();ta();d_();Wz();Xz();Bz();nue();SP();Ju();Pe();f_();wP();Iz();fP();l_()});var aue=f(()=>{"use strict";yb();Na()});var sue=f(()=>{"use strict";Na();ln()});var lue=f(()=>{"use strict"});var uue=f(()=>{"use strict";lue()});var cue=f(()=>{"use strict"});var pue=f(()=>{"use strict";uue();Ua();cb();Na();cue();Pe();z6()});var fue=f(()=>{"use strict";_o();ta();f_();wP();Ua();l_()});var hue=f(()=>{"use strict";yc();cb();Na();Pe()});var mue=f(()=>{"use strict";Ua();Pe()});var tcr,rcr,Kz=f(()=>{"use strict";_o();xr();_P();tcr=C.object({interactive:C.boolean().optional(),id:C.string().optional(),width:C.union([C.number(),C.object({on:C.literal("zoom-level").optional(),input:C.array(C.number()).nonempty(),output:C.array(C.number()).nonempty(),easing:C.string().optional()})]).optional(),accentColor:C.string().optional(),displayArrowsOnPath:C.boolean().optional(),animateArrowsOnPath:C.boolean().optional(),visibleThroughGeometry:C.boolean().optional(),dashed:C.boolean().optional()}),rcr=C.object({type:C.enum(["Feature"]),geometry:Qy,properties:C.object({parentId:C.any().optional()})})});var $s,h_,yue,eg,gue,Qz,m_,ocr,zl,acr,scr,lcr,ucr,ccr,wp=f(()=>{$s=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var t=1.70158;return e===1?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return e===0?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-$s.Bounce.Out(1-e)},Out:function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375},InOut:function(e){return e<.5?$s.Bounce.In(e*2)*.5:$s.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(t*2,e)/2:(1-Math.pow(2-t*2,e))/2+.5}}}}),h_=function(){return performance.now()},yue=function(){function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,t)}return e.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(r){return t._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++){var a=o[i];(t=a._group)===null||t===void 0||t.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},e.prototype.remove=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(t){return!t.isPlaying()})},e.prototype.update=function(t,r){t===void 0&&(t=h_()),r===void 0&&(r=!0);var n=Object.keys(this._tweens);if(n.length!==0)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]],a=!r;o&&o.update(t,a)===!1&&!r&&this.remove(o)}n=Object.keys(this._tweensAddedDuringUpdate)}},e}(),eg={Linear:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=eg.Utils.Linear;return t<0?o(e[0],e[1],n):t>1?o(e[r],e[r-1],r-n):o(e[i],e[i+1>r?r:i+1],n-i)},Bezier:function(e,t){for(var r=0,n=e.length-1,i=Math.pow,o=eg.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-t,n-a)*i(t,a)*e[a]*o(n,a);return r},CatmullRom:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=eg.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(i=Math.floor(n=r*(1+t))),o(e[(i-1+r)%r],e[i],e[(i+1)%r],e[(i+2)%r],n-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[r]-(o(e[r],e[r],e[r-1],e[r-1],n-r)-e[r]):o(e[i?i-1:0],e[i],e[r<i+1?r:i+1],e[r<i+2?r:i+2],n-i)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=eg.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var n=t;n>1;n--)r*=n;return e[t]=r,r}}(),CatmullRom:function(e,t,r,n,i){var o=(r-e)*.5,a=(n-t)*.5,s=i*i,l=i*s;return(2*t-2*r+o+a)*l+(-3*t+3*r-2*o-a)*s+o*i+t}}},gue=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Qz=new yue,m_=function(){function e(t,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=$s.Linear.None,this._interpolationFunction=eg.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=gue.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=t,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Qz,Qz.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(t,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t<0?0:t,this},e.prototype.dynamic=function(t){return t===void 0&&(t=!1),this._isDynamic=t,this},e.prototype.start=function(t,r){if(t===void 0&&(t=h_()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},e.prototype._setupProperties=function(t,r,n,i,o){for(var a in n){var s=t[a],l=Array.isArray(s),u=l?"array":typeof s,c=!l&&Array.isArray(n[a]);if(!(u==="undefined"||u==="function")){if(c){var p=n[a];if(p.length===0)continue;for(var d=[s],h=0,m=p.length;h<m;h+=1){var x=this._handleRelativeValue(s,p[h]);if(isNaN(x)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(x)}c&&(n[a]=d)}if((u==="object"||l)&&s&&!c){r[a]=l?[]:{};var b=s;for(var _ in b)r[a][_]=b[_];i[a]=l?[]:{};var p=n[a];if(!this._isDynamic){var T={};for(var _ in p)T[_]=p[_];n[a]=p=T}this._setupProperties(b,r[a],p,i[a],o)}else(typeof r[a]>"u"||o)&&(r[a]=s),l||(r[a]*=1),c?i[a]=n[a].slice().reverse():i[a]=r[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(t){return t===void 0&&(t=h_()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this)},e.prototype.resume=function(t){return t===void 0&&(t=h_()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var t=0,r=this._chainedTweens.length;t<r;t++)this._chainedTweens[t].stop();return this},e.prototype.group=function(t){return t?(t.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var t;return(t=this._group)===null||t===void 0||t.remove(this),this},e.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},e.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},e.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},e.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},e.prototype.easing=function(t){return t===void 0&&(t=$s.Linear.None),this._easingFunction=t,this},e.prototype.interpolation=function(t){return t===void 0&&(t=eg.Linear),this._interpolationFunction=t,this},e.prototype.chain=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this._chainedTweens=t,this},e.prototype.onStart=function(t){return this._onStartCallback=t,this},e.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},e.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},e.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},e.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},e.prototype.onStop=function(t){return this._onStopCallback=t,this},e.prototype.update=function(t,r){var n=this,i;if(t===void 0&&(t=h_()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(t,!0);else return!1;if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=t-this._startTime,s=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*s,u=function(){if(n._duration===0||a>l)return 1;var x=Math.trunc(a/s),b=a-x*s,_=Math.min(b/n._duration,1);return _===0&&a===n._duration?1:_},c=u(),p=this._easingFunction(c);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,p),this._onUpdateCallback&&this._onUpdateCallback(this._object,c),this._duration===0||a>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((a-this._duration)/s)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,m=this._chainedTweens.length;h<m;h++)this._chainedTweens[h].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(t,r,n,i){for(var o in n)if(r[o]!==void 0){var a=r[o]||0,s=n[o],l=Array.isArray(t[o]),u=Array.isArray(s),c=!l&&u;c?t[o]=this._interpolationFunction(s,i):typeof s=="object"&&s?this._updateProperties(t[o],a,s,i):(s=this._handleRelativeValue(a,s),typeof s=="number"&&(t[o]=a+(s-a)*i))}},e.prototype._handleRelativeValue=function(t,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?t+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(t){var r=this._valuesStartRepeat[t],n=this._valuesEnd[t];typeof n=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(n):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=r},e.autoStartOnUpdate=!1,e}(),ocr=gue.nextId,zl=Qz,acr=zl.getAll.bind(zl),scr=zl.removeAll.bind(zl),lcr=zl.add.bind(zl),ucr=zl.remove.bind(zl),ccr=zl.update.bind(zl)});var eN=f(()=>{"use strict"});var xue=f(()=>{"use strict";eN()});var bue=f(()=>{"use strict"});var vue=f(()=>{"use strict";xue();bue();eN()});var tg={};Fr(tg,{BLOCK_MERCATOR_ZOOM_LEVEL:()=>N8e,CLIPPING_RADIUS:()=>Tue,CONTROL_OPTIONS:()=>z8e,DEFAULT_ANIMATION_DURATION:()=>Aue,DEFAULT_BEARING:()=>G8e,DEFAULT_MAX_ZOOM_LEVEL:()=>V8e,DEFAULT_MIN_ZOOM_LEVEL:()=>Lue,DEFAULT_PITCH:()=>j8e,DEFAULT_ZOOM_LEVEL:()=>$8e,EVENTS:()=>Due,MAPLIBRE_TILE_SIZE:()=>_ue,MAX_LAT:()=>wue,MAX_MERCATOR_ZOOM_LEVEL:()=>Mue,MIN_LAT:()=>Sue,MIN_MERCATOR_ZOOM_LEVEL:()=>Pue,ROOM_MERCATOR_ZOOM_LEVEL:()=>U8e,TWO_PI:()=>Iue,WHEEL_ZOOM_MULTIPLIER:()=>Cue,ZRANGE:()=>Eue});var _ue,Sue,wue,Tue,z8e,Iue,Eue,Cue,Pue,Mue,N8e,U8e,Aue,Due,$8e,Lue,V8e,j8e,G8e,TP=f(()=>{"use strict";_ue=512,Sue=-85.051129,wue=85.051129,Tue=1e4,z8e={chain:"chain",cancel:"cancel"},Iue=Math.PI*2,Eue=100,Cue=1e4,Pue=0,Mue=24,N8e=17,U8e=20,Aue=200,Due=["change","pan-start","pan-end","rotate-start","rotate-end","zoom-start","zoom-end","multi-start","multi-end","multi-cancel","pedestal-start","pedestal-change","pedestal-end","user-pan-start","user-pedestal-start","user-rotate-start","user-dolly-start","user-zoom-start","user-tilt-start","user-pan-end","user-pedestal-end","user-rotate-end","user-dolly-end","user-zoom-end","user-tilt-end","position-updated","zoom-updated","tilt-updated","rotation-updated"],$8e=18,Lue=12,V8e=22,j8e=0,G8e=0});var Fue=f(()=>{"use strict";wp();Ua();pP();yc();vue();TP();TP();_p();X_();Pe()});var tN=f(()=>{"use strict";Fue();TP()});var kue=f(()=>{"use strict";Na()});var Oue=f(()=>{"use strict";Pe();yb();ln()});var IP,rN=f(()=>{"use strict";wp();Pe();tN();So();Sz();Ku();IP={linear:$s.Linear.None,"ease-in":$s.Quadratic.In,"ease-out":$s.Quadratic.Out,"ease-in-out":$s.Quadratic.InOut}});var Rue=f(()=>{"use strict"});var Bue=f(()=>{"use strict"});var q8e,zue=f(()=>{"use strict";q8e=43/60});var Nue,ppr,Uue=f(()=>{"use strict";Nue=["horizontal","icon"],ppr=new Map([[Nue[0],`<svg viewBox="0 0 206 48">
      <path d="M27.2678 14.2261H22.3187C21.0695 14.2261 20.4695 14.7801 20.4695 15.9852V31.142L10.3966 15.5591C9.69665 14.4784 9.2475 14.2773 7.8475 14.2261H2.97462C1.67462 14.2261 1.07631 14.7801 1.07631 15.9852V44.7665C1.07631 45.9716 1.67462 46.5256 2.97462 46.5256H7.92377C9.22207 46.5256 9.82207 45.9716 9.82207 44.7665V29.6847L19.9441 45.1926C20.695 46.3244 21.095 46.5256 22.4933 46.5256H27.2933C28.5916 46.5256 29.1916 45.9716 29.1916 44.7665V15.9852C29.1407 14.7801 28.5424 14.2261 27.2678 14.2261Z"/>
      <path d="M5.44915 10.9602C8.45863 10.9602 10.8983 8.50669 10.8983 5.48011C10.8983 2.45353 8.45863 0 5.44915 0C2.43967 0 0 2.45353 0 5.48011C0 8.50669 2.43967 10.9602 5.44915 10.9602Z"/>
      <path d="M61.7899 25.0449C63.2306 23.1903 65.078 22.2051 67.556 22.2051C72.0526 22.2051 74.7611 25.3347 74.7611 29.4511V39.2489C74.8187 39.7125 74.5306 39.9443 74.0695 39.9443H72.5136C72.0526 39.9443 71.7645 39.7125 71.8221 39.2489V29.5091C71.8221 27.1909 69.9187 25.2187 67.4984 25.2187C65.1339 25.2187 63.2323 27.1329 63.2323 29.2773V39.2489C63.2899 39.7125 63.0018 39.9443 62.5407 39.9443H60.9831C60.5221 39.9443 60.2916 39.7125 60.2916 39.2489V29.4511C60.2916 27.1329 58.3899 25.2187 56.0255 25.2187C53.7204 25.2187 51.7594 27.075 51.7594 29.2773V39.3068C51.817 39.7705 51.5289 40.0023 51.0102 40.0023H49.5119C49.0509 40.0023 48.7628 39.7705 48.7628 39.3068V23.25C48.7051 22.7864 48.9933 22.4966 49.5119 22.4966H50.9526C51.356 22.4966 51.5289 22.6704 51.5289 23.0182V24.2352C52.7407 22.9602 54.239 22.2648 56.0255 22.2648C58.4475 22.2068 60.3492 23.192 61.7899 25.0466V25.0449ZM77.1255 31.2477C77.1255 26.3216 81.1018 22.2051 86.1187 22.2051C88.539 22.2051 90.6136 23.1903 92.3441 25.1608V23.1903C92.3441 22.7267 92.5746 22.5528 93.0357 22.5528H94.4187C94.8797 22.5528 95.1102 22.7847 95.1102 23.3062V39.3648C95.1102 39.8284 94.8797 40.0602 94.4187 40.0602H93.0357C92.5746 40.0602 92.3441 39.8284 92.3441 39.4227V37.4523C90.6712 39.3648 88.5967 40.35 86.1746 40.35C81.1018 40.2341 77.1238 36.1773 77.1238 31.2477H77.1255ZM92.1136 31.2477C92.1136 27.8284 89.4611 25.2187 86.0594 25.2187C82.7746 25.2187 80.1221 27.8864 80.1221 31.2477C80.1221 34.6687 82.7746 37.2784 86.1187 37.2784C86.9062 37.2789 87.6861 37.1232 88.4138 36.8202C89.1414 36.5173 89.8026 36.0731 90.3593 35.513C90.9161 34.9528 91.3577 34.2878 91.6587 33.556C91.9597 32.8241 92.1143 32.0397 92.1136 31.2477ZM100.992 37.3943V46.3807C101.049 46.8443 100.761 47.1341 100.298 47.1341H98.7424C98.2814 47.1341 97.9933 46.9023 97.9933 46.3807V23.1903C97.9933 22.7267 98.2238 22.4369 98.7424 22.4369H100.183C100.646 22.379 100.934 22.6687 100.934 23.0744V24.9869C102.605 23.0744 104.68 22.1472 107.044 22.1472C112.002 22.1472 116.037 26.2619 116.037 31.1898C116.037 36.1176 112.059 40.2341 107.044 40.2341C104.622 40.2341 102.603 39.3068 100.992 37.3943ZM106.987 25.2187C103.7 25.2187 101.049 27.8864 101.049 31.2477C101.049 34.6687 103.7 37.2784 107.044 37.2784C110.446 37.2784 113.039 34.6108 113.039 31.2477C113.039 27.8864 110.388 25.2187 106.987 25.2187ZM121.11 37.3943V46.3807C121.168 46.8443 120.88 47.1341 120.419 47.1341H118.861C118.4 47.1341 118.112 46.9023 118.112 46.3807V23.1903C118.112 22.7267 118.342 22.4369 118.861 22.4369H120.302C120.764 22.379 121.053 22.6687 121.053 23.0744V24.9869C122.724 23.0744 124.798 22.1472 127.163 22.1472C132.12 22.1472 136.156 26.2619 136.156 31.1898C136.156 36.1176 132.178 40.2341 127.163 40.2341C124.742 40.2341 122.781 39.3068 121.11 37.3943ZM127.105 25.2187C123.819 25.2187 121.168 27.8864 121.168 31.2477C121.168 34.6687 123.819 37.2784 127.163 37.2784C130.564 37.2784 133.158 34.6108 133.158 31.2477C133.158 27.8864 130.507 25.2187 127.107 25.2187H127.105ZM153.97 32.3506H141.054C141.342 35.2483 143.995 37.4523 147.164 37.4523C148.893 37.4523 150.393 37.0466 151.719 36.0597C152.007 35.8858 152.295 35.7699 152.353 35.7699C152.583 35.7699 152.756 35.8858 152.929 36.1773L153.505 37.1625C153.622 37.3364 153.68 37.4523 153.68 37.5682C153.68 37.8 153.507 38.0318 153.103 38.3216C151.258 39.5966 149.183 40.292 146.992 40.292C141.688 40.292 137.883 36.3511 137.883 31.2477C137.883 26.204 141.803 22.2051 146.703 22.2051C151.546 22.2051 154.717 25.7983 154.717 31.0176C154.717 31.5972 154.717 32.3506 153.968 32.3506H153.97ZM141.056 30.0324H151.72C151.432 26.8432 149.473 24.929 146.648 24.929C145.241 24.8904 143.875 25.3995 142.833 26.3501C141.791 27.3007 141.154 28.6194 141.056 30.0307V30.0324ZM156.332 31.2477C156.332 26.3216 160.31 22.2051 165.326 22.2051C167.748 22.2051 169.707 23.1324 171.32 25.0449V16.2324C171.263 15.7687 171.551 15.479 172.012 15.479H173.57C174.031 15.479 174.319 15.7108 174.319 16.2324V39.3068C174.319 39.7705 174.088 40.0023 173.57 40.0023H172.129C171.666 40.0602 171.378 39.7705 171.378 39.3648V37.3943C169.649 39.3068 167.632 40.292 165.268 40.292C160.31 40.2341 156.332 36.1773 156.332 31.2477ZM171.264 31.2477C171.264 27.8284 168.612 25.2187 165.21 25.2187C161.924 25.2187 159.273 27.8864 159.273 31.2477C159.273 34.6687 161.924 37.2784 165.268 37.2784C166.057 37.2838 166.839 37.1316 167.569 36.8304C168.299 36.5292 168.962 36.0852 169.52 35.5241C170.077 34.963 170.519 34.296 170.818 33.5619C171.117 32.8277 171.268 32.0411 171.263 31.2477H171.264ZM177.72 19.0739C177.715 18.8594 177.754 18.646 177.833 18.4468C177.912 18.2476 178.031 18.0667 178.182 17.915C178.333 17.7633 178.512 17.6439 178.71 17.5642C178.909 17.4845 179.121 17.446 179.334 17.4511C179.546 17.4507 179.756 17.4923 179.952 17.5737C180.148 17.6551 180.326 17.7746 180.476 17.9254C180.626 18.0762 180.745 18.2553 180.826 18.4523C180.907 18.6494 180.948 18.8606 180.948 19.0739C180.953 19.2884 180.914 19.5017 180.835 19.7009C180.756 19.9001 180.637 20.081 180.486 20.2327C180.335 20.3845 180.156 20.5038 179.957 20.5835C179.759 20.6633 179.547 20.7017 179.334 20.6966C178.412 20.7545 177.72 20.0591 177.72 19.0739ZM177.836 39.2489V23.1903C177.836 22.7267 178.066 22.4369 178.527 22.4369H180.083C180.544 22.4369 180.832 22.6687 180.775 23.1903V39.2489C180.832 39.7125 180.544 39.9443 180.083 39.9443H178.527C178.066 39.9443 177.836 39.7125 177.836 39.2489ZM186.944 23.0165V24.1756C188.212 22.8426 189.71 22.2051 191.497 22.2051C195.937 22.2051 198.646 25.2767 198.646 29.3932V39.2489C198.703 39.7125 198.415 39.9443 197.954 39.9443H196.398C195.936 39.9443 195.705 39.7125 195.705 39.2489V29.4511C195.705 27.1329 193.803 25.2187 191.439 25.2187C189.134 25.2187 187.175 27.075 187.175 29.2773V39.3068C187.232 39.7705 186.944 40.0023 186.424 40.0023H184.868C184.407 40.0023 184.119 39.7705 184.119 39.3068V23.1903C184.061 22.7267 184.349 22.4949 184.868 22.4949H186.309C186.712 22.4949 186.944 22.6687 186.944 23.0165Z"/>
      <path d="M204 40C205.115 40 206 39.0857 206 38V37.9886C206 36.9029 205.126 36 204 36C202.885 36 202 36.9143 202 38V38.0114C202 39.0971 202.874 40 204 40ZM204 39.7829C202.989 39.7829 202.23 38.9829 202.23 38.0114V38C202.23 37.0286 203 36.2171 204 36.2171C205.011 36.2171 205.77 37.0171 205.77 37.9886V38C205.77 38.9714 205 39.7829 204 39.7829ZM203.218 38.9714H203.609V38.2743H204.034L204.517 38.9714H204.989L204.448 38.2057C204.724 38.1257 204.92 37.92 204.92 37.5886C204.92 37.1657 204.586 36.9486 204.138 36.9486H203.218V38.9714ZM203.609 37.9543V37.2914H204.103C204.368 37.2914 204.517 37.4057 204.517 37.6229C204.517 37.8171 204.368 37.9543 204.103 37.9543H203.609Z"/>
    </svg>`],[Nue[1],`<svg viewBox="0 0 43 60">
      <path d="M14.0291 7.06645C14.0291 10.9691 10.8885 14.1329 7.01453 14.1329C3.14051 14.1329 0 10.9691 0 7.06645C0 3.16376 3.14051 0 7.01453 0C10.8885 0 14.0291 3.16376 14.0291 7.06645Z"/>
      <path d="M28.7335 18.3468H35.1045C36.7455 18.3468 37.5178 19.0599 37.5821 20.6158V57.7309C37.5821 59.2868 36.8099 60 35.1367 60H28.9588C27.1569 60 26.642 59.7406 25.6767 58.282L12.6452 38.282V57.7309C12.6452 59.2868 11.8729 60 10.1997 60H3.82873C2.15554 60 1.3833 59.2868 1.3833 57.7309V20.6158C1.3833 19.0599 2.15554 18.3468 3.82873 18.3468H10.1032C11.9051 18.4116 12.4843 18.671 13.3852 20.0648L26.3524 40.162V20.6158C26.3524 19.0599 27.1247 18.3468 28.7335 18.3468Z"/>
      <path d="M41.5 60C42.3362 60 43 59.3143 43 58.5V58.4914C43 57.6771 42.3448 57 41.5 57C40.6638 57 40 57.6857 40 58.5V58.5086C40 59.3229 40.6552 60 41.5 60ZM41.5 59.8371C40.7414 59.8371 40.1724 59.2371 40.1724 58.5086V58.5C40.1724 57.7714 40.75 57.1629 41.5 57.1629C42.2586 57.1629 42.8276 57.7629 42.8276 58.4914V58.5C42.8276 59.2286 42.25 59.8371 41.5 59.8371ZM40.9138 59.2286H41.2069V58.7057H41.5259L41.8879 59.2286H42.2414L41.8362 58.6543C42.0431 58.5943 42.1897 58.44 42.1897 58.1914C42.1897 57.8743 41.9397 57.7114 41.6034 57.7114H40.9138V59.2286ZM41.2069 58.4657V57.9686H41.5776C41.7759 57.9686 41.8879 58.0543 41.8879 58.2171C41.8879 58.3629 41.7759 58.4657 41.5776 58.4657H41.2069Z"/>
    </svg>`]])});var _f,nN,EP,y_=f(()=>{"use strict";Jl();_f=class _f{constructor(){w(this,"loader");this.loader=new Fp}static getInstance(){return _f.instance||(_f.instance=new _f),_f.instance}getLoader(){return this.loader}load(t){return new Promise((r,n)=>{this.loader.load(t,r,void 0,n)})}};w(_f,"instance");nN=_f,EP=nN.getInstance()});var $ue=f(()=>{"use strict";Rue();Bue();Pe();vf();zue();Uue();y_();_p()});var Rpr,Bpr,Vue=f(()=>{"use strict";Jl();Pe();Rpr=new Ys,Bpr=new kg});var jue=f(()=>{});var iN=f(()=>{"use strict";jue()});var Gue=f(()=>{"use strict";_o()});var Hue=f(()=>{"use strict";ln()});var oN=f(()=>{"use strict";ln()});var aN=f(()=>{"use strict"});var Zue=f(()=>{"use strict"});var Wue=f(()=>{"use strict"});var Xue=f(()=>{"use strict";Zue();Wue()});var sN=f(()=>{"use strict"});var que=f(()=>{"use strict";ln();Ua();Cz();ta();Ju();oN();aN();Pe();Xue();sN()});var Adr,Ddr,lN=f(()=>{"use strict";_o();_P();xr();Adr=C.object({flipImageToFaceCamera:C.boolean().optional(),url:C.string()}),Ddr=C.object({type:C.enum(["Feature"]),properties:C.object({width:C.number(),height:C.number(),rotation:C.number().min(0).max(360).optional(),verticalOffset:C.number().optional()}),geometry:Qy})});var Yue=f(()=>{"use strict";mc()});var Hdr,K8e,Q8e,Zdr,Wdr,Jue=f(()=>{"use strict";ln();y_();Pe();lN();Yue();vf();So();Hdr=Math.PI*2,K8e=Math.PI/2,Q8e=Math.PI*1.5,Zdr=$g(K8e,2),Wdr=$g(Q8e,2)});var Kue=f(()=>{"use strict";Pe();ta();ln();Ku();fP();_p()});function CP(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=Fd(e),i=hL(t),o=i.type,a=t.bbox,s=i.coordinates;if(a&&e7e(n,a)===!1)return!1;o==="Polygon"&&(s=[s]);for(var l=!1,u=0;u<s.length&&!l;u++)if(Que(n,s[u][0],r.ignoreBoundary)){for(var c=!1,p=1;p<s[u].length&&!c;)Que(n,s[u][p],!r.ignoreBoundary)&&(c=!0),p++;c||(l=!0)}return l}function Que(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],l=t[o][0],u=t[o][1],c=e[1]*(a-l)+s*(l-e[0])+u*(e[0]-a)===0&&(a-e[0])*(l-e[0])<=0&&(s-e[1])*(u-e[1])<=0;if(c)return!r;var p=s>e[1]!=u>e[1]&&e[0]<(l-a)*(e[1]-s)/(u-s)+a;p&&(n=!n)}return n}function e7e(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var uN=f(()=>{bs()});var ece=f(()=>{Xi();bs()});var tce=f(()=>{uN();_L();Qs();ece()});var rce=f(()=>{tce();Qs()});var nce=f(()=>{"use strict";o_();Xi();rce();sN()});var ice=f(()=>{"use strict"});var oce=f(()=>{"use strict"});var ace=f(()=>{"use strict"});var Bfr,sce=f(()=>{"use strict";Jl();ice();oce();ace();So();Bfr=new Fp});var lce=f(()=>{"use strict";ln();sce();_p();Pe();Kz();Ua()});var uce=f(()=>{"use strict";lce()});var cce=f(()=>{"use strict";ln();ta();Ju();d_();Ez();Ua();aN()});var pce=f(()=>{"use strict";oN()});var dce=f(()=>{"use strict";ln();pce()});var fce=f(()=>{"use strict"});var hce=f(()=>{"use strict";ln();Ku();Wz();Xz();Pe()});var mce=f(()=>{"use strict";ln()});var yce=f(()=>{"use strict";Pe();ln();ta();l_();wP();y_()});var gce=f(()=>{"use strict";ln();So()});var xce=f(()=>{"use strict";ln()});var Sgr,i7e,o7e,a7e,wgr,Tgr,Igr,Egr,bce=f(()=>{"use strict";kq();Jl();Ku();Pe();yc();Dle();Ua();_o();Na();Vle();Wle();yb();rue();f_();cb();ub();iue();aue();sue();pue();fue();hue();mue();pP();Js();Kz();tN();kue();ta();SP();Ju();ln();Oue();rN();_p();$ue();Vue();iN();Gue();Hue();que();Jue();Kue();hP();_s();nce();uce();lN();a_();cce();dce();dP();wp();fce();hce();y_();So();lP();mce();yce();vf();zz();gce();xce();Mz();Sgr=new zg,{DEFAULT_PITCH:i7e,DEFAULT_BEARING:o7e,DEFAULT_ZOOM_LEVEL:a7e,DEFAULT_MIN_ZOOM_LEVEL:wgr,DEFAULT_MAX_ZOOM_LEVEL:Tgr}=tg,Igr=p2.radToDeg(.6435011087932844),Egr=new pe});var vce=f(()=>{"use strict";jI()});var _ce=f(()=>{});var Sf,Sce=f(()=>{"use strict";Sf=class{constructor({origin:t,destination:r,distance:n=0,angle:i=0,pathWeight:o=0,multiplicativeDistanceWeightScaling:a=!0}){w(this,"origin");w(this,"destination");w(this,"distance");w(this,"angle");w(this,"weight");if(this.origin=t,this.destination=r,this.distance=n,this.angle=i,this.weight=o||0,a?t.properties.floor===r.properties.floor&&(this.weight=(this.weight>=0?this.distance*this.weight:0)+this.distance):t.properties.map===r.properties.map&&(this.weight=this.weight>=0?this.distance+this.weight:0),isNaN(this.angle))throw new Error("Invalid angle: Expected a numeric value, but received NaN.")}}});var cN=f(()=>{"use strict";Sce()});function Qu([e,t],[r,n]){let i=t-n,o=e-r;return(Math.atan2(o,i)+Math.PI*3)%(Math.PI*2)}var pN=f(()=>{"use strict"});function PP(e,t,r,n){let[i,o]=e,[a,s]=t,[l,u]=r,[c,p]=n;if(o===s&&i===a||u===p&&l===c)return null;let d=(c-l)*(s-o)-(p-u)*(a-i);if(d===0)return null;let h=((p-u)*(i-l)-(c-l)*(o-u))/d,m=((s-o)*(i-l)-(a-i)*(o-u))/d;if(h<0||h>1||m<0||m>1)return null;let x=o+h*(s-o);return[i+h*(a-i),x]}var wce=f(()=>{"use strict"});function dN(e,t,r,n){let i=xx(e,r/1e3,n),o=xx(t,r/1e3,n);return[i.geometry.coordinates,o.geometry.coordinates]}var Tce=f(()=>{"use strict";yL()});function fN(e){let t=e*(180/Math.PI);return t=t%360,t>180?t-=360:t<-180&&(t+=360),Object.is(t,-0)?0:t}var hN=f(()=>{"use strict"});function MP(e,t,r=[],n=0){let i=!0,o=e.geometry.coordinates,a=t.geometry.coordinates,s=fN(Qu(o,a)-Math.PI/2),l=fN(Qu(o,a)+Math.PI/2),u=n/Ice,c=n/(Ice*Math.cos(o[1]*Math.PI/180)),p=Math.min(o[1],a[1])-u,d=Math.max(o[1],a[1])+u,h=Math.min(o[0],a[0])-c,m=Math.max(o[0],a[0])+c;for(let x of r)if(!(Math.max(x[0][1],x[1][1])<p||Math.min(x[0][1],x[1][1])>d||Math.max(x[0][0],x[1][0])<h||Math.min(x[0][0],x[1][0])>m)){if(n>0){let b=dN(o,a,n,s),_=dN(o,a,n,l);if(PP(b[0],b[1],x[0],x[1])||PP(_[0],_[1],x[0],x[1]))return i=!1,!1}else if(PP(o,a,x[0],x[1]))return i=!1,!1}return i}var Ice,Ece=f(()=>{"use strict";wce();Tce();pN();hN();Ice=111e3});var mN=f(()=>{"use strict";pN();Ece();hN()});var gN,wf,ri,yN,Cce,Pce,Mce,Ace,Dce,Lce,DP,AP,Fce=f(()=>{"use strict";uN();cN();mN();mc();gN=.4,AP=class{constructor({nodes:t,groupBy:r,multiplicativeDistanceWeightScaling:n}){D(this,ri);w(this,"edges",{});w(this,"nodesById");w(this,"nodesByGroup",new Map);D(this,wf);w(this,"hasLineOfSight",(t,r,n=[],i=gN)=>MP({type:"Feature",properties:{id:"origin",neighbors:[]},geometry:{type:"Point",coordinates:t}},{type:"Feature",properties:{id:"destination",neighbors:[]},geometry:{type:"Point",coordinates:r}},n,i)===!0);D(this,DP,(t,r)=>{let n=0;for(let i of r)(!i[y(this,wf)]||i[y(this,wf)]===t.properties[y(this,wf)])&&CP(t.geometry.coordinates,i.geometry.geometry)&&(n+=Math.max(0,i.cost));return n});R(this,wf,r);let{features:i}=t;this.nodesById=me(this,ri,Cce).call(this,i),me(this,ri,Pce).call(this),me(this,ri,Mce).call(this,i,r,{multiplicativeDistanceWeightScaling:n})}getShortestEuclideanDistance(t,r){return r.reduce((n,i)=>{let o=h8(t.geometry.coordinates,i.geometry.coordinates);return Math.min(n,o)},Number.MAX_VALUE)}dijkstraFindWithinTravelDistance(t,r,n,i,o,a){let s=this.nodesById[t];if(!s)return[];let l=[],u={},c={},p=new Set,d=[];for(l.push({node:s,distance:0}),u[s.properties.id]=null,c[s.properties.id]=0;l.length>0;){l.sort((b,_)=>b.distance-_.distance);let h=l.shift();if(!h)break;let m=h.node,x=h.distance;if(!p.has(m.properties.id)){if(p.add(m.properties.id),d.length>=a)break;m.properties.id!=null&&n.includes(m.properties.id?.toString())&&(o?this.hasLineOfSight(s.geometry.coordinates,m.geometry.coordinates,i)&&d.push({feature:m,distance:x}):d.push({feature:m,distance:x}));for(let b of this.edges[m.properties.id]){let _=b.destination,T=x+b.distance,I=c[m.properties.id]+b.weight;T>r||p.has(_.properties.id)||c[_.properties.id]!==void 0&&I>=c[_.properties.id]||(c[_.properties.id]=I,u[_.properties.id]=b,l.push({node:_,distance:T}))}}}return d.sort((h,m)=>h.distance-m.distance)}aStar({originIds:t,destinationNodeIds:r,disabledConnectionNodeIds:n,zones:i,overrideEdgeWeights:o,disabledNodeIds:a}){let s=me(this,ri,yN).call(this,t),l=me(this,ri,yN).call(this,r);if(s.length===0||l.length===0)return[];let{frontier:u,cameFrom:c,costSoFar:p}=me(this,ri,Ace).call(this,s,l);for(;u.length>0;){let d=u.shift();if(!d)break;if(me(this,ri,Dce).call(this,d.origin,l))return me(this,ri,Lce).call(this,c,d.origin.properties.id);for(let h of this.edges[d.origin.properties.id]){let m=o?.get(h)??h.weight;if(n?.has(h.origin.properties.id)&&h.destination.properties.map!==h.origin.properties.map||a?.has(h.origin.properties.id))continue;let x=p[d.origin.properties.id]+m+y(this,DP).call(this,h.destination,i);if(x!==1/0&&(p[h.destination.properties.id]==null||x<p[h.destination.properties.id])){let b=x+this.getShortestEuclideanDistance(h.destination,l);p[h.destination.properties.id]=x,c[h.destination.properties.id]=h,u.push({origin:h.destination,priority:b})}}u.sort((h,m)=>h.priority-m.priority)}return[]}};wf=new WeakMap,ri=new WeakSet,yN=function(t){return t.map(r=>this.nodesById[r]).filter(Boolean)},Cce=function(t){return t.reduce((r,n)=>(r[n.properties.id]=n,r),{})},Pce=function(){for(let t in this.nodesById)this.nodesById.hasOwnProperty(t)&&(this.nodesById[t].properties.neighbors=this.nodesById[t].properties.neighbors.filter(({id:r})=>!!this.nodesById[r]))},Mce=function(t,r,n){t.forEach(i=>{let o=r==="default"?r:i.properties[r];this.nodesByGroup.has(o)||this.nodesByGroup.set(o,[]),this.nodesByGroup.get(o).push(i),this.edges[i.properties.id]=i.properties.neighbors.map(({id:a,weight:s})=>{let l=this.nodesById[a],u=Wa(i.geometry.coordinates,l.geometry.coordinates),c=Qu(i.geometry.coordinates,l.geometry.coordinates);return new Sf({origin:i,destination:l,pathWeight:s,distance:u,angle:c,multiplicativeDistanceWeightScaling:n?.multiplicativeDistanceWeightScaling})})})},Ace=function(t,r){let n=[],i={},o={};return t.forEach(a=>{let s=this.getShortestEuclideanDistance(a,r);n.push({origin:a,priority:s}),i[a.properties.id]=null,o[a.properties.id]=0}),n.sort((a,s)=>a.priority-s.priority),{frontier:n,cameFrom:i,costSoFar:o}},Dce=function(t,r){return r.some(n=>n.properties.id===t.properties.id)},Lce=function(t,r){let n=[],i=t[r];for(;i;)n.push(i),i=t[i.origin.properties.id];return n.reverse()},DP=new WeakMap});var kce=f(()=>{"use strict";Fce()});function xN(e,t,r){if(e==null||e[t]==null)return!1;let n=1<<r;return(e[t]&n)!==0}var Oce=f(()=>{"use strict"});var rg,Rce=f(()=>{"use strict";cN();kce();mN();KD();Oce();mc();rg=class{constructor({nodes:t,geojsonCollection:r,groupBy:n="default",multiplicativeDistanceWeightScaling:i,flagDeclarations:o}){w(this,"groupBy");w(this,"graph");w(this,"geometryEdgesByMapId",new Map);w(this,"flagDeclarations",{});w(this,"disabledNodeIds");w(this,"generatePath",t=>{let{destination:r}=t[t.length-1],n={type:"FeatureCollection",features:[]};for(let o=0;o<t.length;o++){let{origin:a,destination:s}=t[o],l={id:a.properties.id,angle:t[o].angle,distance:t[o].distance,destination:s.properties.id,edges:this.graph.edges[a.properties.id]};this.groupBy!=="default"&&(l.groupBy=a.properties[this.groupBy]),n.features.push({type:"Feature",geometry:{type:"Point",coordinates:[a.geometry.coordinates[0],a.geometry.coordinates[1]]},properties:l})}let i={id:r.properties.id,edges:this.graph.edges[r.properties.id]};return this.groupBy!=="default"&&(i.groupBy=r.properties[this.groupBy]),n.features.push({type:"Feature",geometry:{type:"Point",coordinates:[r.geometry.coordinates[0],r.geometry.coordinates[1]]},properties:i}),n});w(this,"findNearestNodesOnGraph",(t,r,n,i,o=!1,a=1/0)=>this.graph.dijkstraFindWithinTravelDistance(t,r,i,this.geometryEdgesByMapId.get(n)??[],o,a));w(this,"hasLineOfSight",(t,r,n,i)=>this.graph.hasLineOfSight(t,r,this.geometryEdgesByMapId.get(n),i));w(this,"getDistance",(t,r)=>Wa(t,r));w(this,"getAngle",(t,r)=>Qu(t,r));this.groupBy=n,this.graph=new AP({nodes:t,groupBy:this.groupBy,multiplicativeDistanceWeightScaling:i});let a=r?.features||[];this.flagDeclarations=o??{},this.disabledNodeIds=this.getDisabledNodeIds(),a.forEach(s=>{let l=null;if(s.geometry.type==="LineString"?l=s.geometry.coordinates:s.geometry.type==="Polygon"&&(l=s.geometry.coordinates.flat()),l){let u=this.groupBy==="default"?this.groupBy:s.properties[this.groupBy];this.geometryEdgesByMapId.has(u)||this.geometryEdgesByMapId.set(u,[]),l.forEach((c,p)=>{this.geometryEdgesByMapId.get(u).push([c,l[p+1]||l[0]])})}})}getDisabledNodeIds(){let t=new Set;if(U1.public in this.flagDeclarations)for(let r in this.graph.nodesById)xN(this.graph.nodesById[r].properties.flags,this.flagDeclarations[U1.public].index,this.flagDeclarations[U1.public].bit)||t.add(r);return t}getDirections({zones:t,originIds:r,destinationNodeIds:n,disabledConnectionNodeIds:i,simplify:o,multiplicativeDistanceWeightScaling:a,overrideEdgeWeights:s}){let l=o?.enabled??!0,u=t??[],c=this.graph.aStar({originIds:r,destinationNodeIds:n,zones:u,disabledConnectionNodeIds:new Set(i),overrideEdgeWeights:s,disabledNodeIds:this.disabledNodeIds});return c.length===0?{type:"FeatureCollection",features:[]}:(l&&(c=this.simplifyAllSteps(c,o?.bufferRadius??gN,a)),this.generatePath(c))}simplifyAllSteps(t,r,n){let i=[],o=[t[0]];for(let u=1;u<t.length;u++)if(this.groupBy!=="default"&&t[u].origin.properties[this.groupBy]!==t[u-1].origin.properties[this.groupBy]){let c=t[u-1].origin.properties[this.groupBy],p=this.geometryEdgesByMapId.get(c)??[];i.push(...this.simplifySteps(o,p,r,n)),o=[t[u]]}else o.push(t[u]);let a=t[t.length-1],s=this.groupBy==="default"?this.groupBy:a.origin.properties[this.groupBy],l=this.geometryEdgesByMapId.get(s)??[];return i.push(...this.simplifySteps(o,l,r,n)),i}simplifySteps(t,r,n,i){if(t.length<3)return t;let o=[t[0]],a=1;for(let s=a+2;s<t.length;s++)if("outdoors"in this.flagDeclarations&&xN(t[a]?.origin?.properties?.flags??[],this.flagDeclarations.outdoors.index,this.flagDeclarations.outdoors.bit)||t[a].origin.properties.preventSmoothing||!MP(t[a].origin,t[s].origin,r,n)){let l=s-1;o.push(new Sf({...t[a],destination:t[l].origin,distance:Wa(t[a].origin.geometry.coordinates,t[l].origin.geometry.coordinates),angle:Qu(t[a].origin.geometry.coordinates,t[l].origin.geometry.coordinates)})),a=l}return o.push(new Sf({...t[a],destination:t[t.length-1].origin,distance:Wa(t[a].origin.geometry.coordinates,t[t.length-1].origin.geometry.coordinates),angle:Qu(t[a].origin.geometry.coordinates,t[t.length-1].origin.geometry.coordinates),multiplicativeDistanceWeightScaling:i}),t[t.length-1]),o}}});var Bce=f(()=>{"use strict";Rce()});var zce=f(()=>{"use strict";Bce()});var bN=f(()=>{"use strict";zce()});var Sp=f(()=>{"use strict";Fq();bce();Gl();Ua();vce();_ce();hP();bN();Pe();So();o_();o_();Nz();dP();iN();rN()});var LP=f(()=>{"use strict"});var Nce=f(()=>{"use strict"});var Uce=f(()=>{"use strict"});var $ce=f(()=>{"use strict"});var Vce=f(()=>{"use strict"});var vN=f(()=>{"use strict";e0()});var jce=f(()=>{"use strict";Pe();ar()});var Gce=f(()=>{"use strict"});var Hce=f(()=>{"use strict"});var Vs=f(()=>{"use strict";Nce();Uce();$ce();Vce();vN();jce();Gce();Hce()});var Kce=f(()=>{});var Qce=f(()=>{"use strict"});var epe=f(()=>{"use strict";Kce();Qce()});var wN=f(()=>{"use strict";ar();Vs()});var TN=f(()=>{"use strict";Gl();epe();wN();Vs();Do();wp()});var IN=f(()=>{"use strict";Qs();ar();Do();js()});var EN=f(()=>{"use strict";Pe()});var CN=f(()=>{"use strict";Vs();js()});var y7e,sbr,lpe=f(()=>{"use strict";js();su();Do();Pe();ar();y7e={altitude:0,height:1,color:"#ffffff",opacity:1,width:.15},sbr={color:"red",opacity:.2,height:y7e.height+.1,visible:!0,borderVisible:!1}});var cpe=f(()=>{"use strict";Pe();Mp()});var FN=f(()=>{"use strict";js()});var ppe=f(()=>{"use strict";Pe();Sp();lpe();js();Do();ar();wp();cpe();FN();su();Mp()});var kN=f(()=>{"use strict";Vs();js();Pe()});var ON=f(()=>{"use strict";Vs();js()});var RN=f(()=>{"use strict";Vs();Do();Pe();js()});var BN=f(()=>{"use strict";Vs();Do();wN();wp()});var zN=f(()=>{"use strict";Vs()});var NN=f(()=>{"use strict";su()});var UN=f(()=>{"use strict";Sp();Pe()});var kP=f(()=>{"use strict";ar();Vs();Sp()});var Gs=f(()=>{"use strict";Gl()});var fpe,hpe,_7e,Ivr,mpe=f(()=>{"use strict";xr();Gs();fpe="doors",hpe=H.object({type:H.literal(fpe).default(fpe),color:H.string().default("#ffffff"),topColor:H.string().optional(),texture:H.object({url:H.string().optional()}).optional(),topTexture:H.object({url:H.string().optional()}).optional(),visible:H.boolean().default(!1),opacity:H.number().default(1)}),_7e=hpe.partial(),Ivr=H.strictObject(hpe.shape)});var ype,gpe,S7e,Mvr,xpe=f(()=>{"use strict";xr();Gs();ype="facade",gpe=C.object({type:C.literal(ype).default(ype),opacity:C.number().default(1),visible:C.boolean().default(!0)}),S7e=gpe.partial(),Mvr=C.strictObject(gpe.shape)});var Nl,bpe,vpe,_pe,Spe,wpe,Tpe,Ipe,Epe,OP,w7e,RP,T7e,BP,I7e,zP,E7e,NP,C7e,UP,P7e,$P,M7e,VP,jP,A7e,Ovr,D7e,Rvr,Bvr,Cpe=f(()=>{"use strict";Pe();xr();su();Gs();Nl="floor",bpe=`${Nl}.footprint`,vpe=`${Nl}.geometry`,_pe=`${Nl}.labels`,Spe=`${Nl}.markers`,wpe=`${Nl}.images`,Tpe=`${Nl}.occlusion`,Ipe=`${Nl}.paths`,Epe=`${Nl}.areas`,OP=C.object({type:C.literal(bpe).default(bpe),altitude:C.number().default(0),visible:C.boolean().default(!1),height:C.number().default(0),opacity:C.number().default(1),side:C.enum(["double","front","back"]),color:C.string().default("#ffffff")}),w7e=OP.partial(),RP=C.object({type:C.literal(vpe).default(vpe),opacity:C.number().default(1),visible:C.boolean().default(!0)}),T7e=RP.partial(),BP=C.object({type:C.literal(_pe).default(_pe),enabled:C.boolean().default(!0)}),I7e=BP.partial(),zP=C.object({type:C.literal(Spe).default(Spe),enabled:C.boolean().default(!0)}),E7e=zP.partial(),NP=C.object({type:C.literal(wpe).default(wpe),visible:C.boolean().default(!0)}),C7e=NP.partial(),UP=C.object({type:C.literal(Tpe).default(Tpe),enabled:C.boolean().default(!0)}),P7e=UP.partial(),$P=C.object({type:C.literal(Ipe).default(Ipe),visible:C.boolean().default(!0)}),M7e=$P.partial(),VP=C.object({type:C.literal(Nl).default(Nl),visible:C.boolean().default(!1),altitude:C.number().default(0)}),jP=C.object({type:C.literal(Epe).default(Epe),visible:C.boolean().default(!0)}),A7e=jP.partial(),Ovr=C.object({...VP.shape,geometry:RP,labels:BP,markers:zP,images:NP,footprint:OP,occlusion:UP,paths:$P,areas:jP}),D7e=VP.partial(),Rvr=C.object({...VP.shape,geometry:RP.partial(),labels:BP.partial(),markers:zP.partial(),images:NP.partial(),footprint:OP.partial(),occlusion:UP.partial(),paths:$P.partial(),areas:jP.partial()}).partial(),Bvr=C.strictObject({...VP.shape,geometry:C.strictObject(RP.shape),labels:C.strictObject(BP.shape),markers:C.strictObject(zP.shape),images:C.strictObject(NP.shape),footprint:C.strictObject(OP.shape),occlusion:C.strictObject(UP.shape),paths:C.strictObject($P.shape),areas:C.strictObject(jP.shape)})});var Ppe,Mpe,L7e,$vr,Ape=f(()=>{"use strict";xr();Gs();Ppe="geometry",Mpe=C.object({type:C.literal(Ppe).default(Ppe),visible:C.boolean().default(!0),color:C.union([C.string(),C.literal("initial")]).default("#ffffff"),topColor:C.union([C.string(),C.literal("initial")]).optional(),hoverColor:C.union([C.string(),C.literal("initial")]).optional(),interactive:C.boolean().default(!1),opacity:C.number().default(1),height:C.number().default(0),altitude:C.number().default(0),texture:C.object({url:C.string()}).optional(),topTexture:C.object({url:C.string()}).optional(),flipImageToFaceCamera:C.boolean().default(!1),enableImageCollisions:C.boolean().default(!1),borderVisible:C.boolean().default(!1),borderColor:C.string().optional(),borderWidth:C.number().optional()}),L7e=Mpe.partial(),$vr=C.strictObject(Mpe.shape)});var Dpe,F7e,k7e,Lpe=f(()=>{"use strict";xr();ub();_s();Dpe="label",F7e=H.object({type:H.literal(Dpe).default(Dpe),text:H.string(),rank:H.custom(e=>Hm.safeParse(e).success||e==="initial"),appearance:H.custom(e=>HI.safeParse(e).success),interactive:H.boolean().default(!1),enabled:H.boolean().default(!0),textPlacement:H.union([H.enum(lb),H.array(H.enum(lb))]).default(GI)}),k7e=F7e.partial()});var Fpe,O7e,R7e,kpe=f(()=>{"use strict";xr();ar();_s();J6();Fpe="marker",O7e=H.object({type:H.literal(Fpe).default(Fpe),rank:H.custom(e=>Hm.safeParse(e).success||e==="initial"),placement:H.union([H.enum(Ym),H.array(H.enum(Ym))]).optional(),interactive:H.union([H.boolean(),H.literal("pointer-events-auto")]).default(!1),dynamicResize:H.boolean().default(!0),enabled:H.boolean().default(!0),zIndex:H.number().optional(),lowPriorityPin:H.object({enabled:H.boolean().optional(),size:H.number().positive().optional(),color:H.string().optional()}).optional(),element:H.custom(e=>e instanceof HTMLElement,{error:"Must be an HTMLElement instance"}),contentHTML:H.string()}),R7e=O7e.omit({element:!0}).partial()});var Ope,GP,Rpe,B7e,e_r,Bpe=f(()=>{"use strict";xr();Gs();Ope="path",GP={color:"#4b90e2",width:1,completeFraction:0,visible:!0,verticalOffset:.1},Rpe=H.object({type:H.literal(Ope).default(Ope),color:H.string().default(GP.color),width:H.union([H.number(),H.any()]),completeFraction:H.number().default(GP.completeFraction),visible:H.boolean().default(GP.visible),verticalOffset:H.number().default(GP.verticalOffset),highlightStartFraction:H.number().default(0),highlightEndFraction:H.number().default(0),highlightColor:H.string().default("red"),highlightWidthMultiplier:H.number().default(1.1),highlightCompleteFraction:H.number().default(1)}),B7e=Rpe.partial(),e_r=H.strictObject(Rpe.shape)});var zpe,Npe,N7e,o_r,Upe=f(()=>{"use strict";Pe();xr();Gs();zpe="shape",Npe=C.object({type:C.literal(zpe).default(zpe),visible:C.boolean().default(!0),altitude:C.number().default(0),color:C.string().default("#ffffff"),height:C.number().default(0),opacity:C.number().default(1),interactive:C.boolean().default(!1),bevel:C.object({enabled:C.boolean().optional(),thickness:C.number().optional(),size:C.number().optional(),offset:C.number().optional(),segments:C.number().optional()}).optional()}),N7e=Npe.partial(),o_r=C.strictObject(Npe.shape)});var $pe,Vpe,U7e,$7e,p_r,jpe=f(()=>{"use strict";xr();a_();ar();Gs();$pe="text3d",Vpe=H.object({type:H.literal($pe).default($pe),position:H.custom(e=>e instanceof qe,{error:"Must be a Coordinate instance"})}),U7e=wz.extend({...Vpe.shape}),$7e=Tz.extend({...Vpe.shape}).partial(),p_r=H.strictObject(U7e.shape)});var Gpe,Hpe,V7e,m_r,Zpe=f(()=>{"use strict";xr();Gs();Gpe="walls",Hpe=H.object({type:H.literal(Gpe).default(Gpe),color:H.string().default("#ffffff"),topColor:H.string().optional(),texture:H.object({url:H.string()}).or(H.undefined()),topTexture:H.object({url:H.string()}).or(H.undefined()),visible:H.boolean().default(!0),height:H.number().default(0),opacity:H.number().default(1)}),V7e=Hpe.partial(),m_r=H.strictObject(Hpe.shape)});var Wpe,j7e,G7e,Xpe=f(()=>{"use strict";xr();ar();Wpe="image3d",j7e=C.object({type:C.literal(Wpe).default(Wpe),visible:C.boolean().default(!0),opacity:C.number().min(0).max(1).default(1),position:C.custom(e=>e instanceof qe,{error:"Must be a Coordinate instance"}),width:C.number().default(1),height:C.number().default(1),rotation:C.number().default(0),verticalOffset:C.number().default(0),flipImagesToFaceCamera:C.boolean().default(!1)}),G7e=j7e.partial()});var qpe,Ype,H7e,T_r,Jpe=f(()=>{"use strict";ar();xr();SP();Gs();qpe="model",Ype=Yz.extend({type:C.literal(qpe).default(qpe),color:C.string().optional(),position:C.custom(e=>qe.is(e),{error:"Expected a Coordinate"}),visible:C.boolean().default(!0),rotation:C.tuple([C.number(),C.number(),C.number()]).default([0,0,0]),scale:C.tuple([C.number(),C.number(),C.number()]).default([1,1,1]),verticalOffset:C.number().default(0),opacity:C.number().default(1),material:C.record(C.string(),Jz).optional(),interactive:C.boolean().default(!1),clippingPlaneZOffset:C.number().default(1/0),clippingPlaneTopColor:C.string().default("#E67B5B"),clippingPlaneTopVisible:C.boolean().default(!0)}),H7e=Ype.extend({scale:C.union([C.number(),C.tuple([C.number(),C.number(),C.number()])]),rotation:C.union([C.number(),C.tuple([C.number(),C.number(),C.number()])])}).partial(),T_r=C.strictObject(Ype.shape)});var Kpe=f(()=>{"use strict";mpe();xpe();Cpe();Ape();Lpe();kpe();Bpe();Upe();Gs();jpe();Zpe();Xpe();Jpe()});var Qpe=f(()=>{"use strict"});function Vi(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return ZN(e,t,n)}}function Q7e(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return WN(e,r)}}function st(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WP;ede&&ede(e,null);let n=t.length;for(;n--;){let i=t[n];if(typeof i=="string"){let o=r(i);o!==i&&(Z7e(t)||(t[n]=o),i=o)}e[i]=!0}return e}function e$e(e){for(let t=0;t<e.length;t++)Hs(e,t)||(e[t]=null);return e}function ec(e){let t=cde(null);for(let[r,n]of ude(e))Hs(e,r)&&(Array.isArray(n)?t[r]=e$e(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=ec(n):t[r]=n);return t}function v_(e,t){for(;e!==null;){let n=X7e(e,t);if(n){if(n.get)return Vi(n.get);if(typeof n.value=="function")return Vi(n.value)}e=W7e(e)}function r(){return null}return r}function fde(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p$e(),t=Me=>fde(Me);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==__.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e,n=r,i=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:s,Element:l,NodeFilter:u,NamedNodeMap:c=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:d,trustedTypes:h}=e,m=l.prototype,x=v_(m,"cloneNode"),b=v_(m,"remove"),_=v_(m,"nextSibling"),T=v_(m,"childNodes"),I=v_(m,"parentNode");if(typeof a=="function"){let Me=r.createElement("template");Me.content&&Me.content.ownerDocument&&(r=Me.content.ownerDocument)}let S,E="",{implementation:P,createNodeIterator:L,createDocumentFragment:k,getElementsByTagName:z}=r,{importNode:W}=n,Z=lde();t.isSupported=typeof ude=="function"&&typeof I=="function"&&P&&P.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Y,ERB_EXPR:J,TMPLIT_EXPR:j,DATA_ATTR:ae,ARIA_ATTR:ve,IS_SCRIPT_OR_DATA:xe,ATTR_WHITESPACE:Le,CUSTOM_ELEMENT:Te}=sde,{IS_ALLOWED_URI:rt}=sde,Re=null,zt=st({},[...nde,...VN,...jN,...GN,...ide]),He=null,Yt=st({},[...ode,...HN,...ade,...ZP]),Fe=Object.seal(cde(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lr=null,Mn=null,ii=!0,A=!0,se=!1,O=!0,_e=!1,le=!0,ue=!1,Mt=!1,An=!1,oi=!1,ai=!1,Ei=!1,Pp=!0,j_=!1,_M="user-content-",SM=!0,vg=!1,Df={},Lf=null,SU=st({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),wU=null,TU=st({},["audio","video","img","source","image","track"]),wM=null,IU=st({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),G_="http://www.w3.org/1998/Math/MathML",H_="http://www.w3.org/2000/svg",$l="http://www.w3.org/1999/xhtml",Ff=$l,TM=!1,IM=null,She=st({},[G_,H_,$l],$N),Z_=st({},["mi","mo","mn","ms","mtext"]),W_=st({},["annotation-xml"]),whe=st({},["title","style","font","a","script"]),_g=null,The=["application/xhtml+xml","text/html"],Ihe="text/html",Dn=null,kf=null,Ehe=r.createElement("form"),EU=function(F){return F instanceof RegExp||F instanceof Function},EM=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(kf&&kf===F)){if((!F||typeof F!="object")&&(F={}),F=ec(F),_g=The.indexOf(F.PARSER_MEDIA_TYPE)===-1?Ihe:F.PARSER_MEDIA_TYPE,Dn=_g==="application/xhtml+xml"?$N:WP,Re=Hs(F,"ALLOWED_TAGS")?st({},F.ALLOWED_TAGS,Dn):zt,He=Hs(F,"ALLOWED_ATTR")?st({},F.ALLOWED_ATTR,Dn):Yt,IM=Hs(F,"ALLOWED_NAMESPACES")?st({},F.ALLOWED_NAMESPACES,$N):She,wM=Hs(F,"ADD_URI_SAFE_ATTR")?st(ec(IU),F.ADD_URI_SAFE_ATTR,Dn):IU,wU=Hs(F,"ADD_DATA_URI_TAGS")?st(ec(TU),F.ADD_DATA_URI_TAGS,Dn):TU,Lf=Hs(F,"FORBID_CONTENTS")?st({},F.FORBID_CONTENTS,Dn):SU,Lr=Hs(F,"FORBID_TAGS")?st({},F.FORBID_TAGS,Dn):ec({}),Mn=Hs(F,"FORBID_ATTR")?st({},F.FORBID_ATTR,Dn):ec({}),Df=Hs(F,"USE_PROFILES")?F.USE_PROFILES:!1,ii=F.ALLOW_ARIA_ATTR!==!1,A=F.ALLOW_DATA_ATTR!==!1,se=F.ALLOW_UNKNOWN_PROTOCOLS||!1,O=F.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_e=F.SAFE_FOR_TEMPLATES||!1,le=F.SAFE_FOR_XML!==!1,ue=F.WHOLE_DOCUMENT||!1,oi=F.RETURN_DOM||!1,ai=F.RETURN_DOM_FRAGMENT||!1,Ei=F.RETURN_TRUSTED_TYPE||!1,An=F.FORCE_BODY||!1,Pp=F.SANITIZE_DOM!==!1,j_=F.SANITIZE_NAMED_PROPS||!1,SM=F.KEEP_CONTENT!==!1,vg=F.IN_PLACE||!1,rt=F.ALLOWED_URI_REGEXP||pde,Ff=F.NAMESPACE||$l,Z_=F.MATHML_TEXT_INTEGRATION_POINTS||Z_,W_=F.HTML_INTEGRATION_POINTS||W_,Fe=F.CUSTOM_ELEMENT_HANDLING||{},F.CUSTOM_ELEMENT_HANDLING&&EU(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Fe.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&EU(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Fe.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Fe.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_e&&(A=!1),ai&&(oi=!0),Df&&(Re=st({},ide),He=[],Df.html===!0&&(st(Re,nde),st(He,ode)),Df.svg===!0&&(st(Re,VN),st(He,HN),st(He,ZP)),Df.svgFilters===!0&&(st(Re,jN),st(He,HN),st(He,ZP)),Df.mathMl===!0&&(st(Re,GN),st(He,ade),st(He,ZP))),F.ADD_TAGS&&(Re===zt&&(Re=ec(Re)),st(Re,F.ADD_TAGS,Dn)),F.ADD_ATTR&&(He===Yt&&(He=ec(He)),st(He,F.ADD_ATTR,Dn)),F.ADD_URI_SAFE_ATTR&&st(wM,F.ADD_URI_SAFE_ATTR,Dn),F.FORBID_CONTENTS&&(Lf===SU&&(Lf=ec(Lf)),st(Lf,F.FORBID_CONTENTS,Dn)),SM&&(Re["#text"]=!0),ue&&st(Re,["html","head","body"]),Re.table&&(st(Re,["tbody"]),delete Lr.tbody),F.TRUSTED_TYPES_POLICY){if(typeof F.TRUSTED_TYPES_POLICY.createHTML!="function")throw b_('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof F.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw b_('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=F.TRUSTED_TYPES_POLICY,E=S.createHTML("")}else S===void 0&&(S=d$e(h,i)),S!==null&&typeof E=="string"&&(E=S.createHTML(""));$i&&$i(F),kf=F}},CU=st({},[...VN,...jN,...t$e]),PU=st({},[...GN,...r$e]),Che=function(F){let ee=I(F);(!ee||!ee.tagName)&&(ee={namespaceURI:Ff,tagName:"template"});let Se=WP(F.tagName),Ir=WP(ee.tagName);return IM[F.namespaceURI]?F.namespaceURI===H_?ee.namespaceURI===$l?Se==="svg":ee.namespaceURI===G_?Se==="svg"&&(Ir==="annotation-xml"||Z_[Ir]):!!CU[Se]:F.namespaceURI===G_?ee.namespaceURI===$l?Se==="math":ee.namespaceURI===H_?Se==="math"&&W_[Ir]:!!PU[Se]:F.namespaceURI===$l?ee.namespaceURI===H_&&!W_[Ir]||ee.namespaceURI===G_&&!Z_[Ir]?!1:!PU[Se]&&(whe[Se]||!CU[Se]):!!(_g==="application/xhtml+xml"&&IM[F.namespaceURI]):!1},qs=function(F){g_(t.removed,{element:F});try{I(F).removeChild(F)}catch{b(F)}},Of=function(F,ee){try{g_(t.removed,{attribute:ee.getAttributeNode(F),from:ee})}catch{g_(t.removed,{attribute:null,from:ee})}if(ee.removeAttribute(F),F==="is")if(oi||ai)try{qs(ee)}catch{}else try{ee.setAttribute(F,"")}catch{}},MU=function(F){let ee=null,Se=null;if(An)F="<remove></remove>"+F;else{let yn=rde(F,/^[\r\n\t ]+/);Se=yn&&yn[0]}_g==="application/xhtml+xml"&&Ff===$l&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");let Ir=S?S.createHTML(F):F;if(Ff===$l)try{ee=new d().parseFromString(Ir,_g)}catch{}if(!ee||!ee.documentElement){ee=P.createDocument(Ff,"template",null);try{ee.documentElement.innerHTML=TM?E:Ir}catch{}}let si=ee.body||ee.documentElement;return F&&Se&&si.insertBefore(r.createTextNode(Se),si.childNodes[0]||null),Ff===$l?z.call(ee,ue?"html":"body")[0]:ue?ee.documentElement:si},AU=function(F){return L.call(F.ownerDocument||F,F,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},CM=function(F){return F instanceof p&&(typeof F.nodeName!="string"||typeof F.textContent!="string"||typeof F.removeChild!="function"||!(F.attributes instanceof c)||typeof F.removeAttribute!="function"||typeof F.setAttribute!="function"||typeof F.namespaceURI!="string"||typeof F.insertBefore!="function"||typeof F.hasChildNodes!="function")},DU=function(F){return typeof s=="function"&&F instanceof s};function Vl(Me,F,ee){HP(Me,Se=>{Se.call(t,F,ee,kf)})}let LU=function(F){let ee=null;if(Vl(Z.beforeSanitizeElements,F,null),CM(F))return qs(F),!0;let Se=Dn(F.nodeName);if(Vl(Z.uponSanitizeElement,F,{tagName:Se,allowedTags:Re}),le&&F.hasChildNodes()&&!DU(F.firstElementChild)&&Ui(/<[/\w!]/g,F.innerHTML)&&Ui(/<[/\w!]/g,F.textContent)||F.nodeType===__.progressingInstruction||le&&F.nodeType===__.comment&&Ui(/<[/\w]/g,F.data))return qs(F),!0;if(!Re[Se]||Lr[Se]){if(!Lr[Se]&&kU(Se)&&(Fe.tagNameCheck instanceof RegExp&&Ui(Fe.tagNameCheck,Se)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Se)))return!1;if(SM&&!Lf[Se]){let Ir=I(F)||F.parentNode,si=T(F)||F.childNodes;if(si&&Ir){let yn=si.length;for(let Hi=yn-1;Hi>=0;--Hi){let jl=x(si[Hi],!0);jl.__removalCount=(F.__removalCount||0)+1,Ir.insertBefore(jl,_(F))}}}return qs(F),!0}return F instanceof l&&!Che(F)||(Se==="noscript"||Se==="noembed"||Se==="noframes")&&Ui(/<\/no(script|embed|frames)/i,F.innerHTML)?(qs(F),!0):(_e&&F.nodeType===__.text&&(ee=F.textContent,HP([Y,J,j],Ir=>{ee=x_(ee,Ir," ")}),F.textContent!==ee&&(g_(t.removed,{element:F.cloneNode()}),F.textContent=ee)),Vl(Z.afterSanitizeElements,F,null),!1)},FU=function(F,ee,Se){if(Pp&&(ee==="id"||ee==="name")&&(Se in r||Se in Ehe))return!1;if(!(A&&!Mn[ee]&&Ui(ae,ee))){if(!(ii&&Ui(ve,ee))){if(!He[ee]||Mn[ee]){if(!(kU(F)&&(Fe.tagNameCheck instanceof RegExp&&Ui(Fe.tagNameCheck,F)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(F))&&(Fe.attributeNameCheck instanceof RegExp&&Ui(Fe.attributeNameCheck,ee)||Fe.attributeNameCheck instanceof Function&&Fe.attributeNameCheck(ee))||ee==="is"&&Fe.allowCustomizedBuiltInElements&&(Fe.tagNameCheck instanceof RegExp&&Ui(Fe.tagNameCheck,Se)||Fe.tagNameCheck instanceof Function&&Fe.tagNameCheck(Se))))return!1}else if(!wM[ee]){if(!Ui(rt,x_(Se,Le,""))){if(!((ee==="src"||ee==="xlink:href"||ee==="href")&&F!=="script"&&J7e(Se,"data:")===0&&wU[F])){if(!(se&&!Ui(xe,x_(Se,Le,"")))){if(Se)return!1}}}}}}return!0},kU=function(F){return F!=="annotation-xml"&&rde(F,Te)},OU=function(F){Vl(Z.beforeSanitizeAttributes,F,null);let{attributes:ee}=F;if(!ee||CM(F))return;let Se={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:He,forceKeepAttr:void 0},Ir=ee.length;for(;Ir--;){let si=ee[Ir],{name:yn,namespaceURI:Hi,value:jl}=si,Sg=Dn(yn),PM=jl,li=yn==="value"?PM:K7e(PM);if(Se.attrName=Sg,Se.attrValue=li,Se.keepAttr=!0,Se.forceKeepAttr=void 0,Vl(Z.uponSanitizeAttribute,F,Se),li=Se.attrValue,j_&&(Sg==="id"||Sg==="name")&&(Of(yn,F),li=_M+li),le&&Ui(/((--!?|])>)|<\/(style|title)/i,li)){Of(yn,F);continue}if(Se.forceKeepAttr)continue;if(!Se.keepAttr){Of(yn,F);continue}if(!O&&Ui(/\/>/i,li)){Of(yn,F);continue}_e&&HP([Y,J,j],BU=>{li=x_(li,BU," ")});let RU=Dn(F.nodeName);if(!FU(RU,Sg,li)){Of(yn,F);continue}if(S&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Hi)switch(h.getAttributeType(RU,Sg)){case"TrustedHTML":{li=S.createHTML(li);break}case"TrustedScriptURL":{li=S.createScriptURL(li);break}}if(li!==PM)try{Hi?F.setAttributeNS(Hi,yn,li):F.setAttribute(yn,li),CM(F)?qs(F):tde(t.removed)}catch{Of(yn,F)}}Vl(Z.afterSanitizeAttributes,F,null)},Phe=function Me(F){let ee=null,Se=AU(F);for(Vl(Z.beforeSanitizeShadowDOM,F,null);ee=Se.nextNode();)Vl(Z.uponSanitizeShadowNode,ee,null),LU(ee),OU(ee),ee.content instanceof o&&Me(ee.content);Vl(Z.afterSanitizeShadowDOM,F,null)};return t.sanitize=function(Me){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=null,Se=null,Ir=null,si=null;if(TM=!Me,TM&&(Me="<!-->"),typeof Me!="string"&&!DU(Me))if(typeof Me.toString=="function"){if(Me=Me.toString(),typeof Me!="string")throw b_("dirty is not a string, aborting")}else throw b_("toString is not a function");if(!t.isSupported)return Me;if(Mt||EM(F),t.removed=[],typeof Me=="string"&&(vg=!1),vg){if(Me.nodeName){let jl=Dn(Me.nodeName);if(!Re[jl]||Lr[jl])throw b_("root node is forbidden and cannot be sanitized in-place")}}else if(Me instanceof s)ee=MU("<!---->"),Se=ee.ownerDocument.importNode(Me,!0),Se.nodeType===__.element&&Se.nodeName==="BODY"||Se.nodeName==="HTML"?ee=Se:ee.appendChild(Se);else{if(!oi&&!_e&&!ue&&Me.indexOf("<")===-1)return S&&Ei?S.createHTML(Me):Me;if(ee=MU(Me),!ee)return oi?null:Ei?E:""}ee&&An&&qs(ee.firstChild);let yn=AU(vg?Me:ee);for(;Ir=yn.nextNode();)LU(Ir),OU(Ir),Ir.content instanceof o&&Phe(Ir.content);if(vg)return Me;if(oi){if(ai)for(si=k.call(ee.ownerDocument);ee.firstChild;)si.appendChild(ee.firstChild);else si=ee;return(He.shadowroot||He.shadowrootmode)&&(si=W.call(n,si,!0)),si}let Hi=ue?ee.outerHTML:ee.innerHTML;return ue&&Re["!doctype"]&&ee.ownerDocument&&ee.ownerDocument.doctype&&ee.ownerDocument.doctype.name&&Ui(dde,ee.ownerDocument.doctype.name)&&(Hi="<!DOCTYPE "+ee.ownerDocument.doctype.name+`>
`+Hi),_e&&HP([Y,J,j],jl=>{Hi=x_(Hi,jl," ")}),S&&Ei?S.createHTML(Hi):Hi},t.setConfig=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};EM(Me),Mt=!0},t.clearConfig=function(){kf=null,Mt=!1},t.isValidAttribute=function(Me,F,ee){kf||EM({});let Se=Dn(Me),Ir=Dn(F);return FU(Se,Ir,ee)},t.addHook=function(Me,F){typeof F=="function"&&g_(Z[Me],F)},t.removeHook=function(Me,F){if(F!==void 0){let ee=q7e(Z[Me],F);return ee===-1?void 0:Y7e(Z[Me],ee,1)[0]}return tde(Z[Me])},t.removeHooks=function(Me){Z[Me]=[]},t.removeAllHooks=function(){Z=lde()},t}var ude,ede,Z7e,W7e,X7e,$i,Va,cde,ZN,WN,HP,q7e,tde,g_,Y7e,WP,$N,rde,x_,J7e,K7e,Hs,Ui,b_,nde,VN,jN,t$e,GN,r$e,ide,ode,HN,ade,ZP,n$e,i$e,o$e,a$e,s$e,pde,l$e,u$e,dde,c$e,sde,__,p$e,d$e,lde,f$e,hde=f(()=>{({entries:ude,setPrototypeOf:ede,isFrozen:Z7e,getPrototypeOf:W7e,getOwnPropertyDescriptor:X7e}=Object),{freeze:$i,seal:Va,create:cde}=Object,{apply:ZN,construct:WN}=typeof Reflect<"u"&&Reflect;$i||($i=function(t){return t});Va||(Va=function(t){return t});ZN||(ZN=function(t,r,n){return t.apply(r,n)});WN||(WN=function(t,r){return new t(...r)});HP=Vi(Array.prototype.forEach),q7e=Vi(Array.prototype.lastIndexOf),tde=Vi(Array.prototype.pop),g_=Vi(Array.prototype.push),Y7e=Vi(Array.prototype.splice),WP=Vi(String.prototype.toLowerCase),$N=Vi(String.prototype.toString),rde=Vi(String.prototype.match),x_=Vi(String.prototype.replace),J7e=Vi(String.prototype.indexOf),K7e=Vi(String.prototype.trim),Hs=Vi(Object.prototype.hasOwnProperty),Ui=Vi(RegExp.prototype.test),b_=Q7e(TypeError);nde=$i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),VN=$i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jN=$i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),t$e=$i(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),GN=$i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),r$e=$i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ide=$i(["#text"]),ode=$i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),HN=$i(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ade=$i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZP=$i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),n$e=Va(/\{\{[\w\W]*|[\w\W]*\}\}/gm),i$e=Va(/<%[\w\W]*|[\w\W]*%>/gm),o$e=Va(/\$\{[\w\W]*/gm),a$e=Va(/^data-[\-\w.\u00B7-\uFFFF]+$/),s$e=Va(/^aria-[\-\w]+$/),pde=Va(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),l$e=Va(/^(?:\w+script|data):/i),u$e=Va(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dde=Va(/^html$/i),c$e=Va(/^[a-z][.\w]*(-[.\w]+)+$/i),sde=Object.freeze({__proto__:null,ARIA_ATTR:s$e,ATTR_WHITESPACE:u$e,CUSTOM_ELEMENT:c$e,DATA_ATTR:a$e,DOCTYPE_NAME:dde,ERB_EXPR:i$e,IS_ALLOWED_URI:pde,IS_SCRIPT_OR_DATA:l$e,MUSTACHE_EXPR:n$e,TMPLIT_EXPR:o$e}),__={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},p$e=function(){return typeof window>"u"?null:window},d$e=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));let o="dompurify"+(n?"#"+n:"");try{return t.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},lde=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};f$e=fde()});var mde=f(()=>{"use strict";Pe();hde();Au()});var yde=f(()=>{"use strict"});var gde=f(()=>{"use strict";ar();mde();yde()});var xde=f(()=>{"use strict";Qpe();gde()});var XN=f(()=>{"use strict";Sp();Pe();LP();S_();ar();Vs();TN();IN();EN();CN();ppe();kN();ON();RN();BN();js();zN();NN();UN();su();Do();kP();vN();Mp();wp();_p();Kpe();xde()});var _de=f(()=>{"use strict";XN();IN();CN();kN();zN();RN();BN();TN();EN();XP();NN();UN();ON();kP()});var Sde=f(()=>{"use strict"});var P$e,wde=f(()=>{"use strict";xr();P$e=H.strictObject({environment:H.union([H.literal("basic"),H.literal(!1)]).optional(),text3d:H.object({hoverColor:H.string().optional()}).optional(),geometry:H.object({hoverColor:H.string().optional()}).optional(),backgroundColor:H.string().optional(),backgroundAlpha:H.number().optional()})});var M$e,Tde=f(()=>{"use strict";M$e=Ie(Y6(),1);Pe()});var qN=f(()=>{"use strict";Sp();Pe();_de();ar();Sde();wde();Tde();z1()});var A$e,Ip,ig,pr,Ul,Zs,ja,Ws,og,ag,T_,Sr,Ide,Ede,ng,qP,YN,JN,KN,w_,QN=f(()=>{"use strict";Pe();eL();rL();A$e=1e3*60*60*2,w_=class{constructor(t,r){D(this,Sr);D(this,Ip,new Nt);D(this,ig);D(this,pr);D(this,Ul);D(this,Zs);D(this,ja);D(this,Ws);D(this,og);D(this,ag);D(this,T_,()=>{"key"in y(this,pr)&&"secret"in y(this,pr)&&me(this,Sr,ng).call(this),me(this,Sr,qP).call(this)});w(this,"on",(t,r)=>y(this,Ip).on(t,r));w(this,"off",(t,r)=>y(this,Ip).off(t,r));R(this,ig,t),R(this,pr,r)}setMapIds(t){R(this,ig,t)}setEnterprise(t){y(this,pr).enterprise=t}async readySync(){if((!("key"in y(this,pr))||!("secret"in y(this,pr)))&&!("accessToken"in y(this,pr))){ie.error("No API keys or access token provided! Cannot preload tokens.");return}let t=[me(this,Sr,ng).call(this),null];y(this,pr).enterprise||(t[1]=this.getSasTokensAsync());let[r,n]=await Promise.all(t);me(this,Sr,KN).call(this),me(this,Sr,YN).call(this,r),n!=null&&me(this,Sr,JN).call(this,n),Vg()&&globalThis.addEventListener?.("focus",y(this,T_))}async refreshing(){let t=[];return y(this,Ul)!=null&&t.push(y(this,Ul)),y(this,Zs)!=null&&t.push(y(this,Zs)),Promise.all(t)}getAccessTokenAsync(){return me(this,Sr,ng).call(this)}getSasTokensAsync(){return me(this,Sr,qP).call(this)}getAccessToken(){return y(this,ja)==null?(ie.error("Tokens must be loaded before reading synchronously! Try awaiting readySync() first."),{token:""}):y(this,ja)}getSasToken(t){return this.isEnterpriseMode()?(ie.error("SAS tokens are not available in the enterprise mode!"),{token:""}):y(this,Ws)==null?(ie.error("Tokens must be loaded before reading synchronously! Try awaiting readySync() first."),{token:""}):t in y(this,Ws).tokens?y(this,Ws).tokens[t]:(ie.error(`SAS token for map ${t} not found!`),{token:""})}isEnterpriseMode(){return y(this,pr).enterprise??!1}destroy(){me(this,Sr,KN).call(this),y(this,Ip).destroy(),Vg()&&globalThis.removeEventListener("focus",y(this,T_))}};Ip=new WeakMap,ig=new WeakMap,pr=new WeakMap,Ul=new WeakMap,Zs=new WeakMap,ja=new WeakMap,Ws=new WeakMap,og=new WeakMap,ag=new WeakMap,T_=new WeakMap,Sr=new WeakSet,Ide=function(t){let r=t.token!==y(this,ja)?.token;R(this,ja,t),r&&y(this,Ip).publish("access-token-refreshed",{accessToken:t})},Ede=function(t){let r=JSON.stringify(t.tokens)!==JSON.stringify(y(this,Ws)?.tokens);R(this,Ws,t),r&&y(this,Ip).publish("sas-tokens-refreshed",{sasTokens:t.tokens})},ng=async function(t=!1){if("accessToken"in y(this,pr)&&typeof y(this,pr).accessToken=="string"){let r={token:y(this,pr).accessToken,expires:Date.now()+72e5};return R(this,ja,r),r}if(!("key"in y(this,pr))||!("secret"in y(this,pr))||typeof y(this,pr).key!="string"||typeof y(this,pr).secret!="string")throw new Error("No API keys or access token provided!");return y(this,Ul)!=null?y(this,Ul):y(this,ja)!=null&&y(this,ja).expires!=null&&y(this,ja).expires>Date.now()&&!t?y(this,ja):(R(this,Ul,ST({...y(this,pr),key:y(this,pr).key,secret:y(this,pr).secret},y(this,pr).enterprise??!1).then(r=>{let n={token:r.accessToken,expires:r.expiresTimestamp*1e3};return me(this,Sr,Ide).call(this,n),n}).catch(r=>{throw r}).finally(()=>{R(this,Ul,void 0)})),y(this,Ul))},qP=async function(t=!1){return this.isEnterpriseMode()?{tokens:{},expires:1/0}:y(this,Zs)!=null?y(this,Zs):y(this,Ws)!=null&&y(this,Ws).expires>Date.now()&&!t?y(this,Ws):(R(this,Zs,new Promise((r,n)=>{me(this,Sr,ng).call(this).then(i=>{let o={},a=y(this,ig).map(s=>tL({...y(this,pr),mapId:s},i.token).then(l=>{o[s]={token:l.token,expires:l.expires}}).catch(l=>{ie.error(`Error getting SAS token for map ${s}:`,l)}));Promise.all(a).then(()=>{let s={tokens:o,expires:Math.min(...Object.values(o).map(l=>l.expires??1/0))};me(this,Sr,Ede).call(this,s),r(s)})}).catch(i=>{n(i)})})),y(this,Zs).catch(r=>{throw r}).finally(()=>{R(this,Zs,void 0)}),y(this,Zs))},YN=function(t){if(!("key"in y(this,pr))||!("secret"in y(this,pr)))return;let r=t.expires!=null?t.expires-Date.now():A$e;isFinite(r)&&R(this,og,setTimeout(()=>{me(this,Sr,ng).call(this,!0).then(n=>{me(this,Sr,YN).call(this,n)})},r-QX))},JN=function(t){let r=t.expires-Date.now();isFinite(r)&&R(this,ag,setTimeout(()=>{me(this,Sr,qP).call(this,!0).then(n=>{me(this,Sr,JN).call(this,n)})},r-rq))},KN=function(){y(this,og)!=null&&clearTimeout(y(this,og)),y(this,ag)!=null&&clearTimeout(y(this,ag))}});var Cde=f(()=>{"use strict"});function D$e(e){if(!(!e.languages||!Vg()||!globalThis.navigator?.languages?.length))for(let t=0;t<globalThis.navigator.languages.length;t++){let r=e.languages.find(n=>n.code.toLowerCase()===globalThis.navigator.languages[t].toLowerCase());if(r)return{code:r.code,name:r.name}}}function eU(e,t){let r=t?.languageCode??"",n=t?.fallbackToNavigatorLanguage??!0,i=e?.languages?.find(a=>a.code.toLowerCase()===r.toLowerCase()),o;if(i)o=i;else if(n??!0)try{let a=D$e(e);a&&(o=a)}catch(a){ie.error("fallbackToNavigatorLanguage is set, however, there was an error getting the navigator language",a)}return o??e.defaultLanguage}var Pde=f(()=>{"use strict";Pe()});function YP(){return k$e}var k$e,JP=f(()=>{"use strict";S_();Lq();ar();qN();Sp();Pe();Do();z1();su();Au();QN();tU();kP();Cde();Gl();qN();LP();ar();XN();Pde();I_();FN();k$e=!1});function Ade(e,t){return((t-e+Math.PI)%(Math.PI*2)+Math.PI*2)%(Math.PI*2)-Math.PI}function Dde(e,t){let r="Left";return e<=-Math.PI/4?r="Right":e<=-t?r="SlightRight":e<=t?r="Straight":e<=Math.PI/4?r="SlightLeft":r="Left",r}var js=f(()=>{"use strict";ar();JP();LP();wL();su();Yf();Pe()});var Lde,ji,wo,ra,rc,Tf,lg,Ga,Fde,sg,kde,tc,I_=f(()=>{"use strict";ar();js();Pe();Lde=Math.PI*.1,tc=class{constructor(t,r,n,i,o){D(this,Ga);w(this,"id");D(this,ji,{});D(this,wo);D(this,ra);w(this,"departure");w(this,"destination");D(this,rc);D(this,Tf);D(this,lg);this.id=o?.id??Kt(),R(this,wo,r),R(this,ra,t.features),this.departure=n,this.destination=i}get path(){return y(this,ra).map(t=>y(this,wo).getById("node",t.properties.id)).filter(Boolean)}get coordinates(){return y(this,ji).coordinates?y(this,ji).coordinates:(y(this,ji).coordinates=y(this,ra).map(t=>new qe(t.geometry.coordinates[1],t.geometry.coordinates[0],t.properties.groupBy)),y(this,ji).coordinates)}get distance(){return y(this,ji).distance?y(this,ji).distance:(y(this,ji).distance=y(this,ra).reduce((t,r)=>t+(r.properties.distance||0),0),y(this,ji).distance)}get instructions(){if(y(this,ra).length<2)return[];if(y(this,ji).instructions)return y(this,ji).instructions;let t=[],r=0;for(let n=0;n<y(this,ra).length;n++){let i=y(this,ra)[n],o=y(this,ra)[n-1],a=y(this,ra)[n+1],s=new qe(i.geometry.coordinates[1],i.geometry.coordinates[0],i.properties.groupBy),l=me(this,Ga,Fde).call(this,{prevDirection:o,direction:i,nextDirection:a});r+=o?.properties.distance||0;for(let u of l)u&&(t.push({action:u,distance:r,coordinate:s,node:y(this,wo).getById("node",i.properties.id)}),r=0)}return y(this,ji).instructions=t,y(this,ji).instructions}toJSON(){return{id:this.id,directions:y(this,ra),__type:"directions",from:this.departure,to:this.destination}}};ji=new WeakMap,wo=new WeakMap,ra=new WeakMap,rc=new WeakMap,Tf=new WeakMap,lg=new WeakMap,Ga=new WeakSet,Fde=function(t){let{prevDirection:r,direction:n,nextDirection:i}=t,o=r&&y(this,wo).getById("floor",r.properties.groupBy),a=y(this,wo).getById("floor",n.properties.groupBy),s=i&&y(this,wo).getById("floor",i.properties.groupBy),l=[];r||l.push({type:"Departure"});let u=y(this,wo).getMVFFeatureByNodeId("connection",n.properties.id),c=u?y(this,wo).getById("connection",u.id):void 0,p=u&&u.nodes.length>1,d=y(this,wo).enterpriseMode&&(!n.properties.destination||!u?.nodes.includes(n.properties.destination)||!u?.nodes.includes(n.properties.id));if(u&&!(!p||d))if(!y(this,rc)||y(this,rc)==="exit")l.push(me(this,Ga,sg).call(this,"TakeConnection",a,s,c,u)),R(this,rc,"take"),R(this,Tf,c),R(this,lg,u);else{let m=y(this,wo).getMVFFeatureByNodeId("connection",r?.properties.id??""),x=y(this,wo).getById("connection",m?.id??"");l.push(me(this,Ga,sg).call(this,"ExitConnection",a,o,x,m)),R(this,rc,"exit"),R(this,Tf,c),R(this,lg,u)}else y(this,rc)==="take"?(l.push(me(this,Ga,sg).call(this,"ExitConnection",a,o,y(this,Tf),y(this,lg))),R(this,rc,"exit"),R(this,Tf,c)):s&&a?.id!==s.id?l.push(me(this,Ga,sg).call(this,"TakeConnection",a,s,c)):o&&o.id!==a?.id?l.push(me(this,Ga,sg).call(this,"ExitConnection",a,o,c)):l.push(me(this,Ga,kde).call(this,r,n));return i||l.push({type:"Arrival"}),l},sg=function(t,r,n,i,o){let a="none",s=r?r.elevation:0;if(s!=null&&n?.elevation!=null){let u=s-n.elevation;u>0?a="down":u<0&&(a="up")}let l=i?.type??o?.type??"stairs";return{type:t,fromFloor:r,toFloor:n,direction:a,connection:i,connectionType:l}},kde=function(t,r){let n=r.properties.edges;if(!n||n.filter(a=>a.destination.properties.id!==t?.properties.id&&a.destination.properties.id!==r.properties.destination).length===0)return null;let o=t?-Ade(t.properties.angle,r.properties.angle):0;return Math.abs(o)>=Lde?{type:"Turn",bearing:Dde(o,Lde),referencePosition:"At"}:null}});function Ode(e){return{...O$e,lineOfSight:!e}}function QP(e,t,r){let n=Ode(r),o=t.Query.__LEGACY_NEAREST_SYNC(e,t.getByType("node"),n)?.[0]?.feature.id;return o?[o]:[]}async function eM(e,t,r){let n=Ode(r),o=(await t.Query.nearest(e,t.getByType("node"),n))?.[0]?.feature.id;return o?[o]:[]}function R$e(e,t,r){let n=[];for(let i of e.navigationTarget){let o=ug(i,t,r);n.push(...o)}return n}async function B$e(e,t,r){let n=[];for(let i of e.navigationTarget){let o=await Ep(i,t,r);n.push(...o)}return n}function Rde(e,t){let n=t?.getMVFFeatureById("entrance",e.id)?.properties.node;return n?[n]:[]}function Bde(e,t){return t?.getMVFFeatureById("area",e.id)?.properties.destinationNodes??[]}function zde(e,t){let r=t?.getMVFFeatureById("space",e.id);if(r==null)return[];let n=t.entranceNodeIdsBySpaceId?.[e.id];return n&&n.length>0?n:r.properties.destinationNodes??[]}function z$e(e,t,r){let n=[];for(let i of e.coordinates){let o=QP(i,t,r);o.length>0&&n.push(o[0])}return n}async function N$e(e,t,r){let n=[];for(let i of e.coordinates){let o=await eM(i,t,r);o.length>0&&n.push(o[0])}return n}function Nde(e,t){return t?.objectEntranceNodeIdsByObstructionId[e.id]??[]}function Ude(e,t){return e.spaces.flatMap(r=>t?.getMVFFeatureById("space",r.id)?.properties.destinationNodes??[]).filter(r=>typeof r=="string")}function $de(e){return e.nodes.map(t=>t.id)}function ug(e,t,r){if(dr.has(e))return dr.get(e);if(nd.is(e)){let n=R$e(e,t,r);return dr.set(e,n),n}else if(au.is(e)){let n=QP(e,t,r);return dr.set(e,n),n}else if(qe.is(e)){let n=QP(e,t,r);return dr.set(e,n),n}else{if(rl.is(e))return QP(e,t,r);if(Ka.is(e)){let n=Rde(e,t);return dr.set(e,n),n}else if(tl.is(e)){let n=Bde(e,t);return dr.set(e,n),n}else if(Mo.is(e)){let n=zde(e,t);return dr.set(e,n),n}else if(uu.is(e)){let n=z$e(e,t,r);return dr.set(e,n),n}else if(Qa.is(e)){let n=Nde(e,t);return dr.set(e,n),n}else if(Ao.is(e)){let n=Ude(e,t);return dr.set(e,n),n}else if(ca.is(e)){let n=$de(e);return dr.set(e,n),n}else if(qi.is(e)){let n=[e.id];return dr.set(e,n),n}else return[]}}async function Ep(e,t,r){if(dr.has(e))return dr.get(e);if(nd.is(e)){let n=await B$e(e,t,r);return dr.set(e,n),n}else if(au.is(e)){let n=await eM(e,t,r);return dr.set(e,n),n}else if(qe.is(e)){let n=await eM(e,t,r);return dr.set(e,n),n}else if(rl.is(e)){let n=await eM(e,t,r);return dr.set(e,n),n}else if(Ka.is(e)){let n=Rde(e,t);return dr.set(e,n),n}else if(tl.is(e)){let n=Bde(e,t);return dr.set(e,n),n}else if(Mo.is(e)){let n=zde(e,t);return dr.set(e,n),n}else if(uu.is(e)){let n=await N$e(e,t,r);return dr.set(e,n),n}else if(Qa.is(e)){let n=Nde(e,t);return dr.set(e,n),n}else{if(Ao.is(e))return Ude(e,t);if(ca.is(e)){let n=$de(e);return dr.set(e,n),n}else if(qi.is(e)){let n=[e.id];return dr.set(e,n),n}else return[]}}function Vde(e,t,r){let n=e.features[0]?.properties.id,i=t[0];if(t.length>1){for(let o of t)if((r.get(o)??[]).includes(n)){i=o;break}}return i}function jde(e,t,r){let n=e.features[e.features.length-1]?.properties.id,i=t[0];if(t.length>1){for(let o of t)if((r.get(o)??[]).includes(n)){i=o;break}}return i}var O$e,dr,tM=f(()=>{"use strict";ar();O$e={lineOfSight:!0,mode:"absolute-distance",maxResults:1};dr=new WeakMap});var If,rM,cg,Gde=f(()=>{"use strict";bN();ar();I_();tM();cg=class{constructor({nodes:t,geojsonCollection:r,connections:n,groupBy:i,multiplicativeDistanceWeightScaling:o,flagDeclarations:a}){w(this,"navigator");w(this,"connections");w(this,"getDirections",async(t,r,n,i)=>{let o=new Map,a=new Map;for(let p of t)o.set(p,await Ep(p,i,i.enterpriseMode));for(let p of r)a.set(p,await Ep(p,i,i.enterpriseMode));let{originIds:s,destinationNodeIds:l,featureToNodeIdsMap:u,earlyReturnNodeId:c}=this.processTargets(o,a,i);return c?y(this,If).call(this,t,r,[c],[c],n,i,u):y(this,If).call(this,t,r,s,l,n,i,u)});w(this,"getDirectionsSync",(t,r,n,i)=>{let o=new Map(t.map(p=>[p,ug(p,i,i.enterpriseMode)])),a=new Map(r.map(p=>[p,ug(p,i,i.enterpriseMode)])),{originIds:s,destinationNodeIds:l,featureToNodeIdsMap:u,earlyReturnNodeId:c}=this.processTargets(o,a,i);return c?y(this,If).call(this,t,r,[c],[c],n,i,u):y(this,If).call(this,t,r,s,l,n,i,u)});D(this,If,(t,r,n,i,o,a,s)=>{let l=this.getDisabledConnectionNodeIds(o.accessible).filter(x=>!n.includes(x)&&!i.includes(x)),u=new Map,c={...o.connectionIdWeightMap};for(let x of o.excludedConnections)c[x.id]=1/0;for(let x in c){let b=a.getById("connection",x);b&&y(this,rM).call(this,b,c[x],u)}let p=this.navigator.getDirections({zones:o.zones.map(x=>({geometry:x.geometry,cost:x.cost,map:x.floor?.id})),originIds:n,destinationNodeIds:i,disabledConnectionNodeIds:l,simplify:{enabled:o.smoothing.enabled,bufferRadius:o.smoothing.radius},overrideEdgeWeights:u,multiplicativeDistanceWeightScaling:!a.enterpriseMode});this.addCoordinateDirections(p,t,r);let d=Vde(p,t,s),h=jde(p,r,s),m=new tc(p,a,d,h);if(!(m.distance===0&&new Set([...n,...i]).size===n.length+i.length))return m});w(this,"getDisabledConnectionNodeIds",t=>t===!1?[]:this.connections.reduce((r,n)=>n.accessible?r:r.concat(n.nodes),[]));D(this,rM,(t,r,n)=>{if(t.nodes.length<2)return;let i=new Set(t.nodes.map(o=>o.id));for(let o of t.nodes){let a=this.navigator.graph.edges[o.id];if(a)for(let s of a)i.has(s.destination.properties.id)&&n.set(s,r)}});w(this,"addCoordinateDirections",(t,[r],[n])=>{if(t.features.length){if(qe.is(r)){let i=this.createDirectionFeature(r,this.navigator.getAngle([r.longitude,r.latitude],t.features[0].geometry.coordinates),this.navigator.getDistance([r.longitude,r.latitude],t.features[0].geometry.coordinates));t.features.splice(0,0,i)}if(qe.is(n)){let i=this.createDirectionFeature(n,0,0),o=t.features[t.features.length-1];o.properties.distance=this.navigator.getDistance(o.geometry.coordinates,[n.longitude,n.latitude]),o.properties.angle=this.navigator.getAngle(o.geometry.coordinates,[n.longitude,n.latitude]),t.features.push(i)}}});w(this,"createDirectionFeature",(t,r,n)=>({type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]},properties:{groupBy:t.floorId,id:t.id,angle:r,distance:n,edges:[]}}));this.navigator=new rg({nodes:t,geojsonCollection:this.createCollection(r),groupBy:i,multiplicativeDistanceWeightScaling:o,flagDeclarations:a}),this.connections=n}processTargets(t,r,n){let i=[],o=[],a=new Map,s=new Set;for(let[l,u]of t){a.set(l,u);for(let c of u)i.push(c),n.nodesById[c]?.space?.id&&s.add(n.nodesById[c].space.id)}for(let[l,u]of r){a.set(l,u);for(let c of u)if(o.push(c),n.nodesById[c]?.space&&s.has(n.nodesById[c]?.space?.id))return{originIds:i,destinationNodeIds:o,featureToNodeIdsMap:a,earlyReturnNodeId:c}}return{originIds:i,destinationNodeIds:o,featureToNodeIdsMap:a}}createCollection(t){return{type:"FeatureCollection",features:Object.entries(t).reduce((r,[n,i])=>r.concat(i.features.map(o=>(o.properties.map=n,o))),[])}}};If=new WeakMap,rM=new WeakMap});var Hde=f(()=>{"use strict";I_();Gde();tM()});var XP=f(()=>{"use strict";Hde()});function Zde(e){let t=+this._x.call(null,e),r=+this._y.call(null,e);return Wde(this.cover(t,r),t,r,e)}function Wde(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var i,o=e._root,a={data:n},s=e._x0,l=e._y0,u=e._x1,c=e._y1,p,d,h,m,x,b,_,T;if(!o)return e._root=a,e;for(;o.length;)if((x=t>=(p=(s+u)/2))?s=p:u=p,(b=r>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[_=b<<1|x]))return i[_]=a,e;if(h=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===h&&r===m)return a.next=o,i?i[_]=a:e._root=a,e;do i=i?i[_]=new Array(4):e._root=new Array(4),(x=t>=(p=(s+u)/2))?s=p:u=p,(b=r>=(d=(l+c)/2))?l=d:c=d;while((_=b<<1|x)===(T=(m>=d)<<1|h>=p));return i[T]=o,i[_]=a,e}function Xde(e){var t,r,n=e.length,i,o,a=new Array(n),s=new Array(n),l=1/0,u=1/0,c=-1/0,p=-1/0;for(r=0;r<n;++r)isNaN(i=+this._x.call(null,t=e[r]))||isNaN(o=+this._y.call(null,t))||(a[r]=i,s[r]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>p&&(p=o));if(l>c||u>p)return this;for(this.cover(l,u).cover(c,p),r=0;r<n;++r)Wde(this,a[r],s[r],e[r]);return this}var qde=f(()=>{});function Yde(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(e))+1,o=(n=Math.floor(t))+1;else{for(var a=i-r||1,s=this._root,l,u;r>e||e>=i||n>t||t>=o;)switch(u=(t<n)<<1|e<r,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:i=r+a,o=n+a;break;case 1:r=i-a,o=n+a;break;case 2:i=r+a,n=o-a;break;case 3:r=i-a,n=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=i,this._y1=o,this}var Jde=f(()=>{});function Kde(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}var Qde=f(()=>{});function efe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}var tfe=f(()=>{});function $n(e,t,r,n,i){this.node=e,this.x0=t,this.y0=r,this.x1=n,this.y1=i}var nM=f(()=>{});function rfe(e,t,r){var n,i=this._x0,o=this._y0,a,s,l,u,c=this._x1,p=this._y1,d=[],h=this._root,m,x;for(h&&d.push(new $n(h,i,o,c,p)),r==null?r=1/0:(i=e-r,o=t-r,c=e+r,p=t+r,r*=r);m=d.pop();)if(!(!(h=m.node)||(a=m.x0)>c||(s=m.y0)>p||(l=m.x1)<i||(u=m.y1)<o))if(h.length){var b=(a+l)/2,_=(s+u)/2;d.push(new $n(h[3],b,_,l,u),new $n(h[2],a,_,b,u),new $n(h[1],b,s,l,_),new $n(h[0],a,s,b,_)),(x=(t>=_)<<1|e>=b)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-x],d[d.length-1-x]=m)}else{var T=e-+this._x.call(null,h.data),I=t-+this._y.call(null,h.data),S=T*T+I*I;if(S<r){var E=Math.sqrt(r=S);i=e-E,o=t-E,c=e+E,p=t+E,n=h.data}}return n}var nfe=f(()=>{nM()});function ife(e){if(isNaN(c=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var t,r=this._root,n,i,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,p,d,h,m,x,b,_;if(!r)return this;if(r.length)for(;;){if((m=c>=(d=(a+l)/2))?a=d:l=d,(x=p>=(h=(s+u)/2))?s=h:u=h,t=r,!(r=r[b=x<<1|m]))return this;if(!r.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(n=t,_=b)}for(;r.data!==e;)if(i=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,i?(o?i.next=o:delete i.next,this):t?(o?t[b]=o:delete t[b],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(n?n[_]=r:this._root=r),this):(this._root=o,this)}function ofe(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}var afe=f(()=>{});function sfe(){return this._root}var lfe=f(()=>{});function ufe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}var cfe=f(()=>{});function pfe(e){var t=[],r,n=this._root,i,o,a,s,l;for(n&&t.push(new $n(n,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(n=r.node,o=r.x0,a=r.y0,s=r.x1,l=r.y1)&&n.length){var u=(o+s)/2,c=(a+l)/2;(i=n[3])&&t.push(new $n(i,u,c,s,l)),(i=n[2])&&t.push(new $n(i,o,c,u,l)),(i=n[1])&&t.push(new $n(i,u,a,s,c)),(i=n[0])&&t.push(new $n(i,o,a,u,c))}return this}var dfe=f(()=>{nM()});function ffe(e){var t=[],r=[],n;for(this._root&&t.push(new $n(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var i=n.node;if(i.length){var o,a=n.x0,s=n.y0,l=n.x1,u=n.y1,c=(a+l)/2,p=(s+u)/2;(o=i[0])&&t.push(new $n(o,a,s,c,p)),(o=i[1])&&t.push(new $n(o,c,s,l,p)),(o=i[2])&&t.push(new $n(o,a,p,c,u)),(o=i[3])&&t.push(new $n(o,c,p,l,u))}r.push(n)}for(;n=r.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}var hfe=f(()=>{nM()});function mfe(e){return e[0]}function yfe(e){return arguments.length?(this._x=e,this):this._x}var gfe=f(()=>{});function xfe(e){return e[1]}function bfe(e){return arguments.length?(this._y=e,this):this._y}var vfe=f(()=>{});function C_(e,t,r){var n=new rU(t??mfe,r??xfe,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function rU(e,t,r,n,i,o){this._x=e,this._y=t,this._x0=r,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function _fe(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var Gi,Sfe=f(()=>{qde();Jde();Qde();tfe();nfe();afe();lfe();cfe();dfe();hfe();gfe();vfe();Gi=C_.prototype=rU.prototype;Gi.copy=function(){var e=new rU(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,n;if(!t)return e;if(!t.length)return e._root=_fe(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var i=0;i<4;++i)(n=t.source[i])&&(n.length?r.push({source:n,target:t.target[i]=new Array(4)}):t.target[i]=_fe(n));return e};Gi.add=Zde;Gi.addAll=Xde;Gi.cover=Yde;Gi.data=Kde;Gi.extent=efe;Gi.find=rfe;Gi.remove=ife;Gi.removeAll=ofe;Gi.root=sfe;Gi.size=ufe;Gi.visit=pfe;Gi.visitAfter=ffe;Gi.x=yfe;Gi.y=bfe});var wfe=f(()=>{Sfe()});function nU(e,t,r,n=0,i=0,o=0,a=0){if(r===void 0){r=e.root();let l=e.extent();if(l&&([[n,i],[o,a]]=l,t(r,n,i,o,a)))return!0;if(!r)return!1}let s=[[n,i,(o+n)/2,(a+i)/2],[(o+n)/2,i,o,(a+i)/2],[n,(a+i)/2,(o+n)/2,a],[(o+n)/2,(a+i)/2,o,a]];for(let l=0;l<4;l++){let u=r[l];if(u){let[c,p,d,h]=s[l];t(u,c,p,d,h)||nU(e,t,u,c,p,d,h)}}return!1}var Tfe=f(()=>{"use strict"});var Ife,U$e,$$e,V$e,Xs,P_,oM,Efe,To,Ef,iM,Cfe=f(()=>{"use strict";wfe();mc();Tfe();Ife=1e3,U$e=.1,$$e=5,V$e=1.5,iM=class{constructor(t,r){D(this,oM);D(this,Xs,{});D(this,P_,new Map);w(this,"getMaxSearchRadiusForFloorId",(t,r)=>{let n=y(this,P_).get(y(this,To).mapName)?.get(r);if(n)return n;let i=this.getNodeTreeByTypeAndFloorId(t,y(this,To).mapName,r);if(typeof i.extent=="function")if(i.extent()){let[[o,a],[s,l]]=i.extent(),u=s-o,c=l-a;n=Math.max(u,c)}else n=Ife;else n=Ife;return y(this,P_).set(y(this,To).mapName,new Map([[r,n]])),n});D(this,To);D(this,Ef);R(this,To,t),R(this,Ef,r)}searchWithIncludedIds(t,r,n,i,o,a,s=!1,l=1/0){let u=this.getNodeTreeByTypeAndFloorId(r,n,i),c=new Set,p=[],d=$$e,h=Math.max(a,this.getMaxSearchRadiusForFloorId(r,i));for(;p.length<l&&d<=h;){let m=me(this,oM,Efe).call(this,t,u,o,d,a,c);m.sort((x,b)=>x.distance-b.distance);for(let x of m){if(p.length>=l)break;s?y(this,To).directions.navigator.hasLineOfSight(t,x.node.geometry.coordinates,i,U$e)&&p.push(x):p.push(x)}d=d*V$e}return p}getNodeTreeByTypeAndFloorId(t,r,n){if(y(this,Xs)[t]||(y(this,Xs)[t]={}),y(this,Xs)[t][r]?.[n])return y(this,Xs)[t][r][n];y(this,Xs)[t][r]||(y(this,Xs)[t][r]={}),y(this,Xs)[t][r][n]=C_();let i=y(this,Xs)[t][r][n];i.x(a=>y(this,Ef).call(this,a.geometry.coordinates).x),i.y(a=>y(this,Ef).call(this,a.geometry.coordinates).y);let o=[];switch(t){case"space":o=y(this,To).mvfSpacesByFloorId[n].flatMap(s=>s.properties.destinationNodes).map(s=>{let l=y(this,To).mvfNodesById[s];return l?{...l,properties:{id:l.properties.id,parentId:l.properties.space[0]}}:null});break;case"node":o=y(this,To).mvfNodesByFloorId[n]?.filter(s=>s.properties.neighbors.length>0)||[];break;case"point-of-interest":o=y(this,To).mvfPoisByFloorId[n]||[];break;case"door":o=y(this,To).mvfEntrancesByFloorId[n]||[];break;case"annotation":o=y(this,To).mvfAnnotationsByFloorId[n]||[];break}return o?.length>0&&i.addAll(o),i}};Xs=new WeakMap,P_=new WeakMap,oM=new WeakSet,Efe=function(t,r,n,i,o,a){let{x:s,y:l}=y(this,Ef).call(this,t),u=s-i,c=s+i,p=l-i,d=l+i,h=[];return nU(r,(m,x,b,_,T)=>{let I=x>=c||b>=d||_<u||T<p;if("data"in m){let S=m.data,E=S.properties.parentId||S.properties.id;if(n.includes(E)&&!a.has(E)){a.add(E);let P=Wa(t,S.geometry.coordinates);P<=o&&h.push({node:S,distance:P})}}return I}),h},To=new WeakMap,Ef=new WeakMap});var pg,Pfe,iU,oU,Mfe,Afe,un,A_,aM,D_,aU,dg,sM,lM,M_,Dfe=f(()=>{"use strict";ar();Cfe();Do();xr();Pe();XP();tM();pg=50,Pfe=111319.9,iU=1,oU=!1,Mfe=H.object({limit:H.enum(["same-floor","same-elevation"]).optional(),mode:H.enum(["travel-distance","absolute-distance"]).optional(),lineOfSight:H.boolean().optional().or(H.literal("auto")),maxDistance:H.number().optional(),maxResults:H.number().optional()}),Afe={lineOfSight:oU,mode:"travel-distance",maxDistance:pg,limit:"same-floor",maxResults:iU},M_=class{constructor(t){D(this,D_);D(this,un);D(this,A_);D(this,aM,([t,r])=>{let[n,i]=[y(this,un).mapCenter.longitude,y(this,un).mapCenter.latitude],o=Pfe,a=Pfe*Math.cos(r*Math.PI/180),s=(t-n)*a,l=(r-i)*o;return{x:s,y:l}});w(this,"__LEGACY_NEAREST_SYNC",(t,r,n)=>{let i={...Afe,...n};try{Mfe.parse(i)}catch(c){ie.error(c);return}let o=lh(t);if(!o)return;let a=me(this,D_,aU).call(this,o,i),s=[],l={},u=[];for(let c of r){let p=ug(c,y(this,un),y(this,un).enterpriseMode);if(p)for(let d of p)l[d]||(l[d]=[]),l[d].push(c),u.push(d)}return n?.mode==="absolute-distance"?s=y(this,dg).call(this,o,a,r,i):s=y(this,lM).call(this,t,a,u,l,i),s.sort((c,p)=>c.distance-p.distance)});D(this,dg,(t,r,n,i)=>{let o=[],a=new Set(n.map(s=>s.__type));for(let s of r)for(let l of a){let u=y(this,A_).searchWithIncludedIds([t.longitude,t.latitude],l,y(this,un).mapName,s,n.filter(c=>c.__type===l).map(c=>c.id),i?.maxDistance??pg,i?.lineOfSight==="auto"?oU:i?.lineOfSight,i?.maxResults??1);if(u)for(let c of u)o.push({distance:c.distance,feature:y(this,un).getById(l,c.node.properties.parentId)||y(this,un).getById(l,c.node.properties.id)})}return o});D(this,sM,async(t,r,n,i,o)=>{let a=[];for(let s of r){let l,u=0;if(!qi.is(t)){let c=y(this,dg).call(this,t.anchorTarget,[s],y(this,un).getByType("node").filter(p=>p.floor.id===s),{limit:"same-floor",lineOfSight:o?.lineOfSight??!0,mode:"absolute-distance",maxDistance:o?.maxDistance??pg,maxResults:1});c.length>0&&(l=c[0].feature,u=c[0].distance)}if(l){let c=new Set,p=y(this,un).directions.navigator.findNearestNodesOnGraph(l.id,(o?.maxDistance??pg)-u,s,n,!1,o?.maxResults??iU);for(let d of p)for(let h of i[d.feature.properties.id])c.has(h.id)||(a.push({distance:d.distance+u,feature:h}),c.add(h.id))}}return a});D(this,lM,(t,r,n,i,o)=>{let a=[];for(let s of r){let l;if(qi.is(t)||(l=this.__LEGACY_NEAREST_SYNC(t,y(this,un).getByType("node"),{lineOfSight:o?.lineOfSight??!0,mode:"absolute-distance",maxDistance:o?.maxDistance??pg,maxResults:1})?.[0].feature),l){let u=y(this,un).directions.navigator.findNearestNodesOnGraph(l.id,o?.maxDistance??pg,s,n,o?.lineOfSight==="auto"?oU:o?.lineOfSight,o?.maxResults??iU);for(let c of u)for(let p of i[c.feature.properties.id])a.push({distance:c.distance,feature:p})}}return a});R(this,un,t),R(this,A_,new iM(y(this,un),y(this,aM)))}async nearest(t,r,n){let i={...Afe,...n};try{Mfe.parse(i)}catch(p){ie.error(p);return}let o=lh(t);if(!o)return;let a=me(this,D_,aU).call(this,o,i),s=[],l={},u=[],c=[];if(n?.mode==="absolute-distance")s=y(this,dg).call(this,o,a,r,i);else{for(let p of r)c.push(Ep(p,y(this,un),y(this,un).enterpriseMode).then(d=>{if(d)for(let h of d)l[h]||(l[h]=[]),l[h].push(p),u.push(h)}));await Promise.all(c),s=await y(this,sM).call(this,t,a,u,l,i)}return s.sort((p,d)=>p.distance-d.distance)}};un=new WeakMap,A_=new WeakMap,aM=new WeakMap,D_=new WeakSet,aU=function(t,r){let n=t.floorId?[t.floorId]:[];if(t.floorId==null)for(let i of y(this,un).getByType("floor-stack")){let o=i.defaultFloor;o&&n.push(o.id)}else if(r?.limit==="same-elevation"){let i=y(this,un).floorsById[t.floorId];if(i){let o=i?.elevation;o&&(n=y(this,un).getByType("floor-stack").map(a=>a.floors.find(s=>s.elevation===o)?.id).filter(Boolean))}}return n},dg=new WeakMap,sM=new WeakMap,lM=new WeakMap});var Lfe=f(()=>{"use strict";Dfe()});var L_,uM,Ffe=f(()=>{"use strict";uM=class{constructor(t){D(this,L_);R(this,L_,t||[])}get raw(){return y(this,L_)}};L_=new WeakMap});var ni,ye,or,fg,sU,nd,kfe=f(()=>{"use strict";Ql();Ffe();k1();R1();Do();fg=class fg extends gn{constructor(r,n){super(n.mvfData.id);w(this,"__type",fg.__type);w(this,"id","loc_");w(this,"name","");w(this,"externalId");w(this,"description");w(this,"logo");w(this,"phone");w(this,"social",[]);w(this,"images",[]);w(this,"links",[]);w(this,"website");w(this,"icon");D(this,ni);D(this,ye,{});D(this,or);R(this,ni,r),R(this,or,n.mvfData);for(let i in n.mvfData)i==="links"?this.links=n.mvfData.links.map(o=>new $p({mvfData:o})):i==="pictures"?this.images=n.mvfData.pictures.map(o=>o.url?new jp({mvfData:{...o,url:o.url??""},mapData:y(this,ni)}):void 0).filter(o=>o!=null):i==="website"?n.mvfData.website&&(this.website=new $p({mvfData:n.mvfData.website})):i==="icon"?n.mvfData.icon&&(this.icon=new jp({mvfData:{url:n.mvfData.icon},mapData:y(this,ni)})):Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),i)||Object.defineProperty(this,i,{enumerable:!0,get(){return y(this,or)[i]}})}static is(r){return r.__type===fg.__type}get spaces(){if(y(this,ye).spaces)return y(this,ye).spaces;if(y(this,or).spaces==null)return y(this,ye).spaces=[],y(this,ye).spaces;y(this,ye).spaces=[];for(let r=0;r<y(this,or).spaces.length;r++){let n=y(this,ni).getById("space",y(this,or).spaces[r].id);n&&y(this,ye).spaces.push(n)}return y(this,ye).spaces}get points(){if(y(this,ye).points)return y(this,ye).points;if(y(this,or).spaces==null)return y(this,ye).points=[],y(this,ye).points;y(this,ye).points=[];for(let r=0;r<y(this,or).spaces.length;r++){let n=y(this,ni).getById("point-of-interest",y(this,or).spaces[r].id);n&&y(this,ye).points.push(n)}return y(this,ye).points}get doors(){if(y(this,ye).doors)return y(this,ye).doors;if(y(this,or).entrances==null)return y(this,ye).doors=[],y(this,ye).doors;y(this,ye).doors=[];for(let r=0;r<y(this,or).entrances.length;r++){let n=y(this,ni).getById("door",y(this,or).entrances[r].id);n&&y(this,ye).doors.push(n)}return y(this,ye).doors}get connections(){if(y(this,ye).connections)return y(this,ye).connections;if(y(this,or).connections==null)return y(this,ye).connections=[],y(this,ye).connections;let r=new Set;for(let n=0;n<y(this,or).connections.length;n++){let i=y(this,or).connections[n],o=y(this,ni).mvfConnectionsById[i],s=(o==null?[]:o.nodes).map(l=>y(this,ni).getById("node",l)).filter(Boolean);for(let l of s){if(l==null)continue;let u=el([l.coordinate.longitude,l.coordinate.latitude]),p=(y(this,ni).connectionSpaceIdsByLatLon[u]??[]).map(d=>y(this,ni).connectionsById[d]).filter(d=>d!=null);for(let d of p)r.add(d)}}return y(this,ye).connections=Array.from(r),y(this,ye).connections}get annotations(){if(y(this,ye).annotations)return y(this,ye).annotations;if(y(this,or).annotations==null)return y(this,ye).annotations=[],y(this,ye).annotations;y(this,ye).annotations=[];for(let r=0;r<y(this,or).annotations.length;r++){let n=y(this,ni).getById("annotation",y(this,or).annotations[r].id);n&&y(this,ye).annotations.push(n)}return y(this,ye).annotations}get categories(){return y(this,ye).categories?y(this,ye).categories:y(this,or).categories==null?(y(this,ye).categories=[],y(this,ye).categories):(y(this,ye).categories=y(this,or).categories.map(r=>y(this,ni).getById("location-category",r)).filter(r=>r!=null),y(this,ye).categories)}get mapObjects(){return y(this,ye).mapObjects?y(this,ye).mapObjects:y(this,or).obstructions==null?(y(this,ye).mapObjects=[],y(this,ye).mapObjects):(y(this,ye).mapObjects=y(this,or).obstructions.map(r=>y(this,ni).getById("object",r.id)).filter(r=>r!=null),y(this,ye).mapObjects)}get areas(){return y(this,ye).areas?y(this,ye).areas:y(this,or).areas==null?(y(this,ye).areas=[],y(this,ye).areas):(y(this,ye).areas=y(this,or).areas.map(r=>y(this,ni).getById("area",r.id)).filter(r=>r!=null),y(this,ye).areas)}get focusTarget(){if(y(this,ye).focusTarget)return y(this,ye).focusTarget;let r=[];for(let n of this.spaces)r.push(n);for(let n of this.connections)r.push(...n.coordinates);for(let n of this.doors)r.push(n.focusTarget);for(let n of this.mapObjects)r.push(n.focusTarget);for(let n of this.annotations)r.push(n.focusTarget);for(let n of this.points)r.push(n.focusTarget);for(let n of this.areas)r.push(n.focusTarget);return y(this,ye).focusTarget=r,r}get openingHours(){return y(this,ye).openingHours?y(this,ye).openingHours:(y(this,ye).openingHours=new uM(y(this,or).openingHoursSpecification??[]),y(this,ye).openingHours)}get navigationTarget(){if(y(this,ye).navigationTarget)return y(this,ye).navigationTarget;let r=[];for(let n of this.spaces)r.push(n);for(let n of this.connections)r.push(...n.coordinates);for(let n of this.doors)r.push(n.focusTarget);for(let n of this.mapObjects)r.push(n.focusTarget);for(let n of this.annotations)r.push(n.focusTarget);for(let n of this.points)r.push(n.focusTarget);return y(this,ye).navigationTarget=r,r}toJSON(){return{__type:fg.__type,id:this.id,name:this.name}}};ni=new WeakMap,ye=new WeakMap,or=new WeakMap,w(fg,"__type","location-profile");sU=fg,nd=sU});var Cp,Io,Cf,hg,lU,N1,Ofe=f(()=>{"use strict";Ql();hg=class hg extends gn{constructor(r,n){super(n.mvfData.id);w(this,"__type",hg.__type);w(this,"id","cat_");w(this,"name","");w(this,"icon","");D(this,Cp);D(this,Io,{});D(this,Cf);R(this,Cp,r),R(this,Cf,n.mvfData);for(let i in n.mvfData)Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),i)||Object.defineProperty(this,i,{enumerable:!0,get(){return y(this,Cf)[i]}})}static is(r){return r.__type===hg.__type}get parent(){return y(this,Io).parent?y(this,Io).parent:(y(this,Io).parent=y(this,Cf).parent?y(this,Cp).getById("location-category",y(this,Cf).parent):void 0,y(this,Io).parent)}get children(){return y(this,Io).children?y(this,Io).children:(y(this,Io).children=y(this,Cp).locationCategoriesByParentId[this.id]||[],y(this,Io).children)}get locationProfiles(){if(y(this,Io).locationProfiles)return y(this,Io).locationProfiles;let r=[];for(let n of y(this,Cp).locationProfilesByCategoryId[this.id]||[]){let i=y(this,Cp).getById("location-profile",n.id);i&&r.push(i)}return y(this,Io).locationProfiles=r,r}toJSON(){return{__type:hg.__type,id:this.id,name:this.name}}};Cp=new WeakMap,Io=new WeakMap,Cf=new WeakMap,w(hg,"__type","location-category");lU=hg,N1=lU});var De,cM,Bfe,mg,yg,E_,Rfe,ar=f(()=>{"use strict";i7();a7();s7();l7();u7();p7();d7();M1();f7();h7();k1();R1();m7();y7();b7();_2();v7();_7();S7();Pe();I7();Au();Ya();XP();mc();Do();JP();Lfe();kfe();Ofe();E_=class extends Nt{constructor(r,n){super();D(this,cM);w(this,"Analytics");D(this,De,{});w(this,"Query");w(this,"mvf");w(this,"outdoorViewToken");w(this,"objectEntranceNodeIdsByObstructionId");w(this,"obstructionIdByEntranceId");w(this,"venue");w(this,"tokenManager");w(this,"directions");w(this,"enterpriseMode",!1);w(this,"nodesById");w(this,"spacesById");w(this,"floorsById");w(this,"floorStacksById");w(this,"facadesById");w(this,"facadesBySpaceId");w(this,"connectionsById");w(this,"objectsById");w(this,"doorsById");w(this,"pointsOfInterestById");w(this,"annotationsById");w(this,"areasById");w(this,"locationProfilesById");w(this,"locationCategoriesById");w(this,"locationProfilesByExternalId");w(this,"locationProfilesByCategoryId");w(this,"locationCategoriesByParentId");w(this,"doorsByNodeId");w(this,"mvfAnnotationsById");w(this,"mvfConnectionsById");w(this,"mvfConnectionsByNodeId");w(this,"mvfConnectionIdsByLatLon");w(this,"mvfEntrancesById");w(this,"mvfNodesById");w(this,"mvfObstructionById");w(this,"mvfSpacesById");w(this,"mvfFloorsById");w(this,"mvfFloorStacksById");w(this,"mvfAreasById");w(this,"spacesByExternalId");w(this,"nodesByExternalId");w(this,"objectsByExternalId");w(this,"poisByExternalId");w(this,"floorsByExternalId");w(this,"floorStacksByExternalId");w(this,"doorsByExternalId");w(this,"areasByExternalId");w(this,"connectionSpaceIdsByLatLon",{});w(this,"locationProfilesByAttachedFeatureId",{});w(this,"entranceNodeIdsBySpaceId",{});w(this,"locationsById",{});w(this,"categoriesById",{});w(this,"mvfLocationsByGeometryId",{});w(this,"locationIdsByNodeId",{});w(this,"spaceIdsByNodeId",{});w(this,"objectIdsByNodeId",{});w(this,"connectionsByExternalId",{});w(this,"locationsByExternalId",{});w(this,"categoriesByExternalId",{});w(this,"destinationNodesIdsBySpaceId",{});w(this,"mvfNodesByFloorId");w(this,"mvfSpacesByFloorId");w(this,"mvfPoisByFloorId");w(this,"mvfEntrancesByFloorId");w(this,"mvfAnnotationsByFloorId");w(this,"localePacksUrls");w(this,"currentLanguage");w(this,"languagePacks",{});w(this,"tilesets",{});w(this,"navigationFlags");w(this,"binaryBundle");w(this,"envControl");w(this,"getMapDataOptions");D(this,mg,new qe(0,0,"initializing"));w(this,"propTranslationCache",new Map);D(this,yg);w(this,"__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC",(r,n,i)=>this.__LEGACY_GET_DIRECTIONS_SYNC(r,n,{...i,multiDestination:!0}));w(this,"__LEGACY_GET_DIRECTIONS_SYNC",(r,n,i)=>{let{accessible:o=!1,multiDestination:a=!1}=i||{},s=Rfe(this.enterpriseMode,i),l=i?.zones||[],u={accessible:o,zones:l,smoothing:s,excludedConnections:i?.excludedConnections||[],connectionIdWeightMap:i?.connectionIdWeightMap||{}};if(a&&Array.isArray(n)){let c=Array.isArray(r)?r:[r],p=[];for(let d of n){let h=Array.isArray(d)?d:[d],m=this.directions.getDirectionsSync(c,h,u,this);if(!m){ie.error("getDirections failed due to missing directions for one of the segments");return}c=h,p.push(m)}return p}else{let c=Array.isArray(r)?r:[r],p=Array.isArray(n)?n:[n];if(Array.isArray(p[0])){ie.error("getDirections does not support multi-destination without multisegment option");return}c[0].id&&p[0].id&&this.Analytics.sendGetDirectionsEvent(c[0].id,p[0].id,o);try{return this.directions.getDirectionsSync(c,p,u,this)}catch(d){ie.error("Unable to get directions",d);return}}});w(this,"getDirections",async(r,n,i)=>{let{accessible:o=!1}=i||{},a=Rfe(this.enterpriseMode,i),s=i?.zones||[],l={accessible:o,zones:s,smoothing:a,excludedConnections:i?.excludedConnections||[],connectionIdWeightMap:i?.connectionIdWeightMap||{}},u=Array.isArray(r)?r:[r],c=Array.isArray(n)?n:[n];if(Array.isArray(c[0])){ie.error("getDirections does not support multi-destination without multisegment option");return}u[0].id&&c[0].id&&this.Analytics.sendGetDirectionsEvent(u[0].id,c[0].id,o);try{return this.directions.getDirections(u,c,l,this)}catch(p){ie.error("Unable to get directions",p);return}});w(this,"getDirectionsMultiDestination",async(r,n,i)=>Promise.resolve(this.__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC(r,n,i)));w(this,"transformImageRequest",async r=>{if(this.enterpriseMode||!this.getMapDataOptions)return{url:r};if(!t7(r))return{url:r};if(r7(r))return{url:r};let n=O1(r);if(!n)return{url:r};try{let o=(await this.tokenManager?.getSasTokensAsync())?.[n.mapId];if(o==null)throw new Error("SAS token not found");let[a]=r.split("?");return{url:`${a}?${o.token}`}}catch(i){return ie.error("Failed to append SAS token to image request. Requests for private images may fail.",i),{url:r}}});let i=n?.env??Im();if(this.envControl=i,this.binaryBundle=n?.binaryBundle,this.Analytics=new Zf,this.localePacksUrls=n?.localePacksUrls??{},this.mvf=r,this.outdoorViewToken=n?.outdoorViewToken,this.getMapDataOptions=n?.getMapDataOptions,r["tileset.json"]?.default!=null&&(this.tilesets[r["tileset.json"].default.key]=r["tileset.json"].default,i.updateTileServerBaseUrl(r["tileset.json"].default.url),r["tileset.json"].others!=null))for(let a of r["tileset.json"].others)this.tilesets[a.key]=a;this.navigationFlags=r["navigationFlags.json"]??{},this.enterpriseMode=n?.enterprise??!1,this.tokenManager=n?.tokenManager;let o=x7(r,this);if(this.nodesById=o.nodesById,this.spacesById=o.spacesById,this.floorsById=o.floorsById,this.floorStacksById=o.floorStacksById,this.facadesById=o.facadesById,this.facadesBySpaceId=o.facadesBySpaceId,this.connectionsById=o.connectionsById,this.objectsById=o.objectsById,this.doorsById=o.doorsById,this.pointsOfInterestById=o.poisById,this.annotationsById=o.annotationsById,this.areasById=o.areasById,this.locationProfilesById=o.locationProfilesById,this.locationCategoriesById=o.locationCategoriesById,this.locationProfilesByCategoryId=o.locationProfilesByCategoryId,this.locationCategoriesByParentId=o.locationCategoriesByParentId,this.spacesByExternalId=o.spacesByExternalId,this.nodesByExternalId=o.nodesByExternalId,this.objectsByExternalId=o.objectsByExternalId,this.floorsByExternalId=o.floorsByExternalId,this.locationProfilesByExternalId=o.locationProfilesByExternalId,this.floorStacksByExternalId=o.floorStacksByExternalId,this.poisByExternalId=o.poisByExternalId,this.doorsByExternalId=o.doorsByExternalId,this.areasByExternalId=o.areasByExternalId,this.mvfAnnotationsById=o.mvfAnnotationsById,this.mvfConnectionsById=o.mvfConnectionsById,this.mvfConnectionsByNodeId=o.mvfConnectionsByNodeId,this.mvfConnectionIdsByLatLon=o.mvfConnectionIdsByLatLon,this.mvfEntrancesById=o.mvfEntrancesById,this.mvfNodesById=o.mvfNodesById,this.mvfObstructionById=o.mvfObstructionById,this.mvfSpacesById=o.mvfSpacesById,this.mvfFloorsById=o.mvfFloorsById,this.mvfFloorStacksById=o.mvfFloorStacksById,this.mvfNodesByFloorId=o.mvfNodesByFloorId,this.mvfSpacesByFloorId=o.mvfSpacesByFloorId,this.mvfPoisByFloorId=o.mvfPoisByFloorId,this.mvfEntrancesByFloorId=o.mvfEntrancesByFloorId,this.mvfAnnotationsByFloorId=o.mvfAnnotationsByFloorId,this.mvfAreasById=o.mvfAreasById,this.doorsByNodeId=o.doorsByNodeId,this.objectEntranceNodeIdsByObstructionId=o.objectEntranceNodeIdsByObstructionId,this.obstructionIdByEntranceId=o.obstructionIdByEntranceId,this.connectionSpaceIdsByLatLon=o.connectionIdsByLatLon,this.locationProfilesByAttachedFeatureId=o.locationProfilesByAttachedFeatureId,this.entranceNodeIdsBySpaceId=o.entranceNodeIdsBySpaceId,this.spaceIdsByNodeId=o.spaceIdsByNodeId,this.objectIdsByNodeId=o.objectIdsByNodeId,this.destinationNodesIdsBySpaceId=o.destinationNodesIdsBySpaceId,this.enterpriseMode||YP()){let a=g7(r,this);if(this.locationsById=a.locationsById,this.categoriesById=a.categoriesById,this.mvfLocationsByGeometryId=a.mvfLocationsByGeometryId,this.locationIdsByNodeId=a.locationIdsByNodeId,this.connectionsByExternalId=a.connectionsByExternalId,this.locationsByExternalId=a.locationsByExternalId,this.categoriesByExternalId=a.categoriesByExternalId,a.venue.name!=null){this.venue=new a4(this,{mvfData:a.venue});let s={};for(let l in a.mvfLocationsById)s[l]=a.mvfLocationsById[l];for(let l in a.locationInstancesById)s[l]=a.locationInstancesById[l];this.languagePacks[this.venue.defaultLanguage.code]={type:"initial",optimized:{"enterprise-location":s,"enterprise-category":a.mvfCategoriesById,"floor-stack":o.mvfFloorStacksById,floor:o.mvfFloorsById}},n?.languagePacks?.forEach(({language:l,localePack:u})=>{this.languagePacks[l.code]=U2(u)}),this.currentLanguage=this.venue.defaultLanguage}}this.directions=new cg({nodes:r["node.geojson"],geojsonCollection:this.enterpriseMode&&r.enterprise?r.space:r.obstruction,connections:r["connection.json"],groupBy:"map",multiplicativeDistanceWeightScaling:!this.enterpriseMode,flagDeclarations:r["navigationFlags.json"]}),this.Query=new M_(this)}getEnv(){let r=this;return{get baseUri(){return r.envControl.getBaseUri()},get baseAuthUri(){return r.envControl.getBaseAuthUri()},get analyticsBaseUri(){return r.envControl.getAnalyticsBaseUri()},get tileServerUri(){return r.envControl.getTileServerUri()}}}get mapName(){return this.mvf["manifest.geojson"].features[0].properties.name}get organizationId(){return this.mvf["manifest.geojson"].features[0].properties.org_id??""}get mapCenter(){return y(this,mg).floorId==="initializing"&&R(this,mg,new qe(this.mvf["manifest.geojson"].features[0].geometry.coordinates[1],this.mvf["manifest.geojson"].features[0].geometry.coordinates[0])),y(this,mg)}get naturalBearing(){return this.mvf["manifest.geojson"].features[0].properties.naturalBearing??0}get spaces(){return y(this,De).spaces==null&&(y(this,De).spaces=globalThis.Object.values(this.spacesById)),y(this,De).spaces}get objects(){return y(this,De).objects==null&&(y(this,De).objects=globalThis.Object.values(this.objectsById)),y(this,De).objects}get connections(){return y(this,De).connections==null&&(y(this,De).connections=globalThis.Object.values(this.connectionsById)),y(this,De).connections}get floors(){return y(this,De).floors==null&&(y(this,De).floors=globalThis.Object.values(this.floorsById)),y(this,De).floors}get floorStacks(){return y(this,De).floorStacks==null&&(y(this,De).floorStacks=globalThis.Object.values(this.floorStacksById)),y(this,De).floorStacks}get facades(){return y(this,De).facades==null&&(y(this,De).facades=globalThis.Object.values(this.facadesById)),y(this,De).facades}get doors(){return y(this,De).doors==null&&(y(this,De).doors=globalThis.Object.values(this.doorsById)),y(this,De).doors}get pointsOfInterest(){return y(this,De).pointsOfInterest==null&&(y(this,De).pointsOfInterest=globalThis.Object.values(this.pointsOfInterestById)),y(this,De).pointsOfInterest}get annotations(){return y(this,De).annotations==null&&(y(this,De).annotations=globalThis.Object.values(this.annotationsById)),y(this,De).annotations}get areas(){return y(this,De).areas==null&&(y(this,De).areas=globalThis.Object.values(this.areasById)),y(this,De).areas}get nodes(){return y(this,De).nodes==null&&(y(this,De).nodes=globalThis.Object.values(this.nodesById)),y(this,De).nodes}get locations(){return y(this,De).locations==null&&(y(this,De).locations=globalThis.Object.values(this.locationsById)),globalThis.Object.values(this.locationsById)}get categories(){return y(this,De).categories==null&&(y(this,De).categories=globalThis.Object.values(this.categoriesById)),globalThis.Object.values(this.categoriesById)}get locationProfiles(){return y(this,De).locationProfiles==null&&(y(this,De).locationProfiles=globalThis.Object.values(this.locationProfilesById)),y(this,De).locationProfiles}get locationCategories(){return y(this,De).locationCategories==null&&(y(this,De).locationCategories=globalThis.Object.values(this.locationCategoriesById)),y(this,De).locationCategories}get mvfFloors(){return y(this,De).mvfFloors==null&&(y(this,De).mvfFloors=globalThis.Object.values(this.mvfFloorsById)),y(this,De).mvfFloors}get mvfFloorStacks(){return y(this,De).mvfFloorStacks==null&&(y(this,De).mvfFloorStacks=globalThis.Object.values(this.mvfFloorStacksById)),y(this,De).mvfFloorStacks}getByType(r){switch(r){case"location-profile":return this.locationProfiles;case"location-category":return this.locationCategories;case"area":return this.areas;case"node":return this.nodes;case"space":return this.spaces;case"door":return this.doors;case"floor":return this.floors;case"floor-stack":return this.floorStacks;case"connection":return this.connections;case"object":return this.objects;case"point-of-interest":return this.pointsOfInterest;case"annotation":return this.annotations;case"enterprise-location":return this.locations;case"enterprise-category":return this.categories;case"enterprise-venue":return this.venue;case"facade":return this.facades;default:return[]}}getById(r,n){let i={"location-profile":this.locationProfilesById,"location-category":this.locationCategoriesById,space:this.spacesById,floor:this.floorsById,"floor-stack":this.floorStacksById,facade:this.facadesById,node:this.nodesById,door:this.doorsById,connection:this.connectionsById,"mvf-connection":s=>me(this,cM,Bfe).call(this,this.mvfConnectionsById[s]),object:this.objectsById,"point-of-interest":this.pointsOfInterestById,annotation:this.annotationsById,area:this.areasById,"enterprise-location":this.locationsById,"enterprise-category":this.categoriesById},o=s=>{let l=i[s];if(l!=null)return typeof l=="function"?l(n):l[n]},a=()=>{for(let s of Object.keys(i)){let l=o(s);if(l!=null)return l}};return r==="unknown"?a():o(r)}getByExternalId(r,n){switch(r){case"location-profile":return this.locationProfilesByExternalId[n]??[];case"location-category":return[];case"space":return this.spacesByExternalId[n]??[];case"floor":return this.floorsByExternalId[n]??[];case"floor-stack":return this.floorStacksByExternalId[n]??[];case"node":return this.nodesByExternalId[n]??[];case"door":return this.doorsByExternalId[n]??[];case"connection":return this.connectionsByExternalId[n]??[];case"object":return this.objectsByExternalId[n]??[];case"point-of-interest":return this.poisByExternalId[n]??[];case"area":return this.areasByExternalId[n]??[];case"enterprise-location":return this.locationsByExternalId[n]??[];case"enterprise-category":return this.categoriesByExternalId[n]??[];default:return[]}}getMapDataById(r){return this.spacesById[r]??this.floorsById[r]??this.floorStacksById[r]??this.facadesById[r]??this.nodesById[r]??this.doorsById[r]??this.connectionsById[r]??this.objectsById[r]??this.pointsOfInterestById[r]??this.annotationsById[r]??this.areasById[r]}getMVFFeatureById(r,n){switch(r){case"space":return this.mvfSpacesById[n];case"node":return this.mvfNodesById[n];case"obstruction":return this.mvfObstructionById[n];case"floor":return this.mvfFloorsById[n];case"floor-stack":return this.mvfFloorStacksById[n];case"connection":return this.mvfConnectionsById[n];case"entrance":return this.mvfEntrancesById[n];case"annotation":return this.mvfAnnotationsById[n];case"area":return this.mvfAreasById[n];default:throw new Error(`Unknown MVF feature type: ${r}`)}}getMVFFeatureByNodeId(r,n){switch(r){case"connection":return this.mvfConnectionsByNodeId[n];default:throw new Error(`Unsupported MVF feature type: ${r}`)}}getMVFFeatureByType(r){switch(r){case"floor-stack":return this.mvfFloorStacks;case"floor":return this.mvfFloors;default:throw new Error(`Unsupported MVF feature type: ${r}`)}}getPropTranslation(r,n,i,o){if(!this.currentLanguage)return o;let{code:a}=this.currentLanguage,s=this.languagePacks[a]?.optimized?.[r];if(s){let l=s[i];if(l!=null&&l[n]!==void 0){let u=l[n];if(u!=null&&typeof u=="object"){if(typeof o=="object"&&typeof u=="object"&&!Array.isArray(u)){let c=y2(a+r+i+n.toString());if(this.propTranslationCache.has(c))return this.propTranslationCache.get(c);let p=c0(o,u,["id"]);return this.propTranslationCache.set(c,p),p}return u}return u}}return o}findPreferredLanguage(r){if(!this.venue)return;let n=eU(this.venue,r);return r?.languageCode!=null&&r.languageCode.toLowerCase()!==n.code.toLowerCase()&&ie.warn(`Language code "${r.languageCode}" could not be found in the venue. Using "${n.code}" instead.`),n}async changeLanguage(r){let n=r.toLowerCase();if(!n){ie.error("Language code must be defined.");return}if(!this.currentLanguage||!this.venue){ie.error("Changing the language is not supported for this map.");return}let i=this.currentLanguage.code,o=this.venue?.languages.find(({code:s})=>s.toLowerCase()===n.toLowerCase());if(!o){ie.warn(`Language code "${n}" could not be found in the venue.`);return}if(i===o.code)return;let a=this.languagePacks[o.code];if(!a){let s=this.localePacksUrls[o.code];if(!s){ie.error(`Locale pack URL not found for language code "${o.code}".`);return}y(this,yg)&&y(this,yg).abort();let l=new AbortController;R(this,yg,l);let u;try{u=await hq(s,{signal:l.signal})}catch(c){ie.error(`Failed to download language pack for language code "${o.code}".`,c);return}if(!u||l.signal.aborted)return;a=U2(u),this.languagePacks[o.code]=a}this.Analytics.sendChangeLanguageEvent({fromLanguage:this.currentLanguage.code}),this.currentLanguage=o,this.publish("language-change",this.currentLanguage)}getDistance(r,n){let i=lh(r),o=lh(n);return Wa([i.longitude,i.latitude],[o.longitude,o.latitude])}async toJSONBundle({downloadLanguagePacks:r=!0}={}){let n=[];if(r&&this.enterpriseMode){let i=new AbortController;for(let o of this.venue?.languages||[])try{if(this.localePacksUrls[o.code]){let a=await cL(this.localePacksUrls[o.code],{signal:i.signal}),s=await Tm(a);s&&n.push({language:{code:o.code,name:o.name},localePack:s})}}catch(a){ie.warn("failed downloading language pack",a)}}return{type:"json",options:{enterprise:this.enterpriseMode},languagePacks:n,main:this.mvf}}async toBinaryBundle({downloadLanguagePacks:r=!0}={}){if(!this.binaryBundle){ie.error("binary bundle not found");return}let n=[];if(r&&this.enterpriseMode){let i=new AbortController;for(let o of this.venue?.languages||[])try{if(this.localePacksUrls[o.code]){let a=await cL(this.localePacksUrls[o.code],{signal:i.signal});a&&n.push({language:{code:o.code,name:o.name},localePack:a})}}catch(a){ie.warn("failed downloading language pack",a)}}return{type:"binary",options:{enterprise:this.enterpriseMode},languagePacks:n,main:this.binaryBundle}}destroy(){for(let r of globalThis.Object.keys(y(this,De)))y(this,De)[r]=null;this.propTranslationCache.clear()}};De=new WeakMap,cM=new WeakSet,Bfe=function(r){let n=r?.nodes?.[0],i=this.getById("node",n);if(i==null)return;let o=el([i.coordinate.longitude,i.coordinate.latitude]);return this.connectionSpaceIdsByLatLon[o]?.map(s=>this.connectionsById[s]).find(s=>s!=null)},mg=new WeakMap,yg=new WeakMap;Rfe=(e,t)=>{let r=!e,n=t?.smoothing,o=n!=null?typeof n=="object"?n.enabled??r:n:r,a=typeof n=="object"?n.radius:void 0;return{enabled:o,radius:a??.75}}});var hhe=ui((F_,gg)=>{var j$e=200,Wfe="__lodash_hash_undefined__",G$e=800,H$e=16,Xfe=9007199254740991,qfe="[object Arguments]",Z$e="[object Array]",W$e="[object AsyncFunction]",X$e="[object Boolean]",q$e="[object Date]",Y$e="[object Error]",Yfe="[object Function]",J$e="[object GeneratorFunction]",K$e="[object Map]",Q$e="[object Number]",e9e="[object Null]",Jfe="[object Object]",t9e="[object Proxy]",r9e="[object RegExp]",n9e="[object Set]",i9e="[object String]",o9e="[object Undefined]",a9e="[object WeakMap]",s9e="[object ArrayBuffer]",l9e="[object DataView]",u9e="[object Float32Array]",c9e="[object Float64Array]",p9e="[object Int8Array]",d9e="[object Int16Array]",f9e="[object Int32Array]",h9e="[object Uint8Array]",m9e="[object Uint8ClampedArray]",y9e="[object Uint16Array]",g9e="[object Uint32Array]",x9e=/[\\^$.*+?()[\]{}|]/g,b9e=/^\[object .+?Constructor\]$/,v9e=/^(?:0|[1-9]\d*)$/,wr={};wr[u9e]=wr[c9e]=wr[p9e]=wr[d9e]=wr[f9e]=wr[h9e]=wr[m9e]=wr[y9e]=wr[g9e]=!0;wr[qfe]=wr[Z$e]=wr[s9e]=wr[X$e]=wr[l9e]=wr[q$e]=wr[Y$e]=wr[Yfe]=wr[K$e]=wr[Q$e]=wr[Jfe]=wr[r9e]=wr[n9e]=wr[i9e]=wr[a9e]=!1;var Kfe=typeof global=="object"&&global&&global.Object===Object&&global,_9e=typeof self=="object"&&self&&self.Object===Object&&self,R_=Kfe||_9e||Function("return this")(),Qfe=typeof F_=="object"&&F_&&!F_.nodeType&&F_,k_=Qfe&&typeof gg=="object"&&gg&&!gg.nodeType&&gg,ehe=k_&&k_.exports===Qfe,uU=ehe&&Kfe.process,zfe=function(){try{var e=k_&&k_.require&&k_.require("util").types;return e||uU&&uU.binding&&uU.binding("util")}catch{}}(),Nfe=zfe&&zfe.isTypedArray;function the(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function S9e(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function w9e(e){return function(t){return e(t)}}function T9e(e,t){return e?.[t]}function I9e(e,t){return function(r){return e(t(r))}}var E9e=Array.prototype,C9e=Function.prototype,fM=Object.prototype,cU=R_["__core-js_shared__"],hM=C9e.toString,ic=fM.hasOwnProperty,Ufe=function(){var e=/[^.]+$/.exec(cU&&cU.keys&&cU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),rhe=fM.toString,P9e=hM.call(Object),M9e=RegExp("^"+hM.call(ic).replace(x9e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pM=ehe?R_.Buffer:void 0,$fe=R_.Symbol,Vfe=R_.Uint8Array,jfe=pM?pM.allocUnsafe:void 0,nhe=I9e(Object.getPrototypeOf,Object),Gfe=Object.create,A9e=fM.propertyIsEnumerable,D9e=E9e.splice,Pf=$fe?$fe.toStringTag:void 0,dM=function(){try{var e=gU(Object,"defineProperty");return e({},"",{}),e}catch{}}(),L9e=pM?pM.isBuffer:void 0,Hfe=Math.max,F9e=Date.now,ihe=gU(R_,"Map"),O_=gU(Object,"create"),k9e=function(){function e(){}return function(t){if(!nc(t))return{};if(Gfe)return Gfe(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Mf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function O9e(){this.__data__=O_?O_(null):{},this.size=0}function R9e(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function B9e(e){var t=this.__data__;if(O_){var r=t[e];return r===Wfe?void 0:r}return ic.call(t,e)?t[e]:void 0}function z9e(e){var t=this.__data__;return O_?t[e]!==void 0:ic.call(t,e)}function N9e(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=O_&&t===void 0?Wfe:t,this}Mf.prototype.clear=O9e;Mf.prototype.delete=R9e;Mf.prototype.get=B9e;Mf.prototype.has=z9e;Mf.prototype.set=N9e;function oc(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function U9e(){this.__data__=[],this.size=0}function $9e(e){var t=this.__data__,r=mM(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():D9e.call(t,r,1),--this.size,!0}function V9e(e){var t=this.__data__,r=mM(t,e);return r<0?void 0:t[r][1]}function j9e(e){return mM(this.__data__,e)>-1}function G9e(e,t){var r=this.__data__,n=mM(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}oc.prototype.clear=U9e;oc.prototype.delete=$9e;oc.prototype.get=V9e;oc.prototype.has=j9e;oc.prototype.set=G9e;function xg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function H9e(){this.size=0,this.__data__={hash:new Mf,map:new(ihe||oc),string:new Mf}}function Z9e(e){var t=gM(this,e).delete(e);return this.size-=t?1:0,t}function W9e(e){return gM(this,e).get(e)}function X9e(e){return gM(this,e).has(e)}function q9e(e,t){var r=gM(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}xg.prototype.clear=H9e;xg.prototype.delete=Z9e;xg.prototype.get=W9e;xg.prototype.has=X9e;xg.prototype.set=q9e;function bg(e){var t=this.__data__=new oc(e);this.size=t.size}function Y9e(){this.__data__=new oc,this.size=0}function J9e(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function K9e(e){return this.__data__.get(e)}function Q9e(e){return this.__data__.has(e)}function eVe(e,t){var r=this.__data__;if(r instanceof oc){var n=r.__data__;if(!ihe||n.length<j$e-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xg(n)}return r.set(e,t),this.size=r.size,this}bg.prototype.clear=Y9e;bg.prototype.delete=J9e;bg.prototype.get=K9e;bg.prototype.has=Q9e;bg.prototype.set=eVe;function tVe(e,t){var r=hU(e),n=!r&&fU(e),i=!r&&!n&&uhe(e),o=!r&&!n&&!i&&phe(e),a=r||n||i||o,s=a?S9e(e.length,String):[],l=s.length;for(var u in e)(t||ic.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||she(u,l)))&&s.push(u);return s}function pU(e,t,r){(r!==void 0&&!xM(e[t],r)||r===void 0&&!(t in e))&&mU(e,t,r)}function rVe(e,t,r){var n=e[t];(!(ic.call(e,t)&&xM(n,r))||r===void 0&&!(t in e))&&mU(e,t,r)}function mM(e,t){for(var r=e.length;r--;)if(xM(e[r][0],t))return r;return-1}function mU(e,t,r){t=="__proto__"&&dM?dM(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var nVe=mVe();function yM(e){return e==null?e===void 0?o9e:e9e:Pf&&Pf in Object(e)?yVe(e):SVe(e)}function Zfe(e){return B_(e)&&yM(e)==qfe}function iVe(e){if(!nc(e)||vVe(e))return!1;var t=bU(e)?M9e:b9e;return t.test(EVe(e))}function oVe(e){return B_(e)&&che(e.length)&&!!wr[yM(e)]}function aVe(e){if(!nc(e))return _Ve(e);var t=lhe(e),r=[];for(var n in e)n=="constructor"&&(t||!ic.call(e,n))||r.push(n);return r}function yU(e,t,r,n,i){e!==t&&nVe(t,function(o,a){if(i||(i=new bg),nc(o))sVe(e,t,a,r,yU,n,i);else{var s=n?n(dU(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),pU(e,a,s)}},dhe)}function sVe(e,t,r,n,i,o,a){var s=dU(e,r),l=dU(t,r),u=a.get(l);if(u){pU(e,r,u);return}var c=o?o(s,l,r+"",e,t,a):void 0,p=c===void 0;if(p){var d=hU(l),h=!d&&uhe(l),m=!d&&!h&&phe(l);c=l,d||h||m?hU(s)?c=s:CVe(s)?c=dVe(s):h?(p=!1,c=uVe(l,!0)):m?(p=!1,c=pVe(l,!0)):c=[]:PVe(l)||fU(l)?(c=s,fU(s)?c=MVe(s):(!nc(s)||bU(s))&&(c=gVe(l))):p=!1}p&&(a.set(l,c),i(c,l,n,o,a),a.delete(l)),pU(e,r,c)}function ohe(e,t){return TVe(wVe(e,t,fhe),e+"")}var lVe=dM?function(e,t){return dM(e,"toString",{configurable:!0,enumerable:!1,value:LVe(t),writable:!0})}:fhe;function uVe(e,t){if(t)return e.slice();var r=e.length,n=jfe?jfe(r):new e.constructor(r);return e.copy(n),n}function cVe(e){var t=new e.constructor(e.byteLength);return new Vfe(t).set(new Vfe(e)),t}function pVe(e,t){var r=t?cVe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function dVe(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function fVe(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(r[s],e[s],s,r,e):void 0;l===void 0&&(l=e[s]),i?mU(r,s,l):rVe(r,s,l)}return r}function hVe(e){return ohe(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&xVe(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t})}function mVe(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(r(o[l],l,o)===!1)break}return t}}function ahe(e,t,r,n,i,o){return nc(e)&&nc(t)&&(o.set(t,e),yU(e,t,void 0,ahe,o),o.delete(t)),e}function gM(e,t){var r=e.__data__;return bVe(t)?r[typeof t=="string"?"string":"hash"]:r.map}function gU(e,t){var r=T9e(e,t);return iVe(r)?r:void 0}function yVe(e){var t=ic.call(e,Pf),r=e[Pf];try{e[Pf]=void 0;var n=!0}catch{}var i=rhe.call(e);return n&&(t?e[Pf]=r:delete e[Pf]),i}function gVe(e){return typeof e.constructor=="function"&&!lhe(e)?k9e(nhe(e)):{}}function she(e,t){var r=typeof e;return t=t??Xfe,!!t&&(r=="number"||r!="symbol"&&v9e.test(e))&&e>-1&&e%1==0&&e<t}function xVe(e,t,r){if(!nc(r))return!1;var n=typeof t;return(n=="number"?xU(r)&&she(t,r.length):n=="string"&&t in r)?xM(r[t],e):!1}function bVe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function vVe(e){return!!Ufe&&Ufe in e}function lhe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||fM;return e===r}function _Ve(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function SVe(e){return rhe.call(e)}function wVe(e,t,r){return t=Hfe(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=Hfe(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),the(e,this,s)}}function dU(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var TVe=IVe(lVe);function IVe(e){var t=0,r=0;return function(){var n=F9e(),i=H$e-(n-r);if(r=n,i>0){if(++t>=G$e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function EVe(e){if(e!=null){try{return hM.call(e)}catch{}try{return e+""}catch{}}return""}function xM(e,t){return e===t||e!==e&&t!==t}var fU=Zfe(function(){return arguments}())?Zfe:function(e){return B_(e)&&ic.call(e,"callee")&&!A9e.call(e,"callee")},hU=Array.isArray;function xU(e){return e!=null&&che(e.length)&&!bU(e)}function CVe(e){return B_(e)&&xU(e)}var uhe=L9e||FVe;function bU(e){if(!nc(e))return!1;var t=yM(e);return t==Yfe||t==J$e||t==W$e||t==t9e}function che(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Xfe}function nc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function B_(e){return e!=null&&typeof e=="object"}function PVe(e){if(!B_(e)||yM(e)!=Jfe)return!1;var t=nhe(e);if(t===null)return!0;var r=ic.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&hM.call(r)==P9e}var phe=Nfe?w9e(Nfe):oVe;function MVe(e){return fVe(e,dhe(e))}var AVe=ohe(function(e){return e.push(void 0,ahe),the(DVe,void 0,e)});function dhe(e){return xU(e)?tVe(e,!0):aVe(e)}var DVe=hVe(function(e,t,r,n){yU(e,t,r,n)});function LVe(e){return function(){return e}}function fhe(e){return e}function FVe(){return!1}gg.exports=AVe});var xhe={};Fr(xhe,{InternalSearch:()=>vU,removeAccents:()=>bM});function kVe(e,{placesResult:t,locationsResult:r,categoriesResult:n}){let i=t.reduce((s,{id:l,match:u,score:c,__type:p})=>{let d=e.getById(p,l);return d!=null&&!qi.is(d)&&!yh.is(d)&&!Ao.is(d)&&!ca.is(d)&&!vh.is(d)&&s.push({type:d.__type,match:u,score:c,item:d}),s},[]),o;if(r){o=[];for(let{id:s,match:l,score:u}of r){let c=e.getById("enterprise-location",s);c&&o.push({type:c.__type,match:l,score:u,item:c})}}let a;if(n){a=[];for(let{id:s,match:l,score:u}of n){let c=e.getById("enterprise-category",s);c&&a.push({type:c.__type,match:l,score:u,item:c})}}return{places:i,enterpriseLocations:o,enterpriseCategories:a}}function bM(e){return e.normalize("NFD").replace(/[\u0300-\u036f|\u2019|\u0027|\']/g,"").toLowerCase()}function RVe(e){let t=new Rp({fields:["name","description"],storeFields:["id","__type"],searchOptions:{fuzzy:.2,prefix:!0,boost:{name:2},combineWith:"AND"},extractField:(a,s)=>{let l=a[s];return typeof l=="string"?bM(l):a[s]},processTerm:a=>NVe.has(a)?"":a.toLowerCase()}),r=e.getByType("enterprise-location"),n;r&&(n=new Rp({fields:["name","tags","description"],storeFields:["id","__type"],searchOptions:{combineWith:"OR",prefix:!0,fuzzy:.2,boost:{name:3,tags:2,description:1}},extractField:(a,s)=>Array.isArray(a[s])?a[s].join(" "):typeof a[s]=="string"?bM(a[s]):a[s]}));let i=e.getByType("enterprise-category"),o;return i&&(o=new Rp({fields:["name","description","locations.name"],storeFields:["id","__type"],extractField(a,s){return s==="locations.name"?a.locations.reduce((u,c)=>u+` ${mhe} `+c.name,"")+` ${mhe}`:typeof a[s]=="string"?bM(a[s]):a[s]},searchOptions:{combineWith:"OR",prefix:!0,fuzzy:.2,boost:{name:2,"locations.name":2}}})),{enterpriseCategories:o,enterpriseLocations:n,places:t}}var yhe,z_,vM,ghe,vU,OVe,BVe,zVe,NVe,mhe,bhe=f(()=>{"use strict";Z8();ar();yhe=Ie(hhe(),1);xr();Pe();vU=class{constructor(t){D(this,vM);w(this,"mapData");w(this,"indexes");w(this,"ready");D(this,z_);this.mapData=t,this.indexes=RVe(t),this.ready=this.populate(),R(this,z_,jg(me(this,vM,ghe).bind(this),2e3))}async populate(){let{places:t,enterpriseLocations:r,enterpriseCategories:n}=this.indexes,i=this.mapData,o=[];return t.removeAll(),o=o.concat([t.addAllAsync(i.getByType("space")),t.addAllAsync(i.getByType("point-of-interest")),t.addAllAsync(i.getByType("object")),t.addAllAsync(i.getByType("connection")),t.addAllAsync(i.getByType("floor")),t.addAllAsync(i.getByType("door")),t.addAllAsync(i.getByType("annotation")),t.addAllAsync(i.getByType("area"))]),r&&(r?.removeAll(),o.push(r.addAllAsync(i.getByType("enterprise-location")))),n&&(n?.removeAll(),o.push(n.addAllAsync(i.getByType("enterprise-category")))),Promise.all(o)}async search(t,r={}){await this.ready,BVe.parse(r);let n=(0,yhe.default)({},r,OVe),i=this.indexes.places.search(t,{fields:Object.keys(n.places.fields).filter(l=>n.places.fields[l])});n.places.limit&&(i=i.slice(0,n.places.limit));let o=this.indexes.enterpriseLocations?.search(t,{fields:Object.keys(n.enterpriseLocations.fields).filter(l=>n.enterpriseLocations.fields[l])});o&&n.enterpriseLocations.limit&&(o=o.slice(0,n.enterpriseLocations.limit));let a=this.indexes.enterpriseCategories?.search(t,{fields:Object.keys(n.enterpriseCategories.fields).filter(l=>n.enterpriseCategories.fields[l])});a&&n.enterpriseCategories.limit&&(a=a.slice(0,n.enterpriseCategories.limit));let s=kVe(this.mapData,{placesResult:i,locationsResult:o,categoriesResult:a});return y(this,z_).call(this,t),s}async suggest(t,r={}){await this.ready,zVe.parse(r);let n=[],{places:{enabled:i=!0}={},enterpriseLocations:{enabled:o=!0}={}}=r;return o&&this.indexes.enterpriseLocations&&this.indexes.enterpriseLocations.autoSuggest(t,{fields:["name","tags"],combineWith:"AND",prefix:!0,boost:{name:2,tags:1}}).forEach(a=>n.push(a)),i&&this.indexes.places.autoSuggest(t,{fields:["name"],combineWith:"AND",prefix:!0}).forEach(a=>n.push(a)),n.sort((a,s)=>s.score-a.score),this.mapData.Analytics.capture("$query-suggest",{query:t,suggestions:n.map(a=>a.suggestion)}),n}};z_=new WeakMap,vM=new WeakSet,ghe=function(t){this.mapData.Analytics.capture("$query-search",{query:t})};OVe={places:{fields:{name:!0,description:!0}},enterpriseCategories:{fields:{name:!0,description:!1,"locations.name":!0}},enterpriseLocations:{fields:{name:!0,tags:!0,description:!0}}};BVe=C.object({places:C.object({fields:C.object({name:C.boolean().optional(),description:C.boolean().optional()}).optional(),limit:C.number().positive().optional()}).optional(),enterpriseCategories:C.object({fields:C.object({name:C.boolean().optional(),description:C.boolean().optional(),"locations.name":C.boolean().optional()}).optional(),limit:C.number().positive().optional()}).optional(),enterpriseLocations:C.object({fields:C.object({name:C.boolean().optional(),tags:C.boolean().optional(),description:C.boolean().optional()}).optional(),limit:C.number().positive().optional()}).optional()}),zVe=C.object({places:C.object({enabled:C.boolean().optional()}).optional(),enterpriseLocations:C.object({enabled:C.boolean().optional()}).optional()}),NVe=new Set(["the","an","and","or","of","in","on","at","to","from","with","by","for"]),mhe=""});var U_,$_,V_,N_,vhe=f(()=>{"use strict";Pe();N_=class{constructor(t,r,{enabled:n=!1}={}){D(this,U_);w(this,"searchInstance");D(this,$_);D(this,V_);w(this,"enabled",!1);R(this,U_,t),R(this,$_,r),R(this,V_,()=>{this.searchInstance?.then(i=>i.populate())}),n&&this.enable()}async query(t,r={}){if(this.enabled||await this.enable(),!this.searchInstance)return ie.error("Search should be enabled by now"),{places:[],enterpriseLocations:[],enterpriseCategories:[]};try{return await(await this.searchInstance).search(t,r)}catch(n){return ie.error("Search.query failed due to",n),{places:[],enterpriseLocations:[],enterpriseCategories:[]}}}async suggest(t,r={}){if(this.enabled||await this.enable(),!this.searchInstance)return ie.error("Search should be enabled by now"),[];try{return await(await this.searchInstance).suggest(t,r)}catch(n){return ie.error("Search.suggest failed due to",n),[]}}async enable(){this.enabled||(this.enabled=!0,this.searchInstance||(this.searchInstance=Promise.resolve().then(()=>(bhe(),xhe)).then(({InternalSearch:t})=>new t(y(this,U_)))),y(this,$_).on("language-change",y(this,V_)),await this.searchInstance)}};U_=new WeakMap,$_=new WeakMap,V_=new WeakMap});var _he=f(()=>{"use strict";vhe()});var UVe,Af,Tr,_U,KP,S_=f(()=>{"use strict";_2();yc();_he();UVe=new WeakMap,_U=class{constructor(t,{search:r}={}){D(this,Af);D(this,Tr);w(this,"Analytics");w(this,"Search");w(this,"Query");w(this,"internal");w(this,"on",(t,r)=>{y(this,Af).on(t,r)});w(this,"off",(t,r)=>{y(this,Af).off(t,r)});w(this,"__LEGACY_GET_DIRECTIONS_SYNC",(t,r,n)=>y(this,Tr).__LEGACY_GET_DIRECTIONS_SYNC(t,r,n));w(this,"getDirections",(t,r,n)=>y(this,Tr).getDirections(t,r,n));w(this,"__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC",(t,r,n)=>y(this,Tr).__LEGACY_GET_DIRECTIONS_MULTI_DESTINATION_SYNC(t,r,n));w(this,"getDirectionsMultiDestination",(t,r,n)=>y(this,Tr).getDirectionsMultiDestination(t,r,n));R(this,Af,new Nt),R(this,Tr,t),UVe.set(this,t),this.Analytics=new Wg(t.Analytics),this.Query=t.Query,this.internal=t,this.Search=new N_(this,t,{enabled:r?.enabled}),y(this,Tr).on("language-change",n=>{y(this,Af).publish("language-change",n)})}getEnv(){return y(this,Tr).getEnv()}getAccessToken(){return y(this,Tr).tokenManager?.getAccessToken().token}get mapName(){return y(this,Tr).mapName}get mapId(){return y(this,Tr).getMapDataOptions?.mapId}get mapCenter(){return y(this,Tr).mapCenter}get organizationId(){return y(this,Tr).organizationId}get outdoorViewToken(){return y(this,Tr).outdoorViewToken}getByType(t){return y(this,Tr).getByType(t)}getById(t,r){return y(this,Tr).getById(t,r)}getByExternalId(t,r){return y(this,Tr).getByExternalId(t,r)}getGeoJSON(t){return t.geoJSON}async changeLanguage(t){return y(this,Tr).changeLanguage(t)}get currentLanguage(){return y(this,Tr).currentLanguage}get naturalBearing(){return y(this,Tr).naturalBearing??0}getDistance(t,r){return y(this,Tr).getDistance(t,r)}toBinaryBundle({downloadLanguagePacks:t=!0}={}){return y(this,Tr).toBinaryBundle({downloadLanguagePacks:t})}toJSONBundle({downloadLanguagePacks:t=!0}={}){return y(this,Tr).toJSONBundle({downloadLanguagePacks:t})}};Af=new WeakMap,Tr=new WeakMap;KP=_U});var Mde,tU=f(()=>{"use strict";S_();ar();Pe();Au();QN();JP();Mde=async(e,t)=>{let r=("mvfVersion"in(t??{})?t?.mvfVersion:void 0)??("options"in e&&"version"in(e.options??{})?e.options?.version:void 0),n={prefetchTokens:!0,...t||{},mvfVersion:r},i,o=Im();o.updateByUserOption(n);let a={};if("type"in e&&typeof e.type=="string"){if(a.enterprise=e.options?.enterprise,e.type==="binary"&&e.main instanceof Uint8Array){i=await wT(e.main,n.mvfVersion),a.languagePacks=[];for(let m of e.languagePacks??[])m.localePack instanceof Uint8Array&&a.languagePacks.push({language:m.language,localePack:await Tm(m.localePack)})}else if(e.type==="json")i=e.main,a.languagePacks=e.languagePacks??[];else throw new Error("Invalid backup type");e.type==="binary"&&e.main instanceof Uint8Array&&(a.binaryBundle=e.main)}else i=e,a.enterprise=i.enterprise!=null;o.setEnterprise(a.enterprise??!1);let s=fL(i),l=s.length>0?s:[n.mapId];n.baseAuthUri=o.getBaseAuthUri();let u=new w_(l,{...n,enterprise:a.enterprise}),c;if("accessToken"in n&&n.accessToken)c=n.accessToken;else if("key"in n&&"secret"in n){let m;try{m=await u.getAccessTokenAsync()}catch(x){ie.error("Failed getting token during hydrateMapData",x)}c=m?.token||""}if(a.outdoorViewToken=c,a.env=o,a.getMapDataOptions=n,n.prefetchTokens)try{await u.readySync()}catch(m){ie.error("Failed to ready token manager!",m)}YP()&&(a.enterprise&&ie.warn("forceEnterpriseLocations is enabled, but the map is already an enterprise map!"),n.mvfVersion!=="3.0.0"&&ie.warn("mvfVersion must be '3.0.0' when forceEnterpriseLocations is enabled!"));let p=new E_(i,a);c&&p.Analytics.init({accessToken:c,mapId:n.mapId,key:"key"in n?n.key:void 0,secret:"secret"in n?n.secret:void 0,...n.analytics,baseUri:o.getAnalyticsBaseUri(),context:n.analytics?.context});let d=new KP(p),h=p.findPreferredLanguage({languageCode:n.language,fallbackToNavigatorLanguage:!1});if(h)try{await d.changeLanguage(h.code)}catch{}return typeof t?.onMVFParsed=="function"&&t.onMVFParsed(i),d}});tU();Au();S_();I_();M1();export{qe as Coordinate,tc as Directions,KP as MapData,Mde as hydrateMapData,wT as unzipAndParseMVFv2};
